{
	"auto_complete":
	{
		"selected_items":
		[
			[
				"QUICKJS_MO",
				"QUICKJS_MODULE_CFLAGS"
			],
			[
				"check_cxx",
				"check_cxx_standard_flag"
			],
			[
				"check_func",
				"check_function_exists"
			],
			[
				"contour",
				"contour_proto"
			],
			[
				"dst",
				"dst_pts"
			],
			[
				"CXX_",
				"CXX_STANDARD_VALUE"
			],
			[
				"JS_SetP",
				"JS_SetPropertyUint32"
			],
			[
				"process",
				"processor_or_index"
			],
			[
				"proces",
				"processor_or_index"
			],
			[
				"w",
				"width"
			],
			[
				"FUNC_TO",
				"FUNC_TOARRAY"
			],
			[
				"JSInpu",
				"JSInputOutputArray"
			],
			[
				"JSIn",
				"JSInputOutputArray"
			],
			[
				"JS_Throw",
				"JS_ThrowInternalError"
			],
			[
				"typed",
				"typedarray_ctor"
			],
			[
				"JS_GetP",
				"JS_GetPropertyStr"
			],
			[
				"depe",
				"dependent_scope_decl_ref_expr"
			],
			[
				"com",
				"compound_stmt"
			],
			[
				"CXXConstruc",
				"CXXConstructorDecl"
			],
			[
				"refere",
				"referencedDecl"
			],
			[
				"cons",
				"console"
			],
			[
				"Acc",
				"AccessSpecDecl"
			],
			[
				"value",
				"valueCategory"
			],
			[
				"ini",
				"initializers"
			],
			[
				"res",
				"RestElement"
			],
			[
				"arg",
				"argc"
			],
			[
				"instru",
				"instrument"
			],
			[
				"defaul",
				"defaultExport"
			],
			[
				"getBy",
				"getByIdOrName"
			]
		]
	},
	"buffers":
	[
		{
			"contents": "JSMatIteratorData\n  js_mat_free_func\n  js_mat_sizes\n  js_mat_dimensions\n  js_mat_track\n  js_mat_new\n  js_mat_wrap\n  js_mat_data\n  js_mat_print_data\n  js_mat_dump\n  js_mat_params\n  js_mat_ctor\n  js_mat_funcs\n  js_mat_expr\n  js_mat_init\n  js_mat_get\n  js_mat_get\n  js_mat_get_wh\n  js_mat_at\n  js_mat_set\n  js_mat_set_to\n  js_mat_get_props\n  js_mat_tostring\n  js_mat_inspect\n  js_mat_getrotationmatrix2d\n  js_mat_convert_to\n  js_mat_copy_to\n  js_mat_reshape\n  js_mat_getumat\n  js_mat_class_func\n  js_mat_fill\n  js_mat_class_create\n  js_mat_buffer\n  js_mat_array\n  js_mat_call\n  js_mat_finalizer\n  js_mat_iterator_new\n  js_mat_iterator_dump\n  js_mat_iterator_next\n  js_mat_iterator_finalizer\n  js_mat_iterator_dup\nJS_CGETSET_MAGIC_DEF\nJS_CGETSET_MAGIC_DEF\nJS_CGETSET_MAGIC_DEF\nJS_CGETSET_MAGIC_DEF\nJS_CGETSET_MAGIC_DEF\nJS_CGETSET_MAGIC_DEF\nJS_CGETSET_MAGIC_DEF\nJS_CGETSET_MAGIC_DEF\nJS_CGETSET_MAGIC_DEF\nJS_CGETSET_MAGIC_DEF\nJS_CGETSET_MAGIC_DEF\nJS_CGETSET_MAGIC_DEF\nJS_CGETSET_MAGIC_DEF\nJS_CGETSET_DEF\nJS_CGETSET_DEF\nJS_CFUNC_MAGIC_DEF\nJS_CFUNC_MAGIC_DEF\nJS_CFUNC_MAGIC_DEF\nJS_CFUNC_MAGIC_DEF\nJS_CFUNC_MAGIC_DEF\nJS_CFUNC_MAGIC_DEF\nJS_CFUNC_MAGIC_DEF\nJS_CFUNC_MAGIC_DEF\nJS_CFUNC_MAGIC_DEF\nJS_CFUNC_MAGIC_DEF\nJS_CFUNC_MAGIC_DEF\nJS_CFUNC_MAGIC_DEF\nJS_CFUNC_MAGIC_DEF\nJS_CFUNC_MAGIC_DEF\nJS_CFUNC_MAGIC_DEF\nJS_CFUNC_MAGIC_DEF\nJS_CFUNC_MAGIC_DEF\nJS_CFUNC_MAGIC_DEF\nJS_CFUNC_MAGIC_DEF\nJS_CFUNC_MAGIC_DEF\nJS_CFUNC_DEF\nJS_CFUNC_DEF\nJS_CFUNC_DEF\nJS_CFUNC_DEF\nJS_CFUNC_DEF\nJS_CFUNC_DEF\nJS_CFUNC_DEF\nJS_CFUNC_DEF\nJS_CFUNC_MAGIC_DEF\nJS_CFUNC_MAGIC_DEF\nJS_CFUNC_MAGIC_DEF\nJS_ALIAS_DEF\nJS_ALIAS_DEF\nJS_PROP_STRING_DEF\nJS_ITERATOR_NEXT_DEF\nJS_PROP_STRING_DEF\nJS_CFUNC_DEF\nJS_CFUNC_DEF\nJS_CFUNC_MAGIC_DEF\nJS_CFUNC_MAGIC_DEF\nJS_CFUNC_MAGIC_DEF\nJS_CFUNC_MAGIC_DEF\nJS_CFUNC_MAGIC_DEF\nJS_CFUNC_MAGIC_DEF\nJS_CFUNC_MAGIC_DEF\nJS_CFUNC_MAGIC_DEF\nJS_CFUNC_MAGIC_DEF\nJS_PROP_INT32_DEF\nCV_MAKETYPE\n  js_mat_init\n  js_mat_export\nJS_INIT_MODULE\nJS_INIT_MODULE\nJS_INIT_MODULE",
			"settings":
			{
				"buffer_size": 1940,
				"line_ending": "Unix",
				"name": "ùåÜ Outline",
				"scratch": true
			},
			"undo_stack":
			[
				[
					725,
					1,
					"outline_refresh",
					{
						"path": "/home/roman/Projects/qjs-opencv/LICENSE",
						"symkeys":
						[
						],
						"symlist":
						[
						]
					},
					"AgAAAAAAAAAAAAAAAAAAAAAAAAAjCAAASlNCSU5ESU5HU19IUFAKSlNSZWN0RGF0YUQKSlNNYXREYXRhCkpTVU1hdERhdGEKSlNTaXplRGF0YUQKSlNWaWRlb0NhcHR1cmVEYXRhCkpTVGlja01ldGVyRGF0YQpKU0NMQUhFRGF0YQpKU0lucHV0QXJyYXkKSlNPdXRwdXRBcnJheQpKU0lucHV0T3V0cHV0QXJyYXkKSlNMaW5lVHJhaXRzCiAgYXJyYXlfdHlwZQogIHZlY3Rvcl90eXBlCiAgc2NhbGFyX3R5cGUKVklTSUJMRQogIF9fZGVjbHNwZWMKSElEREVOClZJU0lCTEUKICBfX2F0dHJpYnV0ZV9fCkhJRERFTgogIF9fYXR0cmlidXRlX18KSlNfQ0dFVFNFVF9FTlVNRVJBQkxFX0RFRgogIGpzX2RyYXdfcwogIGpzX2RyYXdfaW5pdAogIGpzX2xpbmVfbmV3CiAganNfaW5pdF9tb2R1bGUKICBqc19pbml0X21vZHVsZV9wb2ludAogIGpzX2luaXRfbW9kdWxlX3NpemUKICBqc19pbml0X21vZHVsZV9yZWN0CiAganNfaW5pdF9tb2R1bGVfbWF0CiAganNfaW5pdF9tb2R1bGVfY29udG91cgogIGpzX2luaXRfbW9kdWxlX2xpbmUKICBqc19pbml0X21vZHVsZV9kcmF3CiAganNfaW5pdF9tb2R1bGVfY3YKICBqc19pbml0X21vZHVsZV92aWRlb19jYXB0dXJlCiAganNfdmlkZW9fY2FwdHVyZV9pbml0CiAganNfdmlkZW9fY2FwdHVyZV93cmFwCiAganNfbWF0X3dyYXAKICBqc19nbG9iYWxfZ2V0CiAganNfaXNfaXRlcmFibGUKICBqc19pdGVyYXRvcl9tZXRob2QKICBqc19pdGVyYXRvcl9uZXcKICBqc19pdGVyYXRvcl9uZXh0CiAganNfc3ltYm9sX2F0b20KICBqc19zeW1ib2xfY3RvcgogIGpzX3N5bWJvbF9nZXRfc3RhdGljCiAgY291bnRvZgogIGpzX3ZlY3Rvcl92ZWM0aV90b19hcnJheQogIGpzX2N0b3IKICBqc19wcm90bwogIGpzX25ldwogIGpzX251bWJlcl9yZWFkCiAganNfbnVtYmVyX3JlYWQ8aW50MzJfdD4KICBqc19udW1iZXJfcmVhZDx1aW50MzJfdD4KICBqc19udW1iZXJfcmVhZDxpbnQ2NF90PgogIGpzX251bWJlcl9uZXcKICBqc19udW1iZXJfbmV3PGludDMyX3Q+CiAganNfbnVtYmVyX25ldzx1aW50MzJfdD4KICBqc19udW1iZXJfbmV3PGludDY0X3Q+CiAganNfY29sb3JfcmVhZAogIGpzX2NvbG9yX3JlYWQKICBqc19jb2xvcl9yZWFkCiAganNfY29sb3JfbmV3CiAganNfcmVmCiAgcm91bmRfdG8KICBqc19hcnJheWJ1ZmZlcl9yYW5nZQogIGpzX2FycmF5YnVmZmVyX3JhbmdlCiAgdmFsdWVfdHlwZQogIGpzX2FycmF5YnVmZmVyX2Zyb20KICBqc19hcnJheWJ1ZmZlcl9mcm9tCiAganNfZ2xvYmFsX2dldAogIGpzX3N5bWJvbF9jdG9yCiAganNfc3ltYm9sX2ludm9rZV9zdGF0aWMKICBqc19zeW1ib2xfZm9yCiAganNfc3ltYm9sX2Zvcl9hdG9tCiAganNfc2V0X2luc3BlY3RfbWV0aG9kCiAganNfc3ltYm9sX2dldF9zdGF0aWMKICBqc19zeW1ib2xfYXRvbQogIGpzX2l0ZXJhdG9yX21ldGhvZAogIGpzX2lzX2l0ZXJhYmxlCiAganNfaXNfYXJyYXlfbGlrZQpBcnJheUJ1ZmZlclByb3BzCkFycmF5QnVmZmVyUHJvcHMKICBqc19pc19hcnJheWJ1ZmZlcgogIGpzX2FycmF5YnVmZmVyX3Byb3BzCiAganNfX25hbWUKICBqc19jbGFzc19uYW1lCiAganNfdHlwZWRhcnJheV9wcm90b3R5cGUKICBqc190eXBlZGFycmF5X2NvbnN0cnVjdG9yCiAganNfaXNfdHlwZWRhcnJheQpKU19Jc0FycmF5CiAganNfaXNfdHlwZWRhcnJheQogIGpzX2l0ZXJhdG9yX25ldwogIGpzX2l0ZXJhdG9yX25leHQKICBqc192YWx1ZV90bwogIGpzX3ZhbHVlX3RvCiAganNfdmFsdWVfdG8KICBqc192YWx1ZV9mcm9tCiAganNfdmFsdWVfZnJvbQogIGpzX3ZhbHVlX2Zyb20KICBqc192YWx1ZV9mcm9tCiAganNfaXRlcmFibGUKCXRvX3ZlY3RvcgoJanNfaXRlcmF0b3JfbmV3CgljbGVhcgoJanNfaXRlcmF0b3JfbmV4dAoJanNfdmFsdWVfdG8KCXB1c2hfYmFjawpKU19GcmVlVmFsdWUKSlNfRnJlZVZhbHVlCglzaXplCgl0b19hcnJheQoJanNfaXRlcmF0b3JfbmV3Cglqc19pdGVyYXRvcl9uZXh0Cglqc192YWx1ZV90bwpKU19GcmVlVmFsdWUKSlNfRnJlZVZhbHVlCgl0b19zY2FsYXIKCXRvX2FycmF5CiAganNfaXRlcmFibGVfdG8KICBqc19pdGVyYWJsZV90bwogIGFycmF5X3R5cGUKICBqc19pdGVyYWJsZV90bwAAAAAAAAAAAAAAAAAAAAAAAAAA",
					"AQAAAAAAAAAAAAAA"
				],
				[
					726,
					1,
					"outline_refresh",
					{
						"path": "/home/roman/Projects/qjs-opencv/js_array.hpp",
						"symkeys":
						[
							[
								29,
								41
							],
							[
								187,
								202
							],
							[
								477,
								499
							],
							[
								582,
								599
							],
							[
								977,
								994
							],
							[
								1064,
								1081
							],
							[
								1217,
								1237
							],
							[
								1759,
								1767
							],
							[
								1879,
								1885
							],
							[
								2009,
								2017
							],
							[
								2047,
								2056
							],
							[
								2157,
								2168
							],
							[
								2207,
								2224
							],
							[
								2250,
								2260
							],
							[
								2284,
								2291
							],
							[
								2296,
								2300
							],
							[
								2379,
								2399
							],
							[
								2433,
								2445
							],
							[
								2482,
								2494
							],
							[
								2519,
								2524
							],
							[
								2565,
								2574
							],
							[
								2589,
								2601
							],
							[
								2686,
								2690
							],
							[
								2799,
								2804
							],
							[
								2811,
								2814
							],
							[
								2843,
								2854
							],
							[
								2910,
								2923
							],
							[
								2932,
								2937
							],
							[
								2944,
								2947
							],
							[
								3003,
								3016
							],
							[
								3187,
								3198
							],
							[
								3292,
								3305
							],
							[
								3323,
								3343
							],
							[
								3438,
								3446
							],
							[
								3522,
								3531
							],
							[
								3637,
								3658
							],
							[
								3894,
								3916
							],
							[
								4163,
								4171
							],
							[
								4211,
								4220
							],
							[
								4328,
								4339
							],
							[
								4378,
								4395
							],
							[
								4421,
								4431
							],
							[
								4455,
								4462
							],
							[
								4467,
								4471
							],
							[
								4531,
								4551
							],
							[
								4600,
								4611
							],
							[
								4639,
								4648
							],
							[
								4724,
								4737
							],
							[
								4818,
								4829
							],
							[
								4932,
								4952
							],
							[
								4966,
								4978
							],
							[
								5063,
								5071
							],
							[
								5168,
								5196
							],
							[
								5513,
								5521
							],
							[
								5560,
								5569
							],
							[
								5676,
								5687
							],
							[
								5726,
								5743
							],
							[
								5769,
								5779
							],
							[
								5803,
								5810
							],
							[
								5815,
								5819
							],
							[
								5879,
								5899
							],
							[
								5934,
								5943
							],
							[
								6023,
								6036
							],
							[
								6117,
								6128
							],
							[
								6207,
								6227
							],
							[
								6321,
								6329
							],
							[
								6425,
								6452
							],
							[
								6730,
								6738
							],
							[
								6784,
								6793
							],
							[
								6907,
								6918
							],
							[
								6957,
								6974
							],
							[
								7000,
								7010
							],
							[
								7034,
								7041
							],
							[
								7046,
								7050
							],
							[
								7137,
								7157
							],
							[
								7192,
								7205
							],
							[
								7236,
								7248
							],
							[
								7273,
								7278
							],
							[
								7319,
								7328
							],
							[
								7343,
								7355
							],
							[
								7439,
								7452
							],
							[
								7533,
								7544
							],
							[
								7623,
								7643
							],
							[
								7657,
								7669
							],
							[
								7756,
								7764
							],
							[
								8012,
								8023
							],
							[
								8097,
								8117
							],
							[
								8136,
								8149
							],
							[
								8240,
								8248
							],
							[
								8294,
								8303
							],
							[
								8406,
								8417
							],
							[
								8456,
								8473
							],
							[
								8499,
								8509
							],
							[
								8533,
								8540
							],
							[
								8545,
								8549
							],
							[
								8641,
								8661
							],
							[
								8696,
								8709
							],
							[
								8740,
								8752
							],
							[
								8777,
								8782
							],
							[
								8823,
								8832
							],
							[
								8847,
								8859
							],
							[
								8943,
								8956
							],
							[
								9037,
								9048
							],
							[
								9127,
								9147
							],
							[
								9161,
								9174
							],
							[
								9261,
								9269
							],
							[
								9362,
								9370
							],
							[
								9415,
								9424
							],
							[
								9537,
								9548
							],
							[
								9587,
								9604
							],
							[
								9630,
								9640
							],
							[
								9664,
								9671
							],
							[
								9676,
								9680
							],
							[
								9766,
								9786
							],
							[
								9821,
								9833
							],
							[
								9864,
								9876
							],
							[
								9901,
								9906
							],
							[
								9947,
								9956
							],
							[
								9971,
								9983
							],
							[
								10067,
								10080
							],
							[
								10161,
								10172
							],
							[
								10251,
								10271
							],
							[
								10285,
								10297
							],
							[
								10384,
								10392
							],
							[
								10484,
								10492
							],
							[
								10530,
								10539
							],
							[
								10645,
								10656
							],
							[
								10695,
								10712
							],
							[
								10738,
								10748
							],
							[
								10772,
								10779
							],
							[
								10784,
								10788
							],
							[
								10867,
								10887
							],
							[
								10921,
								10933
							],
							[
								10964,
								10976
							],
							[
								11001,
								11006
							],
							[
								11047,
								11056
							],
							[
								11071,
								11083
							],
							[
								11167,
								11180
							],
							[
								11261,
								11272
							],
							[
								11366,
								11379
							],
							[
								11397,
								11417
							],
							[
								11495,
								11504
							],
							[
								11614,
								11623
							],
							[
								11652,
								11656
							],
							[
								11771,
								11779
							],
							[
								11877,
								11886
							],
							[
								11994,
								12002
							],
							[
								12041,
								12050
							],
							[
								12157,
								12168
							],
							[
								12207,
								12224
							],
							[
								12250,
								12260
							],
							[
								12284,
								12291
							],
							[
								12296,
								12300
							],
							[
								12383,
								12403
							],
							[
								12442,
								12453
							],
							[
								12503,
								12515
							],
							[
								12540,
								12545
							],
							[
								12586,
								12595
							],
							[
								12611,
								12623
							],
							[
								12697,
								12705
							],
							[
								12798,
								12806
							],
							[
								12862,
								12874
							],
							[
								12901,
								12911
							],
							[
								12933,
								12942
							],
							[
								13054,
								13065
							],
							[
								13104,
								13121
							],
							[
								13147,
								13157
							],
							[
								13181,
								13188
							],
							[
								13193,
								13197
							],
							[
								13318,
								13338
							],
							[
								13379,
								13394
							],
							[
								13456,
								13468
							],
							[
								13537,
								13546
							],
							[
								13586,
								13595
							],
							[
								13612,
								13624
							],
							[
								13708,
								13721
							],
							[
								13802,
								13813
							],
							[
								13907,
								13921
							],
							[
								13939,
								13959
							],
							[
								14065,
								14069
							],
							[
								14178,
								14183
							],
							[
								14190,
								14193
							],
							[
								14230,
								14238
							],
							[
								14284,
								14293
							],
							[
								14407,
								14418
							],
							[
								14457,
								14474
							],
							[
								14500,
								14510
							],
							[
								14534,
								14541
							],
							[
								14546,
								14550
							],
							[
								14637,
								14657
							],
							[
								14704,
								14713
							],
							[
								14748,
								14760
							],
							[
								14785,
								14790
							],
							[
								14831,
								14840
							],
							[
								14855,
								14867
							],
							[
								14951,
								14964
							],
							[
								15045,
								15056
							],
							[
								15150,
								15163
							],
							[
								15181,
								15201
							],
							[
								15296,
								15304
							],
							[
								15420,
								15431
							],
							[
								15590,
								15601
							],
							[
								15683,
								15693
							],
							[
								15784,
								15795
							],
							[
								16016,
								16029
							],
							[
								16292,
								16305
							],
							[
								16501,
								16514
							],
							[
								16653,
								16662
							],
							[
								16712,
								16718
							],
							[
								16856,
								16878
							],
							[
								17028,
								17042
							],
							[
								17085,
								17096
							],
							[
								17215,
								17223
							],
							[
								17316,
								17326
							],
							[
								17346,
								17358
							],
							[
								17434,
								17451
							],
							[
								17474,
								17479
							],
							[
								17484,
								17497
							]
						],
						"symlist":
						[
							"JS_ARRAY_HPP",
							"js_array_length",
							"JS_DeletePropertyInt64",
							"js_array_truncate",
							"js_array_iterator",
							" js_array_iterator",
							" JS_GetPropertyUint32",
							"js_begin",
							"js_end",
							"js_array",
							" to_vector",
							" js_is_array",
							" JS_GetPropertyStr",
							" JS_ToInt64",
							" reserve",
							" size",
							" JS_GetPropertyUint32",
							" JS_ToFloat64",
							" JS_FreeValue",
							" clear",
							" push_back",
							" JS_FreeValue",
							" from",
							" begin",
							" end",
							" from_vector",
							" from_sequence",
							" begin",
							" end",
							" from_sequence",
							" JS_NewArray",
							" js_value_from",
							" JS_SetPropertyUint32",
							" to_array",
							" to_scalar",
							"js_array<T>::to_array",
							"js_array<T>::to_scalar",
							"js_array",
							" to_vector",
							" js_is_array",
							" JS_GetPropertyStr",
							" JS_ToInt64",
							" reserve",
							" size",
							" JS_GetPropertyUint32",
							" JS_ToUint32",
							" push_back",
							" from_sequence",
							" JS_NewArray",
							" JS_SetPropertyUint32",
							" JS_NewUint32",
							" to_array",
							"js_array<uint32_t>::to_array",
							"js_array",
							" to_vector",
							" js_is_array",
							" JS_GetPropertyStr",
							" JS_ToInt64",
							" reserve",
							" size",
							" JS_GetPropertyUint32",
							" push_back",
							" from_sequence",
							" JS_NewArray",
							" JS_SetPropertyUint32",
							" to_array",
							"js_array<JSValue>::to_array",
							"js_array",
							" to_vector",
							" js_is_array",
							" JS_GetPropertyStr",
							" JS_ToInt64",
							" reserve",
							" size",
							" JS_GetPropertyUint32",
							" js_color_read",
							" JS_FreeValue",
							" clear",
							" push_back",
							" JS_FreeValue",
							" from_sequence",
							" JS_NewArray",
							" JS_SetPropertyUint32",
							" js_color_new",
							" to_array",
							"js_is_array",
							"JS_GetPropertyUint32",
							"js_color_read",
							"js_array",
							" to_vector",
							" js_is_array",
							" JS_GetPropertyStr",
							" JS_ToInt64",
							" reserve",
							" size",
							" JS_GetPropertyUint32",
							" js_point_read",
							" JS_FreeValue",
							" clear",
							" push_back",
							" JS_FreeValue",
							" from_sequence",
							" JS_NewArray",
							" JS_SetPropertyUint32",
							" js_point_wrap",
							" to_array",
							"js_array",
							" to_vector",
							" js_is_array",
							" JS_GetPropertyStr",
							" JS_ToInt64",
							" reserve",
							" size",
							" JS_GetPropertyUint32",
							" js_rect_read",
							" JS_FreeValue",
							" clear",
							" push_back",
							" JS_FreeValue",
							" from_sequence",
							" JS_NewArray",
							" JS_SetPropertyUint32",
							" js_rect_wrap",
							" to_array",
							"js_array",
							" to_vector",
							" js_is_array",
							" JS_GetPropertyStr",
							" JS_ToInt64",
							" reserve",
							" size",
							" JS_GetPropertyUint32",
							" JS_ToFloat64",
							" JS_FreeValue",
							" clear",
							" push_back",
							" JS_FreeValue",
							" from_sequence",
							" JS_NewArray",
							" JS_NewFloat64",
							" JS_SetPropertyUint32",
							" to_scalar",
							" to_vector",
							" size",
							" to_array",
							" to_vector",
							"js_array",
							" to_vector",
							" js_is_array",
							" JS_GetPropertyStr",
							" JS_ToInt64",
							" reserve",
							" size",
							" JS_GetPropertyUint32",
							" js_mat_data",
							" JS_FreeValue",
							" clear",
							" push_back",
							" JS_FreeValue",
							" to_array",
							"js_array",
							"contour_type",
							"point_type",
							" to_vector",
							" js_is_array",
							" JS_GetPropertyStr",
							" JS_ToInt64",
							" reserve",
							" size",
							" JS_GetPropertyUint32",
							" js_contour_data",
							" emplace_back",
							" to_vector",
							" push_back",
							" JS_FreeValue",
							" from_sequence",
							" JS_NewArray",
							" js_contour_new",
							" JS_SetPropertyUint32",
							" from",
							" begin",
							" end",
							"js_array",
							" to_vector",
							" js_is_array",
							" JS_GetPropertyStr",
							" JS_ToInt64",
							" reserve",
							" size",
							" JS_GetPropertyUint32",
							" to_vector",
							" JS_FreeValue",
							" clear",
							" push_back",
							" JS_FreeValue",
							" from_sequence",
							" JS_NewArray",
							" js_array_from",
							" JS_SetPropertyUint32",
							" to_array",
							"js_array_to",
							"js_array_to",
							"array_type",
							"js_array_to",
							"js_array_from",
							"js_array_from",
							"js_array_from",
							"js_object",
							" to_map",
							" JS_GetOwnPropertyNames",
							" JS_GetProperty",
							" js_value_to",
							" from_map",
							"entry_type",
							" JS_NewObject",
							" JS_SetPropertyStr",
							" c_str",
							" js_value_from"
						]
					},
					"AQAAAAAAAAAAAAAAKgsAAAAAAAAAAAAA",
					"AQAAAAAAAAAAAAAA"
				],
				[
					727,
					1,
					"outline_refresh",
					{
						"path": "/home/roman/Projects/qjs-opencv/js_alloc.hpp",
						"symkeys":
						[
							[
								29,
								41
							],
							[
								194,
								207
							],
							[
								265,
								283
							],
							[
								516,
								524
							],
							[
								603,
								607
							],
							[
								715,
								725
							],
							[
								756,
								762
							],
							[
								829,
								839
							],
							[
								869,
								875
							],
							[
								1028,
								1041
							],
							[
								1121,
								1129
							],
							[
								1211,
								1221
							],
							[
								1283,
								1293
							],
							[
								1367,
								1383
							],
							[
								1463,
								1471
							],
							[
								1517,
								1527
							],
							[
								1562,
								1572
							],
							[
								1603,
								1610
							],
							[
								1642,
								1652
							],
							[
								1682,
								1692
							],
							[
								1736,
								1748
							],
							[
								1827,
								1835
							],
							[
								1869,
								1870
							],
							[
								1894,
								1904
							],
							[
								1967,
								1977
							],
							[
								2123,
								2134
							],
							[
								2234,
								2247
							],
							[
								2276,
								2303
							],
							[
								2355,
								2368
							],
							[
								2396,
								2423
							]
						],
						"symlist":
						[
							"JS_ALLOC_HPP",
							"js_alloc_mmap",
							" round_to_page_size",
							" allocate",
							" mmap",
							" deallocate",
							" munmap",
							" deallocate",
							" munmap",
							"js_alloc_libc",
							" allocate",
							" deallocate",
							" deallocate",
							"js_alloc_quickjs",
							" allocate",
							" js_mallocz",
							" deallocate",
							" js_free",
							" deallocate",
							" js_free_rt",
							"js_alloc_cxx",
							" allocate",
							" T",
							" deallocate",
							" deallocate",
							"js_allocate",
							"js_deallocate",
							"js_allocator<T>::deallocate",
							"js_deallocate",
							"js_allocator<T>::deallocate"
						]
					},
					"AgAAAAAAAAAAAAAAAAAAAAAAAAAqCwAASlNfQVJSQVlfSFBQCiAganNfYXJyYXlfbGVuZ3RoCkpTX0RlbGV0ZVByb3BlcnR5SW50NjQKICBqc19hcnJheV90cnVuY2F0ZQogIGpzX2FycmF5X2l0ZXJhdG9yCglqc19hcnJheV9pdGVyYXRvcgpKU19HZXRQcm9wZXJ0eVVpbnQzMgogIGpzX2JlZ2luCiAganNfZW5kCiAganNfYXJyYXkKCXRvX3ZlY3RvcgoJanNfaXNfYXJyYXkKSlNfR2V0UHJvcGVydHlTdHIKSlNfVG9JbnQ2NAoJcmVzZXJ2ZQoJc2l6ZQpKU19HZXRQcm9wZXJ0eVVpbnQzMgpKU19Ub0Zsb2F0NjQKSlNfRnJlZVZhbHVlCgljbGVhcgoJcHVzaF9iYWNrCkpTX0ZyZWVWYWx1ZQoJZnJvbQoJYmVnaW4KCWVuZAoJZnJvbV92ZWN0b3IKCWZyb21fc2VxdWVuY2UKCWJlZ2luCgllbmQKCWZyb21fc2VxdWVuY2UKSlNfTmV3QXJyYXkKCWpzX3ZhbHVlX2Zyb20KSlNfU2V0UHJvcGVydHlVaW50MzIKCXRvX2FycmF5Cgl0b19zY2FsYXIKICBqc19hcnJheTxUPjo6dG9fYXJyYXkKICBqc19hcnJheTxUPjo6dG9fc2NhbGFyCiAganNfYXJyYXkKCXRvX3ZlY3RvcgoJanNfaXNfYXJyYXkKSlNfR2V0UHJvcGVydHlTdHIKSlNfVG9JbnQ2NAoJcmVzZXJ2ZQoJc2l6ZQpKU19HZXRQcm9wZXJ0eVVpbnQzMgpKU19Ub1VpbnQzMgoJcHVzaF9iYWNrCglmcm9tX3NlcXVlbmNlCkpTX05ld0FycmF5CkpTX1NldFByb3BlcnR5VWludDMyCkpTX05ld1VpbnQzMgoJdG9fYXJyYXkKICBqc19hcnJheTx1aW50MzJfdD46OnRvX2FycmF5CiAganNfYXJyYXkKCXRvX3ZlY3RvcgoJanNfaXNfYXJyYXkKSlNfR2V0UHJvcGVydHlTdHIKSlNfVG9JbnQ2NAoJcmVzZXJ2ZQoJc2l6ZQpKU19HZXRQcm9wZXJ0eVVpbnQzMgoJcHVzaF9iYWNrCglmcm9tX3NlcXVlbmNlCkpTX05ld0FycmF5CkpTX1NldFByb3BlcnR5VWludDMyCgl0b19hcnJheQogIGpzX2FycmF5PEpTVmFsdWU+Ojp0b19hcnJheQogIGpzX2FycmF5Cgl0b192ZWN0b3IKCWpzX2lzX2FycmF5CkpTX0dldFByb3BlcnR5U3RyCkpTX1RvSW50NjQKCXJlc2VydmUKCXNpemUKSlNfR2V0UHJvcGVydHlVaW50MzIKCWpzX2NvbG9yX3JlYWQKSlNfRnJlZVZhbHVlCgljbGVhcgoJcHVzaF9iYWNrCkpTX0ZyZWVWYWx1ZQoJZnJvbV9zZXF1ZW5jZQpKU19OZXdBcnJheQpKU19TZXRQcm9wZXJ0eVVpbnQzMgoJanNfY29sb3JfbmV3Cgl0b19hcnJheQogIGpzX2lzX2FycmF5CkpTX0dldFByb3BlcnR5VWludDMyCiAganNfY29sb3JfcmVhZAogIGpzX2FycmF5Cgl0b192ZWN0b3IKCWpzX2lzX2FycmF5CkpTX0dldFByb3BlcnR5U3RyCkpTX1RvSW50NjQKCXJlc2VydmUKCXNpemUKSlNfR2V0UHJvcGVydHlVaW50MzIKCWpzX3BvaW50X3JlYWQKSlNfRnJlZVZhbHVlCgljbGVhcgoJcHVzaF9iYWNrCkpTX0ZyZWVWYWx1ZQoJZnJvbV9zZXF1ZW5jZQpKU19OZXdBcnJheQpKU19TZXRQcm9wZXJ0eVVpbnQzMgoJanNfcG9pbnRfd3JhcAoJdG9fYXJyYXkKICBqc19hcnJheQoJdG9fdmVjdG9yCglqc19pc19hcnJheQpKU19HZXRQcm9wZXJ0eVN0cgpKU19Ub0ludDY0CglyZXNlcnZlCglzaXplCkpTX0dldFByb3BlcnR5VWludDMyCglqc19yZWN0X3JlYWQKSlNfRnJlZVZhbHVlCgljbGVhcgoJcHVzaF9iYWNrCkpTX0ZyZWVWYWx1ZQoJZnJvbV9zZXF1ZW5jZQpKU19OZXdBcnJheQpKU19TZXRQcm9wZXJ0eVVpbnQzMgoJanNfcmVjdF93cmFwCgl0b19hcnJheQogIGpzX2FycmF5Cgl0b192ZWN0b3IKCWpzX2lzX2FycmF5CkpTX0dldFByb3BlcnR5U3RyCkpTX1RvSW50NjQKCXJlc2VydmUKCXNpemUKSlNfR2V0UHJvcGVydHlVaW50MzIKSlNfVG9GbG9hdDY0CkpTX0ZyZWVWYWx1ZQoJY2xlYXIKCXB1c2hfYmFjawpKU19GcmVlVmFsdWUKCWZyb21fc2VxdWVuY2UKSlNfTmV3QXJyYXkKSlNfTmV3RmxvYXQ2NApKU19TZXRQcm9wZXJ0eVVpbnQzMgoJdG9fc2NhbGFyCgl0b192ZWN0b3IKCXNpemUKCXRvX2FycmF5Cgl0b192ZWN0b3IKICBqc19hcnJheQoJdG9fdmVjdG9yCglqc19pc19hcnJheQpKU19HZXRQcm9wZXJ0eVN0cgpKU19Ub0ludDY0CglyZXNlcnZlCglzaXplCkpTX0dldFByb3BlcnR5VWludDMyCglqc19tYXRfZGF0YQpKU19GcmVlVmFsdWUKCWNsZWFyCglwdXNoX2JhY2sKSlNfRnJlZVZhbHVlCgl0b19hcnJheQogIGpzX2FycmF5CiAgY29udG91cl90eXBlCiAgcG9pbnRfdHlwZQoJdG9fdmVjdG9yCglqc19pc19hcnJheQpKU19HZXRQcm9wZXJ0eVN0cgpKU19Ub0ludDY0CglyZXNlcnZlCglzaXplCkpTX0dldFByb3BlcnR5VWludDMyCglqc19jb250b3VyX2RhdGEKCWVtcGxhY2VfYmFjawoJdG9fdmVjdG9yCglwdXNoX2JhY2sKSlNfRnJlZVZhbHVlCglmcm9tX3NlcXVlbmNlCkpTX05ld0FycmF5Cglqc19jb250b3VyX25ldwpKU19TZXRQcm9wZXJ0eVVpbnQzMgoJZnJvbQoJYmVnaW4KCWVuZAogIGpzX2FycmF5Cgl0b192ZWN0b3IKCWpzX2lzX2FycmF5CkpTX0dldFByb3BlcnR5U3RyCkpTX1RvSW50NjQKCXJlc2VydmUKCXNpemUKSlNfR2V0UHJvcGVydHlVaW50MzIKCXRvX3ZlY3RvcgpKU19GcmVlVmFsdWUKCWNsZWFyCglwdXNoX2JhY2sKSlNfRnJlZVZhbHVlCglmcm9tX3NlcXVlbmNlCkpTX05ld0FycmF5Cglqc19hcnJheV9mcm9tCkpTX1NldFByb3BlcnR5VWludDMyCgl0b19hcnJheQogIGpzX2FycmF5X3RvCiAganNfYXJyYXlfdG8KICBhcnJheV90eXBlCiAganNfYXJyYXlfdG8KICBqc19hcnJheV9mcm9tCiAganNfYXJyYXlfZnJvbQogIGpzX2FycmF5X2Zyb20KICBqc19vYmplY3QKCXRvX21hcApKU19HZXRPd25Qcm9wZXJ0eU5hbWVzCkpTX0dldFByb3BlcnR5Cglqc192YWx1ZV90bwoJZnJvbV9tYXAKICBlbnRyeV90eXBlCkpTX05ld09iamVjdApKU19TZXRQcm9wZXJ0eVN0cgoJY19zdHIKCWpzX3ZhbHVlX2Zyb20AAAAAAAAAAIsBAAAAAAAAAAAAAA",
					"AQAAAAAAAAAAAAAA"
				],
				[
					728,
					1,
					"outline_refresh",
					{
						"path": "/home/roman/Projects/qjs-opencv/init_module.cpp",
						"symkeys":
						[
							[
								65,
								78
							],
							[
								121,
								136
							],
							[
								179,
								189
							],
							[
								232,
								244
							],
							[
								287,
								299
							],
							[
								342,
								353
							],
							[
								396,
								409
							],
							[
								452,
								474
							],
							[
								517,
								529
							],
							[
								572,
								584
							],
							[
								627,
								649
							],
							[
								692,
								708
							],
							[
								751,
								763
							],
							[
								806,
								821
							],
							[
								864,
								885
							],
							[
								930,
								942
							],
							[
								975,
								989
							],
							[
								1470,
								1484
							],
							[
								1514,
								1528
							],
							[
								1591,
								1605
							]
						],
						"symlist":
						[
							"js_clahe_init",
							"js_contour_init",
							"js_cv_init",
							"js_draw_init",
							"js_line_init",
							"js_mat_init",
							"js_point_init",
							"js_point_iterator_init",
							"js_rect_init",
							"js_size_init",
							"js_slice_iterator_init",
							"js_subdiv2d_init",
							"js_umat_init",
							"js_utility_init",
							"js_video_capture_init",
							"js_cv_export",
							"js_opencv_init",
							"JS_INIT_MODULE",
							"JS_INIT_MODULE",
							"JS_INIT_MODULE"
						]
					},
					"AgAAAAAAAAAAAAAAAAAAAAAAAACLAQAASlNfQUxMT0NfSFBQCiAganNfYWxsb2NfbW1hcAoJcm91bmRfdG9fcGFnZV9zaXplCglhbGxvY2F0ZQoJbW1hcAoJZGVhbGxvY2F0ZQoJbXVubWFwCglkZWFsbG9jYXRlCgltdW5tYXAKICBqc19hbGxvY19saWJjCglhbGxvY2F0ZQoJZGVhbGxvY2F0ZQoJZGVhbGxvY2F0ZQogIGpzX2FsbG9jX3F1aWNranMKCWFsbG9jYXRlCglqc19tYWxsb2N6CglkZWFsbG9jYXRlCglqc19mcmVlCglkZWFsbG9jYXRlCglqc19mcmVlX3J0CiAganNfYWxsb2NfY3h4CglhbGxvY2F0ZQoJZGVhbGxvY2F0ZQoJZGVhbGxvY2F0ZQogIGpzX2FsbG9jYXRlCiAganNfZGVhbGxvY2F0ZQogIGpzX2FsbG9jYXRvcjxUPjo6ZGVhbGxvY2F0ZQogIGpzX2RlYWxsb2NhdGUKICBqc19hbGxvY2F0b3I8VD46OmRlYWxsb2NhdGUAAAAAAAAAAFMBAAAAAAAAAAAAAA",
					"AQAAAAAAAAAAAAAA"
				],
				[
					729,
					1,
					"outline_refresh",
					{
						"path": "/home/roman/Projects/qjs-opencv/CMakeLists.txt",
						"symkeys":
						[
						],
						"symlist":
						[
						]
					},
					"AgAAAAAAAAAAAAAAAAAAAAAAAABTAQAAICBqc19jbGFoZV9pbml0CiAganNfY29udG91cl9pbml0CiAganNfY3ZfaW5pdAogIGpzX2RyYXdfaW5pdAogIGpzX2xpbmVfaW5pdAogIGpzX21hdF9pbml0CiAganNfcG9pbnRfaW5pdAogIGpzX3BvaW50X2l0ZXJhdG9yX2luaXQKICBqc19yZWN0X2luaXQKICBqc19zaXplX2luaXQKICBqc19zbGljZV9pdGVyYXRvcl9pbml0CiAganNfc3ViZGl2MmRfaW5pdAogIGpzX3VtYXRfaW5pdAogIGpzX3V0aWxpdHlfaW5pdAogIGpzX3ZpZGVvX2NhcHR1cmVfaW5pdAogIGpzX2N2X2V4cG9ydAogIGpzX29wZW5jdl9pbml0CkpTX0lOSVRfTU9EVUxFCkpTX0lOSVRfTU9EVUxFCkpTX0lOSVRfTU9EVUxFAAAAAAAAAAAAAAAAAAAAAAAAAAA",
					"AQAAAAAAAAAAAAAA"
				],
				[
					730,
					2,
					"outline_refresh",
					{
						"path": "/home/roman/Projects/qjs-opencv/CMakeLists.txt",
						"symkeys":
						[
						],
						"symlist":
						[
						]
					},
					"AgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA",
					"AQAAAAAAAAAAAAAA"
				],
				[
					731,
					1,
					"outline_refresh",
					{
						"path": "/home/roman/Projects/qjs-opencv/cmake/CheckFlags.cmake",
						"symkeys":
						[
						],
						"symlist":
						[
						]
					},
					"AQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA",
					"AQAAAAAAAAAAAAAA"
				],
				[
					732,
					1,
					"outline_refresh",
					{
						"path": "/home/roman/Projects/qjs-opencv/cmake/FindQuickJS.cmake",
						"symkeys":
						[
						],
						"symlist":
						[
						]
					},
					"AQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA",
					"AQAAAAAAAAAAAAAA"
				],
				[
					733,
					1,
					"outline_refresh",
					{
						"path": "/home/roman/Projects/qjs-opencv/cmake/JSBindings.cmake",
						"symkeys":
						[
						],
						"symlist":
						[
						]
					},
					"AQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA",
					"AQAAAAAAAAAAAAAA"
				],
				[
					734,
					1,
					"outline_refresh",
					{
						"path": "/home/roman/Projects/qjs-opencv/js_alloc.hpp",
						"symkeys":
						[
							[
								29,
								41
							],
							[
								194,
								207
							],
							[
								265,
								283
							],
							[
								516,
								524
							],
							[
								603,
								607
							],
							[
								715,
								725
							],
							[
								756,
								762
							],
							[
								829,
								839
							],
							[
								869,
								875
							],
							[
								1028,
								1041
							],
							[
								1121,
								1129
							],
							[
								1211,
								1221
							],
							[
								1283,
								1293
							],
							[
								1367,
								1383
							],
							[
								1463,
								1471
							],
							[
								1517,
								1527
							],
							[
								1562,
								1572
							],
							[
								1603,
								1610
							],
							[
								1642,
								1652
							],
							[
								1682,
								1692
							],
							[
								1736,
								1748
							],
							[
								1827,
								1835
							],
							[
								1869,
								1870
							],
							[
								1894,
								1904
							],
							[
								1967,
								1977
							],
							[
								2123,
								2134
							],
							[
								2234,
								2247
							],
							[
								2276,
								2303
							],
							[
								2355,
								2368
							],
							[
								2396,
								2423
							]
						],
						"symlist":
						[
							"JS_ALLOC_HPP",
							"js_alloc_mmap",
							" round_to_page_size",
							" allocate",
							" mmap",
							" deallocate",
							" munmap",
							" deallocate",
							" munmap",
							"js_alloc_libc",
							" allocate",
							" deallocate",
							" deallocate",
							"js_alloc_quickjs",
							" allocate",
							" js_mallocz",
							" deallocate",
							" js_free",
							" deallocate",
							" js_free_rt",
							"js_alloc_cxx",
							" allocate",
							" T",
							" deallocate",
							" deallocate",
							"js_allocate",
							"js_deallocate",
							"js_allocator<T>::deallocate",
							"js_deallocate",
							"js_allocator<T>::deallocate"
						]
					},
					"AQAAAAAAAAAAAAAAiwEAAAAAAAAAAAAA",
					"AQAAAAAAAAAAAAAA"
				],
				[
					735,
					1,
					"outline_refresh",
					{
						"path": "/home/roman/Projects/qjs-opencv/init_module.cpp",
						"symkeys":
						[
							[
								65,
								78
							],
							[
								121,
								136
							],
							[
								179,
								189
							],
							[
								232,
								244
							],
							[
								287,
								299
							],
							[
								342,
								353
							],
							[
								396,
								409
							],
							[
								452,
								474
							],
							[
								517,
								529
							],
							[
								572,
								584
							],
							[
								627,
								649
							],
							[
								692,
								708
							],
							[
								751,
								763
							],
							[
								806,
								821
							],
							[
								864,
								885
							],
							[
								930,
								942
							],
							[
								975,
								989
							],
							[
								1470,
								1484
							],
							[
								1514,
								1528
							],
							[
								1591,
								1605
							]
						],
						"symlist":
						[
							"js_clahe_init",
							"js_contour_init",
							"js_cv_init",
							"js_draw_init",
							"js_line_init",
							"js_mat_init",
							"js_point_init",
							"js_point_iterator_init",
							"js_rect_init",
							"js_size_init",
							"js_slice_iterator_init",
							"js_subdiv2d_init",
							"js_umat_init",
							"js_utility_init",
							"js_video_capture_init",
							"js_cv_export",
							"js_opencv_init",
							"JS_INIT_MODULE",
							"JS_INIT_MODULE",
							"JS_INIT_MODULE"
						]
					},
					"AgAAAAAAAAAAAAAAAAAAAAAAAACLAQAASlNfQUxMT0NfSFBQCiAganNfYWxsb2NfbW1hcAoJcm91bmRfdG9fcGFnZV9zaXplCglhbGxvY2F0ZQoJbW1hcAoJZGVhbGxvY2F0ZQoJbXVubWFwCglkZWFsbG9jYXRlCgltdW5tYXAKICBqc19hbGxvY19saWJjCglhbGxvY2F0ZQoJZGVhbGxvY2F0ZQoJZGVhbGxvY2F0ZQogIGpzX2FsbG9jX3F1aWNranMKCWFsbG9jYXRlCglqc19tYWxsb2N6CglkZWFsbG9jYXRlCglqc19mcmVlCglkZWFsbG9jYXRlCglqc19mcmVlX3J0CiAganNfYWxsb2NfY3h4CglhbGxvY2F0ZQoJZGVhbGxvY2F0ZQoJZGVhbGxvY2F0ZQogIGpzX2FsbG9jYXRlCiAganNfZGVhbGxvY2F0ZQogIGpzX2FsbG9jYXRvcjxUPjo6ZGVhbGxvY2F0ZQogIGpzX2RlYWxsb2NhdGUKICBqc19hbGxvY2F0b3I8VD46OmRlYWxsb2NhdGUAAAAAAAAAAFMBAAAAAAAAAAAAAA",
					"AQAAAAAAAAAAAAAA"
				],
				[
					736,
					1,
					"outline_refresh",
					{
						"path": "/home/roman/Projects/qjs-opencv/cmake/JSBindings.cmake",
						"symkeys":
						[
						],
						"symlist":
						[
						]
					},
					"AgAAAAAAAAAAAAAAAAAAAAAAAABTAQAAICBqc19jbGFoZV9pbml0CiAganNfY29udG91cl9pbml0CiAganNfY3ZfaW5pdAogIGpzX2RyYXdfaW5pdAogIGpzX2xpbmVfaW5pdAogIGpzX21hdF9pbml0CiAganNfcG9pbnRfaW5pdAogIGpzX3BvaW50X2l0ZXJhdG9yX2luaXQKICBqc19yZWN0X2luaXQKICBqc19zaXplX2luaXQKICBqc19zbGljZV9pdGVyYXRvcl9pbml0CiAganNfc3ViZGl2MmRfaW5pdAogIGpzX3VtYXRfaW5pdAogIGpzX3V0aWxpdHlfaW5pdAogIGpzX3ZpZGVvX2NhcHR1cmVfaW5pdAogIGpzX2N2X2V4cG9ydAogIGpzX29wZW5jdl9pbml0CkpTX0lOSVRfTU9EVUxFCkpTX0lOSVRfTU9EVUxFCkpTX0lOSVRfTU9EVUxFAAAAAAAAAAAAAAAAAAAAAAAAAAA",
					"AQAAAAAAAAAAAAAA"
				],
				[
					737,
					2,
					"outline_refresh",
					{
						"path": "/home/roman/Projects/qjs-opencv/cmake/JSBindings.cmake",
						"symkeys":
						[
						],
						"symlist":
						[
						]
					},
					"AgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA",
					"AQAAAAAAAAAAAAAA"
				],
				[
					738,
					1,
					"outline_refresh",
					{
						"path": "/home/roman/Projects/qjs-opencv/js_mat.cpp",
						"symkeys":
						[
							[
								1280,
								1297
							],
							[
								1411,
								1427
							],
							[
								1634,
								1646
							],
							[
								1962,
								1979
							],
							[
								2322,
								2334
							],
							[
								2957,
								2967
							],
							[
								3546,
								3557
							],
							[
								4389,
								4400
							],
							[
								4822,
								4839
							],
							[
								5342,
								5353
							],
							[
								6385,
								6398
							],
							[
								6900,
								6911
							],
							[
								7123,
								7135
							],
							[
								9523,
								9534
							],
							[
								12790,
								12801
							],
							[
								13653,
								13663
							],
							[
								13871,
								13881
							],
							[
								15447,
								15460
							],
							[
								15669,
								15678
							],
							[
								16440,
								16450
							],
							[
								19907,
								19920
							],
							[
								21695,
								21711
							],
							[
								23100,
								23115
							],
							[
								24759,
								24773
							],
							[
								25378,
								25404
							],
							[
								25911,
								25928
							],
							[
								26449,
								26463
							],
							[
								27027,
								27041
							],
							[
								28022,
								28036
							],
							[
								28598,
								28615
							],
							[
								29505,
								29516
							],
							[
								30056,
								30075
							],
							[
								30967,
								30980
							],
							[
								31751,
								31763
							],
							[
								32445,
								32456
							],
							[
								32959,
								32975
							],
							[
								34440,
								34459
							],
							[
								35543,
								35563
							],
							[
								35760,
								35780
							],
							[
								38040,
								38065
							],
							[
								38243,
								38262
							],
							[
								38660,
								38680
							],
							[
								38776,
								38796
							],
							[
								38892,
								38912
							],
							[
								39016,
								39036
							],
							[
								39132,
								39152
							],
							[
								39250,
								39270
							],
							[
								39368,
								39388
							],
							[
								39486,
								39506
							],
							[
								39602,
								39622
							],
							[
								39730,
								39750
							],
							[
								39856,
								39876
							],
							[
								39972,
								39992
							],
							[
								40096,
								40116
							],
							[
								40222,
								40236
							],
							[
								40320,
								40334
							],
							[
								40416,
								40434
							],
							[
								40523,
								40541
							],
							[
								40630,
								40648
							],
							[
								40748,
								40766
							],
							[
								40866,
								40884
							],
							[
								40977,
								40995
							],
							[
								41084,
								41102
							],
							[
								41199,
								41217
							],
							[
								41306,
								41324
							],
							[
								41417,
								41435
							],
							[
								41528,
								41546
							],
							[
								41641,
								41659
							],
							[
								41752,
								41770
							],
							[
								41872,
								41890
							],
							[
								41980,
								41998
							],
							[
								42088,
								42106
							],
							[
								42194,
								42212
							],
							[
								42302,
								42320
							],
							[
								42411,
								42429
							],
							[
								42509,
								42527
							],
							[
								42607,
								42619
							],
							[
								42704,
								42716
							],
							[
								42789,
								42801
							],
							[
								42876,
								42888
							],
							[
								42968,
								42980
							],
							[
								43068,
								43080
							],
							[
								43162,
								43174
							],
							[
								43257,
								43269
							],
							[
								43352,
								43370
							],
							[
								43474,
								43492
							],
							[
								43600,
								43618
							],
							[
								43728,
								43740
							],
							[
								43824,
								43836
							],
							[
								43926,
								43944
							],
							[
								44068,
								44088
							],
							[
								44130,
								44148
							],
							[
								44215,
								44227
							],
							[
								44336,
								44348
							],
							[
								44408,
								44426
							],
							[
								44464,
								44482
							],
							[
								44520,
								44538
							],
							[
								44576,
								44594
							],
							[
								44632,
								44650
							],
							[
								44688,
								44706
							],
							[
								44743,
								44761
							],
							[
								44799,
								44817
							],
							[
								44859,
								44877
							],
							[
								44918,
								44935
							],
							[
								44945,
								44956
							],
							[
								44997,
								45008
							],
							[
								46435,
								46448
							],
							[
								46558,
								46572
							],
							[
								46614,
								46628
							],
							[
								46700,
								46714
							]
						],
						"symlist":
						[
							"JSMatIteratorData",
							"js_mat_free_func",
							"js_mat_sizes",
							"js_mat_dimensions",
							"js_mat_track",
							"js_mat_new",
							"js_mat_wrap",
							"js_mat_data",
							"js_mat_print_data",
							"js_mat_dump",
							"js_mat_params",
							"js_mat_ctor",
							"js_mat_funcs",
							"js_mat_expr",
							"js_mat_init",
							"js_mat_get",
							"js_mat_get",
							"js_mat_get_wh",
							"js_mat_at",
							"js_mat_set",
							"js_mat_set_to",
							"js_mat_get_props",
							"js_mat_tostring",
							"js_mat_inspect",
							"js_mat_getrotationmatrix2d",
							"js_mat_convert_to",
							"js_mat_copy_to",
							"js_mat_reshape",
							"js_mat_getumat",
							"js_mat_class_func",
							"js_mat_fill",
							"js_mat_class_create",
							"js_mat_buffer",
							"js_mat_array",
							"js_mat_call",
							"js_mat_finalizer",
							"js_mat_iterator_new",
							"js_mat_iterator_dump",
							"js_mat_iterator_next",
							"js_mat_iterator_finalizer",
							"js_mat_iterator_dup",
							"JS_CGETSET_MAGIC_DEF",
							"JS_CGETSET_MAGIC_DEF",
							"JS_CGETSET_MAGIC_DEF",
							"JS_CGETSET_MAGIC_DEF",
							"JS_CGETSET_MAGIC_DEF",
							"JS_CGETSET_MAGIC_DEF",
							"JS_CGETSET_MAGIC_DEF",
							"JS_CGETSET_MAGIC_DEF",
							"JS_CGETSET_MAGIC_DEF",
							"JS_CGETSET_MAGIC_DEF",
							"JS_CGETSET_MAGIC_DEF",
							"JS_CGETSET_MAGIC_DEF",
							"JS_CGETSET_MAGIC_DEF",
							"JS_CGETSET_DEF",
							"JS_CGETSET_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_DEF",
							"JS_CFUNC_DEF",
							"JS_CFUNC_DEF",
							"JS_CFUNC_DEF",
							"JS_CFUNC_DEF",
							"JS_CFUNC_DEF",
							"JS_CFUNC_DEF",
							"JS_CFUNC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_ALIAS_DEF",
							"JS_ALIAS_DEF",
							"JS_PROP_STRING_DEF",
							"JS_ITERATOR_NEXT_DEF",
							"JS_PROP_STRING_DEF",
							"JS_CFUNC_DEF",
							"JS_CFUNC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_PROP_INT32_DEF",
							"CV_MAKETYPE",
							"js_mat_init",
							"js_mat_export",
							"JS_INIT_MODULE",
							"JS_INIT_MODULE",
							"JS_INIT_MODULE"
						]
					},
					"AQAAAAAAAAAAAAAAlAcAAAAAAAAAAAAA",
					"AQAAAAAAAAAAAAAA"
				],
				[
					739,
					2,
					"outline_refresh",
					{
						"path": "/home/roman/Projects/qjs-opencv/js_mat.cpp",
						"symkeys":
						[
							[
								1280,
								1297
							],
							[
								1411,
								1427
							],
							[
								1634,
								1646
							],
							[
								1962,
								1979
							],
							[
								2322,
								2334
							],
							[
								2957,
								2967
							],
							[
								3546,
								3557
							],
							[
								4389,
								4400
							],
							[
								4822,
								4839
							],
							[
								5342,
								5353
							],
							[
								6385,
								6398
							],
							[
								6900,
								6911
							],
							[
								7123,
								7135
							],
							[
								9523,
								9534
							],
							[
								12790,
								12801
							],
							[
								13653,
								13663
							],
							[
								13871,
								13881
							],
							[
								15447,
								15460
							],
							[
								15669,
								15678
							],
							[
								16440,
								16450
							],
							[
								19907,
								19920
							],
							[
								21695,
								21711
							],
							[
								23100,
								23115
							],
							[
								24759,
								24773
							],
							[
								25378,
								25404
							],
							[
								25911,
								25928
							],
							[
								26449,
								26463
							],
							[
								27027,
								27041
							],
							[
								28022,
								28036
							],
							[
								28598,
								28615
							],
							[
								29505,
								29516
							],
							[
								30056,
								30075
							],
							[
								30967,
								30980
							],
							[
								31751,
								31763
							],
							[
								32445,
								32456
							],
							[
								32959,
								32975
							],
							[
								34440,
								34459
							],
							[
								35543,
								35563
							],
							[
								35760,
								35780
							],
							[
								38040,
								38065
							],
							[
								38243,
								38262
							],
							[
								38660,
								38680
							],
							[
								38776,
								38796
							],
							[
								38892,
								38912
							],
							[
								39016,
								39036
							],
							[
								39132,
								39152
							],
							[
								39250,
								39270
							],
							[
								39368,
								39388
							],
							[
								39486,
								39506
							],
							[
								39602,
								39622
							],
							[
								39730,
								39750
							],
							[
								39856,
								39876
							],
							[
								39972,
								39992
							],
							[
								40096,
								40116
							],
							[
								40222,
								40236
							],
							[
								40320,
								40334
							],
							[
								40416,
								40434
							],
							[
								40523,
								40541
							],
							[
								40630,
								40648
							],
							[
								40748,
								40766
							],
							[
								40866,
								40884
							],
							[
								40977,
								40995
							],
							[
								41084,
								41102
							],
							[
								41199,
								41217
							],
							[
								41306,
								41324
							],
							[
								41417,
								41435
							],
							[
								41528,
								41546
							],
							[
								41641,
								41659
							],
							[
								41752,
								41770
							],
							[
								41872,
								41890
							],
							[
								41980,
								41998
							],
							[
								42088,
								42106
							],
							[
								42194,
								42212
							],
							[
								42302,
								42320
							],
							[
								42411,
								42429
							],
							[
								42509,
								42527
							],
							[
								42607,
								42619
							],
							[
								42704,
								42716
							],
							[
								42789,
								42801
							],
							[
								42876,
								42888
							],
							[
								42968,
								42980
							],
							[
								43068,
								43080
							],
							[
								43162,
								43174
							],
							[
								43257,
								43269
							],
							[
								43352,
								43370
							],
							[
								43474,
								43492
							],
							[
								43600,
								43618
							],
							[
								43728,
								43740
							],
							[
								43824,
								43836
							],
							[
								43926,
								43944
							],
							[
								44068,
								44088
							],
							[
								44130,
								44148
							],
							[
								44215,
								44227
							],
							[
								44336,
								44348
							],
							[
								44408,
								44426
							],
							[
								44464,
								44482
							],
							[
								44520,
								44538
							],
							[
								44576,
								44594
							],
							[
								44632,
								44650
							],
							[
								44688,
								44706
							],
							[
								44743,
								44761
							],
							[
								44799,
								44817
							],
							[
								44859,
								44877
							],
							[
								44918,
								44935
							],
							[
								44945,
								44956
							],
							[
								44997,
								45008
							],
							[
								46435,
								46448
							],
							[
								46558,
								46572
							],
							[
								46610,
								46624
							],
							[
								46677,
								46691
							]
						],
						"symlist":
						[
							"JSMatIteratorData",
							"js_mat_free_func",
							"js_mat_sizes",
							"js_mat_dimensions",
							"js_mat_track",
							"js_mat_new",
							"js_mat_wrap",
							"js_mat_data",
							"js_mat_print_data",
							"js_mat_dump",
							"js_mat_params",
							"js_mat_ctor",
							"js_mat_funcs",
							"js_mat_expr",
							"js_mat_init",
							"js_mat_get",
							"js_mat_get",
							"js_mat_get_wh",
							"js_mat_at",
							"js_mat_set",
							"js_mat_set_to",
							"js_mat_get_props",
							"js_mat_tostring",
							"js_mat_inspect",
							"js_mat_getrotationmatrix2d",
							"js_mat_convert_to",
							"js_mat_copy_to",
							"js_mat_reshape",
							"js_mat_getumat",
							"js_mat_class_func",
							"js_mat_fill",
							"js_mat_class_create",
							"js_mat_buffer",
							"js_mat_array",
							"js_mat_call",
							"js_mat_finalizer",
							"js_mat_iterator_new",
							"js_mat_iterator_dump",
							"js_mat_iterator_next",
							"js_mat_iterator_finalizer",
							"js_mat_iterator_dup",
							"JS_CGETSET_MAGIC_DEF",
							"JS_CGETSET_MAGIC_DEF",
							"JS_CGETSET_MAGIC_DEF",
							"JS_CGETSET_MAGIC_DEF",
							"JS_CGETSET_MAGIC_DEF",
							"JS_CGETSET_MAGIC_DEF",
							"JS_CGETSET_MAGIC_DEF",
							"JS_CGETSET_MAGIC_DEF",
							"JS_CGETSET_MAGIC_DEF",
							"JS_CGETSET_MAGIC_DEF",
							"JS_CGETSET_MAGIC_DEF",
							"JS_CGETSET_MAGIC_DEF",
							"JS_CGETSET_MAGIC_DEF",
							"JS_CGETSET_DEF",
							"JS_CGETSET_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_DEF",
							"JS_CFUNC_DEF",
							"JS_CFUNC_DEF",
							"JS_CFUNC_DEF",
							"JS_CFUNC_DEF",
							"JS_CFUNC_DEF",
							"JS_CFUNC_DEF",
							"JS_CFUNC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_ALIAS_DEF",
							"JS_ALIAS_DEF",
							"JS_PROP_STRING_DEF",
							"JS_ITERATOR_NEXT_DEF",
							"JS_PROP_STRING_DEF",
							"JS_CFUNC_DEF",
							"JS_CFUNC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_PROP_INT32_DEF",
							"CV_MAKETYPE",
							"js_mat_init",
							"js_mat_export",
							"JS_INIT_MODULE",
							"JS_INIT_MODULE",
							"JS_INIT_MODULE"
						]
					},
					"BAAAAAAAAAAAAAAAAAAAAAAAAACUBwAASlNNYXRJdGVyYXRvckRhdGEKICBqc19tYXRfZnJlZV9mdW5jCiAganNfbWF0X3NpemVzCiAganNfbWF0X2RpbWVuc2lvbnMKICBqc19tYXRfdHJhY2sKICBqc19tYXRfbmV3CiAganNfbWF0X3dyYXAKICBqc19tYXRfZGF0YQogIGpzX21hdF9wcmludF9kYXRhCiAganNfbWF0X2R1bXAKICBqc19tYXRfcGFyYW1zCiAganNfbWF0X2N0b3IKICBqc19tYXRfZnVuY3MKICBqc19tYXRfZXhwcgogIGpzX21hdF9pbml0CiAganNfbWF0X2dldAogIGpzX21hdF9nZXQKICBqc19tYXRfZ2V0X3doCiAganNfbWF0X2F0CiAganNfbWF0X3NldAogIGpzX21hdF9zZXRfdG8KICBqc19tYXRfZ2V0X3Byb3BzCiAganNfbWF0X3Rvc3RyaW5nCiAganNfbWF0X2luc3BlY3QKICBqc19tYXRfZ2V0cm90YXRpb25tYXRyaXgyZAogIGpzX21hdF9jb252ZXJ0X3RvCiAganNfbWF0X2NvcHlfdG8KICBqc19tYXRfcmVzaGFwZQogIGpzX21hdF9nZXR1bWF0CiAganNfbWF0X2NsYXNzX2Z1bmMKICBqc19tYXRfZmlsbAogIGpzX21hdF9jbGFzc19jcmVhdGUKICBqc19tYXRfYnVmZmVyCiAganNfbWF0X2FycmF5CiAganNfbWF0X2NhbGwKICBqc19tYXRfZmluYWxpemVyCiAganNfbWF0X2l0ZXJhdG9yX25ldwogIGpzX21hdF9pdGVyYXRvcl9kdW1wCiAganNfbWF0X2l0ZXJhdG9yX25leHQKICBqc19tYXRfaXRlcmF0b3JfZmluYWxpemVyCiAganNfbWF0X2l0ZXJhdG9yX2R1cApKU19DR0VUU0VUX01BR0lDX0RFRgpKU19DR0VUU0VUX01BR0lDX0RFRgpKU19DR0VUU0VUX01BR0lDX0RFRgpKU19DR0VUU0VUX01BR0lDX0RFRgpKU19DR0VUU0VUX01BR0lDX0RFRgpKU19DR0VUU0VUX01BR0lDX0RFRgpKU19DR0VUU0VUX01BR0lDX0RFRgpKU19DR0VUU0VUX01BR0lDX0RFRgpKU19DR0VUU0VUX01BR0lDX0RFRgpKU19DR0VUU0VUX01BR0lDX0RFRgpKU19DR0VUU0VUX01BR0lDX0RFRgpKU19DR0VUU0VUX01BR0lDX0RFRgpKU19DR0VUU0VUX01BR0lDX0RFRgpKU19DR0VUU0VUX0RFRgpKU19DR0VUU0VUX0RFRgpKU19DRlVOQ19NQUdJQ19ERUYKSlNfQ0ZVTkNfTUFHSUNfREVGCkpTX0NGVU5DX01BR0lDX0RFRgpKU19DRlVOQ19NQUdJQ19ERUYKSlNfQ0ZVTkNfTUFHSUNfREVGCkpTX0NGVU5DX01BR0lDX0RFRgpKU19DRlVOQ19NQUdJQ19ERUYKSlNfQ0ZVTkNfTUFHSUNfREVGCkpTX0NGVU5DX01BR0lDX0RFRgpKU19DRlVOQ19NQUdJQ19ERUYKSlNfQ0ZVTkNfTUFHSUNfREVGCkpTX0NGVU5DX01BR0lDX0RFRgpKU19DRlVOQ19NQUdJQ19ERUYKSlNfQ0ZVTkNfTUFHSUNfREVGCkpTX0NGVU5DX01BR0lDX0RFRgpKU19DRlVOQ19NQUdJQ19ERUYKSlNfQ0ZVTkNfTUFHSUNfREVGCkpTX0NGVU5DX01BR0lDX0RFRgpKU19DRlVOQ19NQUdJQ19ERUYKSlNfQ0ZVTkNfTUFHSUNfREVGCkpTX0NGVU5DX0RFRgpKU19DRlVOQ19ERUYKSlNfQ0ZVTkNfREVGCkpTX0NGVU5DX0RFRgpKU19DRlVOQ19ERUYKSlNfQ0ZVTkNfREVGCkpTX0NGVU5DX0RFRgpKU19DRlVOQ19ERUYKSlNfQ0ZVTkNfTUFHSUNfREVGCkpTX0NGVU5DX01BR0lDX0RFRgpKU19DRlVOQ19NQUdJQ19ERUYKSlNfQUxJQVNfREVGCkpTX0FMSUFTX0RFRgpKU19QUk9QX1NUUklOR19ERUYKSlNfSVRFUkFUT1JfTkVYVF9ERUYKSlNfUFJPUF9TVFJJTkdfREVGCkpTX0NGVU5DX0RFRgpKU19DRlVOQ19ERUYKSlNfQ0ZVTkNfTUFHSUNfREVGCkpTX0NGVU5DX01BR0lDX0RFRgpKU19DRlVOQ19NQUdJQ19ERUYKSlNfQ0ZVTkNfTUFHSUNfREVGCkpTX0NGVU5DX01BR0lDX0RFRgpKU19DRlVOQ19NQUdJQ19ERUYKSlNfQ0ZVTkNfTUFHSUNfREVGCkpTX0NGVU5DX01BR0lDX0RFRgpKU19DRlVOQ19NQUdJQ19ERUYKSlNfUFJPUF9JTlQzMl9ERUYKQ1ZfTUFLRVRZUEUKICBqc19tYXRfaW5pdAogIGpzX21hdF9leHBvcnQKSlNfSU5JVF9NT0RVTEUKSlNfSU5JVF9NT0RVTEUKSlNfSU5JVF9NT0RVTEUAAAAAAAAAAJQHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACUBwAASlNNYXRJdGVyYXRvckRhdGEKICBqc19tYXRfZnJlZV9mdW5jCiAganNfbWF0X3NpemVzCiAganNfbWF0X2RpbWVuc2lvbnMKICBqc19tYXRfdHJhY2sKICBqc19tYXRfbmV3CiAganNfbWF0X3dyYXAKICBqc19tYXRfZGF0YQogIGpzX21hdF9wcmludF9kYXRhCiAganNfbWF0X2R1bXAKICBqc19tYXRfcGFyYW1zCiAganNfbWF0X2N0b3IKICBqc19tYXRfZnVuY3MKICBqc19tYXRfZXhwcgogIGpzX21hdF9pbml0CiAganNfbWF0X2dldAogIGpzX21hdF9nZXQKICBqc19tYXRfZ2V0X3doCiAganNfbWF0X2F0CiAganNfbWF0X3NldAogIGpzX21hdF9zZXRfdG8KICBqc19tYXRfZ2V0X3Byb3BzCiAganNfbWF0X3Rvc3RyaW5nCiAganNfbWF0X2luc3BlY3QKICBqc19tYXRfZ2V0cm90YXRpb25tYXRyaXgyZAogIGpzX21hdF9jb252ZXJ0X3RvCiAganNfbWF0X2NvcHlfdG8KICBqc19tYXRfcmVzaGFwZQogIGpzX21hdF9nZXR1bWF0CiAganNfbWF0X2NsYXNzX2Z1bmMKICBqc19tYXRfZmlsbAogIGpzX21hdF9jbGFzc19jcmVhdGUKICBqc19tYXRfYnVmZmVyCiAganNfbWF0X2FycmF5CiAganNfbWF0X2NhbGwKICBqc19tYXRfZmluYWxpemVyCiAganNfbWF0X2l0ZXJhdG9yX25ldwogIGpzX21hdF9pdGVyYXRvcl9kdW1wCiAganNfbWF0X2l0ZXJhdG9yX25leHQKICBqc19tYXRfaXRlcmF0b3JfZmluYWxpemVyCiAganNfbWF0X2l0ZXJhdG9yX2R1cApKU19DR0VUU0VUX01BR0lDX0RFRgpKU19DR0VUU0VUX01BR0lDX0RFRgpKU19DR0VUU0VUX01BR0lDX0RFRgpKU19DR0VUU0VUX01BR0lDX0RFRgpKU19DR0VUU0VUX01BR0lDX0RFRgpKU19DR0VUU0VUX01BR0lDX0RFRgpKU19DR0VUU0VUX01BR0lDX0RFRgpKU19DR0VUU0VUX01BR0lDX0RFRgpKU19DR0VUU0VUX01BR0lDX0RFRgpKU19DR0VUU0VUX01BR0lDX0RFRgpKU19DR0VUU0VUX01BR0lDX0RFRgpKU19DR0VUU0VUX01BR0lDX0RFRgpKU19DR0VUU0VUX01BR0lDX0RFRgpKU19DR0VUU0VUX0RFRgpKU19DR0VUU0VUX0RFRgpKU19DRlVOQ19NQUdJQ19ERUYKSlNfQ0ZVTkNfTUFHSUNfREVGCkpTX0NGVU5DX01BR0lDX0RFRgpKU19DRlVOQ19NQUdJQ19ERUYKSlNfQ0ZVTkNfTUFHSUNfREVGCkpTX0NGVU5DX01BR0lDX0RFRgpKU19DRlVOQ19NQUdJQ19ERUYKSlNfQ0ZVTkNfTUFHSUNfREVGCkpTX0NGVU5DX01BR0lDX0RFRgpKU19DRlVOQ19NQUdJQ19ERUYKSlNfQ0ZVTkNfTUFHSUNfREVGCkpTX0NGVU5DX01BR0lDX0RFRgpKU19DRlVOQ19NQUdJQ19ERUYKSlNfQ0ZVTkNfTUFHSUNfREVGCkpTX0NGVU5DX01BR0lDX0RFRgpKU19DRlVOQ19NQUdJQ19ERUYKSlNfQ0ZVTkNfTUFHSUNfREVGCkpTX0NGVU5DX01BR0lDX0RFRgpKU19DRlVOQ19NQUdJQ19ERUYKSlNfQ0ZVTkNfTUFHSUNfREVGCkpTX0NGVU5DX0RFRgpKU19DRlVOQ19ERUYKSlNfQ0ZVTkNfREVGCkpTX0NGVU5DX0RFRgpKU19DRlVOQ19ERUYKSlNfQ0ZVTkNfREVGCkpTX0NGVU5DX0RFRgpKU19DRlVOQ19ERUYKSlNfQ0ZVTkNfTUFHSUNfREVGCkpTX0NGVU5DX01BR0lDX0RFRgpKU19DRlVOQ19NQUdJQ19ERUYKSlNfQUxJQVNfREVGCkpTX0FMSUFTX0RFRgpKU19QUk9QX1NUUklOR19ERUYKSlNfSVRFUkFUT1JfTkVYVF9ERUYKSlNfUFJPUF9TVFJJTkdfREVGCkpTX0NGVU5DX0RFRgpKU19DRlVOQ19ERUYKSlNfQ0ZVTkNfTUFHSUNfREVGCkpTX0NGVU5DX01BR0lDX0RFRgpKU19DRlVOQ19NQUdJQ19ERUYKSlNfQ0ZVTkNfTUFHSUNfREVGCkpTX0NGVU5DX01BR0lDX0RFRgpKU19DRlVOQ19NQUdJQ19ERUYKSlNfQ0ZVTkNfTUFHSUNfREVGCkpTX0NGVU5DX01BR0lDX0RFRgpKU19DRlVOQ19NQUdJQ19ERUYKSlNfUFJPUF9JTlQzMl9ERUYKQ1ZfTUFLRVRZUEUKICBqc19tYXRfaW5pdAogIGpzX21hdF9leHBvcnQKSlNfSU5JVF9NT0RVTEUKSlNfSU5JVF9NT0RVTEUKSlNfSU5JVF9NT0RVTEUAAAAAAAAAAJQHAAAAAAAAAAAAAA",
					"AQAAAAAAAAAAAAAA"
				],
				[
					740,
					2,
					"outline_refresh",
					{
						"path": "/home/roman/Projects/qjs-opencv/js_mat.cpp",
						"symkeys":
						[
							[
								1280,
								1297
							],
							[
								1411,
								1427
							],
							[
								1634,
								1646
							],
							[
								1962,
								1979
							],
							[
								2322,
								2334
							],
							[
								2957,
								2967
							],
							[
								3546,
								3557
							],
							[
								4389,
								4400
							],
							[
								4822,
								4839
							],
							[
								5342,
								5353
							],
							[
								6385,
								6398
							],
							[
								6900,
								6911
							],
							[
								7123,
								7135
							],
							[
								9523,
								9534
							],
							[
								12790,
								12801
							],
							[
								13653,
								13663
							],
							[
								13871,
								13881
							],
							[
								15447,
								15460
							],
							[
								15669,
								15678
							],
							[
								16440,
								16450
							],
							[
								19907,
								19920
							],
							[
								21695,
								21711
							],
							[
								23100,
								23115
							],
							[
								24759,
								24773
							],
							[
								25378,
								25404
							],
							[
								25911,
								25928
							],
							[
								26449,
								26463
							],
							[
								27027,
								27041
							],
							[
								28022,
								28036
							],
							[
								28598,
								28615
							],
							[
								29505,
								29516
							],
							[
								30056,
								30075
							],
							[
								30967,
								30980
							],
							[
								31751,
								31763
							],
							[
								32445,
								32456
							],
							[
								32959,
								32975
							],
							[
								34440,
								34459
							],
							[
								35543,
								35563
							],
							[
								35760,
								35780
							],
							[
								38040,
								38065
							],
							[
								38243,
								38262
							],
							[
								38660,
								38680
							],
							[
								38776,
								38796
							],
							[
								38892,
								38912
							],
							[
								39016,
								39036
							],
							[
								39132,
								39152
							],
							[
								39250,
								39270
							],
							[
								39368,
								39388
							],
							[
								39486,
								39506
							],
							[
								39602,
								39622
							],
							[
								39730,
								39750
							],
							[
								39856,
								39876
							],
							[
								39972,
								39992
							],
							[
								40096,
								40116
							],
							[
								40222,
								40236
							],
							[
								40320,
								40334
							],
							[
								40416,
								40434
							],
							[
								40523,
								40541
							],
							[
								40630,
								40648
							],
							[
								40748,
								40766
							],
							[
								40866,
								40884
							],
							[
								40977,
								40995
							],
							[
								41084,
								41102
							],
							[
								41199,
								41217
							],
							[
								41306,
								41324
							],
							[
								41417,
								41435
							],
							[
								41528,
								41546
							],
							[
								41641,
								41659
							],
							[
								41752,
								41770
							],
							[
								41872,
								41890
							],
							[
								41980,
								41998
							],
							[
								42088,
								42106
							],
							[
								42194,
								42212
							],
							[
								42302,
								42320
							],
							[
								42411,
								42429
							],
							[
								42509,
								42527
							],
							[
								42607,
								42619
							],
							[
								42704,
								42716
							],
							[
								42789,
								42801
							],
							[
								42876,
								42888
							],
							[
								42968,
								42980
							],
							[
								43068,
								43080
							],
							[
								43162,
								43174
							],
							[
								43257,
								43269
							],
							[
								43352,
								43370
							],
							[
								43474,
								43492
							],
							[
								43600,
								43618
							],
							[
								43728,
								43740
							],
							[
								43824,
								43836
							],
							[
								43926,
								43944
							],
							[
								44068,
								44088
							],
							[
								44130,
								44148
							],
							[
								44215,
								44227
							],
							[
								44336,
								44348
							],
							[
								44408,
								44426
							],
							[
								44464,
								44482
							],
							[
								44520,
								44538
							],
							[
								44576,
								44594
							],
							[
								44632,
								44650
							],
							[
								44688,
								44706
							],
							[
								44743,
								44761
							],
							[
								44799,
								44817
							],
							[
								44859,
								44877
							],
							[
								44918,
								44935
							],
							[
								44945,
								44956
							],
							[
								44997,
								45008
							],
							[
								46435,
								46448
							],
							[
								46558,
								46572
							],
							[
								46610,
								46624
							],
							[
								46677,
								46691
							]
						],
						"symlist":
						[
							"JSMatIteratorData",
							"js_mat_free_func",
							"js_mat_sizes",
							"js_mat_dimensions",
							"js_mat_track",
							"js_mat_new",
							"js_mat_wrap",
							"js_mat_data",
							"js_mat_print_data",
							"js_mat_dump",
							"js_mat_params",
							"js_mat_ctor",
							"js_mat_funcs",
							"js_mat_expr",
							"js_mat_init",
							"js_mat_get",
							"js_mat_get",
							"js_mat_get_wh",
							"js_mat_at",
							"js_mat_set",
							"js_mat_set_to",
							"js_mat_get_props",
							"js_mat_tostring",
							"js_mat_inspect",
							"js_mat_getrotationmatrix2d",
							"js_mat_convert_to",
							"js_mat_copy_to",
							"js_mat_reshape",
							"js_mat_getumat",
							"js_mat_class_func",
							"js_mat_fill",
							"js_mat_class_create",
							"js_mat_buffer",
							"js_mat_array",
							"js_mat_call",
							"js_mat_finalizer",
							"js_mat_iterator_new",
							"js_mat_iterator_dump",
							"js_mat_iterator_next",
							"js_mat_iterator_finalizer",
							"js_mat_iterator_dup",
							"JS_CGETSET_MAGIC_DEF",
							"JS_CGETSET_MAGIC_DEF",
							"JS_CGETSET_MAGIC_DEF",
							"JS_CGETSET_MAGIC_DEF",
							"JS_CGETSET_MAGIC_DEF",
							"JS_CGETSET_MAGIC_DEF",
							"JS_CGETSET_MAGIC_DEF",
							"JS_CGETSET_MAGIC_DEF",
							"JS_CGETSET_MAGIC_DEF",
							"JS_CGETSET_MAGIC_DEF",
							"JS_CGETSET_MAGIC_DEF",
							"JS_CGETSET_MAGIC_DEF",
							"JS_CGETSET_MAGIC_DEF",
							"JS_CGETSET_DEF",
							"JS_CGETSET_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_DEF",
							"JS_CFUNC_DEF",
							"JS_CFUNC_DEF",
							"JS_CFUNC_DEF",
							"JS_CFUNC_DEF",
							"JS_CFUNC_DEF",
							"JS_CFUNC_DEF",
							"JS_CFUNC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_ALIAS_DEF",
							"JS_ALIAS_DEF",
							"JS_PROP_STRING_DEF",
							"JS_ITERATOR_NEXT_DEF",
							"JS_PROP_STRING_DEF",
							"JS_CFUNC_DEF",
							"JS_CFUNC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_PROP_INT32_DEF",
							"CV_MAKETYPE",
							"js_mat_init",
							"js_mat_export",
							"JS_INIT_MODULE",
							"JS_INIT_MODULE",
							"JS_INIT_MODULE"
						]
					},
					"BAAAAAAAAAAAAAAAAAAAAAAAAACUBwAASlNNYXRJdGVyYXRvckRhdGEKICBqc19tYXRfZnJlZV9mdW5jCiAganNfbWF0X3NpemVzCiAganNfbWF0X2RpbWVuc2lvbnMKICBqc19tYXRfdHJhY2sKICBqc19tYXRfbmV3CiAganNfbWF0X3dyYXAKICBqc19tYXRfZGF0YQogIGpzX21hdF9wcmludF9kYXRhCiAganNfbWF0X2R1bXAKICBqc19tYXRfcGFyYW1zCiAganNfbWF0X2N0b3IKICBqc19tYXRfZnVuY3MKICBqc19tYXRfZXhwcgogIGpzX21hdF9pbml0CiAganNfbWF0X2dldAogIGpzX21hdF9nZXQKICBqc19tYXRfZ2V0X3doCiAganNfbWF0X2F0CiAganNfbWF0X3NldAogIGpzX21hdF9zZXRfdG8KICBqc19tYXRfZ2V0X3Byb3BzCiAganNfbWF0X3Rvc3RyaW5nCiAganNfbWF0X2luc3BlY3QKICBqc19tYXRfZ2V0cm90YXRpb25tYXRyaXgyZAogIGpzX21hdF9jb252ZXJ0X3RvCiAganNfbWF0X2NvcHlfdG8KICBqc19tYXRfcmVzaGFwZQogIGpzX21hdF9nZXR1bWF0CiAganNfbWF0X2NsYXNzX2Z1bmMKICBqc19tYXRfZmlsbAogIGpzX21hdF9jbGFzc19jcmVhdGUKICBqc19tYXRfYnVmZmVyCiAganNfbWF0X2FycmF5CiAganNfbWF0X2NhbGwKICBqc19tYXRfZmluYWxpemVyCiAganNfbWF0X2l0ZXJhdG9yX25ldwogIGpzX21hdF9pdGVyYXRvcl9kdW1wCiAganNfbWF0X2l0ZXJhdG9yX25leHQKICBqc19tYXRfaXRlcmF0b3JfZmluYWxpemVyCiAganNfbWF0X2l0ZXJhdG9yX2R1cApKU19DR0VUU0VUX01BR0lDX0RFRgpKU19DR0VUU0VUX01BR0lDX0RFRgpKU19DR0VUU0VUX01BR0lDX0RFRgpKU19DR0VUU0VUX01BR0lDX0RFRgpKU19DR0VUU0VUX01BR0lDX0RFRgpKU19DR0VUU0VUX01BR0lDX0RFRgpKU19DR0VUU0VUX01BR0lDX0RFRgpKU19DR0VUU0VUX01BR0lDX0RFRgpKU19DR0VUU0VUX01BR0lDX0RFRgpKU19DR0VUU0VUX01BR0lDX0RFRgpKU19DR0VUU0VUX01BR0lDX0RFRgpKU19DR0VUU0VUX01BR0lDX0RFRgpKU19DR0VUU0VUX01BR0lDX0RFRgpKU19DR0VUU0VUX0RFRgpKU19DR0VUU0VUX0RFRgpKU19DRlVOQ19NQUdJQ19ERUYKSlNfQ0ZVTkNfTUFHSUNfREVGCkpTX0NGVU5DX01BR0lDX0RFRgpKU19DRlVOQ19NQUdJQ19ERUYKSlNfQ0ZVTkNfTUFHSUNfREVGCkpTX0NGVU5DX01BR0lDX0RFRgpKU19DRlVOQ19NQUdJQ19ERUYKSlNfQ0ZVTkNfTUFHSUNfREVGCkpTX0NGVU5DX01BR0lDX0RFRgpKU19DRlVOQ19NQUdJQ19ERUYKSlNfQ0ZVTkNfTUFHSUNfREVGCkpTX0NGVU5DX01BR0lDX0RFRgpKU19DRlVOQ19NQUdJQ19ERUYKSlNfQ0ZVTkNfTUFHSUNfREVGCkpTX0NGVU5DX01BR0lDX0RFRgpKU19DRlVOQ19NQUdJQ19ERUYKSlNfQ0ZVTkNfTUFHSUNfREVGCkpTX0NGVU5DX01BR0lDX0RFRgpKU19DRlVOQ19NQUdJQ19ERUYKSlNfQ0ZVTkNfTUFHSUNfREVGCkpTX0NGVU5DX0RFRgpKU19DRlVOQ19ERUYKSlNfQ0ZVTkNfREVGCkpTX0NGVU5DX0RFRgpKU19DRlVOQ19ERUYKSlNfQ0ZVTkNfREVGCkpTX0NGVU5DX0RFRgpKU19DRlVOQ19ERUYKSlNfQ0ZVTkNfTUFHSUNfREVGCkpTX0NGVU5DX01BR0lDX0RFRgpKU19DRlVOQ19NQUdJQ19ERUYKSlNfQUxJQVNfREVGCkpTX0FMSUFTX0RFRgpKU19QUk9QX1NUUklOR19ERUYKSlNfSVRFUkFUT1JfTkVYVF9ERUYKSlNfUFJPUF9TVFJJTkdfREVGCkpTX0NGVU5DX0RFRgpKU19DRlVOQ19ERUYKSlNfQ0ZVTkNfTUFHSUNfREVGCkpTX0NGVU5DX01BR0lDX0RFRgpKU19DRlVOQ19NQUdJQ19ERUYKSlNfQ0ZVTkNfTUFHSUNfREVGCkpTX0NGVU5DX01BR0lDX0RFRgpKU19DRlVOQ19NQUdJQ19ERUYKSlNfQ0ZVTkNfTUFHSUNfREVGCkpTX0NGVU5DX01BR0lDX0RFRgpKU19DRlVOQ19NQUdJQ19ERUYKSlNfUFJPUF9JTlQzMl9ERUYKQ1ZfTUFLRVRZUEUKICBqc19tYXRfaW5pdAogIGpzX21hdF9leHBvcnQKSlNfSU5JVF9NT0RVTEUKSlNfSU5JVF9NT0RVTEUKSlNfSU5JVF9NT0RVTEUAAAAAAAAAAJQHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACUBwAASlNNYXRJdGVyYXRvckRhdGEKICBqc19tYXRfZnJlZV9mdW5jCiAganNfbWF0X3NpemVzCiAganNfbWF0X2RpbWVuc2lvbnMKICBqc19tYXRfdHJhY2sKICBqc19tYXRfbmV3CiAganNfbWF0X3dyYXAKICBqc19tYXRfZGF0YQogIGpzX21hdF9wcmludF9kYXRhCiAganNfbWF0X2R1bXAKICBqc19tYXRfcGFyYW1zCiAganNfbWF0X2N0b3IKICBqc19tYXRfZnVuY3MKICBqc19tYXRfZXhwcgogIGpzX21hdF9pbml0CiAganNfbWF0X2dldAogIGpzX21hdF9nZXQKICBqc19tYXRfZ2V0X3doCiAganNfbWF0X2F0CiAganNfbWF0X3NldAogIGpzX21hdF9zZXRfdG8KICBqc19tYXRfZ2V0X3Byb3BzCiAganNfbWF0X3Rvc3RyaW5nCiAganNfbWF0X2luc3BlY3QKICBqc19tYXRfZ2V0cm90YXRpb25tYXRyaXgyZAogIGpzX21hdF9jb252ZXJ0X3RvCiAganNfbWF0X2NvcHlfdG8KICBqc19tYXRfcmVzaGFwZQogIGpzX21hdF9nZXR1bWF0CiAganNfbWF0X2NsYXNzX2Z1bmMKICBqc19tYXRfZmlsbAogIGpzX21hdF9jbGFzc19jcmVhdGUKICBqc19tYXRfYnVmZmVyCiAganNfbWF0X2FycmF5CiAganNfbWF0X2NhbGwKICBqc19tYXRfZmluYWxpemVyCiAganNfbWF0X2l0ZXJhdG9yX25ldwogIGpzX21hdF9pdGVyYXRvcl9kdW1wCiAganNfbWF0X2l0ZXJhdG9yX25leHQKICBqc19tYXRfaXRlcmF0b3JfZmluYWxpemVyCiAganNfbWF0X2l0ZXJhdG9yX2R1cApKU19DR0VUU0VUX01BR0lDX0RFRgpKU19DR0VUU0VUX01BR0lDX0RFRgpKU19DR0VUU0VUX01BR0lDX0RFRgpKU19DR0VUU0VUX01BR0lDX0RFRgpKU19DR0VUU0VUX01BR0lDX0RFRgpKU19DR0VUU0VUX01BR0lDX0RFRgpKU19DR0VUU0VUX01BR0lDX0RFRgpKU19DR0VUU0VUX01BR0lDX0RFRgpKU19DR0VUU0VUX01BR0lDX0RFRgpKU19DR0VUU0VUX01BR0lDX0RFRgpKU19DR0VUU0VUX01BR0lDX0RFRgpKU19DR0VUU0VUX01BR0lDX0RFRgpKU19DR0VUU0VUX01BR0lDX0RFRgpKU19DR0VUU0VUX0RFRgpKU19DR0VUU0VUX0RFRgpKU19DRlVOQ19NQUdJQ19ERUYKSlNfQ0ZVTkNfTUFHSUNfREVGCkpTX0NGVU5DX01BR0lDX0RFRgpKU19DRlVOQ19NQUdJQ19ERUYKSlNfQ0ZVTkNfTUFHSUNfREVGCkpTX0NGVU5DX01BR0lDX0RFRgpKU19DRlVOQ19NQUdJQ19ERUYKSlNfQ0ZVTkNfTUFHSUNfREVGCkpTX0NGVU5DX01BR0lDX0RFRgpKU19DRlVOQ19NQUdJQ19ERUYKSlNfQ0ZVTkNfTUFHSUNfREVGCkpTX0NGVU5DX01BR0lDX0RFRgpKU19DRlVOQ19NQUdJQ19ERUYKSlNfQ0ZVTkNfTUFHSUNfREVGCkpTX0NGVU5DX01BR0lDX0RFRgpKU19DRlVOQ19NQUdJQ19ERUYKSlNfQ0ZVTkNfTUFHSUNfREVGCkpTX0NGVU5DX01BR0lDX0RFRgpKU19DRlVOQ19NQUdJQ19ERUYKSlNfQ0ZVTkNfTUFHSUNfREVGCkpTX0NGVU5DX0RFRgpKU19DRlVOQ19ERUYKSlNfQ0ZVTkNfREVGCkpTX0NGVU5DX0RFRgpKU19DRlVOQ19ERUYKSlNfQ0ZVTkNfREVGCkpTX0NGVU5DX0RFRgpKU19DRlVOQ19ERUYKSlNfQ0ZVTkNfTUFHSUNfREVGCkpTX0NGVU5DX01BR0lDX0RFRgpKU19DRlVOQ19NQUdJQ19ERUYKSlNfQUxJQVNfREVGCkpTX0FMSUFTX0RFRgpKU19QUk9QX1NUUklOR19ERUYKSlNfSVRFUkFUT1JfTkVYVF9ERUYKSlNfUFJPUF9TVFJJTkdfREVGCkpTX0NGVU5DX0RFRgpKU19DRlVOQ19ERUYKSlNfQ0ZVTkNfTUFHSUNfREVGCkpTX0NGVU5DX01BR0lDX0RFRgpKU19DRlVOQ19NQUdJQ19ERUYKSlNfQ0ZVTkNfTUFHSUNfREVGCkpTX0NGVU5DX01BR0lDX0RFRgpKU19DRlVOQ19NQUdJQ19ERUYKSlNfQ0ZVTkNfTUFHSUNfREVGCkpTX0NGVU5DX01BR0lDX0RFRgpKU19DRlVOQ19NQUdJQ19ERUYKSlNfUFJPUF9JTlQzMl9ERUYKQ1ZfTUFLRVRZUEUKICBqc19tYXRfaW5pdAogIGpzX21hdF9leHBvcnQKSlNfSU5JVF9NT0RVTEUKSlNfSU5JVF9NT0RVTEUKSlNfSU5JVF9NT0RVTEUAAAAAAAAAAJQHAAAAAAAAAAAAAA",
					"AQAAAAAAAAAAAAAA"
				],
				[
					741,
					2,
					"outline_refresh",
					{
						"path": "/home/roman/Projects/qjs-opencv/js_mat.cpp",
						"symkeys":
						[
							[
								1280,
								1297
							],
							[
								1411,
								1427
							],
							[
								1634,
								1646
							],
							[
								1962,
								1979
							],
							[
								2322,
								2334
							],
							[
								2957,
								2967
							],
							[
								3546,
								3557
							],
							[
								4389,
								4400
							],
							[
								4822,
								4839
							],
							[
								5342,
								5353
							],
							[
								6385,
								6398
							],
							[
								6900,
								6911
							],
							[
								7123,
								7135
							],
							[
								9523,
								9534
							],
							[
								12790,
								12801
							],
							[
								13653,
								13663
							],
							[
								13871,
								13881
							],
							[
								15447,
								15460
							],
							[
								15669,
								15678
							],
							[
								16440,
								16450
							],
							[
								19907,
								19920
							],
							[
								21695,
								21711
							],
							[
								23100,
								23115
							],
							[
								24759,
								24773
							],
							[
								25378,
								25404
							],
							[
								25911,
								25928
							],
							[
								26449,
								26463
							],
							[
								27027,
								27041
							],
							[
								28022,
								28036
							],
							[
								28598,
								28615
							],
							[
								29505,
								29516
							],
							[
								30056,
								30075
							],
							[
								30967,
								30980
							],
							[
								31751,
								31763
							],
							[
								32445,
								32456
							],
							[
								32959,
								32975
							],
							[
								34440,
								34459
							],
							[
								35543,
								35563
							],
							[
								35760,
								35780
							],
							[
								38040,
								38065
							],
							[
								38243,
								38262
							],
							[
								38660,
								38680
							],
							[
								38776,
								38796
							],
							[
								38892,
								38912
							],
							[
								39016,
								39036
							],
							[
								39132,
								39152
							],
							[
								39250,
								39270
							],
							[
								39368,
								39388
							],
							[
								39486,
								39506
							],
							[
								39602,
								39622
							],
							[
								39730,
								39750
							],
							[
								39856,
								39876
							],
							[
								39972,
								39992
							],
							[
								40096,
								40116
							],
							[
								40222,
								40236
							],
							[
								40320,
								40334
							],
							[
								40416,
								40434
							],
							[
								40523,
								40541
							],
							[
								40630,
								40648
							],
							[
								40748,
								40766
							],
							[
								40866,
								40884
							],
							[
								40977,
								40995
							],
							[
								41084,
								41102
							],
							[
								41199,
								41217
							],
							[
								41306,
								41324
							],
							[
								41417,
								41435
							],
							[
								41528,
								41546
							],
							[
								41641,
								41659
							],
							[
								41752,
								41770
							],
							[
								41872,
								41890
							],
							[
								41980,
								41998
							],
							[
								42088,
								42106
							],
							[
								42194,
								42212
							],
							[
								42302,
								42320
							],
							[
								42411,
								42429
							],
							[
								42509,
								42527
							],
							[
								42607,
								42619
							],
							[
								42704,
								42716
							],
							[
								42789,
								42801
							],
							[
								42876,
								42888
							],
							[
								42968,
								42980
							],
							[
								43068,
								43080
							],
							[
								43162,
								43174
							],
							[
								43257,
								43269
							],
							[
								43352,
								43370
							],
							[
								43474,
								43492
							],
							[
								43600,
								43618
							],
							[
								43728,
								43740
							],
							[
								43824,
								43836
							],
							[
								43926,
								43944
							],
							[
								44068,
								44088
							],
							[
								44130,
								44148
							],
							[
								44215,
								44227
							],
							[
								44336,
								44348
							],
							[
								44408,
								44426
							],
							[
								44464,
								44482
							],
							[
								44520,
								44538
							],
							[
								44576,
								44594
							],
							[
								44632,
								44650
							],
							[
								44688,
								44706
							],
							[
								44743,
								44761
							],
							[
								44799,
								44817
							],
							[
								44859,
								44877
							],
							[
								44918,
								44935
							],
							[
								44945,
								44956
							],
							[
								44997,
								45008
							],
							[
								46435,
								46448
							],
							[
								46558,
								46572
							],
							[
								46610,
								46624
							],
							[
								46677,
								46691
							]
						],
						"symlist":
						[
							"JSMatIteratorData",
							"js_mat_free_func",
							"js_mat_sizes",
							"js_mat_dimensions",
							"js_mat_track",
							"js_mat_new",
							"js_mat_wrap",
							"js_mat_data",
							"js_mat_print_data",
							"js_mat_dump",
							"js_mat_params",
							"js_mat_ctor",
							"js_mat_funcs",
							"js_mat_expr",
							"js_mat_init",
							"js_mat_get",
							"js_mat_get",
							"js_mat_get_wh",
							"js_mat_at",
							"js_mat_set",
							"js_mat_set_to",
							"js_mat_get_props",
							"js_mat_tostring",
							"js_mat_inspect",
							"js_mat_getrotationmatrix2d",
							"js_mat_convert_to",
							"js_mat_copy_to",
							"js_mat_reshape",
							"js_mat_getumat",
							"js_mat_class_func",
							"js_mat_fill",
							"js_mat_class_create",
							"js_mat_buffer",
							"js_mat_array",
							"js_mat_call",
							"js_mat_finalizer",
							"js_mat_iterator_new",
							"js_mat_iterator_dump",
							"js_mat_iterator_next",
							"js_mat_iterator_finalizer",
							"js_mat_iterator_dup",
							"JS_CGETSET_MAGIC_DEF",
							"JS_CGETSET_MAGIC_DEF",
							"JS_CGETSET_MAGIC_DEF",
							"JS_CGETSET_MAGIC_DEF",
							"JS_CGETSET_MAGIC_DEF",
							"JS_CGETSET_MAGIC_DEF",
							"JS_CGETSET_MAGIC_DEF",
							"JS_CGETSET_MAGIC_DEF",
							"JS_CGETSET_MAGIC_DEF",
							"JS_CGETSET_MAGIC_DEF",
							"JS_CGETSET_MAGIC_DEF",
							"JS_CGETSET_MAGIC_DEF",
							"JS_CGETSET_MAGIC_DEF",
							"JS_CGETSET_DEF",
							"JS_CGETSET_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_DEF",
							"JS_CFUNC_DEF",
							"JS_CFUNC_DEF",
							"JS_CFUNC_DEF",
							"JS_CFUNC_DEF",
							"JS_CFUNC_DEF",
							"JS_CFUNC_DEF",
							"JS_CFUNC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_ALIAS_DEF",
							"JS_ALIAS_DEF",
							"JS_PROP_STRING_DEF",
							"JS_ITERATOR_NEXT_DEF",
							"JS_PROP_STRING_DEF",
							"JS_CFUNC_DEF",
							"JS_CFUNC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_PROP_INT32_DEF",
							"CV_MAKETYPE",
							"js_mat_init",
							"js_mat_export",
							"JS_INIT_MODULE",
							"JS_INIT_MODULE",
							"JS_INIT_MODULE"
						]
					},
					"BAAAAAAAAAAAAAAAAAAAAAAAAACUBwAASlNNYXRJdGVyYXRvckRhdGEKICBqc19tYXRfZnJlZV9mdW5jCiAganNfbWF0X3NpemVzCiAganNfbWF0X2RpbWVuc2lvbnMKICBqc19tYXRfdHJhY2sKICBqc19tYXRfbmV3CiAganNfbWF0X3dyYXAKICBqc19tYXRfZGF0YQogIGpzX21hdF9wcmludF9kYXRhCiAganNfbWF0X2R1bXAKICBqc19tYXRfcGFyYW1zCiAganNfbWF0X2N0b3IKICBqc19tYXRfZnVuY3MKICBqc19tYXRfZXhwcgogIGpzX21hdF9pbml0CiAganNfbWF0X2dldAogIGpzX21hdF9nZXQKICBqc19tYXRfZ2V0X3doCiAganNfbWF0X2F0CiAganNfbWF0X3NldAogIGpzX21hdF9zZXRfdG8KICBqc19tYXRfZ2V0X3Byb3BzCiAganNfbWF0X3Rvc3RyaW5nCiAganNfbWF0X2luc3BlY3QKICBqc19tYXRfZ2V0cm90YXRpb25tYXRyaXgyZAogIGpzX21hdF9jb252ZXJ0X3RvCiAganNfbWF0X2NvcHlfdG8KICBqc19tYXRfcmVzaGFwZQogIGpzX21hdF9nZXR1bWF0CiAganNfbWF0X2NsYXNzX2Z1bmMKICBqc19tYXRfZmlsbAogIGpzX21hdF9jbGFzc19jcmVhdGUKICBqc19tYXRfYnVmZmVyCiAganNfbWF0X2FycmF5CiAganNfbWF0X2NhbGwKICBqc19tYXRfZmluYWxpemVyCiAganNfbWF0X2l0ZXJhdG9yX25ldwogIGpzX21hdF9pdGVyYXRvcl9kdW1wCiAganNfbWF0X2l0ZXJhdG9yX25leHQKICBqc19tYXRfaXRlcmF0b3JfZmluYWxpemVyCiAganNfbWF0X2l0ZXJhdG9yX2R1cApKU19DR0VUU0VUX01BR0lDX0RFRgpKU19DR0VUU0VUX01BR0lDX0RFRgpKU19DR0VUU0VUX01BR0lDX0RFRgpKU19DR0VUU0VUX01BR0lDX0RFRgpKU19DR0VUU0VUX01BR0lDX0RFRgpKU19DR0VUU0VUX01BR0lDX0RFRgpKU19DR0VUU0VUX01BR0lDX0RFRgpKU19DR0VUU0VUX01BR0lDX0RFRgpKU19DR0VUU0VUX01BR0lDX0RFRgpKU19DR0VUU0VUX01BR0lDX0RFRgpKU19DR0VUU0VUX01BR0lDX0RFRgpKU19DR0VUU0VUX01BR0lDX0RFRgpKU19DR0VUU0VUX01BR0lDX0RFRgpKU19DR0VUU0VUX0RFRgpKU19DR0VUU0VUX0RFRgpKU19DRlVOQ19NQUdJQ19ERUYKSlNfQ0ZVTkNfTUFHSUNfREVGCkpTX0NGVU5DX01BR0lDX0RFRgpKU19DRlVOQ19NQUdJQ19ERUYKSlNfQ0ZVTkNfTUFHSUNfREVGCkpTX0NGVU5DX01BR0lDX0RFRgpKU19DRlVOQ19NQUdJQ19ERUYKSlNfQ0ZVTkNfTUFHSUNfREVGCkpTX0NGVU5DX01BR0lDX0RFRgpKU19DRlVOQ19NQUdJQ19ERUYKSlNfQ0ZVTkNfTUFHSUNfREVGCkpTX0NGVU5DX01BR0lDX0RFRgpKU19DRlVOQ19NQUdJQ19ERUYKSlNfQ0ZVTkNfTUFHSUNfREVGCkpTX0NGVU5DX01BR0lDX0RFRgpKU19DRlVOQ19NQUdJQ19ERUYKSlNfQ0ZVTkNfTUFHSUNfREVGCkpTX0NGVU5DX01BR0lDX0RFRgpKU19DRlVOQ19NQUdJQ19ERUYKSlNfQ0ZVTkNfTUFHSUNfREVGCkpTX0NGVU5DX0RFRgpKU19DRlVOQ19ERUYKSlNfQ0ZVTkNfREVGCkpTX0NGVU5DX0RFRgpKU19DRlVOQ19ERUYKSlNfQ0ZVTkNfREVGCkpTX0NGVU5DX0RFRgpKU19DRlVOQ19ERUYKSlNfQ0ZVTkNfTUFHSUNfREVGCkpTX0NGVU5DX01BR0lDX0RFRgpKU19DRlVOQ19NQUdJQ19ERUYKSlNfQUxJQVNfREVGCkpTX0FMSUFTX0RFRgpKU19QUk9QX1NUUklOR19ERUYKSlNfSVRFUkFUT1JfTkVYVF9ERUYKSlNfUFJPUF9TVFJJTkdfREVGCkpTX0NGVU5DX0RFRgpKU19DRlVOQ19ERUYKSlNfQ0ZVTkNfTUFHSUNfREVGCkpTX0NGVU5DX01BR0lDX0RFRgpKU19DRlVOQ19NQUdJQ19ERUYKSlNfQ0ZVTkNfTUFHSUNfREVGCkpTX0NGVU5DX01BR0lDX0RFRgpKU19DRlVOQ19NQUdJQ19ERUYKSlNfQ0ZVTkNfTUFHSUNfREVGCkpTX0NGVU5DX01BR0lDX0RFRgpKU19DRlVOQ19NQUdJQ19ERUYKSlNfUFJPUF9JTlQzMl9ERUYKQ1ZfTUFLRVRZUEUKICBqc19tYXRfaW5pdAogIGpzX21hdF9leHBvcnQKSlNfSU5JVF9NT0RVTEUKSlNfSU5JVF9NT0RVTEUKSlNfSU5JVF9NT0RVTEUAAAAAAAAAAJQHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACUBwAASlNNYXRJdGVyYXRvckRhdGEKICBqc19tYXRfZnJlZV9mdW5jCiAganNfbWF0X3NpemVzCiAganNfbWF0X2RpbWVuc2lvbnMKICBqc19tYXRfdHJhY2sKICBqc19tYXRfbmV3CiAganNfbWF0X3dyYXAKICBqc19tYXRfZGF0YQogIGpzX21hdF9wcmludF9kYXRhCiAganNfbWF0X2R1bXAKICBqc19tYXRfcGFyYW1zCiAganNfbWF0X2N0b3IKICBqc19tYXRfZnVuY3MKICBqc19tYXRfZXhwcgogIGpzX21hdF9pbml0CiAganNfbWF0X2dldAogIGpzX21hdF9nZXQKICBqc19tYXRfZ2V0X3doCiAganNfbWF0X2F0CiAganNfbWF0X3NldAogIGpzX21hdF9zZXRfdG8KICBqc19tYXRfZ2V0X3Byb3BzCiAganNfbWF0X3Rvc3RyaW5nCiAganNfbWF0X2luc3BlY3QKICBqc19tYXRfZ2V0cm90YXRpb25tYXRyaXgyZAogIGpzX21hdF9jb252ZXJ0X3RvCiAganNfbWF0X2NvcHlfdG8KICBqc19tYXRfcmVzaGFwZQogIGpzX21hdF9nZXR1bWF0CiAganNfbWF0X2NsYXNzX2Z1bmMKICBqc19tYXRfZmlsbAogIGpzX21hdF9jbGFzc19jcmVhdGUKICBqc19tYXRfYnVmZmVyCiAganNfbWF0X2FycmF5CiAganNfbWF0X2NhbGwKICBqc19tYXRfZmluYWxpemVyCiAganNfbWF0X2l0ZXJhdG9yX25ldwogIGpzX21hdF9pdGVyYXRvcl9kdW1wCiAganNfbWF0X2l0ZXJhdG9yX25leHQKICBqc19tYXRfaXRlcmF0b3JfZmluYWxpemVyCiAganNfbWF0X2l0ZXJhdG9yX2R1cApKU19DR0VUU0VUX01BR0lDX0RFRgpKU19DR0VUU0VUX01BR0lDX0RFRgpKU19DR0VUU0VUX01BR0lDX0RFRgpKU19DR0VUU0VUX01BR0lDX0RFRgpKU19DR0VUU0VUX01BR0lDX0RFRgpKU19DR0VUU0VUX01BR0lDX0RFRgpKU19DR0VUU0VUX01BR0lDX0RFRgpKU19DR0VUU0VUX01BR0lDX0RFRgpKU19DR0VUU0VUX01BR0lDX0RFRgpKU19DR0VUU0VUX01BR0lDX0RFRgpKU19DR0VUU0VUX01BR0lDX0RFRgpKU19DR0VUU0VUX01BR0lDX0RFRgpKU19DR0VUU0VUX01BR0lDX0RFRgpKU19DR0VUU0VUX0RFRgpKU19DR0VUU0VUX0RFRgpKU19DRlVOQ19NQUdJQ19ERUYKSlNfQ0ZVTkNfTUFHSUNfREVGCkpTX0NGVU5DX01BR0lDX0RFRgpKU19DRlVOQ19NQUdJQ19ERUYKSlNfQ0ZVTkNfTUFHSUNfREVGCkpTX0NGVU5DX01BR0lDX0RFRgpKU19DRlVOQ19NQUdJQ19ERUYKSlNfQ0ZVTkNfTUFHSUNfREVGCkpTX0NGVU5DX01BR0lDX0RFRgpKU19DRlVOQ19NQUdJQ19ERUYKSlNfQ0ZVTkNfTUFHSUNfREVGCkpTX0NGVU5DX01BR0lDX0RFRgpKU19DRlVOQ19NQUdJQ19ERUYKSlNfQ0ZVTkNfTUFHSUNfREVGCkpTX0NGVU5DX01BR0lDX0RFRgpKU19DRlVOQ19NQUdJQ19ERUYKSlNfQ0ZVTkNfTUFHSUNfREVGCkpTX0NGVU5DX01BR0lDX0RFRgpKU19DRlVOQ19NQUdJQ19ERUYKSlNfQ0ZVTkNfTUFHSUNfREVGCkpTX0NGVU5DX0RFRgpKU19DRlVOQ19ERUYKSlNfQ0ZVTkNfREVGCkpTX0NGVU5DX0RFRgpKU19DRlVOQ19ERUYKSlNfQ0ZVTkNfREVGCkpTX0NGVU5DX0RFRgpKU19DRlVOQ19ERUYKSlNfQ0ZVTkNfTUFHSUNfREVGCkpTX0NGVU5DX01BR0lDX0RFRgpKU19DRlVOQ19NQUdJQ19ERUYKSlNfQUxJQVNfREVGCkpTX0FMSUFTX0RFRgpKU19QUk9QX1NUUklOR19ERUYKSlNfSVRFUkFUT1JfTkVYVF9ERUYKSlNfUFJPUF9TVFJJTkdfREVGCkpTX0NGVU5DX0RFRgpKU19DRlVOQ19ERUYKSlNfQ0ZVTkNfTUFHSUNfREVGCkpTX0NGVU5DX01BR0lDX0RFRgpKU19DRlVOQ19NQUdJQ19ERUYKSlNfQ0ZVTkNfTUFHSUNfREVGCkpTX0NGVU5DX01BR0lDX0RFRgpKU19DRlVOQ19NQUdJQ19ERUYKSlNfQ0ZVTkNfTUFHSUNfREVGCkpTX0NGVU5DX01BR0lDX0RFRgpKU19DRlVOQ19NQUdJQ19ERUYKSlNfUFJPUF9JTlQzMl9ERUYKQ1ZfTUFLRVRZUEUKICBqc19tYXRfaW5pdAogIGpzX21hdF9leHBvcnQKSlNfSU5JVF9NT0RVTEUKSlNfSU5JVF9NT0RVTEUKSlNfSU5JVF9NT0RVTEUAAAAAAAAAAJQHAAAAAAAAAAAAAA",
					"AQAAAAAAAAAAAAAA"
				],
				[
					742,
					1,
					"outline_refresh",
					{
						"path": "/home/roman/Projects/qjs-opencv/js_umat.cpp",
						"symkeys":
						[
							[
								978,
								995
							],
							[
								1105,
								1123
							],
							[
								1223,
								1235
							],
							[
								1384,
								1397
							],
							[
								1719,
								1737
							],
							[
								2133,
								2145
							],
							[
								2574,
								2592
							],
							[
								3097,
								3109
							],
							[
								4122,
								4133
							],
							[
								4764,
								4778
							],
							[
								5280,
								5292
							],
							[
								5496,
								5513
							],
							[
								5738,
								5751
							],
							[
								7573,
								7585
							],
							[
								8457,
								8468
							],
							[
								8684,
								8695
							],
							[
								10070,
								10084
							],
							[
								10299,
								10309
							],
							[
								11105,
								11116
							],
							[
								11824,
								11837
							],
							[
								12080,
								12095
							],
							[
								12194,
								12210
							],
							[
								12307,
								12319
							],
							[
								12515,
								12533
							],
							[
								12995,
								13013
							],
							[
								13489,
								13507
							],
							[
								14188,
								14206
							],
							[
								14545,
								14554
							],
							[
								14632,
								14646
							],
							[
								15222,
								15239
							],
							[
								16246,
								16262
							],
							[
								17946,
								17961
							],
							[
								19318,
								19336
							],
							[
								19864,
								19879
							],
							[
								20404,
								20419
							],
							[
								21436,
								21450
							],
							[
								21889,
								21901
							],
							[
								22462,
								22482
							],
							[
								23382,
								23396
							],
							[
								23854,
								23867
							],
							[
								24813,
								24825
							],
							[
								25507,
								25527
							],
							[
								25577,
								25597
							],
							[
								25647,
								25667
							],
							[
								25725,
								25745
							],
							[
								25795,
								25815
							],
							[
								25867,
								25887
							],
							[
								25939,
								25959
							],
							[
								26011,
								26031
							],
							[
								26081,
								26101
							],
							[
								26163,
								26183
							],
							[
								26243,
								26263
							],
							[
								26313,
								26333
							],
							[
								26391,
								26411
							],
							[
								26471,
								26485
							],
							[
								26523,
								26537
							],
							[
								26573,
								26591
							],
							[
								26634,
								26652
							],
							[
								26695,
								26713
							],
							[
								26767,
								26785
							],
							[
								26839,
								26857
							],
							[
								26904,
								26922
							],
							[
								26965,
								26983
							],
							[
								27034,
								27052
							],
							[
								27095,
								27113
							],
							[
								27160,
								27178
							],
							[
								27225,
								27243
							],
							[
								27290,
								27308
							],
							[
								27365,
								27383
							],
							[
								27417,
								27435
							],
							[
								27469,
								27481
							],
							[
								27520,
								27532
							],
							[
								27569,
								27581
							],
							[
								27608,
								27620
							],
							[
								27649,
								27661
							],
							[
								27695,
								27707
							],
							[
								27749,
								27761
							],
							[
								27797,
								27809
							],
							[
								27846,
								27858
							],
							[
								27893,
								27905
							],
							[
								27948,
								27966
							],
							[
								28084,
								28102
							],
							[
								28145,
								28163
							],
							[
								28205,
								28222
							],
							[
								28232,
								28243
							],
							[
								28284,
								28296
							],
							[
								29306,
								29320
							],
							[
								29432,
								29446
							],
							[
								29488,
								29502
							],
							[
								29575,
								29589
							]
						],
						"symlist":
						[
							"js_umat_free_func",
							"JSUMatIteratorData",
							"js_umat_data",
							"js_umat_sizes",
							"js_umat_dimensions",
							"js_umat_data",
							"js_umat_print_data",
							"js_umat_dump",
							"js_umat_new",
							"js_umat_params",
							"js_umat_ctor",
							"js_umat_finalizer",
							"js_umat_funcs",
							"js_umat_init",
							"js_umat_get",
							"js_umat_get",
							"js_umat_get_wh",
							"js_umat_at",
							"js_umat_set",
							"mat_at<float>",
							"mat_at<uint8_t>",
							"mat_at<uint16_t>",
							"mat_at<uint>",
							"js_umat_vector_get",
							"js_umat_vector_get",
							"js_umat_vector_get",
							"js_umat_set_vector",
							"mat_at<T>",
							"js_umat_set_to",
							"js_umat_get_props",
							"js_umat_tostring",
							"js_umat_inspect",
							"js_umat_convert_to",
							"js_umat_copy_to",
							"js_umat_reshape",
							"js_umat_getmat",
							"js_umat_fill",
							"js_umat_class_create",
							"js_umat_buffer",
							"js_umat_array",
							"js_umat_call",
							"JS_CGETSET_MAGIC_DEF",
							"JS_CGETSET_MAGIC_DEF",
							"JS_CGETSET_MAGIC_DEF",
							"JS_CGETSET_MAGIC_DEF",
							"JS_CGETSET_MAGIC_DEF",
							"JS_CGETSET_MAGIC_DEF",
							"JS_CGETSET_MAGIC_DEF",
							"JS_CGETSET_MAGIC_DEF",
							"JS_CGETSET_MAGIC_DEF",
							"JS_CGETSET_MAGIC_DEF",
							"JS_CGETSET_MAGIC_DEF",
							"JS_CGETSET_MAGIC_DEF",
							"JS_CGETSET_MAGIC_DEF",
							"JS_CGETSET_DEF",
							"JS_CGETSET_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_DEF",
							"JS_CFUNC_DEF",
							"JS_CFUNC_DEF",
							"JS_CFUNC_DEF",
							"JS_CFUNC_DEF",
							"JS_CFUNC_DEF",
							"JS_CFUNC_DEF",
							"JS_CFUNC_DEF",
							"JS_CFUNC_DEF",
							"JS_ALIAS_DEF",
							"JS_PROP_STRING_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_PROP_INT32_DEF",
							"CV_MAKETYPE",
							"js_umat_init",
							"js_umat_export",
							"JS_INIT_MODULE",
							"JS_INIT_MODULE",
							"JS_INIT_MODULE"
						]
					},
					"AgAAAAAAAAAAAAAAAAAAAAAAAACUBwAASlNNYXRJdGVyYXRvckRhdGEKICBqc19tYXRfZnJlZV9mdW5jCiAganNfbWF0X3NpemVzCiAganNfbWF0X2RpbWVuc2lvbnMKICBqc19tYXRfdHJhY2sKICBqc19tYXRfbmV3CiAganNfbWF0X3dyYXAKICBqc19tYXRfZGF0YQogIGpzX21hdF9wcmludF9kYXRhCiAganNfbWF0X2R1bXAKICBqc19tYXRfcGFyYW1zCiAganNfbWF0X2N0b3IKICBqc19tYXRfZnVuY3MKICBqc19tYXRfZXhwcgogIGpzX21hdF9pbml0CiAganNfbWF0X2dldAogIGpzX21hdF9nZXQKICBqc19tYXRfZ2V0X3doCiAganNfbWF0X2F0CiAganNfbWF0X3NldAogIGpzX21hdF9zZXRfdG8KICBqc19tYXRfZ2V0X3Byb3BzCiAganNfbWF0X3Rvc3RyaW5nCiAganNfbWF0X2luc3BlY3QKICBqc19tYXRfZ2V0cm90YXRpb25tYXRyaXgyZAogIGpzX21hdF9jb252ZXJ0X3RvCiAganNfbWF0X2NvcHlfdG8KICBqc19tYXRfcmVzaGFwZQogIGpzX21hdF9nZXR1bWF0CiAganNfbWF0X2NsYXNzX2Z1bmMKICBqc19tYXRfZmlsbAogIGpzX21hdF9jbGFzc19jcmVhdGUKICBqc19tYXRfYnVmZmVyCiAganNfbWF0X2FycmF5CiAganNfbWF0X2NhbGwKICBqc19tYXRfZmluYWxpemVyCiAganNfbWF0X2l0ZXJhdG9yX25ldwogIGpzX21hdF9pdGVyYXRvcl9kdW1wCiAganNfbWF0X2l0ZXJhdG9yX25leHQKICBqc19tYXRfaXRlcmF0b3JfZmluYWxpemVyCiAganNfbWF0X2l0ZXJhdG9yX2R1cApKU19DR0VUU0VUX01BR0lDX0RFRgpKU19DR0VUU0VUX01BR0lDX0RFRgpKU19DR0VUU0VUX01BR0lDX0RFRgpKU19DR0VUU0VUX01BR0lDX0RFRgpKU19DR0VUU0VUX01BR0lDX0RFRgpKU19DR0VUU0VUX01BR0lDX0RFRgpKU19DR0VUU0VUX01BR0lDX0RFRgpKU19DR0VUU0VUX01BR0lDX0RFRgpKU19DR0VUU0VUX01BR0lDX0RFRgpKU19DR0VUU0VUX01BR0lDX0RFRgpKU19DR0VUU0VUX01BR0lDX0RFRgpKU19DR0VUU0VUX01BR0lDX0RFRgpKU19DR0VUU0VUX01BR0lDX0RFRgpKU19DR0VUU0VUX0RFRgpKU19DR0VUU0VUX0RFRgpKU19DRlVOQ19NQUdJQ19ERUYKSlNfQ0ZVTkNfTUFHSUNfREVGCkpTX0NGVU5DX01BR0lDX0RFRgpKU19DRlVOQ19NQUdJQ19ERUYKSlNfQ0ZVTkNfTUFHSUNfREVGCkpTX0NGVU5DX01BR0lDX0RFRgpKU19DRlVOQ19NQUdJQ19ERUYKSlNfQ0ZVTkNfTUFHSUNfREVGCkpTX0NGVU5DX01BR0lDX0RFRgpKU19DRlVOQ19NQUdJQ19ERUYKSlNfQ0ZVTkNfTUFHSUNfREVGCkpTX0NGVU5DX01BR0lDX0RFRgpKU19DRlVOQ19NQUdJQ19ERUYKSlNfQ0ZVTkNfTUFHSUNfREVGCkpTX0NGVU5DX01BR0lDX0RFRgpKU19DRlVOQ19NQUdJQ19ERUYKSlNfQ0ZVTkNfTUFHSUNfREVGCkpTX0NGVU5DX01BR0lDX0RFRgpKU19DRlVOQ19NQUdJQ19ERUYKSlNfQ0ZVTkNfTUFHSUNfREVGCkpTX0NGVU5DX0RFRgpKU19DRlVOQ19ERUYKSlNfQ0ZVTkNfREVGCkpTX0NGVU5DX0RFRgpKU19DRlVOQ19ERUYKSlNfQ0ZVTkNfREVGCkpTX0NGVU5DX0RFRgpKU19DRlVOQ19ERUYKSlNfQ0ZVTkNfTUFHSUNfREVGCkpTX0NGVU5DX01BR0lDX0RFRgpKU19DRlVOQ19NQUdJQ19ERUYKSlNfQUxJQVNfREVGCkpTX0FMSUFTX0RFRgpKU19QUk9QX1NUUklOR19ERUYKSlNfSVRFUkFUT1JfTkVYVF9ERUYKSlNfUFJPUF9TVFJJTkdfREVGCkpTX0NGVU5DX0RFRgpKU19DRlVOQ19ERUYKSlNfQ0ZVTkNfTUFHSUNfREVGCkpTX0NGVU5DX01BR0lDX0RFRgpKU19DRlVOQ19NQUdJQ19ERUYKSlNfQ0ZVTkNfTUFHSUNfREVGCkpTX0NGVU5DX01BR0lDX0RFRgpKU19DRlVOQ19NQUdJQ19ERUYKSlNfQ0ZVTkNfTUFHSUNfREVGCkpTX0NGVU5DX01BR0lDX0RFRgpKU19DRlVOQ19NQUdJQ19ERUYKSlNfUFJPUF9JTlQzMl9ERUYKQ1ZfTUFLRVRZUEUKICBqc19tYXRfaW5pdAogIGpzX21hdF9leHBvcnQKSlNfSU5JVF9NT0RVTEUKSlNfSU5JVF9NT0RVTEUKSlNfSU5JVF9NT0RVTEUAAAAAAAAAACMGAAAAAAAAAAAAAA",
					"AQAAAAAAAAAAAAAA"
				],
				[
					743,
					2,
					"outline_refresh",
					{
						"path": "/home/roman/Projects/qjs-opencv/js_umat.cpp",
						"symkeys":
						[
							[
								978,
								995
							],
							[
								1105,
								1123
							],
							[
								1223,
								1235
							],
							[
								1384,
								1397
							],
							[
								1719,
								1737
							],
							[
								2133,
								2145
							],
							[
								2574,
								2592
							],
							[
								3097,
								3109
							],
							[
								4122,
								4133
							],
							[
								4764,
								4778
							],
							[
								5280,
								5292
							],
							[
								5496,
								5513
							],
							[
								5738,
								5751
							],
							[
								7573,
								7585
							],
							[
								8457,
								8468
							],
							[
								8684,
								8695
							],
							[
								10070,
								10084
							],
							[
								10299,
								10309
							],
							[
								11105,
								11116
							],
							[
								11824,
								11837
							],
							[
								12080,
								12095
							],
							[
								12194,
								12210
							],
							[
								12307,
								12319
							],
							[
								12515,
								12533
							],
							[
								12995,
								13013
							],
							[
								13489,
								13507
							],
							[
								14188,
								14206
							],
							[
								14545,
								14554
							],
							[
								14632,
								14646
							],
							[
								15222,
								15239
							],
							[
								16246,
								16262
							],
							[
								17946,
								17961
							],
							[
								19318,
								19336
							],
							[
								19864,
								19879
							],
							[
								20404,
								20419
							],
							[
								21436,
								21450
							],
							[
								21889,
								21901
							],
							[
								22462,
								22482
							],
							[
								23382,
								23396
							],
							[
								23854,
								23867
							],
							[
								24813,
								24825
							],
							[
								25507,
								25527
							],
							[
								25577,
								25597
							],
							[
								25647,
								25667
							],
							[
								25725,
								25745
							],
							[
								25795,
								25815
							],
							[
								25867,
								25887
							],
							[
								25939,
								25959
							],
							[
								26011,
								26031
							],
							[
								26081,
								26101
							],
							[
								26163,
								26183
							],
							[
								26243,
								26263
							],
							[
								26313,
								26333
							],
							[
								26391,
								26411
							],
							[
								26471,
								26485
							],
							[
								26523,
								26537
							],
							[
								26573,
								26591
							],
							[
								26634,
								26652
							],
							[
								26695,
								26713
							],
							[
								26767,
								26785
							],
							[
								26839,
								26857
							],
							[
								26904,
								26922
							],
							[
								26965,
								26983
							],
							[
								27034,
								27052
							],
							[
								27095,
								27113
							],
							[
								27160,
								27178
							],
							[
								27225,
								27243
							],
							[
								27290,
								27308
							],
							[
								27365,
								27383
							],
							[
								27417,
								27435
							],
							[
								27469,
								27481
							],
							[
								27520,
								27532
							],
							[
								27569,
								27581
							],
							[
								27608,
								27620
							],
							[
								27649,
								27661
							],
							[
								27695,
								27707
							],
							[
								27749,
								27761
							],
							[
								27797,
								27809
							],
							[
								27846,
								27858
							],
							[
								27893,
								27905
							],
							[
								27948,
								27966
							],
							[
								28084,
								28102
							],
							[
								28145,
								28163
							],
							[
								28205,
								28222
							],
							[
								28232,
								28243
							],
							[
								28284,
								28296
							],
							[
								29306,
								29320
							],
							[
								29432,
								29446
							],
							[
								29484,
								29498
							],
							[
								29553,
								29567
							]
						],
						"symlist":
						[
							"js_umat_free_func",
							"JSUMatIteratorData",
							"js_umat_data",
							"js_umat_sizes",
							"js_umat_dimensions",
							"js_umat_data",
							"js_umat_print_data",
							"js_umat_dump",
							"js_umat_new",
							"js_umat_params",
							"js_umat_ctor",
							"js_umat_finalizer",
							"js_umat_funcs",
							"js_umat_init",
							"js_umat_get",
							"js_umat_get",
							"js_umat_get_wh",
							"js_umat_at",
							"js_umat_set",
							"mat_at<float>",
							"mat_at<uint8_t>",
							"mat_at<uint16_t>",
							"mat_at<uint>",
							"js_umat_vector_get",
							"js_umat_vector_get",
							"js_umat_vector_get",
							"js_umat_set_vector",
							"mat_at<T>",
							"js_umat_set_to",
							"js_umat_get_props",
							"js_umat_tostring",
							"js_umat_inspect",
							"js_umat_convert_to",
							"js_umat_copy_to",
							"js_umat_reshape",
							"js_umat_getmat",
							"js_umat_fill",
							"js_umat_class_create",
							"js_umat_buffer",
							"js_umat_array",
							"js_umat_call",
							"JS_CGETSET_MAGIC_DEF",
							"JS_CGETSET_MAGIC_DEF",
							"JS_CGETSET_MAGIC_DEF",
							"JS_CGETSET_MAGIC_DEF",
							"JS_CGETSET_MAGIC_DEF",
							"JS_CGETSET_MAGIC_DEF",
							"JS_CGETSET_MAGIC_DEF",
							"JS_CGETSET_MAGIC_DEF",
							"JS_CGETSET_MAGIC_DEF",
							"JS_CGETSET_MAGIC_DEF",
							"JS_CGETSET_MAGIC_DEF",
							"JS_CGETSET_MAGIC_DEF",
							"JS_CGETSET_MAGIC_DEF",
							"JS_CGETSET_DEF",
							"JS_CGETSET_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_DEF",
							"JS_CFUNC_DEF",
							"JS_CFUNC_DEF",
							"JS_CFUNC_DEF",
							"JS_CFUNC_DEF",
							"JS_CFUNC_DEF",
							"JS_CFUNC_DEF",
							"JS_CFUNC_DEF",
							"JS_CFUNC_DEF",
							"JS_ALIAS_DEF",
							"JS_PROP_STRING_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_PROP_INT32_DEF",
							"CV_MAKETYPE",
							"js_umat_init",
							"js_umat_export",
							"JS_INIT_MODULE",
							"JS_INIT_MODULE",
							"JS_INIT_MODULE"
						]
					},
					"BAAAAAAAAAAAAAAAAAAAAAAAAAAjBgAAICBqc191bWF0X2ZyZWVfZnVuYwpKU1VNYXRJdGVyYXRvckRhdGEKICBqc191bWF0X2RhdGEKICBqc191bWF0X3NpemVzCiAganNfdW1hdF9kaW1lbnNpb25zCiAganNfdW1hdF9kYXRhCiAganNfdW1hdF9wcmludF9kYXRhCiAganNfdW1hdF9kdW1wCiAganNfdW1hdF9uZXcKICBqc191bWF0X3BhcmFtcwogIGpzX3VtYXRfY3RvcgogIGpzX3VtYXRfZmluYWxpemVyCiAganNfdW1hdF9mdW5jcwogIGpzX3VtYXRfaW5pdAogIGpzX3VtYXRfZ2V0CiAganNfdW1hdF9nZXQKICBqc191bWF0X2dldF93aAogIGpzX3VtYXRfYXQKICBqc191bWF0X3NldAogIG1hdF9hdDxmbG9hdD4KICBtYXRfYXQ8dWludDhfdD4KICBtYXRfYXQ8dWludDE2X3Q+CiAgbWF0X2F0PHVpbnQ+CiAganNfdW1hdF92ZWN0b3JfZ2V0CiAganNfdW1hdF92ZWN0b3JfZ2V0CiAganNfdW1hdF92ZWN0b3JfZ2V0CiAganNfdW1hdF9zZXRfdmVjdG9yCiAgbWF0X2F0PFQ+CiAganNfdW1hdF9zZXRfdG8KICBqc191bWF0X2dldF9wcm9wcwogIGpzX3VtYXRfdG9zdHJpbmcKICBqc191bWF0X2luc3BlY3QKICBqc191bWF0X2NvbnZlcnRfdG8KICBqc191bWF0X2NvcHlfdG8KICBqc191bWF0X3Jlc2hhcGUKICBqc191bWF0X2dldG1hdAogIGpzX3VtYXRfZmlsbAogIGpzX3VtYXRfY2xhc3NfY3JlYXRlCiAganNfdW1hdF9idWZmZXIKICBqc191bWF0X2FycmF5CiAganNfdW1hdF9jYWxsCkpTX0NHRVRTRVRfTUFHSUNfREVGCkpTX0NHRVRTRVRfTUFHSUNfREVGCkpTX0NHRVRTRVRfTUFHSUNfREVGCkpTX0NHRVRTRVRfTUFHSUNfREVGCkpTX0NHRVRTRVRfTUFHSUNfREVGCkpTX0NHRVRTRVRfTUFHSUNfREVGCkpTX0NHRVRTRVRfTUFHSUNfREVGCkpTX0NHRVRTRVRfTUFHSUNfREVGCkpTX0NHRVRTRVRfTUFHSUNfREVGCkpTX0NHRVRTRVRfTUFHSUNfREVGCkpTX0NHRVRTRVRfTUFHSUNfREVGCkpTX0NHRVRTRVRfTUFHSUNfREVGCkpTX0NHRVRTRVRfTUFHSUNfREVGCkpTX0NHRVRTRVRfREVGCkpTX0NHRVRTRVRfREVGCkpTX0NGVU5DX01BR0lDX0RFRgpKU19DRlVOQ19NQUdJQ19ERUYKSlNfQ0ZVTkNfTUFHSUNfREVGCkpTX0NGVU5DX01BR0lDX0RFRgpKU19DRlVOQ19NQUdJQ19ERUYKSlNfQ0ZVTkNfTUFHSUNfREVGCkpTX0NGVU5DX01BR0lDX0RFRgpKU19DRlVOQ19NQUdJQ19ERUYKSlNfQ0ZVTkNfTUFHSUNfREVGCkpTX0NGVU5DX01BR0lDX0RFRgpKU19DRlVOQ19NQUdJQ19ERUYKSlNfQ0ZVTkNfTUFHSUNfREVGCkpTX0NGVU5DX01BR0lDX0RFRgpKU19DRlVOQ19NQUdJQ19ERUYKSlNfQ0ZVTkNfREVGCkpTX0NGVU5DX0RFRgpKU19DRlVOQ19ERUYKSlNfQ0ZVTkNfREVGCkpTX0NGVU5DX0RFRgpKU19DRlVOQ19ERUYKSlNfQ0ZVTkNfREVGCkpTX0NGVU5DX0RFRgpKU19DRlVOQ19ERUYKSlNfQUxJQVNfREVGCkpTX1BST1BfU1RSSU5HX0RFRgpKU19DRlVOQ19NQUdJQ19ERUYKSlNfQ0ZVTkNfTUFHSUNfREVGCkpTX1BST1BfSU5UMzJfREVGCkNWX01BS0VUWVBFCiAganNfdW1hdF9pbml0CiAganNfdW1hdF9leHBvcnQKSlNfSU5JVF9NT0RVTEUKSlNfSU5JVF9NT0RVTEUKSlNfSU5JVF9NT0RVTEUAAAAAAAAAACMGAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAjBgAAICBqc191bWF0X2ZyZWVfZnVuYwpKU1VNYXRJdGVyYXRvckRhdGEKICBqc191bWF0X2RhdGEKICBqc191bWF0X3NpemVzCiAganNfdW1hdF9kaW1lbnNpb25zCiAganNfdW1hdF9kYXRhCiAganNfdW1hdF9wcmludF9kYXRhCiAganNfdW1hdF9kdW1wCiAganNfdW1hdF9uZXcKICBqc191bWF0X3BhcmFtcwogIGpzX3VtYXRfY3RvcgogIGpzX3VtYXRfZmluYWxpemVyCiAganNfdW1hdF9mdW5jcwogIGpzX3VtYXRfaW5pdAogIGpzX3VtYXRfZ2V0CiAganNfdW1hdF9nZXQKICBqc191bWF0X2dldF93aAogIGpzX3VtYXRfYXQKICBqc191bWF0X3NldAogIG1hdF9hdDxmbG9hdD4KICBtYXRfYXQ8dWludDhfdD4KICBtYXRfYXQ8dWludDE2X3Q+CiAgbWF0X2F0PHVpbnQ+CiAganNfdW1hdF92ZWN0b3JfZ2V0CiAganNfdW1hdF92ZWN0b3JfZ2V0CiAganNfdW1hdF92ZWN0b3JfZ2V0CiAganNfdW1hdF9zZXRfdmVjdG9yCiAgbWF0X2F0PFQ+CiAganNfdW1hdF9zZXRfdG8KICBqc191bWF0X2dldF9wcm9wcwogIGpzX3VtYXRfdG9zdHJpbmcKICBqc191bWF0X2luc3BlY3QKICBqc191bWF0X2NvbnZlcnRfdG8KICBqc191bWF0X2NvcHlfdG8KICBqc191bWF0X3Jlc2hhcGUKICBqc191bWF0X2dldG1hdAogIGpzX3VtYXRfZmlsbAogIGpzX3VtYXRfY2xhc3NfY3JlYXRlCiAganNfdW1hdF9idWZmZXIKICBqc191bWF0X2FycmF5CiAganNfdW1hdF9jYWxsCkpTX0NHRVRTRVRfTUFHSUNfREVGCkpTX0NHRVRTRVRfTUFHSUNfREVGCkpTX0NHRVRTRVRfTUFHSUNfREVGCkpTX0NHRVRTRVRfTUFHSUNfREVGCkpTX0NHRVRTRVRfTUFHSUNfREVGCkpTX0NHRVRTRVRfTUFHSUNfREVGCkpTX0NHRVRTRVRfTUFHSUNfREVGCkpTX0NHRVRTRVRfTUFHSUNfREVGCkpTX0NHRVRTRVRfTUFHSUNfREVGCkpTX0NHRVRTRVRfTUFHSUNfREVGCkpTX0NHRVRTRVRfTUFHSUNfREVGCkpTX0NHRVRTRVRfTUFHSUNfREVGCkpTX0NHRVRTRVRfTUFHSUNfREVGCkpTX0NHRVRTRVRfREVGCkpTX0NHRVRTRVRfREVGCkpTX0NGVU5DX01BR0lDX0RFRgpKU19DRlVOQ19NQUdJQ19ERUYKSlNfQ0ZVTkNfTUFHSUNfREVGCkpTX0NGVU5DX01BR0lDX0RFRgpKU19DRlVOQ19NQUdJQ19ERUYKSlNfQ0ZVTkNfTUFHSUNfREVGCkpTX0NGVU5DX01BR0lDX0RFRgpKU19DRlVOQ19NQUdJQ19ERUYKSlNfQ0ZVTkNfTUFHSUNfREVGCkpTX0NGVU5DX01BR0lDX0RFRgpKU19DRlVOQ19NQUdJQ19ERUYKSlNfQ0ZVTkNfTUFHSUNfREVGCkpTX0NGVU5DX01BR0lDX0RFRgpKU19DRlVOQ19NQUdJQ19ERUYKSlNfQ0ZVTkNfREVGCkpTX0NGVU5DX0RFRgpKU19DRlVOQ19ERUYKSlNfQ0ZVTkNfREVGCkpTX0NGVU5DX0RFRgpKU19DRlVOQ19ERUYKSlNfQ0ZVTkNfREVGCkpTX0NGVU5DX0RFRgpKU19DRlVOQ19ERUYKSlNfQUxJQVNfREVGCkpTX1BST1BfU1RSSU5HX0RFRgpKU19DRlVOQ19NQUdJQ19ERUYKSlNfQ0ZVTkNfTUFHSUNfREVGCkpTX1BST1BfSU5UMzJfREVGCkNWX01BS0VUWVBFCiAganNfdW1hdF9pbml0CiAganNfdW1hdF9leHBvcnQKSlNfSU5JVF9NT0RVTEUKSlNfSU5JVF9NT0RVTEUKSlNfSU5JVF9NT0RVTEUAAAAAAAAAACMGAAAAAAAAAAAAAA",
					"AQAAAAAAAAAAAAAA"
				],
				[
					744,
					1,
					"outline_refresh",
					{
						"path": "/home/roman/Projects/qjs-opencv/js_size.cpp",
						"symkeys":
						[
							[
								386,
								397
							],
							[
								798,
								809
							],
							[
								1321,
								1333
							],
							[
								2341,
								2353
							],
							[
								2494,
								2505
							],
							[
								3008,
								3019
							],
							[
								3411,
								3423
							],
							[
								3538,
								3549
							],
							[
								3881,
								3898
							],
							[
								4341,
								4358
							],
							[
								4743,
								4758
							],
							[
								5168,
								5181
							],
							[
								6883,
								6894
							],
							[
								7463,
								7474
							],
							[
								8043,
								8054
							],
							[
								8359,
								8370
							],
							[
								9297,
								9320
							],
							[
								9714,
								9726
							],
							[
								10249,
								10271
							],
							[
								10403,
								10420
							],
							[
								10800,
								10825
							],
							[
								10917,
								10942
							],
							[
								11035,
								11060
							],
							[
								11143,
								11168
							],
							[
								11250,
								11275
							],
							[
								11356,
								11374
							],
							[
								11459,
								11477
							],
							[
								11561,
								11579
							],
							[
								11666,
								11684
							],
							[
								11770,
								11788
							],
							[
								11875,
								11893
							],
							[
								11981,
								11999
							],
							[
								12087,
								12105
							],
							[
								12194,
								12206
							],
							[
								12294,
								12306
							],
							[
								12394,
								12406
							],
							[
								12483,
								12495
							],
							[
								12572,
								12584
							],
							[
								12661,
								12673
							],
							[
								12750,
								12762
							],
							[
								12837,
								12849
							],
							[
								12952,
								12970
							],
							[
								13081,
								13093
							],
							[
								13126,
								13138
							],
							[
								14086,
								14100
							],
							[
								14181,
								14200
							],
							[
								14414,
								14428
							],
							[
								14470,
								14484
							],
							[
								14549,
								14563
							]
						],
						"symlist":
						[
							"js_size_fit",
							"js_size_fit",
							"js_size_ctor",
							"js_size_data",
							"js_size_get",
							"js_size_new",
							"js_size_wrap",
							"js_size_set",
							"js_size_to_string",
							"js_size_to_source",
							"js_size_inspect",
							"js_size_funcs",
							"js_size_add",
							"js_size_sub",
							"js_size_mul",
							"js_size_div",
							"js_size_symbol_iterator",
							"js_size_from",
							"js_array_to<double, 2>",
							"js_size_finalizer",
							"JS_CGETSET_ENUMERABLE_DEF",
							"JS_CGETSET_ENUMERABLE_DEF",
							"JS_CGETSET_ENUMERABLE_DEF",
							"JS_CGETSET_ENUMERABLE_DEF",
							"JS_CGETSET_ENUMERABLE_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_DEF",
							"JS_CFUNC_DEF",
							"JS_CFUNC_DEF",
							"JS_CFUNC_DEF",
							"JS_CFUNC_DEF",
							"JS_CFUNC_DEF",
							"JS_ALIAS_DEF",
							"JS_CFUNC_DEF",
							"JS_PROP_STRING_DEF",
							"JS_CFUNC_DEF",
							"js_size_init",
							"js_size_export",
							"js_size_constructor",
							"JS_INIT_MODULE",
							"JS_INIT_MODULE",
							"JS_INIT_MODULE"
						]
					},
					"AgAAAAAAAAAAAAAAAAAAAAAAAAAjBgAAICBqc191bWF0X2ZyZWVfZnVuYwpKU1VNYXRJdGVyYXRvckRhdGEKICBqc191bWF0X2RhdGEKICBqc191bWF0X3NpemVzCiAganNfdW1hdF9kaW1lbnNpb25zCiAganNfdW1hdF9kYXRhCiAganNfdW1hdF9wcmludF9kYXRhCiAganNfdW1hdF9kdW1wCiAganNfdW1hdF9uZXcKICBqc191bWF0X3BhcmFtcwogIGpzX3VtYXRfY3RvcgogIGpzX3VtYXRfZmluYWxpemVyCiAganNfdW1hdF9mdW5jcwogIGpzX3VtYXRfaW5pdAogIGpzX3VtYXRfZ2V0CiAganNfdW1hdF9nZXQKICBqc191bWF0X2dldF93aAogIGpzX3VtYXRfYXQKICBqc191bWF0X3NldAogIG1hdF9hdDxmbG9hdD4KICBtYXRfYXQ8dWludDhfdD4KICBtYXRfYXQ8dWludDE2X3Q+CiAgbWF0X2F0PHVpbnQ+CiAganNfdW1hdF92ZWN0b3JfZ2V0CiAganNfdW1hdF92ZWN0b3JfZ2V0CiAganNfdW1hdF92ZWN0b3JfZ2V0CiAganNfdW1hdF9zZXRfdmVjdG9yCiAgbWF0X2F0PFQ+CiAganNfdW1hdF9zZXRfdG8KICBqc191bWF0X2dldF9wcm9wcwogIGpzX3VtYXRfdG9zdHJpbmcKICBqc191bWF0X2luc3BlY3QKICBqc191bWF0X2NvbnZlcnRfdG8KICBqc191bWF0X2NvcHlfdG8KICBqc191bWF0X3Jlc2hhcGUKICBqc191bWF0X2dldG1hdAogIGpzX3VtYXRfZmlsbAogIGpzX3VtYXRfY2xhc3NfY3JlYXRlCiAganNfdW1hdF9idWZmZXIKICBqc191bWF0X2FycmF5CiAganNfdW1hdF9jYWxsCkpTX0NHRVRTRVRfTUFHSUNfREVGCkpTX0NHRVRTRVRfTUFHSUNfREVGCkpTX0NHRVRTRVRfTUFHSUNfREVGCkpTX0NHRVRTRVRfTUFHSUNfREVGCkpTX0NHRVRTRVRfTUFHSUNfREVGCkpTX0NHRVRTRVRfTUFHSUNfREVGCkpTX0NHRVRTRVRfTUFHSUNfREVGCkpTX0NHRVRTRVRfTUFHSUNfREVGCkpTX0NHRVRTRVRfTUFHSUNfREVGCkpTX0NHRVRTRVRfTUFHSUNfREVGCkpTX0NHRVRTRVRfTUFHSUNfREVGCkpTX0NHRVRTRVRfTUFHSUNfREVGCkpTX0NHRVRTRVRfTUFHSUNfREVGCkpTX0NHRVRTRVRfREVGCkpTX0NHRVRTRVRfREVGCkpTX0NGVU5DX01BR0lDX0RFRgpKU19DRlVOQ19NQUdJQ19ERUYKSlNfQ0ZVTkNfTUFHSUNfREVGCkpTX0NGVU5DX01BR0lDX0RFRgpKU19DRlVOQ19NQUdJQ19ERUYKSlNfQ0ZVTkNfTUFHSUNfREVGCkpTX0NGVU5DX01BR0lDX0RFRgpKU19DRlVOQ19NQUdJQ19ERUYKSlNfQ0ZVTkNfTUFHSUNfREVGCkpTX0NGVU5DX01BR0lDX0RFRgpKU19DRlVOQ19NQUdJQ19ERUYKSlNfQ0ZVTkNfTUFHSUNfREVGCkpTX0NGVU5DX01BR0lDX0RFRgpKU19DRlVOQ19NQUdJQ19ERUYKSlNfQ0ZVTkNfREVGCkpTX0NGVU5DX0RFRgpKU19DRlVOQ19ERUYKSlNfQ0ZVTkNfREVGCkpTX0NGVU5DX0RFRgpKU19DRlVOQ19ERUYKSlNfQ0ZVTkNfREVGCkpTX0NGVU5DX0RFRgpKU19DRlVOQ19ERUYKSlNfQUxJQVNfREVGCkpTX1BST1BfU1RSSU5HX0RFRgpKU19DRlVOQ19NQUdJQ19ERUYKSlNfQ0ZVTkNfTUFHSUNfREVGCkpTX1BST1BfSU5UMzJfREVGCkNWX01BS0VUWVBFCiAganNfdW1hdF9pbml0CiAganNfdW1hdF9leHBvcnQKSlNfSU5JVF9NT0RVTEUKSlNfSU5JVF9NT0RVTEUKSlNfSU5JVF9NT0RVTEUAAAAAAAAAAE8DAAAAAAAAAAAAAA",
					"AQAAAAAAAAAAAAAA"
				],
				[
					745,
					1,
					"outline_refresh",
					{
						"path": "/home/roman/Projects/qjs-opencv/js_line.cpp",
						"symkeys":
						[
							[
								488,
								499
							],
							[
								923,
								935
							],
							[
								2135,
								2147
							],
							[
								2288,
								2304
							],
							[
								2826,
								2840
							],
							[
								3257,
								3268
							],
							[
								4128,
								4139
							],
							[
								4743,
								4759
							],
							[
								5257,
								5271
							],
							[
								5741,
								5755
							],
							[
								6034,
								6049
							],
							[
								6634,
								6649
							],
							[
								8489,
								8504
							],
							[
								8778,
								8792
							],
							[
								9045,
								9062
							],
							[
								9076,
								9093
							],
							[
								9108,
								9128
							],
							[
								9142,
								9159
							],
							[
								9181,
								9197
							],
							[
								9886,
								9898
							],
							[
								10605,
								10622
							],
							[
								11016,
								11041
							],
							[
								11092,
								11117
							],
							[
								11168,
								11193
							],
							[
								11244,
								11269
							],
							[
								11320,
								11340
							],
							[
								11386,
								11406
							],
							[
								11452,
								11472
							],
							[
								11518,
								11538
							],
							[
								11584,
								11604
							],
							[
								11647,
								11667
							],
							[
								11710,
								11730
							],
							[
								11775,
								11795
							],
							[
								11848,
								11868
							],
							[
								11915,
								11933
							],
							[
								11980,
								11998
							],
							[
								12041,
								12059
							],
							[
								12116,
								12134
							],
							[
								12208,
								12226
							],
							[
								12281,
								12293
							],
							[
								12330,
								12348
							],
							[
								12406,
								12424
							],
							[
								12502,
								12520
							],
							[
								12599,
								12611
							],
							[
								12635,
								12647
							],
							[
								12666,
								12678
							],
							[
								12715,
								12733
							],
							[
								12846,
								12858
							],
							[
								12891,
								12903
							],
							[
								13767,
								13781
							],
							[
								13862,
								13881
							],
							[
								14095,
								14109
							],
							[
								14147,
								14161
							],
							[
								14203,
								14217
							]
						],
						"symlist":
						[
							"js_line_new",
							"js_line_ctor",
							"js_line_data",
							"js_line_get_xy12",
							"js_line_get_ab",
							"js_line_get",
							"js_line_set",
							"js_line_set_xy12",
							"js_line_set_ab",
							"js_line_points",
							"js_line_inspect",
							"js_line_methods",
							"js_line_toarray",
							"js_call_method",
							"JS_LINE_AS_POINTS",
							"JS_LINE_AS_VECTOR",
							"JS_LINE_GET_ITERATOR",
							"JS_LINE_TO_STRING",
							"js_line_iterator",
							"js_line_from",
							"js_line_finalizer",
							"JS_CGETSET_ENUMERABLE_DEF",
							"JS_CGETSET_ENUMERABLE_DEF",
							"JS_CGETSET_ENUMERABLE_DEF",
							"JS_CGETSET_ENUMERABLE_DEF",
							"JS_CGETSET_MAGIC_DEF",
							"JS_CGETSET_MAGIC_DEF",
							"JS_CGETSET_MAGIC_DEF",
							"JS_CGETSET_MAGIC_DEF",
							"JS_CGETSET_MAGIC_DEF",
							"JS_CGETSET_MAGIC_DEF",
							"JS_CGETSET_MAGIC_DEF",
							"JS_CGETSET_MAGIC_DEF",
							"JS_CGETSET_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_ALIAS_DEF",
							"JS_ALIAS_DEF",
							"JS_ALIAS_DEF",
							"JS_PROP_STRING_DEF",
							"JS_CFUNC_DEF",
							"js_line_init",
							"js_line_export",
							"js_line_constructor",
							"JS_INIT_MODULE",
							"JS_INIT_MODULE",
							"JS_INIT_MODULE"
						]
					},
					"AgAAAAAAAAAAAAAAAAAAAAAAAABPAwAAICBqc19zaXplX2ZpdAogIGpzX3NpemVfZml0CiAganNfc2l6ZV9jdG9yCiAganNfc2l6ZV9kYXRhCiAganNfc2l6ZV9nZXQKICBqc19zaXplX25ldwogIGpzX3NpemVfd3JhcAogIGpzX3NpemVfc2V0CiAganNfc2l6ZV90b19zdHJpbmcKICBqc19zaXplX3RvX3NvdXJjZQogIGpzX3NpemVfaW5zcGVjdAogIGpzX3NpemVfZnVuY3MKICBqc19zaXplX2FkZAogIGpzX3NpemVfc3ViCiAganNfc2l6ZV9tdWwKICBqc19zaXplX2RpdgogIGpzX3NpemVfc3ltYm9sX2l0ZXJhdG9yCiAganNfc2l6ZV9mcm9tCiAganNfYXJyYXlfdG88ZG91YmxlLCAyPgogIGpzX3NpemVfZmluYWxpemVyCkpTX0NHRVRTRVRfRU5VTUVSQUJMRV9ERUYKSlNfQ0dFVFNFVF9FTlVNRVJBQkxFX0RFRgpKU19DR0VUU0VUX0VOVU1FUkFCTEVfREVGCkpTX0NHRVRTRVRfRU5VTUVSQUJMRV9ERUYKSlNfQ0dFVFNFVF9FTlVNRVJBQkxFX0RFRgpKU19DRlVOQ19NQUdJQ19ERUYKSlNfQ0ZVTkNfTUFHSUNfREVGCkpTX0NGVU5DX01BR0lDX0RFRgpKU19DRlVOQ19NQUdJQ19ERUYKSlNfQ0ZVTkNfTUFHSUNfREVGCkpTX0NGVU5DX01BR0lDX0RFRgpKU19DRlVOQ19NQUdJQ19ERUYKSlNfQ0ZVTkNfTUFHSUNfREVGCkpTX0NGVU5DX0RFRgpKU19DRlVOQ19ERUYKSlNfQ0ZVTkNfREVGCkpTX0NGVU5DX0RFRgpKU19DRlVOQ19ERUYKSlNfQ0ZVTkNfREVGCkpTX0FMSUFTX0RFRgpKU19DRlVOQ19ERUYKSlNfUFJPUF9TVFJJTkdfREVGCkpTX0NGVU5DX0RFRgogIGpzX3NpemVfaW5pdAogIGpzX3NpemVfZXhwb3J0CiAganNfc2l6ZV9jb25zdHJ1Y3RvcgpKU19JTklUX01PRFVMRQpKU19JTklUX01PRFVMRQpKU19JTklUX01PRFVMRQAAAAAAAAAA3AMAAAAAAAAAAAAA",
					"AQAAAAAAAAAAAAAA"
				],
				[
					746,
					1,
					"outline_refresh",
					{
						"path": "/home/roman/Projects/qjs-opencv/js_draw.cpp",
						"symkeys":
						[
							[
								297,
								309
							],
							[
								470,
								484
							],
							[
								1780,
								1795
							],
							[
								3143,
								3159
							],
							[
								4019,
								4037
							],
							[
								4747,
								4759
							],
							[
								5854,
								5869
							],
							[
								7106,
								7118
							],
							[
								8372,
								8383
							],
							[
								10069,
								10085
							],
							[
								11603,
								11632
							],
							[
								12047,
								12059
							],
							[
								12638,
								12656
							],
							[
								12774,
								12786
							],
							[
								12822,
								12834
							],
							[
								12872,
								12884
							],
							[
								12924,
								12936
							],
							[
								12968,
								12980
							],
							[
								13018,
								13030
							],
							[
								13062,
								13074
							],
							[
								13105,
								13117
							],
							[
								13157,
								13169
							],
							[
								13233,
								13245
							],
							[
								13339,
								13351
							],
							[
								13391,
								13403
							],
							[
								13445,
								13457
							],
							[
								13493,
								13505
							],
							[
								13547,
								13559
							],
							[
								13595,
								13607
							],
							[
								13641,
								13653
							],
							[
								13696,
								13708
							],
							[
								13775,
								13787
							],
							[
								13838,
								13850
							],
							[
								14373,
								14385
							],
							[
								15372,
								15386
							],
							[
								15585,
								15599
							],
							[
								15637,
								15651
							],
							[
								15693,
								15707
							],
							[
								15894,
								15913
							]
						],
						"symlist":
						[
							"js_draw_init",
							"js_draw_circle",
							"js_draw_contour",
							"js_draw_contours",
							"js_point_read<int>",
							"js_draw_line",
							"js_draw_polygon",
							"js_draw_rect",
							"js_put_text",
							"js_get_text_size",
							"js_get_font_scale_from_height",
							"js_load_font",
							"JS_PROP_STRING_DEF",
							"JS_CFUNC_DEF",
							"JS_CFUNC_DEF",
							"JS_CFUNC_DEF",
							"JS_CFUNC_DEF",
							"JS_CFUNC_DEF",
							"JS_CFUNC_DEF",
							"JS_CFUNC_DEF",
							"JS_CFUNC_DEF",
							"JS_CFUNC_DEF",
							"JS_CFUNC_DEF",
							"JS_CFUNC_DEF",
							"JS_CFUNC_DEF",
							"JS_CFUNC_DEF",
							"JS_CFUNC_DEF",
							"JS_CFUNC_DEF",
							"JS_CFUNC_DEF",
							"JS_CFUNC_DEF",
							"JS_CFUNC_DEF",
							"JS_CFUNC_DEF",
							"js_draw_ctor",
							"js_draw_init",
							"js_draw_export",
							"JS_INIT_MODULE",
							"JS_INIT_MODULE",
							"JS_INIT_MODULE",
							"js_draw_constructor"
						]
					},
					"AgAAAAAAAAAAAAAAAAAAAAAAAADcAwAAICBqc19saW5lX25ldwogIGpzX2xpbmVfY3RvcgogIGpzX2xpbmVfZGF0YQogIGpzX2xpbmVfZ2V0X3h5MTIKICBqc19saW5lX2dldF9hYgogIGpzX2xpbmVfZ2V0CiAganNfbGluZV9zZXQKICBqc19saW5lX3NldF94eTEyCiAganNfbGluZV9zZXRfYWIKICBqc19saW5lX3BvaW50cwogIGpzX2xpbmVfaW5zcGVjdAogIGpzX2xpbmVfbWV0aG9kcwogIGpzX2xpbmVfdG9hcnJheQogIGpzX2NhbGxfbWV0aG9kCkpTX0xJTkVfQVNfUE9JTlRTCkpTX0xJTkVfQVNfVkVDVE9SCkpTX0xJTkVfR0VUX0lURVJBVE9SCkpTX0xJTkVfVE9fU1RSSU5HCiAganNfbGluZV9pdGVyYXRvcgogIGpzX2xpbmVfZnJvbQogIGpzX2xpbmVfZmluYWxpemVyCkpTX0NHRVRTRVRfRU5VTUVSQUJMRV9ERUYKSlNfQ0dFVFNFVF9FTlVNRVJBQkxFX0RFRgpKU19DR0VUU0VUX0VOVU1FUkFCTEVfREVGCkpTX0NHRVRTRVRfRU5VTUVSQUJMRV9ERUYKSlNfQ0dFVFNFVF9NQUdJQ19ERUYKSlNfQ0dFVFNFVF9NQUdJQ19ERUYKSlNfQ0dFVFNFVF9NQUdJQ19ERUYKSlNfQ0dFVFNFVF9NQUdJQ19ERUYKSlNfQ0dFVFNFVF9NQUdJQ19ERUYKSlNfQ0dFVFNFVF9NQUdJQ19ERUYKSlNfQ0dFVFNFVF9NQUdJQ19ERUYKSlNfQ0dFVFNFVF9NQUdJQ19ERUYKSlNfQ0dFVFNFVF9NQUdJQ19ERUYKSlNfQ0ZVTkNfTUFHSUNfREVGCkpTX0NGVU5DX01BR0lDX0RFRgpKU19DRlVOQ19NQUdJQ19ERUYKSlNfQ0ZVTkNfTUFHSUNfREVGCkpTX0NGVU5DX01BR0lDX0RFRgpKU19DRlVOQ19ERUYKSlNfQ0ZVTkNfTUFHSUNfREVGCkpTX0NGVU5DX01BR0lDX0RFRgpKU19DRlVOQ19NQUdJQ19ERUYKSlNfQUxJQVNfREVGCkpTX0FMSUFTX0RFRgpKU19BTElBU19ERUYKSlNfUFJPUF9TVFJJTkdfREVGCkpTX0NGVU5DX0RFRgogIGpzX2xpbmVfaW5pdAogIGpzX2xpbmVfZXhwb3J0CiAganNfbGluZV9jb25zdHJ1Y3RvcgpKU19JTklUX01PRFVMRQpKU19JTklUX01PRFVMRQpKU19JTklUX01PRFVMRQAAAAAAAAAAVQIAAAAAAAAAAAAA",
					"AQAAAAAAAAAAAAAA"
				],
				[
					747,
					1,
					"outline_refresh",
					{
						"path": "/home/roman/Projects/qjs-opencv/js_mat.cpp",
						"symkeys":
						[
							[
								1280,
								1297
							],
							[
								1411,
								1427
							],
							[
								1634,
								1646
							],
							[
								1962,
								1979
							],
							[
								2322,
								2334
							],
							[
								2957,
								2967
							],
							[
								3546,
								3557
							],
							[
								4389,
								4400
							],
							[
								4822,
								4839
							],
							[
								5342,
								5353
							],
							[
								6385,
								6398
							],
							[
								6900,
								6911
							],
							[
								7123,
								7135
							],
							[
								9523,
								9534
							],
							[
								12790,
								12801
							],
							[
								13653,
								13663
							],
							[
								13871,
								13881
							],
							[
								15447,
								15460
							],
							[
								15669,
								15678
							],
							[
								16440,
								16450
							],
							[
								19907,
								19920
							],
							[
								21695,
								21711
							],
							[
								23100,
								23115
							],
							[
								24759,
								24773
							],
							[
								25378,
								25404
							],
							[
								25911,
								25928
							],
							[
								26449,
								26463
							],
							[
								27027,
								27041
							],
							[
								28022,
								28036
							],
							[
								28598,
								28615
							],
							[
								29505,
								29516
							],
							[
								30056,
								30075
							],
							[
								30967,
								30980
							],
							[
								31751,
								31763
							],
							[
								32445,
								32456
							],
							[
								32959,
								32975
							],
							[
								34440,
								34459
							],
							[
								35543,
								35563
							],
							[
								35760,
								35780
							],
							[
								38040,
								38065
							],
							[
								38243,
								38262
							],
							[
								38660,
								38680
							],
							[
								38776,
								38796
							],
							[
								38892,
								38912
							],
							[
								39016,
								39036
							],
							[
								39132,
								39152
							],
							[
								39250,
								39270
							],
							[
								39368,
								39388
							],
							[
								39486,
								39506
							],
							[
								39602,
								39622
							],
							[
								39730,
								39750
							],
							[
								39856,
								39876
							],
							[
								39972,
								39992
							],
							[
								40096,
								40116
							],
							[
								40222,
								40236
							],
							[
								40320,
								40334
							],
							[
								40416,
								40434
							],
							[
								40523,
								40541
							],
							[
								40630,
								40648
							],
							[
								40748,
								40766
							],
							[
								40866,
								40884
							],
							[
								40977,
								40995
							],
							[
								41084,
								41102
							],
							[
								41199,
								41217
							],
							[
								41306,
								41324
							],
							[
								41417,
								41435
							],
							[
								41528,
								41546
							],
							[
								41641,
								41659
							],
							[
								41752,
								41770
							],
							[
								41872,
								41890
							],
							[
								41980,
								41998
							],
							[
								42088,
								42106
							],
							[
								42194,
								42212
							],
							[
								42302,
								42320
							],
							[
								42411,
								42429
							],
							[
								42509,
								42527
							],
							[
								42607,
								42619
							],
							[
								42704,
								42716
							],
							[
								42789,
								42801
							],
							[
								42876,
								42888
							],
							[
								42968,
								42980
							],
							[
								43068,
								43080
							],
							[
								43162,
								43174
							],
							[
								43257,
								43269
							],
							[
								43352,
								43370
							],
							[
								43474,
								43492
							],
							[
								43600,
								43618
							],
							[
								43728,
								43740
							],
							[
								43824,
								43836
							],
							[
								43926,
								43944
							],
							[
								44068,
								44088
							],
							[
								44130,
								44148
							],
							[
								44215,
								44227
							],
							[
								44336,
								44348
							],
							[
								44408,
								44426
							],
							[
								44464,
								44482
							],
							[
								44520,
								44538
							],
							[
								44576,
								44594
							],
							[
								44632,
								44650
							],
							[
								44688,
								44706
							],
							[
								44743,
								44761
							],
							[
								44799,
								44817
							],
							[
								44859,
								44877
							],
							[
								44918,
								44935
							],
							[
								44945,
								44956
							],
							[
								44997,
								45008
							],
							[
								46435,
								46448
							],
							[
								46558,
								46572
							],
							[
								46610,
								46624
							],
							[
								46676,
								46690
							]
						],
						"symlist":
						[
							"JSMatIteratorData",
							"js_mat_free_func",
							"js_mat_sizes",
							"js_mat_dimensions",
							"js_mat_track",
							"js_mat_new",
							"js_mat_wrap",
							"js_mat_data",
							"js_mat_print_data",
							"js_mat_dump",
							"js_mat_params",
							"js_mat_ctor",
							"js_mat_funcs",
							"js_mat_expr",
							"js_mat_init",
							"js_mat_get",
							"js_mat_get",
							"js_mat_get_wh",
							"js_mat_at",
							"js_mat_set",
							"js_mat_set_to",
							"js_mat_get_props",
							"js_mat_tostring",
							"js_mat_inspect",
							"js_mat_getrotationmatrix2d",
							"js_mat_convert_to",
							"js_mat_copy_to",
							"js_mat_reshape",
							"js_mat_getumat",
							"js_mat_class_func",
							"js_mat_fill",
							"js_mat_class_create",
							"js_mat_buffer",
							"js_mat_array",
							"js_mat_call",
							"js_mat_finalizer",
							"js_mat_iterator_new",
							"js_mat_iterator_dump",
							"js_mat_iterator_next",
							"js_mat_iterator_finalizer",
							"js_mat_iterator_dup",
							"JS_CGETSET_MAGIC_DEF",
							"JS_CGETSET_MAGIC_DEF",
							"JS_CGETSET_MAGIC_DEF",
							"JS_CGETSET_MAGIC_DEF",
							"JS_CGETSET_MAGIC_DEF",
							"JS_CGETSET_MAGIC_DEF",
							"JS_CGETSET_MAGIC_DEF",
							"JS_CGETSET_MAGIC_DEF",
							"JS_CGETSET_MAGIC_DEF",
							"JS_CGETSET_MAGIC_DEF",
							"JS_CGETSET_MAGIC_DEF",
							"JS_CGETSET_MAGIC_DEF",
							"JS_CGETSET_MAGIC_DEF",
							"JS_CGETSET_DEF",
							"JS_CGETSET_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_DEF",
							"JS_CFUNC_DEF",
							"JS_CFUNC_DEF",
							"JS_CFUNC_DEF",
							"JS_CFUNC_DEF",
							"JS_CFUNC_DEF",
							"JS_CFUNC_DEF",
							"JS_CFUNC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_ALIAS_DEF",
							"JS_ALIAS_DEF",
							"JS_PROP_STRING_DEF",
							"JS_ITERATOR_NEXT_DEF",
							"JS_PROP_STRING_DEF",
							"JS_CFUNC_DEF",
							"JS_CFUNC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_PROP_INT32_DEF",
							"CV_MAKETYPE",
							"js_mat_init",
							"js_mat_export",
							"JS_INIT_MODULE",
							"JS_INIT_MODULE",
							"JS_INIT_MODULE"
						]
					},
					"AgAAAAAAAAAAAAAAAAAAAAAAAABVAgAAICBqc19kcmF3X2luaXQKICBqc19kcmF3X2NpcmNsZQogIGpzX2RyYXdfY29udG91cgogIGpzX2RyYXdfY29udG91cnMKICBqc19wb2ludF9yZWFkPGludD4KICBqc19kcmF3X2xpbmUKICBqc19kcmF3X3BvbHlnb24KICBqc19kcmF3X3JlY3QKICBqc19wdXRfdGV4dAogIGpzX2dldF90ZXh0X3NpemUKICBqc19nZXRfZm9udF9zY2FsZV9mcm9tX2hlaWdodAogIGpzX2xvYWRfZm9udApKU19QUk9QX1NUUklOR19ERUYKSlNfQ0ZVTkNfREVGCkpTX0NGVU5DX0RFRgpKU19DRlVOQ19ERUYKSlNfQ0ZVTkNfREVGCkpTX0NGVU5DX0RFRgpKU19DRlVOQ19ERUYKSlNfQ0ZVTkNfREVGCkpTX0NGVU5DX0RFRgpKU19DRlVOQ19ERUYKSlNfQ0ZVTkNfREVGCkpTX0NGVU5DX0RFRgpKU19DRlVOQ19ERUYKSlNfQ0ZVTkNfREVGCkpTX0NGVU5DX0RFRgpKU19DRlVOQ19ERUYKSlNfQ0ZVTkNfREVGCkpTX0NGVU5DX0RFRgpKU19DRlVOQ19ERUYKSlNfQ0ZVTkNfREVGCiAganNfZHJhd19jdG9yCiAganNfZHJhd19pbml0CiAganNfZHJhd19leHBvcnQKSlNfSU5JVF9NT0RVTEUKSlNfSU5JVF9NT0RVTEUKSlNfSU5JVF9NT0RVTEUKICBqc19kcmF3X2NvbnN0cnVjdG9yAAAAAAAAAACUBwAAAAAAAAAAAAA",
					"AQAAAAAAAAAAAAAA"
				],
				[
					756,
					1,
					"outline_refresh",
					{
						"path": "/home/roman/Projects/qjs-opencv/js_mat.cpp",
						"symkeys":
						[
							[
								1280,
								1297
							],
							[
								1411,
								1427
							],
							[
								1634,
								1646
							],
							[
								1962,
								1979
							],
							[
								2322,
								2334
							],
							[
								2957,
								2967
							],
							[
								3546,
								3557
							],
							[
								4389,
								4400
							],
							[
								4822,
								4839
							],
							[
								5342,
								5353
							],
							[
								6385,
								6398
							],
							[
								6900,
								6911
							],
							[
								7123,
								7135
							],
							[
								9523,
								9534
							],
							[
								12790,
								12801
							],
							[
								13653,
								13663
							],
							[
								13871,
								13881
							],
							[
								15447,
								15460
							],
							[
								15669,
								15678
							],
							[
								16440,
								16450
							],
							[
								19907,
								19920
							],
							[
								21695,
								21711
							],
							[
								23100,
								23115
							],
							[
								24759,
								24773
							],
							[
								25378,
								25404
							],
							[
								25911,
								25928
							],
							[
								26449,
								26463
							],
							[
								27070,
								27084
							],
							[
								28065,
								28079
							],
							[
								28641,
								28658
							],
							[
								29548,
								29559
							],
							[
								30099,
								30118
							],
							[
								31010,
								31023
							],
							[
								31794,
								31806
							],
							[
								32488,
								32499
							],
							[
								33002,
								33018
							],
							[
								34483,
								34502
							],
							[
								35586,
								35606
							],
							[
								35803,
								35823
							],
							[
								38083,
								38108
							],
							[
								38286,
								38305
							],
							[
								38703,
								38723
							],
							[
								38819,
								38839
							],
							[
								38935,
								38955
							],
							[
								39059,
								39079
							],
							[
								39175,
								39195
							],
							[
								39293,
								39313
							],
							[
								39411,
								39431
							],
							[
								39529,
								39549
							],
							[
								39645,
								39665
							],
							[
								39773,
								39793
							],
							[
								39899,
								39919
							],
							[
								40015,
								40035
							],
							[
								40139,
								40159
							],
							[
								40265,
								40279
							],
							[
								40363,
								40377
							],
							[
								40459,
								40477
							],
							[
								40566,
								40584
							],
							[
								40673,
								40691
							],
							[
								40791,
								40809
							],
							[
								40909,
								40927
							],
							[
								41020,
								41038
							],
							[
								41127,
								41145
							],
							[
								41242,
								41260
							],
							[
								41349,
								41367
							],
							[
								41460,
								41478
							],
							[
								41571,
								41589
							],
							[
								41684,
								41702
							],
							[
								41795,
								41813
							],
							[
								41915,
								41933
							],
							[
								42023,
								42041
							],
							[
								42131,
								42149
							],
							[
								42237,
								42255
							],
							[
								42345,
								42363
							],
							[
								42454,
								42472
							],
							[
								42552,
								42570
							],
							[
								42650,
								42662
							],
							[
								42747,
								42759
							],
							[
								42832,
								42844
							],
							[
								42919,
								42931
							],
							[
								43011,
								43023
							],
							[
								43111,
								43123
							],
							[
								43205,
								43217
							],
							[
								43300,
								43312
							],
							[
								43395,
								43413
							],
							[
								43517,
								43535
							],
							[
								43643,
								43661
							],
							[
								43771,
								43783
							],
							[
								43867,
								43879
							],
							[
								43969,
								43987
							],
							[
								44111,
								44131
							],
							[
								44173,
								44191
							],
							[
								44258,
								44270
							],
							[
								44379,
								44391
							],
							[
								44451,
								44469
							],
							[
								44507,
								44525
							],
							[
								44563,
								44581
							],
							[
								44619,
								44637
							],
							[
								44675,
								44693
							],
							[
								44731,
								44749
							],
							[
								44786,
								44804
							],
							[
								44842,
								44860
							],
							[
								44902,
								44920
							],
							[
								44961,
								44978
							],
							[
								44988,
								44999
							],
							[
								45040,
								45051
							],
							[
								46478,
								46491
							],
							[
								46601,
								46615
							],
							[
								46653,
								46667
							],
							[
								46719,
								46733
							]
						],
						"symlist":
						[
							"JSMatIteratorData",
							"js_mat_free_func",
							"js_mat_sizes",
							"js_mat_dimensions",
							"js_mat_track",
							"js_mat_new",
							"js_mat_wrap",
							"js_mat_data",
							"js_mat_print_data",
							"js_mat_dump",
							"js_mat_params",
							"js_mat_ctor",
							"js_mat_funcs",
							"js_mat_expr",
							"js_mat_init",
							"js_mat_get",
							"js_mat_get",
							"js_mat_get_wh",
							"js_mat_at",
							"js_mat_set",
							"js_mat_set_to",
							"js_mat_get_props",
							"js_mat_tostring",
							"js_mat_inspect",
							"js_mat_getrotationmatrix2d",
							"js_mat_convert_to",
							"js_mat_copy_to",
							"js_mat_reshape",
							"js_mat_getumat",
							"js_mat_class_func",
							"js_mat_fill",
							"js_mat_class_create",
							"js_mat_buffer",
							"js_mat_array",
							"js_mat_call",
							"js_mat_finalizer",
							"js_mat_iterator_new",
							"js_mat_iterator_dump",
							"js_mat_iterator_next",
							"js_mat_iterator_finalizer",
							"js_mat_iterator_dup",
							"JS_CGETSET_MAGIC_DEF",
							"JS_CGETSET_MAGIC_DEF",
							"JS_CGETSET_MAGIC_DEF",
							"JS_CGETSET_MAGIC_DEF",
							"JS_CGETSET_MAGIC_DEF",
							"JS_CGETSET_MAGIC_DEF",
							"JS_CGETSET_MAGIC_DEF",
							"JS_CGETSET_MAGIC_DEF",
							"JS_CGETSET_MAGIC_DEF",
							"JS_CGETSET_MAGIC_DEF",
							"JS_CGETSET_MAGIC_DEF",
							"JS_CGETSET_MAGIC_DEF",
							"JS_CGETSET_MAGIC_DEF",
							"JS_CGETSET_DEF",
							"JS_CGETSET_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_DEF",
							"JS_CFUNC_DEF",
							"JS_CFUNC_DEF",
							"JS_CFUNC_DEF",
							"JS_CFUNC_DEF",
							"JS_CFUNC_DEF",
							"JS_CFUNC_DEF",
							"JS_CFUNC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_ALIAS_DEF",
							"JS_ALIAS_DEF",
							"JS_PROP_STRING_DEF",
							"JS_ITERATOR_NEXT_DEF",
							"JS_PROP_STRING_DEF",
							"JS_CFUNC_DEF",
							"JS_CFUNC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_PROP_INT32_DEF",
							"CV_MAKETYPE",
							"js_mat_init",
							"js_mat_export",
							"JS_INIT_MODULE",
							"JS_INIT_MODULE",
							"JS_INIT_MODULE"
						]
					},
					"AgAAAAAAAAAAAAAAAAAAAAAAAACUBwAASlNNYXRJdGVyYXRvckRhdGEKICBqc19tYXRfZnJlZV9mdW5jCiAganNfbWF0X3NpemVzCiAganNfbWF0X2RpbWVuc2lvbnMKICBqc19tYXRfdHJhY2sKICBqc19tYXRfbmV3CiAganNfbWF0X3dyYXAKICBqc19tYXRfZGF0YQogIGpzX21hdF9wcmludF9kYXRhCiAganNfbWF0X2R1bXAKICBqc19tYXRfcGFyYW1zCiAganNfbWF0X2N0b3IKICBqc19tYXRfZnVuY3MKICBqc19tYXRfZXhwcgogIGpzX21hdF9pbml0CiAganNfbWF0X2dldAogIGpzX21hdF9nZXQKICBqc19tYXRfZ2V0X3doCiAganNfbWF0X2F0CiAganNfbWF0X3NldAogIGpzX21hdF9zZXRfdG8KICBqc19tYXRfZ2V0X3Byb3BzCiAganNfbWF0X3Rvc3RyaW5nCiAganNfbWF0X2luc3BlY3QKICBqc19tYXRfZ2V0cm90YXRpb25tYXRyaXgyZAogIGpzX21hdF9jb252ZXJ0X3RvCiAganNfbWF0X2NvcHlfdG8KICBqc19tYXRfcmVzaGFwZQogIGpzX21hdF9nZXR1bWF0CiAganNfbWF0X2NsYXNzX2Z1bmMKICBqc19tYXRfZmlsbAogIGpzX21hdF9jbGFzc19jcmVhdGUKICBqc19tYXRfYnVmZmVyCiAganNfbWF0X2FycmF5CiAganNfbWF0X2NhbGwKICBqc19tYXRfZmluYWxpemVyCiAganNfbWF0X2l0ZXJhdG9yX25ldwogIGpzX21hdF9pdGVyYXRvcl9kdW1wCiAganNfbWF0X2l0ZXJhdG9yX25leHQKICBqc19tYXRfaXRlcmF0b3JfZmluYWxpemVyCiAganNfbWF0X2l0ZXJhdG9yX2R1cApKU19DR0VUU0VUX01BR0lDX0RFRgpKU19DR0VUU0VUX01BR0lDX0RFRgpKU19DR0VUU0VUX01BR0lDX0RFRgpKU19DR0VUU0VUX01BR0lDX0RFRgpKU19DR0VUU0VUX01BR0lDX0RFRgpKU19DR0VUU0VUX01BR0lDX0RFRgpKU19DR0VUU0VUX01BR0lDX0RFRgpKU19DR0VUU0VUX01BR0lDX0RFRgpKU19DR0VUU0VUX01BR0lDX0RFRgpKU19DR0VUU0VUX01BR0lDX0RFRgpKU19DR0VUU0VUX01BR0lDX0RFRgpKU19DR0VUU0VUX01BR0lDX0RFRgpKU19DR0VUU0VUX01BR0lDX0RFRgpKU19DR0VUU0VUX0RFRgpKU19DR0VUU0VUX0RFRgpKU19DRlVOQ19NQUdJQ19ERUYKSlNfQ0ZVTkNfTUFHSUNfREVGCkpTX0NGVU5DX01BR0lDX0RFRgpKU19DRlVOQ19NQUdJQ19ERUYKSlNfQ0ZVTkNfTUFHSUNfREVGCkpTX0NGVU5DX01BR0lDX0RFRgpKU19DRlVOQ19NQUdJQ19ERUYKSlNfQ0ZVTkNfTUFHSUNfREVGCkpTX0NGVU5DX01BR0lDX0RFRgpKU19DRlVOQ19NQUdJQ19ERUYKSlNfQ0ZVTkNfTUFHSUNfREVGCkpTX0NGVU5DX01BR0lDX0RFRgpKU19DRlVOQ19NQUdJQ19ERUYKSlNfQ0ZVTkNfTUFHSUNfREVGCkpTX0NGVU5DX01BR0lDX0RFRgpKU19DRlVOQ19NQUdJQ19ERUYKSlNfQ0ZVTkNfTUFHSUNfREVGCkpTX0NGVU5DX01BR0lDX0RFRgpKU19DRlVOQ19NQUdJQ19ERUYKSlNfQ0ZVTkNfTUFHSUNfREVGCkpTX0NGVU5DX0RFRgpKU19DRlVOQ19ERUYKSlNfQ0ZVTkNfREVGCkpTX0NGVU5DX0RFRgpKU19DRlVOQ19ERUYKSlNfQ0ZVTkNfREVGCkpTX0NGVU5DX0RFRgpKU19DRlVOQ19ERUYKSlNfQ0ZVTkNfTUFHSUNfREVGCkpTX0NGVU5DX01BR0lDX0RFRgpKU19DRlVOQ19NQUdJQ19ERUYKSlNfQUxJQVNfREVGCkpTX0FMSUFTX0RFRgpKU19QUk9QX1NUUklOR19ERUYKSlNfSVRFUkFUT1JfTkVYVF9ERUYKSlNfUFJPUF9TVFJJTkdfREVGCkpTX0NGVU5DX0RFRgpKU19DRlVOQ19ERUYKSlNfQ0ZVTkNfTUFHSUNfREVGCkpTX0NGVU5DX01BR0lDX0RFRgpKU19DRlVOQ19NQUdJQ19ERUYKSlNfQ0ZVTkNfTUFHSUNfREVGCkpTX0NGVU5DX01BR0lDX0RFRgpKU19DRlVOQ19NQUdJQ19ERUYKSlNfQ0ZVTkNfTUFHSUNfREVGCkpTX0NGVU5DX01BR0lDX0RFRgpKU19DRlVOQ19NQUdJQ19ERUYKSlNfUFJPUF9JTlQzMl9ERUYKQ1ZfTUFLRVRZUEUKICBqc19tYXRfaW5pdAogIGpzX21hdF9leHBvcnQKSlNfSU5JVF9NT0RVTEUKSlNfSU5JVF9NT0RVTEUKSlNfSU5JVF9NT0RVTEUAAAAAAAAAAJQHAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAtgEAAAAAAAClAQAAAAAAAAAAAAAAAPC/"
				],
				[
					757,
					1,
					"outline_refresh",
					{
						"path": "/home/roman/Projects/qjs-opencv/js_mat.cpp",
						"symkeys":
						[
							[
								1280,
								1297
							],
							[
								1411,
								1427
							],
							[
								1634,
								1646
							],
							[
								1962,
								1979
							],
							[
								2322,
								2334
							],
							[
								2957,
								2967
							],
							[
								3546,
								3557
							],
							[
								4389,
								4400
							],
							[
								4822,
								4839
							],
							[
								5342,
								5353
							],
							[
								6385,
								6398
							],
							[
								6900,
								6911
							],
							[
								7123,
								7135
							],
							[
								9523,
								9534
							],
							[
								12790,
								12801
							],
							[
								13653,
								13663
							],
							[
								13871,
								13881
							],
							[
								15447,
								15460
							],
							[
								15669,
								15678
							],
							[
								16440,
								16450
							],
							[
								19907,
								19920
							],
							[
								21695,
								21711
							],
							[
								23100,
								23115
							],
							[
								24759,
								24773
							],
							[
								25378,
								25404
							],
							[
								25911,
								25928
							],
							[
								26449,
								26463
							],
							[
								27074,
								27088
							],
							[
								28069,
								28083
							],
							[
								28645,
								28662
							],
							[
								29552,
								29563
							],
							[
								30103,
								30122
							],
							[
								31014,
								31027
							],
							[
								31798,
								31810
							],
							[
								32492,
								32503
							],
							[
								33006,
								33022
							],
							[
								34487,
								34506
							],
							[
								35590,
								35610
							],
							[
								35807,
								35827
							],
							[
								38087,
								38112
							],
							[
								38290,
								38309
							],
							[
								38707,
								38727
							],
							[
								38823,
								38843
							],
							[
								38939,
								38959
							],
							[
								39063,
								39083
							],
							[
								39179,
								39199
							],
							[
								39297,
								39317
							],
							[
								39415,
								39435
							],
							[
								39533,
								39553
							],
							[
								39649,
								39669
							],
							[
								39777,
								39797
							],
							[
								39903,
								39923
							],
							[
								40019,
								40039
							],
							[
								40143,
								40163
							],
							[
								40269,
								40283
							],
							[
								40367,
								40381
							],
							[
								40463,
								40481
							],
							[
								40570,
								40588
							],
							[
								40677,
								40695
							],
							[
								40795,
								40813
							],
							[
								40913,
								40931
							],
							[
								41024,
								41042
							],
							[
								41131,
								41149
							],
							[
								41246,
								41264
							],
							[
								41353,
								41371
							],
							[
								41464,
								41482
							],
							[
								41575,
								41593
							],
							[
								41688,
								41706
							],
							[
								41799,
								41817
							],
							[
								41919,
								41937
							],
							[
								42027,
								42045
							],
							[
								42135,
								42153
							],
							[
								42241,
								42259
							],
							[
								42349,
								42367
							],
							[
								42458,
								42476
							],
							[
								42556,
								42574
							],
							[
								42654,
								42666
							],
							[
								42751,
								42763
							],
							[
								42836,
								42848
							],
							[
								42923,
								42935
							],
							[
								43015,
								43027
							],
							[
								43115,
								43127
							],
							[
								43209,
								43221
							],
							[
								43304,
								43316
							],
							[
								43399,
								43417
							],
							[
								43521,
								43539
							],
							[
								43647,
								43665
							],
							[
								43775,
								43787
							],
							[
								43871,
								43883
							],
							[
								43973,
								43991
							],
							[
								44115,
								44135
							],
							[
								44177,
								44195
							],
							[
								44262,
								44274
							],
							[
								44383,
								44395
							],
							[
								44455,
								44473
							],
							[
								44511,
								44529
							],
							[
								44567,
								44585
							],
							[
								44623,
								44641
							],
							[
								44679,
								44697
							],
							[
								44735,
								44753
							],
							[
								44790,
								44808
							],
							[
								44846,
								44864
							],
							[
								44906,
								44924
							],
							[
								44965,
								44982
							],
							[
								44992,
								45003
							],
							[
								45044,
								45055
							],
							[
								46482,
								46495
							],
							[
								46605,
								46619
							],
							[
								46657,
								46671
							],
							[
								46723,
								46737
							]
						],
						"symlist":
						[
							"JSMatIteratorData",
							"js_mat_free_func",
							"js_mat_sizes",
							"js_mat_dimensions",
							"js_mat_track",
							"js_mat_new",
							"js_mat_wrap",
							"js_mat_data",
							"js_mat_print_data",
							"js_mat_dump",
							"js_mat_params",
							"js_mat_ctor",
							"js_mat_funcs",
							"js_mat_expr",
							"js_mat_init",
							"js_mat_get",
							"js_mat_get",
							"js_mat_get_wh",
							"js_mat_at",
							"js_mat_set",
							"js_mat_set_to",
							"js_mat_get_props",
							"js_mat_tostring",
							"js_mat_inspect",
							"js_mat_getrotationmatrix2d",
							"js_mat_convert_to",
							"js_mat_copy_to",
							"js_mat_reshape",
							"js_mat_getumat",
							"js_mat_class_func",
							"js_mat_fill",
							"js_mat_class_create",
							"js_mat_buffer",
							"js_mat_array",
							"js_mat_call",
							"js_mat_finalizer",
							"js_mat_iterator_new",
							"js_mat_iterator_dump",
							"js_mat_iterator_next",
							"js_mat_iterator_finalizer",
							"js_mat_iterator_dup",
							"JS_CGETSET_MAGIC_DEF",
							"JS_CGETSET_MAGIC_DEF",
							"JS_CGETSET_MAGIC_DEF",
							"JS_CGETSET_MAGIC_DEF",
							"JS_CGETSET_MAGIC_DEF",
							"JS_CGETSET_MAGIC_DEF",
							"JS_CGETSET_MAGIC_DEF",
							"JS_CGETSET_MAGIC_DEF",
							"JS_CGETSET_MAGIC_DEF",
							"JS_CGETSET_MAGIC_DEF",
							"JS_CGETSET_MAGIC_DEF",
							"JS_CGETSET_MAGIC_DEF",
							"JS_CGETSET_MAGIC_DEF",
							"JS_CGETSET_DEF",
							"JS_CGETSET_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_DEF",
							"JS_CFUNC_DEF",
							"JS_CFUNC_DEF",
							"JS_CFUNC_DEF",
							"JS_CFUNC_DEF",
							"JS_CFUNC_DEF",
							"JS_CFUNC_DEF",
							"JS_CFUNC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_ALIAS_DEF",
							"JS_ALIAS_DEF",
							"JS_PROP_STRING_DEF",
							"JS_ITERATOR_NEXT_DEF",
							"JS_PROP_STRING_DEF",
							"JS_CFUNC_DEF",
							"JS_CFUNC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_PROP_INT32_DEF",
							"CV_MAKETYPE",
							"js_mat_init",
							"js_mat_export",
							"JS_INIT_MODULE",
							"JS_INIT_MODULE",
							"JS_INIT_MODULE"
						]
					},
					"AgAAAAAAAAAAAAAAAAAAAAAAAACUBwAASlNNYXRJdGVyYXRvckRhdGEKICBqc19tYXRfZnJlZV9mdW5jCiAganNfbWF0X3NpemVzCiAganNfbWF0X2RpbWVuc2lvbnMKICBqc19tYXRfdHJhY2sKICBqc19tYXRfbmV3CiAganNfbWF0X3dyYXAKICBqc19tYXRfZGF0YQogIGpzX21hdF9wcmludF9kYXRhCiAganNfbWF0X2R1bXAKICBqc19tYXRfcGFyYW1zCiAganNfbWF0X2N0b3IKICBqc19tYXRfZnVuY3MKICBqc19tYXRfZXhwcgogIGpzX21hdF9pbml0CiAganNfbWF0X2dldAogIGpzX21hdF9nZXQKICBqc19tYXRfZ2V0X3doCiAganNfbWF0X2F0CiAganNfbWF0X3NldAogIGpzX21hdF9zZXRfdG8KICBqc19tYXRfZ2V0X3Byb3BzCiAganNfbWF0X3Rvc3RyaW5nCiAganNfbWF0X2luc3BlY3QKICBqc19tYXRfZ2V0cm90YXRpb25tYXRyaXgyZAogIGpzX21hdF9jb252ZXJ0X3RvCiAganNfbWF0X2NvcHlfdG8KICBqc19tYXRfcmVzaGFwZQogIGpzX21hdF9nZXR1bWF0CiAganNfbWF0X2NsYXNzX2Z1bmMKICBqc19tYXRfZmlsbAogIGpzX21hdF9jbGFzc19jcmVhdGUKICBqc19tYXRfYnVmZmVyCiAganNfbWF0X2FycmF5CiAganNfbWF0X2NhbGwKICBqc19tYXRfZmluYWxpemVyCiAganNfbWF0X2l0ZXJhdG9yX25ldwogIGpzX21hdF9pdGVyYXRvcl9kdW1wCiAganNfbWF0X2l0ZXJhdG9yX25leHQKICBqc19tYXRfaXRlcmF0b3JfZmluYWxpemVyCiAganNfbWF0X2l0ZXJhdG9yX2R1cApKU19DR0VUU0VUX01BR0lDX0RFRgpKU19DR0VUU0VUX01BR0lDX0RFRgpKU19DR0VUU0VUX01BR0lDX0RFRgpKU19DR0VUU0VUX01BR0lDX0RFRgpKU19DR0VUU0VUX01BR0lDX0RFRgpKU19DR0VUU0VUX01BR0lDX0RFRgpKU19DR0VUU0VUX01BR0lDX0RFRgpKU19DR0VUU0VUX01BR0lDX0RFRgpKU19DR0VUU0VUX01BR0lDX0RFRgpKU19DR0VUU0VUX01BR0lDX0RFRgpKU19DR0VUU0VUX01BR0lDX0RFRgpKU19DR0VUU0VUX01BR0lDX0RFRgpKU19DR0VUU0VUX01BR0lDX0RFRgpKU19DR0VUU0VUX0RFRgpKU19DR0VUU0VUX0RFRgpKU19DRlVOQ19NQUdJQ19ERUYKSlNfQ0ZVTkNfTUFHSUNfREVGCkpTX0NGVU5DX01BR0lDX0RFRgpKU19DRlVOQ19NQUdJQ19ERUYKSlNfQ0ZVTkNfTUFHSUNfREVGCkpTX0NGVU5DX01BR0lDX0RFRgpKU19DRlVOQ19NQUdJQ19ERUYKSlNfQ0ZVTkNfTUFHSUNfREVGCkpTX0NGVU5DX01BR0lDX0RFRgpKU19DRlVOQ19NQUdJQ19ERUYKSlNfQ0ZVTkNfTUFHSUNfREVGCkpTX0NGVU5DX01BR0lDX0RFRgpKU19DRlVOQ19NQUdJQ19ERUYKSlNfQ0ZVTkNfTUFHSUNfREVGCkpTX0NGVU5DX01BR0lDX0RFRgpKU19DRlVOQ19NQUdJQ19ERUYKSlNfQ0ZVTkNfTUFHSUNfREVGCkpTX0NGVU5DX01BR0lDX0RFRgpKU19DRlVOQ19NQUdJQ19ERUYKSlNfQ0ZVTkNfTUFHSUNfREVGCkpTX0NGVU5DX0RFRgpKU19DRlVOQ19ERUYKSlNfQ0ZVTkNfREVGCkpTX0NGVU5DX0RFRgpKU19DRlVOQ19ERUYKSlNfQ0ZVTkNfREVGCkpTX0NGVU5DX0RFRgpKU19DRlVOQ19ERUYKSlNfQ0ZVTkNfTUFHSUNfREVGCkpTX0NGVU5DX01BR0lDX0RFRgpKU19DRlVOQ19NQUdJQ19ERUYKSlNfQUxJQVNfREVGCkpTX0FMSUFTX0RFRgpKU19QUk9QX1NUUklOR19ERUYKSlNfSVRFUkFUT1JfTkVYVF9ERUYKSlNfUFJPUF9TVFJJTkdfREVGCkpTX0NGVU5DX0RFRgpKU19DRlVOQ19ERUYKSlNfQ0ZVTkNfTUFHSUNfREVGCkpTX0NGVU5DX01BR0lDX0RFRgpKU19DRlVOQ19NQUdJQ19ERUYKSlNfQ0ZVTkNfTUFHSUNfREVGCkpTX0NGVU5DX01BR0lDX0RFRgpKU19DRlVOQ19NQUdJQ19ERUYKSlNfQ0ZVTkNfTUFHSUNfREVGCkpTX0NGVU5DX01BR0lDX0RFRgpKU19DRlVOQ19NQUdJQ19ERUYKSlNfUFJPUF9JTlQzMl9ERUYKQ1ZfTUFLRVRZUEUKICBqc19tYXRfaW5pdAogIGpzX21hdF9leHBvcnQKSlNfSU5JVF9NT0RVTEUKSlNfSU5JVF9NT0RVTEUKSlNfSU5JVF9NT0RVTEUAAAAAAAAAAJQHAAAAAAAAAAAAAA",
					"AQAAAAAAAAAAAAAA"
				],
				[
					758,
					1,
					"outline_refresh",
					{
						"path": "/home/roman/Projects/qjs-opencv/js_mat.cpp",
						"symkeys":
						[
							[
								1280,
								1297
							],
							[
								1411,
								1427
							],
							[
								1634,
								1646
							],
							[
								1962,
								1979
							],
							[
								2322,
								2334
							],
							[
								2957,
								2967
							],
							[
								3546,
								3557
							],
							[
								4389,
								4400
							],
							[
								4822,
								4839
							],
							[
								5342,
								5353
							],
							[
								6385,
								6398
							],
							[
								6900,
								6911
							],
							[
								7123,
								7135
							],
							[
								9523,
								9534
							],
							[
								12790,
								12801
							],
							[
								13653,
								13663
							],
							[
								13871,
								13881
							],
							[
								15447,
								15460
							],
							[
								15669,
								15678
							],
							[
								16440,
								16450
							],
							[
								19907,
								19920
							],
							[
								21695,
								21711
							],
							[
								23100,
								23115
							],
							[
								24759,
								24773
							],
							[
								25378,
								25404
							],
							[
								25911,
								25928
							],
							[
								26449,
								26463
							],
							[
								27144,
								27158
							],
							[
								28139,
								28153
							],
							[
								28715,
								28732
							],
							[
								29622,
								29633
							],
							[
								30173,
								30192
							],
							[
								31084,
								31097
							],
							[
								31868,
								31880
							],
							[
								32562,
								32573
							],
							[
								33076,
								33092
							],
							[
								34557,
								34576
							],
							[
								35660,
								35680
							],
							[
								35877,
								35897
							],
							[
								38157,
								38182
							],
							[
								38360,
								38379
							],
							[
								38777,
								38797
							],
							[
								38893,
								38913
							],
							[
								39009,
								39029
							],
							[
								39133,
								39153
							],
							[
								39249,
								39269
							],
							[
								39367,
								39387
							],
							[
								39485,
								39505
							],
							[
								39603,
								39623
							],
							[
								39719,
								39739
							],
							[
								39847,
								39867
							],
							[
								39973,
								39993
							],
							[
								40089,
								40109
							],
							[
								40213,
								40233
							],
							[
								40339,
								40353
							],
							[
								40437,
								40451
							],
							[
								40533,
								40551
							],
							[
								40640,
								40658
							],
							[
								40747,
								40765
							],
							[
								40865,
								40883
							],
							[
								40983,
								41001
							],
							[
								41094,
								41112
							],
							[
								41201,
								41219
							],
							[
								41316,
								41334
							],
							[
								41423,
								41441
							],
							[
								41534,
								41552
							],
							[
								41645,
								41663
							],
							[
								41758,
								41776
							],
							[
								41869,
								41887
							],
							[
								41989,
								42007
							],
							[
								42097,
								42115
							],
							[
								42205,
								42223
							],
							[
								42311,
								42329
							],
							[
								42419,
								42437
							],
							[
								42528,
								42546
							],
							[
								42626,
								42644
							],
							[
								42724,
								42736
							],
							[
								42821,
								42833
							],
							[
								42906,
								42918
							],
							[
								42993,
								43005
							],
							[
								43085,
								43097
							],
							[
								43185,
								43197
							],
							[
								43279,
								43291
							],
							[
								43374,
								43386
							],
							[
								43469,
								43487
							],
							[
								43591,
								43609
							],
							[
								43717,
								43735
							],
							[
								43845,
								43857
							],
							[
								43941,
								43953
							],
							[
								44043,
								44061
							],
							[
								44185,
								44205
							],
							[
								44247,
								44265
							],
							[
								44332,
								44344
							],
							[
								44453,
								44465
							],
							[
								44525,
								44543
							],
							[
								44581,
								44599
							],
							[
								44637,
								44655
							],
							[
								44693,
								44711
							],
							[
								44749,
								44767
							],
							[
								44805,
								44823
							],
							[
								44860,
								44878
							],
							[
								44916,
								44934
							],
							[
								44976,
								44994
							],
							[
								45035,
								45052
							],
							[
								45062,
								45073
							],
							[
								45114,
								45125
							],
							[
								46552,
								46565
							],
							[
								46675,
								46689
							],
							[
								46727,
								46741
							],
							[
								46793,
								46807
							]
						],
						"symlist":
						[
							"JSMatIteratorData",
							"js_mat_free_func",
							"js_mat_sizes",
							"js_mat_dimensions",
							"js_mat_track",
							"js_mat_new",
							"js_mat_wrap",
							"js_mat_data",
							"js_mat_print_data",
							"js_mat_dump",
							"js_mat_params",
							"js_mat_ctor",
							"js_mat_funcs",
							"js_mat_expr",
							"js_mat_init",
							"js_mat_get",
							"js_mat_get",
							"js_mat_get_wh",
							"js_mat_at",
							"js_mat_set",
							"js_mat_set_to",
							"js_mat_get_props",
							"js_mat_tostring",
							"js_mat_inspect",
							"js_mat_getrotationmatrix2d",
							"js_mat_convert_to",
							"js_mat_copy_to",
							"js_mat_reshape",
							"js_mat_getumat",
							"js_mat_class_func",
							"js_mat_fill",
							"js_mat_class_create",
							"js_mat_buffer",
							"js_mat_array",
							"js_mat_call",
							"js_mat_finalizer",
							"js_mat_iterator_new",
							"js_mat_iterator_dump",
							"js_mat_iterator_next",
							"js_mat_iterator_finalizer",
							"js_mat_iterator_dup",
							"JS_CGETSET_MAGIC_DEF",
							"JS_CGETSET_MAGIC_DEF",
							"JS_CGETSET_MAGIC_DEF",
							"JS_CGETSET_MAGIC_DEF",
							"JS_CGETSET_MAGIC_DEF",
							"JS_CGETSET_MAGIC_DEF",
							"JS_CGETSET_MAGIC_DEF",
							"JS_CGETSET_MAGIC_DEF",
							"JS_CGETSET_MAGIC_DEF",
							"JS_CGETSET_MAGIC_DEF",
							"JS_CGETSET_MAGIC_DEF",
							"JS_CGETSET_MAGIC_DEF",
							"JS_CGETSET_MAGIC_DEF",
							"JS_CGETSET_DEF",
							"JS_CGETSET_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_DEF",
							"JS_CFUNC_DEF",
							"JS_CFUNC_DEF",
							"JS_CFUNC_DEF",
							"JS_CFUNC_DEF",
							"JS_CFUNC_DEF",
							"JS_CFUNC_DEF",
							"JS_CFUNC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_ALIAS_DEF",
							"JS_ALIAS_DEF",
							"JS_PROP_STRING_DEF",
							"JS_ITERATOR_NEXT_DEF",
							"JS_PROP_STRING_DEF",
							"JS_CFUNC_DEF",
							"JS_CFUNC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_PROP_INT32_DEF",
							"CV_MAKETYPE",
							"js_mat_init",
							"js_mat_export",
							"JS_INIT_MODULE",
							"JS_INIT_MODULE",
							"JS_INIT_MODULE"
						]
					},
					"AgAAAAAAAAAAAAAAAAAAAAAAAACUBwAASlNNYXRJdGVyYXRvckRhdGEKICBqc19tYXRfZnJlZV9mdW5jCiAganNfbWF0X3NpemVzCiAganNfbWF0X2RpbWVuc2lvbnMKICBqc19tYXRfdHJhY2sKICBqc19tYXRfbmV3CiAganNfbWF0X3dyYXAKICBqc19tYXRfZGF0YQogIGpzX21hdF9wcmludF9kYXRhCiAganNfbWF0X2R1bXAKICBqc19tYXRfcGFyYW1zCiAganNfbWF0X2N0b3IKICBqc19tYXRfZnVuY3MKICBqc19tYXRfZXhwcgogIGpzX21hdF9pbml0CiAganNfbWF0X2dldAogIGpzX21hdF9nZXQKICBqc19tYXRfZ2V0X3doCiAganNfbWF0X2F0CiAganNfbWF0X3NldAogIGpzX21hdF9zZXRfdG8KICBqc19tYXRfZ2V0X3Byb3BzCiAganNfbWF0X3Rvc3RyaW5nCiAganNfbWF0X2luc3BlY3QKICBqc19tYXRfZ2V0cm90YXRpb25tYXRyaXgyZAogIGpzX21hdF9jb252ZXJ0X3RvCiAganNfbWF0X2NvcHlfdG8KICBqc19tYXRfcmVzaGFwZQogIGpzX21hdF9nZXR1bWF0CiAganNfbWF0X2NsYXNzX2Z1bmMKICBqc19tYXRfZmlsbAogIGpzX21hdF9jbGFzc19jcmVhdGUKICBqc19tYXRfYnVmZmVyCiAganNfbWF0X2FycmF5CiAganNfbWF0X2NhbGwKICBqc19tYXRfZmluYWxpemVyCiAganNfbWF0X2l0ZXJhdG9yX25ldwogIGpzX21hdF9pdGVyYXRvcl9kdW1wCiAganNfbWF0X2l0ZXJhdG9yX25leHQKICBqc19tYXRfaXRlcmF0b3JfZmluYWxpemVyCiAganNfbWF0X2l0ZXJhdG9yX2R1cApKU19DR0VUU0VUX01BR0lDX0RFRgpKU19DR0VUU0VUX01BR0lDX0RFRgpKU19DR0VUU0VUX01BR0lDX0RFRgpKU19DR0VUU0VUX01BR0lDX0RFRgpKU19DR0VUU0VUX01BR0lDX0RFRgpKU19DR0VUU0VUX01BR0lDX0RFRgpKU19DR0VUU0VUX01BR0lDX0RFRgpKU19DR0VUU0VUX01BR0lDX0RFRgpKU19DR0VUU0VUX01BR0lDX0RFRgpKU19DR0VUU0VUX01BR0lDX0RFRgpKU19DR0VUU0VUX01BR0lDX0RFRgpKU19DR0VUU0VUX01BR0lDX0RFRgpKU19DR0VUU0VUX01BR0lDX0RFRgpKU19DR0VUU0VUX0RFRgpKU19DR0VUU0VUX0RFRgpKU19DRlVOQ19NQUdJQ19ERUYKSlNfQ0ZVTkNfTUFHSUNfREVGCkpTX0NGVU5DX01BR0lDX0RFRgpKU19DRlVOQ19NQUdJQ19ERUYKSlNfQ0ZVTkNfTUFHSUNfREVGCkpTX0NGVU5DX01BR0lDX0RFRgpKU19DRlVOQ19NQUdJQ19ERUYKSlNfQ0ZVTkNfTUFHSUNfREVGCkpTX0NGVU5DX01BR0lDX0RFRgpKU19DRlVOQ19NQUdJQ19ERUYKSlNfQ0ZVTkNfTUFHSUNfREVGCkpTX0NGVU5DX01BR0lDX0RFRgpKU19DRlVOQ19NQUdJQ19ERUYKSlNfQ0ZVTkNfTUFHSUNfREVGCkpTX0NGVU5DX01BR0lDX0RFRgpKU19DRlVOQ19NQUdJQ19ERUYKSlNfQ0ZVTkNfTUFHSUNfREVGCkpTX0NGVU5DX01BR0lDX0RFRgpKU19DRlVOQ19NQUdJQ19ERUYKSlNfQ0ZVTkNfTUFHSUNfREVGCkpTX0NGVU5DX0RFRgpKU19DRlVOQ19ERUYKSlNfQ0ZVTkNfREVGCkpTX0NGVU5DX0RFRgpKU19DRlVOQ19ERUYKSlNfQ0ZVTkNfREVGCkpTX0NGVU5DX0RFRgpKU19DRlVOQ19ERUYKSlNfQ0ZVTkNfTUFHSUNfREVGCkpTX0NGVU5DX01BR0lDX0RFRgpKU19DRlVOQ19NQUdJQ19ERUYKSlNfQUxJQVNfREVGCkpTX0FMSUFTX0RFRgpKU19QUk9QX1NUUklOR19ERUYKSlNfSVRFUkFUT1JfTkVYVF9ERUYKSlNfUFJPUF9TVFJJTkdfREVGCkpTX0NGVU5DX0RFRgpKU19DRlVOQ19ERUYKSlNfQ0ZVTkNfTUFHSUNfREVGCkpTX0NGVU5DX01BR0lDX0RFRgpKU19DRlVOQ19NQUdJQ19ERUYKSlNfQ0ZVTkNfTUFHSUNfREVGCkpTX0NGVU5DX01BR0lDX0RFRgpKU19DRlVOQ19NQUdJQ19ERUYKSlNfQ0ZVTkNfTUFHSUNfREVGCkpTX0NGVU5DX01BR0lDX0RFRgpKU19DRlVOQ19NQUdJQ19ERUYKSlNfUFJPUF9JTlQzMl9ERUYKQ1ZfTUFLRVRZUEUKICBqc19tYXRfaW5pdAogIGpzX21hdF9leHBvcnQKSlNfSU5JVF9NT0RVTEUKSlNfSU5JVF9NT0RVTEUKSlNfSU5JVF9NT0RVTEUAAAAAAAAAAJQHAAAAAAAAAAAAAA",
					"AQAAAAAAAAAAAAAA"
				],
				[
					759,
					2,
					"outline_refresh",
					{
						"path": "/home/roman/Projects/qjs-opencv/js_mat.cpp",
						"symkeys":
						[
							[
								1280,
								1297
							],
							[
								1411,
								1427
							],
							[
								1634,
								1646
							],
							[
								1962,
								1979
							],
							[
								2322,
								2334
							],
							[
								2957,
								2967
							],
							[
								3546,
								3557
							],
							[
								4389,
								4400
							],
							[
								4822,
								4839
							],
							[
								5342,
								5353
							],
							[
								6385,
								6398
							],
							[
								6900,
								6911
							],
							[
								7123,
								7135
							],
							[
								9523,
								9534
							],
							[
								12790,
								12801
							],
							[
								13653,
								13663
							],
							[
								13871,
								13881
							],
							[
								15447,
								15460
							],
							[
								15669,
								15678
							],
							[
								16440,
								16450
							],
							[
								19907,
								19920
							],
							[
								21695,
								21711
							],
							[
								23100,
								23115
							],
							[
								24759,
								24773
							],
							[
								25378,
								25404
							],
							[
								25911,
								25928
							],
							[
								26449,
								26463
							],
							[
								27155,
								27169
							],
							[
								28150,
								28164
							],
							[
								28726,
								28743
							],
							[
								29633,
								29644
							],
							[
								30184,
								30203
							],
							[
								31095,
								31108
							],
							[
								31879,
								31891
							],
							[
								32573,
								32584
							],
							[
								33087,
								33103
							],
							[
								34568,
								34587
							],
							[
								35671,
								35691
							],
							[
								35888,
								35908
							],
							[
								38168,
								38193
							],
							[
								38371,
								38390
							],
							[
								38788,
								38808
							],
							[
								38904,
								38924
							],
							[
								39020,
								39040
							],
							[
								39144,
								39164
							],
							[
								39260,
								39280
							],
							[
								39378,
								39398
							],
							[
								39496,
								39516
							],
							[
								39614,
								39634
							],
							[
								39730,
								39750
							],
							[
								39858,
								39878
							],
							[
								39984,
								40004
							],
							[
								40100,
								40120
							],
							[
								40224,
								40244
							],
							[
								40350,
								40364
							],
							[
								40448,
								40462
							],
							[
								40544,
								40562
							],
							[
								40651,
								40669
							],
							[
								40758,
								40776
							],
							[
								40876,
								40894
							],
							[
								40994,
								41012
							],
							[
								41105,
								41123
							],
							[
								41212,
								41230
							],
							[
								41327,
								41345
							],
							[
								41434,
								41452
							],
							[
								41545,
								41563
							],
							[
								41656,
								41674
							],
							[
								41769,
								41787
							],
							[
								41880,
								41898
							],
							[
								42000,
								42018
							],
							[
								42108,
								42126
							],
							[
								42216,
								42234
							],
							[
								42322,
								42340
							],
							[
								42430,
								42448
							],
							[
								42539,
								42557
							],
							[
								42637,
								42655
							],
							[
								42735,
								42747
							],
							[
								42832,
								42844
							],
							[
								42917,
								42929
							],
							[
								43004,
								43016
							],
							[
								43096,
								43108
							],
							[
								43196,
								43208
							],
							[
								43290,
								43302
							],
							[
								43385,
								43397
							],
							[
								43480,
								43498
							],
							[
								43602,
								43620
							],
							[
								43728,
								43746
							],
							[
								43856,
								43868
							],
							[
								43952,
								43964
							],
							[
								44054,
								44072
							],
							[
								44196,
								44216
							],
							[
								44258,
								44276
							],
							[
								44343,
								44355
							],
							[
								44464,
								44476
							],
							[
								44536,
								44554
							],
							[
								44592,
								44610
							],
							[
								44648,
								44666
							],
							[
								44704,
								44722
							],
							[
								44760,
								44778
							],
							[
								44816,
								44834
							],
							[
								44871,
								44889
							],
							[
								44927,
								44945
							],
							[
								44987,
								45005
							],
							[
								45046,
								45063
							],
							[
								45073,
								45084
							],
							[
								45125,
								45136
							],
							[
								46563,
								46576
							],
							[
								46686,
								46700
							],
							[
								46738,
								46752
							],
							[
								46804,
								46818
							]
						],
						"symlist":
						[
							"JSMatIteratorData",
							"js_mat_free_func",
							"js_mat_sizes",
							"js_mat_dimensions",
							"js_mat_track",
							"js_mat_new",
							"js_mat_wrap",
							"js_mat_data",
							"js_mat_print_data",
							"js_mat_dump",
							"js_mat_params",
							"js_mat_ctor",
							"js_mat_funcs",
							"js_mat_expr",
							"js_mat_init",
							"js_mat_get",
							"js_mat_get",
							"js_mat_get_wh",
							"js_mat_at",
							"js_mat_set",
							"js_mat_set_to",
							"js_mat_get_props",
							"js_mat_tostring",
							"js_mat_inspect",
							"js_mat_getrotationmatrix2d",
							"js_mat_convert_to",
							"js_mat_copy_to",
							"js_mat_reshape",
							"js_mat_getumat",
							"js_mat_class_func",
							"js_mat_fill",
							"js_mat_class_create",
							"js_mat_buffer",
							"js_mat_array",
							"js_mat_call",
							"js_mat_finalizer",
							"js_mat_iterator_new",
							"js_mat_iterator_dump",
							"js_mat_iterator_next",
							"js_mat_iterator_finalizer",
							"js_mat_iterator_dup",
							"JS_CGETSET_MAGIC_DEF",
							"JS_CGETSET_MAGIC_DEF",
							"JS_CGETSET_MAGIC_DEF",
							"JS_CGETSET_MAGIC_DEF",
							"JS_CGETSET_MAGIC_DEF",
							"JS_CGETSET_MAGIC_DEF",
							"JS_CGETSET_MAGIC_DEF",
							"JS_CGETSET_MAGIC_DEF",
							"JS_CGETSET_MAGIC_DEF",
							"JS_CGETSET_MAGIC_DEF",
							"JS_CGETSET_MAGIC_DEF",
							"JS_CGETSET_MAGIC_DEF",
							"JS_CGETSET_MAGIC_DEF",
							"JS_CGETSET_DEF",
							"JS_CGETSET_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_DEF",
							"JS_CFUNC_DEF",
							"JS_CFUNC_DEF",
							"JS_CFUNC_DEF",
							"JS_CFUNC_DEF",
							"JS_CFUNC_DEF",
							"JS_CFUNC_DEF",
							"JS_CFUNC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_ALIAS_DEF",
							"JS_ALIAS_DEF",
							"JS_PROP_STRING_DEF",
							"JS_ITERATOR_NEXT_DEF",
							"JS_PROP_STRING_DEF",
							"JS_CFUNC_DEF",
							"JS_CFUNC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_PROP_INT32_DEF",
							"CV_MAKETYPE",
							"js_mat_init",
							"js_mat_export",
							"JS_INIT_MODULE",
							"JS_INIT_MODULE",
							"JS_INIT_MODULE"
						]
					},
					"BAAAAAAAAAAAAAAAAAAAAAAAAACUBwAASlNNYXRJdGVyYXRvckRhdGEKICBqc19tYXRfZnJlZV9mdW5jCiAganNfbWF0X3NpemVzCiAganNfbWF0X2RpbWVuc2lvbnMKICBqc19tYXRfdHJhY2sKICBqc19tYXRfbmV3CiAganNfbWF0X3dyYXAKICBqc19tYXRfZGF0YQogIGpzX21hdF9wcmludF9kYXRhCiAganNfbWF0X2R1bXAKICBqc19tYXRfcGFyYW1zCiAganNfbWF0X2N0b3IKICBqc19tYXRfZnVuY3MKICBqc19tYXRfZXhwcgogIGpzX21hdF9pbml0CiAganNfbWF0X2dldAogIGpzX21hdF9nZXQKICBqc19tYXRfZ2V0X3doCiAganNfbWF0X2F0CiAganNfbWF0X3NldAogIGpzX21hdF9zZXRfdG8KICBqc19tYXRfZ2V0X3Byb3BzCiAganNfbWF0X3Rvc3RyaW5nCiAganNfbWF0X2luc3BlY3QKICBqc19tYXRfZ2V0cm90YXRpb25tYXRyaXgyZAogIGpzX21hdF9jb252ZXJ0X3RvCiAganNfbWF0X2NvcHlfdG8KICBqc19tYXRfcmVzaGFwZQogIGpzX21hdF9nZXR1bWF0CiAganNfbWF0X2NsYXNzX2Z1bmMKICBqc19tYXRfZmlsbAogIGpzX21hdF9jbGFzc19jcmVhdGUKICBqc19tYXRfYnVmZmVyCiAganNfbWF0X2FycmF5CiAganNfbWF0X2NhbGwKICBqc19tYXRfZmluYWxpemVyCiAganNfbWF0X2l0ZXJhdG9yX25ldwogIGpzX21hdF9pdGVyYXRvcl9kdW1wCiAganNfbWF0X2l0ZXJhdG9yX25leHQKICBqc19tYXRfaXRlcmF0b3JfZmluYWxpemVyCiAganNfbWF0X2l0ZXJhdG9yX2R1cApKU19DR0VUU0VUX01BR0lDX0RFRgpKU19DR0VUU0VUX01BR0lDX0RFRgpKU19DR0VUU0VUX01BR0lDX0RFRgpKU19DR0VUU0VUX01BR0lDX0RFRgpKU19DR0VUU0VUX01BR0lDX0RFRgpKU19DR0VUU0VUX01BR0lDX0RFRgpKU19DR0VUU0VUX01BR0lDX0RFRgpKU19DR0VUU0VUX01BR0lDX0RFRgpKU19DR0VUU0VUX01BR0lDX0RFRgpKU19DR0VUU0VUX01BR0lDX0RFRgpKU19DR0VUU0VUX01BR0lDX0RFRgpKU19DR0VUU0VUX01BR0lDX0RFRgpKU19DR0VUU0VUX01BR0lDX0RFRgpKU19DR0VUU0VUX0RFRgpKU19DR0VUU0VUX0RFRgpKU19DRlVOQ19NQUdJQ19ERUYKSlNfQ0ZVTkNfTUFHSUNfREVGCkpTX0NGVU5DX01BR0lDX0RFRgpKU19DRlVOQ19NQUdJQ19ERUYKSlNfQ0ZVTkNfTUFHSUNfREVGCkpTX0NGVU5DX01BR0lDX0RFRgpKU19DRlVOQ19NQUdJQ19ERUYKSlNfQ0ZVTkNfTUFHSUNfREVGCkpTX0NGVU5DX01BR0lDX0RFRgpKU19DRlVOQ19NQUdJQ19ERUYKSlNfQ0ZVTkNfTUFHSUNfREVGCkpTX0NGVU5DX01BR0lDX0RFRgpKU19DRlVOQ19NQUdJQ19ERUYKSlNfQ0ZVTkNfTUFHSUNfREVGCkpTX0NGVU5DX01BR0lDX0RFRgpKU19DRlVOQ19NQUdJQ19ERUYKSlNfQ0ZVTkNfTUFHSUNfREVGCkpTX0NGVU5DX01BR0lDX0RFRgpKU19DRlVOQ19NQUdJQ19ERUYKSlNfQ0ZVTkNfTUFHSUNfREVGCkpTX0NGVU5DX0RFRgpKU19DRlVOQ19ERUYKSlNfQ0ZVTkNfREVGCkpTX0NGVU5DX0RFRgpKU19DRlVOQ19ERUYKSlNfQ0ZVTkNfREVGCkpTX0NGVU5DX0RFRgpKU19DRlVOQ19ERUYKSlNfQ0ZVTkNfTUFHSUNfREVGCkpTX0NGVU5DX01BR0lDX0RFRgpKU19DRlVOQ19NQUdJQ19ERUYKSlNfQUxJQVNfREVGCkpTX0FMSUFTX0RFRgpKU19QUk9QX1NUUklOR19ERUYKSlNfSVRFUkFUT1JfTkVYVF9ERUYKSlNfUFJPUF9TVFJJTkdfREVGCkpTX0NGVU5DX0RFRgpKU19DRlVOQ19ERUYKSlNfQ0ZVTkNfTUFHSUNfREVGCkpTX0NGVU5DX01BR0lDX0RFRgpKU19DRlVOQ19NQUdJQ19ERUYKSlNfQ0ZVTkNfTUFHSUNfREVGCkpTX0NGVU5DX01BR0lDX0RFRgpKU19DRlVOQ19NQUdJQ19ERUYKSlNfQ0ZVTkNfTUFHSUNfREVGCkpTX0NGVU5DX01BR0lDX0RFRgpKU19DRlVOQ19NQUdJQ19ERUYKSlNfUFJPUF9JTlQzMl9ERUYKQ1ZfTUFLRVRZUEUKICBqc19tYXRfaW5pdAogIGpzX21hdF9leHBvcnQKSlNfSU5JVF9NT0RVTEUKSlNfSU5JVF9NT0RVTEUKSlNfSU5JVF9NT0RVTEUAAAAAAAAAAJQHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACUBwAASlNNYXRJdGVyYXRvckRhdGEKICBqc19tYXRfZnJlZV9mdW5jCiAganNfbWF0X3NpemVzCiAganNfbWF0X2RpbWVuc2lvbnMKICBqc19tYXRfdHJhY2sKICBqc19tYXRfbmV3CiAganNfbWF0X3dyYXAKICBqc19tYXRfZGF0YQogIGpzX21hdF9wcmludF9kYXRhCiAganNfbWF0X2R1bXAKICBqc19tYXRfcGFyYW1zCiAganNfbWF0X2N0b3IKICBqc19tYXRfZnVuY3MKICBqc19tYXRfZXhwcgogIGpzX21hdF9pbml0CiAganNfbWF0X2dldAogIGpzX21hdF9nZXQKICBqc19tYXRfZ2V0X3doCiAganNfbWF0X2F0CiAganNfbWF0X3NldAogIGpzX21hdF9zZXRfdG8KICBqc19tYXRfZ2V0X3Byb3BzCiAganNfbWF0X3Rvc3RyaW5nCiAganNfbWF0X2luc3BlY3QKICBqc19tYXRfZ2V0cm90YXRpb25tYXRyaXgyZAogIGpzX21hdF9jb252ZXJ0X3RvCiAganNfbWF0X2NvcHlfdG8KICBqc19tYXRfcmVzaGFwZQogIGpzX21hdF9nZXR1bWF0CiAganNfbWF0X2NsYXNzX2Z1bmMKICBqc19tYXRfZmlsbAogIGpzX21hdF9jbGFzc19jcmVhdGUKICBqc19tYXRfYnVmZmVyCiAganNfbWF0X2FycmF5CiAganNfbWF0X2NhbGwKICBqc19tYXRfZmluYWxpemVyCiAganNfbWF0X2l0ZXJhdG9yX25ldwogIGpzX21hdF9pdGVyYXRvcl9kdW1wCiAganNfbWF0X2l0ZXJhdG9yX25leHQKICBqc19tYXRfaXRlcmF0b3JfZmluYWxpemVyCiAganNfbWF0X2l0ZXJhdG9yX2R1cApKU19DR0VUU0VUX01BR0lDX0RFRgpKU19DR0VUU0VUX01BR0lDX0RFRgpKU19DR0VUU0VUX01BR0lDX0RFRgpKU19DR0VUU0VUX01BR0lDX0RFRgpKU19DR0VUU0VUX01BR0lDX0RFRgpKU19DR0VUU0VUX01BR0lDX0RFRgpKU19DR0VUU0VUX01BR0lDX0RFRgpKU19DR0VUU0VUX01BR0lDX0RFRgpKU19DR0VUU0VUX01BR0lDX0RFRgpKU19DR0VUU0VUX01BR0lDX0RFRgpKU19DR0VUU0VUX01BR0lDX0RFRgpKU19DR0VUU0VUX01BR0lDX0RFRgpKU19DR0VUU0VUX01BR0lDX0RFRgpKU19DR0VUU0VUX0RFRgpKU19DR0VUU0VUX0RFRgpKU19DRlVOQ19NQUdJQ19ERUYKSlNfQ0ZVTkNfTUFHSUNfREVGCkpTX0NGVU5DX01BR0lDX0RFRgpKU19DRlVOQ19NQUdJQ19ERUYKSlNfQ0ZVTkNfTUFHSUNfREVGCkpTX0NGVU5DX01BR0lDX0RFRgpKU19DRlVOQ19NQUdJQ19ERUYKSlNfQ0ZVTkNfTUFHSUNfREVGCkpTX0NGVU5DX01BR0lDX0RFRgpKU19DRlVOQ19NQUdJQ19ERUYKSlNfQ0ZVTkNfTUFHSUNfREVGCkpTX0NGVU5DX01BR0lDX0RFRgpKU19DRlVOQ19NQUdJQ19ERUYKSlNfQ0ZVTkNfTUFHSUNfREVGCkpTX0NGVU5DX01BR0lDX0RFRgpKU19DRlVOQ19NQUdJQ19ERUYKSlNfQ0ZVTkNfTUFHSUNfREVGCkpTX0NGVU5DX01BR0lDX0RFRgpKU19DRlVOQ19NQUdJQ19ERUYKSlNfQ0ZVTkNfTUFHSUNfREVGCkpTX0NGVU5DX0RFRgpKU19DRlVOQ19ERUYKSlNfQ0ZVTkNfREVGCkpTX0NGVU5DX0RFRgpKU19DRlVOQ19ERUYKSlNfQ0ZVTkNfREVGCkpTX0NGVU5DX0RFRgpKU19DRlVOQ19ERUYKSlNfQ0ZVTkNfTUFHSUNfREVGCkpTX0NGVU5DX01BR0lDX0RFRgpKU19DRlVOQ19NQUdJQ19ERUYKSlNfQUxJQVNfREVGCkpTX0FMSUFTX0RFRgpKU19QUk9QX1NUUklOR19ERUYKSlNfSVRFUkFUT1JfTkVYVF9ERUYKSlNfUFJPUF9TVFJJTkdfREVGCkpTX0NGVU5DX0RFRgpKU19DRlVOQ19ERUYKSlNfQ0ZVTkNfTUFHSUNfREVGCkpTX0NGVU5DX01BR0lDX0RFRgpKU19DRlVOQ19NQUdJQ19ERUYKSlNfQ0ZVTkNfTUFHSUNfREVGCkpTX0NGVU5DX01BR0lDX0RFRgpKU19DRlVOQ19NQUdJQ19ERUYKSlNfQ0ZVTkNfTUFHSUNfREVGCkpTX0NGVU5DX01BR0lDX0RFRgpKU19DRlVOQ19NQUdJQ19ERUYKSlNfUFJPUF9JTlQzMl9ERUYKQ1ZfTUFLRVRZUEUKICBqc19tYXRfaW5pdAogIGpzX21hdF9leHBvcnQKSlNfSU5JVF9NT0RVTEUKSlNfSU5JVF9NT0RVTEUKSlNfSU5JVF9NT0RVTEUAAAAAAAAAAJQHAAAAAAAAAAAAAA",
					"AQAAAAAAAAAAAAAA"
				],
				[
					760,
					1,
					"outline_refresh",
					{
						"path": "/home/roman/Projects/qjs-opencv/js_slice_iterator.cpp",
						"symkeys":
						[
							[
								260,
								284
							],
							[
								784,
								805
							],
							[
								1410,
								1432
							],
							[
								2124,
								2153
							],
							[
								3366,
								3387
							],
							[
								3511,
								3538
							],
							[
								4093,
								4113
							],
							[
								4157,
								4169
							],
							[
								4222,
								4240
							],
							[
								4313,
								4335
							],
							[
								5550,
								5574
							],
							[
								5705,
								5719
							],
							[
								5757,
								5771
							],
							[
								5823,
								5837
							],
							[
								6055,
								6082
							]
						],
						"symlist":
						[
							"js_slice_iterator_create",
							"js_slice_iterator_new",
							"js_slice_iterator_next",
							"js_slice_iterator_constructor",
							"js_slice_iterator_dup",
							"js_slice_iterator_finalizer",
							"JS_ITERATOR_NEXT_DEF",
							"JS_CFUNC_DEF",
							"JS_PROP_STRING_DEF",
							"js_slice_iterator_init",
							"js_slice_iterator_export",
							"JS_INIT_MODULE",
							"JS_INIT_MODULE",
							"JS_INIT_MODULE",
							"js_slice_iterator_to_string"
						]
					},
					"AgAAAAAAAAAAAAAAAAAAAAAAAACUBwAASlNNYXRJdGVyYXRvckRhdGEKICBqc19tYXRfZnJlZV9mdW5jCiAganNfbWF0X3NpemVzCiAganNfbWF0X2RpbWVuc2lvbnMKICBqc19tYXRfdHJhY2sKICBqc19tYXRfbmV3CiAganNfbWF0X3dyYXAKICBqc19tYXRfZGF0YQogIGpzX21hdF9wcmludF9kYXRhCiAganNfbWF0X2R1bXAKICBqc19tYXRfcGFyYW1zCiAganNfbWF0X2N0b3IKICBqc19tYXRfZnVuY3MKICBqc19tYXRfZXhwcgogIGpzX21hdF9pbml0CiAganNfbWF0X2dldAogIGpzX21hdF9nZXQKICBqc19tYXRfZ2V0X3doCiAganNfbWF0X2F0CiAganNfbWF0X3NldAogIGpzX21hdF9zZXRfdG8KICBqc19tYXRfZ2V0X3Byb3BzCiAganNfbWF0X3Rvc3RyaW5nCiAganNfbWF0X2luc3BlY3QKICBqc19tYXRfZ2V0cm90YXRpb25tYXRyaXgyZAogIGpzX21hdF9jb252ZXJ0X3RvCiAganNfbWF0X2NvcHlfdG8KICBqc19tYXRfcmVzaGFwZQogIGpzX21hdF9nZXR1bWF0CiAganNfbWF0X2NsYXNzX2Z1bmMKICBqc19tYXRfZmlsbAogIGpzX21hdF9jbGFzc19jcmVhdGUKICBqc19tYXRfYnVmZmVyCiAganNfbWF0X2FycmF5CiAganNfbWF0X2NhbGwKICBqc19tYXRfZmluYWxpemVyCiAganNfbWF0X2l0ZXJhdG9yX25ldwogIGpzX21hdF9pdGVyYXRvcl9kdW1wCiAganNfbWF0X2l0ZXJhdG9yX25leHQKICBqc19tYXRfaXRlcmF0b3JfZmluYWxpemVyCiAganNfbWF0X2l0ZXJhdG9yX2R1cApKU19DR0VUU0VUX01BR0lDX0RFRgpKU19DR0VUU0VUX01BR0lDX0RFRgpKU19DR0VUU0VUX01BR0lDX0RFRgpKU19DR0VUU0VUX01BR0lDX0RFRgpKU19DR0VUU0VUX01BR0lDX0RFRgpKU19DR0VUU0VUX01BR0lDX0RFRgpKU19DR0VUU0VUX01BR0lDX0RFRgpKU19DR0VUU0VUX01BR0lDX0RFRgpKU19DR0VUU0VUX01BR0lDX0RFRgpKU19DR0VUU0VUX01BR0lDX0RFRgpKU19DR0VUU0VUX01BR0lDX0RFRgpKU19DR0VUU0VUX01BR0lDX0RFRgpKU19DR0VUU0VUX01BR0lDX0RFRgpKU19DR0VUU0VUX0RFRgpKU19DR0VUU0VUX0RFRgpKU19DRlVOQ19NQUdJQ19ERUYKSlNfQ0ZVTkNfTUFHSUNfREVGCkpTX0NGVU5DX01BR0lDX0RFRgpKU19DRlVOQ19NQUdJQ19ERUYKSlNfQ0ZVTkNfTUFHSUNfREVGCkpTX0NGVU5DX01BR0lDX0RFRgpKU19DRlVOQ19NQUdJQ19ERUYKSlNfQ0ZVTkNfTUFHSUNfREVGCkpTX0NGVU5DX01BR0lDX0RFRgpKU19DRlVOQ19NQUdJQ19ERUYKSlNfQ0ZVTkNfTUFHSUNfREVGCkpTX0NGVU5DX01BR0lDX0RFRgpKU19DRlVOQ19NQUdJQ19ERUYKSlNfQ0ZVTkNfTUFHSUNfREVGCkpTX0NGVU5DX01BR0lDX0RFRgpKU19DRlVOQ19NQUdJQ19ERUYKSlNfQ0ZVTkNfTUFHSUNfREVGCkpTX0NGVU5DX01BR0lDX0RFRgpKU19DRlVOQ19NQUdJQ19ERUYKSlNfQ0ZVTkNfTUFHSUNfREVGCkpTX0NGVU5DX0RFRgpKU19DRlVOQ19ERUYKSlNfQ0ZVTkNfREVGCkpTX0NGVU5DX0RFRgpKU19DRlVOQ19ERUYKSlNfQ0ZVTkNfREVGCkpTX0NGVU5DX0RFRgpKU19DRlVOQ19ERUYKSlNfQ0ZVTkNfTUFHSUNfREVGCkpTX0NGVU5DX01BR0lDX0RFRgpKU19DRlVOQ19NQUdJQ19ERUYKSlNfQUxJQVNfREVGCkpTX0FMSUFTX0RFRgpKU19QUk9QX1NUUklOR19ERUYKSlNfSVRFUkFUT1JfTkVYVF9ERUYKSlNfUFJPUF9TVFJJTkdfREVGCkpTX0NGVU5DX0RFRgpKU19DRlVOQ19ERUYKSlNfQ0ZVTkNfTUFHSUNfREVGCkpTX0NGVU5DX01BR0lDX0RFRgpKU19DRlVOQ19NQUdJQ19ERUYKSlNfQ0ZVTkNfTUFHSUNfREVGCkpTX0NGVU5DX01BR0lDX0RFRgpKU19DRlVOQ19NQUdJQ19ERUYKSlNfQ0ZVTkNfTUFHSUNfREVGCkpTX0NGVU5DX01BR0lDX0RFRgpKU19DRlVOQ19NQUdJQ19ERUYKSlNfUFJPUF9JTlQzMl9ERUYKQ1ZfTUFLRVRZUEUKICBqc19tYXRfaW5pdAogIGpzX21hdF9leHBvcnQKSlNfSU5JVF9NT0RVTEUKSlNfSU5JVF9NT0RVTEUKSlNfSU5JVF9NT0RVTEUAAAAAAAAAAFUBAAAAAAAAAAAAAA",
					"AQAAAAAAAAAAAAAA"
				],
				[
					761,
					1,
					"outline_refresh",
					{
						"path": "/home/roman/Projects/qjs-opencv/util.cpp",
						"symkeys":
						[
							[
								132,
								139
							],
							[
								310,
								317
							],
							[
								423,
								436
							]
						],
						"symlist":
						[
							"str_end",
							"str_end",
							"get_heap_base"
						]
					},
					"AgAAAAAAAAAAAAAAAAAAAAAAAABVAQAAICBqc19zbGljZV9pdGVyYXRvcl9jcmVhdGUKICBqc19zbGljZV9pdGVyYXRvcl9uZXcKICBqc19zbGljZV9pdGVyYXRvcl9uZXh0CiAganNfc2xpY2VfaXRlcmF0b3JfY29uc3RydWN0b3IKICBqc19zbGljZV9pdGVyYXRvcl9kdXAKICBqc19zbGljZV9pdGVyYXRvcl9maW5hbGl6ZXIKSlNfSVRFUkFUT1JfTkVYVF9ERUYKSlNfQ0ZVTkNfREVGCkpTX1BST1BfU1RSSU5HX0RFRgogIGpzX3NsaWNlX2l0ZXJhdG9yX2luaXQKICBqc19zbGljZV9pdGVyYXRvcl9leHBvcnQKSlNfSU5JVF9NT0RVTEUKSlNfSU5JVF9NT0RVTEUKSlNfSU5JVF9NT0RVTEUKICBqc19zbGljZV9pdGVyYXRvcl90b19zdHJpbmcAAAAAAAAAACMAAAAAAAAAAAAAAA",
					"AQAAAAAAAAAAAAAA"
				],
				[
					762,
					1,
					"outline_refresh",
					{
						"path": "/home/roman/Projects/qjs-opencv/util.hpp",
						"symkeys":
						[
							[
								25,
								33
							],
							[
								215,
								222
							],
							[
								223,
								233
							],
							[
								253,
								259
							],
							[
								274,
								281
							],
							[
								282,
								295
							],
							[
								329,
								335
							],
							[
								336,
								349
							],
							[
								390,
								401
							],
							[
								421,
								430
							],
							[
								450,
								461
							],
							[
								481,
								493
							],
							[
								513,
								523
							],
							[
								543,
								556
							],
							[
								576,
								586
							],
							[
								606,
								617
							],
							[
								638,
								648
							],
							[
								670,
								684
							],
							[
								706,
								722
							],
							[
								744,
								761
							],
							[
								783,
								798
							],
							[
								820,
								838
							],
							[
								860,
								875
							],
							[
								897,
								913
							],
							[
								936,
								946
							],
							[
								962,
								969
							],
							[
								1013,
								1020
							],
							[
								1086,
								1095
							],
							[
								1136,
								1149
							],
							[
								1259,
								1268
							],
							[
								1393,
								1397
							],
							[
								1680,
								1693
							],
							[
								1719,
								1722
							],
							[
								1753,
								1758
							],
							[
								1806,
								1815
							],
							[
								1861,
								1870
							],
							[
								2282,
								2286
							],
							[
								2557,
								2570
							],
							[
								2590,
								2605
							],
							[
								2643,
								2651
							],
							[
								2731,
								2744
							],
							[
								2798,
								2814
							],
							[
								2874,
								2890
							],
							[
								3034,
								3048
							],
							[
								3238,
								3252
							],
							[
								3378,
								3385
							],
							[
								3476,
								3483
							],
							[
								3630,
								3640
							],
							[
								3826,
								3836
							],
							[
								3984,
								3990
							],
							[
								4105,
								4111
							],
							[
								4295,
								4307
							],
							[
								4402,
								4411
							],
							[
								4503,
								4515
							],
							[
								4611,
								4621
							],
							[
								4715,
								4727
							],
							[
								4828,
								4833
							],
							[
								4914,
								4917
							],
							[
								5005,
								5010
							],
							[
								5103,
								5106
							],
							[
								5593,
								5598
							],
							[
								5673,
								5676
							],
							[
								5764,
								5769
							],
							[
								5856,
								5859
							],
							[
								5936,
								5941
							],
							[
								6012,
								6015
							],
							[
								6126,
								6131
							],
							[
								6220,
								6223
							],
							[
								6416,
								6427
							],
							[
								6561,
								6575
							],
							[
								6713,
								6718
							],
							[
								6885,
								6890
							],
							[
								7067,
								7072
							]
						],
						"symlist":
						[
							"UTIL_HPP",
							"VISIBLE",
							"__declspec",
							"HIDDEN",
							"VISIBLE",
							"__attribute__",
							"HIDDEN",
							"__attribute__",
							"COLOR_BLACK",
							"COLOR_RED",
							"COLOR_GREEN",
							"COLOR_YELLOW",
							"COLOR_BLUE",
							"COLOR_MAGENTA",
							"COLOR_CYAN",
							"COLOR_WHITE",
							"COLOR_GRAY",
							"COLOR_LIGHTRED",
							"COLOR_LIGHTGREEN",
							"COLOR_LIGHTYELLOW",
							"COLOR_LIGHTBLUE",
							"COLOR_LIGHTMAGENTA",
							"COLOR_LIGHTCYAN",
							"COLOR_LIGHTWHITE",
							"COLOR_NONE",
							"str_end",
							"str_end",
							"to_string",
							"make_filename",
							"get_mtime",
							"stat",
							"iterator_type",
							"end",
							"begin",
							"to_string",
							"to_string",
							"join",
							"get_heap_base",
							"JSMatDimensions",
							" cv::Size",
							"mattype_depth",
							"mattype_channels",
							"mattype_floating",
							"mattype_signed",
							"mat_dimensions",
							"mat_ptr",
							"mat_ptr",
							"mat_offset",
							"mat_offset",
							"mat_at",
							"mat_at",
							"mat_bytesize",
							"mat_depth",
							"mat_channels",
							"mat_signed",
							"mat_floating",
							"begin",
							"end",
							"begin",
							"end",
							"begin",
							"end",
							"begin",
							"end",
							"begin",
							"end",
							"begin",
							"end",
							"sized_range",
							"argument_range",
							"range",
							"range",
							"range"
						]
					},
					"AgAAAAAAAAAAAAAAAAAAAAAAAAAjAAAAICBzdHJfZW5kCiAgc3RyX2VuZAogIGdldF9oZWFwX2Jhc2UAAAAAAAAAAFEDAAAAAAAAAAAAAA",
					"AQAAAAAAAAAAAAAA"
				],
				[
					765,
					1,
					"outline_refresh",
					{
						"path": "/home/roman/Projects/qjs-opencv/jsbindings.hpp",
						"symkeys":
						[
							[
								31,
								45
							],
							[
								459,
								470
							],
							[
								488,
								497
							],
							[
								516,
								526
							],
							[
								547,
								558
							],
							[
								1014,
								1032
							],
							[
								1056,
								1071
							],
							[
								1100,
								1111
							],
							[
								1138,
								1150
							],
							[
								1177,
								1190
							],
							[
								1222,
								1240
							],
							[
								1513,
								1525
							],
							[
								1555,
								1565
							],
							[
								1591,
								1602
							],
							[
								1629,
								1640
							],
							[
								1928,
								1935
							],
							[
								1936,
								1946
							],
							[
								1966,
								1972
							],
							[
								1987,
								1994
							],
							[
								1995,
								2008
							],
							[
								2042,
								2048
							],
							[
								2049,
								2062
							],
							[
								2103,
								2128
							],
							[
								2892,
								2909
							],
							[
								2947,
								2959
							],
							[
								3004,
								3015
							],
							[
								3091,
								3105
							],
							[
								3161,
								3181
							],
							[
								3221,
								3240
							],
							[
								3280,
								3299
							],
							[
								3339,
								3357
							],
							[
								3397,
								3419
							],
							[
								3459,
								3478
							],
							[
								3518,
								3537
							],
							[
								3577,
								3594
							],
							[
								3634,
								3662
							],
							[
								3694,
								3715
							],
							[
								3760,
								3781
							],
							[
								4065,
								4076
							],
							[
								4470,
								4483
							],
							[
								4538,
								4552
							],
							[
								4610,
								4628
							],
							[
								4686,
								4701
							],
							[
								4765,
								4781
							],
							[
								4838,
								4852
							],
							[
								4910,
								4924
							],
							[
								4964,
								4984
							],
							[
								5415,
								5422
							],
							[
								5464,
								5488
							],
							[
								5558,
								5565
							],
							[
								5744,
								5752
							],
							[
								5858,
								5864
							],
							[
								5994,
								6008
							],
							[
								6171,
								6194
							],
							[
								6307,
								6331
							],
							[
								6446,
								6469
							],
							[
								6600,
								6613
							],
							[
								6702,
								6724
							],
							[
								6816,
								6839
							],
							[
								6934,
								6956
							],
							[
								7027,
								7040
							],
							[
								7108,
								7121
							],
							[
								7205,
								7218
							],
							[
								7538,
								7550
							],
							[
								8209,
								8215
							],
							[
								8306,
								8314
							],
							[
								8449,
								8469
							],
							[
								8706,
								8726
							],
							[
								8814,
								8824
							],
							[
								9115,
								9134
							],
							[
								9417,
								9436
							],
							[
								9934,
								9947
							],
							[
								10174,
								10188
							],
							[
								10271,
								10294
							],
							[
								10549,
								10562
							],
							[
								10787,
								10805
							],
							[
								10995,
								11016
							],
							[
								11296,
								11316
							],
							[
								11541,
								11555
							],
							[
								11747,
								11765
							],
							[
								12227,
								12241
							],
							[
								12621,
								12637
							],
							[
								12824,
								12840
							],
							[
								12876,
								12892
							],
							[
								12970,
								12987
							],
							[
								13281,
								13301
							],
							[
								13477,
								13493
							],
							[
								14055,
								14068
							],
							[
								14377,
								14400
							],
							[
								14847,
								14872
							],
							[
								15153,
								15169
							],
							[
								16148,
								16158
							],
							[
								16172,
								16188
							],
							[
								16225,
								16240
							],
							[
								16441,
								16457
							],
							[
								16884,
								16885
							],
							[
								17014,
								17025
							],
							[
								17136,
								17147
							],
							[
								17261,
								17272
							],
							[
								17502,
								17503
							],
							[
								17636,
								17649
							],
							[
								17742,
								17755
							],
							[
								17838,
								17851
							],
							[
								17996,
								18009
							],
							[
								18129,
								18140
							],
							[
								18170,
								18179
							],
							[
								18285,
								18300
							],
							[
								18320,
								18325
							],
							[
								18371,
								18387
							],
							[
								18441,
								18452
							],
							[
								18488,
								18497
							],
							[
								18512,
								18524
							],
							[
								18553,
								18565
							],
							[
								18593,
								18597
							],
							[
								18646,
								18654
							],
							[
								18776,
								18791
							],
							[
								18860,
								18876
							],
							[
								18930,
								18941
							],
							[
								18995,
								19007
							],
							[
								19036,
								19048
							],
							[
								19099,
								19108
							],
							[
								19177,
								19185
							],
							[
								19289,
								19303
							],
							[
								19465,
								19479
							],
							[
								19564,
								19574
							],
							[
								19665,
								19679
							]
						],
						"symlist":
						[
							"JSBINDINGS_HPP",
							"JSRectDataD",
							"JSMatData",
							"JSUMatData",
							"JSSizeDataD",
							"JSVideoCaptureData",
							"JSTickMeterData",
							"JSCLAHEData",
							"JSInputArray",
							"JSOutputArray",
							"JSInputOutputArray",
							"JSLineTraits",
							"array_type",
							"vector_type",
							"scalar_type",
							"VISIBLE",
							"__declspec",
							"HIDDEN",
							"VISIBLE",
							"__attribute__",
							"HIDDEN",
							"__attribute__",
							"JS_CGETSET_ENUMERABLE_DEF",
							"js_draw_functions",
							"js_draw_init",
							"js_line_new",
							"js_init_module",
							"js_init_module_point",
							"js_init_module_size",
							"js_init_module_rect",
							"js_init_module_mat",
							"js_init_module_contour",
							"js_init_module_line",
							"js_init_module_draw",
							"js_init_module_cv",
							"js_init_module_video_capture",
							"js_video_capture_init",
							"js_video_capture_wrap",
							"js_mat_wrap",
							"js_global_get",
							"js_is_iterable",
							"js_iterator_method",
							"js_iterator_new",
							"js_iterator_next",
							"js_symbol_atom",
							"js_symbol_ctor",
							"js_symbol_get_static",
							"countof",
							"js_vector_vec4i_to_array",
							"js_ctor",
							"js_proto",
							"js_new",
							"js_number_read",
							"js_number_read<int32_t>",
							"js_number_read<uint32_t>",
							"js_number_read<int64_t>",
							"js_number_new",
							"js_number_new<int32_t>",
							"js_number_new<uint32_t>",
							"js_number_new<int64_t>",
							"js_color_read",
							"js_color_read",
							"js_color_read",
							"js_color_new",
							"js_ref",
							"round_to",
							"js_arraybuffer_range",
							"js_arraybuffer_range",
							"value_type",
							"js_arraybuffer_from",
							"js_arraybuffer_from",
							"js_global_get",
							"js_symbol_ctor",
							"js_symbol_invoke_static",
							"js_symbol_for",
							"js_symbol_for_atom",
							"js_set_inspect_method",
							"js_symbol_get_static",
							"js_symbol_atom",
							"js_iterator_method",
							"js_is_iterable",
							"js_is_array_like",
							"ArrayBufferProps",
							" ArrayBufferProps",
							"js_is_arraybuffer",
							"js_arraybuffer_props",
							"js_function_name",
							"js_class_name",
							"js_typedarray_prototype",
							"js_typedarray_constructor",
							"js_is_typedarray",
							"JS_IsArray",
							"js_is_typedarray",
							"js_iterator_new",
							"js_iterator_next",
							"T",
							"js_value_to",
							"js_value_to",
							"js_value_to",
							"T",
							"js_value_from",
							"js_value_from",
							"js_value_from",
							"js_value_from",
							"js_iterable",
							" to_vector",
							" js_iterator_new",
							" clear",
							" js_iterator_next",
							" js_value_to",
							" push_back",
							" JS_FreeValue",
							" JS_FreeValue",
							" size",
							" to_array",
							" js_iterator_new",
							" js_iterator_next",
							" js_value_to",
							" JS_FreeValue",
							" JS_FreeValue",
							" to_scalar",
							" to_array",
							"js_iterable_to",
							"js_iterable_to",
							"array_type",
							"js_iterable_to"
						]
					},
					"AgAAAAAAAAAAAAAAAAAAAAAAAABRAwAAVVRJTF9IUFAKVklTSUJMRQogIF9fZGVjbHNwZWMKSElEREVOClZJU0lCTEUKICBfX2F0dHJpYnV0ZV9fCkhJRERFTgogIF9fYXR0cmlidXRlX18KQ09MT1JfQkxBQ0sKQ09MT1JfUkVECkNPTE9SX0dSRUVOCkNPTE9SX1lFTExPVwpDT0xPUl9CTFVFCkNPTE9SX01BR0VOVEEKQ09MT1JfQ1lBTgpDT0xPUl9XSElURQpDT0xPUl9HUkFZCkNPTE9SX0xJR0hUUkVECkNPTE9SX0xJR0hUR1JFRU4KQ09MT1JfTElHSFRZRUxMT1cKQ09MT1JfTElHSFRCTFVFCkNPTE9SX0xJR0hUTUFHRU5UQQpDT0xPUl9MSUdIVENZQU4KQ09MT1JfTElHSFRXSElURQpDT0xPUl9OT05FCiAgc3RyX2VuZAogIHN0cl9lbmQKICB0b19zdHJpbmcKICBtYWtlX2ZpbGVuYW1lCiAgZ2V0X210aW1lCiAgc3RhdAogIGl0ZXJhdG9yX3R5cGUKICBlbmQKICBiZWdpbgogIHRvX3N0cmluZwogIHRvX3N0cmluZwogIGpvaW4KICBnZXRfaGVhcF9iYXNlCkpTTWF0RGltZW5zaW9ucwoJY3Y6OlNpemUKICBtYXR0eXBlX2RlcHRoCiAgbWF0dHlwZV9jaGFubmVscwogIG1hdHR5cGVfZmxvYXRpbmcKICBtYXR0eXBlX3NpZ25lZAogIG1hdF9kaW1lbnNpb25zCiAgbWF0X3B0cgogIG1hdF9wdHIKICBtYXRfb2Zmc2V0CiAgbWF0X29mZnNldAogIG1hdF9hdAogIG1hdF9hdAogIG1hdF9ieXRlc2l6ZQogIG1hdF9kZXB0aAogIG1hdF9jaGFubmVscwogIG1hdF9zaWduZWQKICBtYXRfZmxvYXRpbmcKICBiZWdpbgogIGVuZAogIGJlZ2luCiAgZW5kCiAgYmVnaW4KICBlbmQKICBiZWdpbgogIGVuZAogIGJlZ2luCiAgZW5kCiAgYmVnaW4KICBlbmQKICBzaXplZF9yYW5nZQogIGFyZ3VtZW50X3JhbmdlCiAgcmFuZ2UKICByYW5nZQogIHJhbmdlAAAAAAAAAAAjCAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAFAMAAAAAAAAUAwAAAAAAAAAAAAAAAPC/"
				],
				[
					766,
					1,
					"outline_refresh",
					{
						"path": "/home/roman/Projects/qjs-opencv/js_mat.cpp",
						"symkeys":
						[
							[
								1280,
								1297
							],
							[
								1411,
								1427
							],
							[
								1634,
								1646
							],
							[
								1962,
								1979
							],
							[
								2322,
								2334
							],
							[
								2957,
								2967
							],
							[
								3546,
								3557
							],
							[
								4389,
								4400
							],
							[
								4822,
								4839
							],
							[
								5342,
								5353
							],
							[
								6385,
								6398
							],
							[
								6900,
								6911
							],
							[
								7123,
								7135
							],
							[
								9523,
								9534
							],
							[
								12790,
								12801
							],
							[
								13653,
								13663
							],
							[
								13871,
								13881
							],
							[
								15447,
								15460
							],
							[
								15669,
								15678
							],
							[
								16440,
								16450
							],
							[
								19907,
								19920
							],
							[
								21695,
								21711
							],
							[
								23100,
								23115
							],
							[
								24759,
								24773
							],
							[
								25378,
								25404
							],
							[
								25911,
								25928
							],
							[
								26449,
								26463
							],
							[
								27157,
								27171
							],
							[
								28152,
								28166
							],
							[
								28728,
								28745
							],
							[
								29635,
								29646
							],
							[
								30186,
								30205
							],
							[
								31097,
								31110
							],
							[
								31881,
								31893
							],
							[
								32575,
								32586
							],
							[
								33089,
								33105
							],
							[
								34570,
								34589
							],
							[
								35673,
								35693
							],
							[
								35890,
								35910
							],
							[
								38170,
								38195
							],
							[
								38373,
								38392
							],
							[
								38790,
								38810
							],
							[
								38906,
								38926
							],
							[
								39022,
								39042
							],
							[
								39146,
								39166
							],
							[
								39262,
								39282
							],
							[
								39380,
								39400
							],
							[
								39498,
								39518
							],
							[
								39616,
								39636
							],
							[
								39732,
								39752
							],
							[
								39860,
								39880
							],
							[
								39986,
								40006
							],
							[
								40102,
								40122
							],
							[
								40226,
								40246
							],
							[
								40352,
								40366
							],
							[
								40450,
								40464
							],
							[
								40546,
								40564
							],
							[
								40653,
								40671
							],
							[
								40760,
								40778
							],
							[
								40878,
								40896
							],
							[
								40996,
								41014
							],
							[
								41107,
								41125
							],
							[
								41214,
								41232
							],
							[
								41329,
								41347
							],
							[
								41436,
								41454
							],
							[
								41547,
								41565
							],
							[
								41658,
								41676
							],
							[
								41771,
								41789
							],
							[
								41882,
								41900
							],
							[
								42002,
								42020
							],
							[
								42110,
								42128
							],
							[
								42218,
								42236
							],
							[
								42324,
								42342
							],
							[
								42432,
								42450
							],
							[
								42541,
								42559
							],
							[
								42639,
								42657
							],
							[
								42737,
								42749
							],
							[
								42834,
								42846
							],
							[
								42919,
								42931
							],
							[
								43006,
								43018
							],
							[
								43098,
								43110
							],
							[
								43198,
								43210
							],
							[
								43292,
								43304
							],
							[
								43387,
								43399
							],
							[
								43482,
								43500
							],
							[
								43604,
								43622
							],
							[
								43730,
								43748
							],
							[
								43858,
								43870
							],
							[
								43954,
								43966
							],
							[
								44056,
								44074
							],
							[
								44198,
								44218
							],
							[
								44260,
								44278
							],
							[
								44345,
								44357
							],
							[
								44466,
								44478
							],
							[
								44538,
								44556
							],
							[
								44594,
								44612
							],
							[
								44650,
								44668
							],
							[
								44706,
								44724
							],
							[
								44762,
								44780
							],
							[
								44818,
								44836
							],
							[
								44873,
								44891
							],
							[
								44929,
								44947
							],
							[
								44989,
								45007
							],
							[
								45048,
								45065
							],
							[
								45075,
								45086
							],
							[
								45127,
								45138
							],
							[
								46565,
								46578
							],
							[
								46688,
								46702
							],
							[
								46740,
								46754
							],
							[
								46806,
								46820
							]
						],
						"symlist":
						[
							"JSMatIteratorData",
							"js_mat_free_func",
							"js_mat_sizes",
							"js_mat_dimensions",
							"js_mat_track",
							"js_mat_new",
							"js_mat_wrap",
							"js_mat_data",
							"js_mat_print_data",
							"js_mat_dump",
							"js_mat_params",
							"js_mat_ctor",
							"js_mat_funcs",
							"js_mat_expr",
							"js_mat_init",
							"js_mat_get",
							"js_mat_get",
							"js_mat_get_wh",
							"js_mat_at",
							"js_mat_set",
							"js_mat_set_to",
							"js_mat_get_props",
							"js_mat_tostring",
							"js_mat_inspect",
							"js_mat_getrotationmatrix2d",
							"js_mat_convert_to",
							"js_mat_copy_to",
							"js_mat_reshape",
							"js_mat_getumat",
							"js_mat_class_func",
							"js_mat_fill",
							"js_mat_class_create",
							"js_mat_buffer",
							"js_mat_array",
							"js_mat_call",
							"js_mat_finalizer",
							"js_mat_iterator_new",
							"js_mat_iterator_dump",
							"js_mat_iterator_next",
							"js_mat_iterator_finalizer",
							"js_mat_iterator_dup",
							"JS_CGETSET_MAGIC_DEF",
							"JS_CGETSET_MAGIC_DEF",
							"JS_CGETSET_MAGIC_DEF",
							"JS_CGETSET_MAGIC_DEF",
							"JS_CGETSET_MAGIC_DEF",
							"JS_CGETSET_MAGIC_DEF",
							"JS_CGETSET_MAGIC_DEF",
							"JS_CGETSET_MAGIC_DEF",
							"JS_CGETSET_MAGIC_DEF",
							"JS_CGETSET_MAGIC_DEF",
							"JS_CGETSET_MAGIC_DEF",
							"JS_CGETSET_MAGIC_DEF",
							"JS_CGETSET_MAGIC_DEF",
							"JS_CGETSET_DEF",
							"JS_CGETSET_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_DEF",
							"JS_CFUNC_DEF",
							"JS_CFUNC_DEF",
							"JS_CFUNC_DEF",
							"JS_CFUNC_DEF",
							"JS_CFUNC_DEF",
							"JS_CFUNC_DEF",
							"JS_CFUNC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_ALIAS_DEF",
							"JS_ALIAS_DEF",
							"JS_PROP_STRING_DEF",
							"JS_ITERATOR_NEXT_DEF",
							"JS_PROP_STRING_DEF",
							"JS_CFUNC_DEF",
							"JS_CFUNC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_CFUNC_MAGIC_DEF",
							"JS_PROP_INT32_DEF",
							"CV_MAKETYPE",
							"js_mat_init",
							"js_mat_export",
							"JS_INIT_MODULE",
							"JS_INIT_MODULE",
							"JS_INIT_MODULE"
						]
					},
					"AgAAAAAAAAAAAAAAAAAAAAAAAAAjCAAASlNCSU5ESU5HU19IUFAKSlNSZWN0RGF0YUQKSlNNYXREYXRhCkpTVU1hdERhdGEKSlNTaXplRGF0YUQKSlNWaWRlb0NhcHR1cmVEYXRhCkpTVGlja01ldGVyRGF0YQpKU0NMQUhFRGF0YQpKU0lucHV0QXJyYXkKSlNPdXRwdXRBcnJheQpKU0lucHV0T3V0cHV0QXJyYXkKSlNMaW5lVHJhaXRzCiAgYXJyYXlfdHlwZQogIHZlY3Rvcl90eXBlCiAgc2NhbGFyX3R5cGUKVklTSUJMRQogIF9fZGVjbHNwZWMKSElEREVOClZJU0lCTEUKICBfX2F0dHJpYnV0ZV9fCkhJRERFTgogIF9fYXR0cmlidXRlX18KSlNfQ0dFVFNFVF9FTlVNRVJBQkxFX0RFRgogIGpzX2RyYXdfcwogIGpzX2RyYXdfaW5pdAogIGpzX2xpbmVfbmV3CiAganNfaW5pdF9tb2R1bGUKICBqc19pbml0X21vZHVsZV9wb2ludAogIGpzX2luaXRfbW9kdWxlX3NpemUKICBqc19pbml0X21vZHVsZV9yZWN0CiAganNfaW5pdF9tb2R1bGVfbWF0CiAganNfaW5pdF9tb2R1bGVfY29udG91cgogIGpzX2luaXRfbW9kdWxlX2xpbmUKICBqc19pbml0X21vZHVsZV9kcmF3CiAganNfaW5pdF9tb2R1bGVfY3YKICBqc19pbml0X21vZHVsZV92aWRlb19jYXB0dXJlCiAganNfdmlkZW9fY2FwdHVyZV9pbml0CiAganNfdmlkZW9fY2FwdHVyZV93cmFwCiAganNfbWF0X3dyYXAKICBqc19nbG9iYWxfZ2V0CiAganNfaXNfaXRlcmFibGUKICBqc19pdGVyYXRvcl9tZXRob2QKICBqc19pdGVyYXRvcl9uZXcKICBqc19pdGVyYXRvcl9uZXh0CiAganNfc3ltYm9sX2F0b20KICBqc19zeW1ib2xfY3RvcgogIGpzX3N5bWJvbF9nZXRfc3RhdGljCiAgY291bnRvZgogIGpzX3ZlY3Rvcl92ZWM0aV90b19hcnJheQogIGpzX2N0b3IKICBqc19wcm90bwogIGpzX25ldwogIGpzX251bWJlcl9yZWFkCiAganNfbnVtYmVyX3JlYWQ8aW50MzJfdD4KICBqc19udW1iZXJfcmVhZDx1aW50MzJfdD4KICBqc19udW1iZXJfcmVhZDxpbnQ2NF90PgogIGpzX251bWJlcl9uZXcKICBqc19udW1iZXJfbmV3PGludDMyX3Q+CiAganNfbnVtYmVyX25ldzx1aW50MzJfdD4KICBqc19udW1iZXJfbmV3PGludDY0X3Q+CiAganNfY29sb3JfcmVhZAogIGpzX2NvbG9yX3JlYWQKICBqc19jb2xvcl9yZWFkCiAganNfY29sb3JfbmV3CiAganNfcmVmCiAgcm91bmRfdG8KICBqc19hcnJheWJ1ZmZlcl9yYW5nZQogIGpzX2FycmF5YnVmZmVyX3JhbmdlCiAgdmFsdWVfdHlwZQogIGpzX2FycmF5YnVmZmVyX2Zyb20KICBqc19hcnJheWJ1ZmZlcl9mcm9tCiAganNfZ2xvYmFsX2dldAogIGpzX3N5bWJvbF9jdG9yCiAganNfc3ltYm9sX2ludm9rZV9zdGF0aWMKICBqc19zeW1ib2xfZm9yCiAganNfc3ltYm9sX2Zvcl9hdG9tCiAganNfc2V0X2luc3BlY3RfbWV0aG9kCiAganNfc3ltYm9sX2dldF9zdGF0aWMKICBqc19zeW1ib2xfYXRvbQogIGpzX2l0ZXJhdG9yX21ldGhvZAogIGpzX2lzX2l0ZXJhYmxlCiAganNfaXNfYXJyYXlfbGlrZQpBcnJheUJ1ZmZlclByb3BzCkFycmF5QnVmZmVyUHJvcHMKICBqc19pc19hcnJheWJ1ZmZlcgogIGpzX2FycmF5YnVmZmVyX3Byb3BzCiAganNfX25hbWUKICBqc19jbGFzc19uYW1lCiAganNfdHlwZWRhcnJheV9wcm90b3R5cGUKICBqc190eXBlZGFycmF5X2NvbnN0cnVjdG9yCiAganNfaXNfdHlwZWRhcnJheQpKU19Jc0FycmF5CiAganNfaXNfdHlwZWRhcnJheQogIGpzX2l0ZXJhdG9yX25ldwogIGpzX2l0ZXJhdG9yX25leHQKICBqc192YWx1ZV90bwogIGpzX3ZhbHVlX3RvCiAganNfdmFsdWVfdG8KICBqc192YWx1ZV9mcm9tCiAganNfdmFsdWVfZnJvbQogIGpzX3ZhbHVlX2Zyb20KICBqc192YWx1ZV9mcm9tCiAganNfaXRlcmFibGUKCXRvX3ZlY3RvcgoJanNfaXRlcmF0b3JfbmV3CgljbGVhcgoJanNfaXRlcmF0b3JfbmV4dAoJanNfdmFsdWVfdG8KCXB1c2hfYmFjawpKU19GcmVlVmFsdWUKSlNfRnJlZVZhbHVlCglzaXplCgl0b19hcnJheQoJanNfaXRlcmF0b3JfbmV3Cglqc19pdGVyYXRvcl9uZXh0Cglqc192YWx1ZV90bwpKU19GcmVlVmFsdWUKSlNfRnJlZVZhbHVlCgl0b19zY2FsYXIKCXRvX2FycmF5CiAganNfaXRlcmFibGVfdG8KICBqc19pdGVyYWJsZV90bwogIGFycmF5X3R5cGUKICBqc19pdGVyYWJsZV90bwAAAAAAAAAAlAcAAAAAAAAAAAAA",
					"AQAAAAAAAAAAAAAA"
				]
			]
		},
		{
			"file": "CMakeLists.txt",
			"settings":
			{
				"buffer_size": 4185,
				"encoding": "UTF-8",
				"line_ending": "Unix"
			},
			"undo_stack":
			[
				[
					258,
					1,
					"insert",
					{
						"characters": "3"
					},
					"AQAAABMBAAAAAAAAFAEAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAEwEAAAAAAAATAQAAAAAAAAAAAAAAAAAA"
				],
				[
					259,
					1,
					"left_delete",
					null,
					"AQAAABMBAAAAAAAAEwEAAAAAAAABAAAAMw",
					"AQAAAAAAAAABAAAAFAEAAAAAAAAUAQAAAAAAAAAAAAAAAPC/"
				],
				[
					260,
					1,
					"insert",
					{
						"characters": "#"
					},
					"AQAAABMBAAAAAAAAFAEAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAEwEAAAAAAAATAQAAAAAAAAAAAAAAAPC/"
				],
				[
					263,
					1,
					"insert",
					{
						"characters": "#"
					},
					"AQAAAHMBAAAAAAAAdAEAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAcwEAAAAAAABzAQAAAAAAAAAAAAAAAPC/"
				],
				[
					278,
					1,
					"join_lines",
					null,
					"AwAAAHgIAAAAAAAAeAgAAAAAAAABAAAACngIAAAAAAAAeAgAAAAAAAAEAAAAICAgIHgIAAAAAAAAeQgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAYQgAAAAAAABhCAAAAAAAAAAAAAAAAPC/"
				],
				[
					279,
					1,
					"left_delete",
					null,
					"AQAAAHgIAAAAAAAAeAgAAAAAAAABAAAAIA",
					"AQAAAAAAAAABAAAAeQgAAAAAAAB5CAAAAAAAAAAAAAAAAPC/"
				],
				[
					280,
					1,
					"insert",
					{
						"characters": " "
					},
					"AQAAAHgIAAAAAAAAeQgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAeAgAAAAAAAB4CAAAAAAAAAAAAAAAAPC/"
				],
				[
					282,
					1,
					"insert",
					{
						"characters": "3"
					},
					"AQAAAGEIAAAAAAAAYggAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAYQgAAAAAAABhCAAAAAAAAAAAAAAAAAAA"
				],
				[
					283,
					1,
					"left_delete",
					null,
					"AQAAAGEIAAAAAAAAYQgAAAAAAAABAAAAMw",
					"AQAAAAAAAAABAAAAYggAAAAAAABiCAAAAAAAAAAAAAAAAPC/"
				],
				[
					284,
					1,
					"insert",
					{
						"characters": "#"
					},
					"AQAAAGEIAAAAAAAAYggAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAYQgAAAAAAABhCAAAAAAAAAAAAAAAAPC/"
				],
				[
					287,
					1,
					"insert",
					{
						"characters": "#"
					},
					"AQAAANQIAAAAAAAA1QgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA1AgAAAAAAADUCAAAAAAAAAAAAAAAAPC/"
				],
				[
					293,
					1,
					"join_lines",
					null,
					"AwAAAKEJAAAAAAAAoQkAAAAAAAABAAAACqEJAAAAAAAAoQkAAAAAAAAEAAAAICAgIKEJAAAAAAAAogkAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAegkAAAAAAAB6CQAAAAAAAAAAAAAAAPC/"
				],
				[
					296,
					1,
					"join_lines",
					null,
					"AwAAABMKAAAAAAAAEwoAAAAAAAABAAAAChMKAAAAAAAAEwoAAAAAAAAEAAAAICAgIBMKAAAAAAAAFAoAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA6AkAAAAAAADoCQAAAAAAAAAAAAAAAPC/"
				],
				[
					297,
					1,
					"left_delete",
					null,
					"AQAAABMKAAAAAAAAEwoAAAAAAAABAAAAIA",
					"AQAAAAAAAAABAAAAFAoAAAAAAAAUCgAAAAAAAAAAAAAAAPC/"
				],
				[
					298,
					1,
					"insert",
					{
						"characters": " "
					},
					"AQAAABMKAAAAAAAAFAoAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAEwoAAAAAAAATCgAAAAAAAAAAAAAAAPC/"
				],
				[
					300,
					1,
					"insert",
					{
						"characters": "#"
					},
					"AQAAAOgJAAAAAAAA6QkAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA6AkAAAAAAADoCQAAAAAAAAAAAAAAAAAA"
				],
				[
					303,
					1,
					"insert",
					{
						"characters": " #"
					},
					"AgAAAHoJAAAAAAAAewkAAAAAAAAAAAAAewkAAAAAAAB8CQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAegkAAAAAAAB6CQAAAAAAAAAAAAAAAPC/"
				],
				[
					304,
					2,
					"left_delete",
					null,
					"AgAAAHsJAAAAAAAAewkAAAAAAAABAAAAI3oJAAAAAAAAegkAAAAAAAABAAAAIA",
					"AQAAAAAAAAABAAAAfAkAAAAAAAB8CQAAAAAAAAAAAAAAAPC/"
				],
				[
					305,
					1,
					"insert",
					{
						"characters": "#"
					},
					"AQAAAHoJAAAAAAAAewkAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAegkAAAAAAAB6CQAAAAAAAAAAAAAAAPC/"
				],
				[
					319,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"AQAAAJgKAAAAAAAAmQoAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAmAoAAAAAAACYCgAAAAAAAAAAAAAAAPC/"
				],
				[
					320,
					1,
					"paste",
					null,
					"AQAAAJkKAAAAAAAA/QoAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAmQoAAAAAAACZCgAAAAAAAAAAAAAAAPC/"
				],
				[
					323,
					1,
					"insert",
					{
						"characters": " "
					},
					"AgAAAJkKAAAAAAAAmgoAAAAAAAAAAAAAmgoAAAAAAACaCgAAAAAAAAEAAAAj",
					"AQAAAAAAAAABAAAAmgoAAAAAAACZCgAAAAAAAAAAAAAAAPC/"
				],
				[
					327,
					1,
					"paste",
					null,
					"AgAAALUKAAAAAAAAwwoAAAAAAAAAAAAAwwoAAAAAAADDCgAAAAAAABQAAABDTUFLRV9JTlNUQUxMX1BSRUZJWA",
					"AQAAAAAAAAABAAAAtQoAAAAAAADJCgAAAAAAAAAAAAAAAPC/"
				],
				[
					328,
					5,
					"right_delete",
					null,
					"BQAAAMMKAAAAAAAAwwoAAAAAAAABAAAAfcMKAAAAAAAAwwoAAAAAAAABAAAAL8MKAAAAAAAAwwoAAAAAAAABAAAAbMMKAAAAAAAAwwoAAAAAAAABAAAAacMKAAAAAAAAwwoAAAAAAAABAAAAYg",
					"AQAAAAAAAAABAAAAwwoAAAAAAADDCgAAAAAAAAAAAAAAAPC/"
				],
				[
					329,
					1,
					"insert",
					{
						"characters": "}"
					},
					"AQAAAMMKAAAAAAAAxAoAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAwwoAAAAAAADDCgAAAAAAAAAAAAAAAPC/"
				],
				[
					332,
					1,
					"right_delete",
					null,
					"AQAAAJkKAAAAAAAAmQoAAAAAAAABAAAAIA",
					"AQAAAAAAAAABAAAAmQoAAAAAAACZCgAAAAAAAAAAAAAAAPC/"
				],
				[
					347,
					1,
					"insert",
					{
						"characters": " "
					},
					"AgAAABIBAAAAAAAAEwEAAAAAAAAAAAAAEwEAAAAAAAATAQAAAAAAAMUAAAAKI3NldChDTUFLRV9CVUlMRF9SUEFUSCAiJHtDTUFLRV9DVVJSRU5UX0JJTkFSWV9ESVJ9IiBDQUNIRSBQQVRIICJCdWlsZCB3aXRoIGxvY2FsIHJwYXRoIiBGT1JDRSkKI3NldChDTUFLRV9JTlNUQUxMX1JQQVRIICIke0NNQUtFX0lOU1RBTExfUFJFRklYfS9saWIiIENBQ0hFIFBBVEggIkJ1aWxkIHdpdGggaW5zdGFsbCBycGF0aCIgRk9SQ0UpCg",
					"AQAAAAAAAAABAAAAEgEAAAAAAADXAQAAAAAAAAAAAAAAAPC/"
				],
				[
					355,
					1,
					"left_delete",
					null,
					"AQAAAFIBAAAAAAAAUgEAAAAAAAAuAAAAIyBpbmNsdWRlKCR7cXVpY2tqc19zb3VyY2VzX3Jvb3R9L2RlZnMuY21ha2UpCg",
					"AQAAAAAAAAABAAAAUgEAAAAAAACAAQAAAAAAAAAAAAAAAPC/"
				],
				[
					360,
					1,
					"insert",
					{
						"characters": " "
					},
					"AgAAAG4HAAAAAAAAbwcAAAAAAAAAAAAAbwcAAAAAAABvBwAAAAAAAMYAAAAKI3NldChDTUFLRV9JTlNUQUxMX1JQQVRIICIke0NNQUtFX0lOU1RBTExfUlBBVEh9OyR7Q01BS0VfSU5TVEFMTF9QUkVGSVh9L2xpYjske0NNQUtFX0lOU1RBTExfUFJFRklYfS9saWIvcXVpY2tqcyIpCiNzZXQoQ01BS0VfQlVJTERfUlBBVEggIiR7Q01BS0VfQ1VSUkVOVF9CSU5BUllfRElSfTske0NNQUtFX0NVUlJFTlRfQklOQVJZX0RJUn0iKQo",
					"AQAAAAAAAAABAAAAbgcAAAAAAAA0CAAAAAAAAAAAAAAAAPC/"
				],
				[
					365,
					1,
					"left_delete",
					null,
					"AQAAAMIHAAAAAAAAwgcAAAAAAADmAAAACiNzZXQoQ01BS0VfQlVJTERfV0lUSF9JTlNUQUxMX1JQQVRIIFRSVUUgQ0FDSEUgQk9PTCAiQnVpbGQgaW5zdGFsbGFibGUgYmluYXJpZXMgd2l0aCAtV2wsLXJwYXRoPVBSRUZJWCIgRk9SQ0UpCiNzZXQoQ01BS0VfSU5TVEFMTF9SUEFUSF9VU0VfTElOS19QQVRIIEZBTFNFIENBQ0hFIEJPT0wgIkFkZCBkaXJzIGluIHJ1bnRpbWUgc2VhcmNoIHBhdGggdG8gdGhlIGluc3RhbGwgcnBhdGgiIEZPUkNFKQo",
					"AQAAAAAAAAABAAAAwgcAAAAAAACoCAAAAAAAAAAAAAAAAPC/"
				],
				[
					374,
					2,
					"left_delete",
					null,
					"AgAAAGsRAAAAAAAAaxEAAAAAAAD5AQAACiNbWwpjaGVja19jX2NvbXBpbGVyX2ZsYWcoIi1Xbm8tdW51c2VkLXZhbHVlIiBXQVJOX05PX1VOVVNFRF9WQUxVRSkKaWYoV0FSTl9OT19VTlVTRURfVkFMVUUpCiAgc2V0KENNQUtFX0NfRkxBR1MgIiR7Q01BS0VfQ19GTEFHU30gLVduby11bnVzZWQtdmFsdWUiICkKICBzZXQoQ01BS0VfQ1hYX0ZMQUdTICIke0NNQUtFX0NYWF9GTEFHU30gLVduby11bnVzZWQtdmFsdWUiICkKZW5kaWYoV0FSTl9OT19VTlVTRURfVkFMVUUpCgoKY2hlY2tfY19jb21waWxlcl9mbGFnKCItV25vLXVudXNlZC12YXJpYWJsZSIgV0FSTl9OT19VTlVTRURfVkFSSUFCTEUpCmlmKFdBUk5fTk9fVU5VU0VEX1ZBUklBQkxFKQogIHNldChDTUFLRV9DX0ZMQUdTICIke0NNQUtFX0NfRkxBR1N9IC1Xbm8tdW51c2VkLXZhcmlhYmxlIiApCiAgc2V0KENNQUtFX0NYWF9GTEFHUyAiJHtDTUFLRV9DWFhfRkxBR1N9IC1Xbm8tdW51c2VkLXZhcmlhYmxlIiApCmVuZGlmKFdBUk5fTk9fVU5VU0VEX1ZBUklBQkxFKQpdXWoRAAAAAAAAahEAAAAAAAABAAAACg",
					"AQAAAAAAAAABAAAAaxEAAAAAAABkEwAAAAAAAAAAAAAAAPC/"
				],
				[
					381,
					1,
					"left_delete",
					null,
					"AQAAAC4SAAAAAAAALhIAAAAAAABfAAAACiMgaWYoIiR7Q01BS0VfQlVJTERfVFlQRX0iIFNUUkVRVUFMICJEZWJ1ZyIpCgojIG9wdGlvbihVU0VfRUZFTkNFICJFbmFibGUgZWxlY3RyaWMgZmVuY2UiIE9GRik",
					"AQAAAAAAAAABAAAALhIAAAAAAACNEgAAAAAAAAAAAAAAAPC/"
				],
				[
					384,
					1,
					"left_delete",
					null,
					"AQAAAJwSAAAAAAAAnBIAAAAAAABBAAAAIyBsaXN0KEFQUEVORCBQTE9UQ1ZfREVGUyBERUJVRz0xKQoKIyBhZGRfZGVmaW5pdGlvbnMoLURERUJVRz0xKQo",
					"AQAAAAAAAAABAAAAnBIAAAAAAADdEgAAAAAAAAAAAAAAAAAA"
				],
				[
					390,
					1,
					"insert",
					{
						"characters": " "
					},
					"AgAAALgXAAAAAAAAuRcAAAAAAAAAAAAAuRcAAAAAAAC5FwAAAAAAADEAAAAKIyBlbmRpZigiJHtDTUFLRV9CVUlMRF9UWVBFfSIgU1RSRVFVQUwgIkRlYnVnIikK",
					"AQAAAAAAAAABAAAAuBcAAAAAAADpFwAAAAAAAAAAAAAAAPC/"
				],
				[
					398,
					3,
					"left_delete",
					null,
					"AwAAALkXAAAAAAAAuRcAAAAAAACZAAAACmlmKERFQlVHX09VVFBVVCkKICAjIGxpc3QoQVBQRU5EIFBMT1RDVl9ERUZTIERFQlVHX09VVFBVVD0xKQplbmRpZihERUJVR19PVVRQVVQpCmlmKERFQlVHX01BVCkKICAjIGxpc3QoQVBQRU5EIFBMT1RDVl9ERUZTIERFQlVHX01BVD0xKQplbmRpZihERUJVR19NQVQpuBcAAAAAAAC4FwAAAAAAAAEAAAAgtxcAAAAAAAC3FwAAAAAAAAEAAAAK",
					"AQAAAAAAAAABAAAAuRcAAAAAAABSGAAAAAAAAAAAAAAAAPC/"
				],
				[
					402,
					2,
					"left_delete",
					null,
					"AgAAAAsZAAAAAAAACxkAAAAAAAChAAAAIyBtZXNzYWdlKCJxdWlja2pzX0JJTkFSWV9ESVI6ICR7cXVpY2tqc19CSU5BUllfRElSfSIpCgojIGlmKEhBVkVfRUZFTkNFKSBpZihVU0VfRUZFTkNFKSBzZXQoRUxFQ1RSSUNGRU5DRV9MSUJSQVJZIGVmZW5jZSkgZW5kaWYoVVNFX0VGRU5DRSkKIyBlbmRpZihIQVZFX0VGRU5DRSkKGQAAAAAAAAoZAAAAAAAAAQAAAAo",
					"AQAAAAAAAAABAAAArBkAAAAAAAALGQAAAAAAAAAAAAAAAPC/"
				],
				[
					409,
					1,
					"left_delete",
					null,
					"AQAAACcaAAAAAAAAJxoAAAAAAABRAAAAIyBvcHRpb24oUVVJQ0tKU19NT0RVTEVTICJCdWlsZCAuc28gbW9kdWxlcyBmb3IgcXVpY2tqcyIgIiR7QlVJTERfU0hBUkVEX0xJQlN9IikK",
					"AQAAAAAAAAABAAAAJxoAAAAAAAB4GgAAAAAAAAAAAAAAAPC/"
				],
				[
					414,
					2,
					"left_delete",
					null,
					"AgAAAM0aAAAAAAAAzRoAAAAAAABTAAAAI1tbCmFkZF9leGVjdXRhYmxlKHRlc3QtZGxmY24gdGVzdC1kbGZjbi5jKQp0YXJnZXRfbGlua19saWJyYXJpZXModGVzdC1kbGZjbiBkbCkKXV3MGgAAAAAAAMwaAAAAAAAAAQAAAAo",
					"AQAAAAAAAAABAAAAIBsAAAAAAADNGgAAAAAAAAAAAAAAAPC/"
				],
				[
					415,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAAB2GwAAY21ha2VfbWluaW11bV9yZXF1aXJlZChWRVJTSU9OIDMuMCkKcHJvamVjdChxanMtb3BlbmN2KQoKc2V0KERJU0FCTEVfV0VSUk9SIFRSVUUgQ0FDSEUgQk9PTCAiRGlzYWJsZSAtV2Vycm9yIGZsYWciIEZPUkNFKQoKc2V0KENNQUtFX0JVSUxEX1RZUEUgIkRlYnVnIiBDQUNIRSBTVFJJTkcgImJ1aWxkIHR5cGUiKQoKc2V0X3Byb3BlcnR5KENBQ0hFIENNQUtFX0JVSUxEX1RZUEUgUFJPUEVSVFkgU1RSSU5HUyBEZWJ1ZyBSZWxlYXNlIE1pblNpemVSZWwgUmVsV2l0aERlYkluZm8pCiAKc2V0KHF1aWNranNfc291cmNlc19yb290ICR7Q01BS0VfQ1VSUkVOVF9TT1VSQ0VfRElSfS9xdWlja2pzKQoKaWYoTk9UIENNQUtFX0JVSUxEX1RZUEUgT1IgQ01BS0VfQlVJTERfVFlQRSBTVFJFUVVBTCAiIikKICBzZXQoQ01BS0VfQlVJTERfVFlQRSAiRGVidWciKQplbmRpZihOT1QgQ01BS0VfQlVJTERfVFlQRSBPUiBDTUFLRV9CVUlMRF9UWVBFIFNUUkVRVUFMICIiKQoKaWYoV0lOMzIpCiAgc2V0KExJQldTMl8zMiB3czJfMzIpCmVsc2UoV0lOMzIpCgplbmRpZihXSU4zMikKCmluY2x1ZGUoRmluZFRocmVhZHMpCmluY2x1ZGUoQ2hlY2tDQ29tcGlsZXJGbGFnKQppbmNsdWRlKENoZWNrQ1hYQ29tcGlsZXJGbGFnKQppbmNsdWRlKENoZWNrTGlicmFyeUV4aXN0cykKaW5jbHVkZShDaGVja1R5cGVTaXplKQppbmNsdWRlKEZpbmRQa2dDb25maWcpCmluY2x1ZGUoJHtDTUFLRV9DVVJSRU5UX1NPVVJDRV9ESVJ9L2NtYWtlL2Z1bmN0aW9ucy5jbWFrZSkKaW5jbHVkZSgke0NNQUtFX0NVUlJFTlRfU09VUkNFX0RJUn0vY21ha2UvRmluZFF1aWNrSlMuY21ha2UpCgppZihFTkFCTEVfQ0NBQ0hFKQogIGluY2x1ZGUoJHtDTUFLRV9DVVJSRU5UX1NPVVJDRV9ESVJ9L2NtYWtlL2NjYWNoZS5jbWFrZSkKICBlbmFibGVfY2NhY2hlKCkKZW5kaWYoRU5BQkxFX0NDQUNIRSkKCm1hY3JvKGNoZWNrX3NpemUgVFlQRSBWQVIpCiAgY2hlY2tfdHlwZV9zaXplKCIke1RZUEV9IiBDTUFLRV8ke1ZBUn0pCiAgaWYoJHtDTUFLRV8ke1ZBUn19KQogICAgIyBsaXN0KEFQUEVORCBQTE9UQ1ZfREVGUyAke1ZBUn09JHtDTUFLRV8ke1ZBUn19KQogIGVuZGlmKCR7Q01BS0VfJHtWQVJ9fSkKICBtZXNzYWdlKFNUQVRVUyAic2l6ZSBvZiAke1RZUEV9ICR7Q01BS0VfJHtWQVJ9fSIpCmVuZG1hY3JvKGNoZWNrX3NpemUgVFlQRSBWQVIpCgpjaGVja19zaXplKCJsb25nIiBTSVpFT0ZfTE9ORykKY2hlY2tfc2l6ZSgibG9uZyBsb25nIiBTSVpFT0ZfTE9OR19MT05HKQpjaGVja19zaXplKCJzaXplX3QiIFNJWkVPRl9TSVpFX1QpCgppZihOT1QgUE9TSVRJT05fSU5ERVBFTkRFTlRfQ09ERSkKICBzZXQoUE9TSVRJT05fSU5ERVBFTkRFTlRfQ09ERSBPTikKZW5kaWYoTk9UIFBPU0lUSU9OX0lOREVQRU5ERU5UX0NPREUpCm9wdGlvbihCVUlMRF9TSEFSRURfTElCUyAiQnVpbGQgc2hhcmVkIGxpYnJhcmllcyIgT04pCgptZXNzYWdlKCJUaHJlYWQgbGlicmFyeTogJHtDTUFLRV9USFJFQURfTElCU19JTklUfSIpCmlmKENNQUtFX1RIUkVBRF9MSUJTX0lOSVQpCiAgc2V0KExJQlBUSFJFQUQgJHtDTUFLRV9USFJFQURfTElCU19JTklUfSkKZW5kaWYoQ01BS0VfVEhSRUFEX0xJQlNfSU5JVCkKCmNoZWNrX2xpYnJhcnlfZXhpc3RzKG0gYXRhbjIgL3Vzci9saWIgSEFWRV9MSUJNKQppZihIQVZFX0xJQk0pCiAgc2V0KExJQk0gbSkKICAjIG1lc3NhZ2UoIkZvdW5kIG1hdGggbGlicmFyeTogJHtMSUJNfSIpCmVuZGlmKEhBVkVfTElCTSkKCmNoZWNrX2xpYnJhcnlfZXhpc3RzKGRsIGRsb3BlbiAvdXNyL2xpYiBIQVZFX0xJQkRMKQppZihIQVZFX0xJQkRMKQogIHNldChMSUJETCBkbCkKICAjIG1lc3NhZ2UoIkZvdW5kIGRsZmNuIGxpYnJhcnk6ICR7TElCREx9IikKZW5kaWYoSEFWRV9MSUJETCkKIApjaGVja19saWJyYXJ5X2V4aXN0cyhqc29uLWNwcCBaTjRZQU1MNmRldGFpbDlub2RlX2RhdGE5cmVzZXRfbWFwRXYgL3VzciBKU09OX0NQUCkKCmluY2x1ZGUoJHtDTUFLRV9DVVJSRU5UX1NPVVJDRV9ESVJ9L2NtYWtlL29wZW5jdi5jbWFrZSkKCnNldChDTUFLRV9JTlNUQUxMX1JQQVRIICIke09QRU5DVl9MSUJfRElSfSIgQ0FDSEUgUEFUSCAiQnVpbGQgd2l0aCBpbnN0YWxsIHJwYXRoIiBGT1JDRSkKCmluY2x1ZGVfZGlyZWN0b3JpZXMoCiAgJHtPUEVOQ1ZfSU5DTFVERV9ESVJTfSAke0NNQUtFX0NVUlJFTlRfU09VUkNFX0RJUn0gJHtDTUFLRV9DVVJSRU5UX1NPVVJDRV9ESVJ9L29wZW5jdgogICR7Q01BS0VfQ1VSUkVOVF9TT1VSQ0VfRElSfS9zcmMgJHtDTUFLRV9DVVJSRU5UX1NPVVJDRV9ESVJ9L2luY2x1ZGUKICAke0NNQUtFX0NVUlJFTlRfU09VUkNFX0RJUn0vcXVpY2tqcykKCmZvcmVhY2goQ1hYX1NUQU5EQVJEIGMrKzIwIGMrKzE3IGMrKzE0IGMrKzExKQogIHN0cmluZyhSRVBMQUNFICJjKysiICJDUExVU1BMVVMiIENYWF9TVEFOREFSRF9OVU0gIiR7Q1hYX1NUQU5EQVJEfSIpCiAgc2V0KENNQUtFX1JFUVVJUkVEX1FVSUVUIFRSVUUpCiAgY2hlY2tfY3h4X2NvbXBpbGVyX2ZsYWcoIi1zdGQ9JHtDWFhfU1RBTkRBUkR9IiBDWFhfU1RBTkRBUkRfJHtDWFhfU1RBTkRBUkRfTlVNfSkKICBzZXQoQ01BS0VfUkVRVUlSRURfUVVJRVQgRkFMU0UpCiAgaWYoQ1hYX1NUQU5EQVJEXyR7Q1hYX1NUQU5EQVJEX05VTX0pCiAgICBzdHJpbmcoUkVHRVggUkVQTEFDRSAiXFwrIiAieCIgQ1hYX1NUQU5EQVJEX05BTUUgIiR7Q1hYX1NUQU5EQVJEX1ZBTFVFfSIpCiAgICBzdHJpbmcoVE9VUFBFUiAiJHtDWFhfU1RBTkRBUkRfTkFNRX0iIENYWF9TVEFOREFSRF9OQU1FKQogICAgc3RyaW5nKFJFR0VYIFJFUExBQ0UgIkNYWCIgIiIgQ1hYX1NUQU5EQVJEX1ZFUlNJT04gIiR7Q1hYX1NUQU5EQVJEX05BTUV9IikKICAgIG1lc3NhZ2UoIkNYWF9TVEFOREFSRF9OQU1FID0gJHtDWFhfU1RBTkRBUkRfTkFNRX0iKQogICAgbWVzc2FnZSgiQ1hYX1NUQU5EQVJEX1ZFUlNJT04gPSAke0NYWF9TVEFOREFSRF9WRVJTSU9OfSIpCgogICAgaWYoQ1hYX1NUQU5EQVJEX05BTUUpCiAgICAgIGFkZF9kZWZpbml0aW9ucygtRCIke0NYWF9TVEFOREFSRF9OQU1FfSIpCiAgICBlbmRpZihDWFhfU1RBTkRBUkRfTkFNRSkKCiAgICBzZXQoQ1hYX1NUQU5EQVJEX1ZBTFVFICIke0NYWF9TVEFOREFSRH0iIENBQ0hFIFNUUklORyAiQysrIHN0YW5kYXJkIiBGT1JDRSkKICAgIHNldChDWFhfU1RBTkRBUkRfRkxBRyAiLXN0ZD0ke0NYWF9TVEFOREFSRH0iIENBQ0hFIFNUUklORyAiQysrIHN0YW5kYXJkIGFyZ3VtZW50IiBGT1JDRSkKICAgIHNldChDTUFLRV9DWFhfRkxBR1MgIiR7Q01BS0VfQ1hYX0ZMQUdTfSAke0NYWF9TVEFOREFSRF9GTEFHfSIpCiAgICBicmVhaygpCiAgZW5kaWYoQ1hYX1NUQU5EQVJEXyR7Q1hYX1NUQU5EQVJEX05VTX0pCmVuZGZvcmVhY2goKQoKc3RyaW5nKFJFR0VYIFJFUExBQ0UgImNcXCtcXCsiICIiIENYWF9TVEFOREFSRF9WRVJTSU9OICIke0NYWF9TVEFOREFSRF9WQUxVRX0iKQphZGRfZGVmaW5pdGlvbnMoLURDWFhfU1RBTkRBUkQ9JHtDWFhfU1RBTkRBUkRfVkVSU0lPTn0pCgptZXNzYWdlKCJDKysgc3RhbmRhcmQ6ICR7Q1hYX1NUQU5EQVJEX1ZBTFVFfSIpCgptYWNybyhOT1dBUk5fRkxBRyBGTEFHKQogIGNhbm9uaWNhbGl6ZShWQVJOQU1FICIke0ZMQUd9IikKICBjaGVja19jX2NvbXBpbGVyX2ZsYWcoIiR7RkxBR30iICIke1ZBUk5BTUV9IikKICBkdW1wKCR7VkFSTkFNRX0pCgogIGlmKCR7VkFSTkFNRX0pCiAgICBzZXQoQ01BS0VfQ19GTEFHUyAiJHtDTUFLRV9DX0ZMQUdTfSAke0ZMQUd9IikKICAgIHNldChDTUFLRV9DWFhfRkxBR1MgIiR7Q01BS0VfQ1hYX0ZMQUdTfSAke0ZMQUd9IikKCiAgZW5kaWYoJHtWQVJOQU1FfSkKZW5kbWFjcm8oTk9XQVJOX0ZMQUcgRkxBRykKCnN0cmluZyhSRUdFWCBSRVBMQUNFICIgLVdhbGwiICIiIENNQUtFX0NfRkxBR1MgIiR7Q01BS0VfQ19GTEFHU30iKQpzdHJpbmcoUkVHRVggUkVQTEFDRSAiIC1XYWxsIiAiIiBDTUFLRV9DWFhfRkxBR1MgIiR7Q01BS0VfQ1hYX0ZMQUdTfSIpCgpub3dhcm5fZmxhZygtV25vLXVudXNlZC12YWx1ZSkKbm93YXJuX2ZsYWcoLVduby11bnVzZWQtdmFyaWFibGUpCgppZigiJHtDTUFLRV9DWFhfQ09NUElMRVJfSUR9IiBNQVRDSEVTICIuKkNsYW5nLioiKQogIG5vd2Fybl9mbGFnKC1Xbm8tZGVwcmVjYXRlZC1hbm9uLWVudW0tZW51bS1jb252ZXJzaW9uKQogIG5vd2Fybl9mbGFnKC1Xbm8tZXh0ZXJuLWMtY29tcGF0KQogIG5vd2Fybl9mbGFnKC1Xbm8taW1wbGljaXQtaW50LWZsb2F0LWNvbnZlcnNpb24pCiAgbm93YXJuX2ZsYWcoLVduby1kZXByZWNhdGVkLWVudW0tZW51bS1jb252ZXJzaW9uKQplbmRpZigiJHtDTUFLRV9DWFhfQ09NUElMRVJfSUR9IiBNQVRDSEVTICIuKkNsYW5nLioiKQoKZHVtcChDTUFLRV9DX0ZMQUdTIENNQUtFX0NYWF9GTEFHUykKZHVtcChDTUFLRV9DWFhfRkxBR1NfREVCVUcpCgpjaGVja19jeHhfY29tcGlsZXJfZmxhZygiLWZQSUMiIEZfT1BUX1BJQykKaWYoRl9PUFRfUElDKQogIHNldChDTUFLRV9DX0ZMQUdTX0RFQlVHICIke0NNQUtFX0NfRkxBR1NfREVCVUd9IC1mUElDIikKICBzZXQoQ01BS0VfQ1hYX0ZMQUdTX0RFQlVHICIke0NNQUtFX0NYWF9GTEFHU19ERUJVR30gLWZQSUMiKQplbmRpZihGX09QVF9QSUMpCgpzZXQoREVCVUdfT1VUUFVUIFRSVUUgQ0FDSEUgQk9PTCAiRGVidWcgb3V0cHV0IiBGT1JDRSkKc2V0KERFQlVHX01BVCBGQUxTRSBDQUNIRSBCT09MICJEZWJ1ZyBjdjo6TWF0IiBGT1JDRSkKCmNoZWNrX2NfY29tcGlsZXJfZmxhZygiLU8wIiBPUFRfQ19PUFRfTk9ORSkKY2hlY2tfY3h4X2NvbXBpbGVyX2ZsYWcoIi1PMCIgT1BUX0NYWF9PUFRfTk9ORSkKaWYoT1BUX0NfT1BUX05PTkUpCiAgaWYoTk9UICIke0NNQUtFX0NfRkxBR1NfREVCVUd9IiBNQVRDSEVTICItTzAiKQogICAgc2V0KENNQUtFX0NfRkxBR1NfREVCVUcgIiR7Q01BS0VfQ19GTEFHU19ERUJVR30gLU8wIiBDQUNIRSBTVFJJTkcgIkMgY29tcGlsZXIgb3B0aW9ucyIgRk9SQ0UpCiAgZW5kaWYoTk9UICIke0NNQUtFX0NfRkxBR1NfREVCVUd9IiBNQVRDSEVTICItTzAiKQplbmRpZihPUFRfQ19PUFRfTk9ORSkKaWYoT1BUX0NYWF9PUFRfTk9ORSkKICBpZihOT1QgIiR7Q01BS0VfQ1hYX0ZMQUdTX0RFQlVHfSIgTUFUQ0hFUyAiLU8wIikKICAgIHNldChDTUFLRV9DWFhfRkxBR1NfREVCVUcgIiR7Q01BS0VfQ1hYX0ZMQUdTX0RFQlVHfSAtTzAiIENBQ0hFIFNUUklORyAiQysrIGNvbXBpbGVyIG9wdGlvbnMiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBGT1JDRSkKICBlbmRpZihOT1QgIiR7Q01BS0VfQ1hYX0ZMQUdTX0RFQlVHfSIgTUFUQ0hFUyAiLU8wIikKZW5kaWYoT1BUX0NYWF9PUFRfTk9ORSkKCmNoZWNrX2NfY29tcGlsZXJfZmxhZygiLWdnZGIiIE9QVF9DX0dfR0RCKQpjaGVja19jeHhfY29tcGlsZXJfZmxhZygiLWdnZGIiIE9QVF9DWFhfR19HREIpCmlmKE9QVF9DX0dfR0RCKQogIGlmKE5PVCAiJHtDTUFLRV9DX0ZMQUdTX0RFQlVHfSIgTUFUQ0hFUyAiLWdnZGIiKQogICAgc2V0KENNQUtFX0NfRkxBR1NfREVCVUcgIiR7Q01BS0VfQ19GTEFHU19ERUJVR30gLWdnZGIiIENBQ0hFIFNUUklORyAiQyBjb21waWxlciBvcHRpb25zIiBGT1JDRSkKICBlbmRpZihOT1QgIiR7Q01BS0VfQ19GTEFHU19ERUJVR30iIE1BVENIRVMgIi1nZ2RiIikKZW5kaWYoT1BUX0NfR19HREIpCmlmKE9QVF9DWFhfR19HREIpCiAgaWYoTk9UICIke0NNQUtFX0NYWF9GTEFHU19ERUJVR30iIE1BVENIRVMgIi1nZ2RiIikKICAgIHNldChDTUFLRV9DWFhfRkxBR1NfREVCVUcgIiR7Q01BS0VfQ1hYX0ZMQUdTX0RFQlVHfSAtZ2dkYiIgQ0FDSEUgU1RSSU5HICJDKysgY29tcGlsZXIgb3B0aW9ucyIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRk9SQ0UpCiAgZW5kaWYoTk9UICIke0NNQUtFX0NYWF9GTEFHU19ERUJVR30iIE1BVENIRVMgIi1nZ2RiIikKZW5kaWYoT1BUX0NYWF9HX0dEQikKCmNoZWNrX2NfY29tcGlsZXJfZmxhZygiLWZsdG8iIEhBU19GX0xUT19GTEFHKQoKaWYoSEFTX0ZfTFRPX0ZMQUcpCiAgb3B0aW9uKEVOQUJMRV9MVE8gIkVuYWJsZSBsaW5rLXRpbWUgb3B0aW1pemF0aW9uIiBPRkYpCgplbmRpZihIQVNfRl9MVE9fRkxBRykKCmlmKEVOQUJMRV9MVE8pCiAgc2V0KENNQUtFX0NfRkxBR1MgIiR7Q01BS0VfQ19GTEFHU30gLWZsdG8iKQogIHNldChDTUFLRV9FWEVfTElOS0VSX0ZMQUdTICIke0NNQUtFX0VYRV9MSU5LRVJfRkxBR1N9IC1mbHRvIikKZW5kaWYoRU5BQkxFX0xUTykKCmxpbmtfZGlyZWN0b3JpZXMoQkVGT1JFICR7cXVpY2tqc19CSU5BUllfRElSfSkKCmxpbmtfZGlyZWN0b3JpZXMoIiR7Q01BS0VfQ1VSUkVOVF9CSU5BUllfRElSfS9xdWlja2pzIikKCm1hY3JvKGZpbmRfc3RhdGljX2xpYnJhcnkgVkFSIE5BTUUpCiAgZmluZF9saWJyYXJ5KCR7VkFSfSBOQU1FUyBsaWIke05BTUV9LmEgUEFUSFMgIiR7Q01BS0VfSU5TVEFMTF9QUkVGSVh9L2xpYiIgTk9fREVGQVVMVF9QQVRIKQplbmRtYWNybygpCgpzZXQoUVVJQ0tKU19MSUJSQVJZIHF1aWNranMpCmxpbmtfZGlyZWN0b3JpZXMoJHtDTUFLRV9DVVJSRU5UX0JJTkFSWV9ESVJ9L3F1aWNranMpCgpvcHRpb24oUVVJQ0tKU19NT0RVTEVTICJCdWlsZCAuc28gbW9kdWxlcyBmb3IgcXVpY2tqcyIgT04pCgppZihRVUlDS0pTX01PRFVMRVMpCiAgaW5jbHVkZSgke0NNQUtFX0NVUlJFTlRfU09VUkNFX0RJUn0vY21ha2UvanMtYmluZGluZ3MuY21ha2UpCmVuZGlmKFFVSUNLSlNfTU9EVUxFUykKCm9wdGlvbihCVUlMRF9RVUlDS0pTICJCdWlsZCBRdWlja0pTIiBPTikKCmZpbGUoR0xPQiBPUEVOQ1ZfU09VUkNFUyAqLmhwcCAqLmNwcCkKZHVtcChPUEVOQ1ZfU09VUkNFUykKCm1ha2Vfc2hhcmVkX21vZHVsZShvcGVuY3YgJHtPUEVOQ1ZfU09VUkNFU30pCiMgbWFrZV9qc19iaW5kaW5ncygpCgAAAAAAAAAAdBsAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAzBoAAAAAAADMGgAAAAAAAAAAAAAAAPC/"
				],
				[
					433,
					1,
					"insert",
					{
						"characters": "\n\n"
					},
					"AgAAAMAHAAAAAAAAwQcAAAAAAAAAAAAAwQcAAAAAAADCBwAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAwAcAAAAAAADABwAAAAAAAAAAAAAAAPC/"
				],
				[
					435,
					1,
					"insert",
					{
						"characters": "find_quickjs/"
					},
					"DQAAAMEHAAAAAAAAwgcAAAAAAAAAAAAAwgcAAAAAAADDBwAAAAAAAAAAAADDBwAAAAAAAMQHAAAAAAAAAAAAAMQHAAAAAAAAxQcAAAAAAAAAAAAAxQcAAAAAAADGBwAAAAAAAAAAAADGBwAAAAAAAMcHAAAAAAAAAAAAAMcHAAAAAAAAyAcAAAAAAAAAAAAAyAcAAAAAAADJBwAAAAAAAAAAAADJBwAAAAAAAMoHAAAAAAAAAAAAAMoHAAAAAAAAywcAAAAAAAAAAAAAywcAAAAAAADMBwAAAAAAAAAAAADMBwAAAAAAAM0HAAAAAAAAAAAAAM0HAAAAAAAAzgcAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAwQcAAAAAAADBBwAAAAAAAAAAAAAAAAAA"
				],
				[
					436,
					1,
					"insert_snippet",
					{
						"contents": "($0)"
					},
					"AQAAAM4HAAAAAAAA0AcAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAzgcAAAAAAADOBwAAAAAAAAAAAAAAAPC/"
				],
				[
					438,
					3,
					"left_delete",
					null,
					"AwAAAM8HAAAAAAAAzwcAAAAAAAABAAAAKc4HAAAAAAAAzgcAAAAAAAABAAAAKM0HAAAAAAAAzQcAAAAAAAABAAAALw",
					"AQAAAAAAAAABAAAA0AcAAAAAAADQBwAAAAAAAAAAAAAAAPC/"
				],
				[
					439,
					1,
					"insert_snippet",
					{
						"contents": "($0)"
					},
					"AQAAAM0HAAAAAAAAzwcAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAzQcAAAAAAADNBwAAAAAAAAAAAAAAAPC/"
				],
				[
					464,
					1,
					"cut",
					null,
					"AQAAAMEHAAAAAAAAwQcAAAAAAAAPAAAAZmluZF9xdWlja2pzKCkK",
					"AQAAAAAAAAABAAAAwQcAAAAAAADQBwAAAAAAAAAAAAAAAPC/"
				],
				[
					465,
					2,
					"paste",
					null,
					"AgAAAMEHAAAAAAAA0AcAAAAAAAAAAAAA0AcAAAAAAADfBwAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAwQcAAAAAAADBBwAAAAAAAAAAAAAAAPC/"
				],
				[
					468,
					1,
					"insert",
					{
						"characters": "opencv"
					},
					"BwAAANUHAAAAAAAA1gcAAAAAAAAAAAAA1gcAAAAAAADWBwAAAAAAAAcAAABxdWlja2pz1gcAAAAAAADXBwAAAAAAAAAAAADXBwAAAAAAANgHAAAAAAAAAAAAANgHAAAAAAAA2QcAAAAAAAAAAAAA2QcAAAAAAADaBwAAAAAAAAAAAADaBwAAAAAAANsHAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA1QcAAAAAAADcBwAAAAAAAAAAAAAAAPC/"
				],
				[
					477,
					1,
					"cut",
					null,
					"AQAAAN8HAAAAAAAA3wcAAAAAAAA4AAAAaW5jbHVkZSgke0NNQUtFX0NVUlJFTlRfU09VUkNFX0RJUn0vY21ha2Uvb3BlbmN2LmNtYWtlKQo",
					"AQAAAAAAAAABAAAA3wcAAAAAAAAXCAAAAAAAAAAAAAAAAPC/"
				],
				[
					480,
					1,
					"paste",
					null,
					"AQAAADYDAAAAAAAAbgMAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAANgMAAAAAAAA2AwAAAAAAAAAAAAAAAPC/"
				],
				[
					484,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAACSGwAAY21ha2VfbWluaW11bV9yZXF1aXJlZChWRVJTSU9OIDMuMCkKcHJvamVjdChxanMtb3BlbmN2KQoKc2V0KERJU0FCTEVfV0VSUk9SIFRSVUUgQ0FDSEUgQk9PTCAiRGlzYWJsZSAtV2Vycm9yIGZsYWciIEZPUkNFKQoKc2V0KENNQUtFX0JVSUxEX1RZUEUgIkRlYnVnIiBDQUNIRSBTVFJJTkcgImJ1aWxkIHR5cGUiKQoKc2V0X3Byb3BlcnR5KENBQ0hFIENNQUtFX0JVSUxEX1RZUEUgUFJPUEVSVFkgU1RSSU5HUyBEZWJ1ZyBSZWxlYXNlIE1pblNpemVSZWwgUmVsV2l0aERlYkluZm8pCgpzZXQocXVpY2tqc19zb3VyY2VzX3Jvb3QgJHtDTUFLRV9DVVJSRU5UX1NPVVJDRV9ESVJ9L3F1aWNranMpCgppZihOT1QgQ01BS0VfQlVJTERfVFlQRSBPUiBDTUFLRV9CVUlMRF9UWVBFIFNUUkVRVUFMICIiKQogIHNldChDTUFLRV9CVUlMRF9UWVBFICJEZWJ1ZyIpCmVuZGlmKE5PVCBDTUFLRV9CVUlMRF9UWVBFIE9SIENNQUtFX0JVSUxEX1RZUEUgU1RSRVFVQUwgIiIpCgppZihXSU4zMikKICBzZXQoTElCV1MyXzMyIHdzMl8zMikKZWxzZShXSU4zMikKCmVuZGlmKFdJTjMyKQoKaW5jbHVkZShGaW5kVGhyZWFkcykKaW5jbHVkZShDaGVja0NDb21waWxlckZsYWcpCmluY2x1ZGUoQ2hlY2tDWFhDb21waWxlckZsYWcpCmluY2x1ZGUoQ2hlY2tMaWJyYXJ5RXhpc3RzKQppbmNsdWRlKENoZWNrVHlwZVNpemUpCmluY2x1ZGUoRmluZFBrZ0NvbmZpZykKaW5jbHVkZSgke0NNQUtFX0NVUlJFTlRfU09VUkNFX0RJUn0vY21ha2UvZnVuY3Rpb25zLmNtYWtlKQppbmNsdWRlKCR7Q01BS0VfQ1VSUkVOVF9TT1VSQ0VfRElSfS9jbWFrZS9GaW5kUXVpY2tKUy5jbWFrZSkKaW5jbHVkZSgke0NNQUtFX0NVUlJFTlRfU09VUkNFX0RJUn0vY21ha2Uvb3BlbmN2LmNtYWtlKQoKaWYoRU5BQkxFX0NDQUNIRSkKICBpbmNsdWRlKCR7Q01BS0VfQ1VSUkVOVF9TT1VSQ0VfRElSfS9jbWFrZS9jY2FjaGUuY21ha2UpCiAgZW5hYmxlX2NjYWNoZSgpCmVuZGlmKEVOQUJMRV9DQ0FDSEUpCgptYWNybyhjaGVja19zaXplIFRZUEUgVkFSKQogIGNoZWNrX3R5cGVfc2l6ZSgiJHtUWVBFfSIgQ01BS0VfJHtWQVJ9KQogIGlmKCR7Q01BS0VfJHtWQVJ9fSkKICAgICMgbGlzdChBUFBFTkQgUExPVENWX0RFRlMgJHtWQVJ9PSR7Q01BS0VfJHtWQVJ9fSkKICBlbmRpZigke0NNQUtFXyR7VkFSfX0pCiAgbWVzc2FnZShTVEFUVVMgInNpemUgb2YgJHtUWVBFfSAke0NNQUtFXyR7VkFSfX0iKQplbmRtYWNybyhjaGVja19zaXplIFRZUEUgVkFSKQoKY2hlY2tfc2l6ZSgibG9uZyIgU0laRU9GX0xPTkcpCmNoZWNrX3NpemUoImxvbmcgbG9uZyIgU0laRU9GX0xPTkdfTE9ORykKY2hlY2tfc2l6ZSgic2l6ZV90IiBTSVpFT0ZfU0laRV9UKQoKaWYoTk9UIFBPU0lUSU9OX0lOREVQRU5ERU5UX0NPREUpCiAgc2V0KFBPU0lUSU9OX0lOREVQRU5ERU5UX0NPREUgT04pCmVuZGlmKE5PVCBQT1NJVElPTl9JTkRFUEVOREVOVF9DT0RFKQpvcHRpb24oQlVJTERfU0hBUkVEX0xJQlMgIkJ1aWxkIHNoYXJlZCBsaWJyYXJpZXMiIE9OKQoKbWVzc2FnZSgiVGhyZWFkIGxpYnJhcnk6ICR7Q01BS0VfVEhSRUFEX0xJQlNfSU5JVH0iKQppZihDTUFLRV9USFJFQURfTElCU19JTklUKQogIHNldChMSUJQVEhSRUFEICR7Q01BS0VfVEhSRUFEX0xJQlNfSU5JVH0pCmVuZGlmKENNQUtFX1RIUkVBRF9MSUJTX0lOSVQpCgpjaGVja19saWJyYXJ5X2V4aXN0cyhtIGF0YW4yIC91c3IvbGliIEhBVkVfTElCTSkKaWYoSEFWRV9MSUJNKQogIHNldChMSUJNIG0pCiAgIyBtZXNzYWdlKCJGb3VuZCBtYXRoIGxpYnJhcnk6ICR7TElCTX0iKQplbmRpZihIQVZFX0xJQk0pCgpjaGVja19saWJyYXJ5X2V4aXN0cyhkbCBkbG9wZW4gL3Vzci9saWIgSEFWRV9MSUJETCkKaWYoSEFWRV9MSUJETCkKICBzZXQoTElCREwgZGwpCiAgIyBtZXNzYWdlKCJGb3VuZCBkbGZjbiBsaWJyYXJ5OiAke0xJQkRMfSIpCmVuZGlmKEhBVkVfTElCREwpCgpjaGVja19saWJyYXJ5X2V4aXN0cyhqc29uLWNwcCBaTjRZQU1MNmRldGFpbDlub2RlX2RhdGE5cmVzZXRfbWFwRXYgL3VzciBKU09OX0NQUCkKCmZpbmRfcXVpY2tqcygpCmZpbmRfb3BlbmN2KCkKCgpzZXQoQ01BS0VfSU5TVEFMTF9SUEFUSCAiJHtPUEVOQ1ZfTElCX0RJUn0iIENBQ0hFIFBBVEggIkJ1aWxkIHdpdGggaW5zdGFsbCBycGF0aCIgRk9SQ0UpCgppbmNsdWRlX2RpcmVjdG9yaWVzKAogICR7T1BFTkNWX0lOQ0xVREVfRElSU30gJHtDTUFLRV9DVVJSRU5UX1NPVVJDRV9ESVJ9ICR7Q01BS0VfQ1VSUkVOVF9TT1VSQ0VfRElSfS9vcGVuY3YKICAke0NNQUtFX0NVUlJFTlRfU09VUkNFX0RJUn0vc3JjICR7Q01BS0VfQ1VSUkVOVF9TT1VSQ0VfRElSfS9pbmNsdWRlCiAgJHtDTUFLRV9DVVJSRU5UX1NPVVJDRV9ESVJ9L3F1aWNranMpCgpmb3JlYWNoKENYWF9TVEFOREFSRCBjKysyMCBjKysxNyBjKysxNCBjKysxMSkKICBzdHJpbmcoUkVQTEFDRSAiYysrIiAiQ1BMVVNQTFVTIiBDWFhfU1RBTkRBUkRfTlVNICIke0NYWF9TVEFOREFSRH0iKQogIHNldChDTUFLRV9SRVFVSVJFRF9RVUlFVCBUUlVFKQogIGNoZWNrX2N4eF9jb21waWxlcl9mbGFnKCItc3RkPSR7Q1hYX1NUQU5EQVJEfSIgQ1hYX1NUQU5EQVJEXyR7Q1hYX1NUQU5EQVJEX05VTX0pCiAgc2V0KENNQUtFX1JFUVVJUkVEX1FVSUVUIEZBTFNFKQogIGlmKENYWF9TVEFOREFSRF8ke0NYWF9TVEFOREFSRF9OVU19KQogICAgc3RyaW5nKFJFR0VYIFJFUExBQ0UgIlxcKyIgIngiIENYWF9TVEFOREFSRF9OQU1FICIke0NYWF9TVEFOREFSRF9WQUxVRX0iKQogICAgc3RyaW5nKFRPVVBQRVIgIiR7Q1hYX1NUQU5EQVJEX05BTUV9IiBDWFhfU1RBTkRBUkRfTkFNRSkKICAgIHN0cmluZyhSRUdFWCBSRVBMQUNFICJDWFgiICIiIENYWF9TVEFOREFSRF9WRVJTSU9OICIke0NYWF9TVEFOREFSRF9OQU1FfSIpCiAgICBtZXNzYWdlKCJDWFhfU1RBTkRBUkRfTkFNRSA9ICR7Q1hYX1NUQU5EQVJEX05BTUV9IikKICAgIG1lc3NhZ2UoIkNYWF9TVEFOREFSRF9WRVJTSU9OID0gJHtDWFhfU1RBTkRBUkRfVkVSU0lPTn0iKQoKICAgIGlmKENYWF9TVEFOREFSRF9OQU1FKQogICAgICBhZGRfZGVmaW5pdGlvbnMoLUQiJHtDWFhfU1RBTkRBUkRfTkFNRX0iKQogICAgZW5kaWYoQ1hYX1NUQU5EQVJEX05BTUUpCgogICAgc2V0KENYWF9TVEFOREFSRF9WQUxVRSAiJHtDWFhfU1RBTkRBUkR9IiBDQUNIRSBTVFJJTkcgIkMrKyBzdGFuZGFyZCIgRk9SQ0UpCiAgICBzZXQoQ1hYX1NUQU5EQVJEX0ZMQUcgIi1zdGQ9JHtDWFhfU1RBTkRBUkR9IiBDQUNIRSBTVFJJTkcgIkMrKyBzdGFuZGFyZCBhcmd1bWVudCIgRk9SQ0UpCiAgICBzZXQoQ01BS0VfQ1hYX0ZMQUdTICIke0NNQUtFX0NYWF9GTEFHU30gJHtDWFhfU1RBTkRBUkRfRkxBR30iKQogICAgYnJlYWsoKQogIGVuZGlmKENYWF9TVEFOREFSRF8ke0NYWF9TVEFOREFSRF9OVU19KQplbmRmb3JlYWNoKCkKCnN0cmluZyhSRUdFWCBSRVBMQUNFICJjXFwrXFwrIiAiIiBDWFhfU1RBTkRBUkRfVkVSU0lPTiAiJHtDWFhfU1RBTkRBUkRfVkFMVUV9IikKYWRkX2RlZmluaXRpb25zKC1EQ1hYX1NUQU5EQVJEPSR7Q1hYX1NUQU5EQVJEX1ZFUlNJT059KQoKbWVzc2FnZSgiQysrIHN0YW5kYXJkOiAke0NYWF9TVEFOREFSRF9WQUxVRX0iKQoKbWFjcm8oTk9XQVJOX0ZMQUcgRkxBRykKICBjYW5vbmljYWxpemUoVkFSTkFNRSAiJHtGTEFHfSIpCiAgY2hlY2tfY19jb21waWxlcl9mbGFnKCIke0ZMQUd9IiAiJHtWQVJOQU1FfSIpCiAgZHVtcCgke1ZBUk5BTUV9KQoKICBpZigke1ZBUk5BTUV9KQogICAgc2V0KENNQUtFX0NfRkxBR1MgIiR7Q01BS0VfQ19GTEFHU30gJHtGTEFHfSIpCiAgICBzZXQoQ01BS0VfQ1hYX0ZMQUdTICIke0NNQUtFX0NYWF9GTEFHU30gJHtGTEFHfSIpCgogIGVuZGlmKCR7VkFSTkFNRX0pCmVuZG1hY3JvKE5PV0FSTl9GTEFHIEZMQUcpCgpzdHJpbmcoUkVHRVggUkVQTEFDRSAiIC1XYWxsIiAiIiBDTUFLRV9DX0ZMQUdTICIke0NNQUtFX0NfRkxBR1N9IikKc3RyaW5nKFJFR0VYIFJFUExBQ0UgIiAtV2FsbCIgIiIgQ01BS0VfQ1hYX0ZMQUdTICIke0NNQUtFX0NYWF9GTEFHU30iKQoKbm93YXJuX2ZsYWcoLVduby11bnVzZWQtdmFsdWUpCm5vd2Fybl9mbGFnKC1Xbm8tdW51c2VkLXZhcmlhYmxlKQoKaWYoIiR7Q01BS0VfQ1hYX0NPTVBJTEVSX0lEfSIgTUFUQ0hFUyAiLipDbGFuZy4qIikKICBub3dhcm5fZmxhZygtV25vLWRlcHJlY2F0ZWQtYW5vbi1lbnVtLWVudW0tY29udmVyc2lvbikKICBub3dhcm5fZmxhZygtV25vLWV4dGVybi1jLWNvbXBhdCkKICBub3dhcm5fZmxhZygtV25vLWltcGxpY2l0LWludC1mbG9hdC1jb252ZXJzaW9uKQogIG5vd2Fybl9mbGFnKC1Xbm8tZGVwcmVjYXRlZC1lbnVtLWVudW0tY29udmVyc2lvbikKZW5kaWYoIiR7Q01BS0VfQ1hYX0NPTVBJTEVSX0lEfSIgTUFUQ0hFUyAiLipDbGFuZy4qIikKCmR1bXAoQ01BS0VfQ19GTEFHUyBDTUFLRV9DWFhfRkxBR1MpCmR1bXAoQ01BS0VfQ1hYX0ZMQUdTX0RFQlVHKQoKY2hlY2tfY3h4X2NvbXBpbGVyX2ZsYWcoIi1mUElDIiBGX09QVF9QSUMpCmlmKEZfT1BUX1BJQykKICBzZXQoQ01BS0VfQ19GTEFHU19ERUJVRyAiJHtDTUFLRV9DX0ZMQUdTX0RFQlVHfSAtZlBJQyIpCiAgc2V0KENNQUtFX0NYWF9GTEFHU19ERUJVRyAiJHtDTUFLRV9DWFhfRkxBR1NfREVCVUd9IC1mUElDIikKZW5kaWYoRl9PUFRfUElDKQoKc2V0KERFQlVHX09VVFBVVCBUUlVFIENBQ0hFIEJPT0wgIkRlYnVnIG91dHB1dCIgRk9SQ0UpCnNldChERUJVR19NQVQgRkFMU0UgQ0FDSEUgQk9PTCAiRGVidWcgY3Y6Ok1hdCIgRk9SQ0UpCgpjaGVja19jX2NvbXBpbGVyX2ZsYWcoIi1PMCIgT1BUX0NfT1BUX05PTkUpCmNoZWNrX2N4eF9jb21waWxlcl9mbGFnKCItTzAiIE9QVF9DWFhfT1BUX05PTkUpCmlmKE9QVF9DX09QVF9OT05FKQogIGlmKE5PVCAiJHtDTUFLRV9DX0ZMQUdTX0RFQlVHfSIgTUFUQ0hFUyAiLU8wIikKICAgIHNldChDTUFLRV9DX0ZMQUdTX0RFQlVHICIke0NNQUtFX0NfRkxBR1NfREVCVUd9IC1PMCIgQ0FDSEUgU1RSSU5HICJDIGNvbXBpbGVyIG9wdGlvbnMiIEZPUkNFKQogIGVuZGlmKE5PVCAiJHtDTUFLRV9DX0ZMQUdTX0RFQlVHfSIgTUFUQ0hFUyAiLU8wIikKZW5kaWYoT1BUX0NfT1BUX05PTkUpCmlmKE9QVF9DWFhfT1BUX05PTkUpCiAgaWYoTk9UICIke0NNQUtFX0NYWF9GTEFHU19ERUJVR30iIE1BVENIRVMgIi1PMCIpCiAgICBzZXQoQ01BS0VfQ1hYX0ZMQUdTX0RFQlVHICIke0NNQUtFX0NYWF9GTEFHU19ERUJVR30gLU8wIiBDQUNIRSBTVFJJTkcgIkMrKyBjb21waWxlciBvcHRpb25zIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRk9SQ0UpCiAgZW5kaWYoTk9UICIke0NNQUtFX0NYWF9GTEFHU19ERUJVR30iIE1BVENIRVMgIi1PMCIpCmVuZGlmKE9QVF9DWFhfT1BUX05PTkUpCgpjaGVja19jX2NvbXBpbGVyX2ZsYWcoIi1nZ2RiIiBPUFRfQ19HX0dEQikKY2hlY2tfY3h4X2NvbXBpbGVyX2ZsYWcoIi1nZ2RiIiBPUFRfQ1hYX0dfR0RCKQppZihPUFRfQ19HX0dEQikKICBpZihOT1QgIiR7Q01BS0VfQ19GTEFHU19ERUJVR30iIE1BVENIRVMgIi1nZ2RiIikKICAgIHNldChDTUFLRV9DX0ZMQUdTX0RFQlVHICIke0NNQUtFX0NfRkxBR1NfREVCVUd9IC1nZ2RiIiBDQUNIRSBTVFJJTkcgIkMgY29tcGlsZXIgb3B0aW9ucyIgRk9SQ0UpCiAgZW5kaWYoTk9UICIke0NNQUtFX0NfRkxBR1NfREVCVUd9IiBNQVRDSEVTICItZ2dkYiIpCmVuZGlmKE9QVF9DX0dfR0RCKQppZihPUFRfQ1hYX0dfR0RCKQogIGlmKE5PVCAiJHtDTUFLRV9DWFhfRkxBR1NfREVCVUd9IiBNQVRDSEVTICItZ2dkYiIpCiAgICBzZXQoQ01BS0VfQ1hYX0ZMQUdTX0RFQlVHICIke0NNQUtFX0NYWF9GTEFHU19ERUJVR30gLWdnZGIiIENBQ0hFIFNUUklORyAiQysrIGNvbXBpbGVyIG9wdGlvbnMiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEZPUkNFKQogIGVuZGlmKE5PVCAiJHtDTUFLRV9DWFhfRkxBR1NfREVCVUd9IiBNQVRDSEVTICItZ2dkYiIpCmVuZGlmKE9QVF9DWFhfR19HREIpCgpjaGVja19jX2NvbXBpbGVyX2ZsYWcoIi1mbHRvIiBIQVNfRl9MVE9fRkxBRykKCmlmKEhBU19GX0xUT19GTEFHKQogIG9wdGlvbihFTkFCTEVfTFRPICJFbmFibGUgbGluay10aW1lIG9wdGltaXphdGlvbiIgT0ZGKQoKZW5kaWYoSEFTX0ZfTFRPX0ZMQUcpCgppZihFTkFCTEVfTFRPKQogIHNldChDTUFLRV9DX0ZMQUdTICIke0NNQUtFX0NfRkxBR1N9IC1mbHRvIikKICBzZXQoQ01BS0VfRVhFX0xJTktFUl9GTEFHUyAiJHtDTUFLRV9FWEVfTElOS0VSX0ZMQUdTfSAtZmx0byIpCmVuZGlmKEVOQUJMRV9MVE8pCgpsaW5rX2RpcmVjdG9yaWVzKEJFRk9SRSAke3F1aWNranNfQklOQVJZX0RJUn0pCgpsaW5rX2RpcmVjdG9yaWVzKCIke0NNQUtFX0NVUlJFTlRfQklOQVJZX0RJUn0vcXVpY2tqcyIpCgptYWNybyhmaW5kX3N0YXRpY19saWJyYXJ5IFZBUiBOQU1FKQogIGZpbmRfbGlicmFyeSgke1ZBUn0gTkFNRVMgbGliJHtOQU1FfS5hIFBBVEhTICIke0NNQUtFX0lOU1RBTExfUFJFRklYfS9saWIiIE5PX0RFRkFVTFRfUEFUSCkKZW5kbWFjcm8oKQoKc2V0KFFVSUNLSlNfTElCUkFSWSBxdWlja2pzKQpsaW5rX2RpcmVjdG9yaWVzKCR7Q01BS0VfQ1VSUkVOVF9CSU5BUllfRElSfS9xdWlja2pzKQoKb3B0aW9uKFFVSUNLSlNfTU9EVUxFUyAiQnVpbGQgLnNvIG1vZHVsZXMgZm9yIHF1aWNranMiIE9OKQoKaWYoUVVJQ0tKU19NT0RVTEVTKQogIGluY2x1ZGUoJHtDTUFLRV9DVVJSRU5UX1NPVVJDRV9ESVJ9L2NtYWtlL2pzLWJpbmRpbmdzLmNtYWtlKQplbmRpZihRVUlDS0pTX01PRFVMRVMpCgpvcHRpb24oQlVJTERfUVVJQ0tKUyAiQnVpbGQgUXVpY2tKUyIgT04pCgpmaWxlKEdMT0IgT1BFTkNWX1NPVVJDRVMgKi5ocHAgKi5jcHApCmR1bXAoT1BFTkNWX1NPVVJDRVMpCgptYWtlX3NoYXJlZF9tb2R1bGUob3BlbmN2ICR7T1BFTkNWX1NPVVJDRVN9KQojIG1ha2VfanNfYmluZGluZ3MoKQoAAAAAAAAAAJYbAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAYAMAAAAAAABmAwAAAAAAAAAAAAAAAPC/"
				],
				[
					498,
					1,
					"cut",
					null,
					"AQAAAIoRAAAAAAAAihEAAAAAAADDAAAACmNoZWNrX2N4eF9jb21waWxlcl9mbGFnKCItZlBJQyIgRl9PUFRfUElDKQppZihGX09QVF9QSUMpCiAgc2V0KENNQUtFX0NfRkxBR1NfREVCVUcgIiR7Q01BS0VfQ19GTEFHU19ERUJVR30gLWZQSUMiKQogIHNldChDTUFLRV9DWFhfRkxBR1NfREVCVUcgIiR7Q01BS0VfQ1hYX0ZMQUdTX0RFQlVHfSAtZlBJQyIpCmVuZGlmKEZfT1BUX1BJQykK",
					"AQAAAAAAAAABAAAAihEAAAAAAABNEgAAAAAAAAAAAAAAAPC/"
				],
				[
					499,
					1,
					"paste",
					null,
					"AQAAAIoRAAAAAAAATRIAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAihEAAAAAAACKEQAAAAAAAAAAAAAAAPC/"
				],
				[
					500,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAACWGwAAY21ha2VfbWluaW11bV9yZXF1aXJlZChWRVJTSU9OIDMuMCkKcHJvamVjdChxanMtb3BlbmN2KQoKc2V0KERJU0FCTEVfV0VSUk9SIFRSVUUgQ0FDSEUgQk9PTCAiRGlzYWJsZSAtV2Vycm9yIGZsYWciIEZPUkNFKQoKc2V0KENNQUtFX0JVSUxEX1RZUEUgIkRlYnVnIiBDQUNIRSBTVFJJTkcgImJ1aWxkIHR5cGUiKQoKc2V0X3Byb3BlcnR5KENBQ0hFIENNQUtFX0JVSUxEX1RZUEUgUFJPUEVSVFkgU1RSSU5HUyBEZWJ1ZyBSZWxlYXNlIE1pblNpemVSZWwgUmVsV2l0aERlYkluZm8pCgpzZXQocXVpY2tqc19zb3VyY2VzX3Jvb3QgJHtDTUFLRV9DVVJSRU5UX1NPVVJDRV9ESVJ9L3F1aWNranMpCgppZihOT1QgQ01BS0VfQlVJTERfVFlQRSBPUiBDTUFLRV9CVUlMRF9UWVBFIFNUUkVRVUFMICIiKQogIHNldChDTUFLRV9CVUlMRF9UWVBFICJEZWJ1ZyIpCmVuZGlmKE5PVCBDTUFLRV9CVUlMRF9UWVBFIE9SIENNQUtFX0JVSUxEX1RZUEUgU1RSRVFVQUwgIiIpCgppZihXSU4zMikKICBzZXQoTElCV1MyXzMyIHdzMl8zMikKZWxzZShXSU4zMikKCmVuZGlmKFdJTjMyKQoKaW5jbHVkZShGaW5kVGhyZWFkcykKaW5jbHVkZShDaGVja0NDb21waWxlckZsYWcpCmluY2x1ZGUoQ2hlY2tDWFhDb21waWxlckZsYWcpCmluY2x1ZGUoQ2hlY2tMaWJyYXJ5RXhpc3RzKQppbmNsdWRlKENoZWNrVHlwZVNpemUpCmluY2x1ZGUoRmluZFBrZ0NvbmZpZykKaW5jbHVkZSgke0NNQUtFX0NVUlJFTlRfU09VUkNFX0RJUn0vY21ha2UvZnVuY3Rpb25zLmNtYWtlKQppbmNsdWRlKCR7Q01BS0VfQ1VSUkVOVF9TT1VSQ0VfRElSfS9jbWFrZS9GaW5kUXVpY2tKUy5jbWFrZSkKaW5jbHVkZSgke0NNQUtFX0NVUlJFTlRfU09VUkNFX0RJUn0vY21ha2Uvb3BlbmN2LmNtYWtlKQoKaWYoRU5BQkxFX0NDQUNIRSkKICBpbmNsdWRlKCR7Q01BS0VfQ1VSUkVOVF9TT1VSQ0VfRElSfS9jbWFrZS9jY2FjaGUuY21ha2UpCiAgZW5hYmxlX2NjYWNoZSgpCmVuZGlmKEVOQUJMRV9DQ0FDSEUpCgptYWNybyhjaGVja19zaXplIFRZUEUgVkFSKQogIGNoZWNrX3R5cGVfc2l6ZSgiJHtUWVBFfSIgQ01BS0VfJHtWQVJ9KQogIGlmKCR7Q01BS0VfJHtWQVJ9fSkKICAgICMgbGlzdChBUFBFTkQgUExPVENWX0RFRlMgJHtWQVJ9PSR7Q01BS0VfJHtWQVJ9fSkKICBlbmRpZigke0NNQUtFXyR7VkFSfX0pCiAgbWVzc2FnZShTVEFUVVMgInNpemUgb2YgJHtUWVBFfSAke0NNQUtFXyR7VkFSfX0iKQplbmRtYWNybyhjaGVja19zaXplIFRZUEUgVkFSKQoKY2hlY2tfc2l6ZSgibG9uZyIgU0laRU9GX0xPTkcpCmNoZWNrX3NpemUoImxvbmcgbG9uZyIgU0laRU9GX0xPTkdfTE9ORykKY2hlY2tfc2l6ZSgic2l6ZV90IiBTSVpFT0ZfU0laRV9UKQoKaWYoTk9UIFBPU0lUSU9OX0lOREVQRU5ERU5UX0NPREUpCiAgc2V0KFBPU0lUSU9OX0lOREVQRU5ERU5UX0NPREUgT04pCmVuZGlmKE5PVCBQT1NJVElPTl9JTkRFUEVOREVOVF9DT0RFKQpvcHRpb24oQlVJTERfU0hBUkVEX0xJQlMgIkJ1aWxkIHNoYXJlZCBsaWJyYXJpZXMiIE9OKQoKbWVzc2FnZSgiVGhyZWFkIGxpYnJhcnk6ICR7Q01BS0VfVEhSRUFEX0xJQlNfSU5JVH0iKQppZihDTUFLRV9USFJFQURfTElCU19JTklUKQogIHNldChMSUJQVEhSRUFEICR7Q01BS0VfVEhSRUFEX0xJQlNfSU5JVH0pCmVuZGlmKENNQUtFX1RIUkVBRF9MSUJTX0lOSVQpCgpjaGVja19saWJyYXJ5X2V4aXN0cyhtIGF0YW4yIC91c3IvbGliIEhBVkVfTElCTSkKaWYoSEFWRV9MSUJNKQogIHNldChMSUJNIG0pCiAgIyBtZXNzYWdlKCJGb3VuZCBtYXRoIGxpYnJhcnk6ICR7TElCTX0iKQplbmRpZihIQVZFX0xJQk0pCgpjaGVja19saWJyYXJ5X2V4aXN0cyhkbCBkbG9wZW4gL3Vzci9saWIgSEFWRV9MSUJETCkKaWYoSEFWRV9MSUJETCkKICBzZXQoTElCREwgZGwpCiAgIyBtZXNzYWdlKCJGb3VuZCBkbGZjbiBsaWJyYXJ5OiAke0xJQkRMfSIpCmVuZGlmKEhBVkVfTElCREwpCgpjaGVja19saWJyYXJ5X2V4aXN0cyhqc29uLWNwcCBaTjRZQU1MNmRldGFpbDlub2RlX2RhdGE5cmVzZXRfbWFwRXYgL3VzciBKU09OX0NQUCkKCmZpbmRfcXVpY2tqcygpCmZpbmRfb3BlbmN2KCkKCgpzZXQoQ01BS0VfSU5TVEFMTF9SUEFUSCAiJHtPUEVOQ1ZfTElCX0RJUn0iIENBQ0hFIFBBVEggIkJ1aWxkIHdpdGggaW5zdGFsbCBycGF0aCIgRk9SQ0UpCgppbmNsdWRlX2RpcmVjdG9yaWVzKAogICR7T1BFTkNWX0lOQ0xVREVfRElSU30gJHtDTUFLRV9DVVJSRU5UX1NPVVJDRV9ESVJ9ICR7Q01BS0VfQ1VSUkVOVF9TT1VSQ0VfRElSfS9vcGVuY3YKICAke0NNQUtFX0NVUlJFTlRfU09VUkNFX0RJUn0vc3JjICR7Q01BS0VfQ1VSUkVOVF9TT1VSQ0VfRElSfS9pbmNsdWRlCiAgJHtDTUFLRV9DVVJSRU5UX1NPVVJDRV9ESVJ9L3F1aWNranMpCgpmb3JlYWNoKENYWF9TVEFOREFSRCBjKysyMCBjKysxNyBjKysxNCBjKysxMSkKICBzdHJpbmcoUkVQTEFDRSAiYysrIiAiQ1BMVVNQTFVTIiBDWFhfU1RBTkRBUkRfTlVNICIke0NYWF9TVEFOREFSRH0iKQogIHNldChDTUFLRV9SRVFVSVJFRF9RVUlFVCBUUlVFKQogIGNoZWNrX2N4eF9jb21waWxlcl9mbGFnKCItc3RkPSR7Q1hYX1NUQU5EQVJEfSIgQ1hYX1NUQU5EQVJEXyR7Q1hYX1NUQU5EQVJEX05VTX0pCiAgc2V0KENNQUtFX1JFUVVJUkVEX1FVSUVUIEZBTFNFKQogIGlmKENYWF9TVEFOREFSRF8ke0NYWF9TVEFOREFSRF9OVU19KQogICAgc3RyaW5nKFJFR0VYIFJFUExBQ0UgIlxcKyIgIngiIENYWF9TVEFOREFSRF9OQU1FICIke0NYWF9TVEFOREFSRF9WQUxVRX0iKQogICAgc3RyaW5nKFRPVVBQRVIgIiR7Q1hYX1NUQU5EQVJEX05BTUV9IiBDWFhfU1RBTkRBUkRfTkFNRSkKICAgIHN0cmluZyhSRUdFWCBSRVBMQUNFICJDWFgiICIiIENYWF9TVEFOREFSRF9WRVJTSU9OICIke0NYWF9TVEFOREFSRF9OQU1FfSIpCiAgICBtZXNzYWdlKCJDWFhfU1RBTkRBUkRfTkFNRSA9ICR7Q1hYX1NUQU5EQVJEX05BTUV9IikKICAgIG1lc3NhZ2UoIkNYWF9TVEFOREFSRF9WRVJTSU9OID0gJHtDWFhfU1RBTkRBUkRfVkVSU0lPTn0iKQoKICAgIGlmKENYWF9TVEFOREFSRF9OQU1FKQogICAgICBhZGRfZGVmaW5pdGlvbnMoLUQiJHtDWFhfU1RBTkRBUkRfTkFNRX0iKQogICAgZW5kaWYoQ1hYX1NUQU5EQVJEX05BTUUpCgogICAgc2V0KENYWF9TVEFOREFSRF9WQUxVRSAiJHtDWFhfU1RBTkRBUkR9IiBDQUNIRSBTVFJJTkcgIkMrKyBzdGFuZGFyZCIgRk9SQ0UpCiAgICBzZXQoQ1hYX1NUQU5EQVJEX0ZMQUcgIi1zdGQ9JHtDWFhfU1RBTkRBUkR9IiBDQUNIRSBTVFJJTkcgIkMrKyBzdGFuZGFyZCBhcmd1bWVudCIgRk9SQ0UpCiAgICBzZXQoQ01BS0VfQ1hYX0ZMQUdTICIke0NNQUtFX0NYWF9GTEFHU30gJHtDWFhfU1RBTkRBUkRfRkxBR30iKQogICAgYnJlYWsoKQogIGVuZGlmKENYWF9TVEFOREFSRF8ke0NYWF9TVEFOREFSRF9OVU19KQplbmRmb3JlYWNoKCkKCnN0cmluZyhSRUdFWCBSRVBMQUNFICJjXFwrXFwrIiAiIiBDWFhfU1RBTkRBUkRfVkVSU0lPTiAiJHtDWFhfU1RBTkRBUkRfVkFMVUV9IikKYWRkX2RlZmluaXRpb25zKC1EQ1hYX1NUQU5EQVJEPSR7Q1hYX1NUQU5EQVJEX1ZFUlNJT059KQoKbWVzc2FnZSgiQysrIHN0YW5kYXJkOiAke0NYWF9TVEFOREFSRF9WQUxVRX0iKQoKbWFjcm8oTk9XQVJOX0ZMQUcgRkxBRykKICBjYW5vbmljYWxpemUoVkFSTkFNRSAiJHtGTEFHfSIpCiAgY2hlY2tfY19jb21waWxlcl9mbGFnKCIke0ZMQUd9IiAiJHtWQVJOQU1FfSIpCiAgI2R1bXAoJHtWQVJOQU1FfSkKCiAgaWYoJHtWQVJOQU1FfSkKICAgIHNldChDTUFLRV9DX0ZMQUdTICIke0NNQUtFX0NfRkxBR1N9ICR7RkxBR30iKQogICAgc2V0KENNQUtFX0NYWF9GTEFHUyAiJHtDTUFLRV9DWFhfRkxBR1N9ICR7RkxBR30iKQoKICBlbmRpZigke1ZBUk5BTUV9KQplbmRtYWNybyhOT1dBUk5fRkxBRyBGTEFHKQoKc3RyaW5nKFJFR0VYIFJFUExBQ0UgIiAtV2FsbCIgIiIgQ01BS0VfQ19GTEFHUyAiJHtDTUFLRV9DX0ZMQUdTfSIpCnN0cmluZyhSRUdFWCBSRVBMQUNFICIgLVdhbGwiICIiIENNQUtFX0NYWF9GTEFHUyAiJHtDTUFLRV9DWFhfRkxBR1N9IikKCm5vd2Fybl9mbGFnKC1Xbm8tdW51c2VkLXZhbHVlKQpub3dhcm5fZmxhZygtV25vLXVudXNlZC12YXJpYWJsZSkKCmlmKCIke0NNQUtFX0NYWF9DT01QSUxFUl9JRH0iIE1BVENIRVMgIi4qQ2xhbmcuKiIpCiAgbm93YXJuX2ZsYWcoLVduby1kZXByZWNhdGVkLWFub24tZW51bS1lbnVtLWNvbnZlcnNpb24pCiAgbm93YXJuX2ZsYWcoLVduby1leHRlcm4tYy1jb21wYXQpCiAgbm93YXJuX2ZsYWcoLVduby1pbXBsaWNpdC1pbnQtZmxvYXQtY29udmVyc2lvbikKICBub3dhcm5fZmxhZygtV25vLWRlcHJlY2F0ZWQtZW51bS1lbnVtLWNvbnZlcnNpb24pCmVuZGlmKCIke0NNQUtFX0NYWF9DT01QSUxFUl9JRH0iIE1BVENIRVMgIi4qQ2xhbmcuKiIpCgojZHVtcChDTUFLRV9DX0ZMQUdTIENNQUtFX0NYWF9GTEFHUykKI2R1bXAoQ01BS0VfQ1hYX0ZMQUdTX0RFQlVHKQoKY2hlY2tfY3h4X2NvbXBpbGVyX2ZsYWcoIi1mUElDIiBGX09QVF9QSUMpCmlmKEZfT1BUX1BJQykKICBzZXQoQ01BS0VfQ19GTEFHU19ERUJVRyAiJHtDTUFLRV9DX0ZMQUdTX0RFQlVHfSAtZlBJQyIpCiAgc2V0KENNQUtFX0NYWF9GTEFHU19ERUJVRyAiJHtDTUFLRV9DWFhfRkxBR1NfREVCVUd9IC1mUElDIikKZW5kaWYoRl9PUFRfUElDKQoKc2V0KERFQlVHX09VVFBVVCBUUlVFIENBQ0hFIEJPT0wgIkRlYnVnIG91dHB1dCIgRk9SQ0UpCnNldChERUJVR19NQVQgRkFMU0UgQ0FDSEUgQk9PTCAiRGVidWcgY3Y6Ok1hdCIgRk9SQ0UpCgpjaGVja19jX2NvbXBpbGVyX2ZsYWcoIi1PMCIgT1BUX0NfT1BUX05PTkUpCmNoZWNrX2N4eF9jb21waWxlcl9mbGFnKCItTzAiIE9QVF9DWFhfT1BUX05PTkUpCmlmKE9QVF9DX09QVF9OT05FKQogIGlmKE5PVCAiJHtDTUFLRV9DX0ZMQUdTX0RFQlVHfSIgTUFUQ0hFUyAiLU8wIikKICAgIHNldChDTUFLRV9DX0ZMQUdTX0RFQlVHICIke0NNQUtFX0NfRkxBR1NfREVCVUd9IC1PMCIgQ0FDSEUgU1RSSU5HICJDIGNvbXBpbGVyIG9wdGlvbnMiIEZPUkNFKQogIGVuZGlmKE5PVCAiJHtDTUFLRV9DX0ZMQUdTX0RFQlVHfSIgTUFUQ0hFUyAiLU8wIikKZW5kaWYoT1BUX0NfT1BUX05PTkUpCmlmKE9QVF9DWFhfT1BUX05PTkUpCiAgaWYoTk9UICIke0NNQUtFX0NYWF9GTEFHU19ERUJVR30iIE1BVENIRVMgIi1PMCIpCiAgICBzZXQoQ01BS0VfQ1hYX0ZMQUdTX0RFQlVHICIke0NNQUtFX0NYWF9GTEFHU19ERUJVR30gLU8wIiBDQUNIRSBTVFJJTkcgIkMrKyBjb21waWxlciBvcHRpb25zIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRk9SQ0UpCiAgZW5kaWYoTk9UICIke0NNQUtFX0NYWF9GTEFHU19ERUJVR30iIE1BVENIRVMgIi1PMCIpCmVuZGlmKE9QVF9DWFhfT1BUX05PTkUpCgpjaGVja19jX2NvbXBpbGVyX2ZsYWcoIi1nZ2RiIiBPUFRfQ19HX0dEQikKY2hlY2tfY3h4X2NvbXBpbGVyX2ZsYWcoIi1nZ2RiIiBPUFRfQ1hYX0dfR0RCKQppZihPUFRfQ19HX0dEQikKICBpZihOT1QgIiR7Q01BS0VfQ19GTEFHU19ERUJVR30iIE1BVENIRVMgIi1nZ2RiIikKICAgIHNldChDTUFLRV9DX0ZMQUdTX0RFQlVHICIke0NNQUtFX0NfRkxBR1NfREVCVUd9IC1nZ2RiIiBDQUNIRSBTVFJJTkcgIkMgY29tcGlsZXIgb3B0aW9ucyIgRk9SQ0UpCiAgZW5kaWYoTk9UICIke0NNQUtFX0NfRkxBR1NfREVCVUd9IiBNQVRDSEVTICItZ2dkYiIpCmVuZGlmKE9QVF9DX0dfR0RCKQppZihPUFRfQ1hYX0dfR0RCKQogIGlmKE5PVCAiJHtDTUFLRV9DWFhfRkxBR1NfREVCVUd9IiBNQVRDSEVTICItZ2dkYiIpCiAgICBzZXQoQ01BS0VfQ1hYX0ZMQUdTX0RFQlVHICIke0NNQUtFX0NYWF9GTEFHU19ERUJVR30gLWdnZGIiIENBQ0hFIFNUUklORyAiQysrIGNvbXBpbGVyIG9wdGlvbnMiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEZPUkNFKQogIGVuZGlmKE5PVCAiJHtDTUFLRV9DWFhfRkxBR1NfREVCVUd9IiBNQVRDSEVTICItZ2dkYiIpCmVuZGlmKE9QVF9DWFhfR19HREIpCgpjaGVja19jX2NvbXBpbGVyX2ZsYWcoIi1mbHRvIiBIQVNfRl9MVE9fRkxBRykKCmlmKEhBU19GX0xUT19GTEFHKQogIG9wdGlvbihFTkFCTEVfTFRPICJFbmFibGUgbGluay10aW1lIG9wdGltaXphdGlvbiIgT0ZGKQoKZW5kaWYoSEFTX0ZfTFRPX0ZMQUcpCgppZihFTkFCTEVfTFRPKQogIHNldChDTUFLRV9DX0ZMQUdTICIke0NNQUtFX0NfRkxBR1N9IC1mbHRvIikKICBzZXQoQ01BS0VfRVhFX0xJTktFUl9GTEFHUyAiJHtDTUFLRV9FWEVfTElOS0VSX0ZMQUdTfSAtZmx0byIpCmVuZGlmKEVOQUJMRV9MVE8pCgpsaW5rX2RpcmVjdG9yaWVzKEJFRk9SRSAke3F1aWNranNfQklOQVJZX0RJUn0pCgpsaW5rX2RpcmVjdG9yaWVzKCIke0NNQUtFX0NVUlJFTlRfQklOQVJZX0RJUn0vcXVpY2tqcyIpCgptYWNybyhmaW5kX3N0YXRpY19saWJyYXJ5IFZBUiBOQU1FKQogIGZpbmRfbGlicmFyeSgke1ZBUn0gTkFNRVMgbGliJHtOQU1FfS5hIFBBVEhTICIke0NNQUtFX0lOU1RBTExfUFJFRklYfS9saWIiIE5PX0RFRkFVTFRfUEFUSCkKZW5kbWFjcm8oKQoKc2V0KFFVSUNLSlNfTElCUkFSWSBxdWlja2pzKQpsaW5rX2RpcmVjdG9yaWVzKCR7Q01BS0VfQ1VSUkVOVF9CSU5BUllfRElSfS9xdWlja2pzKQoKb3B0aW9uKFFVSUNLSlNfTU9EVUxFUyAiQnVpbGQgLnNvIG1vZHVsZXMgZm9yIHF1aWNranMiIE9OKQoKaWYoUVVJQ0tKU19NT0RVTEVTKQogIGluY2x1ZGUoJHtDTUFLRV9DVVJSRU5UX1NPVVJDRV9ESVJ9L2NtYWtlL2pzLWJpbmRpbmdzLmNtYWtlKQplbmRpZihRVUlDS0pTX01PRFVMRVMpCgpvcHRpb24oQlVJTERfUVVJQ0tKUyAiQnVpbGQgUXVpY2tKUyIgT04pCgpmaWxlKEdMT0IgT1BFTkNWX1NPVVJDRVMgKi5ocHAgKi5jcHApCiNkdW1wKE9QRU5DVl9TT1VSQ0VTKQoKbWFrZV9zaGFyZWRfbW9kdWxlKG9wZW5jdiAke09QRU5DVl9TT1VSQ0VTfSkKIyBtYWtlX2pzX2JpbmRpbmdzKCkKAAAAAAAAAACKGwAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAATRIAAAAAAABNEgAAAAAAAAAAAAAAAPC/"
				],
				[
					505,
					1,
					"paste",
					null,
					"AgAAAIsRAAAAAAAAmREAAAAAAAAAAAAAmREAAAAAAACZEQAAAAAAALUAAABjaGVja19jeHhfY29tcGlsZXJfZmxhZygiLWZQSUMiIEZfUElDKQppZihGX1BJQykKICBzZXQoQ01BS0VfQ19GTEFHU19ERUJVRyAiJHtDTUFLRV9DX0ZMQUdTX0RFQlVHfSAtZlBJQyIpCiAgc2V0KENNQUtFX0NYWF9GTEFHU19ERUJVRyAiJHtDTUFLRV9DWFhfRkxBR1NfREVCVUd9IC1mUElDIikKZW5kaWYoRl9QSUMp",
					"AQAAAAAAAAABAAAAQBIAAAAAAACLEQAAAAAAAAAAAAAAAPC/"
				],
				[
					506,
					1,
					"insert_snippet",
					{
						"contents": "($0)"
					},
					"AQAAAJkRAAAAAAAAmxEAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAmREAAAAAAACZEQAAAAAAAAAAAAAAAPC/"
				],
				[
					519,
					1,
					"paste",
					null,
					"AgAAAAsSAAAAAAAAHhIAAAAAAAAAAAAAHhIAAAAAAAAeEgAAAAAAAIwCAABjaGVja19jX2NvbXBpbGVyX2ZsYWcoIi1PMCIgT1BUX0NfT1BUX05PTkUpCmNoZWNrX2N4eF9jb21waWxlcl9mbGFnKCItTzAiIE9QVF9DWFhfT1BUX05PTkUpCmlmKE9QVF9DX09QVF9OT05FKQogIGlmKE5PVCAiJHtDTUFLRV9DX0ZMQUdTX0RFQlVHfSIgTUFUQ0hFUyAiLU8wIikKICAgIHNldChDTUFLRV9DX0ZMQUdTX0RFQlVHICIke0NNQUtFX0NfRkxBR1NfREVCVUd9IC1PMCIgQ0FDSEUgU1RSSU5HICJDIGNvbXBpbGVyIG9wdGlvbnMiIEZPUkNFKQogIGVuZGlmKE5PVCAiJHtDTUFLRV9DX0ZMQUdTX0RFQlVHfSIgTUFUQ0hFUyAiLU8wIikKZW5kaWYoT1BUX0NfT1BUX05PTkUpCmlmKE9QVF9DWFhfT1BUX05PTkUpCiAgaWYoTk9UICIke0NNQUtFX0NYWF9GTEFHU19ERUJVR30iIE1BVENIRVMgIi1PMCIpCiAgICBzZXQoQ01BS0VfQ1hYX0ZMQUdTX0RFQlVHICIke0NNQUtFX0NYWF9GTEFHU19ERUJVR30gLU8wIiBDQUNIRSBTVFJJTkcgIkMrKyBjb21waWxlciBvcHRpb25zIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRk9SQ0UpCiAgZW5kaWYoTk9UICIke0NNQUtFX0NYWF9GTEFHU19ERUJVR30iIE1BVENIRVMgIi1PMCIpCmVuZGlmKE9QVF9DWFhfT1BUX05PTkUp",
					"AQAAAAAAAAABAAAAlxQAAAAAAAALEgAAAAAAAAAAAAAAAPC/"
				],
				[
					520,
					1,
					"insert_snippet",
					{
						"contents": "($0)"
					},
					"AQAAAB4SAAAAAAAAIBIAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAHhIAAAAAAAAeEgAAAAAAAAAAAAAAAPC/"
				],
				[
					525,
					1,
					"cut",
					null,
					"AQAAACISAAAAAAAAIhIAAAAAAACNAgAAY2hlY2tfY19jb21waWxlcl9mbGFnKCItZ2dkYiIgT1BUX0NfR19HREIpCmNoZWNrX2N4eF9jb21waWxlcl9mbGFnKCItZ2dkYiIgT1BUX0NYWF9HX0dEQikKaWYoT1BUX0NfR19HREIpCiAgaWYoTk9UICIke0NNQUtFX0NfRkxBR1NfREVCVUd9IiBNQVRDSEVTICItZ2dkYiIpCiAgICBzZXQoQ01BS0VfQ19GTEFHU19ERUJVRyAiJHtDTUFLRV9DX0ZMQUdTX0RFQlVHfSAtZ2dkYiIgQ0FDSEUgU1RSSU5HICJDIGNvbXBpbGVyIG9wdGlvbnMiIEZPUkNFKQogIGVuZGlmKE5PVCAiJHtDTUFLRV9DX0ZMQUdTX0RFQlVHfSIgTUFUQ0hFUyAiLWdnZGIiKQplbmRpZihPUFRfQ19HX0dEQikKaWYoT1BUX0NYWF9HX0dEQikKICBpZihOT1QgIiR7Q01BS0VfQ1hYX0ZMQUdTX0RFQlVHfSIgTUFUQ0hFUyAiLWdnZGIiKQogICAgc2V0KENNQUtFX0NYWF9GTEFHU19ERUJVRyAiJHtDTUFLRV9DWFhfRkxBR1NfREVCVUd9IC1nZ2RiIiBDQUNIRSBTVFJJTkcgIkMrKyBjb21waWxlciBvcHRpb25zIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBGT1JDRSkKICBlbmRpZihOT1QgIiR7Q01BS0VfQ1hYX0ZMQUdTX0RFQlVHfSIgTUFUQ0hFUyAiLWdnZGIiKQplbmRpZihPUFRfQ1hYX0dfR0RCKQo",
					"AQAAAAAAAAABAAAAIhIAAAAAAACvFAAAAAAAAAAAAAAAAPC/"
				],
				[
					526,
					1,
					"paste",
					null,
					"AQAAACISAAAAAAAANhIAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAIhIAAAAAAAAiEgAAAAAAAAAAAAAAAPC/"
				],
				[
					527,
					1,
					"insert_snippet",
					{
						"contents": "($0)"
					},
					"AQAAADYSAAAAAAAAOBIAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAANhIAAAAAAAA2EgAAAAAAAAAAAAAAAPC/"
				],
				[
					529,
					1,
					"insert",
					{
						"characters": "\n\n"
					},
					"AgAAADgSAAAAAAAAORIAAAAAAAAAAAAAORIAAAAAAAA6EgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAOBIAAAAAAAA4EgAAAAAAAAAAAAAAAPC/"
				],
				[
					533,
					1,
					"left_delete",
					null,
					"AQAAALUSAAAAAAAAtRIAAAAAAAABAAAACg",
					"AQAAAAAAAAABAAAAthIAAAAAAAC2EgAAAAAAAAAAAAAAAPC/"
				],
				[
					540,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAAD4FQAAY21ha2VfbWluaW11bV9yZXF1aXJlZChWRVJTSU9OIDMuMCkKcHJvamVjdChxanMtb3BlbmN2KQoKc2V0KERJU0FCTEVfV0VSUk9SIFRSVUUgQ0FDSEUgQk9PTCAiRGlzYWJsZSAtV2Vycm9yIGZsYWciIEZPUkNFKQoKc2V0KENNQUtFX0JVSUxEX1RZUEUgIkRlYnVnIiBDQUNIRSBTVFJJTkcgImJ1aWxkIHR5cGUiKQoKc2V0X3Byb3BlcnR5KENBQ0hFIENNQUtFX0JVSUxEX1RZUEUgUFJPUEVSVFkgU1RSSU5HUyBEZWJ1ZyBSZWxlYXNlIE1pblNpemVSZWwgUmVsV2l0aERlYkluZm8pCgpzZXQocXVpY2tqc19zb3VyY2VzX3Jvb3QgJHtDTUFLRV9DVVJSRU5UX1NPVVJDRV9ESVJ9L3F1aWNranMpCgppZihOT1QgQ01BS0VfQlVJTERfVFlQRSBPUiBDTUFLRV9CVUlMRF9UWVBFIFNUUkVRVUFMICIiKQogIHNldChDTUFLRV9CVUlMRF9UWVBFICJEZWJ1ZyIpCmVuZGlmKE5PVCBDTUFLRV9CVUlMRF9UWVBFIE9SIENNQUtFX0JVSUxEX1RZUEUgU1RSRVFVQUwgIiIpCgppZihXSU4zMikKICBzZXQoTElCV1MyXzMyIHdzMl8zMikKZWxzZShXSU4zMikKCmVuZGlmKFdJTjMyKQoKaW5jbHVkZShGaW5kVGhyZWFkcykKaW5jbHVkZShDaGVja0NDb21waWxlckZsYWcpCmluY2x1ZGUoQ2hlY2tDWFhDb21waWxlckZsYWcpCmluY2x1ZGUoQ2hlY2tMaWJyYXJ5RXhpc3RzKQppbmNsdWRlKENoZWNrVHlwZVNpemUpCmluY2x1ZGUoRmluZFBrZ0NvbmZpZykKaW5jbHVkZSgke0NNQUtFX0NVUlJFTlRfU09VUkNFX0RJUn0vY21ha2UvZnVuY3Rpb25zLmNtYWtlKQppbmNsdWRlKCR7Q01BS0VfQ1VSUkVOVF9TT1VSQ0VfRElSfS9jbWFrZS9GaW5kUXVpY2tKUy5jbWFrZSkKaW5jbHVkZSgke0NNQUtFX0NVUlJFTlRfU09VUkNFX0RJUn0vY21ha2Uvb3BlbmN2LmNtYWtlKQoKaWYoRU5BQkxFX0NDQUNIRSkKICBpbmNsdWRlKCR7Q01BS0VfQ1VSUkVOVF9TT1VSQ0VfRElSfS9jbWFrZS9jY2FjaGUuY21ha2UpCiAgZW5hYmxlX2NjYWNoZSgpCmVuZGlmKEVOQUJMRV9DQ0FDSEUpCgptYWNybyhjaGVja19zaXplIFRZUEUgVkFSKQogIGNoZWNrX3R5cGVfc2l6ZSgiJHtUWVBFfSIgQ01BS0VfJHtWQVJ9KQogIGlmKCR7Q01BS0VfJHtWQVJ9fSkKICAgICMgbGlzdChBUFBFTkQgUExPVENWX0RFRlMgJHtWQVJ9PSR7Q01BS0VfJHtWQVJ9fSkKICBlbmRpZigke0NNQUtFXyR7VkFSfX0pCiAgbWVzc2FnZShTVEFUVVMgInNpemUgb2YgJHtUWVBFfSAke0NNQUtFXyR7VkFSfX0iKQplbmRtYWNybyhjaGVja19zaXplIFRZUEUgVkFSKQoKY2hlY2tfc2l6ZSgibG9uZyIgU0laRU9GX0xPTkcpCmNoZWNrX3NpemUoImxvbmcgbG9uZyIgU0laRU9GX0xPTkdfTE9ORykKY2hlY2tfc2l6ZSgic2l6ZV90IiBTSVpFT0ZfU0laRV9UKQoKaWYoTk9UIFBPU0lUSU9OX0lOREVQRU5ERU5UX0NPREUpCiAgc2V0KFBPU0lUSU9OX0lOREVQRU5ERU5UX0NPREUgT04pCmVuZGlmKE5PVCBQT1NJVElPTl9JTkRFUEVOREVOVF9DT0RFKQpvcHRpb24oQlVJTERfU0hBUkVEX0xJQlMgIkJ1aWxkIHNoYXJlZCBsaWJyYXJpZXMiIE9OKQoKbWVzc2FnZSgiVGhyZWFkIGxpYnJhcnk6ICR7Q01BS0VfVEhSRUFEX0xJQlNfSU5JVH0iKQppZihDTUFLRV9USFJFQURfTElCU19JTklUKQogIHNldChMSUJQVEhSRUFEICR7Q01BS0VfVEhSRUFEX0xJQlNfSU5JVH0pCmVuZGlmKENNQUtFX1RIUkVBRF9MSUJTX0lOSVQpCgpjaGVja19saWJyYXJ5X2V4aXN0cyhtIGF0YW4yIC91c3IvbGliIEhBVkVfTElCTSkKaWYoSEFWRV9MSUJNKQogIHNldChMSUJNIG0pCiAgIyBtZXNzYWdlKCJGb3VuZCBtYXRoIGxpYnJhcnk6ICR7TElCTX0iKQplbmRpZihIQVZFX0xJQk0pCgpjaGVja19saWJyYXJ5X2V4aXN0cyhkbCBkbG9wZW4gL3Vzci9saWIgSEFWRV9MSUJETCkKaWYoSEFWRV9MSUJETCkKICBzZXQoTElCREwgZGwpCiAgIyBtZXNzYWdlKCJGb3VuZCBkbGZjbiBsaWJyYXJ5OiAke0xJQkRMfSIpCmVuZGlmKEhBVkVfTElCREwpCgpjaGVja19saWJyYXJ5X2V4aXN0cyhqc29uLWNwcCBaTjRZQU1MNmRldGFpbDlub2RlX2RhdGE5cmVzZXRfbWFwRXYgL3VzciBKU09OX0NQUCkKCmZpbmRfcXVpY2tqcygpCmZpbmRfb3BlbmN2KCkKCgpzZXQoQ01BS0VfSU5TVEFMTF9SUEFUSCAiJHtPUEVOQ1ZfTElCX0RJUn0iIENBQ0hFIFBBVEggIkJ1aWxkIHdpdGggaW5zdGFsbCBycGF0aCIgRk9SQ0UpCgppbmNsdWRlX2RpcmVjdG9yaWVzKAogICR7T1BFTkNWX0lOQ0xVREVfRElSU30gJHtDTUFLRV9DVVJSRU5UX1NPVVJDRV9ESVJ9ICR7Q01BS0VfQ1VSUkVOVF9TT1VSQ0VfRElSfS9vcGVuY3YKICAke0NNQUtFX0NVUlJFTlRfU09VUkNFX0RJUn0vc3JjICR7Q01BS0VfQ1VSUkVOVF9TT1VSQ0VfRElSfS9pbmNsdWRlCiAgJHtDTUFLRV9DVVJSRU5UX1NPVVJDRV9ESVJ9L3F1aWNranMpCgpmb3JlYWNoKENYWF9TVEFOREFSRCBjKysyMCBjKysxNyBjKysxNCBjKysxMSkKICBzdHJpbmcoUkVQTEFDRSAiYysrIiAiQ1BMVVNQTFVTIiBDWFhfU1RBTkRBUkRfTlVNICIke0NYWF9TVEFOREFSRH0iKQogIHNldChDTUFLRV9SRVFVSVJFRF9RVUlFVCBUUlVFKQogIGNoZWNrX2N4eF9jb21waWxlcl9mbGFnKCItc3RkPSR7Q1hYX1NUQU5EQVJEfSIgQ1hYX1NUQU5EQVJEXyR7Q1hYX1NUQU5EQVJEX05VTX0pCiAgc2V0KENNQUtFX1JFUVVJUkVEX1FVSUVUIEZBTFNFKQogIGlmKENYWF9TVEFOREFSRF8ke0NYWF9TVEFOREFSRF9OVU19KQogICAgc3RyaW5nKFJFR0VYIFJFUExBQ0UgIlxcKyIgIngiIENYWF9TVEFOREFSRF9OQU1FICIke0NYWF9TVEFOREFSRF9WQUxVRX0iKQogICAgc3RyaW5nKFRPVVBQRVIgIiR7Q1hYX1NUQU5EQVJEX05BTUV9IiBDWFhfU1RBTkRBUkRfTkFNRSkKICAgIHN0cmluZyhSRUdFWCBSRVBMQUNFICJDWFgiICIiIENYWF9TVEFOREFSRF9WRVJTSU9OICIke0NYWF9TVEFOREFSRF9OQU1FfSIpCiAgICBtZXNzYWdlKCJDWFhfU1RBTkRBUkRfTkFNRSA9ICR7Q1hYX1NUQU5EQVJEX05BTUV9IikKICAgIG1lc3NhZ2UoIkNYWF9TVEFOREFSRF9WRVJTSU9OID0gJHtDWFhfU1RBTkRBUkRfVkVSU0lPTn0iKQoKICAgIGlmKENYWF9TVEFOREFSRF9OQU1FKQogICAgICBhZGRfZGVmaW5pdGlvbnMoLUQiJHtDWFhfU1RBTkRBUkRfTkFNRX0iKQogICAgZW5kaWYoQ1hYX1NUQU5EQVJEX05BTUUpCgogICAgc2V0KENYWF9TVEFOREFSRF9WQUxVRSAiJHtDWFhfU1RBTkRBUkR9IiBDQUNIRSBTVFJJTkcgIkMrKyBzdGFuZGFyZCIgRk9SQ0UpCiAgICBzZXQoQ1hYX1NUQU5EQVJEX0ZMQUcgIi1zdGQ9JHtDWFhfU1RBTkRBUkR9IiBDQUNIRSBTVFJJTkcgIkMrKyBzdGFuZGFyZCBhcmd1bWVudCIgRk9SQ0UpCiAgICBzZXQoQ01BS0VfQ1hYX0ZMQUdTICIke0NNQUtFX0NYWF9GTEFHU30gJHtDWFhfU1RBTkRBUkRfRkxBR30iKQogICAgYnJlYWsoKQogIGVuZGlmKENYWF9TVEFOREFSRF8ke0NYWF9TVEFOREFSRF9OVU19KQplbmRmb3JlYWNoKCkKCnN0cmluZyhSRUdFWCBSRVBMQUNFICJjXFwrXFwrIiAiIiBDWFhfU1RBTkRBUkRfVkVSU0lPTiAiJHtDWFhfU1RBTkRBUkRfVkFMVUV9IikKYWRkX2RlZmluaXRpb25zKC1EQ1hYX1NUQU5EQVJEPSR7Q1hYX1NUQU5EQVJEX1ZFUlNJT059KQoKbWVzc2FnZSgiQysrIHN0YW5kYXJkOiAke0NYWF9TVEFOREFSRF9WQUxVRX0iKQoKbWFjcm8oTk9XQVJOX0ZMQUcgRkxBRykKICBjYW5vbmljYWxpemUoVkFSTkFNRSAiJHtGTEFHfSIpCiAgY2hlY2tfY19jb21waWxlcl9mbGFnKCIke0ZMQUd9IiAiJHtWQVJOQU1FfSIpCiAgI2R1bXAoJHtWQVJOQU1FfSkKCiAgaWYoJHtWQVJOQU1FfSkKICAgIHNldChDTUFLRV9DX0ZMQUdTICIke0NNQUtFX0NfRkxBR1N9ICR7RkxBR30iKQogICAgc2V0KENNQUtFX0NYWF9GTEFHUyAiJHtDTUFLRV9DWFhfRkxBR1N9ICR7RkxBR30iKQoKICBlbmRpZigke1ZBUk5BTUV9KQplbmRtYWNybyhOT1dBUk5fRkxBRyBGTEFHKQoKc3RyaW5nKFJFR0VYIFJFUExBQ0UgIiAtV2FsbCIgIiIgQ01BS0VfQ19GTEFHUyAiJHtDTUFLRV9DX0ZMQUdTfSIpCnN0cmluZyhSRUdFWCBSRVBMQUNFICIgLVdhbGwiICIiIENNQUtFX0NYWF9GTEFHUyAiJHtDTUFLRV9DWFhfRkxBR1N9IikKCm5vd2Fybl9mbGFnKC1Xbm8tdW51c2VkLXZhbHVlKQpub3dhcm5fZmxhZygtV25vLXVudXNlZC12YXJpYWJsZSkKCmlmKCIke0NNQUtFX0NYWF9DT01QSUxFUl9JRH0iIE1BVENIRVMgIi4qQ2xhbmcuKiIpCiAgbm93YXJuX2ZsYWcoLVduby1kZXByZWNhdGVkLWFub24tZW51bS1lbnVtLWNvbnZlcnNpb24pCiAgbm93YXJuX2ZsYWcoLVduby1leHRlcm4tYy1jb21wYXQpCiAgbm93YXJuX2ZsYWcoLVduby1pbXBsaWNpdC1pbnQtZmxvYXQtY29udmVyc2lvbikKICBub3dhcm5fZmxhZygtV25vLWRlcHJlY2F0ZWQtZW51bS1lbnVtLWNvbnZlcnNpb24pCmVuZGlmKCIke0NNQUtFX0NYWF9DT01QSUxFUl9JRH0iIE1BVENIRVMgIi4qQ2xhbmcuKiIpCgojZHVtcChDTUFLRV9DX0ZMQUdTIENNQUtFX0NYWF9GTEFHUykKI2R1bXAoQ01BS0VfQ1hYX0ZMQUdTX0RFQlVHKQoKY2hlY2tfcGljX2ZsYWcoKQoKc2V0KERFQlVHX09VVFBVVCBUUlVFIENBQ0hFIEJPT0wgIkRlYnVnIG91dHB1dCIgRk9SQ0UpCnNldChERUJVR19NQVQgRkFMU0UgQ0FDSEUgQk9PTCAiRGVidWcgY3Y6Ok1hdCIgRk9SQ0UpCgpjaGVja19vcHRfbm9uZV9mbGFnKCkKCmNoZWNrX2RlYnVnX2dkYl9mbGFnKCkKCgpjaGVja19jX2NvbXBpbGVyX2ZsYWcoIi1mbHRvIiBIQVNfRl9MVE9fRkxBRykKCmlmKEhBU19GX0xUT19GTEFHKQogIG9wdGlvbihFTkFCTEVfTFRPICJFbmFibGUgbGluay10aW1lIG9wdGltaXphdGlvbiIgT0ZGKQplbmRpZihIQVNfRl9MVE9fRkxBRykKCmlmKEVOQUJMRV9MVE8pCiAgc2V0KENNQUtFX0NfRkxBR1MgIiR7Q01BS0VfQ19GTEFHU30gLWZsdG8iKQogIHNldChDTUFLRV9FWEVfTElOS0VSX0ZMQUdTICIke0NNQUtFX0VYRV9MSU5LRVJfRkxBR1N9IC1mbHRvIikKZW5kaWYoRU5BQkxFX0xUTykKCmxpbmtfZGlyZWN0b3JpZXMoQkVGT1JFICR7cXVpY2tqc19CSU5BUllfRElSfSkKCmxpbmtfZGlyZWN0b3JpZXMoIiR7Q01BS0VfQ1VSUkVOVF9CSU5BUllfRElSfS9xdWlja2pzIikKCm1hY3JvKGZpbmRfc3RhdGljX2xpYnJhcnkgVkFSIE5BTUUpCiAgZmluZF9saWJyYXJ5KCR7VkFSfSBOQU1FUyBsaWIke05BTUV9LmEgUEFUSFMgIiR7Q01BS0VfSU5TVEFMTF9QUkVGSVh9L2xpYiIgTk9fREVGQVVMVF9QQVRIKQplbmRtYWNybygpCgpzZXQoUVVJQ0tKU19MSUJSQVJZIHF1aWNranMpCmxpbmtfZGlyZWN0b3JpZXMoJHtDTUFLRV9DVVJSRU5UX0JJTkFSWV9ESVJ9L3F1aWNranMpCgpvcHRpb24oUVVJQ0tKU19NT0RVTEVTICJCdWlsZCAuc28gbW9kdWxlcyBmb3IgcXVpY2tqcyIgT04pCgppZihRVUlDS0pTX01PRFVMRVMpCiAgaW5jbHVkZSgke0NNQUtFX0NVUlJFTlRfU09VUkNFX0RJUn0vY21ha2UvanMtYmluZGluZ3MuY21ha2UpCmVuZGlmKFFVSUNLSlNfTU9EVUxFUykKCm9wdGlvbihCVUlMRF9RVUlDS0pTICJCdWlsZCBRdWlja0pTIiBPTikKCmZpbGUoR0xPQiBPUEVOQ1ZfU09VUkNFUyAqLmhwcCAqLmNwcCkKI2R1bXAoT1BFTkNWX1NPVVJDRVMpCgptYWtlX3NoYXJlZF9tb2R1bGUob3BlbmN2ICR7T1BFTkNWX1NPVVJDRVN9KQojIG1ha2VfanNfYmluZGluZ3MoKQoAAAAAAAAAAPgVAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAIRIAAAAAAAAhEgAAAAAAAAAAAAAAAPC/"
				],
				[
					552,
					1,
					"cut",
					null,
					"AQAAAEwJAAAAAAAATAkAAAAAAADWBAAAZm9yZWFjaChDWFhfU1RBTkRBUkQgYysrMjAgYysrMTcgYysrMTQgYysrMTEpCiAgc3RyaW5nKFJFUExBQ0UgImMrKyIgIkNQTFVTUExVUyIgQ1hYX1NUQU5EQVJEX05VTSAiJHtDWFhfU1RBTkRBUkR9IikKICBzZXQoQ01BS0VfUkVRVUlSRURfUVVJRVQgVFJVRSkKICBjaGVja19jeHhfY29tcGlsZXJfZmxhZygiLXN0ZD0ke0NYWF9TVEFOREFSRH0iIENYWF9TVEFOREFSRF8ke0NYWF9TVEFOREFSRF9OVU19KQogIHNldChDTUFLRV9SRVFVSVJFRF9RVUlFVCBGQUxTRSkKICBpZihDWFhfU1RBTkRBUkRfJHtDWFhfU1RBTkRBUkRfTlVNfSkKICAgIHN0cmluZyhSRUdFWCBSRVBMQUNFICJcXCsiICJ4IiBDWFhfU1RBTkRBUkRfTkFNRSAiJHtDWFhfU1RBTkRBUkRfVkFMVUV9IikKICAgIHN0cmluZyhUT1VQUEVSICIke0NYWF9TVEFOREFSRF9OQU1FfSIgQ1hYX1NUQU5EQVJEX05BTUUpCiAgICBzdHJpbmcoUkVHRVggUkVQTEFDRSAiQ1hYIiAiIiBDWFhfU1RBTkRBUkRfVkVSU0lPTiAiJHtDWFhfU1RBTkRBUkRfTkFNRX0iKQogICAgbWVzc2FnZSgiQ1hYX1NUQU5EQVJEX05BTUUgPSAke0NYWF9TVEFOREFSRF9OQU1FfSIpCiAgICBtZXNzYWdlKCJDWFhfU1RBTkRBUkRfVkVSU0lPTiA9ICR7Q1hYX1NUQU5EQVJEX1ZFUlNJT059IikKCiAgICBpZihDWFhfU1RBTkRBUkRfTkFNRSkKICAgICAgYWRkX2RlZmluaXRpb25zKC1EIiR7Q1hYX1NUQU5EQVJEX05BTUV9IikKICAgIGVuZGlmKENYWF9TVEFOREFSRF9OQU1FKQoKICAgIHNldChDWFhfU1RBTkRBUkRfVkFMVUUgIiR7Q1hYX1NUQU5EQVJEfSIgQ0FDSEUgU1RSSU5HICJDKysgc3RhbmRhcmQiIEZPUkNFKQogICAgc2V0KENYWF9TVEFOREFSRF9GTEFHICItc3RkPSR7Q1hYX1NUQU5EQVJEfSIgQ0FDSEUgU1RSSU5HICJDKysgc3RhbmRhcmQgYXJndW1lbnQiIEZPUkNFKQogICAgc2V0KENNQUtFX0NYWF9GTEFHUyAiJHtDTUFLRV9DWFhfRkxBR1N9ICR7Q1hYX1NUQU5EQVJEX0ZMQUd9IikKICAgIGJyZWFrKCkKICBlbmRpZihDWFhfU1RBTkRBUkRfJHtDWFhfU1RBTkRBUkRfTlVNfSkKZW5kZm9yZWFjaCgpCgpzdHJpbmcoUkVHRVggUkVQTEFDRSAiY1xcK1xcKyIgIiIgQ1hYX1NUQU5EQVJEX1ZFUlNJT04gIiR7Q1hYX1NUQU5EQVJEX1ZBTFVFfSIpCmFkZF9kZWZpbml0aW9ucygtRENYWF9TVEFOREFSRD0ke0NYWF9TVEFOREFSRF9WRVJTSU9OfSkKCm1lc3NhZ2UoIkMrKyBzdGFuZGFyZDogJHtDWFhfU1RBTkRBUkRfVkFMVUV9Iik",
					"AQAAAAAAAAABAAAAIg4AAAAAAABMCQAAAAAAAAAAAAAAAPC/"
				],
				[
					553,
					1,
					"paste",
					null,
					"AQAAAEwJAAAAAAAAYwkAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAATAkAAAAAAABMCQAAAAAAAAAAAAAAAPC/"
				],
				[
					554,
					1,
					"insert_snippet",
					{
						"contents": "($0)"
					},
					"AQAAAGMJAAAAAAAAZQkAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAYwkAAAAAAABjCQAAAAAAAAAAAAAAAPC/"
				],
				[
					562,
					1,
					"cut",
					null,
					"AQAAAGYJAAAAAAAAZgkAAAAAAAAqAQAACm1hY3JvKE5PV0FSTl9GTEFHIEZMQUcpCiAgY2Fub25pY2FsaXplKFZBUk5BTUUgIiR7RkxBR30iKQogIGNoZWNrX2NfY29tcGlsZXJfZmxhZygiJHtGTEFHfSIgIiR7VkFSTkFNRX0iKQogICMgZHVtcCgke1ZBUk5BTUV9KQoKICBpZigke1ZBUk5BTUV9KQogICAgc2V0KENNQUtFX0NfRkxBR1MgIiR7Q01BS0VfQ19GTEFHU30gJHtGTEFHfSIpCiAgICBzZXQoQ01BS0VfQ1hYX0ZMQUdTICIke0NNQUtFX0NYWF9GTEFHU30gJHtGTEFHfSIpCgogIGVuZGlmKCR7VkFSTkFNRX0pCmVuZG1hY3JvKE5PV0FSTl9GTEFHIEZMQUcpCg",
					"AQAAAAAAAAABAAAAZgkAAAAAAACQCgAAAAAAAAAAAAAAAPC/"
				],
				[
					563,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAAAREAAAY21ha2VfbWluaW11bV9yZXF1aXJlZChWRVJTSU9OIDMuMCkKcHJvamVjdChxanMtb3BlbmN2KQoKc2V0KERJU0FCTEVfV0VSUk9SIFRSVUUgQ0FDSEUgQk9PTCAiRGlzYWJsZSAtV2Vycm9yIGZsYWciIEZPUkNFKQoKc2V0KENNQUtFX0JVSUxEX1RZUEUgIkRlYnVnIiBDQUNIRSBTVFJJTkcgImJ1aWxkIHR5cGUiKQoKc2V0X3Byb3BlcnR5KENBQ0hFIENNQUtFX0JVSUxEX1RZUEUgUFJPUEVSVFkgU1RSSU5HUyBEZWJ1ZyBSZWxlYXNlIE1pblNpemVSZWwgUmVsV2l0aERlYkluZm8pCgpzZXQocXVpY2tqc19zb3VyY2VzX3Jvb3QgJHtDTUFLRV9DVVJSRU5UX1NPVVJDRV9ESVJ9L3F1aWNranMpCgppZihOT1QgQ01BS0VfQlVJTERfVFlQRSBPUiBDTUFLRV9CVUlMRF9UWVBFIFNUUkVRVUFMICIiKQogIHNldChDTUFLRV9CVUlMRF9UWVBFICJEZWJ1ZyIpCmVuZGlmKE5PVCBDTUFLRV9CVUlMRF9UWVBFIE9SIENNQUtFX0JVSUxEX1RZUEUgU1RSRVFVQUwgIiIpCgppZihXSU4zMikKICBzZXQoTElCV1MyXzMyIHdzMl8zMikKZWxzZShXSU4zMikKCmVuZGlmKFdJTjMyKQoKaW5jbHVkZShGaW5kVGhyZWFkcykKaW5jbHVkZShDaGVja0NDb21waWxlckZsYWcpCmluY2x1ZGUoQ2hlY2tDWFhDb21waWxlckZsYWcpCmluY2x1ZGUoQ2hlY2tMaWJyYXJ5RXhpc3RzKQppbmNsdWRlKENoZWNrVHlwZVNpemUpCmluY2x1ZGUoRmluZFBrZ0NvbmZpZykKaW5jbHVkZSgke0NNQUtFX0NVUlJFTlRfU09VUkNFX0RJUn0vY21ha2UvZnVuY3Rpb25zLmNtYWtlKQppbmNsdWRlKCR7Q01BS0VfQ1VSUkVOVF9TT1VSQ0VfRElSfS9jbWFrZS9GaW5kUXVpY2tKUy5jbWFrZSkKaW5jbHVkZSgke0NNQUtFX0NVUlJFTlRfU09VUkNFX0RJUn0vY21ha2Uvb3BlbmN2LmNtYWtlKQoKaWYoRU5BQkxFX0NDQUNIRSkKICBpbmNsdWRlKCR7Q01BS0VfQ1VSUkVOVF9TT1VSQ0VfRElSfS9jbWFrZS9jY2FjaGUuY21ha2UpCiAgZW5hYmxlX2NjYWNoZSgpCmVuZGlmKEVOQUJMRV9DQ0FDSEUpCgptYWNybyhjaGVja19zaXplIFRZUEUgVkFSKQogIGNoZWNrX3R5cGVfc2l6ZSgiJHtUWVBFfSIgQ01BS0VfJHtWQVJ9KQogIGlmKCR7Q01BS0VfJHtWQVJ9fSkKICAgICMgbGlzdChBUFBFTkQgUExPVENWX0RFRlMgJHtWQVJ9PSR7Q01BS0VfJHtWQVJ9fSkKICBlbmRpZigke0NNQUtFXyR7VkFSfX0pCiAgbWVzc2FnZShTVEFUVVMgInNpemUgb2YgJHtUWVBFfSAke0NNQUtFXyR7VkFSfX0iKQplbmRtYWNybyhjaGVja19zaXplIFRZUEUgVkFSKQoKY2hlY2tfc2l6ZSgibG9uZyIgU0laRU9GX0xPTkcpCmNoZWNrX3NpemUoImxvbmcgbG9uZyIgU0laRU9GX0xPTkdfTE9ORykKY2hlY2tfc2l6ZSgic2l6ZV90IiBTSVpFT0ZfU0laRV9UKQoKaWYoTk9UIFBPU0lUSU9OX0lOREVQRU5ERU5UX0NPREUpCiAgc2V0KFBPU0lUSU9OX0lOREVQRU5ERU5UX0NPREUgT04pCmVuZGlmKE5PVCBQT1NJVElPTl9JTkRFUEVOREVOVF9DT0RFKQpvcHRpb24oQlVJTERfU0hBUkVEX0xJQlMgIkJ1aWxkIHNoYXJlZCBsaWJyYXJpZXMiIE9OKQoKbWVzc2FnZSgiVGhyZWFkIGxpYnJhcnk6ICR7Q01BS0VfVEhSRUFEX0xJQlNfSU5JVH0iKQppZihDTUFLRV9USFJFQURfTElCU19JTklUKQogIHNldChMSUJQVEhSRUFEICR7Q01BS0VfVEhSRUFEX0xJQlNfSU5JVH0pCmVuZGlmKENNQUtFX1RIUkVBRF9MSUJTX0lOSVQpCgpjaGVja19saWJyYXJ5X2V4aXN0cyhtIGF0YW4yIC91c3IvbGliIEhBVkVfTElCTSkKaWYoSEFWRV9MSUJNKQogIHNldChMSUJNIG0pCiAgIyBtZXNzYWdlKCJGb3VuZCBtYXRoIGxpYnJhcnk6ICR7TElCTX0iKQplbmRpZihIQVZFX0xJQk0pCgpjaGVja19saWJyYXJ5X2V4aXN0cyhkbCBkbG9wZW4gL3Vzci9saWIgSEFWRV9MSUJETCkKaWYoSEFWRV9MSUJETCkKICBzZXQoTElCREwgZGwpCiAgIyBtZXNzYWdlKCJGb3VuZCBkbGZjbiBsaWJyYXJ5OiAke0xJQkRMfSIpCmVuZGlmKEhBVkVfTElCREwpCgpjaGVja19saWJyYXJ5X2V4aXN0cyhqc29uLWNwcCBaTjRZQU1MNmRldGFpbDlub2RlX2RhdGE5cmVzZXRfbWFwRXYgL3VzciBKU09OX0NQUCkKCmZpbmRfcXVpY2tqcygpCmZpbmRfb3BlbmN2KCkKCnNldChDTUFLRV9JTlNUQUxMX1JQQVRIICIke09QRU5DVl9MSUJfRElSfSIgQ0FDSEUgUEFUSCAiQnVpbGQgd2l0aCBpbnN0YWxsIHJwYXRoIiBGT1JDRSkKCmluY2x1ZGVfZGlyZWN0b3JpZXMoCiAgJHtPUEVOQ1ZfSU5DTFVERV9ESVJTfSAke0NNQUtFX0NVUlJFTlRfU09VUkNFX0RJUn0gJHtDTUFLRV9DVVJSRU5UX1NPVVJDRV9ESVJ9L29wZW5jdgogICR7Q01BS0VfQ1VSUkVOVF9TT1VSQ0VfRElSfS9zcmMgJHtDTUFLRV9DVVJSRU5UX1NPVVJDRV9ESVJ9L2luY2x1ZGUKICAke0NNQUtFX0NVUlJFTlRfU09VUkNFX0RJUn0vcXVpY2tqcykKCmNoZWNrX2N4eF9zdGFuZGFyZF9mbGFnKCkKCnN0cmluZyhSRUdFWCBSRVBMQUNFICIgLVdhbGwiICIiIENNQUtFX0NfRkxBR1MgIiR7Q01BS0VfQ19GTEFHU30iKQpzdHJpbmcoUkVHRVggUkVQTEFDRSAiIC1XYWxsIiAiIiBDTUFLRV9DWFhfRkxBR1MgIiR7Q01BS0VfQ1hYX0ZMQUdTfSIpCgpub3dhcm5fZmxhZygtV25vLXVudXNlZC12YWx1ZSkKbm93YXJuX2ZsYWcoLVduby11bnVzZWQtdmFyaWFibGUpCgppZigiJHtDTUFLRV9DWFhfQ09NUElMRVJfSUR9IiBNQVRDSEVTICIuKkNsYW5nLioiKQogIG5vd2Fybl9mbGFnKC1Xbm8tZGVwcmVjYXRlZC1hbm9uLWVudW0tZW51bS1jb252ZXJzaW9uKQogIG5vd2Fybl9mbGFnKC1Xbm8tZXh0ZXJuLWMtY29tcGF0KQogIG5vd2Fybl9mbGFnKC1Xbm8taW1wbGljaXQtaW50LWZsb2F0LWNvbnZlcnNpb24pCiAgbm93YXJuX2ZsYWcoLVduby1kZXByZWNhdGVkLWVudW0tZW51bS1jb252ZXJzaW9uKQplbmRpZigiJHtDTUFLRV9DWFhfQ09NUElMRVJfSUR9IiBNQVRDSEVTICIuKkNsYW5nLioiKQoKIyBkdW1wKENNQUtFX0NfRkxBR1MgQ01BS0VfQ1hYX0ZMQUdTKSBkdW1wKENNQUtFX0NYWF9GTEFHU19ERUJVRykKCmNoZWNrX3BpY19mbGFnKCkKCnNldChERUJVR19PVVRQVVQgVFJVRSBDQUNIRSBCT09MICJEZWJ1ZyBvdXRwdXQiIEZPUkNFKQpzZXQoREVCVUdfTUFUIEZBTFNFIENBQ0hFIEJPT0wgIkRlYnVnIGN2OjpNYXQiIEZPUkNFKQoKY2hlY2tfb3B0X25vbmVfZmxhZygpCgpjaGVja19kZWJ1Z19nZGJfZmxhZygpCgpjaGVja19jX2NvbXBpbGVyX2ZsYWcoIi1mbHRvIiBIQVNfRl9MVE9fRkxBRykKCmlmKEhBU19GX0xUT19GTEFHKQogIG9wdGlvbihFTkFCTEVfTFRPICJFbmFibGUgbGluay10aW1lIG9wdGltaXphdGlvbiIgT0ZGKQplbmRpZihIQVNfRl9MVE9fRkxBRykKCmlmKEVOQUJMRV9MVE8pCiAgc2V0KENNQUtFX0NfRkxBR1MgIiR7Q01BS0VfQ19GTEFHU30gLWZsdG8iKQogIHNldChDTUFLRV9FWEVfTElOS0VSX0ZMQUdTICIke0NNQUtFX0VYRV9MSU5LRVJfRkxBR1N9IC1mbHRvIikKZW5kaWYoRU5BQkxFX0xUTykKCmxpbmtfZGlyZWN0b3JpZXMoQkVGT1JFICR7cXVpY2tqc19CSU5BUllfRElSfSkKCmxpbmtfZGlyZWN0b3JpZXMoIiR7Q01BS0VfQ1VSUkVOVF9CSU5BUllfRElSfS9xdWlja2pzIikKCm1hY3JvKGZpbmRfc3RhdGljX2xpYnJhcnkgVkFSIE5BTUUpCiAgZmluZF9saWJyYXJ5KCR7VkFSfSBOQU1FUyBsaWIke05BTUV9LmEgUEFUSFMgIiR7Q01BS0VfSU5TVEFMTF9QUkVGSVh9L2xpYiIgTk9fREVGQVVMVF9QQVRIKQplbmRtYWNybygpCgpzZXQoUVVJQ0tKU19MSUJSQVJZIHF1aWNranMpCmxpbmtfZGlyZWN0b3JpZXMoJHtDTUFLRV9DVVJSRU5UX0JJTkFSWV9ESVJ9L3F1aWNranMpCgpvcHRpb24oUVVJQ0tKU19NT0RVTEVTICJCdWlsZCAuc28gbW9kdWxlcyBmb3IgcXVpY2tqcyIgT04pCgppZihRVUlDS0pTX01PRFVMRVMpCiAgaW5jbHVkZSgke0NNQUtFX0NVUlJFTlRfU09VUkNFX0RJUn0vY21ha2UvanMtYmluZGluZ3MuY21ha2UpCmVuZGlmKFFVSUNLSlNfTU9EVUxFUykKCm9wdGlvbihCVUlMRF9RVUlDS0pTICJCdWlsZCBRdWlja0pTIiBPTikKCmZpbGUoR0xPQiBPUEVOQ1ZfU09VUkNFUyAqLmhwcCAqLmNwcCkKIyBkdW1wKE9QRU5DVl9TT1VSQ0VTKQoKbWFrZV9zaGFyZWRfbW9kdWxlKG9wZW5jdiAke09QRU5DVl9TT1VSQ0VTfSkKIyBtYWtlX2pzX2JpbmRpbmdzKCkKAAAAAAAAAABHEQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAZgkAAAAAAABmCQAAAAAAAAAAAAAAAPC/"
				],
				[
					571,
					1,
					"insert",
					{
						"characters": " "
					},
					"AgAAAGYJAAAAAAAAZwkAAAAAAAAAAAAAZwkAAAAAAABnCQAAAAAAADUBAAAKbWFjcm8oY2hlY2tfbm93YXJuX2ZsYWcgRkxBRykKICBjYW5vbmljYWxpemUoVkFSTkFNRSAiJHtGTEFHfSIpCiAgY2hlY2tfY19jb21waWxlcl9mbGFnKCIke0ZMQUd9IiAiJHtWQVJOQU1FfSIpCiAgIyBkdW1wKCR7VkFSTkFNRX0pCgogIGlmKCR7VkFSTkFNRX0pCiAgICBzZXQoQ01BS0VfQ19GTEFHUyAiJHtDTUFLRV9DX0ZMQUdTfSAke0ZMQUd9IikKICAgIHNldChDTUFLRV9DWFhfRkxBR1MgIiR7Q01BS0VfQ1hYX0ZMQUdTfSAke0ZMQUd9IikKCiAgZW5kaWYoJHtWQVJOQU1FfSkKZW5kbWFjcm8oY2hlY2tfbm93YXJuX2ZsYWcgRkxBRyk",
					"AQAAAAAAAAABAAAAZgkAAAAAAACbCgAAAAAAAAAAAAAAAPC/"
				],
				[
					581,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAAATEAAAY21ha2VfbWluaW11bV9yZXF1aXJlZChWRVJTSU9OIDMuMCkKcHJvamVjdChxanMtb3BlbmN2KQoKc2V0KERJU0FCTEVfV0VSUk9SIFRSVUUgQ0FDSEUgQk9PTCAiRGlzYWJsZSAtV2Vycm9yIGZsYWciIEZPUkNFKQoKc2V0KENNQUtFX0JVSUxEX1RZUEUgIkRlYnVnIiBDQUNIRSBTVFJJTkcgImJ1aWxkIHR5cGUiKQoKc2V0X3Byb3BlcnR5KENBQ0hFIENNQUtFX0JVSUxEX1RZUEUgUFJPUEVSVFkgU1RSSU5HUyBEZWJ1ZyBSZWxlYXNlIE1pblNpemVSZWwgUmVsV2l0aERlYkluZm8pCgpzZXQocXVpY2tqc19zb3VyY2VzX3Jvb3QgJHtDTUFLRV9DVVJSRU5UX1NPVVJDRV9ESVJ9L3F1aWNranMpCgppZihOT1QgQ01BS0VfQlVJTERfVFlQRSBPUiBDTUFLRV9CVUlMRF9UWVBFIFNUUkVRVUFMICIiKQogIHNldChDTUFLRV9CVUlMRF9UWVBFICJEZWJ1ZyIpCmVuZGlmKE5PVCBDTUFLRV9CVUlMRF9UWVBFIE9SIENNQUtFX0JVSUxEX1RZUEUgU1RSRVFVQUwgIiIpCgppZihXSU4zMikKICBzZXQoTElCV1MyXzMyIHdzMl8zMikKZWxzZShXSU4zMikKCmVuZGlmKFdJTjMyKQoKaW5jbHVkZShGaW5kVGhyZWFkcykKaW5jbHVkZShDaGVja0NDb21waWxlckZsYWcpCmluY2x1ZGUoQ2hlY2tDWFhDb21waWxlckZsYWcpCmluY2x1ZGUoQ2hlY2tMaWJyYXJ5RXhpc3RzKQppbmNsdWRlKENoZWNrVHlwZVNpemUpCmluY2x1ZGUoRmluZFBrZ0NvbmZpZykKaW5jbHVkZSgke0NNQUtFX0NVUlJFTlRfU09VUkNFX0RJUn0vY21ha2UvZnVuY3Rpb25zLmNtYWtlKQppbmNsdWRlKCR7Q01BS0VfQ1VSUkVOVF9TT1VSQ0VfRElSfS9jbWFrZS9GaW5kUXVpY2tKUy5jbWFrZSkKaW5jbHVkZSgke0NNQUtFX0NVUlJFTlRfU09VUkNFX0RJUn0vY21ha2Uvb3BlbmN2LmNtYWtlKQoKaWYoRU5BQkxFX0NDQUNIRSkKICBpbmNsdWRlKCR7Q01BS0VfQ1VSUkVOVF9TT1VSQ0VfRElSfS9jbWFrZS9jY2FjaGUuY21ha2UpCiAgZW5hYmxlX2NjYWNoZSgpCmVuZGlmKEVOQUJMRV9DQ0FDSEUpCgptYWNybyhjaGVja19zaXplIFRZUEUgVkFSKQogIGNoZWNrX3R5cGVfc2l6ZSgiJHtUWVBFfSIgQ01BS0VfJHtWQVJ9KQogIGlmKCR7Q01BS0VfJHtWQVJ9fSkKICAgICMgbGlzdChBUFBFTkQgUExPVENWX0RFRlMgJHtWQVJ9PSR7Q01BS0VfJHtWQVJ9fSkKICBlbmRpZigke0NNQUtFXyR7VkFSfX0pCiAgbWVzc2FnZShTVEFUVVMgInNpemUgb2YgJHtUWVBFfSAke0NNQUtFXyR7VkFSfX0iKQplbmRtYWNybyhjaGVja19zaXplIFRZUEUgVkFSKQoKY2hlY2tfc2l6ZSgibG9uZyIgU0laRU9GX0xPTkcpCmNoZWNrX3NpemUoImxvbmcgbG9uZyIgU0laRU9GX0xPTkdfTE9ORykKY2hlY2tfc2l6ZSgic2l6ZV90IiBTSVpFT0ZfU0laRV9UKQoKaWYoTk9UIFBPU0lUSU9OX0lOREVQRU5ERU5UX0NPREUpCiAgc2V0KFBPU0lUSU9OX0lOREVQRU5ERU5UX0NPREUgT04pCmVuZGlmKE5PVCBQT1NJVElPTl9JTkRFUEVOREVOVF9DT0RFKQpvcHRpb24oQlVJTERfU0hBUkVEX0xJQlMgIkJ1aWxkIHNoYXJlZCBsaWJyYXJpZXMiIE9OKQoKbWVzc2FnZSgiVGhyZWFkIGxpYnJhcnk6ICR7Q01BS0VfVEhSRUFEX0xJQlNfSU5JVH0iKQppZihDTUFLRV9USFJFQURfTElCU19JTklUKQogIHNldChMSUJQVEhSRUFEICR7Q01BS0VfVEhSRUFEX0xJQlNfSU5JVH0pCmVuZGlmKENNQUtFX1RIUkVBRF9MSUJTX0lOSVQpCgpjaGVja19saWJyYXJ5X2V4aXN0cyhtIGF0YW4yIC91c3IvbGliIEhBVkVfTElCTSkKaWYoSEFWRV9MSUJNKQogIHNldChMSUJNIG0pCiAgIyBtZXNzYWdlKCJGb3VuZCBtYXRoIGxpYnJhcnk6ICR7TElCTX0iKQplbmRpZihIQVZFX0xJQk0pCgpjaGVja19saWJyYXJ5X2V4aXN0cyhkbCBkbG9wZW4gL3Vzci9saWIgSEFWRV9MSUJETCkKaWYoSEFWRV9MSUJETCkKICBzZXQoTElCREwgZGwpCiAgIyBtZXNzYWdlKCJGb3VuZCBkbGZjbiBsaWJyYXJ5OiAke0xJQkRMfSIpCmVuZGlmKEhBVkVfTElCREwpCgpjaGVja19saWJyYXJ5X2V4aXN0cyhqc29uLWNwcCBaTjRZQU1MNmRldGFpbDlub2RlX2RhdGE5cmVzZXRfbWFwRXYgL3VzciBKU09OX0NQUCkKCmZpbmRfcXVpY2tqcygpCmZpbmRfb3BlbmN2KCkKCnNldChDTUFLRV9JTlNUQUxMX1JQQVRIICIke09QRU5DVl9MSUJfRElSfSIgQ0FDSEUgUEFUSCAiQnVpbGQgd2l0aCBpbnN0YWxsIHJwYXRoIiBGT1JDRSkKCmluY2x1ZGVfZGlyZWN0b3JpZXMoCiAgJHtPUEVOQ1ZfSU5DTFVERV9ESVJTfSAke0NNQUtFX0NVUlJFTlRfU09VUkNFX0RJUn0gJHtDTUFLRV9DVVJSRU5UX1NPVVJDRV9ESVJ9L29wZW5jdgogICR7Q01BS0VfQ1VSUkVOVF9TT1VSQ0VfRElSfS9zcmMgJHtDTUFLRV9DVVJSRU5UX1NPVVJDRV9ESVJ9L2luY2x1ZGUKICAke0NNQUtFX0NVUlJFTlRfU09VUkNFX0RJUn0vcXVpY2tqcykKCmNoZWNrX2N4eF9zdGFuZGFyZF9mbGFnKCkKIAoKc3RyaW5nKFJFR0VYIFJFUExBQ0UgIiAtV2FsbCIgIiIgQ01BS0VfQ19GTEFHUyAiJHtDTUFLRV9DX0ZMQUdTfSIpCnN0cmluZyhSRUdFWCBSRVBMQUNFICIgLVdhbGwiICIiIENNQUtFX0NYWF9GTEFHUyAiJHtDTUFLRV9DWFhfRkxBR1N9IikKCm5vd2Fybl9mbGFnKC1Xbm8tdW51c2VkLXZhbHVlKQpub3dhcm5fZmxhZygtV25vLXVudXNlZC12YXJpYWJsZSkKCmlmKCIke0NNQUtFX0NYWF9DT01QSUxFUl9JRH0iIE1BVENIRVMgIi4qQ2xhbmcuKiIpCiAgbm93YXJuX2ZsYWcoLVduby1kZXByZWNhdGVkLWFub24tZW51bS1lbnVtLWNvbnZlcnNpb24pCiAgbm93YXJuX2ZsYWcoLVduby1leHRlcm4tYy1jb21wYXQpCiAgbm93YXJuX2ZsYWcoLVduby1pbXBsaWNpdC1pbnQtZmxvYXQtY29udmVyc2lvbikKICBub3dhcm5fZmxhZygtV25vLWRlcHJlY2F0ZWQtZW51bS1lbnVtLWNvbnZlcnNpb24pCmVuZGlmKCIke0NNQUtFX0NYWF9DT01QSUxFUl9JRH0iIE1BVENIRVMgIi4qQ2xhbmcuKiIpCgojIGR1bXAoQ01BS0VfQ19GTEFHUyBDTUFLRV9DWFhfRkxBR1MpIGR1bXAoQ01BS0VfQ1hYX0ZMQUdTX0RFQlVHKQoKY2hlY2tfcGljX2ZsYWcoKQoKc2V0KERFQlVHX09VVFBVVCBUUlVFIENBQ0hFIEJPT0wgIkRlYnVnIG91dHB1dCIgRk9SQ0UpCnNldChERUJVR19NQVQgRkFMU0UgQ0FDSEUgQk9PTCAiRGVidWcgY3Y6Ok1hdCIgRk9SQ0UpCgpjaGVja19vcHRfbm9uZV9mbGFnKCkKCmNoZWNrX2RlYnVnX2dkYl9mbGFnKCkKCmNoZWNrX2NfY29tcGlsZXJfZmxhZygiLWZsdG8iIEhBU19GX0xUT19GTEFHKQoKaWYoSEFTX0ZfTFRPX0ZMQUcpCiAgb3B0aW9uKEVOQUJMRV9MVE8gIkVuYWJsZSBsaW5rLXRpbWUgb3B0aW1pemF0aW9uIiBPRkYpCmVuZGlmKEhBU19GX0xUT19GTEFHKQoKaWYoRU5BQkxFX0xUTykKICBzZXQoQ01BS0VfQ19GTEFHUyAiJHtDTUFLRV9DX0ZMQUdTfSAtZmx0byIpCiAgc2V0KENNQUtFX0VYRV9MSU5LRVJfRkxBR1MgIiR7Q01BS0VfRVhFX0xJTktFUl9GTEFHU30gLWZsdG8iKQplbmRpZihFTkFCTEVfTFRPKQoKbGlua19kaXJlY3RvcmllcyhCRUZPUkUgJHtxdWlja2pzX0JJTkFSWV9ESVJ9KQoKbGlua19kaXJlY3RvcmllcygiJHtDTUFLRV9DVVJSRU5UX0JJTkFSWV9ESVJ9L3F1aWNranMiKQoKbWFjcm8oZmluZF9zdGF0aWNfbGlicmFyeSBWQVIgTkFNRSkKICBmaW5kX2xpYnJhcnkoJHtWQVJ9IE5BTUVTIGxpYiR7TkFNRX0uYSBQQVRIUyAiJHtDTUFLRV9JTlNUQUxMX1BSRUZJWH0vbGliIiBOT19ERUZBVUxUX1BBVEgpCmVuZG1hY3JvKCkKCnNldChRVUlDS0pTX0xJQlJBUlkgcXVpY2tqcykKbGlua19kaXJlY3Rvcmllcygke0NNQUtFX0NVUlJFTlRfQklOQVJZX0RJUn0vcXVpY2tqcykKCm9wdGlvbihRVUlDS0pTX01PRFVMRVMgIkJ1aWxkIC5zbyBtb2R1bGVzIGZvciBxdWlja2pzIiBPTikKCmlmKFFVSUNLSlNfTU9EVUxFUykKICBpbmNsdWRlKCR7Q01BS0VfQ1VSUkVOVF9TT1VSQ0VfRElSfS9jbWFrZS9qcy1iaW5kaW5ncy5jbWFrZSkKZW5kaWYoUVVJQ0tKU19NT0RVTEVTKQoKb3B0aW9uKEJVSUxEX1FVSUNLSlMgIkJ1aWxkIFF1aWNrSlMiIE9OKQoKZmlsZShHTE9CIE9QRU5DVl9TT1VSQ0VTICouaHBwICouY3BwKQojIGR1bXAoT1BFTkNWX1NPVVJDRVMpCgptYWtlX3NoYXJlZF9tb2R1bGUob3BlbmN2ICR7T1BFTkNWX1NPVVJDRVN9KQojIG1ha2VfanNfYmluZGluZ3MoKQoAAAAAAAAAADcQAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA9AkAAAAAAAD/CQAAAAAAAAAAAAAAAPC/"
				],
				[
					604,
					1,
					"left_delete",
					null,
					"AQAAACgEAAAAAAAAKAQAAAAAAABlAAAAICBpZigke0NNQUtFXyR7VkFSfX0pCiAgICAjIGxpc3QoQVBQRU5EIFBMT1RDVl9ERUZTICR7VkFSfT0ke0NNQUtFXyR7VkFSfX0pCiAgZW5kaWYoJHtDTUFLRV8ke1ZBUn19KQo",
					"AQAAAAAAAAABAAAAKAQAAAAAAACNBAAAAAAAAAAAAAAAAPC/"
				],
				[
					607,
					1,
					"cut",
					null,
					"AQAAAOIDAAAAAAAA4gMAAAAAAACYAAAACm1hY3JvKGNoZWNrX3NpemUgVFlQRSBWQVIpCiAgY2hlY2tfdHlwZV9zaXplKCIke1RZUEV9IiBDTUFLRV8ke1ZBUn0pCiAgbWVzc2FnZShTVEFUVVMgInNpemUgb2YgJHtUWVBFfSAke0NNQUtFXyR7VkFSfX0iKQplbmRtYWNybyhjaGVja19zaXplIFRZUEUgVkFSKQo",
					"AQAAAAAAAAABAAAA4gMAAAAAAAB6BAAAAAAAAAAAAAAAAPC/"
				],
				[
					608,
					1,
					"paste",
					null,
					"AQAAAOIDAAAAAAAAegQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA4gMAAAAAAADiAwAAAAAAAAAAAAAAAPC/"
				],
				[
					611,
					1,
					"cut",
					null,
					"AQAAAOIDAAAAAAAA4gMAAAAAAACYAAAACm1hY3JvKGNoZWNrX3NpemUgVFlQRSBWQVIpCiAgY2hlY2tfdHlwZV9zaXplKCIke1RZUEV9IiBDTUFLRV8ke1ZBUn0pCiAgbWVzc2FnZShTVEFUVVMgInNpemUgb2YgJHtUWVBFfSAke0NNQUtFXyR7VkFSfX0iKQplbmRtYWNybyhjaGVja19zaXplIFRZUEUgVkFSKQo",
					"AQAAAAAAAAABAAAAegQAAAAAAADiAwAAAAAAAAAAAAAAAPC/"
				],
				[
					625,
					1,
					"cut",
					null,
					"AQAAAAYNAAAAAAAABg0AAAAAAACOAAAACm1hY3JvKGZpbmRfc3RhdGljX2xpYnJhcnkgVkFSIE5BTUUpCiAgZmluZF9saWJyYXJ5KCR7VkFSfSBOQU1FUyBsaWIke05BTUV9LmEgUEFUSFMgIiR7Q01BS0VfSU5TVEFMTF9QUkVGSVh9L2xpYiIgTk9fREVGQVVMVF9QQVRIKQplbmRtYWNybygpCg",
					"AQAAAAAAAAABAAAABg0AAAAAAACUDQAAAAAAAAAAAAAAAPC/"
				],
				[
					642,
					1,
					"cut",
					null,
					"AQAAAHQCAAAAAAAAdAIAAAAAAAAzAAAAaW5jbHVkZShDaGVja0xpYnJhcnlFeGlzdHMpCmluY2x1ZGUoQ2hlY2tUeXBlU2l6ZSkK",
					"AQAAAAAAAAABAAAAdAIAAAAAAACnAgAAAAAAAAAAAAAAAPC/"
				],
				[
					647,
					1,
					"cut",
					null,
					"AQAAADoCAAAAAAAAOgIAAAAAAAA6AAAAaW5jbHVkZShDaGVja0NDb21waWxlckZsYWcpCmluY2x1ZGUoQ2hlY2tDWFhDb21waWxlckZsYWcpCg",
					"AQAAAAAAAAABAAAAOgIAAAAAAAB0AgAAAAAAAAAAAAAAAPC/"
				],
				[
					667,
					1,
					"cut",
					null,
					"AQAAAFECAAAAAAAAUQIAAAAAAAA7AAAAaW5jbHVkZSgke0NNQUtFX0NVUlJFTlRfU09VUkNFX0RJUn0vY21ha2UvZnVuY3Rpb25zLmNtYWtlKQo",
					"AQAAAAAAAAABAAAAUQIAAAAAAACMAgAAAAAAAAAAAAAAAPC/"
				],
				[
					668,
					2,
					"paste",
					null,
					"AgAAAFECAAAAAAAAjAIAAAAAAAAAAAAAjAIAAAAAAADHAgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAUQIAAAAAAABRAgAAAAAAAAAAAAAAAPC/"
				],
				[
					675,
					1,
					"insert",
					{
						"characters": "check-flags"
					},
					"DAAAALYCAAAAAAAAtwIAAAAAAAAAAAAAtwIAAAAAAAC3AgAAAAAAAAkAAABmdW5jdGlvbnO3AgAAAAAAALgCAAAAAAAAAAAAALgCAAAAAAAAuQIAAAAAAAAAAAAAuQIAAAAAAAC6AgAAAAAAAAAAAAC6AgAAAAAAALsCAAAAAAAAAAAAALsCAAAAAAAAvAIAAAAAAAAAAAAAvAIAAAAAAAC9AgAAAAAAAAAAAAC9AgAAAAAAAL4CAAAAAAAAAAAAAL4CAAAAAAAAvwIAAAAAAAAAAAAAvwIAAAAAAADAAgAAAAAAAAAAAADAAgAAAAAAAMECAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAtgIAAAAAAAC/AgAAAAAAAAAAAAAAAPC/"
				],
				[
					690,
					1,
					"insert",
					{
						"characters": "F"
					},
					"AgAAAHsCAAAAAAAAfAIAAAAAAAAAAAAAfAIAAAAAAAB8AgAAAAAAAAEAAABm",
					"AQAAAAAAAAABAAAAfAIAAAAAAAB7AgAAAAAAAAAAAAAAAPC/"
				],
				[
					693,
					2,
					"left_delete",
					null,
					"AgAAALcCAAAAAAAAtwIAAAAAAAABAAAAaLYCAAAAAAAAtgIAAAAAAAABAAAAYw",
					"AQAAAAAAAAABAAAAuAIAAAAAAAC3AgAAAAAAAAAAAAAAAPC/"
				],
				[
					694,
					1,
					"insert",
					{
						"characters": "Ch"
					},
					"AgAAALYCAAAAAAAAtwIAAAAAAAAAAAAAtwIAAAAAAAC4AgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAtgIAAAAAAAC2AgAAAAAAAAAAAAAAAPC/"
				],
				[
					697,
					2,
					"left_delete",
					null,
					"AgAAALwCAAAAAAAAvAIAAAAAAAABAAAAZrsCAAAAAAAAuwIAAAAAAAABAAAALQ",
					"AQAAAAAAAAABAAAAvQIAAAAAAAC9AgAAAAAAAAAAAAAAAPC/"
				],
				[
					698,
					1,
					"insert",
					{
						"characters": "F"
					},
					"AQAAALsCAAAAAAAAvAIAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAuwIAAAAAAAC7AgAAAAAAAAAAAAAAAPC/"
				],
				[
					700,
					2,
					"left_delete",
					null,
					"AgAAADQDAAAAAAAANAMAAAAAAAABAAAAdjMDAAAAAAAAMwMAAAAAAAABAAAAYw",
					"AQAAAAAAAAABAAAANQMAAAAAAAA1AwAAAAAAAAAAAAAAAH5A"
				],
				[
					701,
					1,
					"insert",
					{
						"characters": "CV"
					},
					"AgAAADMDAAAAAAAANAMAAAAAAAAAAAAANAMAAAAAAAA1AwAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAMwMAAAAAAAAzAwAAAAAAAAAAAAAAAPC/"
				],
				[
					703,
					1,
					"left_delete",
					null,
					"AQAAAC8DAAAAAAAALwMAAAAAAAABAAAAbw",
					"AQAAAAAAAAABAAAAMAMAAAAAAAAwAwAAAAAAAAAAAAAAAPC/"
				],
				[
					704,
					1,
					"insert",
					{
						"characters": "O"
					},
					"AQAAAC8DAAAAAAAAMAMAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAALwMAAAAAAAAvAwAAAAAAAAAAAAAAAPC/"
				],
				[
					719,
					1,
					"insert",
					{
						"characters": "JSB"
					},
					"BAAAAKYNAAAAAAAApw0AAAAAAAAAAAAApw0AAAAAAACnDQAAAAAAAAQAAABqcy1ipw0AAAAAAACoDQAAAAAAAAAAAACoDQAAAAAAAKkNAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAApg0AAAAAAACqDQAAAAAAAAAAAAAAAPC/"
				],
				[
					723,
					1,
					"left_delete",
					null,
					"AQAAAGYNAAAAAAAAZg0AAAAAAAAUAAAAaWYoUVVJQ0tKU19NT0RVTEVTKQo",
					"AQAAAAAAAAABAAAAeg0AAAAAAABmDQAAAAAAAAAAAAAAAAAA"
				],
				[
					726,
					1,
					"left_delete",
					null,
					"AQAAAKQNAAAAAAAApA0AAAAAAAAXAAAAZW5kaWYoUVVJQ0tKU19NT0RVTEVTKQo",
					"AQAAAAAAAAABAAAApA0AAAAAAAC7DQAAAAAAAAAAAAAAAAAA"
				],
				[
					728,
					1,
					"cut",
					null,
					"AQAAAGYNAAAAAAAAZg0AAAAAAAA+AAAAICBpbmNsdWRlKCR7Q01BS0VfQ1VSUkVOVF9TT1VSQ0VfRElSfS9jbWFrZS9KU0JpbmRpbmdzLmNtYWtlKQo",
					"AQAAAAAAAAABAAAApA0AAAAAAABmDQAAAAAAAAAAAAAAAAAA"
				],
				[
					743,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"AQAAAAQDAAAAAAAABQMAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAABAMAAAAAAAAEAwAAAAAAAAAAAAAAAPC/"
				],
				[
					744,
					1,
					"paste",
					null,
					"AQAAAAUDAAAAAAAAQwMAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAABQMAAAAAAAAFAwAAAAAAAAAAAAAAAPC/"
				],
				[
					745,
					1,
					"left_delete",
					null,
					"AQAAAEIDAAAAAAAAQgMAAAAAAAABAAAACg",
					"AQAAAAAAAAABAAAAQwMAAAAAAABDAwAAAAAAAAAAAAAAAPC/"
				],
				[
					747,
					1,
					"left_delete",
					null,
					"AQAAAAUDAAAAAAAABQMAAAAAAAACAAAAICA",
					"AQAAAAAAAAABAAAABwMAAAAAAAAHAwAAAAAAAAAAAAAAADRA"
				],
				[
					764,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAABNDgAAY21ha2VfbWluaW11bV9yZXF1aXJlZChWRVJTSU9OIDMuMCkKcHJvamVjdChxanMtb3BlbmN2KQoKc2V0KERJU0FCTEVfV0VSUk9SIFRSVUUgQ0FDSEUgQk9PTCAiRGlzYWJsZSAtV2Vycm9yIGZsYWciIEZPUkNFKQoKc2V0KENNQUtFX0JVSUxEX1RZUEUgIkRlYnVnIiBDQUNIRSBTVFJJTkcgImJ1aWxkIHR5cGUiKQoKc2V0X3Byb3BlcnR5KENBQ0hFIENNQUtFX0JVSUxEX1RZUEUgUFJPUEVSVFkgU1RSSU5HUyBEZWJ1ZyBSZWxlYXNlIE1pblNpemVSZWwgUmVsV2l0aERlYkluZm8pCgpzZXQocXVpY2tqc19zb3VyY2VzX3Jvb3QgJHtDTUFLRV9DVVJSRU5UX1NPVVJDRV9ESVJ9L3F1aWNranMpCgppZihOT1QgQ01BS0VfQlVJTERfVFlQRSBPUiBDTUFLRV9CVUlMRF9UWVBFIFNUUkVRVUFMICIiKQogIHNldChDTUFLRV9CVUlMRF9UWVBFICJEZWJ1ZyIpCmVuZGlmKE5PVCBDTUFLRV9CVUlMRF9UWVBFIE9SIENNQUtFX0JVSUxEX1RZUEUgU1RSRVFVQUwgIiIpCgppZihXSU4zMikKICBzZXQoTElCV1MyXzMyIHdzMl8zMikKZWxzZShXSU4zMikKCmVuZGlmKFdJTjMyKQoKaW5jbHVkZShGaW5kVGhyZWFkcykKaW5jbHVkZShGaW5kUGtnQ29uZmlnKQppbmNsdWRlKCR7Q01BS0VfQ1VSUkVOVF9TT1VSQ0VfRElSfS9jbWFrZS9GdW5jdGlvbnMuY21ha2UpCmluY2x1ZGUoJHtDTUFLRV9DVVJSRU5UX1NPVVJDRV9ESVJ9L2NtYWtlL0NoZWNrRmxhZ3MuY21ha2UpCmluY2x1ZGUoJHtDTUFLRV9DVVJSRU5UX1NPVVJDRV9ESVJ9L2NtYWtlL0ZpbmRRdWlja0pTLmNtYWtlKQppbmNsdWRlKCR7Q01BS0VfQ1VSUkVOVF9TT1VSQ0VfRElSfS9jbWFrZS9KU0JpbmRpbmdzLmNtYWtlKQppbmNsdWRlKCR7Q01BS0VfQ1VSUkVOVF9TT1VSQ0VfRElSfS9jbWFrZS9PcGVuQ1YuY21ha2UpCgppZihFTkFCTEVfQ0NBQ0hFKQogIGluY2x1ZGUoJHtDTUFLRV9DVVJSRU5UX1NPVVJDRV9ESVJ9L2NtYWtlL2NjYWNoZS5jbWFrZSkKICBlbmFibGVfY2NhY2hlKCkKZW5kaWYoRU5BQkxFX0NDQUNIRSkKCmNoZWNrX3NpemUoImxvbmciIFNJWkVPRl9MT05HKQpjaGVja19zaXplKCJsb25nIGxvbmciIFNJWkVPRl9MT05HX0xPTkcpCmNoZWNrX3NpemUoInNpemVfdCIgU0laRU9GX1NJWkVfVCkKCmlmKE5PVCBQT1NJVElPTl9JTkRFUEVOREVOVF9DT0RFKQogIHNldChQT1NJVElPTl9JTkRFUEVOREVOVF9DT0RFIE9OKQplbmRpZihOT1QgUE9TSVRJT05fSU5ERVBFTkRFTlRfQ09ERSkKb3B0aW9uKEJVSUxEX1NIQVJFRF9MSUJTICJCdWlsZCBzaGFyZWQgbGlicmFyaWVzIiBPTikKCm1lc3NhZ2UoIlRocmVhZCBsaWJyYXJ5OiAke0NNQUtFX1RIUkVBRF9MSUJTX0lOSVR9IikKaWYoQ01BS0VfVEhSRUFEX0xJQlNfSU5JVCkKICBzZXQoTElCUFRIUkVBRCAke0NNQUtFX1RIUkVBRF9MSUJTX0lOSVR9KQplbmRpZihDTUFLRV9USFJFQURfTElCU19JTklUKQoKY2hlY2tfbGlicmFyeV9leGlzdHMobSBhdGFuMiAvdXNyL2xpYiBIQVZFX0xJQk0pCmlmKEhBVkVfTElCTSkKICBzZXQoTElCTSBtKQogICMgbWVzc2FnZSgiRm91bmQgbWF0aCBsaWJyYXJ5OiAke0xJQk19IikKZW5kaWYoSEFWRV9MSUJNKQoKY2hlY2tfbGlicmFyeV9leGlzdHMoZGwgZGxvcGVuIC91c3IvbGliIEhBVkVfTElCREwpCmlmKEhBVkVfTElCREwpCiAgc2V0KExJQkRMIGRsKQogICMgbWVzc2FnZSgiRm91bmQgZGxmY24gbGlicmFyeTogJHtMSUJETH0iKQplbmRpZihIQVZFX0xJQkRMKQoKY2hlY2tfbGlicmFyeV9leGlzdHMoanNvbi1jcHAgWk40WUFNTDZkZXRhaWw5bm9kZV9kYXRhOXJlc2V0X21hcEV2IC91c3IgSlNPTl9DUFApCgpmaW5kX3F1aWNranMoKQpmaW5kX29wZW5jdigpCgpzZXQoQ01BS0VfSU5TVEFMTF9SUEFUSCAiJHtPUEVOQ1ZfTElCX0RJUn0iIENBQ0hFIFBBVEggIkJ1aWxkIHdpdGggaW5zdGFsbCBycGF0aCIgRk9SQ0UpCgppbmNsdWRlX2RpcmVjdG9yaWVzKAogICR7T1BFTkNWX0lOQ0xVREVfRElSU30gJHtDTUFLRV9DVVJSRU5UX1NPVVJDRV9ESVJ9ICR7Q01BS0VfQ1VSUkVOVF9TT1VSQ0VfRElSfS9vcGVuY3YKICAke0NNQUtFX0NVUlJFTlRfU09VUkNFX0RJUn0vc3JjICR7Q01BS0VfQ1VSUkVOVF9TT1VSQ0VfRElSfS9pbmNsdWRlCiAgJHtDTUFLRV9DVVJSRU5UX1NPVVJDRV9ESVJ9L3F1aWNranMpCgpjaGVja19jeHhfc3RhbmRhcmRfZmxhZygpCiAKCnN0cmluZyhSRUdFWCBSRVBMQUNFICIgLVdhbGwiICIiIENNQUtFX0NfRkxBR1MgIiR7Q01BS0VfQ19GTEFHU30iKQpzdHJpbmcoUkVHRVggUkVQTEFDRSAiIC1XYWxsIiAiIiBDTUFLRV9DWFhfRkxBR1MgIiR7Q01BS0VfQ1hYX0ZMQUdTfSIpCgpjaGVja19ub3dhcm5fZmxhZygtV25vLXVudXNlZC12YWx1ZSkKY2hlY2tfbm93YXJuX2ZsYWcoLVduby11bnVzZWQtdmFyaWFibGUpCgppZigiJHtDTUFLRV9DWFhfQ09NUElMRVJfSUR9IiBNQVRDSEVTICIuKkNsYW5nLioiKQogIGNoZWNrX25vd2Fybl9mbGFnKC1Xbm8tZGVwcmVjYXRlZC1hbm9uLWVudW0tZW51bS1jb252ZXJzaW9uKQogIGNoZWNrX25vd2Fybl9mbGFnKC1Xbm8tZXh0ZXJuLWMtY29tcGF0KQogIGNoZWNrX25vd2Fybl9mbGFnKC1Xbm8taW1wbGljaXQtaW50LWZsb2F0LWNvbnZlcnNpb24pCiAgY2hlY2tfbm93YXJuX2ZsYWcoLVduby1kZXByZWNhdGVkLWVudW0tZW51bS1jb252ZXJzaW9uKQplbmRpZigiJHtDTUFLRV9DWFhfQ09NUElMRVJfSUR9IiBNQVRDSEVTICIuKkNsYW5nLioiKQoKIyBkdW1wKENNQUtFX0NfRkxBR1MgQ01BS0VfQ1hYX0ZMQUdTKSBkdW1wKENNQUtFX0NYWF9GTEFHU19ERUJVRykKCmNoZWNrX3BpY19mbGFnKCkKCnNldChERUJVR19PVVRQVVQgVFJVRSBDQUNIRSBCT09MICJEZWJ1ZyBvdXRwdXQiIEZPUkNFKQpzZXQoREVCVUdfTUFUIEZBTFNFIENBQ0hFIEJPT0wgIkRlYnVnIGN2OjpNYXQiIEZPUkNFKQoKY2hlY2tfb3B0X25vbmVfZmxhZygpCgpjaGVja19kZWJ1Z19nZGJfZmxhZygpCgpjaGVja19jX2NvbXBpbGVyX2ZsYWcoIi1mbHRvIiBIQVNfRl9MVE9fRkxBRykKCmlmKEhBU19GX0xUT19GTEFHKQogIG9wdGlvbihFTkFCTEVfTFRPICJFbmFibGUgbGluay10aW1lIG9wdGltaXphdGlvbiIgT0ZGKQplbmRpZihIQVNfRl9MVE9fRkxBRykKCmlmKEVOQUJMRV9MVE8pCiAgc2V0KENNQUtFX0NfRkxBR1MgIiR7Q01BS0VfQ19GTEFHU30gLWZsdG8iKQogIHNldChDTUFLRV9FWEVfTElOS0VSX0ZMQUdTICIke0NNQUtFX0VYRV9MSU5LRVJfRkxBR1N9IC1mbHRvIikKZW5kaWYoRU5BQkxFX0xUTykKCmxpbmtfZGlyZWN0b3JpZXMoQkVGT1JFICR7cXVpY2tqc19CSU5BUllfRElSfSkKCmxpbmtfZGlyZWN0b3JpZXMoIiR7Q01BS0VfQ1VSUkVOVF9CSU5BUllfRElSfS9xdWlja2pzIikKCnNldChRVUlDS0pTX0xJQlJBUlkgcXVpY2tqcykKbGlua19kaXJlY3Rvcmllcygke0NNQUtFX0NVUlJFTlRfQklOQVJZX0RJUn0vcXVpY2tqcykKCm9wdGlvbihRVUlDS0pTX01PRFVMRVMgIkJ1aWxkIC5zbyBtb2R1bGVzIGZvciBxdWlja2pzIiBPTikKCgpvcHRpb24oQlVJTERfUVVJQ0tKUyAiQnVpbGQgUXVpY2tKUyIgT04pCgpmaWxlKEdMT0IgT1BFTkNWX1NPVVJDRVMgKi5ocHAgKi5jcHApCiMgZHVtcChPUEVOQ1ZfU09VUkNFUykKCm1ha2Vfc2hhcmVkX21vZHVsZShvcGVuY3YgJHtPUEVOQ1ZfU09VUkNFU30pCiMgbWFrZV9qc19iaW5kaW5ncygpCgAAAAAAAAAASg4AAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAQQMAAAAAAAB5AwAAAAAAAAAAAAAAAPC/"
				],
				[
					767,
					1,
					"insert",
					{
						"characters": "CC"
					},
					"AwAAALgDAAAAAAAAuQMAAAAAAAAAAAAAuQMAAAAAAAC5AwAAAAAAAAIAAABjY7kDAAAAAAAAugMAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAugMAAAAAAAC4AwAAAAAAAAAAAAAAAPC/"
				],
				[
					775,
					1,
					"cut",
					null,
					"AQAAAAgOAAAAAAAACA4AAAAAAAAtAAAAbWFrZV9zaGFyZWRfbW9kdWxlKG9wZW5jdiAke09QRU5DVl9TT1VSQ0VTfSkK",
					"AQAAAAAAAAABAAAACA4AAAAAAAA1DgAAAAAAAAAAAAAAAPC/"
				],
				[
					776,
					2,
					"paste",
					null,
					"AgAAAAgOAAAAAAAANQ4AAAAAAAAAAAAANQ4AAAAAAABiDgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAACA4AAAAAAAAIDgAAAAAAAAAAAAAAAPC/"
				],
				[
					779,
					1,
					"left_delete",
					null,
					"AQAAAA0OAAAAAAAADQ4AAAAAAAAHAAAAc2hhcmVkXw",
					"AQAAAAAAAAABAAAAFA4AAAAAAAANDgAAAAAAAAAAAAAAAPC/"
				],
				[
					788,
					1,
					"insert",
					{
						"characters": " "
					},
					"AgAAAFsOAAAAAAAAXA4AAAAAAAAAAAAAXA4AAAAAAABcDgAAAAAAABUAAAAjIG1ha2VfanNfYmluZGluZ3MoKQo",
					"AQAAAAAAAAABAAAAWw4AAAAAAABwDgAAAAAAAAAAAAAAAPC/"
				],
				[
					796,
					1,
					"insert",
					{
						"characters": "#"
					},
					"AQAAAC4OAAAAAAAALw4AAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAALg4AAAAAAAAuDgAAAAAAAAAAAAAAAPC/"
				],
				[
					797,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAABdDgAAY21ha2VfbWluaW11bV9yZXF1aXJlZChWRVJTSU9OIDMuMCkKcHJvamVjdChxanMtb3BlbmN2KQoKc2V0KERJU0FCTEVfV0VSUk9SIFRSVUUgQ0FDSEUgQk9PTCAiRGlzYWJsZSAtV2Vycm9yIGZsYWciIEZPUkNFKQoKc2V0KENNQUtFX0JVSUxEX1RZUEUgIkRlYnVnIiBDQUNIRSBTVFJJTkcgImJ1aWxkIHR5cGUiKQoKc2V0X3Byb3BlcnR5KENBQ0hFIENNQUtFX0JVSUxEX1RZUEUgUFJPUEVSVFkgU1RSSU5HUyBEZWJ1ZyBSZWxlYXNlIE1pblNpemVSZWwgUmVsV2l0aERlYkluZm8pCgpzZXQocXVpY2tqc19zb3VyY2VzX3Jvb3QgJHtDTUFLRV9DVVJSRU5UX1NPVVJDRV9ESVJ9L3F1aWNranMpCgppZihOT1QgQ01BS0VfQlVJTERfVFlQRSBPUiBDTUFLRV9CVUlMRF9UWVBFIFNUUkVRVUFMICIiKQogIHNldChDTUFLRV9CVUlMRF9UWVBFICJEZWJ1ZyIpCmVuZGlmKE5PVCBDTUFLRV9CVUlMRF9UWVBFIE9SIENNQUtFX0JVSUxEX1RZUEUgU1RSRVFVQUwgIiIpCgppZihXSU4zMikKICBzZXQoTElCV1MyXzMyIHdzMl8zMikKZWxzZShXSU4zMikKCmVuZGlmKFdJTjMyKQoKaW5jbHVkZShGaW5kVGhyZWFkcykKaW5jbHVkZShGaW5kUGtnQ29uZmlnKQppbmNsdWRlKCR7Q01BS0VfQ1VSUkVOVF9TT1VSQ0VfRElSfS9jbWFrZS9GdW5jdGlvbnMuY21ha2UpCmluY2x1ZGUoJHtDTUFLRV9DVVJSRU5UX1NPVVJDRV9ESVJ9L2NtYWtlL0NoZWNrRmxhZ3MuY21ha2UpCmluY2x1ZGUoJHtDTUFLRV9DVVJSRU5UX1NPVVJDRV9ESVJ9L2NtYWtlL0ZpbmRRdWlja0pTLmNtYWtlKQppbmNsdWRlKCR7Q01BS0VfQ1VSUkVOVF9TT1VSQ0VfRElSfS9jbWFrZS9KU0JpbmRpbmdzLmNtYWtlKQppbmNsdWRlKCR7Q01BS0VfQ1VSUkVOVF9TT1VSQ0VfRElSfS9jbWFrZS9PcGVuQ1YuY21ha2UpCgppZihFTkFCTEVfQ0NBQ0hFKQogIGluY2x1ZGUoJHtDTUFLRV9DVVJSRU5UX1NPVVJDRV9ESVJ9L2NtYWtlL0NDYWNoZS5jbWFrZSkKICBlbmFibGVfY2NhY2hlKCkKZW5kaWYoRU5BQkxFX0NDQUNIRSkKCmNoZWNrX3NpemUoImxvbmciIFNJWkVPRl9MT05HKQpjaGVja19zaXplKCJsb25nIGxvbmciIFNJWkVPRl9MT05HX0xPTkcpCmNoZWNrX3NpemUoInNpemVfdCIgU0laRU9GX1NJWkVfVCkKCmlmKE5PVCBQT1NJVElPTl9JTkRFUEVOREVOVF9DT0RFKQogIHNldChQT1NJVElPTl9JTkRFUEVOREVOVF9DT0RFIE9OKQplbmRpZihOT1QgUE9TSVRJT05fSU5ERVBFTkRFTlRfQ09ERSkKb3B0aW9uKEJVSUxEX1NIQVJFRF9MSUJTICJCdWlsZCBzaGFyZWQgbGlicmFyaWVzIiBPTikKCm1lc3NhZ2UoIlRocmVhZCBsaWJyYXJ5OiAke0NNQUtFX1RIUkVBRF9MSUJTX0lOSVR9IikKaWYoQ01BS0VfVEhSRUFEX0xJQlNfSU5JVCkKICBzZXQoTElCUFRIUkVBRCAke0NNQUtFX1RIUkVBRF9MSUJTX0lOSVR9KQplbmRpZihDTUFLRV9USFJFQURfTElCU19JTklUKQoKY2hlY2tfbGlicmFyeV9leGlzdHMobSBhdGFuMiAvdXNyL2xpYiBIQVZFX0xJQk0pCmlmKEhBVkVfTElCTSkKICBzZXQoTElCTSBtKQogICMgbWVzc2FnZSgiRm91bmQgbWF0aCBsaWJyYXJ5OiAke0xJQk19IikKZW5kaWYoSEFWRV9MSUJNKQoKY2hlY2tfbGlicmFyeV9leGlzdHMoZGwgZGxvcGVuIC91c3IvbGliIEhBVkVfTElCREwpCmlmKEhBVkVfTElCREwpCiAgc2V0KExJQkRMIGRsKQogICMgbWVzc2FnZSgiRm91bmQgZGxmY24gbGlicmFyeTogJHtMSUJETH0iKQplbmRpZihIQVZFX0xJQkRMKQoKY2hlY2tfbGlicmFyeV9leGlzdHMoanNvbi1jcHAgWk40WUFNTDZkZXRhaWw5bm9kZV9kYXRhOXJlc2V0X21hcEV2IC91c3IgSlNPTl9DUFApCgpmaW5kX3F1aWNranMoKQpmaW5kX29wZW5jdigpCgpzZXQoQ01BS0VfSU5TVEFMTF9SUEFUSCAiJHtPUEVOQ1ZfTElCX0RJUn0iIENBQ0hFIFBBVEggIkJ1aWxkIHdpdGggaW5zdGFsbCBycGF0aCIgRk9SQ0UpCgppbmNsdWRlX2RpcmVjdG9yaWVzKAogICR7T1BFTkNWX0lOQ0xVREVfRElSU30gJHtDTUFLRV9DVVJSRU5UX1NPVVJDRV9ESVJ9ICR7Q01BS0VfQ1VSUkVOVF9TT1VSQ0VfRElSfS9vcGVuY3YKICAke0NNQUtFX0NVUlJFTlRfU09VUkNFX0RJUn0vc3JjICR7Q01BS0VfQ1VSUkVOVF9TT1VSQ0VfRElSfS9pbmNsdWRlCiAgJHtDTUFLRV9DVVJSRU5UX1NPVVJDRV9ESVJ9L3F1aWNranMpCgpjaGVja19jeHhfc3RhbmRhcmRfZmxhZygpCgpzdHJpbmcoUkVHRVggUkVQTEFDRSAiIC1XYWxsIiAiIiBDTUFLRV9DX0ZMQUdTICIke0NNQUtFX0NfRkxBR1N9IikKc3RyaW5nKFJFR0VYIFJFUExBQ0UgIiAtV2FsbCIgIiIgQ01BS0VfQ1hYX0ZMQUdTICIke0NNQUtFX0NYWF9GTEFHU30iKQoKY2hlY2tfbm93YXJuX2ZsYWcoLVduby11bnVzZWQtdmFsdWUpCmNoZWNrX25vd2Fybl9mbGFnKC1Xbm8tdW51c2VkLXZhcmlhYmxlKQoKaWYoIiR7Q01BS0VfQ1hYX0NPTVBJTEVSX0lEfSIgTUFUQ0hFUyAiLipDbGFuZy4qIikKICBjaGVja19ub3dhcm5fZmxhZygtV25vLWRlcHJlY2F0ZWQtYW5vbi1lbnVtLWVudW0tY29udmVyc2lvbikKICBjaGVja19ub3dhcm5fZmxhZygtV25vLWV4dGVybi1jLWNvbXBhdCkKICBjaGVja19ub3dhcm5fZmxhZygtV25vLWltcGxpY2l0LWludC1mbG9hdC1jb252ZXJzaW9uKQogIGNoZWNrX25vd2Fybl9mbGFnKC1Xbm8tZGVwcmVjYXRlZC1lbnVtLWVudW0tY29udmVyc2lvbikKZW5kaWYoIiR7Q01BS0VfQ1hYX0NPTVBJTEVSX0lEfSIgTUFUQ0hFUyAiLipDbGFuZy4qIikKCiMgZHVtcChDTUFLRV9DX0ZMQUdTIENNQUtFX0NYWF9GTEFHUykgZHVtcChDTUFLRV9DWFhfRkxBR1NfREVCVUcpCgpjaGVja19waWNfZmxhZygpCgpzZXQoREVCVUdfT1VUUFVUIFRSVUUgQ0FDSEUgQk9PTCAiRGVidWcgb3V0cHV0IiBGT1JDRSkKc2V0KERFQlVHX01BVCBGQUxTRSBDQUNIRSBCT09MICJEZWJ1ZyBjdjo6TWF0IiBGT1JDRSkKCmNoZWNrX29wdF9ub25lX2ZsYWcoKQoKY2hlY2tfZGVidWdfZ2RiX2ZsYWcoKQoKY2hlY2tfY19jb21waWxlcl9mbGFnKCItZmx0byIgSEFTX0ZfTFRPX0ZMQUcpCgppZihIQVNfRl9MVE9fRkxBRykKICBvcHRpb24oRU5BQkxFX0xUTyAiRW5hYmxlIGxpbmstdGltZSBvcHRpbWl6YXRpb24iIE9GRikKZW5kaWYoSEFTX0ZfTFRPX0ZMQUcpCgppZihFTkFCTEVfTFRPKQogIHNldChDTUFLRV9DX0ZMQUdTICIke0NNQUtFX0NfRkxBR1N9IC1mbHRvIikKICBzZXQoQ01BS0VfRVhFX0xJTktFUl9GTEFHUyAiJHtDTUFLRV9FWEVfTElOS0VSX0ZMQUdTfSAtZmx0byIpCmVuZGlmKEVOQUJMRV9MVE8pCgpsaW5rX2RpcmVjdG9yaWVzKEJFRk9SRSAke3F1aWNranNfQklOQVJZX0RJUn0pCgpsaW5rX2RpcmVjdG9yaWVzKCIke0NNQUtFX0NVUlJFTlRfQklOQVJZX0RJUn0vcXVpY2tqcyIpCgpzZXQoUVVJQ0tKU19MSUJSQVJZIHF1aWNranMpCmxpbmtfZGlyZWN0b3JpZXMoJHtDTUFLRV9DVVJSRU5UX0JJTkFSWV9ESVJ9L3F1aWNranMpCgpvcHRpb24oUVVJQ0tKU19NT0RVTEVTICJCdWlsZCAuc28gbW9kdWxlcyBmb3IgcXVpY2tqcyIgT04pCgpvcHRpb24oQlVJTERfUVVJQ0tKUyAiQnVpbGQgUXVpY2tKUyIgT04pCgpmaWxlKEdMT0IgT1BFTkNWX1NPVVJDRVMgKi5ocHAgKi5jcHApCiMgZHVtcChPUEVOQ1ZfU09VUkNFUykKCm1ha2VfbW9kdWxlKG9wZW5jdiAke09QRU5DVl9TT1VSQ0VTfSkKI21ha2Vfc2hhcmVkX21vZHVsZShvcGVuY3YgJHtPUEVOQ1ZfU09VUkNFU30pCiAAAAAAAAAAAKMOAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAALw4AAAAAAAAvDgAAAAAAAAAAAAAAAPC/"
				],
				[
					800,
					1,
					"insert",
					{
						"characters": "static_"
					},
					"BwAAAFMOAAAAAAAAVA4AAAAAAAAAAAAAVA4AAAAAAABVDgAAAAAAAAAAAABVDgAAAAAAAFYOAAAAAAAAAAAAAFYOAAAAAAAAVw4AAAAAAAAAAAAAVw4AAAAAAABYDgAAAAAAAAAAAABYDgAAAAAAAFkOAAAAAAAAAAAAAFkOAAAAAAAAWg4AAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAUw4AAAAAAABTDgAAAAAAAAAAAAAAAPC/"
				],
				[
					803,
					2,
					"right_delete",
					null,
					"AgAAAHsOAAAAAAAAew4AAAAAAAABAAAAI3sOAAAAAAAAew4AAAAAAAABAAAAIA",
					"AQAAAAAAAAABAAAAew4AAAAAAAB7DgAAAAAAAAAAAAAAAAAA"
				],
				[
					833,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"AQAAAE0OAAAAAAAATg4AAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAATQ4AAAAAAABNDgAAAAAAAAAAAAAAAPC/"
				],
				[
					835,
					1,
					"paste",
					null,
					"AQAAAE0OAAAAAAAAhQ4AAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAATQ4AAAAAAABNDgAAAAAAAAAAAAAAAAAA"
				],
				[
					844,
					1,
					"paste",
					null,
					"AgAAAFsOAAAAAAAAaQ4AAAAAAAAAAAAAaQ4AAAAAAABpDgAAAAAAAAYAAAA8bGlzdD4",
					"AQAAAAAAAAABAAAAWw4AAAAAAABhDgAAAAAAAAAAAAAAAPC/"
				],
				[
					845,
					1,
					"insert",
					{
						"characters": " "
					},
					"AQAAAGkOAAAAAAAAag4AAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAaQ4AAAAAAABpDgAAAAAAAAAAAAAAAPC/"
				],
				[
					848,
					1,
					"insert",
					{
						"characters": " "
					},
					"AgAAAGoOAAAAAAAAaw4AAAAAAAAAAAAAaw4AAAAAAABrDgAAAAAAAAwAAAAge0lOQ0xVREUgfCA",
					"AQAAAAAAAAABAAAAag4AAAAAAAB2DgAAAAAAAAAAAAAAAPC/"
				],
				[
					851,
					1,
					"insert",
					{
						"characters": " "
					},
					"AgAAAHIOAAAAAAAAcw4AAAAAAAAAAAAAcw4AAAAAAABzDgAAAAAAAAIAAAB9IA",
					"AQAAAAAAAAABAAAAcg4AAAAAAAB0DgAAAAAAAAAAAAAAAPC/"
				],
				[
					854,
					1,
					"insert_snippet",
					{
						"contents": "\"${0:$SELECTION}\""
					},
					"AgAAAHkOAAAAAAAAeQ4AAAAAAAAHAAAAPHJlZ2V4PnkOAAAAAAAAgg4AAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAeQ4AAAAAAACADgAAAAAAAAAAAAAAAPC/"
				],
				[
					855,
					1,
					"insert",
					{
						"characters": "init_module.cpp"
					},
					"EAAAAHoOAAAAAAAAew4AAAAAAAAAAAAAew4AAAAAAAB7DgAAAAAAAAcAAAA8cmVnZXg+ew4AAAAAAAB8DgAAAAAAAAAAAAB8DgAAAAAAAH0OAAAAAAAAAAAAAH0OAAAAAAAAfg4AAAAAAAAAAAAAfg4AAAAAAAB/DgAAAAAAAAAAAAB/DgAAAAAAAIAOAAAAAAAAAAAAAIAOAAAAAAAAgQ4AAAAAAAAAAAAAgQ4AAAAAAACCDgAAAAAAAAAAAACCDgAAAAAAAIMOAAAAAAAAAAAAAIMOAAAAAAAAhA4AAAAAAAAAAAAAhA4AAAAAAACFDgAAAAAAAAAAAACFDgAAAAAAAIYOAAAAAAAAAAAAAIYOAAAAAAAAhw4AAAAAAAAAAAAAhw4AAAAAAACIDgAAAAAAAAAAAACIDgAAAAAAAIkOAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAeg4AAAAAAACBDgAAAAAAAAAAAAAAAPC/"
				],
				[
					863,
					1,
					"left_delete",
					null,
					"AQAAAE0OAAAAAAAATQ4AAAAAAAACAAAAICA",
					"AQAAAAAAAAABAAAATw4AAAAAAABPDgAAAAAAAAAAAAAAAPC/"
				],
				[
					864,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"AQAAAE0OAAAAAAAATg4AAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAATQ4AAAAAAABNDgAAAAAAAAAAAAAAAPC/"
				],
				[
					872,
					1,
					"paste",
					null,
					"AQAAAKcOAAAAAAAAtg4AAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAApw4AAAAAAACnDgAAAAAAAAAAAAAAAPC/"
				],
				[
					873,
					1,
					"insert",
					{
						"characters": " "
					},
					"AQAAALYOAAAAAAAAtw4AAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAtg4AAAAAAAC2DgAAAAAAAAAAAAAAAPC/"
				],
				[
					876,
					1,
					"paste",
					null,
					"AQAAAOQOAAAAAAAA8w4AAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA5A4AAAAAAADkDgAAAAAAAAAAAAAAAPC/"
				],
				[
					879,
					1,
					"insert",
					{
						"characters": " "
					},
					"AQAAAPMOAAAAAAAA9A4AAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA8w4AAAAAAADzDgAAAAAAAAAAAAAAAPC/"
				],
				[
					885,
					1,
					"cut",
					null,
					"AQAAAI0OAAAAAAAAjQ4AAAAAAAA9AAAAbWFrZV9zdGF0aWNfbW9kdWxlKG9wZW5jdiBpbml0X21vZHVsZS5jcHAgJHtPUEVOQ1ZfU09VUkNFU30pCg",
					"AQAAAAAAAAABAAAAjQ4AAAAAAADKDgAAAAAAAAAAAAAAAPC/"
				],
				[
					886,
					1,
					"paste",
					null,
					"AQAAAI0OAAAAAAAAyg4AAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAjQ4AAAAAAACNDgAAAAAAAAAAAAAAAPC/"
				],
				[
					889,
					1,
					"paste",
					null,
					"AQAAAIsOAAAAAAAAyA4AAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAiw4AAAAAAACLDgAAAAAAAAAAAAAAAPC/"
				],
				[
					896,
					1,
					"insert",
					{
						"characters": "add_libra"
					},
					"CgAAAIsOAAAAAAAAjA4AAAAAAAAAAAAAjA4AAAAAAACMDgAAAAAAABIAAABtYWtlX3N0YXRpY19tb2R1bGWMDgAAAAAAAI0OAAAAAAAAAAAAAI0OAAAAAAAAjg4AAAAAAAAAAAAAjg4AAAAAAACPDgAAAAAAAAAAAACPDgAAAAAAAJAOAAAAAAAAAAAAAJAOAAAAAAAAkQ4AAAAAAAAAAAAAkQ4AAAAAAACSDgAAAAAAAAAAAACSDgAAAAAAAJMOAAAAAAAAAAAAAJMOAAAAAAAAlA4AAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAiw4AAAAAAACdDgAAAAAAAAAAAAAAAPC/"
				],
				[
					897,
					1,
					"insert",
					{
						"characters": "ry"
					},
					"AgAAAJQOAAAAAAAAlQ4AAAAAAAAAAAAAlQ4AAAAAAACWDgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAlA4AAAAAAACUDgAAAAAAAAAAAAAAAPC/"
				],
				[
					904,
					1,
					"insert",
					{
						"characters": "qj-"
					},
					"BAAAAJ4OAAAAAAAAnw4AAAAAAAAAAAAAnw4AAAAAAACfDgAAAAAAAA8AAABpbml0X21vZHVsZS5jcHCfDgAAAAAAAKAOAAAAAAAAAAAAAKAOAAAAAAAAoQ4AAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAng4AAAAAAACtDgAAAAAAAAAAAAAAAPC/"
				],
				[
					905,
					3,
					"left_delete",
					null,
					"AwAAAKAOAAAAAAAAoA4AAAAAAAABAAAALZ8OAAAAAAAAnw4AAAAAAAABAAAAap4OAAAAAAAAng4AAAAAAAABAAAAcQ",
					"AQAAAAAAAAABAAAAoQ4AAAAAAAChDgAAAAAAAAAAAAAAAPC/"
				],
				[
					907,
					1,
					"insert",
					{
						"characters": "qjs-"
					},
					"BAAAAJcOAAAAAAAAmA4AAAAAAAAAAAAAmA4AAAAAAACZDgAAAAAAAAAAAACZDgAAAAAAAJoOAAAAAAAAAAAAAJoOAAAAAAAAmw4AAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAlw4AAAAAAACXDgAAAAAAAAAAAAAAAPC/"
				],
				[
					909,
					1,
					"left_delete",
					null,
					"AQAAAKIOAAAAAAAAog4AAAAAAAABAAAAIA",
					"AQAAAAAAAAABAAAAow4AAAAAAACjDgAAAAAAAAAAAAAAAPC/"
				],
				[
					916,
					1,
					"insert",
					{
						"characters": "set"
					},
					"AwAAALUOAAAAAAAAtg4AAAAAAAAAAAAAtg4AAAAAAAC3DgAAAAAAAAAAAAC3DgAAAAAAALgOAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAtQ4AAAAAAAC1DgAAAAAAAAAAAAAAAPC/"
				],
				[
					917,
					1,
					"insert",
					{
						"characters": " "
					},
					"AQAAALgOAAAAAAAAuQ4AAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAuA4AAAAAAAC4DgAAAAAAAAAAAAAAAPC/"
				],
				[
					918,
					1,
					"left_delete",
					null,
					"AQAAALgOAAAAAAAAuA4AAAAAAAABAAAAIA",
					"AQAAAAAAAAABAAAAuQ4AAAAAAAC5DgAAAAAAAAAAAAAAAPC/"
				],
				[
					919,
					1,
					"insert_snippet",
					{
						"contents": "($0)"
					},
					"AQAAALgOAAAAAAAAug4AAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAuA4AAAAAAAC4DgAAAAAAAAAAAAAAAPC/"
				],
				[
					920,
					1,
					"insert",
					{
						"characters": "jsbindings_LIBRAR"
					},
					"EQAAALkOAAAAAAAAug4AAAAAAAAAAAAAug4AAAAAAAC7DgAAAAAAAAAAAAC7DgAAAAAAALwOAAAAAAAAAAAAALwOAAAAAAAAvQ4AAAAAAAAAAAAAvQ4AAAAAAAC+DgAAAAAAAAAAAAC+DgAAAAAAAL8OAAAAAAAAAAAAAL8OAAAAAAAAwA4AAAAAAAAAAAAAwA4AAAAAAADBDgAAAAAAAAAAAADBDgAAAAAAAMIOAAAAAAAAAAAAAMIOAAAAAAAAww4AAAAAAAAAAAAAww4AAAAAAADEDgAAAAAAAAAAAADEDgAAAAAAAMUOAAAAAAAAAAAAAMUOAAAAAAAAxg4AAAAAAAAAAAAAxg4AAAAAAADHDgAAAAAAAAAAAADHDgAAAAAAAMgOAAAAAAAAAAAAAMgOAAAAAAAAyQ4AAAAAAAAAAAAAyQ4AAAAAAADKDgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAuQ4AAAAAAAC5DgAAAAAAAAAAAAAAAPC/"
				],
				[
					921,
					1,
					"insert",
					{
						"characters": "IES"
					},
					"AwAAAMoOAAAAAAAAyw4AAAAAAAAAAAAAyw4AAAAAAADMDgAAAAAAAAAAAADMDgAAAAAAAM0OAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAyg4AAAAAAADKDgAAAAAAAAAAAAAAAPC/"
				],
				[
					922,
					1,
					"insert",
					{
						"characters": " qjs-open"
					},
					"CQAAAM0OAAAAAAAAzg4AAAAAAAAAAAAAzg4AAAAAAADPDgAAAAAAAAAAAADPDgAAAAAAANAOAAAAAAAAAAAAANAOAAAAAAAA0Q4AAAAAAAAAAAAA0Q4AAAAAAADSDgAAAAAAAAAAAADSDgAAAAAAANMOAAAAAAAAAAAAANMOAAAAAAAA1A4AAAAAAAAAAAAA1A4AAAAAAADVDgAAAAAAAAAAAADVDgAAAAAAANYOAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAzQ4AAAAAAADNDgAAAAAAAAAAAAAAAPC/"
				],
				[
					923,
					1,
					"insert",
					{
						"characters": "cv"
					},
					"AgAAANYOAAAAAAAA1w4AAAAAAAAAAAAA1w4AAAAAAADYDgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA1g4AAAAAAADWDgAAAAAAAAAAAAAAAPC/"
				],
				[
					937,
					1,
					"left_delete",
					null,
					"AQAAAAQPAAAAAAAABA8AAAAAAAATAAAAICR7T1BFTkNWX1NPVVJDRVN9KQ",
					"AQAAAAAAAAABAAAABA8AAAAAAAAXDwAAAAAAAAAAAAAAAPC/"
				],
				[
					940,
					1,
					"insert",
					{
						"characters": ")"
					},
					"AQAAAAQPAAAAAAAABQ8AAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAABA8AAAAAAAAEDwAAAAAAAAAAAAAAAPC/"
				],
				[
					945,
					1,
					"left_delete",
					null,
					"AQAAAC8PAAAAAAAALw8AAAAAAAASAAAAICR7T1BFTkNWX1NPVVJDRVN9",
					"AQAAAAAAAAABAAAALw8AAAAAAABBDwAAAAAAAAAAAAAAAPC/"
				],
				[
					948,
					1,
					"insert",
					{
						"characters": "#"
					},
					"AQAAANsOAAAAAAAA3A4AAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA2w4AAAAAAADbDgAAAAAAAAAAAAAAAPC/"
				],
				[
					953,
					1,
					"paste",
					null,
					"AQAAALUOAAAAAAAAEg8AAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAtQ4AAAAAAAC1DgAAAAAAAAAAAAAAAPC/"
				],
				[
					959,
					1,
					"paste",
					null,
					"AgAAANIOAAAAAAAA3A4AAAAAAAAAAAAA3A4AAAAAAADcDgAAAAAAAA4AAAAke1RBUkdFVF9OQU1FfQ",
					"AQAAAAAAAAABAAAA0g4AAAAAAADgDgAAAAAAAAAAAAAAAPC/"
				],
				[
					967,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAACLDwAAY21ha2VfbWluaW11bV9yZXF1aXJlZChWRVJTSU9OIDMuMCkKcHJvamVjdChxanMtb3BlbmN2KQoKc2V0KERJU0FCTEVfV0VSUk9SIFRSVUUgQ0FDSEUgQk9PTCAiRGlzYWJsZSAtV2Vycm9yIGZsYWciIEZPUkNFKQoKc2V0KENNQUtFX0JVSUxEX1RZUEUgIkRlYnVnIiBDQUNIRSBTVFJJTkcgImJ1aWxkIHR5cGUiKQoKc2V0X3Byb3BlcnR5KENBQ0hFIENNQUtFX0JVSUxEX1RZUEUgUFJPUEVSVFkgU1RSSU5HUyBEZWJ1ZyBSZWxlYXNlIE1pblNpemVSZWwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVsV2l0aERlYkluZm8pCgpzZXQocXVpY2tqc19zb3VyY2VzX3Jvb3QgJHtDTUFLRV9DVVJSRU5UX1NPVVJDRV9ESVJ9L3F1aWNranMpCgppZihOT1QgQ01BS0VfQlVJTERfVFlQRSBPUiBDTUFLRV9CVUlMRF9UWVBFIFNUUkVRVUFMICIiKQogIHNldChDTUFLRV9CVUlMRF9UWVBFICJEZWJ1ZyIpCmVuZGlmKE5PVCBDTUFLRV9CVUlMRF9UWVBFIE9SIENNQUtFX0JVSUxEX1RZUEUgU1RSRVFVQUwgIiIpCgppZihXSU4zMikKICBzZXQoTElCV1MyXzMyIHdzMl8zMikKZWxzZShXSU4zMikKCmVuZGlmKFdJTjMyKQoKaW5jbHVkZShGaW5kVGhyZWFkcykKaW5jbHVkZShGaW5kUGtnQ29uZmlnKQppbmNsdWRlKCR7Q01BS0VfQ1VSUkVOVF9TT1VSQ0VfRElSfS9jbWFrZS9GdW5jdGlvbnMuY21ha2UpCmluY2x1ZGUoJHtDTUFLRV9DVVJSRU5UX1NPVVJDRV9ESVJ9L2NtYWtlL0NoZWNrRmxhZ3MuY21ha2UpCmluY2x1ZGUoJHtDTUFLRV9DVVJSRU5UX1NPVVJDRV9ESVJ9L2NtYWtlL0ZpbmRRdWlja0pTLmNtYWtlKQppbmNsdWRlKCR7Q01BS0VfQ1VSUkVOVF9TT1VSQ0VfRElSfS9jbWFrZS9KU0JpbmRpbmdzLmNtYWtlKQppbmNsdWRlKCR7Q01BS0VfQ1VSUkVOVF9TT1VSQ0VfRElSfS9jbWFrZS9PcGVuQ1YuY21ha2UpCgppZihFTkFCTEVfQ0NBQ0hFKQogIGluY2x1ZGUoJHtDTUFLRV9DVVJSRU5UX1NPVVJDRV9ESVJ9L2NtYWtlL0NDYWNoZS5jbWFrZSkKICBlbmFibGVfY2NhY2hlKCkKZW5kaWYoRU5BQkxFX0NDQUNIRSkKCmNoZWNrX3NpemUoImxvbmciIFNJWkVPRl9MT05HKQpjaGVja19zaXplKCJsb25nIGxvbmciIFNJWkVPRl9MT05HX0xPTkcpCmNoZWNrX3NpemUoInNpemVfdCIgU0laRU9GX1NJWkVfVCkKCmlmKE5PVCBQT1NJVElPTl9JTkRFUEVOREVOVF9DT0RFKQogIHNldChQT1NJVElPTl9JTkRFUEVOREVOVF9DT0RFIE9OKQplbmRpZihOT1QgUE9TSVRJT05fSU5ERVBFTkRFTlRfQ09ERSkKb3B0aW9uKEJVSUxEX1NIQVJFRF9MSUJTICJCdWlsZCBzaGFyZWQgbGlicmFyaWVzIiBPTikKCm1lc3NhZ2UoIlRocmVhZCBsaWJyYXJ5OiAke0NNQUtFX1RIUkVBRF9MSUJTX0lOSVR9IikKaWYoQ01BS0VfVEhSRUFEX0xJQlNfSU5JVCkKICBzZXQoTElCUFRIUkVBRCAke0NNQUtFX1RIUkVBRF9MSUJTX0lOSVR9KQplbmRpZihDTUFLRV9USFJFQURfTElCU19JTklUKQoKY2hlY2tfbGlicmFyeV9leGlzdHMobSBhdGFuMiAvdXNyL2xpYiBIQVZFX0xJQk0pCmlmKEhBVkVfTElCTSkKICBzZXQoTElCTSBtKQogICMgbWVzc2FnZSgiRm91bmQgbWF0aCBsaWJyYXJ5OiAke0xJQk19IikKZW5kaWYoSEFWRV9MSUJNKQoKY2hlY2tfbGlicmFyeV9leGlzdHMoZGwgZGxvcGVuIC91c3IvbGliIEhBVkVfTElCREwpCmlmKEhBVkVfTElCREwpCiAgc2V0KExJQkRMIGRsKQogICMgbWVzc2FnZSgiRm91bmQgZGxmY24gbGlicmFyeTogJHtMSUJETH0iKQplbmRpZihIQVZFX0xJQkRMKQoKY2hlY2tfbGlicmFyeV9leGlzdHMoanNvbi1jcHAgWk40WUFNTDZkZXRhaWw5bm9kZV9kYXRhOXJlc2V0X21hcEV2IC91c3IKICAgICAgICAgICAgICAgICAgICAgSlNPTl9DUFApCgpmaW5kX3F1aWNranMoKQpmaW5kX29wZW5jdigpCgpzZXQoQ01BS0VfSU5TVEFMTF9SUEFUSCAiJHtPUEVOQ1ZfTElCX0RJUn0iCiAgICBDQUNIRSBQQVRIICJCdWlsZCB3aXRoIGluc3RhbGwgcnBhdGgiIEZPUkNFKQoKaW5jbHVkZV9kaXJlY3RvcmllcygKICAke09QRU5DVl9JTkNMVURFX0RJUlN9ICR7Q01BS0VfQ1VSUkVOVF9TT1VSQ0VfRElSfQogICR7Q01BS0VfQ1VSUkVOVF9TT1VSQ0VfRElSfS9vcGVuY3YgJHtDTUFLRV9DVVJSRU5UX1NPVVJDRV9ESVJ9L3NyYwogICR7Q01BS0VfQ1VSUkVOVF9TT1VSQ0VfRElSfS9pbmNsdWRlICR7Q01BS0VfQ1VSUkVOVF9TT1VSQ0VfRElSfS9xdWlja2pzKQoKY2hlY2tfY3h4X3N0YW5kYXJkX2ZsYWcoKQoKc3RyaW5nKFJFR0VYIFJFUExBQ0UgIiAtV2FsbCIgIiIgQ01BS0VfQ19GTEFHUyAiJHtDTUFLRV9DX0ZMQUdTfSIpCnN0cmluZyhSRUdFWCBSRVBMQUNFICIgLVdhbGwiICIiIENNQUtFX0NYWF9GTEFHUyAiJHtDTUFLRV9DWFhfRkxBR1N9IikKCmNoZWNrX25vd2Fybl9mbGFnKC1Xbm8tdW51c2VkLXZhbHVlKQpjaGVja19ub3dhcm5fZmxhZygtV25vLXVudXNlZC12YXJpYWJsZSkKCmlmKCIke0NNQUtFX0NYWF9DT01QSUxFUl9JRH0iIE1BVENIRVMgIi4qQ2xhbmcuKiIpCiAgY2hlY2tfbm93YXJuX2ZsYWcoLVduby1kZXByZWNhdGVkLWFub24tZW51bS1lbnVtLWNvbnZlcnNpb24pCiAgY2hlY2tfbm93YXJuX2ZsYWcoLVduby1leHRlcm4tYy1jb21wYXQpCiAgY2hlY2tfbm93YXJuX2ZsYWcoLVduby1pbXBsaWNpdC1pbnQtZmxvYXQtY29udmVyc2lvbikKICBjaGVja19ub3dhcm5fZmxhZygtV25vLWRlcHJlY2F0ZWQtZW51bS1lbnVtLWNvbnZlcnNpb24pCmVuZGlmKCIke0NNQUtFX0NYWF9DT01QSUxFUl9JRH0iIE1BVENIRVMgIi4qQ2xhbmcuKiIpCgojIGR1bXAoQ01BS0VfQ19GTEFHUyBDTUFLRV9DWFhfRkxBR1MpIGR1bXAoQ01BS0VfQ1hYX0ZMQUdTX0RFQlVHKQoKY2hlY2tfcGljX2ZsYWcoKQoKc2V0KERFQlVHX09VVFBVVCBUUlVFIENBQ0hFIEJPT0wgIkRlYnVnIG91dHB1dCIgRk9SQ0UpCnNldChERUJVR19NQVQgRkFMU0UgQ0FDSEUgQk9PTCAiRGVidWcgY3Y6Ok1hdCIgRk9SQ0UpCgpjaGVja19vcHRfbm9uZV9mbGFnKCkKCmNoZWNrX2RlYnVnX2dkYl9mbGFnKCkKCmNoZWNrX2NfY29tcGlsZXJfZmxhZygiLWZsdG8iIEhBU19GX0xUT19GTEFHKQoKaWYoSEFTX0ZfTFRPX0ZMQUcpCiAgb3B0aW9uKEVOQUJMRV9MVE8gIkVuYWJsZSBsaW5rLXRpbWUgb3B0aW1pemF0aW9uIiBPRkYpCmVuZGlmKEhBU19GX0xUT19GTEFHKQoKaWYoRU5BQkxFX0xUTykKICBzZXQoQ01BS0VfQ19GTEFHUyAiJHtDTUFLRV9DX0ZMQUdTfSAtZmx0byIpCiAgc2V0KENNQUtFX0VYRV9MSU5LRVJfRkxBR1MgIiR7Q01BS0VfRVhFX0xJTktFUl9GTEFHU30gLWZsdG8iKQplbmRpZihFTkFCTEVfTFRPKQoKbGlua19kaXJlY3RvcmllcyhCRUZPUkUgJHtxdWlja2pzX0JJTkFSWV9ESVJ9KQoKbGlua19kaXJlY3RvcmllcygiJHtDTUFLRV9DVVJSRU5UX0JJTkFSWV9ESVJ9L3F1aWNranMiKQoKc2V0KFFVSUNLSlNfTElCUkFSWSBxdWlja2pzKQpsaW5rX2RpcmVjdG9yaWVzKCR7Q01BS0VfQ1VSUkVOVF9CSU5BUllfRElSfS9xdWlja2pzKQoKb3B0aW9uKFFVSUNLSlNfTU9EVUxFUyAiQnVpbGQgLnNvIG1vZHVsZXMgZm9yIHF1aWNranMiIE9OKQoKb3B0aW9uKEJVSUxEX1FVSUNLSlMgIkJ1aWxkIFF1aWNrSlMiIE9OKQoKZmlsZShHTE9CIE9QRU5DVl9TT1VSQ0VTICouaHBwICouY3BwKQojIGR1bXAoT1BFTkNWX1NPVVJDRVMpCgpsaXN0KEZJTFRFUiBPUEVOQ1ZfU09VUkNFUyAgRVhDTFVERSBSRUdFWCAiaW5pdF9tb2R1bGUuY3BwIikKYWRkX2xpYnJhcnkocWpzLW9wZW5jdiAke09QRU5DVl9TT1VSQ0VTfSkKICB0YXJnZXRfY29tcGlsZV9kZWZpbml0aW9ucyhxanMtb3BlbmN2IFBSSVZBVEUgQ09ORklHX1BSRUZJWD0iJHtDTUFLRV9JTlNUQUxMX1BSRUZJWH0iKQpzZXQoanNiaW5kaW5nc19MSUJSQVJJRVMgcWpzLW9wZW5jdikKCiNtYWtlX3N0YXRpY19tb2R1bGUob3BlbmN2IGluaXRfbW9kdWxlLmNwcCkKbWFrZV9zaGFyZWRfbW9kdWxlKG9wZW5jdiBpbml0X21vZHVsZS5jcHApCgAAAAAAAAAApA8AAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAlw4AAAAAAACaDgAAAAAAAAAAAAAAAPC/"
				],
				[
					975,
					1,
					"insert",
					{
						"characters": " "
					},
					"AQAAAKEOAAAAAAAAog4AAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAoQ4AAAAAAAChDgAAAAAAAAAAAAAAAPC/"
				],
				[
					976,
					1,
					"left_delete",
					null,
					"AQAAAKEOAAAAAAAAoQ4AAAAAAAABAAAAIA",
					"AQAAAAAAAAABAAAAog4AAAAAAACiDgAAAAAAAAAAAAAAAPC/"
				],
				[
					977,
					1,
					"insert",
					{
						"characters": "S"
					},
					"AQAAAKEOAAAAAAAAog4AAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAoQ4AAAAAAAChDgAAAAAAAAAAAAAAAPC/"
				],
				[
					978,
					1,
					"left_delete",
					null,
					"AQAAAKEOAAAAAAAAoQ4AAAAAAAABAAAAUw",
					"AQAAAAAAAAABAAAAog4AAAAAAACiDgAAAAAAAAAAAAAAAPC/"
				],
				[
					979,
					1,
					"insert",
					{
						"characters": "STATIC"
					},
					"BgAAAKEOAAAAAAAAog4AAAAAAAAAAAAAog4AAAAAAACjDgAAAAAAAAAAAACjDgAAAAAAAKQOAAAAAAAAAAAAAKQOAAAAAAAApQ4AAAAAAAAAAAAApQ4AAAAAAACmDgAAAAAAAAAAAACmDgAAAAAAAKcOAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAoQ4AAAAAAAChDgAAAAAAAAAAAAAAAPC/"
				],
				[
					980,
					1,
					"insert",
					{
						"characters": " "
					},
					"AQAAAKcOAAAAAAAAqA4AAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAApw4AAAAAAACnDgAAAAAAAAAAAAAAAPC/"
				],
				[
					982,
					1,
					"insert",
					{
						"characters": "\nset"
					},
					"BAAAALoOAAAAAAAAuw4AAAAAAAAAAAAAuw4AAAAAAAC8DgAAAAAAAAAAAAC8DgAAAAAAAL0OAAAAAAAAAAAAAL0OAAAAAAAAvg4AAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAug4AAAAAAAC6DgAAAAAAAP///////+9/"
				],
				[
					983,
					1,
					"insert_snippet",
					{
						"contents": "($0)"
					},
					"AQAAAL4OAAAAAAAAwA4AAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAvg4AAAAAAAC+DgAAAAAAAAAAAAAAAPC/"
				],
				[
					984,
					1,
					"run_macro_file",
					{
						"file": "res://Packages/Default/Delete Left Right.sublime-macro"
					},
					"AgAAAL4OAAAAAAAAvg4AAAAAAAABAAAAKL4OAAAAAAAAvg4AAAAAAAABAAAAKQ",
					"AQAAAAAAAAABAAAAvw4AAAAAAAC/DgAAAAAAAAAAAAAAAPC/"
				],
				[
					985,
					1,
					"insert",
					{
						"characters": "_target"
					},
					"BwAAAL4OAAAAAAAAvw4AAAAAAAAAAAAAvw4AAAAAAADADgAAAAAAAAAAAADADgAAAAAAAMEOAAAAAAAAAAAAAMEOAAAAAAAAwg4AAAAAAAAAAAAAwg4AAAAAAADDDgAAAAAAAAAAAADDDgAAAAAAAMQOAAAAAAAAAAAAAMQOAAAAAAAAxQ4AAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAvg4AAAAAAAC+DgAAAAAAAAAAAAAAAPC/"
				],
				[
					986,
					1,
					"insert_completion",
					{
						"completion": "set_target_properties",
						"format": "snippet",
						"keep_prefix": false,
						"must_insert": false,
						"trigger": "set_target_properties"
					},
					"AgAAALsOAAAAAAAAuw4AAAAAAAAKAAAAc2V0X3RhcmdldLsOAAAAAAAA0A4AAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAxQ4AAAAAAADFDgAAAAAAAAAAAAAAAPC/"
				],
				[
					987,
					1,
					"insert_snippet",
					{
						"contents": "($0)"
					},
					"AQAAANAOAAAAAAAA0g4AAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA0A4AAAAAAADQDgAAAAAAAAAAAAAAAPC/"
				],
				[
					988,
					1,
					"insert",
					{
						"characters": "qjs-opencv"
					},
					"CgAAANEOAAAAAAAA0g4AAAAAAAAAAAAA0g4AAAAAAADTDgAAAAAAAAAAAADTDgAAAAAAANQOAAAAAAAAAAAAANQOAAAAAAAA1Q4AAAAAAAAAAAAA1Q4AAAAAAADWDgAAAAAAAAAAAADWDgAAAAAAANcOAAAAAAAAAAAAANcOAAAAAAAA2A4AAAAAAAAAAAAA2A4AAAAAAADZDgAAAAAAAAAAAADZDgAAAAAAANoOAAAAAAAAAAAAANoOAAAAAAAA2w4AAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA0Q4AAAAAAADRDgAAAAAAAAAAAAAAAPC/"
				],
				[
					989,
					1,
					"insert",
					{
						"characters": " PROPERTIES"
					},
					"CwAAANsOAAAAAAAA3A4AAAAAAAAAAAAA3A4AAAAAAADdDgAAAAAAAAAAAADdDgAAAAAAAN4OAAAAAAAAAAAAAN4OAAAAAAAA3w4AAAAAAAAAAAAA3w4AAAAAAADgDgAAAAAAAAAAAADgDgAAAAAAAOEOAAAAAAAAAAAAAOEOAAAAAAAA4g4AAAAAAAAAAAAA4g4AAAAAAADjDgAAAAAAAAAAAADjDgAAAAAAAOQOAAAAAAAAAAAAAOQOAAAAAAAA5Q4AAAAAAAAAAAAA5Q4AAAAAAADmDgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA2w4AAAAAAADbDgAAAAAAAAAAAAAAAPC/"
				],
				[
					990,
					1,
					"insert",
					{
						"characters": " "
					},
					"AQAAAOYOAAAAAAAA5w4AAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA5g4AAAAAAADmDgAAAAAAAAAAAAAAAPC/"
				],
				[
					991,
					1,
					"insert",
					{
						"characters": "PREFI"
					},
					"BQAAAOcOAAAAAAAA6A4AAAAAAAAAAAAA6A4AAAAAAADpDgAAAAAAAAAAAADpDgAAAAAAAOoOAAAAAAAAAAAAAOoOAAAAAAAA6w4AAAAAAAAAAAAA6w4AAAAAAADsDgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA5w4AAAAAAADnDgAAAAAAAAAAAAAAAPC/"
				],
				[
					992,
					1,
					"insert",
					{
						"characters": " "
					},
					"AQAAAOwOAAAAAAAA7Q4AAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA7A4AAAAAAADsDgAAAAAAAAAAAAAAAPC/"
				],
				[
					993,
					1,
					"left_delete",
					null,
					"AQAAAOwOAAAAAAAA7A4AAAAAAAABAAAAIA",
					"AQAAAAAAAAABAAAA7Q4AAAAAAADtDgAAAAAAAAAAAAAAAPC/"
				],
				[
					994,
					1,
					"insert",
					{
						"characters": "X"
					},
					"AQAAAOwOAAAAAAAA7Q4AAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA7A4AAAAAAADsDgAAAAAAAAAAAAAAAPC/"
				],
				[
					995,
					1,
					"insert",
					{
						"characters": " lib"
					},
					"BAAAAO0OAAAAAAAA7g4AAAAAAAAAAAAA7g4AAAAAAADvDgAAAAAAAAAAAADvDgAAAAAAAPAOAAAAAAAAAAAAAPAOAAAAAAAA8Q4AAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA7Q4AAAAAAADtDgAAAAAAAAAAAAAAAPC/"
				],
				[
					1003,
					1,
					"insert",
					{
						"characters": " OUTPUT_NA"
					},
					"CgAAAPEOAAAAAAAA8g4AAAAAAAAAAAAA8g4AAAAAAADzDgAAAAAAAAAAAADzDgAAAAAAAPQOAAAAAAAAAAAAAPQOAAAAAAAA9Q4AAAAAAAAAAAAA9Q4AAAAAAAD2DgAAAAAAAAAAAAD2DgAAAAAAAPcOAAAAAAAAAAAAAPcOAAAAAAAA+A4AAAAAAAAAAAAA+A4AAAAAAAD5DgAAAAAAAAAAAAD5DgAAAAAAAPoOAAAAAAAAAAAAAPoOAAAAAAAA+w4AAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA8Q4AAAAAAADxDgAAAAAAAAAAAAAAAPC/"
				],
				[
					1004,
					1,
					"insert",
					{
						"characters": "ME"
					},
					"AgAAAPsOAAAAAAAA/A4AAAAAAAAAAAAA/A4AAAAAAAD9DgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA+w4AAAAAAAD7DgAAAAAAAAAAAAAAAPC/"
				],
				[
					1005,
					1,
					"insert",
					{
						"characters": " opencv"
					},
					"BwAAAP0OAAAAAAAA/g4AAAAAAAAAAAAA/g4AAAAAAAD/DgAAAAAAAAAAAAD/DgAAAAAAAAAPAAAAAAAAAAAAAAAPAAAAAAAAAQ8AAAAAAAAAAAAAAQ8AAAAAAAACDwAAAAAAAAAAAAACDwAAAAAAAAMPAAAAAAAAAAAAAAMPAAAAAAAABA8AAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA/Q4AAAAAAAD9DgAAAAAAAAAAAAAAAPC/"
				],
				[
					1009,
					2,
					"insert_snippet",
					{
						"contents": "\"${0:$SELECTION}\""
					},
					"BAAAAO4OAAAAAAAA7g4AAAAAAAADAAAAbGli7g4AAAAAAADzDgAAAAAAAAAAAADvDgAAAAAAAO8OAAAAAAAAAwAAAGxpYu8OAAAAAAAA9A4AAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA7g4AAAAAAADxDgAAAAAAAAAAAAAAAPC/"
				],
				[
					1010,
					3,
					"right_delete",
					null,
					"AwAAAPAOAAAAAAAA8A4AAAAAAAADAAAAbGli8A4AAAAAAADwDgAAAAAAAAEAAAAi8A4AAAAAAADwDgAAAAAAAAEAAAAi",
					"AQAAAAAAAAABAAAA8A4AAAAAAADzDgAAAAAAAAAAAAAAAPC/"
				],
				[
					1016,
					1,
					"insert",
					{
						"characters": "\nibns"
					},
					"CAAAAHYPAAAAAAAAdw8AAAAAAAAAAAAAdw8AAAAAAACSDwAAAAAAAAAAAAB3DwAAAAAAAHcPAAAAAAAAGwAAACAgICAgICAgICAgICAgICAgICAgICAgICAgIHcPAAAAAAAAdw8AAAAAAAAAAAAAdw8AAAAAAAB4DwAAAAAAAAAAAAB4DwAAAAAAAHkPAAAAAAAAAAAAAHkPAAAAAAAAeg8AAAAAAAAAAAAAeg8AAAAAAAB7DwAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAdg8AAAAAAAB2DwAAAAAAAAAAAAAAAPC/"
				],
				[
					1017,
					3,
					"left_delete",
					null,
					"AwAAAHoPAAAAAAAAeg8AAAAAAAABAAAAc3kPAAAAAAAAeQ8AAAAAAAABAAAAbngPAAAAAAAAeA8AAAAAAAABAAAAYg",
					"AQAAAAAAAAABAAAAew8AAAAAAAB7DwAAAAAAAAAAAAAAAPC/"
				],
				[
					1018,
					1,
					"insert",
					{
						"characters": "nstall"
					},
					"BgAAAHgPAAAAAAAAeQ8AAAAAAAAAAAAAeQ8AAAAAAAB6DwAAAAAAAAAAAAB6DwAAAAAAAHsPAAAAAAAAAAAAAHsPAAAAAAAAfA8AAAAAAAAAAAAAfA8AAAAAAAB9DwAAAAAAAAAAAAB9DwAAAAAAAH4PAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAeA8AAAAAAAB4DwAAAAAAAAAAAAAAAPC/"
				],
				[
					1019,
					1,
					"insert_snippet",
					{
						"contents": "($0)"
					},
					"AQAAAH4PAAAAAAAAgA8AAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAfg8AAAAAAAB+DwAAAAAAAAAAAAAAAPC/"
				],
				[
					1020,
					1,
					"insert",
					{
						"characters": "TA"
					},
					"AgAAAH8PAAAAAAAAgA8AAAAAAAAAAAAAgA8AAAAAAACBDwAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAfw8AAAAAAAB/DwAAAAAAAAAAAAAAAPC/"
				],
				[
					1021,
					1,
					"insert_completion",
					{
						"completion": "TARGETS",
						"format": "text",
						"keep_prefix": false,
						"must_insert": false,
						"trigger": "TARGETS"
					},
					"AgAAAH8PAAAAAAAAfw8AAAAAAAACAAAAVEF/DwAAAAAAAIYPAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAgQ8AAAAAAACBDwAAAAAAAAAAAAAAAPC/"
				],
				[
					1022,
					1,
					"insert",
					{
						"characters": " qjs-opencv"
					},
					"CwAAAIYPAAAAAAAAhw8AAAAAAAAAAAAAhw8AAAAAAACIDwAAAAAAAAAAAACIDwAAAAAAAIkPAAAAAAAAAAAAAIkPAAAAAAAAig8AAAAAAAAAAAAAig8AAAAAAACLDwAAAAAAAAAAAACLDwAAAAAAAIwPAAAAAAAAAAAAAIwPAAAAAAAAjQ8AAAAAAAAAAAAAjQ8AAAAAAACODwAAAAAAAAAAAACODwAAAAAAAI8PAAAAAAAAAAAAAI8PAAAAAAAAkA8AAAAAAAAAAAAAkA8AAAAAAACRDwAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAhg8AAAAAAACGDwAAAAAAAAAAAAAAAPC/"
				],
				[
					1023,
					1,
					"insert",
					{
						"characters": " DEAS"
					},
					"BQAAAJEPAAAAAAAAkg8AAAAAAAAAAAAAkg8AAAAAAACTDwAAAAAAAAAAAACTDwAAAAAAAJQPAAAAAAAAAAAAAJQPAAAAAAAAlQ8AAAAAAAAAAAAAlQ8AAAAAAACWDwAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAkQ8AAAAAAACRDwAAAAAAAAAAAAAAAPC/"
				],
				[
					1024,
					2,
					"left_delete",
					null,
					"AgAAAJUPAAAAAAAAlQ8AAAAAAAABAAAAU5QPAAAAAAAAlA8AAAAAAAABAAAAQQ",
					"AQAAAAAAAAABAAAAlg8AAAAAAACWDwAAAAAAAAAAAAAAAPC/"
				],
				[
					1025,
					1,
					"insert",
					{
						"characters": "STINAT"
					},
					"BgAAAJQPAAAAAAAAlQ8AAAAAAAAAAAAAlQ8AAAAAAACWDwAAAAAAAAAAAACWDwAAAAAAAJcPAAAAAAAAAAAAAJcPAAAAAAAAmA8AAAAAAAAAAAAAmA8AAAAAAACZDwAAAAAAAAAAAACZDwAAAAAAAJoPAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAlA8AAAAAAACUDwAAAAAAAAAAAAAAAPC/"
				],
				[
					1026,
					1,
					"insert",
					{
						"characters": "ION"
					},
					"AwAAAJoPAAAAAAAAmw8AAAAAAAAAAAAAmw8AAAAAAACcDwAAAAAAAAAAAACcDwAAAAAAAJ0PAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAmg8AAAAAAACaDwAAAAAAAAAAAAAAAPC/"
				],
				[
					1027,
					1,
					"insert",
					{
						"characters": " lli"
					},
					"BAAAAJ0PAAAAAAAAng8AAAAAAAAAAAAAng8AAAAAAACfDwAAAAAAAAAAAACfDwAAAAAAAKAPAAAAAAAAAAAAAKAPAAAAAAAAoQ8AAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAnQ8AAAAAAACdDwAAAAAAAAAAAAAAAPC/"
				],
				[
					1028,
					2,
					"left_delete",
					null,
					"AgAAAKAPAAAAAAAAoA8AAAAAAAABAAAAaZ8PAAAAAAAAnw8AAAAAAAABAAAAbA",
					"AQAAAAAAAAABAAAAoQ8AAAAAAAChDwAAAAAAAAAAAAAAAPC/"
				],
				[
					1029,
					1,
					"insert",
					{
						"characters": "ib/quickjs"
					},
					"CgAAAJ8PAAAAAAAAoA8AAAAAAAAAAAAAoA8AAAAAAAChDwAAAAAAAAAAAAChDwAAAAAAAKIPAAAAAAAAAAAAAKIPAAAAAAAAow8AAAAAAAAAAAAAow8AAAAAAACkDwAAAAAAAAAAAACkDwAAAAAAAKUPAAAAAAAAAAAAAKUPAAAAAAAApg8AAAAAAAAAAAAApg8AAAAAAACnDwAAAAAAAAAAAACnDwAAAAAAAKgPAAAAAAAAAAAAAKgPAAAAAAAAqQ8AAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAnw8AAAAAAACfDwAAAAAAAAAAAAAAAPC/"
				],
				[
					1037,
					1,
					"insert",
					{
						"characters": " COMPILE_FLAGS"
					},
					"DgAAAAMPAAAAAAAABA8AAAAAAAAAAAAABA8AAAAAAAAFDwAAAAAAAAAAAAAFDwAAAAAAAAYPAAAAAAAAAAAAAAYPAAAAAAAABw8AAAAAAAAAAAAABw8AAAAAAAAIDwAAAAAAAAAAAAAIDwAAAAAAAAkPAAAAAAAAAAAAAAkPAAAAAAAACg8AAAAAAAAAAAAACg8AAAAAAAALDwAAAAAAAAAAAAALDwAAAAAAAAwPAAAAAAAAAAAAAAwPAAAAAAAADQ8AAAAAAAAAAAAADQ8AAAAAAAAODwAAAAAAAAAAAAAODwAAAAAAAA8PAAAAAAAAAAAAAA8PAAAAAAAAEA8AAAAAAAAAAAAAEA8AAAAAAAARDwAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAAw8AAAAAAAADDwAAAAAAAAAAAAAAAPC/"
				],
				[
					1038,
					1,
					"insert",
					{
						"characters": " "
					},
					"AQAAABEPAAAAAAAAEg8AAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAEQ8AAAAAAAARDwAAAAAAAAAAAAAAAPC/"
				],
				[
					1039,
					1,
					"insert_snippet",
					{
						"contents": "\"$0\""
					},
					"AQAAABIPAAAAAAAAFA8AAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAEg8AAAAAAAASDwAAAAAAAAAAAAAAAPC/"
				],
				[
					1040,
					1,
					"insert",
					{
						"characters": "√§$"
					},
					"AgAAABMPAAAAAAAAFA8AAAAAAAAAAAAAFA8AAAAAAAAVDwAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAEw8AAAAAAAATDwAAAAAAAAAAAAAAAPC/"
				],
				[
					1041,
					2,
					"left_delete",
					null,
					"AgAAABQPAAAAAAAAFA8AAAAAAAABAAAAJBMPAAAAAAAAEw8AAAAAAAACAAAAw6Q",
					"AQAAAAAAAAABAAAAFQ8AAAAAAAAVDwAAAAAAAAAAAAAAAPC/"
				],
				[
					1042,
					1,
					"insert",
					{
						"characters": "${JKS"
					},
					"BQAAABMPAAAAAAAAFA8AAAAAAAAAAAAAFA8AAAAAAAAVDwAAAAAAAAAAAAAVDwAAAAAAABYPAAAAAAAAAAAAABYPAAAAAAAAFw8AAAAAAAAAAAAAFw8AAAAAAAAYDwAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAEw8AAAAAAAATDwAAAAAAAAAAAAAAAPC/"
				],
				[
					1043,
					2,
					"left_delete",
					null,
					"AgAAABcPAAAAAAAAFw8AAAAAAAABAAAAUxYPAAAAAAAAFg8AAAAAAAABAAAASw",
					"AQAAAAAAAAABAAAAGA8AAAAAAAAYDwAAAAAAAAAAAAAAAPC/"
				],
				[
					1044,
					1,
					"insert",
					{
						"characters": "S"
					},
					"AQAAABYPAAAAAAAAFw8AAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAFg8AAAAAAAAWDwAAAAAAAAAAAAAAAPC/"
				],
				[
					1048,
					1,
					"paste",
					null,
					"AgAAABUPAAAAAAAAKg8AAAAAAAAAAAAAKg8AAAAAAAAqDwAAAAAAAAIAAABKUw",
					"AQAAAAAAAAABAAAAFQ8AAAAAAAAXDwAAAAAAAAAAAAAAAPC/"
				],
				[
					1049,
					1,
					"insert",
					{
						"characters": "}"
					},
					"AQAAACoPAAAAAAAAKw8AAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAKg8AAAAAAAAqDwAAAAAAAAAAAAAAAPC/"
				],
				[
					1050,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAABSEAAAY21ha2VfbWluaW11bV9yZXF1aXJlZChWRVJTSU9OIDMuMCkKcHJvamVjdChxanMtb3BlbmN2KQoKc2V0KERJU0FCTEVfV0VSUk9SIFRSVUUgQ0FDSEUgQk9PTCAiRGlzYWJsZSAtV2Vycm9yIGZsYWciIEZPUkNFKQoKc2V0KENNQUtFX0JVSUxEX1RZUEUgIkRlYnVnIiBDQUNIRSBTVFJJTkcgImJ1aWxkIHR5cGUiKQoKc2V0X3Byb3BlcnR5KENBQ0hFIENNQUtFX0JVSUxEX1RZUEUgUFJPUEVSVFkgU1RSSU5HUyBEZWJ1ZyBSZWxlYXNlIE1pblNpemVSZWwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVsV2l0aERlYkluZm8pCgpzZXQocXVpY2tqc19zb3VyY2VzX3Jvb3QgJHtDTUFLRV9DVVJSRU5UX1NPVVJDRV9ESVJ9L3F1aWNranMpCgppZihOT1QgQ01BS0VfQlVJTERfVFlQRSBPUiBDTUFLRV9CVUlMRF9UWVBFIFNUUkVRVUFMICIiKQogIHNldChDTUFLRV9CVUlMRF9UWVBFICJEZWJ1ZyIpCmVuZGlmKE5PVCBDTUFLRV9CVUlMRF9UWVBFIE9SIENNQUtFX0JVSUxEX1RZUEUgU1RSRVFVQUwgIiIpCgppZihXSU4zMikKICBzZXQoTElCV1MyXzMyIHdzMl8zMikKZWxzZShXSU4zMikKCmVuZGlmKFdJTjMyKQoKaW5jbHVkZShGaW5kVGhyZWFkcykKaW5jbHVkZShGaW5kUGtnQ29uZmlnKQppbmNsdWRlKCR7Q01BS0VfQ1VSUkVOVF9TT1VSQ0VfRElSfS9jbWFrZS9GdW5jdGlvbnMuY21ha2UpCmluY2x1ZGUoJHtDTUFLRV9DVVJSRU5UX1NPVVJDRV9ESVJ9L2NtYWtlL0NoZWNrRmxhZ3MuY21ha2UpCmluY2x1ZGUoJHtDTUFLRV9DVVJSRU5UX1NPVVJDRV9ESVJ9L2NtYWtlL0ZpbmRRdWlja0pTLmNtYWtlKQppbmNsdWRlKCR7Q01BS0VfQ1VSUkVOVF9TT1VSQ0VfRElSfS9jbWFrZS9KU0JpbmRpbmdzLmNtYWtlKQppbmNsdWRlKCR7Q01BS0VfQ1VSUkVOVF9TT1VSQ0VfRElSfS9jbWFrZS9PcGVuQ1YuY21ha2UpCgppZihFTkFCTEVfQ0NBQ0hFKQogIGluY2x1ZGUoJHtDTUFLRV9DVVJSRU5UX1NPVVJDRV9ESVJ9L2NtYWtlL0NDYWNoZS5jbWFrZSkKICBlbmFibGVfY2NhY2hlKCkKZW5kaWYoRU5BQkxFX0NDQUNIRSkKCmNoZWNrX3NpemUoImxvbmciIFNJWkVPRl9MT05HKQpjaGVja19zaXplKCJsb25nIGxvbmciIFNJWkVPRl9MT05HX0xPTkcpCmNoZWNrX3NpemUoInNpemVfdCIgU0laRU9GX1NJWkVfVCkKCmlmKE5PVCBQT1NJVElPTl9JTkRFUEVOREVOVF9DT0RFKQogIHNldChQT1NJVElPTl9JTkRFUEVOREVOVF9DT0RFIE9OKQplbmRpZihOT1QgUE9TSVRJT05fSU5ERVBFTkRFTlRfQ09ERSkKb3B0aW9uKEJVSUxEX1NIQVJFRF9MSUJTICJCdWlsZCBzaGFyZWQgbGlicmFyaWVzIiBPTikKCm1lc3NhZ2UoIlRocmVhZCBsaWJyYXJ5OiAke0NNQUtFX1RIUkVBRF9MSUJTX0lOSVR9IikKaWYoQ01BS0VfVEhSRUFEX0xJQlNfSU5JVCkKICBzZXQoTElCUFRIUkVBRCAke0NNQUtFX1RIUkVBRF9MSUJTX0lOSVR9KQplbmRpZihDTUFLRV9USFJFQURfTElCU19JTklUKQoKY2hlY2tfbGlicmFyeV9leGlzdHMobSBhdGFuMiAvdXNyL2xpYiBIQVZFX0xJQk0pCmlmKEhBVkVfTElCTSkKICBzZXQoTElCTSBtKQogICMgbWVzc2FnZSgiRm91bmQgbWF0aCBsaWJyYXJ5OiAke0xJQk19IikKZW5kaWYoSEFWRV9MSUJNKQoKY2hlY2tfbGlicmFyeV9leGlzdHMoZGwgZGxvcGVuIC91c3IvbGliIEhBVkVfTElCREwpCmlmKEhBVkVfTElCREwpCiAgc2V0KExJQkRMIGRsKQogICMgbWVzc2FnZSgiRm91bmQgZGxmY24gbGlicmFyeTogJHtMSUJETH0iKQplbmRpZihIQVZFX0xJQkRMKQoKY2hlY2tfbGlicmFyeV9leGlzdHMoanNvbi1jcHAgWk40WUFNTDZkZXRhaWw5bm9kZV9kYXRhOXJlc2V0X21hcEV2IC91c3IKICAgICAgICAgICAgICAgICAgICAgSlNPTl9DUFApCgpmaW5kX3F1aWNranMoKQpmaW5kX29wZW5jdigpCgpzZXQoQ01BS0VfSU5TVEFMTF9SUEFUSCAiJHtPUEVOQ1ZfTElCX0RJUn0iCiAgICBDQUNIRSBQQVRIICJCdWlsZCB3aXRoIGluc3RhbGwgcnBhdGgiIEZPUkNFKQoKaW5jbHVkZV9kaXJlY3RvcmllcygKICAke09QRU5DVl9JTkNMVURFX0RJUlN9ICR7Q01BS0VfQ1VSUkVOVF9TT1VSQ0VfRElSfQogICR7Q01BS0VfQ1VSUkVOVF9TT1VSQ0VfRElSfS9vcGVuY3YgJHtDTUFLRV9DVVJSRU5UX1NPVVJDRV9ESVJ9L3NyYwogICR7Q01BS0VfQ1VSUkVOVF9TT1VSQ0VfRElSfS9pbmNsdWRlICR7Q01BS0VfQ1VSUkVOVF9TT1VSQ0VfRElSfS9xdWlja2pzKQoKY2hlY2tfY3h4X3N0YW5kYXJkX2ZsYWcoKQoKc3RyaW5nKFJFR0VYIFJFUExBQ0UgIiAtV2FsbCIgIiIgQ01BS0VfQ19GTEFHUyAiJHtDTUFLRV9DX0ZMQUdTfSIpCnN0cmluZyhSRUdFWCBSRVBMQUNFICIgLVdhbGwiICIiIENNQUtFX0NYWF9GTEFHUyAiJHtDTUFLRV9DWFhfRkxBR1N9IikKCmNoZWNrX25vd2Fybl9mbGFnKC1Xbm8tdW51c2VkLXZhbHVlKQpjaGVja19ub3dhcm5fZmxhZygtV25vLXVudXNlZC12YXJpYWJsZSkKCmlmKCIke0NNQUtFX0NYWF9DT01QSUxFUl9JRH0iIE1BVENIRVMgIi4qQ2xhbmcuKiIpCiAgY2hlY2tfbm93YXJuX2ZsYWcoLVduby1kZXByZWNhdGVkLWFub24tZW51bS1lbnVtLWNvbnZlcnNpb24pCiAgY2hlY2tfbm93YXJuX2ZsYWcoLVduby1leHRlcm4tYy1jb21wYXQpCiAgY2hlY2tfbm93YXJuX2ZsYWcoLVduby1pbXBsaWNpdC1pbnQtZmxvYXQtY29udmVyc2lvbikKICBjaGVja19ub3dhcm5fZmxhZygtV25vLWRlcHJlY2F0ZWQtZW51bS1lbnVtLWNvbnZlcnNpb24pCmVuZGlmKCIke0NNQUtFX0NYWF9DT01QSUxFUl9JRH0iIE1BVENIRVMgIi4qQ2xhbmcuKiIpCgojIGR1bXAoQ01BS0VfQ19GTEFHUyBDTUFLRV9DWFhfRkxBR1MpIGR1bXAoQ01BS0VfQ1hYX0ZMQUdTX0RFQlVHKQoKY2hlY2tfcGljX2ZsYWcoKQoKc2V0KERFQlVHX09VVFBVVCBUUlVFIENBQ0hFIEJPT0wgIkRlYnVnIG91dHB1dCIgRk9SQ0UpCnNldChERUJVR19NQVQgRkFMU0UgQ0FDSEUgQk9PTCAiRGVidWcgY3Y6Ok1hdCIgRk9SQ0UpCgpjaGVja19vcHRfbm9uZV9mbGFnKCkKCmNoZWNrX2RlYnVnX2dkYl9mbGFnKCkKCmNoZWNrX2NfY29tcGlsZXJfZmxhZygiLWZsdG8iIEhBU19GX0xUT19GTEFHKQoKaWYoSEFTX0ZfTFRPX0ZMQUcpCiAgb3B0aW9uKEVOQUJMRV9MVE8gIkVuYWJsZSBsaW5rLXRpbWUgb3B0aW1pemF0aW9uIiBPRkYpCmVuZGlmKEhBU19GX0xUT19GTEFHKQoKaWYoRU5BQkxFX0xUTykKICBzZXQoQ01BS0VfQ19GTEFHUyAiJHtDTUFLRV9DX0ZMQUdTfSAtZmx0byIpCiAgc2V0KENNQUtFX0VYRV9MSU5LRVJfRkxBR1MgIiR7Q01BS0VfRVhFX0xJTktFUl9GTEFHU30gLWZsdG8iKQplbmRpZihFTkFCTEVfTFRPKQoKbGlua19kaXJlY3RvcmllcyhCRUZPUkUgJHtxdWlja2pzX0JJTkFSWV9ESVJ9KQoKbGlua19kaXJlY3RvcmllcygiJHtDTUFLRV9DVVJSRU5UX0JJTkFSWV9ESVJ9L3F1aWNranMiKQoKc2V0KFFVSUNLSlNfTElCUkFSWSBxdWlja2pzKQpsaW5rX2RpcmVjdG9yaWVzKCR7Q01BS0VfQ1VSUkVOVF9CSU5BUllfRElSfS9xdWlja2pzKQoKb3B0aW9uKFFVSUNLSlNfTU9EVUxFUyAiQnVpbGQgLnNvIG1vZHVsZXMgZm9yIHF1aWNranMiIE9OKQoKb3B0aW9uKEJVSUxEX1FVSUNLSlMgIkJ1aWxkIFF1aWNrSlMiIE9OKQoKZmlsZShHTE9CIE9QRU5DVl9TT1VSQ0VTICouaHBwICouY3BwKQojIGR1bXAoT1BFTkNWX1NPVVJDRVMpCgpsaXN0KEZJTFRFUiBPUEVOQ1ZfU09VUkNFUyBFWENMVURFIFJFR0VYICJpbml0X21vZHVsZS5jcHAiKQphZGRfbGlicmFyeShxanMtb3BlbmN2IFNUQVRJQyAke09QRU5DVl9TT1VSQ0VTfSkKc2V0X3RhcmdldF9wcm9wZXJ0aWVzKHFqcy1vcGVuY3YgUFJPUEVSVElFUyBQUkVGSVggIiIgT1VUUFVUX05BTUUgb3BlbmN2IENPTVBJTEVfRkxBR1MgIiR7UVVJQ0tKU19NT0RVTEVfQ0ZMQUdTfSIpCnRhcmdldF9jb21waWxlX2RlZmluaXRpb25zKHFqcy1vcGVuY3YKICAgICAgICAgICAgICAgICAgICAgICAgICAgUFJJVkFURSBDT05GSUdfUFJFRklYPSIke0NNQUtFX0lOU1RBTExfUFJFRklYfSIpCmluc3RhbGwoVEFSR0VUUyBxanMtb3BlbmN2IERFU1RJTkFUSU9OIGxpYi9xdWlja2pzKQpzZXQoanNiaW5kaW5nc19MSUJSQVJJRVMgcWpzLW9wZW5jdikKCiMgbWFrZV9zdGF0aWNfbW9kdWxlKG9wZW5jdiBpbml0X21vZHVsZS5jcHApCm1ha2Vfc2hhcmVkX21vZHVsZShvcGVuY3YgaW5pdF9tb2R1bGUuY3BwKQoAAAAAAAAAAIoQAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAKw8AAAAAAAArDwAAAAAAAAAAAAAAAPC/"
				],
				[
					1078,
					1,
					"insert",
					{
						"characters": " ${"
					},
					"AwAAAGMPAAAAAAAAZA8AAAAAAAAAAAAAZA8AAAAAAABlDwAAAAAAAAAAAABlDwAAAAAAAGYPAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAYw8AAAAAAABjDwAAAAAAAAAAAAAAAPC/"
				],
				[
					1079,
					1,
					"paste",
					null,
					"AQAAAGYPAAAAAAAAaw8AAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAZg8AAAAAAABmDwAAAAAAAAAAAAAAAPC/"
				],
				[
					1080,
					1,
					"insert",
					{
						"characters": "}"
					},
					"AQAAAGsPAAAAAAAAbA8AAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAaw8AAAAAAABrDwAAAAAAAAAAAAAAAPC/"
				],
				[
					1091,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAACTEAAAY21ha2VfbWluaW11bV9yZXF1aXJlZChWRVJTSU9OIDMuMCkKcHJvamVjdChxanMtb3BlbmN2KQoKc2V0KERJU0FCTEVfV0VSUk9SIFRSVUUgQ0FDSEUgQk9PTCAiRGlzYWJsZSAtV2Vycm9yIGZsYWciIEZPUkNFKQoKc2V0KENNQUtFX0JVSUxEX1RZUEUgIkRlYnVnIiBDQUNIRSBTVFJJTkcgImJ1aWxkIHR5cGUiKQoKc2V0X3Byb3BlcnR5KENBQ0hFIENNQUtFX0JVSUxEX1RZUEUgUFJPUEVSVFkgU1RSSU5HUyBEZWJ1ZyBSZWxlYXNlIE1pblNpemVSZWwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVsV2l0aERlYkluZm8pCgpzZXQocXVpY2tqc19zb3VyY2VzX3Jvb3QgJHtDTUFLRV9DVVJSRU5UX1NPVVJDRV9ESVJ9L3F1aWNranMpCgppZihOT1QgQ01BS0VfQlVJTERfVFlQRSBPUiBDTUFLRV9CVUlMRF9UWVBFIFNUUkVRVUFMICIiKQogIHNldChDTUFLRV9CVUlMRF9UWVBFICJEZWJ1ZyIpCmVuZGlmKE5PVCBDTUFLRV9CVUlMRF9UWVBFIE9SIENNQUtFX0JVSUxEX1RZUEUgU1RSRVFVQUwgIiIpCgppZihXSU4zMikKICBzZXQoTElCV1MyXzMyIHdzMl8zMikKZWxzZShXSU4zMikKCmVuZGlmKFdJTjMyKQoKaW5jbHVkZShGaW5kVGhyZWFkcykKaW5jbHVkZShGaW5kUGtnQ29uZmlnKQppbmNsdWRlKCR7Q01BS0VfQ1VSUkVOVF9TT1VSQ0VfRElSfS9jbWFrZS9GdW5jdGlvbnMuY21ha2UpCmluY2x1ZGUoJHtDTUFLRV9DVVJSRU5UX1NPVVJDRV9ESVJ9L2NtYWtlL0NoZWNrRmxhZ3MuY21ha2UpCmluY2x1ZGUoJHtDTUFLRV9DVVJSRU5UX1NPVVJDRV9ESVJ9L2NtYWtlL0ZpbmRRdWlja0pTLmNtYWtlKQppbmNsdWRlKCR7Q01BS0VfQ1VSUkVOVF9TT1VSQ0VfRElSfS9jbWFrZS9KU0JpbmRpbmdzLmNtYWtlKQppbmNsdWRlKCR7Q01BS0VfQ1VSUkVOVF9TT1VSQ0VfRElSfS9jbWFrZS9PcGVuQ1YuY21ha2UpCgppZihFTkFCTEVfQ0NBQ0hFKQogIGluY2x1ZGUoJHtDTUFLRV9DVVJSRU5UX1NPVVJDRV9ESVJ9L2NtYWtlL0NDYWNoZS5jbWFrZSkKICBlbmFibGVfY2NhY2hlKCkKZW5kaWYoRU5BQkxFX0NDQUNIRSkKCmNoZWNrX3NpemUoImxvbmciIFNJWkVPRl9MT05HKQpjaGVja19zaXplKCJsb25nIGxvbmciIFNJWkVPRl9MT05HX0xPTkcpCmNoZWNrX3NpemUoInNpemVfdCIgU0laRU9GX1NJWkVfVCkKCmlmKE5PVCBQT1NJVElPTl9JTkRFUEVOREVOVF9DT0RFKQogIHNldChQT1NJVElPTl9JTkRFUEVOREVOVF9DT0RFIE9OKQplbmRpZihOT1QgUE9TSVRJT05fSU5ERVBFTkRFTlRfQ09ERSkKb3B0aW9uKEJVSUxEX1NIQVJFRF9MSUJTICJCdWlsZCBzaGFyZWQgbGlicmFyaWVzIiBPTikKCm1lc3NhZ2UoIlRocmVhZCBsaWJyYXJ5OiAke0NNQUtFX1RIUkVBRF9MSUJTX0lOSVR9IikKaWYoQ01BS0VfVEhSRUFEX0xJQlNfSU5JVCkKICBzZXQoTElCUFRIUkVBRCAke0NNQUtFX1RIUkVBRF9MSUJTX0lOSVR9KQplbmRpZihDTUFLRV9USFJFQURfTElCU19JTklUKQoKY2hlY2tfbGlicmFyeV9leGlzdHMobSBhdGFuMiAvdXNyL2xpYiBIQVZFX0xJQk0pCmlmKEhBVkVfTElCTSkKICBzZXQoTElCTSBtKQogICMgbWVzc2FnZSgiRm91bmQgbWF0aCBsaWJyYXJ5OiAke0xJQk19IikKZW5kaWYoSEFWRV9MSUJNKQoKY2hlY2tfbGlicmFyeV9leGlzdHMoZGwgZGxvcGVuIC91c3IvbGliIEhBVkVfTElCREwpCmlmKEhBVkVfTElCREwpCiAgc2V0KExJQkRMIGRsKQogICMgbWVzc2FnZSgiRm91bmQgZGxmY24gbGlicmFyeTogJHtMSUJETH0iKQplbmRpZihIQVZFX0xJQkRMKQoKY2hlY2tfbGlicmFyeV9leGlzdHMoanNvbi1jcHAgWk40WUFNTDZkZXRhaWw5bm9kZV9kYXRhOXJlc2V0X21hcEV2IC91c3IKICAgICAgICAgICAgICAgICAgICAgSlNPTl9DUFApCgpmaW5kX3F1aWNranMoKQpmaW5kX29wZW5jdigpCgpzZXQoQ01BS0VfSU5TVEFMTF9SUEFUSCAiJHtPUEVOQ1ZfTElCX0RJUn0iCiAgICBDQUNIRSBQQVRIICJCdWlsZCB3aXRoIGluc3RhbGwgcnBhdGgiIEZPUkNFKQoKaW5jbHVkZV9kaXJlY3RvcmllcygKICAke09QRU5DVl9JTkNMVURFX0RJUlN9ICR7Q01BS0VfQ1VSUkVOVF9TT1VSQ0VfRElSfQogICR7Q01BS0VfQ1VSUkVOVF9TT1VSQ0VfRElSfS9vcGVuY3YgJHtDTUFLRV9DVVJSRU5UX1NPVVJDRV9ESVJ9L3NyYwogICR7Q01BS0VfQ1VSUkVOVF9TT1VSQ0VfRElSfS9pbmNsdWRlICR7Q01BS0VfQ1VSUkVOVF9TT1VSQ0VfRElSfS9xdWlja2pzKQoKY2hlY2tfY3h4X3N0YW5kYXJkX2ZsYWcoKQoKc3RyaW5nKFJFR0VYIFJFUExBQ0UgIiAtV2FsbCIgIiIgQ01BS0VfQ19GTEFHUyAiJHtDTUFLRV9DX0ZMQUdTfSIpCnN0cmluZyhSRUdFWCBSRVBMQUNFICIgLVdhbGwiICIiIENNQUtFX0NYWF9GTEFHUyAiJHtDTUFLRV9DWFhfRkxBR1N9IikKCmNoZWNrX25vd2Fybl9mbGFnKC1Xbm8tdW51c2VkLXZhbHVlKQpjaGVja19ub3dhcm5fZmxhZygtV25vLXVudXNlZC12YXJpYWJsZSkKCmlmKCIke0NNQUtFX0NYWF9DT01QSUxFUl9JRH0iIE1BVENIRVMgIi4qQ2xhbmcuKiIpCiAgY2hlY2tfbm93YXJuX2ZsYWcoLVduby1kZXByZWNhdGVkLWFub24tZW51bS1lbnVtLWNvbnZlcnNpb24pCiAgY2hlY2tfbm93YXJuX2ZsYWcoLVduby1leHRlcm4tYy1jb21wYXQpCiAgY2hlY2tfbm93YXJuX2ZsYWcoLVduby1pbXBsaWNpdC1pbnQtZmxvYXQtY29udmVyc2lvbikKICBjaGVja19ub3dhcm5fZmxhZygtV25vLWRlcHJlY2F0ZWQtZW51bS1lbnVtLWNvbnZlcnNpb24pCmVuZGlmKCIke0NNQUtFX0NYWF9DT01QSUxFUl9JRH0iIE1BVENIRVMgIi4qQ2xhbmcuKiIpCgojIGR1bXAoQ01BS0VfQ19GTEFHUyBDTUFLRV9DWFhfRkxBR1MpIGR1bXAoQ01BS0VfQ1hYX0ZMQUdTX0RFQlVHKQoKY2hlY2tfcGljX2ZsYWcoKQoKc2V0KERFQlVHX09VVFBVVCBUUlVFIENBQ0hFIEJPT0wgIkRlYnVnIG91dHB1dCIgRk9SQ0UpCnNldChERUJVR19NQVQgRkFMU0UgQ0FDSEUgQk9PTCAiRGVidWcgY3Y6Ok1hdCIgRk9SQ0UpCgpjaGVja19vcHRfbm9uZV9mbGFnKCkKCmNoZWNrX2RlYnVnX2dkYl9mbGFnKCkKCmNoZWNrX2NfY29tcGlsZXJfZmxhZygiLWZsdG8iIEhBU19GX0xUT19GTEFHKQoKaWYoSEFTX0ZfTFRPX0ZMQUcpCiAgb3B0aW9uKEVOQUJMRV9MVE8gIkVuYWJsZSBsaW5rLXRpbWUgb3B0aW1pemF0aW9uIiBPRkYpCmVuZGlmKEhBU19GX0xUT19GTEFHKQoKaWYoRU5BQkxFX0xUTykKICBzZXQoQ01BS0VfQ19GTEFHUyAiJHtDTUFLRV9DX0ZMQUdTfSAtZmx0byIpCiAgc2V0KENNQUtFX0VYRV9MSU5LRVJfRkxBR1MgIiR7Q01BS0VfRVhFX0xJTktFUl9GTEFHU30gLWZsdG8iKQplbmRpZihFTkFCTEVfTFRPKQoKbGlua19kaXJlY3RvcmllcyhCRUZPUkUgJHtxdWlja2pzX0JJTkFSWV9ESVJ9KQoKbGlua19kaXJlY3RvcmllcygiJHtDTUFLRV9DVVJSRU5UX0JJTkFSWV9ESVJ9L3F1aWNranMiKQoKc2V0KFFVSUNLSlNfTElCUkFSWSBxdWlja2pzKQpsaW5rX2RpcmVjdG9yaWVzKCR7Q01BS0VfQ1VSUkVOVF9CSU5BUllfRElSfS9xdWlja2pzKQoKb3B0aW9uKFFVSUNLSlNfTU9EVUxFUyAiQnVpbGQgLnNvIG1vZHVsZXMgZm9yIHF1aWNranMiIE9OKQoKb3B0aW9uKEJVSUxEX1FVSUNLSlMgIkJ1aWxkIFF1aWNrSlMiIE9OKQoKZmlsZShHTE9CIE9QRU5DVl9TT1VSQ0VTICouaHBwICouY3BwKQojIGR1bXAoT1BFTkNWX1NPVVJDRVMpCgpsaXN0KEZJTFRFUiBPUEVOQ1ZfU09VUkNFUyBFWENMVURFIFJFR0VYICJpbml0X21vZHVsZS5jcHAiKQphZGRfbGlicmFyeShxanMtb3BlbmN2IFNUQVRJQyAke09QRU5DVl9TT1VSQ0VTfSkKc2V0X3RhcmdldF9wcm9wZXJ0aWVzKAogIHFqcy1vcGVuY3YgUFJPUEVSVElFUyBQUkVGSVggIiIgT1VUUFVUX05BTUUgb3BlbmN2IENPTVBJTEVfRkxBR1MKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiJHtRVUlDS0pTX01PRFVMRV9DRkxBR1N9ICR7Rl9QSUN9IikKdGFyZ2V0X2NvbXBpbGVfZGVmaW5pdGlvbnMocWpzLW9wZW5jdgogICAgICAgICAgICAgICAgICAgICAgICAgICBQUklWQVRFIENPTkZJR19QUkVGSVg9IiR7Q01BS0VfSU5TVEFMTF9QUkVGSVh9IikKaW5zdGFsbChUQVJHRVRTIHFqcy1vcGVuY3YgREVTVElOQVRJT04gbGliL3F1aWNranMpCnNldChqc2JpbmRpbmdzX0xJQlJBUklFUyBxanMtb3BlbmN2KQoKIyBtYWtlX3N0YXRpY19tb2R1bGUob3BlbmN2IGluaXRfbW9kdWxlLmNwcCkKbWFrZV9zaGFyZWRfbW9kdWxlKG9wZW5jdiBpbml0X21vZHVsZS5jcHApCgAAAAAAAAAAdhAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAATA4AAAAAAABMDgAAAAAAAAAAAAAAAPC/"
				],
				[
					1098,
					1,
					"insert",
					{
						"characters": "PIC_FLAG"
					},
					"CAAAACsLAAAAAAAALAsAAAAAAAAAAAAALAsAAAAAAAAtCwAAAAAAAAAAAAAtCwAAAAAAAC4LAAAAAAAAAAAAAC4LAAAAAAAALwsAAAAAAAAAAAAALwsAAAAAAAAwCwAAAAAAAAAAAAAwCwAAAAAAADELAAAAAAAAAAAAADELAAAAAAAAMgsAAAAAAAAAAAAAMgsAAAAAAAAzCwAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAKwsAAAAAAAArCwAAAAAAAAAAAAAAAPC/"
				],
				[
					1110,
					1,
					"insert",
					{
						"characters": "QUICKJS_MO"
					},
					"CwAAACsLAAAAAAAALAsAAAAAAAAAAAAALAsAAAAAAAAsCwAAAAAAAAgAAABQSUNfRkxBRywLAAAAAAAALQsAAAAAAAAAAAAALQsAAAAAAAAuCwAAAAAAAAAAAAAuCwAAAAAAAC8LAAAAAAAAAAAAAC8LAAAAAAAAMAsAAAAAAAAAAAAAMAsAAAAAAAAxCwAAAAAAAAAAAAAxCwAAAAAAADILAAAAAAAAAAAAADILAAAAAAAAMwsAAAAAAAAAAAAAMwsAAAAAAAA0CwAAAAAAAAAAAAA0CwAAAAAAADULAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAKwsAAAAAAAAzCwAAAAAAAAAAAAAAAPC/"
				],
				[
					1112,
					1,
					"insert_completion",
					{
						"completion": "QUICKJS_MODULE_CFLAGS",
						"format": "text",
						"keep_prefix": false,
						"must_insert": false,
						"trigger": "QUICKJS_MODULE_CFLAGS"
					},
					"AgAAACsLAAAAAAAAKwsAAAAAAAAKAAAAUVVJQ0tKU19NTysLAAAAAAAAQAsAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAANQsAAAAAAAA1CwAAAAAAAAAAAAAAAPC/"
				],
				[
					1120,
					1,
					"left_delete",
					null,
					"AQAAAF4PAAAAAAAAXg8AAAAAAAAFAAAARl9QSUM",
					"AQAAAAAAAAABAAAAXg8AAAAAAABjDwAAAAAAAAAAAAAAAPC/"
				],
				[
					1121,
					1,
					"run_macro_file",
					{
						"file": "res://Packages/Default/Delete Left Right.sublime-macro"
					},
					"AgAAAF0PAAAAAAAAXQ8AAAAAAAABAAAAe10PAAAAAAAAXQ8AAAAAAAABAAAAfQ",
					"AQAAAAAAAAABAAAAXg8AAAAAAABeDwAAAAAAAAAAAAAAAPC/"
				],
				[
					1122,
					2,
					"left_delete",
					null,
					"AgAAAFwPAAAAAAAAXA8AAAAAAAABAAAAJFsPAAAAAAAAWw8AAAAAAAABAAAAIA",
					"AQAAAAAAAAABAAAAXQ8AAAAAAABdDwAAAAAAAAAAAAAAAPC/"
				],
				[
					1123,
					1,
					"right_delete",
					null,
					"AQAAAFsPAAAAAAAAWw8AAAAAAAABAAAAIg",
					"AQAAAAAAAAABAAAAWw8AAAAAAABbDwAAAAAAAAAAAAAAAPC/"
				],
				[
					1124,
					1,
					"insert_snippet",
					{
						"contents": "\"$0\""
					},
					"AQAAAFsPAAAAAAAAXQ8AAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAWw8AAAAAAABbDwAAAAAAAAAAAAAAAPC/"
				],
				[
					1125,
					1,
					"right_delete",
					null,
					"AQAAAFwPAAAAAAAAXA8AAAAAAAABAAAAIg",
					"AQAAAAAAAAABAAAAXA8AAAAAAABcDwAAAAAAAAAAAAAAAPC/"
				],
				[
					1143,
					1,
					"insert",
					{
						"characters": "\n\n"
					},
					"AgAAAGIOAAAAAAAAYw4AAAAAAAAAAAAAYw4AAAAAAABkDgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAYg4AAAAAAABiDgAAAAAAAAAAAAAAAPC/"
				],
				[
					1145,
					1,
					"insert",
					{
						"characters": "dump/"
					},
					"BQAAAGMOAAAAAAAAZA4AAAAAAAAAAAAAZA4AAAAAAABlDgAAAAAAAAAAAABlDgAAAAAAAGYOAAAAAAAAAAAAAGYOAAAAAAAAZw4AAAAAAAAAAAAAZw4AAAAAAABoDgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAYw4AAAAAAABjDgAAAAAAAAAAAAAAAAAA"
				],
				[
					1146,
					1,
					"insert_snippet",
					{
						"contents": "($0)"
					},
					"AQAAAGgOAAAAAAAAag4AAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAaA4AAAAAAABoDgAAAAAAAAAAAAAAAPC/"
				],
				[
					1147,
					1,
					"insert",
					{
						"characters": "Q"
					},
					"AQAAAGkOAAAAAAAAag4AAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAaQ4AAAAAAABpDgAAAAAAAAAAAAAAAPC/"
				],
				[
					1148,
					3,
					"left_delete",
					null,
					"AwAAAGkOAAAAAAAAaQ4AAAAAAAABAAAAUWgOAAAAAAAAaA4AAAAAAAABAAAAKGcOAAAAAAAAZw4AAAAAAAABAAAALw",
					"AQAAAAAAAAABAAAAag4AAAAAAABqDgAAAAAAAAAAAAAAAPC/"
				],
				[
					1149,
					1,
					"insert_snippet",
					{
						"contents": "($0)"
					},
					"AQAAAGcOAAAAAAAAaQ4AAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAZw4AAAAAAABnDgAAAAAAAAAAAAAAAPC/"
				],
				[
					1150,
					1,
					"insert",
					{
						"characters": "QUICKJS_"
					},
					"CAAAAGgOAAAAAAAAaQ4AAAAAAAAAAAAAaQ4AAAAAAABqDgAAAAAAAAAAAABqDgAAAAAAAGsOAAAAAAAAAAAAAGsOAAAAAAAAbA4AAAAAAAAAAAAAbA4AAAAAAABtDgAAAAAAAAAAAABtDgAAAAAAAG4OAAAAAAAAAAAAAG4OAAAAAAAAbw4AAAAAAAAAAAAAbw4AAAAAAABwDgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAaA4AAAAAAABoDgAAAAAAAAAAAAAAAPC/"
				],
				[
					1151,
					1,
					"insert_completion",
					{
						"completion": "QUICKJS_MODULE_CFLAGS",
						"format": "text",
						"keep_prefix": false,
						"must_insert": false,
						"trigger": "QUICKJS_MODULE_CFLAGS"
					},
					"AgAAAGgOAAAAAAAAaA4AAAAAAAAIAAAAUVVJQ0tKU19oDgAAAAAAAH0OAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAcA4AAAAAAABwDgAAAAAAAAAAAAAAAPC/"
				],
				[
					1153,
					1,
					"insert",
					{
						"characters": "="
					},
					"AQAAAH4OAAAAAAAAfw4AAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAfg4AAAAAAAB+DgAAAAAAAAAAAAAAAPC/"
				],
				[
					1154,
					1,
					"left_delete",
					null,
					"AQAAAH4OAAAAAAAAfg4AAAAAAAABAAAAPQ",
					"AQAAAAAAAAABAAAAfw4AAAAAAAB/DgAAAAAAAAAAAAAAAPC/"
				],
				[
					1155,
					1,
					"right_delete",
					null,
					"AQAAAH4OAAAAAAAAfg4AAAAAAAABAAAAKQ",
					"AQAAAAAAAAABAAAAfg4AAAAAAAB+DgAAAAAAAAAAAAAAAPC/"
				],
				[
					1160,
					1,
					"insert",
					{
						"characters": " F_PIC"
					},
					"BgAAAH0OAAAAAAAAfg4AAAAAAAAAAAAAfg4AAAAAAAB/DgAAAAAAAAAAAAB/DgAAAAAAAIAOAAAAAAAAAAAAAIAOAAAAAAAAgQ4AAAAAAAAAAAAAgQ4AAAAAAACCDgAAAAAAAAAAAACCDgAAAAAAAIMOAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAfQ4AAAAAAAB9DgAAAAAAAAAAAAAAAPC/"
				],
				[
					1163,
					1,
					"insert",
					{
						"characters": " ${F_PIC}"
					},
					"CQAAAH4PAAAAAAAAfw8AAAAAAAAAAAAAfw8AAAAAAACADwAAAAAAAAAAAACADwAAAAAAAIEPAAAAAAAAAAAAAIEPAAAAAAAAgg8AAAAAAAAAAAAAgg8AAAAAAACDDwAAAAAAAAAAAACDDwAAAAAAAIQPAAAAAAAAAAAAAIQPAAAAAAAAhQ8AAAAAAAAAAAAAhQ8AAAAAAACGDwAAAAAAAAAAAACGDwAAAAAAAIcPAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAfg8AAAAAAAB+DwAAAAAAAAAAAAAAAPC/"
				],
				[
					1175,
					1,
					"left_delete",
					null,
					"AQAAAA4IAAAAAAAADggAAAAAAACPAAAACiAgJHtDTUFLRV9DVVJSRU5UX1NPVVJDRV9ESVJ9L29wZW5jdiAke0NNQUtFX0NVUlJFTlRfU09VUkNFX0RJUn0vc3JjCiAgJHtDTUFLRV9DVVJSRU5UX1NPVVJDRV9ESVJ9L2luY2x1ZGUgJHtDTUFLRV9DVVJSRU5UX1NPVVJDRV9ESVJ9L3F1aWNranM",
					"AQAAAAAAAAABAAAADggAAAAAAACdCAAAAAAAAAAAAAAAAPC/"
				],
				[
					1177,
					3,
					"right_delete",
					null,
					"AwAAANkHAAAAAAAA2QcAAAAAAAABAAAACtkHAAAAAAAA2QcAAAAAAAABAAAAINkHAAAAAAAA2QcAAAAAAAABAAAAIA",
					"AQAAAAAAAAABAAAA2QcAAAAAAADZBwAAAAAAAAAAAAAAQIBA"
				],
				[
					1183,
					1,
					"cut",
					null,
					"AQAAAPQNAAAAAAAA9A0AAAAAAAA8AAAAbGlzdChGSUxURVIgT1BFTkNWX1NPVVJDRVMgRVhDTFVERSBSRUdFWCAiaW5pdF9tb2R1bGUuY3BwIikK",
					"AQAAAAAAAAABAAAA9A0AAAAAAAAwDgAAAAAAAAAAAAAAAPC/"
				],
				[
					1184,
					2,
					"paste",
					null,
					"AgAAAPQNAAAAAAAAMA4AAAAAAAAAAAAAMA4AAAAAAABsDgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA9A0AAAAAAAD0DQAAAAAAAAAAAAAAAPC/"
				],
				[
					1188,
					1,
					"insert",
					{
						"characters": "h"
					},
					"AgAAAFoOAAAAAAAAWw4AAAAAAAAAAAAAWw4AAAAAAABbDgAAAAAAAAsAAABpbml0X21vZHVsZQ",
					"AQAAAAAAAAABAAAAWg4AAAAAAABlDgAAAAAAAAAAAAAAAPC/"
				],
				[
					1189,
					1,
					"left_delete",
					null,
					"AQAAAFoOAAAAAAAAWg4AAAAAAAABAAAAaA",
					"AQAAAAAAAAABAAAAWw4AAAAAAABbDgAAAAAAAAAAAAAAAPC/"
				],
				[
					1190,
					1,
					"insert",
					{
						"characters": "js"
					},
					"AgAAAFoOAAAAAAAAWw4AAAAAAAAAAAAAWw4AAAAAAABcDgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAWg4AAAAAAABaDgAAAAAAAAAAAAAAAPC/"
				],
				[
					1193,
					1,
					"insert",
					{
						"characters": "\\\\"
					},
					"AgAAAFwOAAAAAAAAXQ4AAAAAAAAAAAAAXQ4AAAAAAABeDgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAXA4AAAAAAABcDgAAAAAAAAAAAAAAAPC/"
				],
				[
					1195,
					1,
					"insert",
					{
						"characters": "[h"
					},
					"AgAAAF8OAAAAAAAAYA4AAAAAAAAAAAAAYA4AAAAAAABhDgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAXw4AAAAAAABfDgAAAAAAAAAAAAAAAPC/"
				],
				[
					1197,
					1,
					"insert",
					{
						"characters": "]"
					},
					"AQAAAGIOAAAAAAAAYw4AAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAYg4AAAAAAABiDgAAAAAAAAAAAAAAAPC/"
				],
				[
					1199,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"AQAAAGcOAAAAAAAAaA4AAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAZw4AAAAAAABnDgAAAAAAAAAAAAAAAPC/"
				],
				[
					1202,
					1,
					"insert",
					{
						"characters": "\\\\"
					},
					"AgAAACkOAAAAAAAAKg4AAAAAAAAAAAAAKg4AAAAAAAArDgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAKQ4AAAAAAAApDgAAAAAAAAAAAAAAkIBA"
				],
				[
					1205,
					1,
					"insert",
					{
						"characters": "\n\n"
					},
					"BQAAAKQPAAAAAAAApQ8AAAAAAAAAAAAApQ8AAAAAAADADwAAAAAAAAAAAAClDwAAAAAAAKUPAAAAAAAAGwAAACAgICAgICAgICAgICAgICAgICAgICAgICAgIKUPAAAAAAAApQ8AAAAAAAAAAAAApQ8AAAAAAACmDwAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAApA8AAAAAAACkDwAAAAAAAAAAAAAAAPC/"
				]
			]
		},
		{
			"file": "cmake/Functions.cmake",
			"settings":
			{
				"buffer_size": 944,
				"line_ending": "Unix"
			}
		},
		{
			"file": "init_module.cpp",
			"settings":
			{
				"buffer_size": 2361,
				"line_ending": "Unix"
			},
			"undo_stack":
			[
				[
					10,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAAA5CQAAI2luY2x1ZGUgInF1aWNranMvcXVpY2tqcy5oIgojaW5jbHVkZSAidXRpbC5ocHAiCgpleHRlcm4gIkMiIGludCBqc19jbGFoZV9pbml0KEpTQ29udGV4dCosIEpTTW9kdWxlRGVmKik7CmV4dGVybiAiQyIgaW50IGpzX2NvbnRvdXJfaW5pdChKU0NvbnRleHQqLCBKU01vZHVsZURlZiopOwpleHRlcm4gIkMiIGludCBqc19jdl9pbml0KEpTQ29udGV4dCosIEpTTW9kdWxlRGVmKik7CmV4dGVybiAiQyIgaW50IGpzX2RyYXdfaW5pdChKU0NvbnRleHQqLCBKU01vZHVsZURlZiopOwpleHRlcm4gIkMiIGludCBqc19saW5lX2luaXQoSlNDb250ZXh0KiwgSlNNb2R1bGVEZWYqKTsKZXh0ZXJuICJDIiBpbnQganNfbWF0X2luaXQoSlNDb250ZXh0KiwgSlNNb2R1bGVEZWYqKTsKZXh0ZXJuICJDIiBpbnQganNfcG9pbnRfaW5pdChKU0NvbnRleHQqLCBKU01vZHVsZURlZiopOwpleHRlcm4gIkMiIGludCBqc19wb2ludF9pdGVyYXRvcl9pbml0KEpTQ29udGV4dCosIEpTTW9kdWxlRGVmKik7CmV4dGVybiAiQyIgaW50IGpzX3JlY3RfaW5pdChKU0NvbnRleHQqLCBKU01vZHVsZURlZiopOwpleHRlcm4gIkMiIGludCBqc19zaXplX2luaXQoSlNDb250ZXh0KiwgSlNNb2R1bGVEZWYqKTsKZXh0ZXJuICJDIiBpbnQganNfc2xpY2VfaXRlcmF0b3JfaW5pdChKU0NvbnRleHQqLCBKU01vZHVsZURlZiopOwpleHRlcm4gIkMiIGludCBqc19zdWJkaXYyZF9pbml0KEpTQ29udGV4dCosIEpTTW9kdWxlRGVmKik7CmV4dGVybiAiQyIgaW50IGpzX3VtYXRfaW5pdChKU0NvbnRleHQqLCBKU01vZHVsZURlZiopOwpleHRlcm4gIkMiIGludCBqc191dGlsaXR5X2luaXQoSlNDb250ZXh0KiwgSlNNb2R1bGVEZWYqKTsKZXh0ZXJuICJDIiBpbnQganNfdmlkZW9fY2FwdHVyZV9pbml0KEpTQ29udGV4dCosIEpTTW9kdWxlRGVmKik7CgpleHRlcm4gIkMiIHZvaWQganNfY3ZfZXhwb3J0KEpTQ29udGV4dCosIEpTTW9kdWxlRGVmKik7CgppbnQKanNfb3BlbmN2X2luaXQoSlNDb250ZXh0KiBjdHgsIEpTTW9kdWxlRGVmKiBtKSB7CiAganNfY2xhaGVfaW5pdChjdHgsIG0pOwogIGpzX2NvbnRvdXJfaW5pdChjdHgsIG0pOwogIGpzX2N2X2luaXQoY3R4LCBtKTsKICBqc19kcmF3X2luaXQoY3R4LCBtKTsKICBqc19saW5lX2luaXQoY3R4LCBtKTsKICBqc19tYXRfaW5pdChjdHgsIG0pOwogIGpzX3BvaW50X2luaXQoY3R4LCBtKTsKICBqc19wb2ludF9pdGVyYXRvcl9pbml0KGN0eCwgbSk7CiAganNfcmVjdF9pbml0KGN0eCwgbSk7CiAganNfc2l6ZV9pbml0KGN0eCwgbSk7CiAganNfc2xpY2VfaXRlcmF0b3JfaW5pdChjdHgsIG0pOwogIGpzX3N1YmRpdjJkX2luaXQoY3R4LCBtKTsKICBqc191bWF0X2luaXQoY3R4LCBtKTsKICBqc191dGlsaXR5X2luaXQoY3R4LCBtKTsKICBqc192aWRlb19jYXB0dXJlX2luaXQoY3R4LCBtKTsKCiAgcmV0dXJuIDA7Cn0KCiNpZmRlZiBKU19PUEVOQ1ZfTU9EVUxFCiNkZWZpbmUgSlNfSU5JVF9NT0RVTEUganNfaW5pdF9tb2R1bGUKI2Vsc2UKI2RlZmluZSBKU19JTklUX01PRFVMRSBqc19pbml0X21vZHVsZV9vcGVuY3YKI2VuZGlmCgpleHRlcm4gIkMiIFZJU0lCTEUgSlNNb2R1bGVEZWYqCkpTX0lOSVRfTU9EVUxFKEpTQ29udGV4dCogY3R4LCBjb25zdCBjaGFyKiBtb2R1bGVfbmFtZSkgewogIEpTTW9kdWxlRGVmKiBtOwogIG0gPSBKU19OZXdDTW9kdWxlKGN0eCwgbW9kdWxlX25hbWUsICZqc19vcGVuY3ZfaW5pdCk7CiAgaWYoIW0pCiAgICByZXR1cm4gTlVMTDsKCiAgSlNfQWRkTW9kdWxlRXhwb3J0KGN0eCwgbSwgIkNMQUhFIik7CiAgSlNfQWRkTW9kdWxlRXhwb3J0KGN0eCwgbSwgIkNvbnRvdXIiKTsKICBKU19BZGRNb2R1bGVFeHBvcnQoY3R4LCBtLCAiRHJhdyIpOwogIEpTX0FkZE1vZHVsZUV4cG9ydChjdHgsIG0sICJMaW5lIik7CiAgSlNfQWRkTW9kdWxlRXhwb3J0KGN0eCwgbSwgIk1hdCIpOwogIEpTX0FkZE1vZHVsZUV4cG9ydChjdHgsIG0sICJQb2ludCIpOwogIEpTX0FkZE1vZHVsZUV4cG9ydChjdHgsIG0sICJQb2ludEl0ZXJhdG9yIik7CiAgSlNfQWRkTW9kdWxlRXhwb3J0KGN0eCwgbSwgIlJlY3QiKTsKICBKU19BZGRNb2R1bGVFeHBvcnQoY3R4LCBtLCAiU2l6ZSIpOwogIEpTX0FkZE1vZHVsZUV4cG9ydChjdHgsIG0sICJTbGljZUl0ZXJhdG9yIik7CiAgSlNfQWRkTW9kdWxlRXhwb3J0KGN0eCwgbSwgIlN1YmRpdjJEIik7CiAgSlNfQWRkTW9kdWxlRXhwb3J0KGN0eCwgbSwgIlVNYXQiKTsKICBKU19BZGRNb2R1bGVFeHBvcnQoY3R4LCBtLCAiVGlja01ldGVyIik7CiAgSlNfQWRkTW9kdWxlRXhwb3J0KGN0eCwgbSwgIlZpZGVvQ2FwdHVyZSIpOwoKICBqc19jdl9leHBvcnQoY3R4LCBtKTsKCiAgcmV0dXJuIG07Cn0KAAAAAAAAAAA5CQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA7AMAAAAAAADuAwAAAAAAAAAAAAAAAPC/"
				],
				[
					15,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAAA5CQAAI2luY2x1ZGUgInF1aWNranMvcXVpY2tqcy5oIgojaW5jbHVkZSAidXRpbC5ocHAiCgpleHRlcm4gIkMiIGludCBqc19jbGFoZV9pbml0KEpTQ29udGV4dCosIEpTTW9kdWxlRGVmKik7CmV4dGVybiAiQyIgaW50IGpzX2NvbnRvdXJfaW5pdChKU0NvbnRleHQqLCBKU01vZHVsZURlZiopOwpleHRlcm4gIkMiIGludCBqc19jdl9pbml0KEpTQ29udGV4dCosIEpTTW9kdWxlRGVmKik7CmV4dGVybiAiQyIgaW50IGpzX2RyYXdfaW5pdChKU0NvbnRleHQqLCBKU01vZHVsZURlZiopOwpleHRlcm4gIkMiIGludCBqc19saW5lX2luaXQoSlNDb250ZXh0KiwgSlNNb2R1bGVEZWYqKTsKZXh0ZXJuICJDIiBpbnQganNfbWF0X2luaXQoSlNDb250ZXh0KiwgSlNNb2R1bGVEZWYqKTsKZXh0ZXJuICJDIiBpbnQganNfcG9pbnRfaW5pdChKU0NvbnRleHQqLCBKU01vZHVsZURlZiopOwpleHRlcm4gIkMiIGludCBqc19wb2ludF9pdGVyYXRvcl9pbml0KEpTQ29udGV4dCosIEpTTW9kdWxlRGVmKik7CmV4dGVybiAiQyIgaW50IGpzX3JlY3RfaW5pdChKU0NvbnRleHQqLCBKU01vZHVsZURlZiopOwpleHRlcm4gIkMiIGludCBqc19zaXplX2luaXQoSlNDb250ZXh0KiwgSlNNb2R1bGVEZWYqKTsKZXh0ZXJuICJDIiBpbnQganNfc2xpY2VfaXRlcmF0b3JfaW5pdChKU0NvbnRleHQqLCBKU01vZHVsZURlZiopOwpleHRlcm4gIkMiIGludCBqc19zdWJkaXYyZF9pbml0KEpTQ29udGV4dCosIEpTTW9kdWxlRGVmKik7CmV4dGVybiAiQyIgaW50IGpzX3VtYXRfaW5pdChKU0NvbnRleHQqLCBKU01vZHVsZURlZiopOwpleHRlcm4gIkMiIGludCBqc191dGlsaXR5X2luaXQoSlNDb250ZXh0KiwgSlNNb2R1bGVEZWYqKTsKZXh0ZXJuICJDIiBpbnQganNfdmlkZW9fY2FwdHVyZV9pbml0KEpTQ29udGV4dCosIEpTTW9kdWxlRGVmKik7CgpleHRlcm4gIkMiIHZvaWQganNfY3ZfZXhwb3J0KEpTQ29udGV4dCosIEpTTW9kdWxlRGVmKik7CgppbnQKanNfb3BlbmN2X2luaXQoSlNDb250ZXh0KiBjdHgsIEpTTW9kdWxlRGVmKiBtKSB7CiAganNfY2xhaGVfaW5pdChjdHgsIG0pOwogIGpzX2NvbnRvdXJfaW5pdChjdHgsIG0pOwogIGpzX2N2X2luaXQoY3R4LCBtKTsKICBqc19kcmF3X2luaXQoY3R4LCBtKTsKICBqc19saW5lX2luaXQoY3R4LCBtKTsKICBqc19tYXRfaW5pdChjdHgsIG0pOwogIGpzX3BvaW50X2luaXQoY3R4LCBtKTsKICBqc19wb2ludF9pdGVyYXRvcl9pbml0KGN0eCwgbSk7CiAganNfcmVjdF9pbml0KGN0eCwgbSk7CiAganNfc2l6ZV9pbml0KGN0eCwgbSk7CiAganNfc2xpY2VfaXRlcmF0b3JfaW5pdChjdHgsIG0pOwogIGpzX3N1YmRpdjJkX2luaXQoY3R4LCBtKTsKICBqc191bWF0X2luaXQoY3R4LCBtKTsKICBqc191dGlsaXR5X2luaXQoY3R4LCBtKTsKICBqc192aWRlb19jYXB0dXJlX2luaXQoY3R4LCBtKTsKCiAgcmV0dXJuIDA7Cn0KCiNpZmRlZiBKU19PUEVOQ1ZfTU9EVUxFCiNkZWZpbmUgSlNfSU5JVF9NT0RVTEUganNfaW5pdF9tb2R1bGUKI2Vsc2UKI2RlZmluZSBKU19JTklUX01PRFVMRSBqc19pbml0X21vZHVsZV9vcGVuY3YKI2VuZGlmCgpleHRlcm4gIkMiIFZJU0lCTEUgSlNNb2R1bGVEZWYqCkpTX0lOSVRfTU9EVUxFKEpTQ29udGV4dCogY3R4LCBjb25zdCBjaGFyKiBtb2R1bGVfbmFtZSkgewogIEpTTW9kdWxlRGVmKiBtOwogIG0gPSBKU19OZXdDTW9kdWxlKGN0eCwgbW9kdWxlX25hbWUsICZqc19vcGVuY3ZfaW5pdCk7CiAgaWYoIW0pCiAgICByZXR1cm4gTlVMTDsKCiAgSlNfQWRkTW9kdWxlRXhwb3J0KGN0eCwgbSwgIkNMQUhFIik7CiAgSlNfQWRkTW9kdWxlRXhwb3J0KGN0eCwgbSwgIkNvbnRvdXIiKTsKICBKU19BZGRNb2R1bGVFeHBvcnQoY3R4LCBtLCAiRHJhdyIpOwogIEpTX0FkZE1vZHVsZUV4cG9ydChjdHgsIG0sICJMaW5lIik7CiAgSlNfQWRkTW9kdWxlRXhwb3J0KGN0eCwgbSwgIk1hdCIpOwogIEpTX0FkZE1vZHVsZUV4cG9ydChjdHgsIG0sICJQb2ludCIpOwogIEpTX0FkZE1vZHVsZUV4cG9ydChjdHgsIG0sICJQb2ludEl0ZXJhdG9yIik7CiAgSlNfQWRkTW9kdWxlRXhwb3J0KGN0eCwgbSwgIlJlY3QiKTsKICBKU19BZGRNb2R1bGVFeHBvcnQoY3R4LCBtLCAiU2l6ZSIpOwogIEpTX0FkZE1vZHVsZUV4cG9ydChjdHgsIG0sICJTbGljZUl0ZXJhdG9yIik7CiAgSlNfQWRkTW9kdWxlRXhwb3J0KGN0eCwgbSwgIlN1YmRpdjJEIik7CiAgSlNfQWRkTW9kdWxlRXhwb3J0KGN0eCwgbSwgIlVNYXQiKTsKICBKU19BZGRNb2R1bGVFeHBvcnQoY3R4LCBtLCAiVGlja01ldGVyIik7CiAgSlNfQWRkTW9kdWxlRXhwb3J0KGN0eCwgbSwgIlZpZGVvQ2FwdHVyZSIpOwoKICBqc19jdl9leHBvcnQoY3R4LCBtKTsKCiAgcmV0dXJuIG07Cn0KAAAAAAAAAAA5CQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAApQUAAAAAAAC1BQAAAAAAAAAAAAAAAPC/"
				]
			]
		},
		{
			"file": "js_contour.cpp",
			"settings":
			{
				"buffer_size": 32329,
				"line_ending": "Unix"
			},
			"undo_stack":
			[
				[
					20,
					1,
					"paste",
					null,
					"AQAAAE9+AAAAAAAAeH4AAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAT34AAAAAAABPfgAAAAAAAAAAAAAAAPC/"
				],
				[
					23,
					1,
					"cut",
					null,
					"AQAAAAJ+AAAAAAAAAn4AAAAAAAB3AAAACmV4dGVybiAiQyIgVklTSUJMRSB2b2lkIGpzX2NvbnRvdXJfZXhwb3J0KEpTQ29udGV4dCogY3R4LCBKU01vZHVsZURlZiogbSkgewogIEpTX0FkZE1vZHVsZUV4cG9ydChjdHgsIG0sICJDb250b3VyIik7Cn0",
					"AQAAAAAAAAABAAAAAn4AAAAAAAB5fgAAAAAAAAAAAAAAAPC/"
				],
				[
					26,
					1,
					"paste",
					null,
					"AQAAAIN8AAAAAAAA+nwAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAg3wAAAAAAACDfAAAAAAAAAAAAAAAAPC/"
				],
				[
					27,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"AQAAAPp8AAAAAAAA+3wAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA+nwAAAAAAAD6fAAAAAAAAAAAAAAAAPC/"
				],
				[
					38,
					1,
					"paste",
					null,
					"AgAAAEN+AAAAAAAAVH4AAAAAAAAAAAAAVH4AAAAAAABUfgAAAAAAABIAAABKU19BZGRNb2R1bGVFeHBvcnQ",
					"AQAAAAAAAAABAAAAQ34AAAAAAABVfgAAAAAAAAAAAAAAAPC/"
				],
				[
					41,
					2,
					"left_delete",
					null,
					"AgAAAFx+AAAAAAAAXH4AAAAAAAALAAAAICJDb250b3VyIilbfgAAAAAAAFt+AAAAAAAAAQAAACw",
					"AQAAAAAAAAABAAAAXH4AAAAAAABnfgAAAAAAAAAAAAAAAPC/"
				],
				[
					42,
					1,
					"insert",
					{
						"characters": ")"
					},
					"AQAAAFt+AAAAAAAAXH4AAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAW34AAAAAAABbfgAAAAAAAAAAAAAAAPC/"
				],
				[
					43,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAABvfgAAI2luY2x1ZGUgImpzYmluZGluZ3MuaHBwIgojaW5jbHVkZSAianNfcG9pbnQuaHBwIgojaW5jbHVkZSAianNfcmVjdC5ocHAiCiNpbmNsdWRlICJqc19jb250b3VyLmhwcCIKI2luY2x1ZGUgImpzX2FycmF5LmhwcCIKI2luY2x1ZGUgImpzX3R5cGVkX2FycmF5LmhwcCIKI2luY2x1ZGUgImpzX2FsbG9jLmhwcCIKI2luY2x1ZGUgImpzX3BvaW50X2l0ZXJhdG9yLmhwcCIKI2luY2x1ZGUgInV0aWwuaHBwIgoKI2luY2x1ZGUgPG9wZW5jdjIvY29yZS9jb3JlLmhwcD4KI2luY2x1ZGUgPG9wZW5jdjIvaW1ncHJvYy9pbWdwcm9jLmhwcD4KCi8vI2luY2x1ZGUgInBsb3QtY3YuaHBwIgovLyNpbmNsdWRlICJjb2xvci5ocHAiCiNpbmNsdWRlICJnZW9tZXRyeS5ocHAiCiNpbmNsdWRlICJwc2ltcGwuaHBwIgoKI2luY2x1ZGUgPGlvbWFuaXA+CiNpbmNsdWRlIDxyYW5nZXM+CgpleHRlcm4gIkMiIHsKSlNWYWx1ZSBjb250b3VyX3Byb3RvID0gSlNfVU5ERUZJTkVELCBjb250b3VyX2NsYXNzID0gSlNfVU5ERUZJTkVEOwpWSVNJQkxFIEpTQ2xhc3NJRCBqc19jb250b3VyX2NsYXNzX2lkID0gMDsKfQoKc3RhdGljIEpTVmFsdWUgZmxvYXQ2NF9hcnJheTsKCi8vIHVzaW5nIG5hbWVzcGFjZSBjdjsKCkpTVmFsdWUKanNfY29udG91cl9uZXcoSlNDb250ZXh0KiBjdHgsIGNvbnN0IEpTQ29udG91ckRhdGE8ZG91YmxlPiYgcG9pbnRzKSB7CiAgSlNWYWx1ZSByZXQ7CiAgSlNDb250b3VyRGF0YTxkb3VibGU+KiBjb250b3VyOwoKICByZXQgPSBKU19OZXdPYmplY3RQcm90b0NsYXNzKGN0eCwgY29udG91cl9wcm90bywganNfY29udG91cl9jbGFzc19pZCk7CiAgY29udG91ciA9IGpzX2FsbG9jYXRlPEpTQ29udG91ckRhdGE8ZG91YmxlPj4oY3R4KTsKCiAgbmV3KGNvbnRvdXIpIEpTQ29udG91ckRhdGE8ZG91YmxlPigpOwoKICBjb250b3VyLT5yZXNpemUocG9pbnRzLnNpemUoKSk7CiAgdHJhbnNmb3JtX3BvaW50cyhwb2ludHMuY2JlZ2luKCksIHBvaW50cy5jZW5kKCksIGNvbnRvdXItPmJlZ2luKCkpOwoKICBKU19TZXRPcGFxdWUocmV0LCBjb250b3VyKTsKICByZXR1cm4gcmV0Owp9CgpKU1ZhbHVlCmpzX2NvbnRvdXJfbW92ZShKU0NvbnRleHQqIGN0eCwgY29uc3QgSlNDb250b3VyRGF0YTxkb3VibGU+JiYgcG9pbnRzKSB7CiAgSlNWYWx1ZSByZXQ7CiAgSlNDb250b3VyRGF0YTxkb3VibGU+KiBjb250b3VyOwoKICByZXQgPSBKU19OZXdPYmplY3RQcm90b0NsYXNzKGN0eCwgY29udG91cl9wcm90bywganNfY29udG91cl9jbGFzc19pZCk7CiAgY29udG91ciA9IGpzX2FsbG9jYXRlPEpTQ29udG91ckRhdGE8ZG91YmxlPj4oY3R4KTsKCiAgbmV3KGNvbnRvdXIpIEpTQ29udG91ckRhdGE8ZG91YmxlPihzdGQ6Om1vdmUocG9pbnRzKSk7CgogIC8qICBjb250b3VyLT5yZXNpemUocG9pbnRzLnNpemUoKSk7CiAgICB0cmFuc2Zvcm1fcG9pbnRzKHBvaW50cy5jYmVnaW4oKSwgcG9pbnRzLmNlbmQoKSwgY29udG91ci0+YmVnaW4oKSk7Ki8KCiAgSlNfU2V0T3BhcXVlKHJldCwgY29udG91cik7CiAgcmV0dXJuIHJldDsKfQoKc3RhdGljIEpTVmFsdWUKanNfY29udG91cl9idWZmZXIoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCkgewogIEpTQ29udG91ckRhdGE8ZG91YmxlPiogY29udG91cjsKICBzdGQ6OnJhbmdlczo6c3VicmFuZ2U8dWludDhfdCo+IHI7CiAgSlNWYWx1ZSByZXQgPSBKU19VTkRFRklORUQ7CgogIGlmKChjb250b3VyID0ganNfY29udG91cl9kYXRhKGN0eCwgdGhpc192YWwpKSA9PSBudWxscHRyKQogICAgcmV0dXJuIHJldDsKCiAgSlNWYWx1ZSogdmFscHRyID0gc3RhdGljX2Nhc3Q8SlNWYWx1ZSo+KGpzX21hbGxvYyhjdHgsIHNpemVvZihKU1ZhbHVlKSkpOwogICp2YWxwdHIgPSBKU19EdXBWYWx1ZShjdHgsIHRoaXNfdmFsKTsKCiAgciA9IHJhbmdlPHVpbnQ4X3QqPigqY29udG91cik7CgogIHJldCA9IEpTX05ld0FycmF5QnVmZmVyKAogICAgICBjdHgsCiAgICAgIHIuYmVnaW4oKSwKICAgICAgci5zaXplKCksCiAgICAgIFtdKEpTUnVudGltZSogcnQsIHZvaWQqIG9wYXF1ZSwgdm9pZCogcHRyKSB7CiAgICAgICAgSlNfRnJlZVZhbHVlUlQocnQsICooSlNWYWx1ZSopb3BhcXVlKTsKICAgICAgICBqc19mcmVlX3J0KHJ0LCBvcGFxdWUpOwogICAgICB9LAogICAgICB2YWxwdHIsCiAgICAgIGZhbHNlKTsKCiAgcmV0dXJuIHJldDsKfQoKc3RhdGljIEpTVmFsdWUKanNfY29udG91cl9hcnJheShKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsKSB7CiAgSlNWYWx1ZSByZXQ7CiAgSlNWYWx1ZUNvbnN0IGJ1ZmZlciA9IGpzX2NvbnRvdXJfYnVmZmVyKGN0eCwgdGhpc192YWwpOwoKICByZXQgPSBKU19DYWxsQ29uc3RydWN0b3IoY3R4LCBmbG9hdDY0X2FycmF5LCAxLCAmYnVmZmVyKTsKICByZXR1cm4gcmV0Owp9CgpzdGF0aWMgSlNWYWx1ZQpqc19jb250b3VyX2FwcHJveHBvbHlkcChKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2KSB7CiAgSlNWYWx1ZSByZXQgPSBKU19VTkRFRklORUQ7CiAgZG91YmxlIGVwc2lsb247CiAgYm9vbCBjbG9zZWQgPSBmYWxzZTsKICBzdGQ6OnZlY3Rvcjxjdjo6UG9pbnQ+IGN1cnZlOwogIEpTQ29udG91ckRhdGE8ZmxvYXQ+IGFwcHJveEN1cnZlOwogIEpTQ29udG91ckRhdGE8ZG91YmxlPipvdXQsICp2OwoKICB2ID0ganNfY29udG91cl9kYXRhKGN0eCwgdGhpc192YWwpOwoKICBpZighdikKICAgIHJldHVybiBKU19FWENFUFRJT047CiAgb3V0ID0gc3RhdGljX2Nhc3Q8SlNDb250b3VyRGF0YTxkb3VibGU+Kj4oSlNfR2V0T3BhcXVlMihjdHgsIGFyZ3ZbMF0sIGpzX2NvbnRvdXJfY2xhc3NfaWQpKTsKCiAgaWYoYXJnYyA+IDEpIHsKICAgIEpTX1RvRmxvYXQ2NChjdHgsICZlcHNpbG9uLCBhcmd2WzFdKTsKCiAgICBpZihhcmdjID4gMikgewogICAgICBjbG9zZWQgPSAhIUpTX1RvQm9vbChjdHgsIGFyZ3ZbMl0pOwogICAgfQogIH0KCiAgc3RkOjp0cmFuc2Zvcm0odi0+YmVnaW4oKSwgdi0+ZW5kKCksIHN0ZDo6YmFja19pbnNlcnRlcihjdXJ2ZSksIFtdKGNvbnN0IEpTUG9pbnREYXRhPGRvdWJsZT4mIHB0KSAtPiBjdjo6UG9pbnQgewogICAgcmV0dXJuIGN2OjpQb2ludChwdC54LCBwdC55KTsKICB9KTsKCiAgY3Y6OmFwcHJveFBvbHlEUChjdXJ2ZSwgYXBwcm94Q3VydmUsIGVwc2lsb24sIGNsb3NlZCk7CgogIHN0ZDo6dHJhbnNmb3JtKGFwcHJveEN1cnZlLmJlZ2luKCksCiAgICAgICAgICAgICAgICAgYXBwcm94Q3VydmUuZW5kKCksCiAgICAgICAgICAgICAgICAgc3RkOjpiYWNrX2luc2VydGVyKCpvdXQpLAogICAgICAgICAgICAgICAgIFtdKGNvbnN0IEpTUG9pbnREYXRhPGZsb2F0PiYgcHQpIC0+IEpTUG9pbnREYXRhPGRvdWJsZT4geyByZXR1cm4gSlNQb2ludERhdGE8ZG91YmxlPihwdC54LCBwdC55KTsgfSk7CgogIHJldHVybiBKU19VTkRFRklORUQ7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX2NvbnRvdXJfYXJjbGVuZ3RoKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QqIGFyZ3YpIHsKICBKU0NvbnRvdXJEYXRhPGRvdWJsZT4qdiwgKm90aGVyID0gbnVsbHB0ciwgKnB0cjsKICBKU1ZhbHVlIHJldCA9IEpTX1VOREVGSU5FRDsKICBKU1BvaW50RGF0YTxmbG9hdD4gcHQ7CiAgYm9vbCBjbG9zZWQgPSBmYWxzZTsKICBKU0NvbnRvdXJEYXRhPGZsb2F0PiBjb250b3VyOwogIEpTUG9pbnREYXRhPGRvdWJsZT4qIHBvaW50OwogIGRvdWJsZSByZXR2YWw7CgogIHYgPSBqc19jb250b3VyX2RhdGEoY3R4LCB0aGlzX3ZhbCk7CiAgaWYoIXYpCgogICAgcmV0dXJuIEpTX0VYQ0VQVElPTjsKCiAgaWYoYXJnYyA+IDApIHsKICAgIGNsb3NlZCA9ICEhSlNfVG9Cb29sKGN0eCwgYXJndlswXSk7CiAgfQoKICBzdGQ6OnRyYW5zZm9ybSh2LT5iZWdpbigpLCB2LT5lbmQoKSwgc3RkOjpiYWNrX2luc2VydGVyKGNvbnRvdXIpLCBbXShjb25zdCBKU1BvaW50RGF0YTxkb3VibGU+JiBwdCkgLT4gSlNQb2ludERhdGE8ZmxvYXQ+IHsKICAgIHJldHVybiBKU1BvaW50RGF0YTxmbG9hdD4ocHQueCwgcHQueSk7CiAgfSk7CgogIHJldHZhbCA9IGN2OjphcmNMZW5ndGgoY29udG91ciwgY2xvc2VkKTsKCiAgcmV0ID0gSlNfTmV3RmxvYXQ2NChjdHgsIHJldHZhbCk7CgogIHJldHVybiByZXQ7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX2NvbnRvdXJfYXJlYShKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsKSB7CiAgSlNDb250b3VyRGF0YTxkb3VibGU+KiB2OwogIEpTVmFsdWUgcmV0ID0gSlNfVU5ERUZJTkVEOwogIGRvdWJsZSBhcmVhOwogIEpTQ29udG91ckRhdGE8ZmxvYXQ+IGNvbnRvdXI7CiAgdiA9IGpzX2NvbnRvdXJfZGF0YShjdHgsIHRoaXNfdmFsKTsKICBpZighdikKICAgIHJldHVybiBKU19FWENFUFRJT047CiAgc3RkOjp0cmFuc2Zvcm0odi0+YmVnaW4oKSwgdi0+ZW5kKCksIHN0ZDo6YmFja19pbnNlcnRlcihjb250b3VyKSwgW10oY29uc3QgSlNQb2ludERhdGE8ZG91YmxlPiYgcHQpIC0+IEpTUG9pbnREYXRhPGZsb2F0PiB7CiAgICByZXR1cm4gSlNQb2ludERhdGE8ZmxvYXQ+KHB0LngsIHB0LnkpOwogIH0pOwogIGFyZWEgPSBjdjo6Y29udG91ckFyZWEoY29udG91cik7CiAgcmV0ID0gSlNfTmV3RmxvYXQ2NChjdHgsIGFyZWEpOwogIHJldHVybiByZXQ7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX2NvbnRvdXJfYm91bmRpbmdyZWN0KEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QqIGFyZ3YpIHsKICBKU1ZhbHVlIHJldCA9IEpTX1VOREVGSU5FRDsKICBjdjo6UmVjdDJmIHJlY3Q7CiAgSlNDb250b3VyRGF0YTxmbG9hdD4gY3VydmU7CiAgSlNDb250b3VyRGF0YTxkb3VibGU+KiB2OwogIEpTUmVjdERhdGE8ZG91YmxlPiByOwoKICB2ID0ganNfY29udG91cl9kYXRhKGN0eCwgdGhpc192YWwpOwoKICBpZighdikKICAgIHJldHVybiBKU19FWENFUFRJT047CgogIHN0ZDo6dHJhbnNmb3JtKHYtPmJlZ2luKCksIHYtPmVuZCgpLCBzdGQ6OmJhY2tfaW5zZXJ0ZXIoY3VydmUpLCBbXShjb25zdCBKU1BvaW50RGF0YTxkb3VibGU+JiBwdCkgLT4gSlNQb2ludERhdGE8ZmxvYXQ+IHsKICAgIHJldHVybiBKU1BvaW50RGF0YTxmbG9hdD4ocHQueCwgcHQueSk7CiAgfSk7CgogIHJlY3QgPSBjdjo6Ym91bmRpbmdSZWN0KGN1cnZlKTsKCiAgcmV0ID0ganNfbmV3KGN0eCwgIlJlY3QiKTsKICAvLyByZXQgPSBKU19OZXdPYmplY3QoY3R4LCByZWN0X3Byb3RvLCBqc19yZWN0X2NsYXNzX2lkKTsKICAvLyByID0ganNfYWxsb2NhdGU8IEpTUmVjdERhdGE8ZG91YmxlPiA+KGN0eCk7CiAgLy8qciA9IHJlY3Q7CiAgLy8gSlNfU2V0T3BhcXVlKHJldCwgcik7CiAgLy8KICByID0gcmVjdDsKCiAganNfcmVjdF93cml0ZShjdHgsIHJldCwgcik7CgogIHJldHVybiByZXQ7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX2NvbnRvdXJfY2VudGVyKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwpIHsKICBKU0NvbnRvdXJEYXRhPGRvdWJsZT4qIHY7CiAgSlNWYWx1ZSByZXQgPSBKU19VTkRFRklORUQ7CiAgZG91YmxlIGFyZWE7CiAgdiA9IGpzX2NvbnRvdXJfZGF0YShjdHgsIHRoaXNfdmFsKTsKICBpZighdikKICAgIHJldHVybiBKU19FWENFUFRJT047CiAgewogICAgc3RkOjp2ZWN0b3I8Y3Y6OlBvaW50PiBwb2ludHM7CiAgICBwb2ludHMucmVzaXplKHYtPnNpemUoKSk7CiAgICBzdGQ6OmNvcHkodi0+YmVnaW4oKSwgdi0+ZW5kKCksIHBvaW50cy5iZWdpbigpKTsKICAgIGN2OjpNb21lbnRzIG11ID0gY3Y6Om1vbWVudHMocG9pbnRzKTsKICAgIGN2OjpQb2ludCBjZW50cm9pZCA9IGN2OjpQb2ludChtdS5tMTAgLyBtdS5tMDAsIG11Lm0wMSAvIG11Lm0wMCk7CgogICAgcmV0ID0ganNfcG9pbnRfbmV3KGN0eCwgY2VudHJvaWQueCwgY2VudHJvaWQueSk7CiAgfQoKICByZXR1cm4gcmV0Owp9CgpzdGF0aWMgSlNWYWx1ZQpqc19jb250b3VyX2NvbnZleGh1bGwoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCogYXJndikgewogIEpTVmFsdWUgcmV0ID0gSlNfVU5ERUZJTkVEOwogIGJvb2wgY2xvY2t3aXNlID0gZmFsc2UsIHJldHVyblBvaW50cyA9IHRydWU7CiAgSlNDb250b3VyRGF0YTxmbG9hdD4gY3VydmUsIGh1bGw7CiAgc3RkOjp2ZWN0b3I8aW50PiBodWxsSW5kaWNlczsKICBKU0NvbnRvdXJEYXRhPGRvdWJsZT4qb3V0LCAqdjsKCiAgdiA9IGpzX2NvbnRvdXJfZGF0YShjdHgsIHRoaXNfdmFsKTsKCiAgaWYoIXYpCiAgICByZXR1cm4gSlNfRVhDRVBUSU9OOwoKICBpZihhcmdjID4gMCkgewogICAgY2xvY2t3aXNlID0gISFKU19Ub0Jvb2woY3R4LCBhcmd2WzBdKTsKCiAgICBpZihhcmdjID4gMSkgewogICAgICByZXR1cm5Qb2ludHMgPSAhIUpTX1RvQm9vbChjdHgsIGFyZ3ZbMV0pOwogICAgfQogIH0KCiAgc3RkOjp0cmFuc2Zvcm0odi0+YmVnaW4oKSwgdi0+ZW5kKCksIHN0ZDo6YmFja19pbnNlcnRlcihjdXJ2ZSksIFtdKGNvbnN0IEpTUG9pbnREYXRhPGRvdWJsZT4mIHB0KSAtPiBKU1BvaW50RGF0YTxmbG9hdD4gewogICAgcmV0dXJuIEpTUG9pbnREYXRhPGZsb2F0PihwdC54LCBwdC55KTsKICB9KTsKCiAgaWYocmV0dXJuUG9pbnRzKQogICAgY3Y6OmNvbnZleEh1bGwoY3VydmUsIGh1bGwsIGNsb2Nrd2lzZSwgdHJ1ZSk7CiAgZWxzZQogICAgY3Y6OmNvbnZleEh1bGwoY3VydmUsIGh1bGxJbmRpY2VzLCBjbG9ja3dpc2UsIGZhbHNlKTsKCiAgaWYocmV0dXJuUG9pbnRzKSB7CiAgICByZXQgPSBqc19jb250b3VyX25ldyhjdHgsIGh1bGwpOwogIH0gZWxzZSB7CiAgICB1aW50MzJfdCBpLCBzaXplID0gaHVsbEluZGljZXMuc2l6ZSgpOwoKICAgIHJldCA9IEpTX05ld0FycmF5KGN0eCk7CgogICAgZm9yKGkgPSAwOyBpIDwgc2l6ZTsgaSsrKSB7IEpTX1NldFByb3BlcnR5VWludDMyKGN0eCwgcmV0LCBpLCBKU19OZXdJbnQzMihjdHgsIGh1bGxJbmRpY2VzW2ldKSk7IH0KICB9CgogIHJldHVybiByZXQ7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX2NvbnRvdXJfY29udmV4aXR5ZGVmZWN0cyhKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2KSB7CiAgSlNDb250b3VyRGF0YTxkb3VibGU+KiBzID0ganNfY29udG91cl9kYXRhKGN0eCwgdGhpc192YWwpOwogIEpTVmFsdWUgcmV0ID0gSlNfVU5ERUZJTkVEOwoKICBzdGQ6OnZlY3RvcjxpbnQ+IGh1bGxJbmRpY2VzOwogIHN0ZDo6dmVjdG9yPGN2OjpWZWM0aT4gZGVmZWN0czsKCiAgaWYoYXJnYyA+IDApIHsKICAgIGludDY0X3QgbiA9IGpzX2FycmF5X3RvKGN0eCwgYXJndlswXSwgaHVsbEluZGljZXMpOwogICAgaWYobiA9PSAwKQogICAgICByZXR1cm4gSlNfRVhDRVBUSU9OOwogIH0KCiAgaWYocy0+c2l6ZSgpID09IDAgfHwgaHVsbEluZGljZXMuc2l6ZSgpID09IDApCiAgICByZXR1cm4gSlNfRVhDRVBUSU9OOwoKICBkZWZlY3RzLnJlc2l6ZShodWxsSW5kaWNlcy5zaXplKCkpOwogIGN2Ojpjb252ZXhpdHlEZWZlY3RzKCpzLCBodWxsSW5kaWNlcywgZGVmZWN0cyk7CgogIHJldCA9IGpzX2FycmF5X2Zyb20oY3R4LCBkZWZlY3RzKTsKCiAgcmV0dXJuIHJldDsKfQoKc3RhdGljIEpTVmFsdWUKanNfY29udG91cl9jb25zdHJ1Y3RvcihKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IG5ld190YXJnZXQsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QqIGFyZ3YpIHsKICBKU0NvbnRvdXJEYXRhPGRvdWJsZT4qIHY7CiAgSlNWYWx1ZSBvYmogPSBKU19VTkRFRklORUQ7CiAgSlNWYWx1ZSBwcm90bzsKCiAgdiA9IGpzX2FsbG9jYXRlPEpTQ29udG91ckRhdGE8ZG91YmxlPj4oY3R4KTsKICBpZighdikKICAgIHJldHVybiBKU19FWENFUFRJT047CgogIG5ldyh2KSBKU0NvbnRvdXJEYXRhPGRvdWJsZT4oKTsKCiAgLyogdXNpbmcgbmV3X3RhcmdldCB0byBnZXQgdGhlIHByb3RvdHlwZSBpcyBuZWNlc3Nhcnkgd2hlbiB0aGUKICAgICBjbGFzcyBpcyBleHRlbmRlZC4gKi8KICBwcm90byA9IEpTX0dldFByb3BlcnR5U3RyKGN0eCwgbmV3X3RhcmdldCwgInByb3RvdHlwZSIpOwogIGlmKEpTX0lzRXhjZXB0aW9uKHByb3RvKSkKICAgIGdvdG8gZmFpbDsKICBvYmogPSBKU19OZXdPYmplY3RQcm90b0NsYXNzKGN0eCwgcHJvdG8sIGpzX2NvbnRvdXJfY2xhc3NfaWQpOwogIEpTX0ZyZWVWYWx1ZShjdHgsIHByb3RvKTsKICBpZihKU19Jc0V4Y2VwdGlvbihvYmopKQogICAgZ290byBmYWlsOwogIEpTX1NldE9wYXF1ZShvYmosIHYpOwoKICBpZihhcmdjID4gMCkgewogICAgaW50IGk7CiAgICAvLyBqc3J0IGpzKGN0eCk7CgogICAgZm9yKGkgPSAwOyBpIDwgYXJnYzsgaSsrKSB7CiAgICAgIEpTUG9pbnREYXRhPGRvdWJsZT4gcDsKICAgICAgaWYoanNfaXNfYXJyYXkoY3R4LCBhcmd2W2ldKSkgewogICAgICAgIGlmKGpzX2FycmF5X2xlbmd0aChjdHgsIGFyZ3ZbaV0pID4gMCkgewogICAgICAgICAgSlNWYWx1ZSBwdCA9IEpTX0dldFByb3BlcnR5VWludDMyKGN0eCwgYXJndltpXSwgMCk7CgogICAgICAgICAgaWYoanNfaXNfcG9pbnQoY3R4LCBwdCkpIHsKICAgICAgICAgICAganNfYXJyYXlfdG8gLyo8IEpTUG9pbnREYXRhPGRvdWJsZT4gPiovIChjdHgsIGFyZ3ZbaV0sICp2KTsKICAgICAgICAgICAgSlNfRnJlZVZhbHVlKGN0eCwgcHQpOwogICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgIH0KICAgICAgICAgIEpTX0ZyZWVWYWx1ZShjdHgsIHB0KTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIGlmKGpzX3BvaW50X3JlYWQoY3R4LCBhcmd2W2ldLCAmcCkpIHsKICAgICAgICB2LT5wdXNoX2JhY2socCk7CiAgICAgICAgY29udGludWU7CiAgICAgIH0KICAgICAgZ290byBmYWlsOwogICAgfQogIH0KCiAgcmV0dXJuIG9iajsKZmFpbDoKICBqc19kZWFsbG9jYXRlKGN0eCwgdik7CiAgSlNfRnJlZVZhbHVlKGN0eCwgb2JqKTsKICByZXR1cm4gSlNfRVhDRVBUSU9OOwp9Cgp2b2lkCmpzX2NvbnRvdXJfZmluYWxpemVyKEpTUnVudGltZSogcnQsIEpTVmFsdWUgdmFsKSB7CiAgSlNDb250b3VyRGF0YTxkb3VibGU+KiBzOwoKICBpZigocyA9IHN0YXRpY19jYXN0PEpTQ29udG91ckRhdGE8ZG91YmxlPio+KEpTX0dldE9wYXF1ZSh2YWwsIGpzX2NvbnRvdXJfY2xhc3NfaWQpKSkpIHsKICAgIGpzX2RlYWxsb2NhdGUocnQsIHMpOwogIH0KCiAgSlNfRnJlZVZhbHVlUlQocnQsIHZhbCk7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX2NvbnRvdXJfZml0ZWxsaXBzZShKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2KSB7CiAgSlNDb250b3VyRGF0YTxkb3VibGU+KnYsICpwdHI7CiAgY3Y6OlJvdGF0ZWRSZWN0IHJyOwogIEpTVmFsdWUgcmV0ID0gSlNfVU5ERUZJTkVEOwogIGRvdWJsZSBhcmVhOwogIEpTQ29udG91ckRhdGE8ZmxvYXQ+IGNvbnRvdXIsIGVsbGlwc2U7CgogIGlmKCEodiA9IGpzX2NvbnRvdXJfZGF0YShjdHgsIHRoaXNfdmFsKSkpCiAgICByZXR1cm4gSlNfRVhDRVBUSU9OOwoKICBzdGQ6OnRyYW5zZm9ybSh2LT5iZWdpbigpLCB2LT5lbmQoKSwgc3RkOjpiYWNrX2luc2VydGVyKGNvbnRvdXIpLCBbXShjb25zdCBKU1BvaW50RGF0YTxkb3VibGU+JiBwdCkgLT4gSlNQb2ludERhdGE8ZmxvYXQ+IHsKICAgIHJldHVybiBKU1BvaW50RGF0YTxmbG9hdD4ocHQueCwgcHQueSk7CiAgfSk7CgogIHJyID0gY3Y6OmZpdEVsbGlwc2UoY29udG91cik7CgogIGVsbGlwc2UucmVzaXplKDUpOwogIHJyLnBvaW50cyhlbGxpcHNlLmRhdGEoKSk7CgogIHJldCA9IGpzX2NvbnRvdXJfbmV3KGN0eCwgZWxsaXBzZSk7CgogIHJldHVybiByZXQ7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX2NvbnRvdXJfZml0bGluZShKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2KSB7CiAgSlNDb250b3VyRGF0YTxkb3VibGU+KnYsICpwdHI7CiAgSlNWYWx1ZSByZXQgPSBKU19VTkRFRklORUQ7CiAgaW50NjRfdCBkaXN0VHlwZSA9IGN2OjpESVNUX0ZBSVI7CiAgZG91YmxlIHBhcmFtID0gMCwgcmVwcyA9IDAuMDEsIGFlcHMgPSAwLjAxOwogIHN0ZDo6dmVjdG9yPGN2OjpQb2ludD4gY29udG91cjsKICBKU0NvbnRvdXJEYXRhPGZsb2F0PiBwb2ludHM7CiAgY3Y6OlZlYzRmIGxpbmU7CgogIGlmKCEodiA9IGpzX2NvbnRvdXJfZGF0YShjdHgsIHRoaXNfdmFsKSkpCiAgICByZXR1cm4gSlNfRVhDRVBUSU9OOwoKICBpZihhcmdjID4gMCkgewoKICAgIEpTX1RvSW50NjQoY3R4LCAmZGlzdFR5cGUsIGFyZ3ZbMF0pOwoKICAgIGlmKGFyZ2MgPiAxKSB7CiAgICAgIEpTX1RvRmxvYXQ2NChjdHgsICZwYXJhbSwgYXJndlsxXSk7CiAgICAgIGlmKGFyZ2MgPiAyKSB7CiAgICAgICAgSlNfVG9GbG9hdDY0KGN0eCwgJnJlcHMsIGFyZ3ZbMl0pOwogICAgICAgIGlmKGFyZ2MgPiAzKSB7CiAgICAgICAgICBKU19Ub0Zsb2F0NjQoY3R4LCAmYWVwcywgYXJndlszXSk7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfQoKICBzdGQ6OnRyYW5zZm9ybSh2LT5iZWdpbigpLCB2LT5lbmQoKSwgc3RkOjpiYWNrX2luc2VydGVyKGNvbnRvdXIpLCBbXShjb25zdCBKU1BvaW50RGF0YTxkb3VibGU+JiBwdCkgLT4gY3Y6OlBvaW50IHsKICAgIHJldHVybiBjdjo6UG9pbnQocHQueCwgcHQueSk7CiAgfSk7CgogIGN2OjpmaXRMaW5lKGNvbnRvdXIsIGxpbmUsIGRpc3RUeXBlLCBwYXJhbSwgcmVwcywgYWVwcyk7CgogIHBvaW50cy5wdXNoX2JhY2soSlNQb2ludERhdGE8ZmxvYXQ+KGxpbmVbMF0sIGxpbmVbMV0pKTsKICBwb2ludHMucHVzaF9iYWNrKEpTUG9pbnREYXRhPGZsb2F0PihsaW5lWzJdLCBsaW5lWzNdKSk7CgogIHJldCA9IGpzX2NvbnRvdXJfbmV3KGN0eCwgcG9pbnRzKTsKCiAgcmV0dXJuIHJldDsKfQoKc3RhdGljIEpTVmFsdWUKanNfY29udG91cl9hdChKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2KSB7CiAgSlNDb250b3VyRGF0YTxkb3VibGU+KiB2OwogIEpTVmFsdWUgcmV0OwogIEpTVmFsdWUgeCwgeTsKICBpbnQ2NF90IGk7CiAgSlNQb2ludERhdGE8ZG91YmxlPiogcG9pbnQ7CgogIGlmKCEodiA9IGpzX2NvbnRvdXJfZGF0YShjdHgsIHRoaXNfdmFsKSkpCiAgICByZXR1cm4gSlNfRVhDRVBUSU9OOwoKICBKU19Ub0ludDY0KGN0eCwgJmksIGFyZ3ZbMF0pOwoKICBpZihpID49IHYtPnNpemUoKSB8fCBpIDwgMCkKICAgIHJldHVybiBKU19VTkRFRklORUQ7CgogIHJldCA9IGpzX3BvaW50X25ldyhjdHgsICgqdilbaV0ueCwgKCp2KVtpXS55KTsKICByZXR1cm4gcmV0Owp9CgpzdGF0aWMgSlNWYWx1ZQpqc19jb250b3VyX2dldG1hdChKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2KSB7CiAgSlNDb250b3VyRGF0YTxkb3VibGU+KiB2OwogIEpTTWF0RGltZW5zaW9ucyBzaXplOwogIGludDMyX3QgdHlwZTsKICBjdjo6TWF0IG1hdDsKCiAgaWYoISh2ID0ganNfY29udG91cl9kYXRhKGN0eCwgdGhpc192YWwpKSkKICAgIHJldHVybiBKU19FWENFUFRJT047CgogIHNpemUucm93cyA9IDE7CiAgc2l6ZS5jb2xzID0gdi0+c2l6ZSgpOwogIHR5cGUgPSBDVl82NEZDMjsKCiAgbWF0ID0gY3Y6Ok1hdChjdjo6U2l6ZShzaXplKSwgdHlwZSwgc3RhdGljX2Nhc3Q8dm9pZCo+KHYtPmRhdGEoKSkpOwoKICByZXR1cm4ganNfbWF0X3dyYXAoY3R4LCBtYXQpOwp9CgpzdGF0aWMgSlNWYWx1ZQpqc19jb250b3VyX2ludGVyc2VjdGNvbnZleChKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2KSB7CiAgSlNDb250b3VyRGF0YTxkb3VibGU+KnYsICpvdGhlciA9IG51bGxwdHIsICpwdHI7CiAgSlNWYWx1ZSByZXQgPSBKU19VTkRFRklORUQ7CiAgYm9vbCBoYW5kbGVOZXN0ZWQgPSB0cnVlOwogIEpTQ29udG91ckRhdGE8ZmxvYXQ+IGEsIGIsIGludGVyc2VjdGlvbjsKCiAgaWYoISh2ID0ganNfY29udG91cl9kYXRhKGN0eCwgdGhpc192YWwpKSkKICAgIHJldHVybiBKU19FWENFUFRJT047CgogIGlmKGFyZ2MgPiAwKSB7CiAgICBvdGhlciA9IHN0YXRpY19jYXN0PEpTQ29udG91ckRhdGE8ZG91YmxlPio+KEpTX0dldE9wYXF1ZTIoY3R4LCBhcmd2WzBdLCBqc19jb250b3VyX2NsYXNzX2lkKSk7CgogICAgaWYoYXJnYyA+IDEpIHsKICAgICAgaGFuZGxlTmVzdGVkID0gISFKU19Ub0Jvb2woY3R4LCBhcmd2WzFdKTsKICAgIH0KICB9CgogIHN0ZDo6dHJhbnNmb3JtKHYtPmJlZ2luKCksIHYtPmVuZCgpLCBzdGQ6OmJhY2tfaW5zZXJ0ZXIoYSksIFtdKGNvbnN0IEpTUG9pbnREYXRhPGRvdWJsZT4mIHB0KSAtPiBKU1BvaW50RGF0YTxmbG9hdD4gewogICAgcmV0dXJuIEpTUG9pbnREYXRhPGZsb2F0PihwdC54LCBwdC55KTsKICB9KTsKCiAgc3RkOjp0cmFuc2Zvcm0ob3RoZXItPmJlZ2luKCksIG90aGVyLT5lbmQoKSwgc3RkOjpiYWNrX2luc2VydGVyKGIpLCBbXShjb25zdCBKU1BvaW50RGF0YTxkb3VibGU+JiBwdCkgLT4gSlNQb2ludERhdGE8ZmxvYXQ+IHsKICAgIHJldHVybiBKU1BvaW50RGF0YTxmbG9hdD4ocHQueCwgcHQueSk7CiAgfSk7CgogIGN2OjppbnRlcnNlY3RDb252ZXhDb252ZXgoYSwgYiwgaW50ZXJzZWN0aW9uLCBoYW5kbGVOZXN0ZWQpOwoKICByZXQgPSBqc19jb250b3VyX25ldyhjdHgsIGludGVyc2VjdGlvbik7CiAgcmV0dXJuIHJldDsKfQoKc3RhdGljIEpTVmFsdWUKanNfY29udG91cl9pc2NvbnZleChKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2KSB7CiAgSlNDb250b3VyRGF0YTxkb3VibGU+KnYsICpvdGhlciA9IG51bGxwdHIsICpwdHI7CiAgSlNWYWx1ZSByZXQgPSBKU19VTkRFRklORUQ7CiAgYm9vbCBpc0NvbnZleDsKICBKU0NvbnRvdXJEYXRhPGZsb2F0PiBjb250b3VyOwoKICBpZighKHYgPSBqc19jb250b3VyX2RhdGEoY3R4LCB0aGlzX3ZhbCkpKQogICAgcmV0dXJuIEpTX0VYQ0VQVElPTjsKCiAgc3RkOjp0cmFuc2Zvcm0odi0+YmVnaW4oKSwgdi0+ZW5kKCksIHN0ZDo6YmFja19pbnNlcnRlcihjb250b3VyKSwgW10oY29uc3QgSlNQb2ludERhdGE8ZG91YmxlPiYgcHQpIC0+IEpTUG9pbnREYXRhPGZsb2F0PiB7CiAgICByZXR1cm4gSlNQb2ludERhdGE8ZmxvYXQ+KHB0LngsIHB0LnkpOwogIH0pOwoKICBpc0NvbnZleCA9IGN2Ojppc0NvbnRvdXJDb252ZXgoY29udG91cik7CgogIHJldCA9IEpTX05ld0Jvb2woY3R4LCBpc0NvbnZleCk7CgogIHJldHVybiByZXQ7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX2NvbnRvdXJfbGVuZ3RoKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwpIHsKICBKU0NvbnRvdXJEYXRhPGRvdWJsZT4qIHY7CiAgSlNWYWx1ZSByZXQ7CiAgaWYoISh2ID0ganNfY29udG91cl9kYXRhKGN0eCwgdGhpc192YWwpKSkKICAgIHJldHVybiBKU19FWENFUFRJT047CiAgcmV0ID0gSlNfTmV3SW50NjQoY3R4LCB2LT5zaXplKCkpOwogIHJldHVybiByZXQ7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX2NvbnRvdXJfbWluYXJlYXJlY3QoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCogYXJndikgewogIEpTQ29udG91ckRhdGE8ZG91YmxlPip2LCAqb3RoZXIgPSBudWxscHRyLCAqcHRyOwogIEpTVmFsdWUgcmV0ID0gSlNfVU5ERUZJTkVEOwogIGN2OjpSb3RhdGVkUmVjdCBycjsKCiAgSlNDb250b3VyRGF0YTxmbG9hdD4gY29udG91ciwgbWluYXJlYTsKCiAgaWYoISh2ID0ganNfY29udG91cl9kYXRhKGN0eCwgdGhpc192YWwpKSkKICAgIHJldHVybiBKU19FWENFUFRJT047CiAgc3RkOjp0cmFuc2Zvcm0odi0+YmVnaW4oKSwgdi0+ZW5kKCksIHN0ZDo6YmFja19pbnNlcnRlcihjb250b3VyKSwgW10oY29uc3QgSlNQb2ludERhdGE8ZG91YmxlPiYgcHQpIC0+IEpTUG9pbnREYXRhPGZsb2F0PiB7CiAgICByZXR1cm4gSlNQb2ludERhdGE8ZmxvYXQ+KHB0LngsIHB0LnkpOwogIH0pOwogIHJyID0gY3Y6Om1pbkFyZWFSZWN0KGNvbnRvdXIpOwogIG1pbmFyZWEucmVzaXplKDUpOwogIHJyLnBvaW50cyhtaW5hcmVhLmRhdGEoKSk7CgogIHJldCA9IGpzX2NvbnRvdXJfbmV3KGN0eCwgbWluYXJlYSk7CiAgcmV0dXJuIHJldDsKfQoKc3RhdGljIEpTVmFsdWUKanNfY29udG91cl9taW5lbmNsb3NpbmdjaXJjbGUoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCogYXJndikgewogIEpTQ29udG91ckRhdGE8ZG91YmxlPip2LCAqb3RoZXIgPSBudWxscHRyLCAqcHRyOwogIEpTVmFsdWUgcmV0ID0gSlNfVU5ERUZJTkVEOwogIGN2OjpSb3RhdGVkUmVjdCBycjsKCiAgSlNDb250b3VyRGF0YTxmbG9hdD4gY29udG91cjsKICBKU1BvaW50RGF0YTxmbG9hdD4gY2VudGVyOwogIGZsb2F0IHJhZGl1czsKCiAgaWYoISh2ID0ganNfY29udG91cl9kYXRhKGN0eCwgdGhpc192YWwpKSkKICAgIHJldHVybiBKU19FWENFUFRJT047CgogIHN0ZDo6dHJhbnNmb3JtKHYtPmJlZ2luKCksIHYtPmVuZCgpLCBzdGQ6OmJhY2tfaW5zZXJ0ZXIoY29udG91ciksIFtdKGNvbnN0IEpTUG9pbnREYXRhPGRvdWJsZT4mIHB0KSAtPiBKU1BvaW50RGF0YTxmbG9hdD4gewogICAgcmV0dXJuIEpTUG9pbnREYXRhPGZsb2F0PihwdC54LCBwdC55KTsKICB9KTsKCiAgY3Y6Om1pbkVuY2xvc2luZ0NpcmNsZShjb250b3VyLCBjZW50ZXIsIHJhZGl1cyk7CgogIHJldCA9IEpTX05ld09iamVjdChjdHgpOwoKICBKU19TZXRQcm9wZXJ0eVN0cihjdHgsIHJldCwgImNlbnRlciIsIGpzX3BvaW50X25ldyhjdHgsIGNlbnRlci54LCBjZW50ZXIueSkpOwogIEpTX1NldFByb3BlcnR5U3RyKGN0eCwgcmV0LCAicmFkaXVzIiwgSlNfTmV3RmxvYXQ2NChjdHgsIHJhZGl1cykpOwoKICByZXR1cm4gcmV0Owp9CgpzdGF0aWMgSlNWYWx1ZQpqc19jb250b3VyX21pbmVuY2xvc2luZ3RyaWFuZ2xlKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QqIGFyZ3YpIHsKICBKU0NvbnRvdXJEYXRhPGRvdWJsZT4qdiwgKm90aGVyID0gbnVsbHB0ciwgKnB0cjsKICBKU1ZhbHVlIHJldCA9IEpTX1VOREVGSU5FRDsKICBjdjo6Um90YXRlZFJlY3QgcnI7CgogIEpTQ29udG91ckRhdGE8ZmxvYXQ+IGNvbnRvdXIsIHRyaWFuZ2xlOwogIEpTUG9pbnREYXRhPGZsb2F0PiBjZW50ZXI7CiAgZmxvYXQgcmFkaXVzOwoKICBpZighKHYgPSBqc19jb250b3VyX2RhdGEoY3R4LCB0aGlzX3ZhbCkpKQogICAgcmV0dXJuIEpTX0VYQ0VQVElPTjsKCiAgc3RkOjp0cmFuc2Zvcm0odi0+YmVnaW4oKSwgdi0+ZW5kKCksIHN0ZDo6YmFja19pbnNlcnRlcihjb250b3VyKSwgW10oY29uc3QgSlNQb2ludERhdGE8ZG91YmxlPiYgcHQpIC0+IEpTUG9pbnREYXRhPGZsb2F0PiB7CiAgICByZXR1cm4gSlNQb2ludERhdGE8ZmxvYXQ+KHB0LngsIHB0LnkpOwogIH0pOwoKICBjdjo6bWluRW5jbG9zaW5nVHJpYW5nbGUoY29udG91ciwgdHJpYW5nbGUpOwoKICByZXQgPSBqc19jb250b3VyX25ldyhjdHgsIHRyaWFuZ2xlKTsKCiAgcmV0dXJuIHJldDsKfQoKc3RhdGljIEpTVmFsdWUKanNfY29udG91cl9wb2ludHBvbHlnb250ZXN0KEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QqIGFyZ3YpIHsKICBKU0NvbnRvdXJEYXRhPGRvdWJsZT4qdiwgKm90aGVyID0gbnVsbHB0ciwgKnB0cjsKICBKU1ZhbHVlIHJldCA9IEpTX1VOREVGSU5FRDsKICBjdjo6Um90YXRlZFJlY3QgcnI7CiAgSlNQb2ludERhdGE8ZmxvYXQ+IHB0OwogIGJvb2wgbWVhc3VyZURpc3QgPSBmYWxzZTsKICBKU0NvbnRvdXJEYXRhPGZsb2F0PiBjb250b3VyLCB0cmlhbmdsZTsKICBKU1BvaW50RGF0YTxkb3VibGU+IHBvaW50OwogIGRvdWJsZSByZXR2YWw7CgogIGlmKCEodiA9IGpzX2NvbnRvdXJfZGF0YShjdHgsIHRoaXNfdmFsKSkpCiAgICByZXR1cm4gSlNfRVhDRVBUSU9OOwoKICBpZihhcmdjID4gMCkgewogICAgcG9pbnQgPSBqc19wb2ludF9nZXQoY3R4LCBhcmd2WzBdKTsKCiAgICBwdC54ID0gcG9pbnQueDsKICAgIHB0LnkgPSBwb2ludC55OwoKICAgIGlmKGFyZ2MgPiAxKSB7CiAgICAgIG1lYXN1cmVEaXN0ID0gISFKU19Ub0Jvb2woY3R4LCBhcmd2WzFdKTsKICAgIH0KICB9CgogIHN0ZDo6dHJhbnNmb3JtKHYtPmJlZ2luKCksIHYtPmVuZCgpLCBzdGQ6OmJhY2tfaW5zZXJ0ZXIoY29udG91ciksIFtdKGNvbnN0IEpTUG9pbnREYXRhPGRvdWJsZT4mIHB0KSAtPiBKU1BvaW50RGF0YTxmbG9hdD4gewogICAgcmV0dXJuIEpTUG9pbnREYXRhPGZsb2F0PihwdC54LCBwdC55KTsKICB9KTsKCiAgcmV0dmFsID0gY3Y6OnBvaW50UG9seWdvblRlc3QoY29udG91ciwgcHQsIG1lYXN1cmVEaXN0KTsKCiAgcmV0ID0gSlNfTmV3RmxvYXQ2NChjdHgsIHJldHZhbCk7CgogIHJldHVybiByZXQ7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX2NvbnRvdXJfcHNpbXBsKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QqIGFyZ3YsIGludCBtYWdpYykgewogIEpTQ29udG91ckRhdGE8ZG91YmxlPiogcyA9IGpzX2NvbnRvdXJfZGF0YShjdHgsIHRoaXNfdmFsKTsKICBpbnQzMl90IHNoaWZ0ID0gMTsKICB1aW50MzJfdCBzaXplID0gcy0+c2l6ZSgpOwogIEpTVmFsdWUgcmV0ID0gSlNfVU5ERUZJTkVEOwogIEpTQ29udG91ckRhdGE8ZG91YmxlPiByOwogIGRvdWJsZSBhcmcxID0gMCwgYXJnMiA9IDA7CiAgZG91YmxlKiBpdDsKICBKU1BvaW50RGF0YTxkb3VibGU+KiBzdGFydCA9ICYoKnMpWzBdOwogIEpTUG9pbnREYXRhPGRvdWJsZT4qIGVuZCA9IHN0YXJ0ICsgc2l6ZTsKICByLnJlc2l6ZShzaXplKTsKICBpdCA9IChkb3VibGUqKSZyWzBdOwoKICBpZighcykKICAgIHJldHVybiBKU19FWENFUFRJT047CgogIGlmKGFyZ2MgPiAwKSB7CiAgICBKU19Ub0Zsb2F0NjQoY3R4LCAmYXJnMSwgYXJndlswXSk7CiAgICBpZihhcmdjID4gMSkgewogICAgICBKU19Ub0Zsb2F0NjQoY3R4LCAmYXJnMiwgYXJndlsxXSk7CiAgICB9CiAgfQoKICBpZihtYWdpYyA9PSAwKSB7CiAgICBpZihhcmcxID09IDApCiAgICAgIGFyZzEgPSAyOwogICAgaXQgPSBwc2ltcGw6OnNpbXBsaWZ5X3JldW1hbm5fd2l0a2FtPDI+KChkb3VibGUqKXN0YXJ0LCAoZG91YmxlKillbmQsIGFyZzEsIGl0KTsKICB9IGVsc2UgaWYobWFnaWMgPT0gMSkgewogICAgaWYoYXJnMSA9PSAwKQogICAgICBhcmcxID0gMjsKICAgIGlmKGFyZzIgPT0gMCkKICAgICAgYXJnMiA9IDEwOwogICAgaXQgPSBwc2ltcGw6OnNpbXBsaWZ5X29waGVpbTwyPigoZG91YmxlKilzdGFydCwgKGRvdWJsZSopZW5kLCBhcmcxLCBhcmcyLCBpdCk7CiAgfSBlbHNlIGlmKG1hZ2ljID09IDIpIHsKICAgIGlmKGFyZzEgPT0gMCkKICAgICAgYXJnMSA9IDI7CiAgICBpZihhcmcyID09IDApCiAgICAgIGFyZzIgPSAxMDsKICAgIGl0ID0gcHNpbXBsOjpzaW1wbGlmeV9sYW5nPDI+KChkb3VibGUqKXN0YXJ0LCAoZG91YmxlKillbmQsIGFyZzEsIGFyZzIsIGl0KTsKICB9IGVsc2UgaWYobWFnaWMgPT0gMykgewogICAgaWYoYXJnMSA9PSAwKQogICAgICBhcmcxID0gMjsKICAgIGl0ID0gcHNpbXBsOjpzaW1wbGlmeV9kb3VnbGFzX3BldWNrZXI8Mj4oKGRvdWJsZSopc3RhcnQsIChkb3VibGUqKWVuZCwgYXJnMSwgaXQpOwogIH0gZWxzZSBpZihtYWdpYyA9PSA0KSB7CiAgICBpZihhcmcxID09IDApCiAgICAgIGFyZzEgPSAyOwogICAgaXQgPSBwc2ltcGw6OnNpbXBsaWZ5X250aF9wb2ludDwyPigoZG91YmxlKilzdGFydCwgKGRvdWJsZSopZW5kLCBhcmcxLCBpdCk7CiAgfSBlbHNlIGlmKG1hZ2ljID09IDUpIHsKICAgIGlmKGFyZzEgPT0gMCkKICAgICAgYXJnMSA9IDI7CiAgICBpdCA9IHBzaW1wbDo6c2ltcGxpZnlfcmFkaWFsX2Rpc3RhbmNlPDI+KChkb3VibGUqKXN0YXJ0LCAoZG91YmxlKillbmQsIGFyZzEsIGl0KTsKICB9IGVsc2UgaWYobWFnaWMgPT0gNikgewogICAgaWYoYXJnMSA9PSAwKQogICAgICBhcmcxID0gMjsKICAgIGlmKGFyZzIgPT0gMCkKICAgICAgYXJnMiA9IDE7CiAgICBpdCA9IHBzaW1wbDo6c2ltcGxpZnlfcGVycGVuZGljdWxhcl9kaXN0YW5jZTwyPigoZG91YmxlKilzdGFydCwgKGRvdWJsZSopZW5kLCBhcmcxLCBhcmcyLCBpdCk7CiAgfQogIHNpemUgPSBpdCAtIChkb3VibGUqKSZyWzBdOwogIHIucmVzaXplKHNpemUgLyAyKTsKICByZXQgPSBqc19jb250b3VyX25ldzxkb3VibGU+KGN0eCwgcik7CiAgcmV0dXJuIHJldDsKfQoKc3RhdGljIEpTVmFsdWUKanNfY29udG91cl9wdXNoKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QqIGFyZ3YpIHsKICBKU0NvbnRvdXJEYXRhPGRvdWJsZT4qIHY7CiAgaW50IGk7CiAgZG91YmxlIHgsIHk7CiAgSlNWYWx1ZUNvbnN0IHh2LCB5djsKICBKU1BvaW50RGF0YTxkb3VibGU+IHBvaW50OwoKICBpZighKHYgPSBqc19jb250b3VyX2RhdGEoY3R4LCB0aGlzX3ZhbCkpKQogICAgcmV0dXJuIEpTX0VYQ0VQVElPTjsKCiAgZm9yKGkgPSAwOyBpIDwgYXJnYzsgaSsrKSB7CiAgICBpZihKU19Jc09iamVjdChhcmd2W2ldKSkgewogICAgICB4diA9IEpTX0dldFByb3BlcnR5U3RyKGN0eCwgYXJndltpXSwgIngiKTsKICAgICAgeXYgPSBKU19HZXRQcm9wZXJ0eVN0cihjdHgsIGFyZ3ZbaV0sICJ5Iik7CiAgICB9IGVsc2UgaWYoanNfaXNfYXJyYXkoY3R4LCBhcmd2W2ldKSkgewoKICAgICAgeHYgPSBKU19HZXRQcm9wZXJ0eVVpbnQzMihjdHgsIGFyZ3ZbaV0sIDApOwogICAgICB5diA9IEpTX0dldFByb3BlcnR5VWludDMyKGN0eCwgYXJndltpXSwgMSk7CiAgICB9IGVsc2UgaWYoaSArIDEgPCBhcmdjKSB7CiAgICAgIHh2ID0gYXJndltpKytdOwogICAgICB5diA9IGFyZ3ZbaV07CiAgICB9CiAgICBKU19Ub0Zsb2F0NjQoY3R4LCAmcG9pbnQueCwgeHYpOwogICAgSlNfVG9GbG9hdDY0KGN0eCwgJnBvaW50LnksIHl2KTsKCiAgICB2LT5wdXNoX2JhY2socG9pbnQpOwogIH0KICByZXR1cm4gSlNfVU5ERUZJTkVEOwp9CgpzdGF0aWMgSlNWYWx1ZQpqc19jb250b3VyX3BvcChKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2KSB7CiAgSlNDb250b3VyRGF0YTxkb3VibGU+KiB2OwogIEpTVmFsdWUgcmV0OwogIEpTVmFsdWUgeCwgeTsKICBKU1BvaW50RGF0YTxkb3VibGU+KnB0ciwgcG9pbnQ7CiAgaW50NjRfdCBuID0gMDsKCiAgaWYoISh2ID0ganNfY29udG91cl9kYXRhKGN0eCwgdGhpc192YWwpKSkKICAgIHJldHVybiBKU19FWENFUFRJT047CiAgbiA9IHYtPnNpemUoKTsKICBpZihuID4gMCkgewogICAgcG9pbnQgPSAoKnYpW24gLSAxXTsKICAgIHYtPnBvcF9iYWNrKCk7CiAgfSBlbHNlIHsKICAgIHJldHVybiBKU19FWENFUFRJT047CiAgfQoKICByZXQgPSBqc19wb2ludF9uZXcoY3R4LCBwb2ludC54LCBwb2ludC55KTsKCiAgcmV0dXJuIHJldDsKfQoKc3RhdGljIEpTVmFsdWUKanNfY29udG91cl91bnNoaWZ0KEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QqIGFyZ3YpIHsKICBKU0NvbnRvdXJEYXRhPGRvdWJsZT4qIHY7CiAgaW50IGk7CiAgZG91YmxlIHgsIHk7CiAgSlNWYWx1ZUNvbnN0IHh2LCB5djsKICBKU1BvaW50RGF0YTxkb3VibGU+IHBvaW50OwoKICBpZighKHYgPSBqc19jb250b3VyX2RhdGEoY3R4LCB0aGlzX3ZhbCkpKQogICAgcmV0dXJuIEpTX0VYQ0VQVElPTjsKCiAgZm9yKGkgPSAwOyBpIDwgYXJnYzsgaSsrKSB7CiAgICBpZihKU19Jc09iamVjdChhcmd2W2ldKSkgewogICAgICB4diA9IEpTX0dldFByb3BlcnR5U3RyKGN0eCwgYXJndltpXSwgIngiKTsKICAgICAgeXYgPSBKU19HZXRQcm9wZXJ0eVN0cihjdHgsIGFyZ3ZbaV0sICJ5Iik7CiAgICB9IGVsc2UgaWYoanNfaXNfYXJyYXkoY3R4LCBhcmd2W2ldKSkgewoKICAgICAgeHYgPSBKU19HZXRQcm9wZXJ0eVVpbnQzMihjdHgsIGFyZ3ZbaV0sIDApOwogICAgICB5diA9IEpTX0dldFByb3BlcnR5VWludDMyKGN0eCwgYXJndltpXSwgMSk7CiAgICB9IGVsc2UgaWYoaSArIDEgPCBhcmdjKSB7CiAgICAgIHh2ID0gYXJndltpKytdOwogICAgICB5diA9IGFyZ3ZbaV07CiAgICB9CiAgICBKU19Ub0Zsb2F0NjQoY3R4LCAmcG9pbnQueCwgeHYpOwogICAgSlNfVG9GbG9hdDY0KGN0eCwgJnBvaW50LnksIHl2KTsKCiAgICB2LT5pbnNlcnQodi0+YmVnaW4oKSwgcG9pbnQpOwogIH0KICByZXR1cm4gSlNfVU5ERUZJTkVEOwp9CgpzdGF0aWMgSlNWYWx1ZQpqc19jb250b3VyX3NoaWZ0KEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QqIGFyZ3YpIHsKICBKU0NvbnRvdXJEYXRhPGRvdWJsZT4qIHY7CiAgSlNWYWx1ZSByZXQ7CiAgSlNWYWx1ZSB4LCB5OwogIEpTUG9pbnREYXRhPGRvdWJsZT4qcHRyLCBwb2ludDsKICBpbnQ2NF90IG4gPSAwOwoKICBpZighKHYgPSBqc19jb250b3VyX2RhdGEoY3R4LCB0aGlzX3ZhbCkpKQogICAgcmV0dXJuIEpTX0VYQ0VQVElPTjsKICBuID0gdi0+c2l6ZSgpOwogIGlmKG4gPiAwKSB7CiAgICBwb2ludCA9ICgqdilbMF07CiAgICB2LT5lcmFzZSh2LT5iZWdpbigpKTsKICB9IGVsc2UgewogICAgcmV0dXJuIEpTX0VYQ0VQVElPTjsKICB9CgogIHJldCA9IGpzX3BvaW50X25ldyhjdHgsIHBvaW50LngsIHBvaW50LnkpOwoKICByZXR1cm4gcmV0Owp9CgpzdGF0aWMgSlNWYWx1ZQpqc19jb250b3VyX2NvbmNhdChKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2KSB7CiAgSlNDb250b3VyRGF0YTxkb3VibGU+KnYsICpvdGhlciwgKnI7CiAgaW50IGk7CiAgZG91YmxlIHgsIHk7CiAgSlNWYWx1ZSByZXQ7CiAgSlNWYWx1ZUNvbnN0IHh2LCB5djsKICBKU1BvaW50RGF0YTxkb3VibGU+IHBvaW50OwoKICBpZighKHYgPSBqc19jb250b3VyX2RhdGEoY3R4LCB0aGlzX3ZhbCkpKQogICAgcmV0dXJuIEpTX0VYQ0VQVElPTjsKCiAgaWYoIShvdGhlciA9IGpzX2NvbnRvdXJfZGF0YShjdHgsIGFyZ3ZbMF0pKSkKICAgIHJldHVybiBKU19FWENFUFRJT047CgogIHJldCA9IGpzX2NvbnRvdXJfbmV3KGN0eCwgKnYpOwoKICByID0ganNfY29udG91cl9kYXRhKGN0eCwgcmV0KTsKICBzdGQ6OmNvcHkob3RoZXItPmNiZWdpbigpLCBvdGhlci0+Y2VuZCgpLCBzdGQ6OmJhY2tfaW5zZXJ0ZXIoKnIpKTsKICByZXR1cm4gcmV0Owp9CgpzdGF0aWMgSlNWYWx1ZQpqc19jb250b3VyX3JvdGF0ZWRyZWN0YW5nbGVpbnRlcnNlY3Rpb24oSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCogYXJndikgewogIEpTQ29udG91ckRhdGE8ZG91YmxlPip2LCAqb3RoZXIgPSBudWxscHRyLCAqcHRyOwogIEpTVmFsdWUgcmV0ID0gSlNfVU5ERUZJTkVEOwogIGJvb2wgaGFuZGxlTmVzdGVkID0gdHJ1ZTsKICBKU0NvbnRvdXJEYXRhPGZsb2F0PiBhLCBiLCBpbnRlcnNlY3Rpb247CgogIGlmKCEodiA9IGpzX2NvbnRvdXJfZGF0YShjdHgsIHRoaXNfdmFsKSkpCiAgICByZXR1cm4gSlNfRVhDRVBUSU9OOwoKICBpZihhcmdjID4gMCkgewogICAgb3RoZXIgPSBzdGF0aWNfY2FzdDxKU0NvbnRvdXJEYXRhPGRvdWJsZT4qPihKU19HZXRPcGFxdWUyKGN0eCwgYXJndlswXSwganNfY29udG91cl9jbGFzc19pZCkpOwogIH0KCiAgc3RkOjp0cmFuc2Zvcm0odi0+YmVnaW4oKSwgdi0+ZW5kKCksIHN0ZDo6YmFja19pbnNlcnRlcihhKSwgW10oY29uc3QgSlNQb2ludERhdGE8ZG91YmxlPiYgcHQpIC0+IEpTUG9pbnREYXRhPGZsb2F0PiB7CiAgICByZXR1cm4gSlNQb2ludERhdGE8ZmxvYXQ+KHB0LngsIHB0LnkpOwogIH0pOwoKICBzdGQ6OnRyYW5zZm9ybShvdGhlci0+YmVnaW4oKSwgb3RoZXItPmVuZCgpLCBzdGQ6OmJhY2tfaW5zZXJ0ZXIoYiksIFtdKGNvbnN0IEpTUG9pbnREYXRhPGRvdWJsZT4mIHB0KSAtPiBKU1BvaW50RGF0YTxmbG9hdD4gewogICAgcmV0dXJuIEpTUG9pbnREYXRhPGZsb2F0PihwdC54LCBwdC55KTsKICB9KTsKICB7CiAgICBjdjo6Um90YXRlZFJlY3QgcnJhKGFbMF0sIGFbMV0sIGFbMl0pOwogICAgY3Y6OlJvdGF0ZWRSZWN0IHJyYihiWzBdLCBiWzFdLCBiWzJdKTsKCiAgICBjdjo6cm90YXRlZFJlY3RhbmdsZUludGVyc2VjdGlvbihycmEsIHJyYiwgaW50ZXJzZWN0aW9uKTsKCiAgICByZXQgPSBqc19jb250b3VyX25ldyhjdHgsIGludGVyc2VjdGlvbik7CiAgfQogIHJldHVybiByZXQ7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX2NvbnRvdXJfcm90YXRlcG9pbnRzKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QqIGFyZ3YpIHsKICBKU0NvbnRvdXJEYXRhPGRvdWJsZT4qIHMgPSBqc19jb250b3VyX2RhdGEoY3R4LCB0aGlzX3ZhbCk7CiAgaW50MzJfdCBzaGlmdCA9IDE7CiAgdWludDMyX3Qgc2l6ZSA9IHMtPnNpemUoKTsKICBpZighcykKICAgIHJldHVybiBKU19FWENFUFRJT047CiAgaWYoYXJnYyA+IDApCiAgICBKU19Ub0ludDMyKGN0eCwgJnNoaWZ0LCBhcmd2WzBdKTsKCiAgc2hpZnQgJT0gc2l6ZTsKCiAgaWYoc2hpZnQgPiAwKSB7CiAgICBzdGQ6OnJvdGF0ZShzLT5iZWdpbigpLCBzLT5iZWdpbigpICsgc2hpZnQsIHMtPmVuZCgpKTsKCiAgfSBlbHNlIGlmKHNoaWZ0IDwgMCkgewogICAgc3RkOjpyb3RhdGUocy0+cmJlZ2luKCksIHMtPnJiZWdpbigpICsgKC1zaGlmdCksIHMtPnJlbmQoKSk7CiAgfQogIHJldHVybiBKU1ZhbHVlKHRoaXNfdmFsKTsKfQoKc3RhdGljIEpTVmFsdWUKanNfY29udG91cl90b2FycmF5KEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QqIGFyZ3YpIHsKICBKU0NvbnRvdXJEYXRhPGRvdWJsZT4qIHM7CiAgdWludDMyX3QgaSwgc2l6ZTsKICBKU1ZhbHVlIHJldCA9IEpTX1VOREVGSU5FRDsKCiAgaWYoIShzID0ganNfY29udG91cl9kYXRhKGN0eCwgdGhpc192YWwpKSkKICAgIHJldHVybiBKU19FWENFUFRJT047CiAgc2l6ZSA9IHMtPnNpemUoKTsKICByZXQgPSBKU19OZXdBcnJheShjdHgpOwoKICBmb3IoaSA9IDA7IGkgPCBzaXplOyBpKyspIHsgSlNfU2V0UHJvcGVydHlVaW50MzIoY3R4LCByZXQsIGksIGpzX3BvaW50X2Nsb25lKGN0eCwgKCpzKVtpXSkpOyB9CgogIHJldHVybiByZXQ7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX2NvbnRvdXJfdG9zdHJpbmcoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCogYXJndiwgaW50IG1hZ2ljKSB7CiAgSlNDb250b3VyRGF0YTxkb3VibGU+KiBzOwogIHN0ZDo6b3N0cmluZ3N0cmVhbSBvczsKICBpbnQgaSA9IDA7CiAgaW50IHByZWMgPSA5OwogIGludDMyX3QgZmxhZ3M7CgogIGlmKCEocyA9IGpzX2NvbnRvdXJfZGF0YShjdHgsIHRoaXNfdmFsKSkpCiAgICByZXR1cm4gSlNfRVhDRVBUSU9OOwoKICBpZihtYWdpYyA9PSAxICYmICEoZmxhZ3MgJiAweDEwMCkpCiAgICBvcyA8PCAibmV3IENvbnRvdXIoIjsKCiAgaWYoYXJnYyA+IDApCiAgICBKU19Ub0ludDMyKGN0eCwgJmZsYWdzLCBhcmd2WzBdKTsKICBlbHNlCiAgICBmbGFncyA9IDA7CgogIGlmKCEoZmxhZ3MgJiAweDEwMCkpCiAgICBvcyA8PCAnWyc7CgogIHN0ZDo6Zm9yX2VhY2gocy0+YmVnaW4oKSwgcy0+ZW5kKCksIFsmaSwgJm9zLCBmbGFncywgcHJlY10oY29uc3QgSlNQb2ludERhdGE8ZG91YmxlPiYgcG9pbnQpIHsKICAgIGlmKGkgPiAwKQogICAgICBvcyA8PCAoKGZsYWdzICYgMHgxMCkgPyAiICIgOiAiLCIpOwoKICAgIGlmKCEoZmxhZ3MgJiAweDEwMCkpCiAgICAgIG9zIDw8ICgoZmxhZ3MgJiAweDAzKSA9PSAwID8gInsiIDogIlsiKTsKCiAgICBpZihmbGFncyAmIDB4MDMpCiAgICAgIG9zIDw8IHN0ZDo6c2V0cHJlY2lzaW9uKHByZWMpIDw8IHBvaW50LnggPDwgIiwiIDw8IHBvaW50Lnk7CiAgICBlbHNlCiAgICAgIG9zIDw8ICJ4OiIgPDwgc3RkOjpzZXRwcmVjaXNpb24ocHJlYykgPDwgcG9pbnQueCA8PCAiLHk6IiA8PCBwb2ludC55OwoKICAgIGlmKCEoZmxhZ3MgJiAweDEwMCkpCiAgICAgIG9zIDw8ICgoZmxhZ3MgJiAweDAzKSA9PSAwID8gIn0iIDogIl0iKTsKCiAgICBpKys7CiAgfSk7CiAgaWYoIShmbGFncyAmIDB4MTAwKSkKICAgIG9zIDw8ICddJzsgLy8gPDwgc3RkOjplbmRsOwoKICBpZihtYWdpYyA9PSAxICYmICEoZmxhZ3MgJiAweDEwMCkpCiAgICBvcyA8PCAiKSI7CgogIHJldHVybiBKU19OZXdTdHJpbmcoY3R4LCBvcy5zdHIoKS5jX3N0cigpKTsKfQoKc3RhdGljIEpTVmFsdWUKanNfY29udG91cl9yZWN0KEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QqIGFyZ3YpIHsKICBKU1ZhbHVlIHJldCA9IEpTX1VOREVGSU5FRDsKICBKU0NvbnRvdXJEYXRhPGRvdWJsZT4gcG9pbnRzOwogIEpTUmVjdERhdGE8ZG91YmxlPiBzID0ganNfcmVjdF9nZXQoY3R4LCBhcmd2WzBdKTsKCiAgcG9pbnRzLnB1c2hfYmFjayhKU1BvaW50RGF0YTxkb3VibGU+KHMueCwgcy55KSk7CiAgcG9pbnRzLnB1c2hfYmFjayhKU1BvaW50RGF0YTxkb3VibGU+KHMueCArIHMud2lkdGgsIHMueSkpOwogIHBvaW50cy5wdXNoX2JhY2soSlNQb2ludERhdGE8ZG91YmxlPihzLnggKyBzLndpZHRoLCBzLnkgKyBzLmhlaWdodCkpOwogIHBvaW50cy5wdXNoX2JhY2soSlNQb2ludERhdGE8ZG91YmxlPihzLngsIHMueSArIHMuaGVpZ2h0KSk7CiAgcG9pbnRzLnB1c2hfYmFjayhKU1BvaW50RGF0YTxkb3VibGU+KHMueCwgcy55KSk7CgogIHJldCA9IGpzX2NvbnRvdXJfbmV3PGRvdWJsZT4oY3R4LCBwb2ludHMpOwogIHJldHVybiByZXQ7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX2NvbnRvdXJfZ2V0KEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBtYWdpYykgewogIEpTQ29udG91ckRhdGE8ZG91YmxlPiogY29udG91cjsKICBKU1ZhbHVlIHJldCA9IEpTX1VOREVGSU5FRDsKCiAgaWYoIShjb250b3VyID0ganNfY29udG91cl9kYXRhKGN0eCwgdGhpc192YWwpKSkKICAgIHJldHVybiBKU19FWENFUFRJT047CgogIHN3aXRjaChtYWdpYykgewogICAgY2FzZSAwOiB7CiAgICAgIEpTQ29udG91ckRhdGE8ZmxvYXQ+IHBvaW50czsKICAgICAgSlNSZWN0RGF0YTxmbG9hdD4gcmVjdDsKCiAgICAgIHBvaW50cy5yZXNpemUoY29udG91ci0+c2l6ZSgpKTsKCiAgICAgIHN0ZDo6Y29weShjb250b3VyLT5iZWdpbigpLCBjb250b3VyLT5lbmQoKSwgcG9pbnRzLmJlZ2luKCkpOwoKICAgICAgcmVjdCA9IGN2Ojpib3VuZGluZ1JlY3QocG9pbnRzKTsKCiAgICAgIHJldCA9IEpTX05ld0Zsb2F0NjQoY3R4LCAoZG91YmxlKXJlY3Qud2lkdGggLyByZWN0LmhlaWdodCk7CiAgICAgIGJyZWFrOwogICAgfQogICAgY2FzZSAxOiB7CiAgICAgIGRvdWJsZSBhcmVhID0gY3Y6OmNvbnRvdXJBcmVhKCpjb250b3VyKTsKICAgICAgSlNSZWN0RGF0YTxkb3VibGU+IHJlY3QgPSBjdjo6Ym91bmRpbmdSZWN0KCpjb250b3VyKTsKCiAgICAgIHJldCA9IEpTX05ld0Zsb2F0NjQoY3R4LCBhcmVhIC8gKHJlY3Qud2lkdGggKiByZWN0LmhlaWdodCkpOwogICAgICBicmVhazsKICAgIH0KICAgIGNhc2UgMjogewogICAgICBkb3VibGUgYXJlYSA9IGN2Ojpjb250b3VyQXJlYSgqY29udG91cik7CiAgICAgIEpTQ29udG91ckRhdGE8ZG91YmxlPiBodWxsOwogICAgICBjdjo6Y29udmV4SHVsbCgqY29udG91ciwgaHVsbCk7CiAgICAgIGRvdWJsZSBodWxsQXJlYSA9IGN2Ojpjb250b3VyQXJlYShodWxsKTsKCiAgICAgIHJldCA9IEpTX05ld0Zsb2F0NjQoY3R4LCBhcmVhIC8gY3Y6OmNvbnRvdXJBcmVhKGh1bGwpKTsKICAgICAgYnJlYWs7CiAgICB9CiAgICBjYXNlIDM6IHsKICAgICAgZG91YmxlIGFyZWEgPSBjdjo6Y29udG91ckFyZWEoKmNvbnRvdXIpOwoKICAgICAgcmV0ID0gSlNfTmV3RmxvYXQ2NChjdHgsIHN0ZDo6c3FydCg0ICogYXJlYSAvIDMuMTQxNTkyNjUzNTg5NzkzMjM4NDYpKTsKICAgICAgYnJlYWs7CiAgICB9CiAgICBjYXNlIDQ6IHsKICAgICAgY3Y6OlJvdGF0ZWRSZWN0IHJlY3QgPSBjdjo6Zml0RWxsaXBzZSgqY29udG91cik7CgogICAgICByZXQgPSBKU19OZXdGbG9hdDY0KGN0eCwgcmVjdC5hbmdsZSk7CiAgICAgIGJyZWFrOwogICAgfQogIH0KICByZXR1cm4gcmV0Owp9CgpzdGF0aWMgSlNWYWx1ZQpqc19jb250b3VyX2luc3BlY3QoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCogYXJndikgewogIEpTQ29udG91ckRhdGE8ZG91YmxlPiogY29udG91cjsKCiAgaWYoIShjb250b3VyID0ganNfY29udG91cl9kYXRhKGN0eCwgdGhpc192YWwpKSkKICAgIHJldHVybiBKU19FWENFUFRJT047CgogIEpTVmFsdWUgb2JqID0gSlNfTmV3T2JqZWN0UHJvdG8oY3R4LCBjb250b3VyX3Byb3RvKTsKCiAgSlNfRGVmaW5lUHJvcGVydHlWYWx1ZVN0cihjdHgsIG9iaiwgImxlbmd0aCIsIEpTX05ld1VpbnQzMihjdHgsIGNvbnRvdXItPnNpemUoKSksIEpTX1BST1BfRU5VTUVSQUJMRSk7CiAgcmV0dXJuIG9iajsKfQoKZXh0ZXJuICJDIiB7CgpKU0NsYXNzRGVmIGpzX2NvbnRvdXJfY2xhc3MgPSB7CiAgICAuY2xhc3NfbmFtZSA9ICJDb250b3VyIiwKICAgIC5maW5hbGl6ZXIgPSBqc19jb250b3VyX2ZpbmFsaXplciwKfTsKCkpTVmFsdWUKanNfY29udG91cl9pdGVyYXRvcihKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2LCBpbnQgbWFnaWMpIHsKICBKU0NvbnRvdXJEYXRhPGRvdWJsZT4qIHM7CgogIGlmKCEocyA9IGpzX2NvbnRvdXJfZGF0YShjdHgsIHRoaXNfdmFsKSkpCiAgICByZXR1cm4gSlNfRVhDRVBUSU9OOwoKICByZXR1cm4ganNfcG9pbnRfaXRlcmF0b3JfbmV3KGN0eCwgcmFuZ2UoKnMpLCBtYWdpYyk7Cn0KCmNvbnN0IEpTQ0Z1bmN0aW9uTGlzdEVudHJ5IGpzX2NvbnRvdXJfcHJvdG9fZnVuY3NbXSA9IHsKICAgIEpTX0NGVU5DX0RFRigicHVzaCIsIDEsIGpzX2NvbnRvdXJfcHVzaCksCiAgICBKU19DRlVOQ19ERUYoInBvcCIsIDAsIGpzX2NvbnRvdXJfcG9wKSwKICAgIEpTX0NGVU5DX0RFRigidW5zaGlmdCIsIDEsIGpzX2NvbnRvdXJfdW5zaGlmdCksCiAgICBKU19DRlVOQ19ERUYoInNoaWZ0IiwgMCwganNfY29udG91cl9zaGlmdCksCiAgICBKU19DRlVOQ19ERUYoImNvbmNhdCIsIDEsIGpzX2NvbnRvdXJfY29uY2F0KSwKICAgIEpTX0NGVU5DX0RFRigiYXQiLCAxLCBqc19jb250b3VyX2F0KSwKICAgIEpTX0NGVU5DX0RFRigiZ2V0TWF0IiwgMCwganNfY29udG91cl9nZXRtYXQpLAogICAgSlNfQ0dFVFNFVF9ERUYoImxlbmd0aCIsIGpzX2NvbnRvdXJfbGVuZ3RoLCBOVUxMKSwKICAgIEpTX0NHRVRTRVRfREVGKCJhcmVhIiwganNfY29udG91cl9hcmVhLCBOVUxMKSwKICAgIEpTX0NHRVRTRVRfREVGKCJidWZmZXIiLCBqc19jb250b3VyX2J1ZmZlciwgTlVMTCksCiAgICBKU19DR0VUU0VUX0RFRigiYXJyYXkiLCBqc19jb250b3VyX2FycmF5LCBOVUxMKSwKICAgIEpTX0NHRVRTRVRfTUFHSUNfREVGKCJhc3BlY3RSYXRpbyIsIGpzX2NvbnRvdXJfZ2V0LCBOVUxMLCAwKSwKICAgIEpTX0NHRVRTRVRfTUFHSUNfREVGKCJleHRlbnQiLCBqc19jb250b3VyX2dldCwgTlVMTCwgMSksCiAgICBKU19DR0VUU0VUX01BR0lDX0RFRigic29saWRpdHkiLCBqc19jb250b3VyX2dldCwgTlVMTCwgMiksCiAgICBKU19DR0VUU0VUX01BR0lDX0RFRigiZXF1aXZhbGVudERpYW1ldGVyIiwganNfY29udG91cl9nZXQsIE5VTEwsIDMpLAogICAgSlNfQ0dFVFNFVF9NQUdJQ19ERUYoIm9yaWVudGF0aW9uIiwganNfY29udG91cl9nZXQsIE5VTEwsIDQpLAoKICAgIEpTX0NGVU5DX0RFRigiYXBwcm94UG9seURQIiwgMSwganNfY29udG91cl9hcHByb3hwb2x5ZHApLAogICAgSlNfQ0ZVTkNfREVGKCJjb252ZXhIdWxsIiwgMSwganNfY29udG91cl9jb252ZXhodWxsKSwKICAgIEpTX0NGVU5DX0RFRigiYm91bmRpbmdSZWN0IiwgMCwganNfY29udG91cl9ib3VuZGluZ3JlY3QpLAogICAgSlNfQ0ZVTkNfREVGKCJmaXRFbGxpcHNlIiwgMCwganNfY29udG91cl9maXRlbGxpcHNlKSwKICAgIEpTX0NGVU5DX0RFRigiZml0TGluZSIsIDAsIGpzX2NvbnRvdXJfZml0bGluZSksCiAgICBKU19DRlVOQ19ERUYoImludGVyc2VjdENvbnZleCIsIDAsIGpzX2NvbnRvdXJfaW50ZXJzZWN0Y29udmV4KSwKICAgIEpTX0NGVU5DX0RFRigiaXNDb252ZXgiLCAwLCBqc19jb250b3VyX2lzY29udmV4KSwKICAgIEpTX0NGVU5DX0RFRigibWluQXJlYVJlY3QiLCAwLCBqc19jb250b3VyX21pbmFyZWFyZWN0KSwKICAgIEpTX0NGVU5DX0RFRigibWluRW5jbG9zaW5nQ2lyY2xlIiwgMCwganNfY29udG91cl9taW5lbmNsb3NpbmdjaXJjbGUpLAogICAgSlNfQ0ZVTkNfREVGKCJtaW5FbmNsb3NpbmdUcmlhbmdsZSIsIDAsIGpzX2NvbnRvdXJfbWluZW5jbG9zaW5ndHJpYW5nbGUpLAogICAgSlNfQ0ZVTkNfREVGKCJwb2ludFBvbHlnb25UZXN0IiwgMCwganNfY29udG91cl9wb2ludHBvbHlnb250ZXN0KSwKICAgIEpTX0NGVU5DX0RFRigicm90YXRlZFJlY3RhbmdsZUludGVyc2VjdGlvbiIsIDAsIGpzX2NvbnRvdXJfcm90YXRlZHJlY3RhbmdsZWludGVyc2VjdGlvbiksCiAgICBKU19DRlVOQ19ERUYoImFyY0xlbmd0aCIsIDAsIGpzX2NvbnRvdXJfYXJjbGVuZ3RoKSwKICAgIEpTX0NGVU5DX0RFRigicm90YXRlUG9pbnRzIiwgMSwganNfY29udG91cl9yb3RhdGVwb2ludHMpLAogICAgSlNfQ0ZVTkNfREVGKCJjb252ZXhpdHlEZWZlY3RzIiwgMSwganNfY29udG91cl9jb252ZXhpdHlkZWZlY3RzKSwKICAgIEpTX0NGVU5DX01BR0lDX0RFRigic2ltcGxpZnlSZXVtYW5uV2l0a2FtIiwgMCwganNfY29udG91cl9wc2ltcGwsIDApLAogICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJzaW1wbGlmeU9waGVpbSIsIDAsIGpzX2NvbnRvdXJfcHNpbXBsLCAxKSwKICAgIEpTX0NGVU5DX01BR0lDX0RFRigic2ltcGxpZnlMYW5nIiwgMCwganNfY29udG91cl9wc2ltcGwsIDIpLAogICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJzaW1wbGlmeURvdWdsYXNQZXVja2VyIiwgMCwganNfY29udG91cl9wc2ltcGwsIDMpLAogICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJzaW1wbGlmeU50aFBvaW50IiwgMCwganNfY29udG91cl9wc2ltcGwsIDQpLAogICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJzaW1wbGlmeVJhZGlhbERpc3RhbmNlIiwgMCwganNfY29udG91cl9wc2ltcGwsIDUpLAogICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJzaW1wbGlmeVBlcnBlbmRpY3VsYXJEaXN0YW5jZSIsIDAsIGpzX2NvbnRvdXJfcHNpbXBsLCA2KSwKICAgIEpTX0NGVU5DX0RFRigidG9BcnJheSIsIDAsIGpzX2NvbnRvdXJfdG9hcnJheSksCiAgICBKU19DRlVOQ19NQUdJQ19ERUYoInRvU3RyaW5nIiwgMCwganNfY29udG91cl90b3N0cmluZywgMCksCiAgICBKU19DRlVOQ19NQUdJQ19ERUYoInRvU291cmNlIiwgMCwganNfY29udG91cl90b3N0cmluZywgMSksCiAgICBKU19DRlVOQ19NQUdJQ19ERUYoImxpbmVzIiwgMCwganNfY29udG91cl9pdGVyYXRvciwgTkVYVF9MSU5FKSwKICAgIEpTX0NGVU5DX01BR0lDX0RFRigicG9pbnRzIiwgMCwganNfY29udG91cl9pdGVyYXRvciwgTkVYVF9QT0lOVCksCgogICAgSlNfQUxJQVNfREVGKCJbU3ltYm9sLml0ZXJhdG9yXSIsICJwb2ludHMiKSwKICAgIEpTX0FMSUFTX0RFRigic2l6ZSIsICJsZW5ndGgiKSwKICAgIC8vICAgIEpTX0FMSUFTX0RFRigiW1N5bWJvbC50b1N0cmluZ1RhZ10iLCAidG9TdHJpbmciKSwKCiAgICBKU19QUk9QX1NUUklOR19ERUYoIltTeW1ib2wudG9TdHJpbmdUYWddIiwgIkNvbnRvdXIiLCBKU19QUk9QX0NPTkZJR1VSQUJMRSksCgp9Owpjb25zdCBKU0NGdW5jdGlvbkxpc3RFbnRyeSBqc19jb250b3VyX3N0YXRpY19mdW5jc1tdID0gewogICAgSlNfQ0ZVTkNfREVGKCJmcm9tUmVjdCIsIDEsIGpzX2NvbnRvdXJfcmVjdCksCiAgICBKU19QUk9QX0lOVDMyX0RFRigiRk9STUFUX1hZIiwgMHgwMCwgMCksCiAgICBKU19QUk9QX0lOVDMyX0RFRigiRk9STUFUXzAxIiwgMHgwMiwgMCksCiAgICBKU19QUk9QX0lOVDMyX0RFRigiRk9STUFUX1NQQUNFIiwgMHgxMCwgMCksCiAgICBKU19QUk9QX0lOVDMyX0RFRigiRk9STUFUX0NPTU1BIiwgMHgwMCwgMCksCiAgICBKU19QUk9QX0lOVDMyX0RFRigiRk9STUFUX0JSQUNLRVQiLCAweDAwLCAwKSwKICAgIEpTX1BST1BfSU5UMzJfREVGKCJGT1JNQVRfTk9CUkFDS0VUIiwgMHgxMDAsIDApLAp9OwoKaW50CmpzX2NvbnRvdXJfaW5pdChKU0NvbnRleHQqIGN0eCwgSlNNb2R1bGVEZWYqIG0pIHsKCiAgaWYoanNfY29udG91cl9jbGFzc19pZCA9PSAwKSB7CiAgICAvKiBjcmVhdGUgdGhlIENvbnRvdXIgY2xhc3MgKi8KICAgIEpTX05ld0NsYXNzSUQoJmpzX2NvbnRvdXJfY2xhc3NfaWQpOwogICAgSlNfTmV3Q2xhc3MoSlNfR2V0UnVudGltZShjdHgpLCBqc19jb250b3VyX2NsYXNzX2lkLCAmanNfY29udG91cl9jbGFzcyk7CgogICAgY29udG91cl9wcm90byA9IEpTX05ld09iamVjdChjdHgpOwogICAgSlNfU2V0UHJvcGVydHlGdW5jdGlvbkxpc3QoY3R4LCBjb250b3VyX3Byb3RvLCBqc19jb250b3VyX3Byb3RvX2Z1bmNzLCBjb3VudG9mKGpzX2NvbnRvdXJfcHJvdG9fZnVuY3MpKTsKICAgIEpTX1NldENsYXNzUHJvdG8oY3R4LCBqc19jb250b3VyX2NsYXNzX2lkLCBjb250b3VyX3Byb3RvKTsKCiAgICBjb250b3VyX2NsYXNzID0gSlNfTmV3Q0Z1bmN0aW9uMihjdHgsIGpzX2NvbnRvdXJfY29uc3RydWN0b3IsICJDb250b3VyIiwgMiwgSlNfQ0ZVTkNfY29uc3RydWN0b3IsIDApOwogICAgLyogc2V0IHByb3RvLmNvbnN0cnVjdG9yIGFuZCBjdG9yLnByb3RvdHlwZSAqLwogICAgSlNfU2V0Q29uc3RydWN0b3IoY3R4LCBjb250b3VyX2NsYXNzLCBjb250b3VyX3Byb3RvKTsKICAgIEpTX1NldFByb3BlcnR5RnVuY3Rpb25MaXN0KGN0eCwgY29udG91cl9jbGFzcywganNfY29udG91cl9zdGF0aWNfZnVuY3MsIGNvdW50b2YoanNfY29udG91cl9zdGF0aWNfZnVuY3MpKTsKICB9CiAganNfc2V0X2luc3BlY3RfbWV0aG9kKGN0eCwgY29udG91cl9wcm90bywganNfY29udG91cl9pbnNwZWN0KTsKCiAgewogICAgSlNWYWx1ZSBnbG9iYWwgPSBKU19HZXRHbG9iYWxPYmplY3QoY3R4KTsKICAgIGZsb2F0NjRfYXJyYXkgPSBKU19HZXRQcm9wZXJ0eVN0cihjdHgsIGdsb2JhbCwgIkZsb2F0NjRBcnJheSIpOwogIH0KCiAgaWYobSkKICAgIEpTX1NldE1vZHVsZUV4cG9ydChjdHgsIG0sICJDb250b3VyIiwgY29udG91cl9jbGFzcyk7CiAgLyogIGVsc2UKICAgICAgSlNfU2V0UHJvcGVydHlTdHIoY3R4LCAqc3RhdGljX2Nhc3Q8SlNWYWx1ZSo+KG0pLCAiQ29udG91ciIsIGNvbnRvdXJfY2xhc3MpOyovCiAgcmV0dXJuIDA7Cn0KCmV4dGVybiAiQyIgVklTSUJMRSB2b2lkIGpzX2NvbnRvdXJfZXhwb3J0KEpTQ29udGV4dCogY3R4LCBKU01vZHVsZURlZiogbSkgewogIEpTX0FkZE1vZHVsZUV4cG9ydChjdHgsIG0sICJDb250b3VyIik7Cn0KCiNpZiBkZWZpbmVkKEpTX0NPTlRPVVJfTU9EVUxFKQojZGVmaW5lIEpTX0lOSVRfTU9EVUxFIC8qVklTSUJMRSovIGpzX2luaXRfbW9kdWxlCiNlbHNlCiNkZWZpbmUgSlNfSU5JVF9NT0RVTEUgLypWSVNJQkxFKi8ganNfaW5pdF9tb2R1bGVfY29udG91cgojZW5kaWYKCkpTTW9kdWxlRGVmKgpKU19JTklUX01PRFVMRShKU0NvbnRleHQqIGN0eCwgY29uc3QgY2hhciogbW9kdWxlX25hbWUpIHsKICBKU01vZHVsZURlZiogbTsKICBtID0gSlNfTmV3Q01vZHVsZShjdHgsIG1vZHVsZV9uYW1lLCAmanNfY29udG91cl9pbml0KTsKICBpZighbSkKICAgIHJldHVybiBOVUxMOwogIGpzX2NvbnRvdXJfZXhwb3J0KGN0eCwgbSk7CiAgcmV0dXJuIG07Cn0KfQoKAAAAAAAAAABufgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAXH4AAAAAAABcfgAAAAAAAAAAAAAAAPC/"
				],
				[
					63,
					1,
					"left_delete",
					null,
					"AQAAAMsgAAAAAAAAyyAAAAAAAAAVAAAAICAgIC8vIGpzcnQganMoY3R4KTsK",
					"AQAAAAAAAAABAAAAyyAAAAAAAADgIAAAAAAAAAAAAAAAAPC/"
				],
				[
					64,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAABZfgAAI2luY2x1ZGUgImpzYmluZGluZ3MuaHBwIgojaW5jbHVkZSAianNfcG9pbnQuaHBwIgojaW5jbHVkZSAianNfcmVjdC5ocHAiCiNpbmNsdWRlICJqc19jb250b3VyLmhwcCIKI2luY2x1ZGUgImpzX2FycmF5LmhwcCIKI2luY2x1ZGUgImpzX3R5cGVkX2FycmF5LmhwcCIKI2luY2x1ZGUgImpzX2FsbG9jLmhwcCIKI2luY2x1ZGUgImpzX3BvaW50X2l0ZXJhdG9yLmhwcCIKI2luY2x1ZGUgInV0aWwuaHBwIgoKI2luY2x1ZGUgPG9wZW5jdjIvY29yZS9jb3JlLmhwcD4KI2luY2x1ZGUgPG9wZW5jdjIvaW1ncHJvYy9pbWdwcm9jLmhwcD4KCi8vI2luY2x1ZGUgInBsb3QtY3YuaHBwIgovLyNpbmNsdWRlICJjb2xvci5ocHAiCiNpbmNsdWRlICJnZW9tZXRyeS5ocHAiCiNpbmNsdWRlICJwc2ltcGwuaHBwIgoKI2luY2x1ZGUgPGlvbWFuaXA+CiNpbmNsdWRlIDxyYW5nZXM+CgpleHRlcm4gIkMiIHsKSlNWYWx1ZSBjb250b3VyX3Byb3RvID0gSlNfVU5ERUZJTkVELCBjb250b3VyX2NsYXNzID0gSlNfVU5ERUZJTkVEOwpWSVNJQkxFIEpTQ2xhc3NJRCBqc19jb250b3VyX2NsYXNzX2lkID0gMDsKfQoKc3RhdGljIEpTVmFsdWUgZmxvYXQ2NF9hcnJheTsKCi8vIHVzaW5nIG5hbWVzcGFjZSBjdjsKCkpTVmFsdWUKanNfY29udG91cl9uZXcoSlNDb250ZXh0KiBjdHgsIGNvbnN0IEpTQ29udG91ckRhdGE8ZG91YmxlPiYgcG9pbnRzKSB7CiAgSlNWYWx1ZSByZXQ7CiAgSlNDb250b3VyRGF0YTxkb3VibGU+KiBjb250b3VyOwoKICByZXQgPSBKU19OZXdPYmplY3RQcm90b0NsYXNzKGN0eCwgY29udG91cl9wcm90bywganNfY29udG91cl9jbGFzc19pZCk7CiAgY29udG91ciA9IGpzX2FsbG9jYXRlPEpTQ29udG91ckRhdGE8ZG91YmxlPj4oY3R4KTsKCiAgbmV3KGNvbnRvdXIpIEpTQ29udG91ckRhdGE8ZG91YmxlPigpOwoKICBjb250b3VyLT5yZXNpemUocG9pbnRzLnNpemUoKSk7CiAgdHJhbnNmb3JtX3BvaW50cyhwb2ludHMuY2JlZ2luKCksIHBvaW50cy5jZW5kKCksIGNvbnRvdXItPmJlZ2luKCkpOwoKICBKU19TZXRPcGFxdWUocmV0LCBjb250b3VyKTsKICByZXR1cm4gcmV0Owp9CgpKU1ZhbHVlCmpzX2NvbnRvdXJfbW92ZShKU0NvbnRleHQqIGN0eCwgY29uc3QgSlNDb250b3VyRGF0YTxkb3VibGU+JiYgcG9pbnRzKSB7CiAgSlNWYWx1ZSByZXQ7CiAgSlNDb250b3VyRGF0YTxkb3VibGU+KiBjb250b3VyOwoKICByZXQgPSBKU19OZXdPYmplY3RQcm90b0NsYXNzKGN0eCwgY29udG91cl9wcm90bywganNfY29udG91cl9jbGFzc19pZCk7CiAgY29udG91ciA9IGpzX2FsbG9jYXRlPEpTQ29udG91ckRhdGE8ZG91YmxlPj4oY3R4KTsKCiAgbmV3KGNvbnRvdXIpIEpTQ29udG91ckRhdGE8ZG91YmxlPihzdGQ6Om1vdmUocG9pbnRzKSk7CgogIC8qICBjb250b3VyLT5yZXNpemUocG9pbnRzLnNpemUoKSk7CiAgICB0cmFuc2Zvcm1fcG9pbnRzKHBvaW50cy5jYmVnaW4oKSwgcG9pbnRzLmNlbmQoKSwgY29udG91ci0+YmVnaW4oKSk7Ki8KCiAgSlNfU2V0T3BhcXVlKHJldCwgY29udG91cik7CiAgcmV0dXJuIHJldDsKfQoKc3RhdGljIEpTVmFsdWUKanNfY29udG91cl9idWZmZXIoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCkgewogIEpTQ29udG91ckRhdGE8ZG91YmxlPiogY29udG91cjsKICBzdGQ6OnJhbmdlczo6c3VicmFuZ2U8dWludDhfdCo+IHI7CiAgSlNWYWx1ZSByZXQgPSBKU19VTkRFRklORUQ7CgogIGlmKChjb250b3VyID0ganNfY29udG91cl9kYXRhKGN0eCwgdGhpc192YWwpKSA9PSBudWxscHRyKQogICAgcmV0dXJuIHJldDsKCiAgSlNWYWx1ZSogdmFscHRyID0gc3RhdGljX2Nhc3Q8SlNWYWx1ZSo+KGpzX21hbGxvYyhjdHgsIHNpemVvZihKU1ZhbHVlKSkpOwogICp2YWxwdHIgPSBKU19EdXBWYWx1ZShjdHgsIHRoaXNfdmFsKTsKCiAgciA9IHJhbmdlPHVpbnQ4X3QqPigqY29udG91cik7CgogIHJldCA9IEpTX05ld0FycmF5QnVmZmVyKAogICAgICBjdHgsCiAgICAgIHIuYmVnaW4oKSwKICAgICAgci5zaXplKCksCiAgICAgIFtdKEpTUnVudGltZSogcnQsIHZvaWQqIG9wYXF1ZSwgdm9pZCogcHRyKSB7CiAgICAgICAgSlNfRnJlZVZhbHVlUlQocnQsICooSlNWYWx1ZSopb3BhcXVlKTsKICAgICAgICBqc19mcmVlX3J0KHJ0LCBvcGFxdWUpOwogICAgICB9LAogICAgICB2YWxwdHIsCiAgICAgIGZhbHNlKTsKCiAgcmV0dXJuIHJldDsKfQoKc3RhdGljIEpTVmFsdWUKanNfY29udG91cl9hcnJheShKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsKSB7CiAgSlNWYWx1ZSByZXQ7CiAgSlNWYWx1ZUNvbnN0IGJ1ZmZlciA9IGpzX2NvbnRvdXJfYnVmZmVyKGN0eCwgdGhpc192YWwpOwoKICByZXQgPSBKU19DYWxsQ29uc3RydWN0b3IoY3R4LCBmbG9hdDY0X2FycmF5LCAxLCAmYnVmZmVyKTsKICByZXR1cm4gcmV0Owp9CgpzdGF0aWMgSlNWYWx1ZQpqc19jb250b3VyX2FwcHJveHBvbHlkcChKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2KSB7CiAgSlNWYWx1ZSByZXQgPSBKU19VTkRFRklORUQ7CiAgZG91YmxlIGVwc2lsb247CiAgYm9vbCBjbG9zZWQgPSBmYWxzZTsKICBzdGQ6OnZlY3Rvcjxjdjo6UG9pbnQ+IGN1cnZlOwogIEpTQ29udG91ckRhdGE8ZmxvYXQ+IGFwcHJveEN1cnZlOwogIEpTQ29udG91ckRhdGE8ZG91YmxlPipvdXQsICp2OwoKICB2ID0ganNfY29udG91cl9kYXRhKGN0eCwgdGhpc192YWwpOwoKICBpZighdikKICAgIHJldHVybiBKU19FWENFUFRJT047CiAgb3V0ID0gc3RhdGljX2Nhc3Q8SlNDb250b3VyRGF0YTxkb3VibGU+Kj4oSlNfR2V0T3BhcXVlMihjdHgsIGFyZ3ZbMF0sIGpzX2NvbnRvdXJfY2xhc3NfaWQpKTsKCiAgaWYoYXJnYyA+IDEpIHsKICAgIEpTX1RvRmxvYXQ2NChjdHgsICZlcHNpbG9uLCBhcmd2WzFdKTsKCiAgICBpZihhcmdjID4gMikgewogICAgICBjbG9zZWQgPSAhIUpTX1RvQm9vbChjdHgsIGFyZ3ZbMl0pOwogICAgfQogIH0KCiAgc3RkOjp0cmFuc2Zvcm0odi0+YmVnaW4oKSwgdi0+ZW5kKCksIHN0ZDo6YmFja19pbnNlcnRlcihjdXJ2ZSksIFtdKGNvbnN0IEpTUG9pbnREYXRhPGRvdWJsZT4mIHB0KSAtPiBjdjo6UG9pbnQgewogICAgcmV0dXJuIGN2OjpQb2ludChwdC54LCBwdC55KTsKICB9KTsKCiAgY3Y6OmFwcHJveFBvbHlEUChjdXJ2ZSwgYXBwcm94Q3VydmUsIGVwc2lsb24sIGNsb3NlZCk7CgogIHN0ZDo6dHJhbnNmb3JtKGFwcHJveEN1cnZlLmJlZ2luKCksCiAgICAgICAgICAgICAgICAgYXBwcm94Q3VydmUuZW5kKCksCiAgICAgICAgICAgICAgICAgc3RkOjpiYWNrX2luc2VydGVyKCpvdXQpLAogICAgICAgICAgICAgICAgIFtdKGNvbnN0IEpTUG9pbnREYXRhPGZsb2F0PiYgcHQpIC0+IEpTUG9pbnREYXRhPGRvdWJsZT4geyByZXR1cm4gSlNQb2ludERhdGE8ZG91YmxlPihwdC54LCBwdC55KTsgfSk7CgogIHJldHVybiBKU19VTkRFRklORUQ7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX2NvbnRvdXJfYXJjbGVuZ3RoKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QqIGFyZ3YpIHsKICBKU0NvbnRvdXJEYXRhPGRvdWJsZT4qdiwgKm90aGVyID0gbnVsbHB0ciwgKnB0cjsKICBKU1ZhbHVlIHJldCA9IEpTX1VOREVGSU5FRDsKICBKU1BvaW50RGF0YTxmbG9hdD4gcHQ7CiAgYm9vbCBjbG9zZWQgPSBmYWxzZTsKICBKU0NvbnRvdXJEYXRhPGZsb2F0PiBjb250b3VyOwogIEpTUG9pbnREYXRhPGRvdWJsZT4qIHBvaW50OwogIGRvdWJsZSByZXR2YWw7CgogIHYgPSBqc19jb250b3VyX2RhdGEoY3R4LCB0aGlzX3ZhbCk7CiAgaWYoIXYpCgogICAgcmV0dXJuIEpTX0VYQ0VQVElPTjsKCiAgaWYoYXJnYyA+IDApIHsKICAgIGNsb3NlZCA9ICEhSlNfVG9Cb29sKGN0eCwgYXJndlswXSk7CiAgfQoKICBzdGQ6OnRyYW5zZm9ybSh2LT5iZWdpbigpLCB2LT5lbmQoKSwgc3RkOjpiYWNrX2luc2VydGVyKGNvbnRvdXIpLCBbXShjb25zdCBKU1BvaW50RGF0YTxkb3VibGU+JiBwdCkgLT4gSlNQb2ludERhdGE8ZmxvYXQ+IHsKICAgIHJldHVybiBKU1BvaW50RGF0YTxmbG9hdD4ocHQueCwgcHQueSk7CiAgfSk7CgogIHJldHZhbCA9IGN2OjphcmNMZW5ndGgoY29udG91ciwgY2xvc2VkKTsKCiAgcmV0ID0gSlNfTmV3RmxvYXQ2NChjdHgsIHJldHZhbCk7CgogIHJldHVybiByZXQ7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX2NvbnRvdXJfYXJlYShKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsKSB7CiAgSlNDb250b3VyRGF0YTxkb3VibGU+KiB2OwogIEpTVmFsdWUgcmV0ID0gSlNfVU5ERUZJTkVEOwogIGRvdWJsZSBhcmVhOwogIEpTQ29udG91ckRhdGE8ZmxvYXQ+IGNvbnRvdXI7CiAgdiA9IGpzX2NvbnRvdXJfZGF0YShjdHgsIHRoaXNfdmFsKTsKICBpZighdikKICAgIHJldHVybiBKU19FWENFUFRJT047CiAgc3RkOjp0cmFuc2Zvcm0odi0+YmVnaW4oKSwgdi0+ZW5kKCksIHN0ZDo6YmFja19pbnNlcnRlcihjb250b3VyKSwgW10oY29uc3QgSlNQb2ludERhdGE8ZG91YmxlPiYgcHQpIC0+IEpTUG9pbnREYXRhPGZsb2F0PiB7CiAgICByZXR1cm4gSlNQb2ludERhdGE8ZmxvYXQ+KHB0LngsIHB0LnkpOwogIH0pOwogIGFyZWEgPSBjdjo6Y29udG91ckFyZWEoY29udG91cik7CiAgcmV0ID0gSlNfTmV3RmxvYXQ2NChjdHgsIGFyZWEpOwogIHJldHVybiByZXQ7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX2NvbnRvdXJfYm91bmRpbmdyZWN0KEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QqIGFyZ3YpIHsKICBKU1ZhbHVlIHJldCA9IEpTX1VOREVGSU5FRDsKICBjdjo6UmVjdDJmIHJlY3Q7CiAgSlNDb250b3VyRGF0YTxmbG9hdD4gY3VydmU7CiAgSlNDb250b3VyRGF0YTxkb3VibGU+KiB2OwogIEpTUmVjdERhdGE8ZG91YmxlPiByOwoKICB2ID0ganNfY29udG91cl9kYXRhKGN0eCwgdGhpc192YWwpOwoKICBpZighdikKICAgIHJldHVybiBKU19FWENFUFRJT047CgogIHN0ZDo6dHJhbnNmb3JtKHYtPmJlZ2luKCksIHYtPmVuZCgpLCBzdGQ6OmJhY2tfaW5zZXJ0ZXIoY3VydmUpLCBbXShjb25zdCBKU1BvaW50RGF0YTxkb3VibGU+JiBwdCkgLT4gSlNQb2ludERhdGE8ZmxvYXQ+IHsKICAgIHJldHVybiBKU1BvaW50RGF0YTxmbG9hdD4ocHQueCwgcHQueSk7CiAgfSk7CgogIHJlY3QgPSBjdjo6Ym91bmRpbmdSZWN0KGN1cnZlKTsKCiAgcmV0ID0ganNfbmV3KGN0eCwgIlJlY3QiKTsKICAvLyByZXQgPSBKU19OZXdPYmplY3QoY3R4LCByZWN0X3Byb3RvLCBqc19yZWN0X2NsYXNzX2lkKTsKICAvLyByID0ganNfYWxsb2NhdGU8IEpTUmVjdERhdGE8ZG91YmxlPiA+KGN0eCk7CiAgLy8qciA9IHJlY3Q7CiAgLy8gSlNfU2V0T3BhcXVlKHJldCwgcik7CiAgLy8KICByID0gcmVjdDsKCiAganNfcmVjdF93cml0ZShjdHgsIHJldCwgcik7CgogIHJldHVybiByZXQ7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX2NvbnRvdXJfY2VudGVyKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwpIHsKICBKU0NvbnRvdXJEYXRhPGRvdWJsZT4qIHY7CiAgSlNWYWx1ZSByZXQgPSBKU19VTkRFRklORUQ7CiAgZG91YmxlIGFyZWE7CiAgdiA9IGpzX2NvbnRvdXJfZGF0YShjdHgsIHRoaXNfdmFsKTsKICBpZighdikKICAgIHJldHVybiBKU19FWENFUFRJT047CiAgewogICAgc3RkOjp2ZWN0b3I8Y3Y6OlBvaW50PiBwb2ludHM7CiAgICBwb2ludHMucmVzaXplKHYtPnNpemUoKSk7CiAgICBzdGQ6OmNvcHkodi0+YmVnaW4oKSwgdi0+ZW5kKCksIHBvaW50cy5iZWdpbigpKTsKICAgIGN2OjpNb21lbnRzIG11ID0gY3Y6Om1vbWVudHMocG9pbnRzKTsKICAgIGN2OjpQb2ludCBjZW50cm9pZCA9IGN2OjpQb2ludChtdS5tMTAgLyBtdS5tMDAsIG11Lm0wMSAvIG11Lm0wMCk7CgogICAgcmV0ID0ganNfcG9pbnRfbmV3KGN0eCwgY2VudHJvaWQueCwgY2VudHJvaWQueSk7CiAgfQoKICByZXR1cm4gcmV0Owp9CgpzdGF0aWMgSlNWYWx1ZQpqc19jb250b3VyX2NvbnZleGh1bGwoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCogYXJndikgewogIEpTVmFsdWUgcmV0ID0gSlNfVU5ERUZJTkVEOwogIGJvb2wgY2xvY2t3aXNlID0gZmFsc2UsIHJldHVyblBvaW50cyA9IHRydWU7CiAgSlNDb250b3VyRGF0YTxmbG9hdD4gY3VydmUsIGh1bGw7CiAgc3RkOjp2ZWN0b3I8aW50PiBodWxsSW5kaWNlczsKICBKU0NvbnRvdXJEYXRhPGRvdWJsZT4qb3V0LCAqdjsKCiAgdiA9IGpzX2NvbnRvdXJfZGF0YShjdHgsIHRoaXNfdmFsKTsKCiAgaWYoIXYpCiAgICByZXR1cm4gSlNfRVhDRVBUSU9OOwoKICBpZihhcmdjID4gMCkgewogICAgY2xvY2t3aXNlID0gISFKU19Ub0Jvb2woY3R4LCBhcmd2WzBdKTsKCiAgICBpZihhcmdjID4gMSkgewogICAgICByZXR1cm5Qb2ludHMgPSAhIUpTX1RvQm9vbChjdHgsIGFyZ3ZbMV0pOwogICAgfQogIH0KCiAgc3RkOjp0cmFuc2Zvcm0odi0+YmVnaW4oKSwgdi0+ZW5kKCksIHN0ZDo6YmFja19pbnNlcnRlcihjdXJ2ZSksIFtdKGNvbnN0IEpTUG9pbnREYXRhPGRvdWJsZT4mIHB0KSAtPiBKU1BvaW50RGF0YTxmbG9hdD4gewogICAgcmV0dXJuIEpTUG9pbnREYXRhPGZsb2F0PihwdC54LCBwdC55KTsKICB9KTsKCiAgaWYocmV0dXJuUG9pbnRzKQogICAgY3Y6OmNvbnZleEh1bGwoY3VydmUsIGh1bGwsIGNsb2Nrd2lzZSwgdHJ1ZSk7CiAgZWxzZQogICAgY3Y6OmNvbnZleEh1bGwoY3VydmUsIGh1bGxJbmRpY2VzLCBjbG9ja3dpc2UsIGZhbHNlKTsKCiAgaWYocmV0dXJuUG9pbnRzKSB7CiAgICByZXQgPSBqc19jb250b3VyX25ldyhjdHgsIGh1bGwpOwogIH0gZWxzZSB7CiAgICB1aW50MzJfdCBpLCBzaXplID0gaHVsbEluZGljZXMuc2l6ZSgpOwoKICAgIHJldCA9IEpTX05ld0FycmF5KGN0eCk7CgogICAgZm9yKGkgPSAwOyBpIDwgc2l6ZTsgaSsrKSB7IEpTX1NldFByb3BlcnR5VWludDMyKGN0eCwgcmV0LCBpLCBKU19OZXdJbnQzMihjdHgsIGh1bGxJbmRpY2VzW2ldKSk7IH0KICB9CgogIHJldHVybiByZXQ7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX2NvbnRvdXJfY29udmV4aXR5ZGVmZWN0cyhKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2KSB7CiAgSlNDb250b3VyRGF0YTxkb3VibGU+KiBzID0ganNfY29udG91cl9kYXRhKGN0eCwgdGhpc192YWwpOwogIEpTVmFsdWUgcmV0ID0gSlNfVU5ERUZJTkVEOwoKICBzdGQ6OnZlY3RvcjxpbnQ+IGh1bGxJbmRpY2VzOwogIHN0ZDo6dmVjdG9yPGN2OjpWZWM0aT4gZGVmZWN0czsKCiAgaWYoYXJnYyA+IDApIHsKICAgIGludDY0X3QgbiA9IGpzX2FycmF5X3RvKGN0eCwgYXJndlswXSwgaHVsbEluZGljZXMpOwogICAgaWYobiA9PSAwKQogICAgICByZXR1cm4gSlNfRVhDRVBUSU9OOwogIH0KCiAgaWYocy0+c2l6ZSgpID09IDAgfHwgaHVsbEluZGljZXMuc2l6ZSgpID09IDApCiAgICByZXR1cm4gSlNfRVhDRVBUSU9OOwoKICBkZWZlY3RzLnJlc2l6ZShodWxsSW5kaWNlcy5zaXplKCkpOwogIGN2Ojpjb252ZXhpdHlEZWZlY3RzKCpzLCBodWxsSW5kaWNlcywgZGVmZWN0cyk7CgogIHJldCA9IGpzX2FycmF5X2Zyb20oY3R4LCBkZWZlY3RzKTsKCiAgcmV0dXJuIHJldDsKfQoKc3RhdGljIEpTVmFsdWUKanNfY29udG91cl9jb25zdHJ1Y3RvcihKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IG5ld190YXJnZXQsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QqIGFyZ3YpIHsKICBKU0NvbnRvdXJEYXRhPGRvdWJsZT4qIHY7CiAgSlNWYWx1ZSBvYmogPSBKU19VTkRFRklORUQ7CiAgSlNWYWx1ZSBwcm90bzsKCiAgdiA9IGpzX2FsbG9jYXRlPEpTQ29udG91ckRhdGE8ZG91YmxlPj4oY3R4KTsKICBpZighdikKICAgIHJldHVybiBKU19FWENFUFRJT047CgogIG5ldyh2KSBKU0NvbnRvdXJEYXRhPGRvdWJsZT4oKTsKCiAgLyogdXNpbmcgbmV3X3RhcmdldCB0byBnZXQgdGhlIHByb3RvdHlwZSBpcyBuZWNlc3Nhcnkgd2hlbiB0aGUKICAgICBjbGFzcyBpcyBleHRlbmRlZC4gKi8KICBwcm90byA9IEpTX0dldFByb3BlcnR5U3RyKGN0eCwgbmV3X3RhcmdldCwgInByb3RvdHlwZSIpOwogIGlmKEpTX0lzRXhjZXB0aW9uKHByb3RvKSkKICAgIGdvdG8gZmFpbDsKICBvYmogPSBKU19OZXdPYmplY3RQcm90b0NsYXNzKGN0eCwgcHJvdG8sIGpzX2NvbnRvdXJfY2xhc3NfaWQpOwogIEpTX0ZyZWVWYWx1ZShjdHgsIHByb3RvKTsKICBpZihKU19Jc0V4Y2VwdGlvbihvYmopKQogICAgZ290byBmYWlsOwogIEpTX1NldE9wYXF1ZShvYmosIHYpOwoKICBpZihhcmdjID4gMCkgewogICAgaW50IGk7CgogICAgZm9yKGkgPSAwOyBpIDwgYXJnYzsgaSsrKSB7CiAgICAgIEpTUG9pbnREYXRhPGRvdWJsZT4gcDsKICAgICAgaWYoanNfaXNfYXJyYXkoY3R4LCBhcmd2W2ldKSkgewogICAgICAgIGlmKGpzX2FycmF5X2xlbmd0aChjdHgsIGFyZ3ZbaV0pID4gMCkgewogICAgICAgICAgSlNWYWx1ZSBwdCA9IEpTX0dldFByb3BlcnR5VWludDMyKGN0eCwgYXJndltpXSwgMCk7CgogICAgICAgICAgaWYoanNfaXNfcG9pbnQoY3R4LCBwdCkpIHsKICAgICAgICAgICAganNfYXJyYXlfdG8gLyo8IEpTUG9pbnREYXRhPGRvdWJsZT4gPiovIChjdHgsIGFyZ3ZbaV0sICp2KTsKICAgICAgICAgICAgSlNfRnJlZVZhbHVlKGN0eCwgcHQpOwogICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgIH0KICAgICAgICAgIEpTX0ZyZWVWYWx1ZShjdHgsIHB0KTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIGlmKGpzX3BvaW50X3JlYWQoY3R4LCBhcmd2W2ldLCAmcCkpIHsKICAgICAgICB2LT5wdXNoX2JhY2socCk7CiAgICAgICAgY29udGludWU7CiAgICAgIH0KICAgICAgZ290byBmYWlsOwogICAgfQogIH0KCiAgcmV0dXJuIG9iajsKZmFpbDoKICBqc19kZWFsbG9jYXRlKGN0eCwgdik7CiAgSlNfRnJlZVZhbHVlKGN0eCwgb2JqKTsKICByZXR1cm4gSlNfRVhDRVBUSU9OOwp9Cgp2b2lkCmpzX2NvbnRvdXJfZmluYWxpemVyKEpTUnVudGltZSogcnQsIEpTVmFsdWUgdmFsKSB7CiAgSlNDb250b3VyRGF0YTxkb3VibGU+KiBzOwoKICBpZigocyA9IHN0YXRpY19jYXN0PEpTQ29udG91ckRhdGE8ZG91YmxlPio+KEpTX0dldE9wYXF1ZSh2YWwsIGpzX2NvbnRvdXJfY2xhc3NfaWQpKSkpIHsKICAgIGpzX2RlYWxsb2NhdGUocnQsIHMpOwogIH0KCiAgSlNfRnJlZVZhbHVlUlQocnQsIHZhbCk7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX2NvbnRvdXJfZml0ZWxsaXBzZShKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2KSB7CiAgSlNDb250b3VyRGF0YTxkb3VibGU+KnYsICpwdHI7CiAgY3Y6OlJvdGF0ZWRSZWN0IHJyOwogIEpTVmFsdWUgcmV0ID0gSlNfVU5ERUZJTkVEOwogIGRvdWJsZSBhcmVhOwogIEpTQ29udG91ckRhdGE8ZmxvYXQ+IGNvbnRvdXIsIGVsbGlwc2U7CgogIGlmKCEodiA9IGpzX2NvbnRvdXJfZGF0YShjdHgsIHRoaXNfdmFsKSkpCiAgICByZXR1cm4gSlNfRVhDRVBUSU9OOwoKICBzdGQ6OnRyYW5zZm9ybSh2LT5iZWdpbigpLCB2LT5lbmQoKSwgc3RkOjpiYWNrX2luc2VydGVyKGNvbnRvdXIpLCBbXShjb25zdCBKU1BvaW50RGF0YTxkb3VibGU+JiBwdCkgLT4gSlNQb2ludERhdGE8ZmxvYXQ+IHsKICAgIHJldHVybiBKU1BvaW50RGF0YTxmbG9hdD4ocHQueCwgcHQueSk7CiAgfSk7CgogIHJyID0gY3Y6OmZpdEVsbGlwc2UoY29udG91cik7CgogIGVsbGlwc2UucmVzaXplKDUpOwogIHJyLnBvaW50cyhlbGxpcHNlLmRhdGEoKSk7CgogIHJldCA9IGpzX2NvbnRvdXJfbmV3KGN0eCwgZWxsaXBzZSk7CgogIHJldHVybiByZXQ7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX2NvbnRvdXJfZml0bGluZShKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2KSB7CiAgSlNDb250b3VyRGF0YTxkb3VibGU+KnYsICpwdHI7CiAgSlNWYWx1ZSByZXQgPSBKU19VTkRFRklORUQ7CiAgaW50NjRfdCBkaXN0VHlwZSA9IGN2OjpESVNUX0ZBSVI7CiAgZG91YmxlIHBhcmFtID0gMCwgcmVwcyA9IDAuMDEsIGFlcHMgPSAwLjAxOwogIHN0ZDo6dmVjdG9yPGN2OjpQb2ludD4gY29udG91cjsKICBKU0NvbnRvdXJEYXRhPGZsb2F0PiBwb2ludHM7CiAgY3Y6OlZlYzRmIGxpbmU7CgogIGlmKCEodiA9IGpzX2NvbnRvdXJfZGF0YShjdHgsIHRoaXNfdmFsKSkpCiAgICByZXR1cm4gSlNfRVhDRVBUSU9OOwoKICBpZihhcmdjID4gMCkgewoKICAgIEpTX1RvSW50NjQoY3R4LCAmZGlzdFR5cGUsIGFyZ3ZbMF0pOwoKICAgIGlmKGFyZ2MgPiAxKSB7CiAgICAgIEpTX1RvRmxvYXQ2NChjdHgsICZwYXJhbSwgYXJndlsxXSk7CiAgICAgIGlmKGFyZ2MgPiAyKSB7CiAgICAgICAgSlNfVG9GbG9hdDY0KGN0eCwgJnJlcHMsIGFyZ3ZbMl0pOwogICAgICAgIGlmKGFyZ2MgPiAzKSB7CiAgICAgICAgICBKU19Ub0Zsb2F0NjQoY3R4LCAmYWVwcywgYXJndlszXSk7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfQoKICBzdGQ6OnRyYW5zZm9ybSh2LT5iZWdpbigpLCB2LT5lbmQoKSwgc3RkOjpiYWNrX2luc2VydGVyKGNvbnRvdXIpLCBbXShjb25zdCBKU1BvaW50RGF0YTxkb3VibGU+JiBwdCkgLT4gY3Y6OlBvaW50IHsKICAgIHJldHVybiBjdjo6UG9pbnQocHQueCwgcHQueSk7CiAgfSk7CgogIGN2OjpmaXRMaW5lKGNvbnRvdXIsIGxpbmUsIGRpc3RUeXBlLCBwYXJhbSwgcmVwcywgYWVwcyk7CgogIHBvaW50cy5wdXNoX2JhY2soSlNQb2ludERhdGE8ZmxvYXQ+KGxpbmVbMF0sIGxpbmVbMV0pKTsKICBwb2ludHMucHVzaF9iYWNrKEpTUG9pbnREYXRhPGZsb2F0PihsaW5lWzJdLCBsaW5lWzNdKSk7CgogIHJldCA9IGpzX2NvbnRvdXJfbmV3KGN0eCwgcG9pbnRzKTsKCiAgcmV0dXJuIHJldDsKfQoKc3RhdGljIEpTVmFsdWUKanNfY29udG91cl9hdChKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2KSB7CiAgSlNDb250b3VyRGF0YTxkb3VibGU+KiB2OwogIEpTVmFsdWUgcmV0OwogIEpTVmFsdWUgeCwgeTsKICBpbnQ2NF90IGk7CiAgSlNQb2ludERhdGE8ZG91YmxlPiogcG9pbnQ7CgogIGlmKCEodiA9IGpzX2NvbnRvdXJfZGF0YShjdHgsIHRoaXNfdmFsKSkpCiAgICByZXR1cm4gSlNfRVhDRVBUSU9OOwoKICBKU19Ub0ludDY0KGN0eCwgJmksIGFyZ3ZbMF0pOwoKICBpZihpID49IHYtPnNpemUoKSB8fCBpIDwgMCkKICAgIHJldHVybiBKU19VTkRFRklORUQ7CgogIHJldCA9IGpzX3BvaW50X25ldyhjdHgsICgqdilbaV0ueCwgKCp2KVtpXS55KTsKICByZXR1cm4gcmV0Owp9CgpzdGF0aWMgSlNWYWx1ZQpqc19jb250b3VyX2dldG1hdChKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2KSB7CiAgSlNDb250b3VyRGF0YTxkb3VibGU+KiB2OwogIEpTTWF0RGltZW5zaW9ucyBzaXplOwogIGludDMyX3QgdHlwZTsKICBjdjo6TWF0IG1hdDsKCiAgaWYoISh2ID0ganNfY29udG91cl9kYXRhKGN0eCwgdGhpc192YWwpKSkKICAgIHJldHVybiBKU19FWENFUFRJT047CgogIHNpemUucm93cyA9IDE7CiAgc2l6ZS5jb2xzID0gdi0+c2l6ZSgpOwogIHR5cGUgPSBDVl82NEZDMjsKCiAgbWF0ID0gY3Y6Ok1hdChjdjo6U2l6ZShzaXplKSwgdHlwZSwgc3RhdGljX2Nhc3Q8dm9pZCo+KHYtPmRhdGEoKSkpOwoKICByZXR1cm4ganNfbWF0X3dyYXAoY3R4LCBtYXQpOwp9CgpzdGF0aWMgSlNWYWx1ZQpqc19jb250b3VyX2ludGVyc2VjdGNvbnZleChKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2KSB7CiAgSlNDb250b3VyRGF0YTxkb3VibGU+KnYsICpvdGhlciA9IG51bGxwdHIsICpwdHI7CiAgSlNWYWx1ZSByZXQgPSBKU19VTkRFRklORUQ7CiAgYm9vbCBoYW5kbGVOZXN0ZWQgPSB0cnVlOwogIEpTQ29udG91ckRhdGE8ZmxvYXQ+IGEsIGIsIGludGVyc2VjdGlvbjsKCiAgaWYoISh2ID0ganNfY29udG91cl9kYXRhKGN0eCwgdGhpc192YWwpKSkKICAgIHJldHVybiBKU19FWENFUFRJT047CgogIGlmKGFyZ2MgPiAwKSB7CiAgICBvdGhlciA9IHN0YXRpY19jYXN0PEpTQ29udG91ckRhdGE8ZG91YmxlPio+KEpTX0dldE9wYXF1ZTIoY3R4LCBhcmd2WzBdLCBqc19jb250b3VyX2NsYXNzX2lkKSk7CgogICAgaWYoYXJnYyA+IDEpIHsKICAgICAgaGFuZGxlTmVzdGVkID0gISFKU19Ub0Jvb2woY3R4LCBhcmd2WzFdKTsKICAgIH0KICB9CgogIHN0ZDo6dHJhbnNmb3JtKHYtPmJlZ2luKCksIHYtPmVuZCgpLCBzdGQ6OmJhY2tfaW5zZXJ0ZXIoYSksIFtdKGNvbnN0IEpTUG9pbnREYXRhPGRvdWJsZT4mIHB0KSAtPiBKU1BvaW50RGF0YTxmbG9hdD4gewogICAgcmV0dXJuIEpTUG9pbnREYXRhPGZsb2F0PihwdC54LCBwdC55KTsKICB9KTsKCiAgc3RkOjp0cmFuc2Zvcm0ob3RoZXItPmJlZ2luKCksIG90aGVyLT5lbmQoKSwgc3RkOjpiYWNrX2luc2VydGVyKGIpLCBbXShjb25zdCBKU1BvaW50RGF0YTxkb3VibGU+JiBwdCkgLT4gSlNQb2ludERhdGE8ZmxvYXQ+IHsKICAgIHJldHVybiBKU1BvaW50RGF0YTxmbG9hdD4ocHQueCwgcHQueSk7CiAgfSk7CgogIGN2OjppbnRlcnNlY3RDb252ZXhDb252ZXgoYSwgYiwgaW50ZXJzZWN0aW9uLCBoYW5kbGVOZXN0ZWQpOwoKICByZXQgPSBqc19jb250b3VyX25ldyhjdHgsIGludGVyc2VjdGlvbik7CiAgcmV0dXJuIHJldDsKfQoKc3RhdGljIEpTVmFsdWUKanNfY29udG91cl9pc2NvbnZleChKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2KSB7CiAgSlNDb250b3VyRGF0YTxkb3VibGU+KnYsICpvdGhlciA9IG51bGxwdHIsICpwdHI7CiAgSlNWYWx1ZSByZXQgPSBKU19VTkRFRklORUQ7CiAgYm9vbCBpc0NvbnZleDsKICBKU0NvbnRvdXJEYXRhPGZsb2F0PiBjb250b3VyOwoKICBpZighKHYgPSBqc19jb250b3VyX2RhdGEoY3R4LCB0aGlzX3ZhbCkpKQogICAgcmV0dXJuIEpTX0VYQ0VQVElPTjsKCiAgc3RkOjp0cmFuc2Zvcm0odi0+YmVnaW4oKSwgdi0+ZW5kKCksIHN0ZDo6YmFja19pbnNlcnRlcihjb250b3VyKSwgW10oY29uc3QgSlNQb2ludERhdGE8ZG91YmxlPiYgcHQpIC0+IEpTUG9pbnREYXRhPGZsb2F0PiB7CiAgICByZXR1cm4gSlNQb2ludERhdGE8ZmxvYXQ+KHB0LngsIHB0LnkpOwogIH0pOwoKICBpc0NvbnZleCA9IGN2Ojppc0NvbnRvdXJDb252ZXgoY29udG91cik7CgogIHJldCA9IEpTX05ld0Jvb2woY3R4LCBpc0NvbnZleCk7CgogIHJldHVybiByZXQ7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX2NvbnRvdXJfbGVuZ3RoKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwpIHsKICBKU0NvbnRvdXJEYXRhPGRvdWJsZT4qIHY7CiAgSlNWYWx1ZSByZXQ7CiAgaWYoISh2ID0ganNfY29udG91cl9kYXRhKGN0eCwgdGhpc192YWwpKSkKICAgIHJldHVybiBKU19FWENFUFRJT047CiAgcmV0ID0gSlNfTmV3SW50NjQoY3R4LCB2LT5zaXplKCkpOwogIHJldHVybiByZXQ7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX2NvbnRvdXJfbWluYXJlYXJlY3QoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCogYXJndikgewogIEpTQ29udG91ckRhdGE8ZG91YmxlPip2LCAqb3RoZXIgPSBudWxscHRyLCAqcHRyOwogIEpTVmFsdWUgcmV0ID0gSlNfVU5ERUZJTkVEOwogIGN2OjpSb3RhdGVkUmVjdCBycjsKCiAgSlNDb250b3VyRGF0YTxmbG9hdD4gY29udG91ciwgbWluYXJlYTsKCiAgaWYoISh2ID0ganNfY29udG91cl9kYXRhKGN0eCwgdGhpc192YWwpKSkKICAgIHJldHVybiBKU19FWENFUFRJT047CiAgc3RkOjp0cmFuc2Zvcm0odi0+YmVnaW4oKSwgdi0+ZW5kKCksIHN0ZDo6YmFja19pbnNlcnRlcihjb250b3VyKSwgW10oY29uc3QgSlNQb2ludERhdGE8ZG91YmxlPiYgcHQpIC0+IEpTUG9pbnREYXRhPGZsb2F0PiB7CiAgICByZXR1cm4gSlNQb2ludERhdGE8ZmxvYXQ+KHB0LngsIHB0LnkpOwogIH0pOwogIHJyID0gY3Y6Om1pbkFyZWFSZWN0KGNvbnRvdXIpOwogIG1pbmFyZWEucmVzaXplKDUpOwogIHJyLnBvaW50cyhtaW5hcmVhLmRhdGEoKSk7CgogIHJldCA9IGpzX2NvbnRvdXJfbmV3KGN0eCwgbWluYXJlYSk7CiAgcmV0dXJuIHJldDsKfQoKc3RhdGljIEpTVmFsdWUKanNfY29udG91cl9taW5lbmNsb3NpbmdjaXJjbGUoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCogYXJndikgewogIEpTQ29udG91ckRhdGE8ZG91YmxlPip2LCAqb3RoZXIgPSBudWxscHRyLCAqcHRyOwogIEpTVmFsdWUgcmV0ID0gSlNfVU5ERUZJTkVEOwogIGN2OjpSb3RhdGVkUmVjdCBycjsKCiAgSlNDb250b3VyRGF0YTxmbG9hdD4gY29udG91cjsKICBKU1BvaW50RGF0YTxmbG9hdD4gY2VudGVyOwogIGZsb2F0IHJhZGl1czsKCiAgaWYoISh2ID0ganNfY29udG91cl9kYXRhKGN0eCwgdGhpc192YWwpKSkKICAgIHJldHVybiBKU19FWENFUFRJT047CgogIHN0ZDo6dHJhbnNmb3JtKHYtPmJlZ2luKCksIHYtPmVuZCgpLCBzdGQ6OmJhY2tfaW5zZXJ0ZXIoY29udG91ciksIFtdKGNvbnN0IEpTUG9pbnREYXRhPGRvdWJsZT4mIHB0KSAtPiBKU1BvaW50RGF0YTxmbG9hdD4gewogICAgcmV0dXJuIEpTUG9pbnREYXRhPGZsb2F0PihwdC54LCBwdC55KTsKICB9KTsKCiAgY3Y6Om1pbkVuY2xvc2luZ0NpcmNsZShjb250b3VyLCBjZW50ZXIsIHJhZGl1cyk7CgogIHJldCA9IEpTX05ld09iamVjdChjdHgpOwoKICBKU19TZXRQcm9wZXJ0eVN0cihjdHgsIHJldCwgImNlbnRlciIsIGpzX3BvaW50X25ldyhjdHgsIGNlbnRlci54LCBjZW50ZXIueSkpOwogIEpTX1NldFByb3BlcnR5U3RyKGN0eCwgcmV0LCAicmFkaXVzIiwgSlNfTmV3RmxvYXQ2NChjdHgsIHJhZGl1cykpOwoKICByZXR1cm4gcmV0Owp9CgpzdGF0aWMgSlNWYWx1ZQpqc19jb250b3VyX21pbmVuY2xvc2luZ3RyaWFuZ2xlKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QqIGFyZ3YpIHsKICBKU0NvbnRvdXJEYXRhPGRvdWJsZT4qdiwgKm90aGVyID0gbnVsbHB0ciwgKnB0cjsKICBKU1ZhbHVlIHJldCA9IEpTX1VOREVGSU5FRDsKICBjdjo6Um90YXRlZFJlY3QgcnI7CgogIEpTQ29udG91ckRhdGE8ZmxvYXQ+IGNvbnRvdXIsIHRyaWFuZ2xlOwogIEpTUG9pbnREYXRhPGZsb2F0PiBjZW50ZXI7CiAgZmxvYXQgcmFkaXVzOwoKICBpZighKHYgPSBqc19jb250b3VyX2RhdGEoY3R4LCB0aGlzX3ZhbCkpKQogICAgcmV0dXJuIEpTX0VYQ0VQVElPTjsKCiAgc3RkOjp0cmFuc2Zvcm0odi0+YmVnaW4oKSwgdi0+ZW5kKCksIHN0ZDo6YmFja19pbnNlcnRlcihjb250b3VyKSwgW10oY29uc3QgSlNQb2ludERhdGE8ZG91YmxlPiYgcHQpIC0+IEpTUG9pbnREYXRhPGZsb2F0PiB7CiAgICByZXR1cm4gSlNQb2ludERhdGE8ZmxvYXQ+KHB0LngsIHB0LnkpOwogIH0pOwoKICBjdjo6bWluRW5jbG9zaW5nVHJpYW5nbGUoY29udG91ciwgdHJpYW5nbGUpOwoKICByZXQgPSBqc19jb250b3VyX25ldyhjdHgsIHRyaWFuZ2xlKTsKCiAgcmV0dXJuIHJldDsKfQoKc3RhdGljIEpTVmFsdWUKanNfY29udG91cl9wb2ludHBvbHlnb250ZXN0KEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QqIGFyZ3YpIHsKICBKU0NvbnRvdXJEYXRhPGRvdWJsZT4qdiwgKm90aGVyID0gbnVsbHB0ciwgKnB0cjsKICBKU1ZhbHVlIHJldCA9IEpTX1VOREVGSU5FRDsKICBjdjo6Um90YXRlZFJlY3QgcnI7CiAgSlNQb2ludERhdGE8ZmxvYXQ+IHB0OwogIGJvb2wgbWVhc3VyZURpc3QgPSBmYWxzZTsKICBKU0NvbnRvdXJEYXRhPGZsb2F0PiBjb250b3VyLCB0cmlhbmdsZTsKICBKU1BvaW50RGF0YTxkb3VibGU+IHBvaW50OwogIGRvdWJsZSByZXR2YWw7CgogIGlmKCEodiA9IGpzX2NvbnRvdXJfZGF0YShjdHgsIHRoaXNfdmFsKSkpCiAgICByZXR1cm4gSlNfRVhDRVBUSU9OOwoKICBpZihhcmdjID4gMCkgewogICAgcG9pbnQgPSBqc19wb2ludF9nZXQoY3R4LCBhcmd2WzBdKTsKCiAgICBwdC54ID0gcG9pbnQueDsKICAgIHB0LnkgPSBwb2ludC55OwoKICAgIGlmKGFyZ2MgPiAxKSB7CiAgICAgIG1lYXN1cmVEaXN0ID0gISFKU19Ub0Jvb2woY3R4LCBhcmd2WzFdKTsKICAgIH0KICB9CgogIHN0ZDo6dHJhbnNmb3JtKHYtPmJlZ2luKCksIHYtPmVuZCgpLCBzdGQ6OmJhY2tfaW5zZXJ0ZXIoY29udG91ciksIFtdKGNvbnN0IEpTUG9pbnREYXRhPGRvdWJsZT4mIHB0KSAtPiBKU1BvaW50RGF0YTxmbG9hdD4gewogICAgcmV0dXJuIEpTUG9pbnREYXRhPGZsb2F0PihwdC54LCBwdC55KTsKICB9KTsKCiAgcmV0dmFsID0gY3Y6OnBvaW50UG9seWdvblRlc3QoY29udG91ciwgcHQsIG1lYXN1cmVEaXN0KTsKCiAgcmV0ID0gSlNfTmV3RmxvYXQ2NChjdHgsIHJldHZhbCk7CgogIHJldHVybiByZXQ7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX2NvbnRvdXJfcHNpbXBsKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QqIGFyZ3YsIGludCBtYWdpYykgewogIEpTQ29udG91ckRhdGE8ZG91YmxlPiogcyA9IGpzX2NvbnRvdXJfZGF0YShjdHgsIHRoaXNfdmFsKTsKICBpbnQzMl90IHNoaWZ0ID0gMTsKICB1aW50MzJfdCBzaXplID0gcy0+c2l6ZSgpOwogIEpTVmFsdWUgcmV0ID0gSlNfVU5ERUZJTkVEOwogIEpTQ29udG91ckRhdGE8ZG91YmxlPiByOwogIGRvdWJsZSBhcmcxID0gMCwgYXJnMiA9IDA7CiAgZG91YmxlKiBpdDsKICBKU1BvaW50RGF0YTxkb3VibGU+KiBzdGFydCA9ICYoKnMpWzBdOwogIEpTUG9pbnREYXRhPGRvdWJsZT4qIGVuZCA9IHN0YXJ0ICsgc2l6ZTsKICByLnJlc2l6ZShzaXplKTsKICBpdCA9IChkb3VibGUqKSZyWzBdOwoKICBpZighcykKICAgIHJldHVybiBKU19FWENFUFRJT047CgogIGlmKGFyZ2MgPiAwKSB7CiAgICBKU19Ub0Zsb2F0NjQoY3R4LCAmYXJnMSwgYXJndlswXSk7CiAgICBpZihhcmdjID4gMSkgewogICAgICBKU19Ub0Zsb2F0NjQoY3R4LCAmYXJnMiwgYXJndlsxXSk7CiAgICB9CiAgfQoKICBpZihtYWdpYyA9PSAwKSB7CiAgICBpZihhcmcxID09IDApCiAgICAgIGFyZzEgPSAyOwogICAgaXQgPSBwc2ltcGw6OnNpbXBsaWZ5X3JldW1hbm5fd2l0a2FtPDI+KChkb3VibGUqKXN0YXJ0LCAoZG91YmxlKillbmQsIGFyZzEsIGl0KTsKICB9IGVsc2UgaWYobWFnaWMgPT0gMSkgewogICAgaWYoYXJnMSA9PSAwKQogICAgICBhcmcxID0gMjsKICAgIGlmKGFyZzIgPT0gMCkKICAgICAgYXJnMiA9IDEwOwogICAgaXQgPSBwc2ltcGw6OnNpbXBsaWZ5X29waGVpbTwyPigoZG91YmxlKilzdGFydCwgKGRvdWJsZSopZW5kLCBhcmcxLCBhcmcyLCBpdCk7CiAgfSBlbHNlIGlmKG1hZ2ljID09IDIpIHsKICAgIGlmKGFyZzEgPT0gMCkKICAgICAgYXJnMSA9IDI7CiAgICBpZihhcmcyID09IDApCiAgICAgIGFyZzIgPSAxMDsKICAgIGl0ID0gcHNpbXBsOjpzaW1wbGlmeV9sYW5nPDI+KChkb3VibGUqKXN0YXJ0LCAoZG91YmxlKillbmQsIGFyZzEsIGFyZzIsIGl0KTsKICB9IGVsc2UgaWYobWFnaWMgPT0gMykgewogICAgaWYoYXJnMSA9PSAwKQogICAgICBhcmcxID0gMjsKICAgIGl0ID0gcHNpbXBsOjpzaW1wbGlmeV9kb3VnbGFzX3BldWNrZXI8Mj4oKGRvdWJsZSopc3RhcnQsIChkb3VibGUqKWVuZCwgYXJnMSwgaXQpOwogIH0gZWxzZSBpZihtYWdpYyA9PSA0KSB7CiAgICBpZihhcmcxID09IDApCiAgICAgIGFyZzEgPSAyOwogICAgaXQgPSBwc2ltcGw6OnNpbXBsaWZ5X250aF9wb2ludDwyPigoZG91YmxlKilzdGFydCwgKGRvdWJsZSopZW5kLCBhcmcxLCBpdCk7CiAgfSBlbHNlIGlmKG1hZ2ljID09IDUpIHsKICAgIGlmKGFyZzEgPT0gMCkKICAgICAgYXJnMSA9IDI7CiAgICBpdCA9IHBzaW1wbDo6c2ltcGxpZnlfcmFkaWFsX2Rpc3RhbmNlPDI+KChkb3VibGUqKXN0YXJ0LCAoZG91YmxlKillbmQsIGFyZzEsIGl0KTsKICB9IGVsc2UgaWYobWFnaWMgPT0gNikgewogICAgaWYoYXJnMSA9PSAwKQogICAgICBhcmcxID0gMjsKICAgIGlmKGFyZzIgPT0gMCkKICAgICAgYXJnMiA9IDE7CiAgICBpdCA9IHBzaW1wbDo6c2ltcGxpZnlfcGVycGVuZGljdWxhcl9kaXN0YW5jZTwyPigoZG91YmxlKilzdGFydCwgKGRvdWJsZSopZW5kLCBhcmcxLCBhcmcyLCBpdCk7CiAgfQogIHNpemUgPSBpdCAtIChkb3VibGUqKSZyWzBdOwogIHIucmVzaXplKHNpemUgLyAyKTsKICByZXQgPSBqc19jb250b3VyX25ldzxkb3VibGU+KGN0eCwgcik7CiAgcmV0dXJuIHJldDsKfQoKc3RhdGljIEpTVmFsdWUKanNfY29udG91cl9wdXNoKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QqIGFyZ3YpIHsKICBKU0NvbnRvdXJEYXRhPGRvdWJsZT4qIHY7CiAgaW50IGk7CiAgZG91YmxlIHgsIHk7CiAgSlNWYWx1ZUNvbnN0IHh2LCB5djsKICBKU1BvaW50RGF0YTxkb3VibGU+IHBvaW50OwoKICBpZighKHYgPSBqc19jb250b3VyX2RhdGEoY3R4LCB0aGlzX3ZhbCkpKQogICAgcmV0dXJuIEpTX0VYQ0VQVElPTjsKCiAgZm9yKGkgPSAwOyBpIDwgYXJnYzsgaSsrKSB7CiAgICBpZihKU19Jc09iamVjdChhcmd2W2ldKSkgewogICAgICB4diA9IEpTX0dldFByb3BlcnR5U3RyKGN0eCwgYXJndltpXSwgIngiKTsKICAgICAgeXYgPSBKU19HZXRQcm9wZXJ0eVN0cihjdHgsIGFyZ3ZbaV0sICJ5Iik7CiAgICB9IGVsc2UgaWYoanNfaXNfYXJyYXkoY3R4LCBhcmd2W2ldKSkgewoKICAgICAgeHYgPSBKU19HZXRQcm9wZXJ0eVVpbnQzMihjdHgsIGFyZ3ZbaV0sIDApOwogICAgICB5diA9IEpTX0dldFByb3BlcnR5VWludDMyKGN0eCwgYXJndltpXSwgMSk7CiAgICB9IGVsc2UgaWYoaSArIDEgPCBhcmdjKSB7CiAgICAgIHh2ID0gYXJndltpKytdOwogICAgICB5diA9IGFyZ3ZbaV07CiAgICB9CiAgICBKU19Ub0Zsb2F0NjQoY3R4LCAmcG9pbnQueCwgeHYpOwogICAgSlNfVG9GbG9hdDY0KGN0eCwgJnBvaW50LnksIHl2KTsKCiAgICB2LT5wdXNoX2JhY2socG9pbnQpOwogIH0KICByZXR1cm4gSlNfVU5ERUZJTkVEOwp9CgpzdGF0aWMgSlNWYWx1ZQpqc19jb250b3VyX3BvcChKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2KSB7CiAgSlNDb250b3VyRGF0YTxkb3VibGU+KiB2OwogIEpTVmFsdWUgcmV0OwogIEpTVmFsdWUgeCwgeTsKICBKU1BvaW50RGF0YTxkb3VibGU+KnB0ciwgcG9pbnQ7CiAgaW50NjRfdCBuID0gMDsKCiAgaWYoISh2ID0ganNfY29udG91cl9kYXRhKGN0eCwgdGhpc192YWwpKSkKICAgIHJldHVybiBKU19FWENFUFRJT047CiAgbiA9IHYtPnNpemUoKTsKICBpZihuID4gMCkgewogICAgcG9pbnQgPSAoKnYpW24gLSAxXTsKICAgIHYtPnBvcF9iYWNrKCk7CiAgfSBlbHNlIHsKICAgIHJldHVybiBKU19FWENFUFRJT047CiAgfQoKICByZXQgPSBqc19wb2ludF9uZXcoY3R4LCBwb2ludC54LCBwb2ludC55KTsKCiAgcmV0dXJuIHJldDsKfQoKc3RhdGljIEpTVmFsdWUKanNfY29udG91cl91bnNoaWZ0KEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QqIGFyZ3YpIHsKICBKU0NvbnRvdXJEYXRhPGRvdWJsZT4qIHY7CiAgaW50IGk7CiAgZG91YmxlIHgsIHk7CiAgSlNWYWx1ZUNvbnN0IHh2LCB5djsKICBKU1BvaW50RGF0YTxkb3VibGU+IHBvaW50OwoKICBpZighKHYgPSBqc19jb250b3VyX2RhdGEoY3R4LCB0aGlzX3ZhbCkpKQogICAgcmV0dXJuIEpTX0VYQ0VQVElPTjsKCiAgZm9yKGkgPSAwOyBpIDwgYXJnYzsgaSsrKSB7CiAgICBpZihKU19Jc09iamVjdChhcmd2W2ldKSkgewogICAgICB4diA9IEpTX0dldFByb3BlcnR5U3RyKGN0eCwgYXJndltpXSwgIngiKTsKICAgICAgeXYgPSBKU19HZXRQcm9wZXJ0eVN0cihjdHgsIGFyZ3ZbaV0sICJ5Iik7CiAgICB9IGVsc2UgaWYoanNfaXNfYXJyYXkoY3R4LCBhcmd2W2ldKSkgewoKICAgICAgeHYgPSBKU19HZXRQcm9wZXJ0eVVpbnQzMihjdHgsIGFyZ3ZbaV0sIDApOwogICAgICB5diA9IEpTX0dldFByb3BlcnR5VWludDMyKGN0eCwgYXJndltpXSwgMSk7CiAgICB9IGVsc2UgaWYoaSArIDEgPCBhcmdjKSB7CiAgICAgIHh2ID0gYXJndltpKytdOwogICAgICB5diA9IGFyZ3ZbaV07CiAgICB9CiAgICBKU19Ub0Zsb2F0NjQoY3R4LCAmcG9pbnQueCwgeHYpOwogICAgSlNfVG9GbG9hdDY0KGN0eCwgJnBvaW50LnksIHl2KTsKCiAgICB2LT5pbnNlcnQodi0+YmVnaW4oKSwgcG9pbnQpOwogIH0KICByZXR1cm4gSlNfVU5ERUZJTkVEOwp9CgpzdGF0aWMgSlNWYWx1ZQpqc19jb250b3VyX3NoaWZ0KEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QqIGFyZ3YpIHsKICBKU0NvbnRvdXJEYXRhPGRvdWJsZT4qIHY7CiAgSlNWYWx1ZSByZXQ7CiAgSlNWYWx1ZSB4LCB5OwogIEpTUG9pbnREYXRhPGRvdWJsZT4qcHRyLCBwb2ludDsKICBpbnQ2NF90IG4gPSAwOwoKICBpZighKHYgPSBqc19jb250b3VyX2RhdGEoY3R4LCB0aGlzX3ZhbCkpKQogICAgcmV0dXJuIEpTX0VYQ0VQVElPTjsKICBuID0gdi0+c2l6ZSgpOwogIGlmKG4gPiAwKSB7CiAgICBwb2ludCA9ICgqdilbMF07CiAgICB2LT5lcmFzZSh2LT5iZWdpbigpKTsKICB9IGVsc2UgewogICAgcmV0dXJuIEpTX0VYQ0VQVElPTjsKICB9CgogIHJldCA9IGpzX3BvaW50X25ldyhjdHgsIHBvaW50LngsIHBvaW50LnkpOwoKICByZXR1cm4gcmV0Owp9CgpzdGF0aWMgSlNWYWx1ZQpqc19jb250b3VyX2NvbmNhdChKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2KSB7CiAgSlNDb250b3VyRGF0YTxkb3VibGU+KnYsICpvdGhlciwgKnI7CiAgaW50IGk7CiAgZG91YmxlIHgsIHk7CiAgSlNWYWx1ZSByZXQ7CiAgSlNWYWx1ZUNvbnN0IHh2LCB5djsKICBKU1BvaW50RGF0YTxkb3VibGU+IHBvaW50OwoKICBpZighKHYgPSBqc19jb250b3VyX2RhdGEoY3R4LCB0aGlzX3ZhbCkpKQogICAgcmV0dXJuIEpTX0VYQ0VQVElPTjsKCiAgaWYoIShvdGhlciA9IGpzX2NvbnRvdXJfZGF0YShjdHgsIGFyZ3ZbMF0pKSkKICAgIHJldHVybiBKU19FWENFUFRJT047CgogIHJldCA9IGpzX2NvbnRvdXJfbmV3KGN0eCwgKnYpOwoKICByID0ganNfY29udG91cl9kYXRhKGN0eCwgcmV0KTsKICBzdGQ6OmNvcHkob3RoZXItPmNiZWdpbigpLCBvdGhlci0+Y2VuZCgpLCBzdGQ6OmJhY2tfaW5zZXJ0ZXIoKnIpKTsKICByZXR1cm4gcmV0Owp9CgpzdGF0aWMgSlNWYWx1ZQpqc19jb250b3VyX3JvdGF0ZWRyZWN0YW5nbGVpbnRlcnNlY3Rpb24oSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCogYXJndikgewogIEpTQ29udG91ckRhdGE8ZG91YmxlPip2LCAqb3RoZXIgPSBudWxscHRyLCAqcHRyOwogIEpTVmFsdWUgcmV0ID0gSlNfVU5ERUZJTkVEOwogIGJvb2wgaGFuZGxlTmVzdGVkID0gdHJ1ZTsKICBKU0NvbnRvdXJEYXRhPGZsb2F0PiBhLCBiLCBpbnRlcnNlY3Rpb247CgogIGlmKCEodiA9IGpzX2NvbnRvdXJfZGF0YShjdHgsIHRoaXNfdmFsKSkpCiAgICByZXR1cm4gSlNfRVhDRVBUSU9OOwoKICBpZihhcmdjID4gMCkgewogICAgb3RoZXIgPSBzdGF0aWNfY2FzdDxKU0NvbnRvdXJEYXRhPGRvdWJsZT4qPihKU19HZXRPcGFxdWUyKGN0eCwgYXJndlswXSwganNfY29udG91cl9jbGFzc19pZCkpOwogIH0KCiAgc3RkOjp0cmFuc2Zvcm0odi0+YmVnaW4oKSwgdi0+ZW5kKCksIHN0ZDo6YmFja19pbnNlcnRlcihhKSwgW10oY29uc3QgSlNQb2ludERhdGE8ZG91YmxlPiYgcHQpIC0+IEpTUG9pbnREYXRhPGZsb2F0PiB7CiAgICByZXR1cm4gSlNQb2ludERhdGE8ZmxvYXQ+KHB0LngsIHB0LnkpOwogIH0pOwoKICBzdGQ6OnRyYW5zZm9ybShvdGhlci0+YmVnaW4oKSwgb3RoZXItPmVuZCgpLCBzdGQ6OmJhY2tfaW5zZXJ0ZXIoYiksIFtdKGNvbnN0IEpTUG9pbnREYXRhPGRvdWJsZT4mIHB0KSAtPiBKU1BvaW50RGF0YTxmbG9hdD4gewogICAgcmV0dXJuIEpTUG9pbnREYXRhPGZsb2F0PihwdC54LCBwdC55KTsKICB9KTsKICB7CiAgICBjdjo6Um90YXRlZFJlY3QgcnJhKGFbMF0sIGFbMV0sIGFbMl0pOwogICAgY3Y6OlJvdGF0ZWRSZWN0IHJyYihiWzBdLCBiWzFdLCBiWzJdKTsKCiAgICBjdjo6cm90YXRlZFJlY3RhbmdsZUludGVyc2VjdGlvbihycmEsIHJyYiwgaW50ZXJzZWN0aW9uKTsKCiAgICByZXQgPSBqc19jb250b3VyX25ldyhjdHgsIGludGVyc2VjdGlvbik7CiAgfQogIHJldHVybiByZXQ7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX2NvbnRvdXJfcm90YXRlcG9pbnRzKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QqIGFyZ3YpIHsKICBKU0NvbnRvdXJEYXRhPGRvdWJsZT4qIHMgPSBqc19jb250b3VyX2RhdGEoY3R4LCB0aGlzX3ZhbCk7CiAgaW50MzJfdCBzaGlmdCA9IDE7CiAgdWludDMyX3Qgc2l6ZSA9IHMtPnNpemUoKTsKICBpZighcykKICAgIHJldHVybiBKU19FWENFUFRJT047CiAgaWYoYXJnYyA+IDApCiAgICBKU19Ub0ludDMyKGN0eCwgJnNoaWZ0LCBhcmd2WzBdKTsKCiAgc2hpZnQgJT0gc2l6ZTsKCiAgaWYoc2hpZnQgPiAwKSB7CiAgICBzdGQ6OnJvdGF0ZShzLT5iZWdpbigpLCBzLT5iZWdpbigpICsgc2hpZnQsIHMtPmVuZCgpKTsKCiAgfSBlbHNlIGlmKHNoaWZ0IDwgMCkgewogICAgc3RkOjpyb3RhdGUocy0+cmJlZ2luKCksIHMtPnJiZWdpbigpICsgKC1zaGlmdCksIHMtPnJlbmQoKSk7CiAgfQogIHJldHVybiBKU1ZhbHVlKHRoaXNfdmFsKTsKfQoKc3RhdGljIEpTVmFsdWUKanNfY29udG91cl90b2FycmF5KEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QqIGFyZ3YpIHsKICBKU0NvbnRvdXJEYXRhPGRvdWJsZT4qIHM7CiAgdWludDMyX3QgaSwgc2l6ZTsKICBKU1ZhbHVlIHJldCA9IEpTX1VOREVGSU5FRDsKCiAgaWYoIShzID0ganNfY29udG91cl9kYXRhKGN0eCwgdGhpc192YWwpKSkKICAgIHJldHVybiBKU19FWENFUFRJT047CiAgc2l6ZSA9IHMtPnNpemUoKTsKICByZXQgPSBKU19OZXdBcnJheShjdHgpOwoKICBmb3IoaSA9IDA7IGkgPCBzaXplOyBpKyspIHsgSlNfU2V0UHJvcGVydHlVaW50MzIoY3R4LCByZXQsIGksIGpzX3BvaW50X2Nsb25lKGN0eCwgKCpzKVtpXSkpOyB9CgogIHJldHVybiByZXQ7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX2NvbnRvdXJfdG9zdHJpbmcoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCogYXJndiwgaW50IG1hZ2ljKSB7CiAgSlNDb250b3VyRGF0YTxkb3VibGU+KiBzOwogIHN0ZDo6b3N0cmluZ3N0cmVhbSBvczsKICBpbnQgaSA9IDA7CiAgaW50IHByZWMgPSA5OwogIGludDMyX3QgZmxhZ3M7CgogIGlmKCEocyA9IGpzX2NvbnRvdXJfZGF0YShjdHgsIHRoaXNfdmFsKSkpCiAgICByZXR1cm4gSlNfRVhDRVBUSU9OOwoKICBpZihtYWdpYyA9PSAxICYmICEoZmxhZ3MgJiAweDEwMCkpCiAgICBvcyA8PCAibmV3IENvbnRvdXIoIjsKCiAgaWYoYXJnYyA+IDApCiAgICBKU19Ub0ludDMyKGN0eCwgJmZsYWdzLCBhcmd2WzBdKTsKICBlbHNlCiAgICBmbGFncyA9IDA7CgogIGlmKCEoZmxhZ3MgJiAweDEwMCkpCiAgICBvcyA8PCAnWyc7CgogIHN0ZDo6Zm9yX2VhY2gocy0+YmVnaW4oKSwgcy0+ZW5kKCksIFsmaSwgJm9zLCBmbGFncywgcHJlY10oY29uc3QgSlNQb2ludERhdGE8ZG91YmxlPiYgcG9pbnQpIHsKICAgIGlmKGkgPiAwKQogICAgICBvcyA8PCAoKGZsYWdzICYgMHgxMCkgPyAiICIgOiAiLCIpOwoKICAgIGlmKCEoZmxhZ3MgJiAweDEwMCkpCiAgICAgIG9zIDw8ICgoZmxhZ3MgJiAweDAzKSA9PSAwID8gInsiIDogIlsiKTsKCiAgICBpZihmbGFncyAmIDB4MDMpCiAgICAgIG9zIDw8IHN0ZDo6c2V0cHJlY2lzaW9uKHByZWMpIDw8IHBvaW50LnggPDwgIiwiIDw8IHBvaW50Lnk7CiAgICBlbHNlCiAgICAgIG9zIDw8ICJ4OiIgPDwgc3RkOjpzZXRwcmVjaXNpb24ocHJlYykgPDwgcG9pbnQueCA8PCAiLHk6IiA8PCBwb2ludC55OwoKICAgIGlmKCEoZmxhZ3MgJiAweDEwMCkpCiAgICAgIG9zIDw8ICgoZmxhZ3MgJiAweDAzKSA9PSAwID8gIn0iIDogIl0iKTsKCiAgICBpKys7CiAgfSk7CiAgaWYoIShmbGFncyAmIDB4MTAwKSkKICAgIG9zIDw8ICddJzsgLy8gPDwgc3RkOjplbmRsOwoKICBpZihtYWdpYyA9PSAxICYmICEoZmxhZ3MgJiAweDEwMCkpCiAgICBvcyA8PCAiKSI7CgogIHJldHVybiBKU19OZXdTdHJpbmcoY3R4LCBvcy5zdHIoKS5jX3N0cigpKTsKfQoKc3RhdGljIEpTVmFsdWUKanNfY29udG91cl9yZWN0KEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QqIGFyZ3YpIHsKICBKU1ZhbHVlIHJldCA9IEpTX1VOREVGSU5FRDsKICBKU0NvbnRvdXJEYXRhPGRvdWJsZT4gcG9pbnRzOwogIEpTUmVjdERhdGE8ZG91YmxlPiBzID0ganNfcmVjdF9nZXQoY3R4LCBhcmd2WzBdKTsKCiAgcG9pbnRzLnB1c2hfYmFjayhKU1BvaW50RGF0YTxkb3VibGU+KHMueCwgcy55KSk7CiAgcG9pbnRzLnB1c2hfYmFjayhKU1BvaW50RGF0YTxkb3VibGU+KHMueCArIHMud2lkdGgsIHMueSkpOwogIHBvaW50cy5wdXNoX2JhY2soSlNQb2ludERhdGE8ZG91YmxlPihzLnggKyBzLndpZHRoLCBzLnkgKyBzLmhlaWdodCkpOwogIHBvaW50cy5wdXNoX2JhY2soSlNQb2ludERhdGE8ZG91YmxlPihzLngsIHMueSArIHMuaGVpZ2h0KSk7CiAgcG9pbnRzLnB1c2hfYmFjayhKU1BvaW50RGF0YTxkb3VibGU+KHMueCwgcy55KSk7CgogIHJldCA9IGpzX2NvbnRvdXJfbmV3PGRvdWJsZT4oY3R4LCBwb2ludHMpOwogIHJldHVybiByZXQ7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX2NvbnRvdXJfZ2V0KEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBtYWdpYykgewogIEpTQ29udG91ckRhdGE8ZG91YmxlPiogY29udG91cjsKICBKU1ZhbHVlIHJldCA9IEpTX1VOREVGSU5FRDsKCiAgaWYoIShjb250b3VyID0ganNfY29udG91cl9kYXRhKGN0eCwgdGhpc192YWwpKSkKICAgIHJldHVybiBKU19FWENFUFRJT047CgogIHN3aXRjaChtYWdpYykgewogICAgY2FzZSAwOiB7CiAgICAgIEpTQ29udG91ckRhdGE8ZmxvYXQ+IHBvaW50czsKICAgICAgSlNSZWN0RGF0YTxmbG9hdD4gcmVjdDsKCiAgICAgIHBvaW50cy5yZXNpemUoY29udG91ci0+c2l6ZSgpKTsKCiAgICAgIHN0ZDo6Y29weShjb250b3VyLT5iZWdpbigpLCBjb250b3VyLT5lbmQoKSwgcG9pbnRzLmJlZ2luKCkpOwoKICAgICAgcmVjdCA9IGN2Ojpib3VuZGluZ1JlY3QocG9pbnRzKTsKCiAgICAgIHJldCA9IEpTX05ld0Zsb2F0NjQoY3R4LCAoZG91YmxlKXJlY3Qud2lkdGggLyByZWN0LmhlaWdodCk7CiAgICAgIGJyZWFrOwogICAgfQogICAgY2FzZSAxOiB7CiAgICAgIGRvdWJsZSBhcmVhID0gY3Y6OmNvbnRvdXJBcmVhKCpjb250b3VyKTsKICAgICAgSlNSZWN0RGF0YTxkb3VibGU+IHJlY3QgPSBjdjo6Ym91bmRpbmdSZWN0KCpjb250b3VyKTsKCiAgICAgIHJldCA9IEpTX05ld0Zsb2F0NjQoY3R4LCBhcmVhIC8gKHJlY3Qud2lkdGggKiByZWN0LmhlaWdodCkpOwogICAgICBicmVhazsKICAgIH0KICAgIGNhc2UgMjogewogICAgICBkb3VibGUgYXJlYSA9IGN2Ojpjb250b3VyQXJlYSgqY29udG91cik7CiAgICAgIEpTQ29udG91ckRhdGE8ZG91YmxlPiBodWxsOwogICAgICBjdjo6Y29udmV4SHVsbCgqY29udG91ciwgaHVsbCk7CiAgICAgIGRvdWJsZSBodWxsQXJlYSA9IGN2Ojpjb250b3VyQXJlYShodWxsKTsKCiAgICAgIHJldCA9IEpTX05ld0Zsb2F0NjQoY3R4LCBhcmVhIC8gY3Y6OmNvbnRvdXJBcmVhKGh1bGwpKTsKICAgICAgYnJlYWs7CiAgICB9CiAgICBjYXNlIDM6IHsKICAgICAgZG91YmxlIGFyZWEgPSBjdjo6Y29udG91ckFyZWEoKmNvbnRvdXIpOwoKICAgICAgcmV0ID0gSlNfTmV3RmxvYXQ2NChjdHgsIHN0ZDo6c3FydCg0ICogYXJlYSAvIDMuMTQxNTkyNjUzNTg5NzkzMjM4NDYpKTsKICAgICAgYnJlYWs7CiAgICB9CiAgICBjYXNlIDQ6IHsKICAgICAgY3Y6OlJvdGF0ZWRSZWN0IHJlY3QgPSBjdjo6Zml0RWxsaXBzZSgqY29udG91cik7CgogICAgICByZXQgPSBKU19OZXdGbG9hdDY0KGN0eCwgcmVjdC5hbmdsZSk7CiAgICAgIGJyZWFrOwogICAgfQogIH0KICByZXR1cm4gcmV0Owp9CgpzdGF0aWMgSlNWYWx1ZQpqc19jb250b3VyX2luc3BlY3QoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCogYXJndikgewogIEpTQ29udG91ckRhdGE8ZG91YmxlPiogY29udG91cjsKCiAgaWYoIShjb250b3VyID0ganNfY29udG91cl9kYXRhKGN0eCwgdGhpc192YWwpKSkKICAgIHJldHVybiBKU19FWENFUFRJT047CgogIEpTVmFsdWUgb2JqID0gSlNfTmV3T2JqZWN0UHJvdG8oY3R4LCBjb250b3VyX3Byb3RvKTsKCiAgSlNfRGVmaW5lUHJvcGVydHlWYWx1ZVN0cihjdHgsIG9iaiwgImxlbmd0aCIsIEpTX05ld1VpbnQzMihjdHgsIGNvbnRvdXItPnNpemUoKSksIEpTX1BST1BfRU5VTUVSQUJMRSk7CiAgcmV0dXJuIG9iajsKfQoKZXh0ZXJuICJDIiB7CgpKU0NsYXNzRGVmIGpzX2NvbnRvdXJfY2xhc3MgPSB7CiAgICAuY2xhc3NfbmFtZSA9ICJDb250b3VyIiwKICAgIC5maW5hbGl6ZXIgPSBqc19jb250b3VyX2ZpbmFsaXplciwKfTsKCkpTVmFsdWUKanNfY29udG91cl9pdGVyYXRvcihKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2LCBpbnQgbWFnaWMpIHsKICBKU0NvbnRvdXJEYXRhPGRvdWJsZT4qIHM7CgogIGlmKCEocyA9IGpzX2NvbnRvdXJfZGF0YShjdHgsIHRoaXNfdmFsKSkpCiAgICByZXR1cm4gSlNfRVhDRVBUSU9OOwoKICByZXR1cm4ganNfcG9pbnRfaXRlcmF0b3JfbmV3KGN0eCwgcmFuZ2UoKnMpLCBtYWdpYyk7Cn0KCmNvbnN0IEpTQ0Z1bmN0aW9uTGlzdEVudHJ5IGpzX2NvbnRvdXJfcHJvdG9fZnVuY3NbXSA9IHsKICAgIEpTX0NGVU5DX0RFRigicHVzaCIsIDEsIGpzX2NvbnRvdXJfcHVzaCksCiAgICBKU19DRlVOQ19ERUYoInBvcCIsIDAsIGpzX2NvbnRvdXJfcG9wKSwKICAgIEpTX0NGVU5DX0RFRigidW5zaGlmdCIsIDEsIGpzX2NvbnRvdXJfdW5zaGlmdCksCiAgICBKU19DRlVOQ19ERUYoInNoaWZ0IiwgMCwganNfY29udG91cl9zaGlmdCksCiAgICBKU19DRlVOQ19ERUYoImNvbmNhdCIsIDEsIGpzX2NvbnRvdXJfY29uY2F0KSwKICAgIEpTX0NGVU5DX0RFRigiYXQiLCAxLCBqc19jb250b3VyX2F0KSwKICAgIEpTX0NGVU5DX0RFRigiZ2V0TWF0IiwgMCwganNfY29udG91cl9nZXRtYXQpLAogICAgSlNfQ0dFVFNFVF9ERUYoImxlbmd0aCIsIGpzX2NvbnRvdXJfbGVuZ3RoLCBOVUxMKSwKICAgIEpTX0NHRVRTRVRfREVGKCJhcmVhIiwganNfY29udG91cl9hcmVhLCBOVUxMKSwKICAgIEpTX0NHRVRTRVRfREVGKCJidWZmZXIiLCBqc19jb250b3VyX2J1ZmZlciwgTlVMTCksCiAgICBKU19DR0VUU0VUX0RFRigiYXJyYXkiLCBqc19jb250b3VyX2FycmF5LCBOVUxMKSwKICAgIEpTX0NHRVRTRVRfTUFHSUNfREVGKCJhc3BlY3RSYXRpbyIsIGpzX2NvbnRvdXJfZ2V0LCBOVUxMLCAwKSwKICAgIEpTX0NHRVRTRVRfTUFHSUNfREVGKCJleHRlbnQiLCBqc19jb250b3VyX2dldCwgTlVMTCwgMSksCiAgICBKU19DR0VUU0VUX01BR0lDX0RFRigic29saWRpdHkiLCBqc19jb250b3VyX2dldCwgTlVMTCwgMiksCiAgICBKU19DR0VUU0VUX01BR0lDX0RFRigiZXF1aXZhbGVudERpYW1ldGVyIiwganNfY29udG91cl9nZXQsIE5VTEwsIDMpLAogICAgSlNfQ0dFVFNFVF9NQUdJQ19ERUYoIm9yaWVudGF0aW9uIiwganNfY29udG91cl9nZXQsIE5VTEwsIDQpLAoKICAgIEpTX0NGVU5DX0RFRigiYXBwcm94UG9seURQIiwgMSwganNfY29udG91cl9hcHByb3hwb2x5ZHApLAogICAgSlNfQ0ZVTkNfREVGKCJjb252ZXhIdWxsIiwgMSwganNfY29udG91cl9jb252ZXhodWxsKSwKICAgIEpTX0NGVU5DX0RFRigiYm91bmRpbmdSZWN0IiwgMCwganNfY29udG91cl9ib3VuZGluZ3JlY3QpLAogICAgSlNfQ0ZVTkNfREVGKCJmaXRFbGxpcHNlIiwgMCwganNfY29udG91cl9maXRlbGxpcHNlKSwKICAgIEpTX0NGVU5DX0RFRigiZml0TGluZSIsIDAsIGpzX2NvbnRvdXJfZml0bGluZSksCiAgICBKU19DRlVOQ19ERUYoImludGVyc2VjdENvbnZleCIsIDAsIGpzX2NvbnRvdXJfaW50ZXJzZWN0Y29udmV4KSwKICAgIEpTX0NGVU5DX0RFRigiaXNDb252ZXgiLCAwLCBqc19jb250b3VyX2lzY29udmV4KSwKICAgIEpTX0NGVU5DX0RFRigibWluQXJlYVJlY3QiLCAwLCBqc19jb250b3VyX21pbmFyZWFyZWN0KSwKICAgIEpTX0NGVU5DX0RFRigibWluRW5jbG9zaW5nQ2lyY2xlIiwgMCwganNfY29udG91cl9taW5lbmNsb3NpbmdjaXJjbGUpLAogICAgSlNfQ0ZVTkNfREVGKCJtaW5FbmNsb3NpbmdUcmlhbmdsZSIsIDAsIGpzX2NvbnRvdXJfbWluZW5jbG9zaW5ndHJpYW5nbGUpLAogICAgSlNfQ0ZVTkNfREVGKCJwb2ludFBvbHlnb25UZXN0IiwgMCwganNfY29udG91cl9wb2ludHBvbHlnb250ZXN0KSwKICAgIEpTX0NGVU5DX0RFRigicm90YXRlZFJlY3RhbmdsZUludGVyc2VjdGlvbiIsIDAsIGpzX2NvbnRvdXJfcm90YXRlZHJlY3RhbmdsZWludGVyc2VjdGlvbiksCiAgICBKU19DRlVOQ19ERUYoImFyY0xlbmd0aCIsIDAsIGpzX2NvbnRvdXJfYXJjbGVuZ3RoKSwKICAgIEpTX0NGVU5DX0RFRigicm90YXRlUG9pbnRzIiwgMSwganNfY29udG91cl9yb3RhdGVwb2ludHMpLAogICAgSlNfQ0ZVTkNfREVGKCJjb252ZXhpdHlEZWZlY3RzIiwgMSwganNfY29udG91cl9jb252ZXhpdHlkZWZlY3RzKSwKICAgIEpTX0NGVU5DX01BR0lDX0RFRigic2ltcGxpZnlSZXVtYW5uV2l0a2FtIiwgMCwganNfY29udG91cl9wc2ltcGwsIDApLAogICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJzaW1wbGlmeU9waGVpbSIsIDAsIGpzX2NvbnRvdXJfcHNpbXBsLCAxKSwKICAgIEpTX0NGVU5DX01BR0lDX0RFRigic2ltcGxpZnlMYW5nIiwgMCwganNfY29udG91cl9wc2ltcGwsIDIpLAogICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJzaW1wbGlmeURvdWdsYXNQZXVja2VyIiwgMCwganNfY29udG91cl9wc2ltcGwsIDMpLAogICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJzaW1wbGlmeU50aFBvaW50IiwgMCwganNfY29udG91cl9wc2ltcGwsIDQpLAogICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJzaW1wbGlmeVJhZGlhbERpc3RhbmNlIiwgMCwganNfY29udG91cl9wc2ltcGwsIDUpLAogICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJzaW1wbGlmeVBlcnBlbmRpY3VsYXJEaXN0YW5jZSIsIDAsIGpzX2NvbnRvdXJfcHNpbXBsLCA2KSwKICAgIEpTX0NGVU5DX0RFRigidG9BcnJheSIsIDAsIGpzX2NvbnRvdXJfdG9hcnJheSksCiAgICBKU19DRlVOQ19NQUdJQ19ERUYoInRvU3RyaW5nIiwgMCwganNfY29udG91cl90b3N0cmluZywgMCksCiAgICBKU19DRlVOQ19NQUdJQ19ERUYoInRvU291cmNlIiwgMCwganNfY29udG91cl90b3N0cmluZywgMSksCiAgICBKU19DRlVOQ19NQUdJQ19ERUYoImxpbmVzIiwgMCwganNfY29udG91cl9pdGVyYXRvciwgTkVYVF9MSU5FKSwKICAgIEpTX0NGVU5DX01BR0lDX0RFRigicG9pbnRzIiwgMCwganNfY29udG91cl9pdGVyYXRvciwgTkVYVF9QT0lOVCksCgogICAgSlNfQUxJQVNfREVGKCJbU3ltYm9sLml0ZXJhdG9yXSIsICJwb2ludHMiKSwKICAgIEpTX0FMSUFTX0RFRigic2l6ZSIsICJsZW5ndGgiKSwKICAgIC8vICAgIEpTX0FMSUFTX0RFRigiW1N5bWJvbC50b1N0cmluZ1RhZ10iLCAidG9TdHJpbmciKSwKCiAgICBKU19QUk9QX1NUUklOR19ERUYoIltTeW1ib2wudG9TdHJpbmdUYWddIiwgIkNvbnRvdXIiLCBKU19QUk9QX0NPTkZJR1VSQUJMRSksCgp9Owpjb25zdCBKU0NGdW5jdGlvbkxpc3RFbnRyeSBqc19jb250b3VyX3N0YXRpY19mdW5jc1tdID0gewogICAgSlNfQ0ZVTkNfREVGKCJmcm9tUmVjdCIsIDEsIGpzX2NvbnRvdXJfcmVjdCksCiAgICBKU19QUk9QX0lOVDMyX0RFRigiRk9STUFUX1hZIiwgMHgwMCwgMCksCiAgICBKU19QUk9QX0lOVDMyX0RFRigiRk9STUFUXzAxIiwgMHgwMiwgMCksCiAgICBKU19QUk9QX0lOVDMyX0RFRigiRk9STUFUX1NQQUNFIiwgMHgxMCwgMCksCiAgICBKU19QUk9QX0lOVDMyX0RFRigiRk9STUFUX0NPTU1BIiwgMHgwMCwgMCksCiAgICBKU19QUk9QX0lOVDMyX0RFRigiRk9STUFUX0JSQUNLRVQiLCAweDAwLCAwKSwKICAgIEpTX1BST1BfSU5UMzJfREVGKCJGT1JNQVRfTk9CUkFDS0VUIiwgMHgxMDAsIDApLAp9OwoKaW50CmpzX2NvbnRvdXJfaW5pdChKU0NvbnRleHQqIGN0eCwgSlNNb2R1bGVEZWYqIG0pIHsKCiAgaWYoanNfY29udG91cl9jbGFzc19pZCA9PSAwKSB7CiAgICAvKiBjcmVhdGUgdGhlIENvbnRvdXIgY2xhc3MgKi8KICAgIEpTX05ld0NsYXNzSUQoJmpzX2NvbnRvdXJfY2xhc3NfaWQpOwogICAgSlNfTmV3Q2xhc3MoSlNfR2V0UnVudGltZShjdHgpLCBqc19jb250b3VyX2NsYXNzX2lkLCAmanNfY29udG91cl9jbGFzcyk7CgogICAgY29udG91cl9wcm90byA9IEpTX05ld09iamVjdChjdHgpOwogICAgSlNfU2V0UHJvcGVydHlGdW5jdGlvbkxpc3QoY3R4LCBjb250b3VyX3Byb3RvLCBqc19jb250b3VyX3Byb3RvX2Z1bmNzLCBjb3VudG9mKGpzX2NvbnRvdXJfcHJvdG9fZnVuY3MpKTsKICAgIEpTX1NldENsYXNzUHJvdG8oY3R4LCBqc19jb250b3VyX2NsYXNzX2lkLCBjb250b3VyX3Byb3RvKTsKCiAgICBjb250b3VyX2NsYXNzID0gSlNfTmV3Q0Z1bmN0aW9uMihjdHgsIGpzX2NvbnRvdXJfY29uc3RydWN0b3IsICJDb250b3VyIiwgMiwgSlNfQ0ZVTkNfY29uc3RydWN0b3IsIDApOwogICAgLyogc2V0IHByb3RvLmNvbnN0cnVjdG9yIGFuZCBjdG9yLnByb3RvdHlwZSAqLwogICAgSlNfU2V0Q29uc3RydWN0b3IoY3R4LCBjb250b3VyX2NsYXNzLCBjb250b3VyX3Byb3RvKTsKICAgIEpTX1NldFByb3BlcnR5RnVuY3Rpb25MaXN0KGN0eCwgY29udG91cl9jbGFzcywganNfY29udG91cl9zdGF0aWNfZnVuY3MsIGNvdW50b2YoanNfY29udG91cl9zdGF0aWNfZnVuY3MpKTsKICB9CiAganNfc2V0X2luc3BlY3RfbWV0aG9kKGN0eCwgY29udG91cl9wcm90bywganNfY29udG91cl9pbnNwZWN0KTsKCiAgewogICAgSlNWYWx1ZSBnbG9iYWwgPSBKU19HZXRHbG9iYWxPYmplY3QoY3R4KTsKICAgIGZsb2F0NjRfYXJyYXkgPSBKU19HZXRQcm9wZXJ0eVN0cihjdHgsIGdsb2JhbCwgIkZsb2F0NjRBcnJheSIpOwogIH0KCiAgaWYobSkKICAgIEpTX1NldE1vZHVsZUV4cG9ydChjdHgsIG0sICJDb250b3VyIiwgY29udG91cl9jbGFzcyk7CiAgLyogIGVsc2UKICAgICAgSlNfU2V0UHJvcGVydHlTdHIoY3R4LCAqc3RhdGljX2Nhc3Q8SlNWYWx1ZSo+KG0pLCAiQ29udG91ciIsIGNvbnRvdXJfY2xhc3MpOyovCiAgcmV0dXJuIDA7Cn0KCmV4dGVybiAiQyIgVklTSUJMRSB2b2lkCmpzX2NvbnRvdXJfZXhwb3J0KEpTQ29udGV4dCogY3R4LCBKU01vZHVsZURlZiogbSkgewogIEpTX0FkZE1vZHVsZUV4cG9ydChjdHgsIG0sICJDb250b3VyIik7Cn0KCiNpZiBkZWZpbmVkKEpTX0NPTlRPVVJfTU9EVUxFKQojZGVmaW5lIEpTX0lOSVRfTU9EVUxFIC8qVklTSUJMRSovIGpzX2luaXRfbW9kdWxlCiNlbHNlCiNkZWZpbmUgSlNfSU5JVF9NT0RVTEUgLypWSVNJQkxFKi8ganNfaW5pdF9tb2R1bGVfY29udG91cgojZW5kaWYKCkpTTW9kdWxlRGVmKgpKU19JTklUX01PRFVMRShKU0NvbnRleHQqIGN0eCwgY29uc3QgY2hhciogbW9kdWxlX25hbWUpIHsKICBKU01vZHVsZURlZiogbTsKICBtID0gSlNfTmV3Q01vZHVsZShjdHgsIG1vZHVsZV9uYW1lLCAmanNfY29udG91cl9pbml0KTsKICBpZighbSkKICAgIHJldHVybiBOVUxMOwogIGpzX2NvbnRvdXJfZXhwb3J0KGN0eCwgbSk7CiAgcmV0dXJuIG07Cn0KfQoAAAAAAAAAAFl+AAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAyyAAAAAAAADLIAAAAAAAAAAAAAAAAPC/"
				],
				[
					65,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAABZfgAAI2luY2x1ZGUgImpzYmluZGluZ3MuaHBwIgojaW5jbHVkZSAianNfcG9pbnQuaHBwIgojaW5jbHVkZSAianNfcmVjdC5ocHAiCiNpbmNsdWRlICJqc19jb250b3VyLmhwcCIKI2luY2x1ZGUgImpzX2FycmF5LmhwcCIKI2luY2x1ZGUgImpzX3R5cGVkX2FycmF5LmhwcCIKI2luY2x1ZGUgImpzX2FsbG9jLmhwcCIKI2luY2x1ZGUgImpzX3BvaW50X2l0ZXJhdG9yLmhwcCIKI2luY2x1ZGUgInV0aWwuaHBwIgoKI2luY2x1ZGUgPG9wZW5jdjIvY29yZS9jb3JlLmhwcD4KI2luY2x1ZGUgPG9wZW5jdjIvaW1ncHJvYy9pbWdwcm9jLmhwcD4KCi8vI2luY2x1ZGUgInBsb3QtY3YuaHBwIgovLyNpbmNsdWRlICJjb2xvci5ocHAiCiNpbmNsdWRlICJnZW9tZXRyeS5ocHAiCiNpbmNsdWRlICJwc2ltcGwuaHBwIgoKI2luY2x1ZGUgPGlvbWFuaXA+CiNpbmNsdWRlIDxyYW5nZXM+CgpleHRlcm4gIkMiIHsKSlNWYWx1ZSBjb250b3VyX3Byb3RvID0gSlNfVU5ERUZJTkVELCBjb250b3VyX2NsYXNzID0gSlNfVU5ERUZJTkVEOwpWSVNJQkxFIEpTQ2xhc3NJRCBqc19jb250b3VyX2NsYXNzX2lkID0gMDsKfQoKc3RhdGljIEpTVmFsdWUgZmxvYXQ2NF9hcnJheTsKCi8vIHVzaW5nIG5hbWVzcGFjZSBjdjsKCkpTVmFsdWUKanNfY29udG91cl9uZXcoSlNDb250ZXh0KiBjdHgsIGNvbnN0IEpTQ29udG91ckRhdGE8ZG91YmxlPiYgcG9pbnRzKSB7CiAgSlNWYWx1ZSByZXQ7CiAgSlNDb250b3VyRGF0YTxkb3VibGU+KiBjb250b3VyOwoKICByZXQgPSBKU19OZXdPYmplY3RQcm90b0NsYXNzKGN0eCwgY29udG91cl9wcm90bywganNfY29udG91cl9jbGFzc19pZCk7CiAgY29udG91ciA9IGpzX2FsbG9jYXRlPEpTQ29udG91ckRhdGE8ZG91YmxlPj4oY3R4KTsKCiAgbmV3KGNvbnRvdXIpIEpTQ29udG91ckRhdGE8ZG91YmxlPigpOwoKICBjb250b3VyLT5yZXNpemUocG9pbnRzLnNpemUoKSk7CiAgdHJhbnNmb3JtX3BvaW50cyhwb2ludHMuY2JlZ2luKCksIHBvaW50cy5jZW5kKCksIGNvbnRvdXItPmJlZ2luKCkpOwoKICBKU19TZXRPcGFxdWUocmV0LCBjb250b3VyKTsKICByZXR1cm4gcmV0Owp9CgpKU1ZhbHVlCmpzX2NvbnRvdXJfbW92ZShKU0NvbnRleHQqIGN0eCwgY29uc3QgSlNDb250b3VyRGF0YTxkb3VibGU+JiYgcG9pbnRzKSB7CiAgSlNWYWx1ZSByZXQ7CiAgSlNDb250b3VyRGF0YTxkb3VibGU+KiBjb250b3VyOwoKICByZXQgPSBKU19OZXdPYmplY3RQcm90b0NsYXNzKGN0eCwgY29udG91cl9wcm90bywganNfY29udG91cl9jbGFzc19pZCk7CiAgY29udG91ciA9IGpzX2FsbG9jYXRlPEpTQ29udG91ckRhdGE8ZG91YmxlPj4oY3R4KTsKCiAgbmV3KGNvbnRvdXIpIEpTQ29udG91ckRhdGE8ZG91YmxlPihzdGQ6Om1vdmUocG9pbnRzKSk7CgogIC8qICBjb250b3VyLT5yZXNpemUocG9pbnRzLnNpemUoKSk7CiAgICB0cmFuc2Zvcm1fcG9pbnRzKHBvaW50cy5jYmVnaW4oKSwgcG9pbnRzLmNlbmQoKSwgY29udG91ci0+YmVnaW4oKSk7Ki8KCiAgSlNfU2V0T3BhcXVlKHJldCwgY29udG91cik7CiAgcmV0dXJuIHJldDsKfQoKc3RhdGljIEpTVmFsdWUKanNfY29udG91cl9idWZmZXIoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCkgewogIEpTQ29udG91ckRhdGE8ZG91YmxlPiogY29udG91cjsKICBzdGQ6OnJhbmdlczo6c3VicmFuZ2U8dWludDhfdCo+IHI7CiAgSlNWYWx1ZSByZXQgPSBKU19VTkRFRklORUQ7CgogIGlmKChjb250b3VyID0ganNfY29udG91cl9kYXRhKGN0eCwgdGhpc192YWwpKSA9PSBudWxscHRyKQogICAgcmV0dXJuIHJldDsKCiAgSlNWYWx1ZSogdmFscHRyID0gc3RhdGljX2Nhc3Q8SlNWYWx1ZSo+KGpzX21hbGxvYyhjdHgsIHNpemVvZihKU1ZhbHVlKSkpOwogICp2YWxwdHIgPSBKU19EdXBWYWx1ZShjdHgsIHRoaXNfdmFsKTsKCiAgciA9IHJhbmdlPHVpbnQ4X3QqPigqY29udG91cik7CgogIHJldCA9IEpTX05ld0FycmF5QnVmZmVyKAogICAgICBjdHgsCiAgICAgIHIuYmVnaW4oKSwKICAgICAgci5zaXplKCksCiAgICAgIFtdKEpTUnVudGltZSogcnQsIHZvaWQqIG9wYXF1ZSwgdm9pZCogcHRyKSB7CiAgICAgICAgSlNfRnJlZVZhbHVlUlQocnQsICooSlNWYWx1ZSopb3BhcXVlKTsKICAgICAgICBqc19mcmVlX3J0KHJ0LCBvcGFxdWUpOwogICAgICB9LAogICAgICB2YWxwdHIsCiAgICAgIGZhbHNlKTsKCiAgcmV0dXJuIHJldDsKfQoKc3RhdGljIEpTVmFsdWUKanNfY29udG91cl9hcnJheShKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsKSB7CiAgSlNWYWx1ZSByZXQ7CiAgSlNWYWx1ZUNvbnN0IGJ1ZmZlciA9IGpzX2NvbnRvdXJfYnVmZmVyKGN0eCwgdGhpc192YWwpOwoKICByZXQgPSBKU19DYWxsQ29uc3RydWN0b3IoY3R4LCBmbG9hdDY0X2FycmF5LCAxLCAmYnVmZmVyKTsKICByZXR1cm4gcmV0Owp9CgpzdGF0aWMgSlNWYWx1ZQpqc19jb250b3VyX2FwcHJveHBvbHlkcChKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2KSB7CiAgSlNWYWx1ZSByZXQgPSBKU19VTkRFRklORUQ7CiAgZG91YmxlIGVwc2lsb247CiAgYm9vbCBjbG9zZWQgPSBmYWxzZTsKICBzdGQ6OnZlY3Rvcjxjdjo6UG9pbnQ+IGN1cnZlOwogIEpTQ29udG91ckRhdGE8ZmxvYXQ+IGFwcHJveEN1cnZlOwogIEpTQ29udG91ckRhdGE8ZG91YmxlPipvdXQsICp2OwoKICB2ID0ganNfY29udG91cl9kYXRhKGN0eCwgdGhpc192YWwpOwoKICBpZighdikKICAgIHJldHVybiBKU19FWENFUFRJT047CiAgb3V0ID0gc3RhdGljX2Nhc3Q8SlNDb250b3VyRGF0YTxkb3VibGU+Kj4oSlNfR2V0T3BhcXVlMihjdHgsIGFyZ3ZbMF0sIGpzX2NvbnRvdXJfY2xhc3NfaWQpKTsKCiAgaWYoYXJnYyA+IDEpIHsKICAgIEpTX1RvRmxvYXQ2NChjdHgsICZlcHNpbG9uLCBhcmd2WzFdKTsKCiAgICBpZihhcmdjID4gMikgewogICAgICBjbG9zZWQgPSAhIUpTX1RvQm9vbChjdHgsIGFyZ3ZbMl0pOwogICAgfQogIH0KCiAgc3RkOjp0cmFuc2Zvcm0odi0+YmVnaW4oKSwgdi0+ZW5kKCksIHN0ZDo6YmFja19pbnNlcnRlcihjdXJ2ZSksIFtdKGNvbnN0IEpTUG9pbnREYXRhPGRvdWJsZT4mIHB0KSAtPiBjdjo6UG9pbnQgewogICAgcmV0dXJuIGN2OjpQb2ludChwdC54LCBwdC55KTsKICB9KTsKCiAgY3Y6OmFwcHJveFBvbHlEUChjdXJ2ZSwgYXBwcm94Q3VydmUsIGVwc2lsb24sIGNsb3NlZCk7CgogIHN0ZDo6dHJhbnNmb3JtKGFwcHJveEN1cnZlLmJlZ2luKCksCiAgICAgICAgICAgICAgICAgYXBwcm94Q3VydmUuZW5kKCksCiAgICAgICAgICAgICAgICAgc3RkOjpiYWNrX2luc2VydGVyKCpvdXQpLAogICAgICAgICAgICAgICAgIFtdKGNvbnN0IEpTUG9pbnREYXRhPGZsb2F0PiYgcHQpIC0+IEpTUG9pbnREYXRhPGRvdWJsZT4geyByZXR1cm4gSlNQb2ludERhdGE8ZG91YmxlPihwdC54LCBwdC55KTsgfSk7CgogIHJldHVybiBKU19VTkRFRklORUQ7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX2NvbnRvdXJfYXJjbGVuZ3RoKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QqIGFyZ3YpIHsKICBKU0NvbnRvdXJEYXRhPGRvdWJsZT4qdiwgKm90aGVyID0gbnVsbHB0ciwgKnB0cjsKICBKU1ZhbHVlIHJldCA9IEpTX1VOREVGSU5FRDsKICBKU1BvaW50RGF0YTxmbG9hdD4gcHQ7CiAgYm9vbCBjbG9zZWQgPSBmYWxzZTsKICBKU0NvbnRvdXJEYXRhPGZsb2F0PiBjb250b3VyOwogIEpTUG9pbnREYXRhPGRvdWJsZT4qIHBvaW50OwogIGRvdWJsZSByZXR2YWw7CgogIHYgPSBqc19jb250b3VyX2RhdGEoY3R4LCB0aGlzX3ZhbCk7CiAgaWYoIXYpCgogICAgcmV0dXJuIEpTX0VYQ0VQVElPTjsKCiAgaWYoYXJnYyA+IDApIHsKICAgIGNsb3NlZCA9ICEhSlNfVG9Cb29sKGN0eCwgYXJndlswXSk7CiAgfQoKICBzdGQ6OnRyYW5zZm9ybSh2LT5iZWdpbigpLCB2LT5lbmQoKSwgc3RkOjpiYWNrX2luc2VydGVyKGNvbnRvdXIpLCBbXShjb25zdCBKU1BvaW50RGF0YTxkb3VibGU+JiBwdCkgLT4gSlNQb2ludERhdGE8ZmxvYXQ+IHsKICAgIHJldHVybiBKU1BvaW50RGF0YTxmbG9hdD4ocHQueCwgcHQueSk7CiAgfSk7CgogIHJldHZhbCA9IGN2OjphcmNMZW5ndGgoY29udG91ciwgY2xvc2VkKTsKCiAgcmV0ID0gSlNfTmV3RmxvYXQ2NChjdHgsIHJldHZhbCk7CgogIHJldHVybiByZXQ7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX2NvbnRvdXJfYXJlYShKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsKSB7CiAgSlNDb250b3VyRGF0YTxkb3VibGU+KiB2OwogIEpTVmFsdWUgcmV0ID0gSlNfVU5ERUZJTkVEOwogIGRvdWJsZSBhcmVhOwogIEpTQ29udG91ckRhdGE8ZmxvYXQ+IGNvbnRvdXI7CiAgdiA9IGpzX2NvbnRvdXJfZGF0YShjdHgsIHRoaXNfdmFsKTsKICBpZighdikKICAgIHJldHVybiBKU19FWENFUFRJT047CiAgc3RkOjp0cmFuc2Zvcm0odi0+YmVnaW4oKSwgdi0+ZW5kKCksIHN0ZDo6YmFja19pbnNlcnRlcihjb250b3VyKSwgW10oY29uc3QgSlNQb2ludERhdGE8ZG91YmxlPiYgcHQpIC0+IEpTUG9pbnREYXRhPGZsb2F0PiB7CiAgICByZXR1cm4gSlNQb2ludERhdGE8ZmxvYXQ+KHB0LngsIHB0LnkpOwogIH0pOwogIGFyZWEgPSBjdjo6Y29udG91ckFyZWEoY29udG91cik7CiAgcmV0ID0gSlNfTmV3RmxvYXQ2NChjdHgsIGFyZWEpOwogIHJldHVybiByZXQ7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX2NvbnRvdXJfYm91bmRpbmdyZWN0KEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QqIGFyZ3YpIHsKICBKU1ZhbHVlIHJldCA9IEpTX1VOREVGSU5FRDsKICBjdjo6UmVjdDJmIHJlY3Q7CiAgSlNDb250b3VyRGF0YTxmbG9hdD4gY3VydmU7CiAgSlNDb250b3VyRGF0YTxkb3VibGU+KiB2OwogIEpTUmVjdERhdGE8ZG91YmxlPiByOwoKICB2ID0ganNfY29udG91cl9kYXRhKGN0eCwgdGhpc192YWwpOwoKICBpZighdikKICAgIHJldHVybiBKU19FWENFUFRJT047CgogIHN0ZDo6dHJhbnNmb3JtKHYtPmJlZ2luKCksIHYtPmVuZCgpLCBzdGQ6OmJhY2tfaW5zZXJ0ZXIoY3VydmUpLCBbXShjb25zdCBKU1BvaW50RGF0YTxkb3VibGU+JiBwdCkgLT4gSlNQb2ludERhdGE8ZmxvYXQ+IHsKICAgIHJldHVybiBKU1BvaW50RGF0YTxmbG9hdD4ocHQueCwgcHQueSk7CiAgfSk7CgogIHJlY3QgPSBjdjo6Ym91bmRpbmdSZWN0KGN1cnZlKTsKCiAgcmV0ID0ganNfbmV3KGN0eCwgIlJlY3QiKTsKICAvLyByZXQgPSBKU19OZXdPYmplY3QoY3R4LCByZWN0X3Byb3RvLCBqc19yZWN0X2NsYXNzX2lkKTsKICAvLyByID0ganNfYWxsb2NhdGU8IEpTUmVjdERhdGE8ZG91YmxlPiA+KGN0eCk7CiAgLy8qciA9IHJlY3Q7CiAgLy8gSlNfU2V0T3BhcXVlKHJldCwgcik7CiAgLy8KICByID0gcmVjdDsKCiAganNfcmVjdF93cml0ZShjdHgsIHJldCwgcik7CgogIHJldHVybiByZXQ7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX2NvbnRvdXJfY2VudGVyKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwpIHsKICBKU0NvbnRvdXJEYXRhPGRvdWJsZT4qIHY7CiAgSlNWYWx1ZSByZXQgPSBKU19VTkRFRklORUQ7CiAgZG91YmxlIGFyZWE7CiAgdiA9IGpzX2NvbnRvdXJfZGF0YShjdHgsIHRoaXNfdmFsKTsKICBpZighdikKICAgIHJldHVybiBKU19FWENFUFRJT047CiAgewogICAgc3RkOjp2ZWN0b3I8Y3Y6OlBvaW50PiBwb2ludHM7CiAgICBwb2ludHMucmVzaXplKHYtPnNpemUoKSk7CiAgICBzdGQ6OmNvcHkodi0+YmVnaW4oKSwgdi0+ZW5kKCksIHBvaW50cy5iZWdpbigpKTsKICAgIGN2OjpNb21lbnRzIG11ID0gY3Y6Om1vbWVudHMocG9pbnRzKTsKICAgIGN2OjpQb2ludCBjZW50cm9pZCA9IGN2OjpQb2ludChtdS5tMTAgLyBtdS5tMDAsIG11Lm0wMSAvIG11Lm0wMCk7CgogICAgcmV0ID0ganNfcG9pbnRfbmV3KGN0eCwgY2VudHJvaWQueCwgY2VudHJvaWQueSk7CiAgfQoKICByZXR1cm4gcmV0Owp9CgpzdGF0aWMgSlNWYWx1ZQpqc19jb250b3VyX2NvbnZleGh1bGwoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCogYXJndikgewogIEpTVmFsdWUgcmV0ID0gSlNfVU5ERUZJTkVEOwogIGJvb2wgY2xvY2t3aXNlID0gZmFsc2UsIHJldHVyblBvaW50cyA9IHRydWU7CiAgSlNDb250b3VyRGF0YTxmbG9hdD4gY3VydmUsIGh1bGw7CiAgc3RkOjp2ZWN0b3I8aW50PiBodWxsSW5kaWNlczsKICBKU0NvbnRvdXJEYXRhPGRvdWJsZT4qb3V0LCAqdjsKCiAgdiA9IGpzX2NvbnRvdXJfZGF0YShjdHgsIHRoaXNfdmFsKTsKCiAgaWYoIXYpCiAgICByZXR1cm4gSlNfRVhDRVBUSU9OOwoKICBpZihhcmdjID4gMCkgewogICAgY2xvY2t3aXNlID0gISFKU19Ub0Jvb2woY3R4LCBhcmd2WzBdKTsKCiAgICBpZihhcmdjID4gMSkgewogICAgICByZXR1cm5Qb2ludHMgPSAhIUpTX1RvQm9vbChjdHgsIGFyZ3ZbMV0pOwogICAgfQogIH0KCiAgc3RkOjp0cmFuc2Zvcm0odi0+YmVnaW4oKSwgdi0+ZW5kKCksIHN0ZDo6YmFja19pbnNlcnRlcihjdXJ2ZSksIFtdKGNvbnN0IEpTUG9pbnREYXRhPGRvdWJsZT4mIHB0KSAtPiBKU1BvaW50RGF0YTxmbG9hdD4gewogICAgcmV0dXJuIEpTUG9pbnREYXRhPGZsb2F0PihwdC54LCBwdC55KTsKICB9KTsKCiAgaWYocmV0dXJuUG9pbnRzKQogICAgY3Y6OmNvbnZleEh1bGwoY3VydmUsIGh1bGwsIGNsb2Nrd2lzZSwgdHJ1ZSk7CiAgZWxzZQogICAgY3Y6OmNvbnZleEh1bGwoY3VydmUsIGh1bGxJbmRpY2VzLCBjbG9ja3dpc2UsIGZhbHNlKTsKCiAgaWYocmV0dXJuUG9pbnRzKSB7CiAgICByZXQgPSBqc19jb250b3VyX25ldyhjdHgsIGh1bGwpOwogIH0gZWxzZSB7CiAgICB1aW50MzJfdCBpLCBzaXplID0gaHVsbEluZGljZXMuc2l6ZSgpOwoKICAgIHJldCA9IEpTX05ld0FycmF5KGN0eCk7CgogICAgZm9yKGkgPSAwOyBpIDwgc2l6ZTsgaSsrKSB7IEpTX1NldFByb3BlcnR5VWludDMyKGN0eCwgcmV0LCBpLCBKU19OZXdJbnQzMihjdHgsIGh1bGxJbmRpY2VzW2ldKSk7IH0KICB9CgogIHJldHVybiByZXQ7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX2NvbnRvdXJfY29udmV4aXR5ZGVmZWN0cyhKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2KSB7CiAgSlNDb250b3VyRGF0YTxkb3VibGU+KiBzID0ganNfY29udG91cl9kYXRhKGN0eCwgdGhpc192YWwpOwogIEpTVmFsdWUgcmV0ID0gSlNfVU5ERUZJTkVEOwoKICBzdGQ6OnZlY3RvcjxpbnQ+IGh1bGxJbmRpY2VzOwogIHN0ZDo6dmVjdG9yPGN2OjpWZWM0aT4gZGVmZWN0czsKCiAgaWYoYXJnYyA+IDApIHsKICAgIGludDY0X3QgbiA9IGpzX2FycmF5X3RvKGN0eCwgYXJndlswXSwgaHVsbEluZGljZXMpOwogICAgaWYobiA9PSAwKQogICAgICByZXR1cm4gSlNfRVhDRVBUSU9OOwogIH0KCiAgaWYocy0+c2l6ZSgpID09IDAgfHwgaHVsbEluZGljZXMuc2l6ZSgpID09IDApCiAgICByZXR1cm4gSlNfRVhDRVBUSU9OOwoKICBkZWZlY3RzLnJlc2l6ZShodWxsSW5kaWNlcy5zaXplKCkpOwogIGN2Ojpjb252ZXhpdHlEZWZlY3RzKCpzLCBodWxsSW5kaWNlcywgZGVmZWN0cyk7CgogIHJldCA9IGpzX2FycmF5X2Zyb20oY3R4LCBkZWZlY3RzKTsKCiAgcmV0dXJuIHJldDsKfQoKc3RhdGljIEpTVmFsdWUKanNfY29udG91cl9jb25zdHJ1Y3RvcihKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IG5ld190YXJnZXQsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QqIGFyZ3YpIHsKICBKU0NvbnRvdXJEYXRhPGRvdWJsZT4qIHY7CiAgSlNWYWx1ZSBvYmogPSBKU19VTkRFRklORUQ7CiAgSlNWYWx1ZSBwcm90bzsKCiAgdiA9IGpzX2FsbG9jYXRlPEpTQ29udG91ckRhdGE8ZG91YmxlPj4oY3R4KTsKICBpZighdikKICAgIHJldHVybiBKU19FWENFUFRJT047CgogIG5ldyh2KSBKU0NvbnRvdXJEYXRhPGRvdWJsZT4oKTsKCiAgLyogdXNpbmcgbmV3X3RhcmdldCB0byBnZXQgdGhlIHByb3RvdHlwZSBpcyBuZWNlc3Nhcnkgd2hlbiB0aGUKICAgICBjbGFzcyBpcyBleHRlbmRlZC4gKi8KICBwcm90byA9IEpTX0dldFByb3BlcnR5U3RyKGN0eCwgbmV3X3RhcmdldCwgInByb3RvdHlwZSIpOwogIGlmKEpTX0lzRXhjZXB0aW9uKHByb3RvKSkKICAgIGdvdG8gZmFpbDsKICBvYmogPSBKU19OZXdPYmplY3RQcm90b0NsYXNzKGN0eCwgcHJvdG8sIGpzX2NvbnRvdXJfY2xhc3NfaWQpOwogIEpTX0ZyZWVWYWx1ZShjdHgsIHByb3RvKTsKICBpZihKU19Jc0V4Y2VwdGlvbihvYmopKQogICAgZ290byBmYWlsOwogIEpTX1NldE9wYXF1ZShvYmosIHYpOwoKICBpZihhcmdjID4gMCkgewogICAgaW50IGk7CgogICAgZm9yKGkgPSAwOyBpIDwgYXJnYzsgaSsrKSB7CiAgICAgIEpTUG9pbnREYXRhPGRvdWJsZT4gcDsKICAgICAgaWYoanNfaXNfYXJyYXkoY3R4LCBhcmd2W2ldKSkgewogICAgICAgIGlmKGpzX2FycmF5X2xlbmd0aChjdHgsIGFyZ3ZbaV0pID4gMCkgewogICAgICAgICAgSlNWYWx1ZSBwdCA9IEpTX0dldFByb3BlcnR5VWludDMyKGN0eCwgYXJndltpXSwgMCk7CgogICAgICAgICAgaWYoanNfaXNfcG9pbnQoY3R4LCBwdCkpIHsKICAgICAgICAgICAganNfYXJyYXlfdG8gLyo8IEpTUG9pbnREYXRhPGRvdWJsZT4gPiovIChjdHgsIGFyZ3ZbaV0sICp2KTsKICAgICAgICAgICAgSlNfRnJlZVZhbHVlKGN0eCwgcHQpOwogICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgIH0KICAgICAgICAgIEpTX0ZyZWVWYWx1ZShjdHgsIHB0KTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIGlmKGpzX3BvaW50X3JlYWQoY3R4LCBhcmd2W2ldLCAmcCkpIHsKICAgICAgICB2LT5wdXNoX2JhY2socCk7CiAgICAgICAgY29udGludWU7CiAgICAgIH0KICAgICAgZ290byBmYWlsOwogICAgfQogIH0KCiAgcmV0dXJuIG9iajsKZmFpbDoKICBqc19kZWFsbG9jYXRlKGN0eCwgdik7CiAgSlNfRnJlZVZhbHVlKGN0eCwgb2JqKTsKICByZXR1cm4gSlNfRVhDRVBUSU9OOwp9Cgp2b2lkCmpzX2NvbnRvdXJfZmluYWxpemVyKEpTUnVudGltZSogcnQsIEpTVmFsdWUgdmFsKSB7CiAgSlNDb250b3VyRGF0YTxkb3VibGU+KiBzOwoKICBpZigocyA9IHN0YXRpY19jYXN0PEpTQ29udG91ckRhdGE8ZG91YmxlPio+KEpTX0dldE9wYXF1ZSh2YWwsIGpzX2NvbnRvdXJfY2xhc3NfaWQpKSkpIHsKICAgIGpzX2RlYWxsb2NhdGUocnQsIHMpOwogIH0KCiAgSlNfRnJlZVZhbHVlUlQocnQsIHZhbCk7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX2NvbnRvdXJfZml0ZWxsaXBzZShKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2KSB7CiAgSlNDb250b3VyRGF0YTxkb3VibGU+KnYsICpwdHI7CiAgY3Y6OlJvdGF0ZWRSZWN0IHJyOwogIEpTVmFsdWUgcmV0ID0gSlNfVU5ERUZJTkVEOwogIGRvdWJsZSBhcmVhOwogIEpTQ29udG91ckRhdGE8ZmxvYXQ+IGNvbnRvdXIsIGVsbGlwc2U7CgogIGlmKCEodiA9IGpzX2NvbnRvdXJfZGF0YShjdHgsIHRoaXNfdmFsKSkpCiAgICByZXR1cm4gSlNfRVhDRVBUSU9OOwoKICBzdGQ6OnRyYW5zZm9ybSh2LT5iZWdpbigpLCB2LT5lbmQoKSwgc3RkOjpiYWNrX2luc2VydGVyKGNvbnRvdXIpLCBbXShjb25zdCBKU1BvaW50RGF0YTxkb3VibGU+JiBwdCkgLT4gSlNQb2ludERhdGE8ZmxvYXQ+IHsKICAgIHJldHVybiBKU1BvaW50RGF0YTxmbG9hdD4ocHQueCwgcHQueSk7CiAgfSk7CgogIHJyID0gY3Y6OmZpdEVsbGlwc2UoY29udG91cik7CgogIGVsbGlwc2UucmVzaXplKDUpOwogIHJyLnBvaW50cyhlbGxpcHNlLmRhdGEoKSk7CgogIHJldCA9IGpzX2NvbnRvdXJfbmV3KGN0eCwgZWxsaXBzZSk7CgogIHJldHVybiByZXQ7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX2NvbnRvdXJfZml0bGluZShKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2KSB7CiAgSlNDb250b3VyRGF0YTxkb3VibGU+KnYsICpwdHI7CiAgSlNWYWx1ZSByZXQgPSBKU19VTkRFRklORUQ7CiAgaW50NjRfdCBkaXN0VHlwZSA9IGN2OjpESVNUX0ZBSVI7CiAgZG91YmxlIHBhcmFtID0gMCwgcmVwcyA9IDAuMDEsIGFlcHMgPSAwLjAxOwogIHN0ZDo6dmVjdG9yPGN2OjpQb2ludD4gY29udG91cjsKICBKU0NvbnRvdXJEYXRhPGZsb2F0PiBwb2ludHM7CiAgY3Y6OlZlYzRmIGxpbmU7CgogIGlmKCEodiA9IGpzX2NvbnRvdXJfZGF0YShjdHgsIHRoaXNfdmFsKSkpCiAgICByZXR1cm4gSlNfRVhDRVBUSU9OOwoKICBpZihhcmdjID4gMCkgewoKICAgIEpTX1RvSW50NjQoY3R4LCAmZGlzdFR5cGUsIGFyZ3ZbMF0pOwoKICAgIGlmKGFyZ2MgPiAxKSB7CiAgICAgIEpTX1RvRmxvYXQ2NChjdHgsICZwYXJhbSwgYXJndlsxXSk7CiAgICAgIGlmKGFyZ2MgPiAyKSB7CiAgICAgICAgSlNfVG9GbG9hdDY0KGN0eCwgJnJlcHMsIGFyZ3ZbMl0pOwogICAgICAgIGlmKGFyZ2MgPiAzKSB7CiAgICAgICAgICBKU19Ub0Zsb2F0NjQoY3R4LCAmYWVwcywgYXJndlszXSk7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfQoKICBzdGQ6OnRyYW5zZm9ybSh2LT5iZWdpbigpLCB2LT5lbmQoKSwgc3RkOjpiYWNrX2luc2VydGVyKGNvbnRvdXIpLCBbXShjb25zdCBKU1BvaW50RGF0YTxkb3VibGU+JiBwdCkgLT4gY3Y6OlBvaW50IHsKICAgIHJldHVybiBjdjo6UG9pbnQocHQueCwgcHQueSk7CiAgfSk7CgogIGN2OjpmaXRMaW5lKGNvbnRvdXIsIGxpbmUsIGRpc3RUeXBlLCBwYXJhbSwgcmVwcywgYWVwcyk7CgogIHBvaW50cy5wdXNoX2JhY2soSlNQb2ludERhdGE8ZmxvYXQ+KGxpbmVbMF0sIGxpbmVbMV0pKTsKICBwb2ludHMucHVzaF9iYWNrKEpTUG9pbnREYXRhPGZsb2F0PihsaW5lWzJdLCBsaW5lWzNdKSk7CgogIHJldCA9IGpzX2NvbnRvdXJfbmV3KGN0eCwgcG9pbnRzKTsKCiAgcmV0dXJuIHJldDsKfQoKc3RhdGljIEpTVmFsdWUKanNfY29udG91cl9hdChKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2KSB7CiAgSlNDb250b3VyRGF0YTxkb3VibGU+KiB2OwogIEpTVmFsdWUgcmV0OwogIEpTVmFsdWUgeCwgeTsKICBpbnQ2NF90IGk7CiAgSlNQb2ludERhdGE8ZG91YmxlPiogcG9pbnQ7CgogIGlmKCEodiA9IGpzX2NvbnRvdXJfZGF0YShjdHgsIHRoaXNfdmFsKSkpCiAgICByZXR1cm4gSlNfRVhDRVBUSU9OOwoKICBKU19Ub0ludDY0KGN0eCwgJmksIGFyZ3ZbMF0pOwoKICBpZihpID49IHYtPnNpemUoKSB8fCBpIDwgMCkKICAgIHJldHVybiBKU19VTkRFRklORUQ7CgogIHJldCA9IGpzX3BvaW50X25ldyhjdHgsICgqdilbaV0ueCwgKCp2KVtpXS55KTsKICByZXR1cm4gcmV0Owp9CgpzdGF0aWMgSlNWYWx1ZQpqc19jb250b3VyX2dldG1hdChKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2KSB7CiAgSlNDb250b3VyRGF0YTxkb3VibGU+KiB2OwogIEpTTWF0RGltZW5zaW9ucyBzaXplOwogIGludDMyX3QgdHlwZTsKICBjdjo6TWF0IG1hdDsKCiAgaWYoISh2ID0ganNfY29udG91cl9kYXRhKGN0eCwgdGhpc192YWwpKSkKICAgIHJldHVybiBKU19FWENFUFRJT047CgogIHNpemUucm93cyA9IDE7CiAgc2l6ZS5jb2xzID0gdi0+c2l6ZSgpOwogIHR5cGUgPSBDVl82NEZDMjsKCiAgbWF0ID0gY3Y6Ok1hdChjdjo6U2l6ZShzaXplKSwgdHlwZSwgc3RhdGljX2Nhc3Q8dm9pZCo+KHYtPmRhdGEoKSkpOwoKICByZXR1cm4ganNfbWF0X3dyYXAoY3R4LCBtYXQpOwp9CgpzdGF0aWMgSlNWYWx1ZQpqc19jb250b3VyX2ludGVyc2VjdGNvbnZleChKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2KSB7CiAgSlNDb250b3VyRGF0YTxkb3VibGU+KnYsICpvdGhlciA9IG51bGxwdHIsICpwdHI7CiAgSlNWYWx1ZSByZXQgPSBKU19VTkRFRklORUQ7CiAgYm9vbCBoYW5kbGVOZXN0ZWQgPSB0cnVlOwogIEpTQ29udG91ckRhdGE8ZmxvYXQ+IGEsIGIsIGludGVyc2VjdGlvbjsKCiAgaWYoISh2ID0ganNfY29udG91cl9kYXRhKGN0eCwgdGhpc192YWwpKSkKICAgIHJldHVybiBKU19FWENFUFRJT047CgogIGlmKGFyZ2MgPiAwKSB7CiAgICBvdGhlciA9IHN0YXRpY19jYXN0PEpTQ29udG91ckRhdGE8ZG91YmxlPio+KEpTX0dldE9wYXF1ZTIoY3R4LCBhcmd2WzBdLCBqc19jb250b3VyX2NsYXNzX2lkKSk7CgogICAgaWYoYXJnYyA+IDEpIHsKICAgICAgaGFuZGxlTmVzdGVkID0gISFKU19Ub0Jvb2woY3R4LCBhcmd2WzFdKTsKICAgIH0KICB9CgogIHN0ZDo6dHJhbnNmb3JtKHYtPmJlZ2luKCksIHYtPmVuZCgpLCBzdGQ6OmJhY2tfaW5zZXJ0ZXIoYSksIFtdKGNvbnN0IEpTUG9pbnREYXRhPGRvdWJsZT4mIHB0KSAtPiBKU1BvaW50RGF0YTxmbG9hdD4gewogICAgcmV0dXJuIEpTUG9pbnREYXRhPGZsb2F0PihwdC54LCBwdC55KTsKICB9KTsKCiAgc3RkOjp0cmFuc2Zvcm0ob3RoZXItPmJlZ2luKCksIG90aGVyLT5lbmQoKSwgc3RkOjpiYWNrX2luc2VydGVyKGIpLCBbXShjb25zdCBKU1BvaW50RGF0YTxkb3VibGU+JiBwdCkgLT4gSlNQb2ludERhdGE8ZmxvYXQ+IHsKICAgIHJldHVybiBKU1BvaW50RGF0YTxmbG9hdD4ocHQueCwgcHQueSk7CiAgfSk7CgogIGN2OjppbnRlcnNlY3RDb252ZXhDb252ZXgoYSwgYiwgaW50ZXJzZWN0aW9uLCBoYW5kbGVOZXN0ZWQpOwoKICByZXQgPSBqc19jb250b3VyX25ldyhjdHgsIGludGVyc2VjdGlvbik7CiAgcmV0dXJuIHJldDsKfQoKc3RhdGljIEpTVmFsdWUKanNfY29udG91cl9pc2NvbnZleChKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2KSB7CiAgSlNDb250b3VyRGF0YTxkb3VibGU+KnYsICpvdGhlciA9IG51bGxwdHIsICpwdHI7CiAgSlNWYWx1ZSByZXQgPSBKU19VTkRFRklORUQ7CiAgYm9vbCBpc0NvbnZleDsKICBKU0NvbnRvdXJEYXRhPGZsb2F0PiBjb250b3VyOwoKICBpZighKHYgPSBqc19jb250b3VyX2RhdGEoY3R4LCB0aGlzX3ZhbCkpKQogICAgcmV0dXJuIEpTX0VYQ0VQVElPTjsKCiAgc3RkOjp0cmFuc2Zvcm0odi0+YmVnaW4oKSwgdi0+ZW5kKCksIHN0ZDo6YmFja19pbnNlcnRlcihjb250b3VyKSwgW10oY29uc3QgSlNQb2ludERhdGE8ZG91YmxlPiYgcHQpIC0+IEpTUG9pbnREYXRhPGZsb2F0PiB7CiAgICByZXR1cm4gSlNQb2ludERhdGE8ZmxvYXQ+KHB0LngsIHB0LnkpOwogIH0pOwoKICBpc0NvbnZleCA9IGN2Ojppc0NvbnRvdXJDb252ZXgoY29udG91cik7CgogIHJldCA9IEpTX05ld0Jvb2woY3R4LCBpc0NvbnZleCk7CgogIHJldHVybiByZXQ7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX2NvbnRvdXJfbGVuZ3RoKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwpIHsKICBKU0NvbnRvdXJEYXRhPGRvdWJsZT4qIHY7CiAgSlNWYWx1ZSByZXQ7CiAgaWYoISh2ID0ganNfY29udG91cl9kYXRhKGN0eCwgdGhpc192YWwpKSkKICAgIHJldHVybiBKU19FWENFUFRJT047CiAgcmV0ID0gSlNfTmV3SW50NjQoY3R4LCB2LT5zaXplKCkpOwogIHJldHVybiByZXQ7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX2NvbnRvdXJfbWluYXJlYXJlY3QoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCogYXJndikgewogIEpTQ29udG91ckRhdGE8ZG91YmxlPip2LCAqb3RoZXIgPSBudWxscHRyLCAqcHRyOwogIEpTVmFsdWUgcmV0ID0gSlNfVU5ERUZJTkVEOwogIGN2OjpSb3RhdGVkUmVjdCBycjsKCiAgSlNDb250b3VyRGF0YTxmbG9hdD4gY29udG91ciwgbWluYXJlYTsKCiAgaWYoISh2ID0ganNfY29udG91cl9kYXRhKGN0eCwgdGhpc192YWwpKSkKICAgIHJldHVybiBKU19FWENFUFRJT047CiAgc3RkOjp0cmFuc2Zvcm0odi0+YmVnaW4oKSwgdi0+ZW5kKCksIHN0ZDo6YmFja19pbnNlcnRlcihjb250b3VyKSwgW10oY29uc3QgSlNQb2ludERhdGE8ZG91YmxlPiYgcHQpIC0+IEpTUG9pbnREYXRhPGZsb2F0PiB7CiAgICByZXR1cm4gSlNQb2ludERhdGE8ZmxvYXQ+KHB0LngsIHB0LnkpOwogIH0pOwogIHJyID0gY3Y6Om1pbkFyZWFSZWN0KGNvbnRvdXIpOwogIG1pbmFyZWEucmVzaXplKDUpOwogIHJyLnBvaW50cyhtaW5hcmVhLmRhdGEoKSk7CgogIHJldCA9IGpzX2NvbnRvdXJfbmV3KGN0eCwgbWluYXJlYSk7CiAgcmV0dXJuIHJldDsKfQoKc3RhdGljIEpTVmFsdWUKanNfY29udG91cl9taW5lbmNsb3NpbmdjaXJjbGUoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCogYXJndikgewogIEpTQ29udG91ckRhdGE8ZG91YmxlPip2LCAqb3RoZXIgPSBudWxscHRyLCAqcHRyOwogIEpTVmFsdWUgcmV0ID0gSlNfVU5ERUZJTkVEOwogIGN2OjpSb3RhdGVkUmVjdCBycjsKCiAgSlNDb250b3VyRGF0YTxmbG9hdD4gY29udG91cjsKICBKU1BvaW50RGF0YTxmbG9hdD4gY2VudGVyOwogIGZsb2F0IHJhZGl1czsKCiAgaWYoISh2ID0ganNfY29udG91cl9kYXRhKGN0eCwgdGhpc192YWwpKSkKICAgIHJldHVybiBKU19FWENFUFRJT047CgogIHN0ZDo6dHJhbnNmb3JtKHYtPmJlZ2luKCksIHYtPmVuZCgpLCBzdGQ6OmJhY2tfaW5zZXJ0ZXIoY29udG91ciksIFtdKGNvbnN0IEpTUG9pbnREYXRhPGRvdWJsZT4mIHB0KSAtPiBKU1BvaW50RGF0YTxmbG9hdD4gewogICAgcmV0dXJuIEpTUG9pbnREYXRhPGZsb2F0PihwdC54LCBwdC55KTsKICB9KTsKCiAgY3Y6Om1pbkVuY2xvc2luZ0NpcmNsZShjb250b3VyLCBjZW50ZXIsIHJhZGl1cyk7CgogIHJldCA9IEpTX05ld09iamVjdChjdHgpOwoKICBKU19TZXRQcm9wZXJ0eVN0cihjdHgsIHJldCwgImNlbnRlciIsIGpzX3BvaW50X25ldyhjdHgsIGNlbnRlci54LCBjZW50ZXIueSkpOwogIEpTX1NldFByb3BlcnR5U3RyKGN0eCwgcmV0LCAicmFkaXVzIiwgSlNfTmV3RmxvYXQ2NChjdHgsIHJhZGl1cykpOwoKICByZXR1cm4gcmV0Owp9CgpzdGF0aWMgSlNWYWx1ZQpqc19jb250b3VyX21pbmVuY2xvc2luZ3RyaWFuZ2xlKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QqIGFyZ3YpIHsKICBKU0NvbnRvdXJEYXRhPGRvdWJsZT4qdiwgKm90aGVyID0gbnVsbHB0ciwgKnB0cjsKICBKU1ZhbHVlIHJldCA9IEpTX1VOREVGSU5FRDsKICBjdjo6Um90YXRlZFJlY3QgcnI7CgogIEpTQ29udG91ckRhdGE8ZmxvYXQ+IGNvbnRvdXIsIHRyaWFuZ2xlOwogIEpTUG9pbnREYXRhPGZsb2F0PiBjZW50ZXI7CiAgZmxvYXQgcmFkaXVzOwoKICBpZighKHYgPSBqc19jb250b3VyX2RhdGEoY3R4LCB0aGlzX3ZhbCkpKQogICAgcmV0dXJuIEpTX0VYQ0VQVElPTjsKCiAgc3RkOjp0cmFuc2Zvcm0odi0+YmVnaW4oKSwgdi0+ZW5kKCksIHN0ZDo6YmFja19pbnNlcnRlcihjb250b3VyKSwgW10oY29uc3QgSlNQb2ludERhdGE8ZG91YmxlPiYgcHQpIC0+IEpTUG9pbnREYXRhPGZsb2F0PiB7CiAgICByZXR1cm4gSlNQb2ludERhdGE8ZmxvYXQ+KHB0LngsIHB0LnkpOwogIH0pOwoKICBjdjo6bWluRW5jbG9zaW5nVHJpYW5nbGUoY29udG91ciwgdHJpYW5nbGUpOwoKICByZXQgPSBqc19jb250b3VyX25ldyhjdHgsIHRyaWFuZ2xlKTsKCiAgcmV0dXJuIHJldDsKfQoKc3RhdGljIEpTVmFsdWUKanNfY29udG91cl9wb2ludHBvbHlnb250ZXN0KEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QqIGFyZ3YpIHsKICBKU0NvbnRvdXJEYXRhPGRvdWJsZT4qdiwgKm90aGVyID0gbnVsbHB0ciwgKnB0cjsKICBKU1ZhbHVlIHJldCA9IEpTX1VOREVGSU5FRDsKICBjdjo6Um90YXRlZFJlY3QgcnI7CiAgSlNQb2ludERhdGE8ZmxvYXQ+IHB0OwogIGJvb2wgbWVhc3VyZURpc3QgPSBmYWxzZTsKICBKU0NvbnRvdXJEYXRhPGZsb2F0PiBjb250b3VyLCB0cmlhbmdsZTsKICBKU1BvaW50RGF0YTxkb3VibGU+IHBvaW50OwogIGRvdWJsZSByZXR2YWw7CgogIGlmKCEodiA9IGpzX2NvbnRvdXJfZGF0YShjdHgsIHRoaXNfdmFsKSkpCiAgICByZXR1cm4gSlNfRVhDRVBUSU9OOwoKICBpZihhcmdjID4gMCkgewogICAgcG9pbnQgPSBqc19wb2ludF9nZXQoY3R4LCBhcmd2WzBdKTsKCiAgICBwdC54ID0gcG9pbnQueDsKICAgIHB0LnkgPSBwb2ludC55OwoKICAgIGlmKGFyZ2MgPiAxKSB7CiAgICAgIG1lYXN1cmVEaXN0ID0gISFKU19Ub0Jvb2woY3R4LCBhcmd2WzFdKTsKICAgIH0KICB9CgogIHN0ZDo6dHJhbnNmb3JtKHYtPmJlZ2luKCksIHYtPmVuZCgpLCBzdGQ6OmJhY2tfaW5zZXJ0ZXIoY29udG91ciksIFtdKGNvbnN0IEpTUG9pbnREYXRhPGRvdWJsZT4mIHB0KSAtPiBKU1BvaW50RGF0YTxmbG9hdD4gewogICAgcmV0dXJuIEpTUG9pbnREYXRhPGZsb2F0PihwdC54LCBwdC55KTsKICB9KTsKCiAgcmV0dmFsID0gY3Y6OnBvaW50UG9seWdvblRlc3QoY29udG91ciwgcHQsIG1lYXN1cmVEaXN0KTsKCiAgcmV0ID0gSlNfTmV3RmxvYXQ2NChjdHgsIHJldHZhbCk7CgogIHJldHVybiByZXQ7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX2NvbnRvdXJfcHNpbXBsKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QqIGFyZ3YsIGludCBtYWdpYykgewogIEpTQ29udG91ckRhdGE8ZG91YmxlPiogcyA9IGpzX2NvbnRvdXJfZGF0YShjdHgsIHRoaXNfdmFsKTsKICBpbnQzMl90IHNoaWZ0ID0gMTsKICB1aW50MzJfdCBzaXplID0gcy0+c2l6ZSgpOwogIEpTVmFsdWUgcmV0ID0gSlNfVU5ERUZJTkVEOwogIEpTQ29udG91ckRhdGE8ZG91YmxlPiByOwogIGRvdWJsZSBhcmcxID0gMCwgYXJnMiA9IDA7CiAgZG91YmxlKiBpdDsKICBKU1BvaW50RGF0YTxkb3VibGU+KiBzdGFydCA9ICYoKnMpWzBdOwogIEpTUG9pbnREYXRhPGRvdWJsZT4qIGVuZCA9IHN0YXJ0ICsgc2l6ZTsKICByLnJlc2l6ZShzaXplKTsKICBpdCA9IChkb3VibGUqKSZyWzBdOwoKICBpZighcykKICAgIHJldHVybiBKU19FWENFUFRJT047CgogIGlmKGFyZ2MgPiAwKSB7CiAgICBKU19Ub0Zsb2F0NjQoY3R4LCAmYXJnMSwgYXJndlswXSk7CiAgICBpZihhcmdjID4gMSkgewogICAgICBKU19Ub0Zsb2F0NjQoY3R4LCAmYXJnMiwgYXJndlsxXSk7CiAgICB9CiAgfQoKICBpZihtYWdpYyA9PSAwKSB7CiAgICBpZihhcmcxID09IDApCiAgICAgIGFyZzEgPSAyOwogICAgaXQgPSBwc2ltcGw6OnNpbXBsaWZ5X3JldW1hbm5fd2l0a2FtPDI+KChkb3VibGUqKXN0YXJ0LCAoZG91YmxlKillbmQsIGFyZzEsIGl0KTsKICB9IGVsc2UgaWYobWFnaWMgPT0gMSkgewogICAgaWYoYXJnMSA9PSAwKQogICAgICBhcmcxID0gMjsKICAgIGlmKGFyZzIgPT0gMCkKICAgICAgYXJnMiA9IDEwOwogICAgaXQgPSBwc2ltcGw6OnNpbXBsaWZ5X29waGVpbTwyPigoZG91YmxlKilzdGFydCwgKGRvdWJsZSopZW5kLCBhcmcxLCBhcmcyLCBpdCk7CiAgfSBlbHNlIGlmKG1hZ2ljID09IDIpIHsKICAgIGlmKGFyZzEgPT0gMCkKICAgICAgYXJnMSA9IDI7CiAgICBpZihhcmcyID09IDApCiAgICAgIGFyZzIgPSAxMDsKICAgIGl0ID0gcHNpbXBsOjpzaW1wbGlmeV9sYW5nPDI+KChkb3VibGUqKXN0YXJ0LCAoZG91YmxlKillbmQsIGFyZzEsIGFyZzIsIGl0KTsKICB9IGVsc2UgaWYobWFnaWMgPT0gMykgewogICAgaWYoYXJnMSA9PSAwKQogICAgICBhcmcxID0gMjsKICAgIGl0ID0gcHNpbXBsOjpzaW1wbGlmeV9kb3VnbGFzX3BldWNrZXI8Mj4oKGRvdWJsZSopc3RhcnQsIChkb3VibGUqKWVuZCwgYXJnMSwgaXQpOwogIH0gZWxzZSBpZihtYWdpYyA9PSA0KSB7CiAgICBpZihhcmcxID09IDApCiAgICAgIGFyZzEgPSAyOwogICAgaXQgPSBwc2ltcGw6OnNpbXBsaWZ5X250aF9wb2ludDwyPigoZG91YmxlKilzdGFydCwgKGRvdWJsZSopZW5kLCBhcmcxLCBpdCk7CiAgfSBlbHNlIGlmKG1hZ2ljID09IDUpIHsKICAgIGlmKGFyZzEgPT0gMCkKICAgICAgYXJnMSA9IDI7CiAgICBpdCA9IHBzaW1wbDo6c2ltcGxpZnlfcmFkaWFsX2Rpc3RhbmNlPDI+KChkb3VibGUqKXN0YXJ0LCAoZG91YmxlKillbmQsIGFyZzEsIGl0KTsKICB9IGVsc2UgaWYobWFnaWMgPT0gNikgewogICAgaWYoYXJnMSA9PSAwKQogICAgICBhcmcxID0gMjsKICAgIGlmKGFyZzIgPT0gMCkKICAgICAgYXJnMiA9IDE7CiAgICBpdCA9IHBzaW1wbDo6c2ltcGxpZnlfcGVycGVuZGljdWxhcl9kaXN0YW5jZTwyPigoZG91YmxlKilzdGFydCwgKGRvdWJsZSopZW5kLCBhcmcxLCBhcmcyLCBpdCk7CiAgfQogIHNpemUgPSBpdCAtIChkb3VibGUqKSZyWzBdOwogIHIucmVzaXplKHNpemUgLyAyKTsKICByZXQgPSBqc19jb250b3VyX25ldzxkb3VibGU+KGN0eCwgcik7CiAgcmV0dXJuIHJldDsKfQoKc3RhdGljIEpTVmFsdWUKanNfY29udG91cl9wdXNoKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QqIGFyZ3YpIHsKICBKU0NvbnRvdXJEYXRhPGRvdWJsZT4qIHY7CiAgaW50IGk7CiAgZG91YmxlIHgsIHk7CiAgSlNWYWx1ZUNvbnN0IHh2LCB5djsKICBKU1BvaW50RGF0YTxkb3VibGU+IHBvaW50OwoKICBpZighKHYgPSBqc19jb250b3VyX2RhdGEoY3R4LCB0aGlzX3ZhbCkpKQogICAgcmV0dXJuIEpTX0VYQ0VQVElPTjsKCiAgZm9yKGkgPSAwOyBpIDwgYXJnYzsgaSsrKSB7CiAgICBpZihKU19Jc09iamVjdChhcmd2W2ldKSkgewogICAgICB4diA9IEpTX0dldFByb3BlcnR5U3RyKGN0eCwgYXJndltpXSwgIngiKTsKICAgICAgeXYgPSBKU19HZXRQcm9wZXJ0eVN0cihjdHgsIGFyZ3ZbaV0sICJ5Iik7CiAgICB9IGVsc2UgaWYoanNfaXNfYXJyYXkoY3R4LCBhcmd2W2ldKSkgewoKICAgICAgeHYgPSBKU19HZXRQcm9wZXJ0eVVpbnQzMihjdHgsIGFyZ3ZbaV0sIDApOwogICAgICB5diA9IEpTX0dldFByb3BlcnR5VWludDMyKGN0eCwgYXJndltpXSwgMSk7CiAgICB9IGVsc2UgaWYoaSArIDEgPCBhcmdjKSB7CiAgICAgIHh2ID0gYXJndltpKytdOwogICAgICB5diA9IGFyZ3ZbaV07CiAgICB9CiAgICBKU19Ub0Zsb2F0NjQoY3R4LCAmcG9pbnQueCwgeHYpOwogICAgSlNfVG9GbG9hdDY0KGN0eCwgJnBvaW50LnksIHl2KTsKCiAgICB2LT5wdXNoX2JhY2socG9pbnQpOwogIH0KICByZXR1cm4gSlNfVU5ERUZJTkVEOwp9CgpzdGF0aWMgSlNWYWx1ZQpqc19jb250b3VyX3BvcChKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2KSB7CiAgSlNDb250b3VyRGF0YTxkb3VibGU+KiB2OwogIEpTVmFsdWUgcmV0OwogIEpTVmFsdWUgeCwgeTsKICBKU1BvaW50RGF0YTxkb3VibGU+KnB0ciwgcG9pbnQ7CiAgaW50NjRfdCBuID0gMDsKCiAgaWYoISh2ID0ganNfY29udG91cl9kYXRhKGN0eCwgdGhpc192YWwpKSkKICAgIHJldHVybiBKU19FWENFUFRJT047CiAgbiA9IHYtPnNpemUoKTsKICBpZihuID4gMCkgewogICAgcG9pbnQgPSAoKnYpW24gLSAxXTsKICAgIHYtPnBvcF9iYWNrKCk7CiAgfSBlbHNlIHsKICAgIHJldHVybiBKU19FWENFUFRJT047CiAgfQoKICByZXQgPSBqc19wb2ludF9uZXcoY3R4LCBwb2ludC54LCBwb2ludC55KTsKCiAgcmV0dXJuIHJldDsKfQoKc3RhdGljIEpTVmFsdWUKanNfY29udG91cl91bnNoaWZ0KEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QqIGFyZ3YpIHsKICBKU0NvbnRvdXJEYXRhPGRvdWJsZT4qIHY7CiAgaW50IGk7CiAgZG91YmxlIHgsIHk7CiAgSlNWYWx1ZUNvbnN0IHh2LCB5djsKICBKU1BvaW50RGF0YTxkb3VibGU+IHBvaW50OwoKICBpZighKHYgPSBqc19jb250b3VyX2RhdGEoY3R4LCB0aGlzX3ZhbCkpKQogICAgcmV0dXJuIEpTX0VYQ0VQVElPTjsKCiAgZm9yKGkgPSAwOyBpIDwgYXJnYzsgaSsrKSB7CiAgICBpZihKU19Jc09iamVjdChhcmd2W2ldKSkgewogICAgICB4diA9IEpTX0dldFByb3BlcnR5U3RyKGN0eCwgYXJndltpXSwgIngiKTsKICAgICAgeXYgPSBKU19HZXRQcm9wZXJ0eVN0cihjdHgsIGFyZ3ZbaV0sICJ5Iik7CiAgICB9IGVsc2UgaWYoanNfaXNfYXJyYXkoY3R4LCBhcmd2W2ldKSkgewoKICAgICAgeHYgPSBKU19HZXRQcm9wZXJ0eVVpbnQzMihjdHgsIGFyZ3ZbaV0sIDApOwogICAgICB5diA9IEpTX0dldFByb3BlcnR5VWludDMyKGN0eCwgYXJndltpXSwgMSk7CiAgICB9IGVsc2UgaWYoaSArIDEgPCBhcmdjKSB7CiAgICAgIHh2ID0gYXJndltpKytdOwogICAgICB5diA9IGFyZ3ZbaV07CiAgICB9CiAgICBKU19Ub0Zsb2F0NjQoY3R4LCAmcG9pbnQueCwgeHYpOwogICAgSlNfVG9GbG9hdDY0KGN0eCwgJnBvaW50LnksIHl2KTsKCiAgICB2LT5pbnNlcnQodi0+YmVnaW4oKSwgcG9pbnQpOwogIH0KICByZXR1cm4gSlNfVU5ERUZJTkVEOwp9CgpzdGF0aWMgSlNWYWx1ZQpqc19jb250b3VyX3NoaWZ0KEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QqIGFyZ3YpIHsKICBKU0NvbnRvdXJEYXRhPGRvdWJsZT4qIHY7CiAgSlNWYWx1ZSByZXQ7CiAgSlNWYWx1ZSB4LCB5OwogIEpTUG9pbnREYXRhPGRvdWJsZT4qcHRyLCBwb2ludDsKICBpbnQ2NF90IG4gPSAwOwoKICBpZighKHYgPSBqc19jb250b3VyX2RhdGEoY3R4LCB0aGlzX3ZhbCkpKQogICAgcmV0dXJuIEpTX0VYQ0VQVElPTjsKICBuID0gdi0+c2l6ZSgpOwogIGlmKG4gPiAwKSB7CiAgICBwb2ludCA9ICgqdilbMF07CiAgICB2LT5lcmFzZSh2LT5iZWdpbigpKTsKICB9IGVsc2UgewogICAgcmV0dXJuIEpTX0VYQ0VQVElPTjsKICB9CgogIHJldCA9IGpzX3BvaW50X25ldyhjdHgsIHBvaW50LngsIHBvaW50LnkpOwoKICByZXR1cm4gcmV0Owp9CgpzdGF0aWMgSlNWYWx1ZQpqc19jb250b3VyX2NvbmNhdChKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2KSB7CiAgSlNDb250b3VyRGF0YTxkb3VibGU+KnYsICpvdGhlciwgKnI7CiAgaW50IGk7CiAgZG91YmxlIHgsIHk7CiAgSlNWYWx1ZSByZXQ7CiAgSlNWYWx1ZUNvbnN0IHh2LCB5djsKICBKU1BvaW50RGF0YTxkb3VibGU+IHBvaW50OwoKICBpZighKHYgPSBqc19jb250b3VyX2RhdGEoY3R4LCB0aGlzX3ZhbCkpKQogICAgcmV0dXJuIEpTX0VYQ0VQVElPTjsKCiAgaWYoIShvdGhlciA9IGpzX2NvbnRvdXJfZGF0YShjdHgsIGFyZ3ZbMF0pKSkKICAgIHJldHVybiBKU19FWENFUFRJT047CgogIHJldCA9IGpzX2NvbnRvdXJfbmV3KGN0eCwgKnYpOwoKICByID0ganNfY29udG91cl9kYXRhKGN0eCwgcmV0KTsKICBzdGQ6OmNvcHkob3RoZXItPmNiZWdpbigpLCBvdGhlci0+Y2VuZCgpLCBzdGQ6OmJhY2tfaW5zZXJ0ZXIoKnIpKTsKICByZXR1cm4gcmV0Owp9CgpzdGF0aWMgSlNWYWx1ZQpqc19jb250b3VyX3JvdGF0ZWRyZWN0YW5nbGVpbnRlcnNlY3Rpb24oSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCogYXJndikgewogIEpTQ29udG91ckRhdGE8ZG91YmxlPip2LCAqb3RoZXIgPSBudWxscHRyLCAqcHRyOwogIEpTVmFsdWUgcmV0ID0gSlNfVU5ERUZJTkVEOwogIGJvb2wgaGFuZGxlTmVzdGVkID0gdHJ1ZTsKICBKU0NvbnRvdXJEYXRhPGZsb2F0PiBhLCBiLCBpbnRlcnNlY3Rpb247CgogIGlmKCEodiA9IGpzX2NvbnRvdXJfZGF0YShjdHgsIHRoaXNfdmFsKSkpCiAgICByZXR1cm4gSlNfRVhDRVBUSU9OOwoKICBpZihhcmdjID4gMCkgewogICAgb3RoZXIgPSBzdGF0aWNfY2FzdDxKU0NvbnRvdXJEYXRhPGRvdWJsZT4qPihKU19HZXRPcGFxdWUyKGN0eCwgYXJndlswXSwganNfY29udG91cl9jbGFzc19pZCkpOwogIH0KCiAgc3RkOjp0cmFuc2Zvcm0odi0+YmVnaW4oKSwgdi0+ZW5kKCksIHN0ZDo6YmFja19pbnNlcnRlcihhKSwgW10oY29uc3QgSlNQb2ludERhdGE8ZG91YmxlPiYgcHQpIC0+IEpTUG9pbnREYXRhPGZsb2F0PiB7CiAgICByZXR1cm4gSlNQb2ludERhdGE8ZmxvYXQ+KHB0LngsIHB0LnkpOwogIH0pOwoKICBzdGQ6OnRyYW5zZm9ybShvdGhlci0+YmVnaW4oKSwgb3RoZXItPmVuZCgpLCBzdGQ6OmJhY2tfaW5zZXJ0ZXIoYiksIFtdKGNvbnN0IEpTUG9pbnREYXRhPGRvdWJsZT4mIHB0KSAtPiBKU1BvaW50RGF0YTxmbG9hdD4gewogICAgcmV0dXJuIEpTUG9pbnREYXRhPGZsb2F0PihwdC54LCBwdC55KTsKICB9KTsKICB7CiAgICBjdjo6Um90YXRlZFJlY3QgcnJhKGFbMF0sIGFbMV0sIGFbMl0pOwogICAgY3Y6OlJvdGF0ZWRSZWN0IHJyYihiWzBdLCBiWzFdLCBiWzJdKTsKCiAgICBjdjo6cm90YXRlZFJlY3RhbmdsZUludGVyc2VjdGlvbihycmEsIHJyYiwgaW50ZXJzZWN0aW9uKTsKCiAgICByZXQgPSBqc19jb250b3VyX25ldyhjdHgsIGludGVyc2VjdGlvbik7CiAgfQogIHJldHVybiByZXQ7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX2NvbnRvdXJfcm90YXRlcG9pbnRzKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QqIGFyZ3YpIHsKICBKU0NvbnRvdXJEYXRhPGRvdWJsZT4qIHMgPSBqc19jb250b3VyX2RhdGEoY3R4LCB0aGlzX3ZhbCk7CiAgaW50MzJfdCBzaGlmdCA9IDE7CiAgdWludDMyX3Qgc2l6ZSA9IHMtPnNpemUoKTsKICBpZighcykKICAgIHJldHVybiBKU19FWENFUFRJT047CiAgaWYoYXJnYyA+IDApCiAgICBKU19Ub0ludDMyKGN0eCwgJnNoaWZ0LCBhcmd2WzBdKTsKCiAgc2hpZnQgJT0gc2l6ZTsKCiAgaWYoc2hpZnQgPiAwKSB7CiAgICBzdGQ6OnJvdGF0ZShzLT5iZWdpbigpLCBzLT5iZWdpbigpICsgc2hpZnQsIHMtPmVuZCgpKTsKCiAgfSBlbHNlIGlmKHNoaWZ0IDwgMCkgewogICAgc3RkOjpyb3RhdGUocy0+cmJlZ2luKCksIHMtPnJiZWdpbigpICsgKC1zaGlmdCksIHMtPnJlbmQoKSk7CiAgfQogIHJldHVybiBKU1ZhbHVlKHRoaXNfdmFsKTsKfQoKc3RhdGljIEpTVmFsdWUKanNfY29udG91cl90b2FycmF5KEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QqIGFyZ3YpIHsKICBKU0NvbnRvdXJEYXRhPGRvdWJsZT4qIHM7CiAgdWludDMyX3QgaSwgc2l6ZTsKICBKU1ZhbHVlIHJldCA9IEpTX1VOREVGSU5FRDsKCiAgaWYoIShzID0ganNfY29udG91cl9kYXRhKGN0eCwgdGhpc192YWwpKSkKICAgIHJldHVybiBKU19FWENFUFRJT047CiAgc2l6ZSA9IHMtPnNpemUoKTsKICByZXQgPSBKU19OZXdBcnJheShjdHgpOwoKICBmb3IoaSA9IDA7IGkgPCBzaXplOyBpKyspIHsgSlNfU2V0UHJvcGVydHlVaW50MzIoY3R4LCByZXQsIGksIGpzX3BvaW50X2Nsb25lKGN0eCwgKCpzKVtpXSkpOyB9CgogIHJldHVybiByZXQ7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX2NvbnRvdXJfdG9zdHJpbmcoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCogYXJndiwgaW50IG1hZ2ljKSB7CiAgSlNDb250b3VyRGF0YTxkb3VibGU+KiBzOwogIHN0ZDo6b3N0cmluZ3N0cmVhbSBvczsKICBpbnQgaSA9IDA7CiAgaW50IHByZWMgPSA5OwogIGludDMyX3QgZmxhZ3M7CgogIGlmKCEocyA9IGpzX2NvbnRvdXJfZGF0YShjdHgsIHRoaXNfdmFsKSkpCiAgICByZXR1cm4gSlNfRVhDRVBUSU9OOwoKICBpZihtYWdpYyA9PSAxICYmICEoZmxhZ3MgJiAweDEwMCkpCiAgICBvcyA8PCAibmV3IENvbnRvdXIoIjsKCiAgaWYoYXJnYyA+IDApCiAgICBKU19Ub0ludDMyKGN0eCwgJmZsYWdzLCBhcmd2WzBdKTsKICBlbHNlCiAgICBmbGFncyA9IDA7CgogIGlmKCEoZmxhZ3MgJiAweDEwMCkpCiAgICBvcyA8PCAnWyc7CgogIHN0ZDo6Zm9yX2VhY2gocy0+YmVnaW4oKSwgcy0+ZW5kKCksIFsmaSwgJm9zLCBmbGFncywgcHJlY10oY29uc3QgSlNQb2ludERhdGE8ZG91YmxlPiYgcG9pbnQpIHsKICAgIGlmKGkgPiAwKQogICAgICBvcyA8PCAoKGZsYWdzICYgMHgxMCkgPyAiICIgOiAiLCIpOwoKICAgIGlmKCEoZmxhZ3MgJiAweDEwMCkpCiAgICAgIG9zIDw8ICgoZmxhZ3MgJiAweDAzKSA9PSAwID8gInsiIDogIlsiKTsKCiAgICBpZihmbGFncyAmIDB4MDMpCiAgICAgIG9zIDw8IHN0ZDo6c2V0cHJlY2lzaW9uKHByZWMpIDw8IHBvaW50LnggPDwgIiwiIDw8IHBvaW50Lnk7CiAgICBlbHNlCiAgICAgIG9zIDw8ICJ4OiIgPDwgc3RkOjpzZXRwcmVjaXNpb24ocHJlYykgPDwgcG9pbnQueCA8PCAiLHk6IiA8PCBwb2ludC55OwoKICAgIGlmKCEoZmxhZ3MgJiAweDEwMCkpCiAgICAgIG9zIDw8ICgoZmxhZ3MgJiAweDAzKSA9PSAwID8gIn0iIDogIl0iKTsKCiAgICBpKys7CiAgfSk7CiAgaWYoIShmbGFncyAmIDB4MTAwKSkKICAgIG9zIDw8ICddJzsgLy8gPDwgc3RkOjplbmRsOwoKICBpZihtYWdpYyA9PSAxICYmICEoZmxhZ3MgJiAweDEwMCkpCiAgICBvcyA8PCAiKSI7CgogIHJldHVybiBKU19OZXdTdHJpbmcoY3R4LCBvcy5zdHIoKS5jX3N0cigpKTsKfQoKc3RhdGljIEpTVmFsdWUKanNfY29udG91cl9yZWN0KEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QqIGFyZ3YpIHsKICBKU1ZhbHVlIHJldCA9IEpTX1VOREVGSU5FRDsKICBKU0NvbnRvdXJEYXRhPGRvdWJsZT4gcG9pbnRzOwogIEpTUmVjdERhdGE8ZG91YmxlPiBzID0ganNfcmVjdF9nZXQoY3R4LCBhcmd2WzBdKTsKCiAgcG9pbnRzLnB1c2hfYmFjayhKU1BvaW50RGF0YTxkb3VibGU+KHMueCwgcy55KSk7CiAgcG9pbnRzLnB1c2hfYmFjayhKU1BvaW50RGF0YTxkb3VibGU+KHMueCArIHMud2lkdGgsIHMueSkpOwogIHBvaW50cy5wdXNoX2JhY2soSlNQb2ludERhdGE8ZG91YmxlPihzLnggKyBzLndpZHRoLCBzLnkgKyBzLmhlaWdodCkpOwogIHBvaW50cy5wdXNoX2JhY2soSlNQb2ludERhdGE8ZG91YmxlPihzLngsIHMueSArIHMuaGVpZ2h0KSk7CiAgcG9pbnRzLnB1c2hfYmFjayhKU1BvaW50RGF0YTxkb3VibGU+KHMueCwgcy55KSk7CgogIHJldCA9IGpzX2NvbnRvdXJfbmV3PGRvdWJsZT4oY3R4LCBwb2ludHMpOwogIHJldHVybiByZXQ7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX2NvbnRvdXJfZ2V0KEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBtYWdpYykgewogIEpTQ29udG91ckRhdGE8ZG91YmxlPiogY29udG91cjsKICBKU1ZhbHVlIHJldCA9IEpTX1VOREVGSU5FRDsKCiAgaWYoIShjb250b3VyID0ganNfY29udG91cl9kYXRhKGN0eCwgdGhpc192YWwpKSkKICAgIHJldHVybiBKU19FWENFUFRJT047CgogIHN3aXRjaChtYWdpYykgewogICAgY2FzZSAwOiB7CiAgICAgIEpTQ29udG91ckRhdGE8ZmxvYXQ+IHBvaW50czsKICAgICAgSlNSZWN0RGF0YTxmbG9hdD4gcmVjdDsKCiAgICAgIHBvaW50cy5yZXNpemUoY29udG91ci0+c2l6ZSgpKTsKCiAgICAgIHN0ZDo6Y29weShjb250b3VyLT5iZWdpbigpLCBjb250b3VyLT5lbmQoKSwgcG9pbnRzLmJlZ2luKCkpOwoKICAgICAgcmVjdCA9IGN2Ojpib3VuZGluZ1JlY3QocG9pbnRzKTsKCiAgICAgIHJldCA9IEpTX05ld0Zsb2F0NjQoY3R4LCAoZG91YmxlKXJlY3Qud2lkdGggLyByZWN0LmhlaWdodCk7CiAgICAgIGJyZWFrOwogICAgfQogICAgY2FzZSAxOiB7CiAgICAgIGRvdWJsZSBhcmVhID0gY3Y6OmNvbnRvdXJBcmVhKCpjb250b3VyKTsKICAgICAgSlNSZWN0RGF0YTxkb3VibGU+IHJlY3QgPSBjdjo6Ym91bmRpbmdSZWN0KCpjb250b3VyKTsKCiAgICAgIHJldCA9IEpTX05ld0Zsb2F0NjQoY3R4LCBhcmVhIC8gKHJlY3Qud2lkdGggKiByZWN0LmhlaWdodCkpOwogICAgICBicmVhazsKICAgIH0KICAgIGNhc2UgMjogewogICAgICBkb3VibGUgYXJlYSA9IGN2Ojpjb250b3VyQXJlYSgqY29udG91cik7CiAgICAgIEpTQ29udG91ckRhdGE8ZG91YmxlPiBodWxsOwogICAgICBjdjo6Y29udmV4SHVsbCgqY29udG91ciwgaHVsbCk7CiAgICAgIGRvdWJsZSBodWxsQXJlYSA9IGN2Ojpjb250b3VyQXJlYShodWxsKTsKCiAgICAgIHJldCA9IEpTX05ld0Zsb2F0NjQoY3R4LCBhcmVhIC8gY3Y6OmNvbnRvdXJBcmVhKGh1bGwpKTsKICAgICAgYnJlYWs7CiAgICB9CiAgICBjYXNlIDM6IHsKICAgICAgZG91YmxlIGFyZWEgPSBjdjo6Y29udG91ckFyZWEoKmNvbnRvdXIpOwoKICAgICAgcmV0ID0gSlNfTmV3RmxvYXQ2NChjdHgsIHN0ZDo6c3FydCg0ICogYXJlYSAvIDMuMTQxNTkyNjUzNTg5NzkzMjM4NDYpKTsKICAgICAgYnJlYWs7CiAgICB9CiAgICBjYXNlIDQ6IHsKICAgICAgY3Y6OlJvdGF0ZWRSZWN0IHJlY3QgPSBjdjo6Zml0RWxsaXBzZSgqY29udG91cik7CgogICAgICByZXQgPSBKU19OZXdGbG9hdDY0KGN0eCwgcmVjdC5hbmdsZSk7CiAgICAgIGJyZWFrOwogICAgfQogIH0KICByZXR1cm4gcmV0Owp9CgpzdGF0aWMgSlNWYWx1ZQpqc19jb250b3VyX2luc3BlY3QoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCogYXJndikgewogIEpTQ29udG91ckRhdGE8ZG91YmxlPiogY29udG91cjsKCiAgaWYoIShjb250b3VyID0ganNfY29udG91cl9kYXRhKGN0eCwgdGhpc192YWwpKSkKICAgIHJldHVybiBKU19FWENFUFRJT047CgogIEpTVmFsdWUgb2JqID0gSlNfTmV3T2JqZWN0UHJvdG8oY3R4LCBjb250b3VyX3Byb3RvKTsKCiAgSlNfRGVmaW5lUHJvcGVydHlWYWx1ZVN0cihjdHgsIG9iaiwgImxlbmd0aCIsIEpTX05ld1VpbnQzMihjdHgsIGNvbnRvdXItPnNpemUoKSksIEpTX1BST1BfRU5VTUVSQUJMRSk7CiAgcmV0dXJuIG9iajsKfQoKZXh0ZXJuICJDIiB7CgpKU0NsYXNzRGVmIGpzX2NvbnRvdXJfY2xhc3MgPSB7CiAgICAuY2xhc3NfbmFtZSA9ICJDb250b3VyIiwKICAgIC5maW5hbGl6ZXIgPSBqc19jb250b3VyX2ZpbmFsaXplciwKfTsKCkpTVmFsdWUKanNfY29udG91cl9pdGVyYXRvcihKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2LCBpbnQgbWFnaWMpIHsKICBKU0NvbnRvdXJEYXRhPGRvdWJsZT4qIHM7CgogIGlmKCEocyA9IGpzX2NvbnRvdXJfZGF0YShjdHgsIHRoaXNfdmFsKSkpCiAgICByZXR1cm4gSlNfRVhDRVBUSU9OOwoKICByZXR1cm4ganNfcG9pbnRfaXRlcmF0b3JfbmV3KGN0eCwgcmFuZ2UoKnMpLCBtYWdpYyk7Cn0KCmNvbnN0IEpTQ0Z1bmN0aW9uTGlzdEVudHJ5IGpzX2NvbnRvdXJfcHJvdG9fZnVuY3NbXSA9IHsKICAgIEpTX0NGVU5DX0RFRigicHVzaCIsIDEsIGpzX2NvbnRvdXJfcHVzaCksCiAgICBKU19DRlVOQ19ERUYoInBvcCIsIDAsIGpzX2NvbnRvdXJfcG9wKSwKICAgIEpTX0NGVU5DX0RFRigidW5zaGlmdCIsIDEsIGpzX2NvbnRvdXJfdW5zaGlmdCksCiAgICBKU19DRlVOQ19ERUYoInNoaWZ0IiwgMCwganNfY29udG91cl9zaGlmdCksCiAgICBKU19DRlVOQ19ERUYoImNvbmNhdCIsIDEsIGpzX2NvbnRvdXJfY29uY2F0KSwKICAgIEpTX0NGVU5DX0RFRigiYXQiLCAxLCBqc19jb250b3VyX2F0KSwKICAgIEpTX0NGVU5DX0RFRigiZ2V0TWF0IiwgMCwganNfY29udG91cl9nZXRtYXQpLAogICAgSlNfQ0dFVFNFVF9ERUYoImxlbmd0aCIsIGpzX2NvbnRvdXJfbGVuZ3RoLCBOVUxMKSwKICAgIEpTX0NHRVRTRVRfREVGKCJhcmVhIiwganNfY29udG91cl9hcmVhLCBOVUxMKSwKICAgIEpTX0NHRVRTRVRfREVGKCJidWZmZXIiLCBqc19jb250b3VyX2J1ZmZlciwgTlVMTCksCiAgICBKU19DR0VUU0VUX0RFRigiYXJyYXkiLCBqc19jb250b3VyX2FycmF5LCBOVUxMKSwKICAgIEpTX0NHRVRTRVRfTUFHSUNfREVGKCJhc3BlY3RSYXRpbyIsIGpzX2NvbnRvdXJfZ2V0LCBOVUxMLCAwKSwKICAgIEpTX0NHRVRTRVRfTUFHSUNfREVGKCJleHRlbnQiLCBqc19jb250b3VyX2dldCwgTlVMTCwgMSksCiAgICBKU19DR0VUU0VUX01BR0lDX0RFRigic29saWRpdHkiLCBqc19jb250b3VyX2dldCwgTlVMTCwgMiksCiAgICBKU19DR0VUU0VUX01BR0lDX0RFRigiZXF1aXZhbGVudERpYW1ldGVyIiwganNfY29udG91cl9nZXQsIE5VTEwsIDMpLAogICAgSlNfQ0dFVFNFVF9NQUdJQ19ERUYoIm9yaWVudGF0aW9uIiwganNfY29udG91cl9nZXQsIE5VTEwsIDQpLAoKICAgIEpTX0NGVU5DX0RFRigiYXBwcm94UG9seURQIiwgMSwganNfY29udG91cl9hcHByb3hwb2x5ZHApLAogICAgSlNfQ0ZVTkNfREVGKCJjb252ZXhIdWxsIiwgMSwganNfY29udG91cl9jb252ZXhodWxsKSwKICAgIEpTX0NGVU5DX0RFRigiYm91bmRpbmdSZWN0IiwgMCwganNfY29udG91cl9ib3VuZGluZ3JlY3QpLAogICAgSlNfQ0ZVTkNfREVGKCJmaXRFbGxpcHNlIiwgMCwganNfY29udG91cl9maXRlbGxpcHNlKSwKICAgIEpTX0NGVU5DX0RFRigiZml0TGluZSIsIDAsIGpzX2NvbnRvdXJfZml0bGluZSksCiAgICBKU19DRlVOQ19ERUYoImludGVyc2VjdENvbnZleCIsIDAsIGpzX2NvbnRvdXJfaW50ZXJzZWN0Y29udmV4KSwKICAgIEpTX0NGVU5DX0RFRigiaXNDb252ZXgiLCAwLCBqc19jb250b3VyX2lzY29udmV4KSwKICAgIEpTX0NGVU5DX0RFRigibWluQXJlYVJlY3QiLCAwLCBqc19jb250b3VyX21pbmFyZWFyZWN0KSwKICAgIEpTX0NGVU5DX0RFRigibWluRW5jbG9zaW5nQ2lyY2xlIiwgMCwganNfY29udG91cl9taW5lbmNsb3NpbmdjaXJjbGUpLAogICAgSlNfQ0ZVTkNfREVGKCJtaW5FbmNsb3NpbmdUcmlhbmdsZSIsIDAsIGpzX2NvbnRvdXJfbWluZW5jbG9zaW5ndHJpYW5nbGUpLAogICAgSlNfQ0ZVTkNfREVGKCJwb2ludFBvbHlnb25UZXN0IiwgMCwganNfY29udG91cl9wb2ludHBvbHlnb250ZXN0KSwKICAgIEpTX0NGVU5DX0RFRigicm90YXRlZFJlY3RhbmdsZUludGVyc2VjdGlvbiIsIDAsIGpzX2NvbnRvdXJfcm90YXRlZHJlY3RhbmdsZWludGVyc2VjdGlvbiksCiAgICBKU19DRlVOQ19ERUYoImFyY0xlbmd0aCIsIDAsIGpzX2NvbnRvdXJfYXJjbGVuZ3RoKSwKICAgIEpTX0NGVU5DX0RFRigicm90YXRlUG9pbnRzIiwgMSwganNfY29udG91cl9yb3RhdGVwb2ludHMpLAogICAgSlNfQ0ZVTkNfREVGKCJjb252ZXhpdHlEZWZlY3RzIiwgMSwganNfY29udG91cl9jb252ZXhpdHlkZWZlY3RzKSwKICAgIEpTX0NGVU5DX01BR0lDX0RFRigic2ltcGxpZnlSZXVtYW5uV2l0a2FtIiwgMCwganNfY29udG91cl9wc2ltcGwsIDApLAogICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJzaW1wbGlmeU9waGVpbSIsIDAsIGpzX2NvbnRvdXJfcHNpbXBsLCAxKSwKICAgIEpTX0NGVU5DX01BR0lDX0RFRigic2ltcGxpZnlMYW5nIiwgMCwganNfY29udG91cl9wc2ltcGwsIDIpLAogICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJzaW1wbGlmeURvdWdsYXNQZXVja2VyIiwgMCwganNfY29udG91cl9wc2ltcGwsIDMpLAogICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJzaW1wbGlmeU50aFBvaW50IiwgMCwganNfY29udG91cl9wc2ltcGwsIDQpLAogICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJzaW1wbGlmeVJhZGlhbERpc3RhbmNlIiwgMCwganNfY29udG91cl9wc2ltcGwsIDUpLAogICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJzaW1wbGlmeVBlcnBlbmRpY3VsYXJEaXN0YW5jZSIsIDAsIGpzX2NvbnRvdXJfcHNpbXBsLCA2KSwKICAgIEpTX0NGVU5DX0RFRigidG9BcnJheSIsIDAsIGpzX2NvbnRvdXJfdG9hcnJheSksCiAgICBKU19DRlVOQ19NQUdJQ19ERUYoInRvU3RyaW5nIiwgMCwganNfY29udG91cl90b3N0cmluZywgMCksCiAgICBKU19DRlVOQ19NQUdJQ19ERUYoInRvU291cmNlIiwgMCwganNfY29udG91cl90b3N0cmluZywgMSksCiAgICBKU19DRlVOQ19NQUdJQ19ERUYoImxpbmVzIiwgMCwganNfY29udG91cl9pdGVyYXRvciwgTkVYVF9MSU5FKSwKICAgIEpTX0NGVU5DX01BR0lDX0RFRigicG9pbnRzIiwgMCwganNfY29udG91cl9pdGVyYXRvciwgTkVYVF9QT0lOVCksCgogICAgSlNfQUxJQVNfREVGKCJbU3ltYm9sLml0ZXJhdG9yXSIsICJwb2ludHMiKSwKICAgIEpTX0FMSUFTX0RFRigic2l6ZSIsICJsZW5ndGgiKSwKICAgIC8vICAgIEpTX0FMSUFTX0RFRigiW1N5bWJvbC50b1N0cmluZ1RhZ10iLCAidG9TdHJpbmciKSwKCiAgICBKU19QUk9QX1NUUklOR19ERUYoIltTeW1ib2wudG9TdHJpbmdUYWddIiwgIkNvbnRvdXIiLCBKU19QUk9QX0NPTkZJR1VSQUJMRSksCgp9Owpjb25zdCBKU0NGdW5jdGlvbkxpc3RFbnRyeSBqc19jb250b3VyX3N0YXRpY19mdW5jc1tdID0gewogICAgSlNfQ0ZVTkNfREVGKCJmcm9tUmVjdCIsIDEsIGpzX2NvbnRvdXJfcmVjdCksCiAgICBKU19QUk9QX0lOVDMyX0RFRigiRk9STUFUX1hZIiwgMHgwMCwgMCksCiAgICBKU19QUk9QX0lOVDMyX0RFRigiRk9STUFUXzAxIiwgMHgwMiwgMCksCiAgICBKU19QUk9QX0lOVDMyX0RFRigiRk9STUFUX1NQQUNFIiwgMHgxMCwgMCksCiAgICBKU19QUk9QX0lOVDMyX0RFRigiRk9STUFUX0NPTU1BIiwgMHgwMCwgMCksCiAgICBKU19QUk9QX0lOVDMyX0RFRigiRk9STUFUX0JSQUNLRVQiLCAweDAwLCAwKSwKICAgIEpTX1BST1BfSU5UMzJfREVGKCJGT1JNQVRfTk9CUkFDS0VUIiwgMHgxMDAsIDApLAp9OwoKaW50CmpzX2NvbnRvdXJfaW5pdChKU0NvbnRleHQqIGN0eCwgSlNNb2R1bGVEZWYqIG0pIHsKCiAgaWYoanNfY29udG91cl9jbGFzc19pZCA9PSAwKSB7CiAgICAvKiBjcmVhdGUgdGhlIENvbnRvdXIgY2xhc3MgKi8KICAgIEpTX05ld0NsYXNzSUQoJmpzX2NvbnRvdXJfY2xhc3NfaWQpOwogICAgSlNfTmV3Q2xhc3MoSlNfR2V0UnVudGltZShjdHgpLCBqc19jb250b3VyX2NsYXNzX2lkLCAmanNfY29udG91cl9jbGFzcyk7CgogICAgY29udG91cl9wcm90byA9IEpTX05ld09iamVjdChjdHgpOwogICAgSlNfU2V0UHJvcGVydHlGdW5jdGlvbkxpc3QoY3R4LCBjb250b3VyX3Byb3RvLCBqc19jb250b3VyX3Byb3RvX2Z1bmNzLCBjb3VudG9mKGpzX2NvbnRvdXJfcHJvdG9fZnVuY3MpKTsKICAgIEpTX1NldENsYXNzUHJvdG8oY3R4LCBqc19jb250b3VyX2NsYXNzX2lkLCBjb250b3VyX3Byb3RvKTsKCiAgICBjb250b3VyX2NsYXNzID0gSlNfTmV3Q0Z1bmN0aW9uMihjdHgsIGpzX2NvbnRvdXJfY29uc3RydWN0b3IsICJDb250b3VyIiwgMiwgSlNfQ0ZVTkNfY29uc3RydWN0b3IsIDApOwogICAgLyogc2V0IHByb3RvLmNvbnN0cnVjdG9yIGFuZCBjdG9yLnByb3RvdHlwZSAqLwogICAgSlNfU2V0Q29uc3RydWN0b3IoY3R4LCBjb250b3VyX2NsYXNzLCBjb250b3VyX3Byb3RvKTsKICAgIEpTX1NldFByb3BlcnR5RnVuY3Rpb25MaXN0KGN0eCwgY29udG91cl9jbGFzcywganNfY29udG91cl9zdGF0aWNfZnVuY3MsIGNvdW50b2YoanNfY29udG91cl9zdGF0aWNfZnVuY3MpKTsKICB9CiAganNfc2V0X2luc3BlY3RfbWV0aG9kKGN0eCwgY29udG91cl9wcm90bywganNfY29udG91cl9pbnNwZWN0KTsKCiAgewogICAgSlNWYWx1ZSBnbG9iYWwgPSBKU19HZXRHbG9iYWxPYmplY3QoY3R4KTsKICAgIGZsb2F0NjRfYXJyYXkgPSBKU19HZXRQcm9wZXJ0eVN0cihjdHgsIGdsb2JhbCwgIkZsb2F0NjRBcnJheSIpOwogIH0KCiAgaWYobSkKICAgIEpTX1NldE1vZHVsZUV4cG9ydChjdHgsIG0sICJDb250b3VyIiwgY29udG91cl9jbGFzcyk7CiAgLyogIGVsc2UKICAgICAgSlNfU2V0UHJvcGVydHlTdHIoY3R4LCAqc3RhdGljX2Nhc3Q8SlNWYWx1ZSo+KG0pLCAiQ29udG91ciIsIGNvbnRvdXJfY2xhc3MpOyovCiAgcmV0dXJuIDA7Cn0KCmV4dGVybiAiQyIgVklTSUJMRSB2b2lkCmpzX2NvbnRvdXJfZXhwb3J0KEpTQ29udGV4dCogY3R4LCBKU01vZHVsZURlZiogbSkgewogIEpTX0FkZE1vZHVsZUV4cG9ydChjdHgsIG0sICJDb250b3VyIik7Cn0KCiNpZiBkZWZpbmVkKEpTX0NPTlRPVVJfTU9EVUxFKQojZGVmaW5lIEpTX0lOSVRfTU9EVUxFIC8qVklTSUJMRSovIGpzX2luaXRfbW9kdWxlCiNlbHNlCiNkZWZpbmUgSlNfSU5JVF9NT0RVTEUgLypWSVNJQkxFKi8ganNfaW5pdF9tb2R1bGVfY29udG91cgojZW5kaWYKCkpTTW9kdWxlRGVmKgpKU19JTklUX01PRFVMRShKU0NvbnRleHQqIGN0eCwgY29uc3QgY2hhciogbW9kdWxlX25hbWUpIHsKICBKU01vZHVsZURlZiogbTsKICBtID0gSlNfTmV3Q01vZHVsZShjdHgsIG1vZHVsZV9uYW1lLCAmanNfY29udG91cl9pbml0KTsKICBpZighbSkKICAgIHJldHVybiBOVUxMOwogIGpzX2NvbnRvdXJfZXhwb3J0KGN0eCwgbSk7CiAgcmV0dXJuIG07Cn0KfQoAAAAAAAAAAEl+AAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAyyAAAAAAAADLIAAAAAAAAAAAAAAAAPC/"
				]
			]
		},
		{
			"file": "js_line.cpp",
			"settings":
			{
				"buffer_size": 14400,
				"line_ending": "Unix"
			},
			"undo_stack":
			[
				[
					7,
					1,
					"join_lines",
					null,
					"AgAAABA0AAAAAAAAEDQAAAAAAAABAAAAChA0AAAAAAAAETQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAEDQAAAAAAAAQNAAAAAAAAAAAAAAAAPC/"
				],
				[
					21,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAAChOQAAI2luY2x1ZGUgImpzYmluZGluZ3MuaHBwIgojaW5jbHVkZSAianNfcG9pbnQuaHBwIgojaW5jbHVkZSAianNfYWxsb2MuaHBwIgojaW5jbHVkZSAianNfbGluZS5ocHAiCiNpbmNsdWRlICJqc19hcnJheS5ocHAiCiNpbmNsdWRlICJqc190eXBlZF9hcnJheS5ocHAiCiNpbmNsdWRlICJ1dGlsLmhwcCIKI2luY2x1ZGUgImxpbmUuaHBwIgoKZW51bSB7IFBST1BfU0xPUEUgPSAwLCBQUk9QX1BJVk9ULCBQUk9QX1RPLCBQUk9QX0FOR0xFLCBQUk9QX0xFTkdUSCB9OwplbnVtIHsgTUVUSE9EX1NXQVAgPSAwLCBNRVRIT0RfQVQsIE1FVEhPRF9JTlRFUlNFQ1QsIE1FVEhPRF9FTkRQT0lOVF9ESVNUQU5DRVMsIE1FVEhPRF9ESVNUQU5DRSB9OwoKZXh0ZXJuICJDIiB7CgpKU1ZhbHVlIGxpbmVfcHJvdG8gPSBKU19VTkRFRklORUQsIGxpbmVfY2xhc3MgPSBKU19VTkRFRklORUQ7CkpTQ2xhc3NJRCBqc19saW5lX2NsYXNzX2lkID0gMDsKClZJU0lCTEUgSlNWYWx1ZQpqc19saW5lX25ldyhKU0NvbnRleHQqIGN0eCwgZG91YmxlIHgxLCBkb3VibGUgeTEsIGRvdWJsZSB4MiwgZG91YmxlIHkyKSB7CiAgSlNWYWx1ZSByZXQ7CiAgSlNMaW5lRGF0YTxkb3VibGU+KiBsbjsKCiAgaWYoSlNfSXNVbmRlZmluZWQobGluZV9wcm90bykpCiAgICBqc19saW5lX2luaXQoY3R4LCBOVUxMKTsKCiAgcmV0ID0gSlNfTmV3T2JqZWN0UHJvdG9DbGFzcyhjdHgsIGxpbmVfcHJvdG8sIGpzX2xpbmVfY2xhc3NfaWQpOwoKICBsbiA9IGpzX2FsbG9jYXRlPEpTTGluZURhdGE8ZG91YmxlPj4oY3R4KTsKCiAgbG4tPmFycmF5WzBdID0geDE7CiAgbG4tPmFycmF5WzFdID0geTE7CiAgbG4tPmFycmF5WzJdID0geDI7CiAgbG4tPmFycmF5WzNdID0geTI7CgogIEpTX1NldE9wYXF1ZShyZXQsIGxuKTsKICByZXR1cm4gcmV0Owp9CgpzdGF0aWMgSlNWYWx1ZQpqc19saW5lX2N0b3IoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCBuZXdfdGFyZ2V0LCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2KSB7CiAgSlNMaW5lRGF0YTxkb3VibGU+KiBsbjsKICBKU1ZhbHVlIG9iaiA9IEpTX1VOREVGSU5FRDsKICBKU1ZhbHVlIHByb3RvOwogIGF1dG8gYXJncyA9IGFyZ3VtZW50X3JhbmdlKHN0ZDo6bWluKDQsIGFyZ2MpLCBhcmd2KTsKCiAgbG4gPSBqc19hbGxvY2F0ZTxKU0xpbmVEYXRhPGRvdWJsZT4+KGN0eCk7CiAgaWYoIWxuKQogICAgcmV0dXJuIEpTX0VYQ0VQVElPTjsKCiAgaWYoYXJnYyA+PSA0ICYmIHN0ZDo6cmFuZ2VzOjphbGxfb2YoYXJncywgSlNfSXNOdW1iZXIpKSB7CiAgICBpZihKU19Ub0Zsb2F0NjQoY3R4LCAmbG4tPmFycmF5WzBdLCBhcmd2WzBdKSkKICAgICAgZ290byBmYWlsOwogICAgaWYoSlNfVG9GbG9hdDY0KGN0eCwgJmxuLT5hcnJheVsxXSwgYXJndlsxXSkpCiAgICAgIGdvdG8gZmFpbDsKICAgIGlmKEpTX1RvRmxvYXQ2NChjdHgsICZsbi0+YXJyYXlbMl0sIGFyZ3ZbMl0pKQogICAgICBnb3RvIGZhaWw7CiAgICBpZihKU19Ub0Zsb2F0NjQoY3R4LCAmbG4tPmFycmF5WzNdLCBhcmd2WzNdKSkKICAgICAgZ290byBmYWlsOwogIH0gZWxzZSBpZighanNfbGluZV9yZWFkKGN0eCwgYXJndlswXSwgbG4pKSB7CiAgICByZXR1cm4gSlNfVGhyb3dUeXBlRXJyb3IoY3R4LCAiYXJndW1lbnQgMSBpcyBub3QgYSB2YWxpZCBsaW5lIik7CiAgfQogIC8qIHVzaW5nIG5ld190YXJnZXQgdG8gZ2V0IHRoZSBwcm90b3R5cGUgaXMgbmVjZXNzYXJ5IHdoZW4gdGhlCiAgICAgY2xhc3MgaXMgZXh0ZW5kZWQuICovCiAgcHJvdG8gPSBKU19HZXRQcm9wZXJ0eVN0cihjdHgsIG5ld190YXJnZXQsICJwcm90b3R5cGUiKTsKICBpZihKU19Jc0V4Y2VwdGlvbihwcm90bykpCiAgICBnb3RvIGZhaWw7CiAgb2JqID0gSlNfTmV3T2JqZWN0UHJvdG9DbGFzcyhjdHgsIHByb3RvLCBqc19saW5lX2NsYXNzX2lkKTsKICBKU19GcmVlVmFsdWUoY3R4LCBwcm90byk7CiAgaWYoSlNfSXNFeGNlcHRpb24ob2JqKSkKICAgIGdvdG8gZmFpbDsKICBKU19TZXRPcGFxdWUob2JqLCBsbik7CiAgcmV0dXJuIG9iajsKZmFpbDoKICBqc19kZWFsbG9jYXRlKGN0eCwgbG4pOwogIEpTX0ZyZWVWYWx1ZShjdHgsIG9iaik7CiAgcmV0dXJuIEpTX0VYQ0VQVElPTjsKfQoKSlNMaW5lRGF0YTxkb3VibGU+Kgpqc19saW5lX2RhdGEoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB2YWwpIHsKICByZXR1cm4gc3RhdGljX2Nhc3Q8SlNMaW5lRGF0YTxkb3VibGU+Kj4oSlNfR2V0T3BhcXVlMihjdHgsIHZhbCwganNfbGluZV9jbGFzc19pZCkpOwp9CgpzdGF0aWMgSlNWYWx1ZQpqc19saW5lX2dldF94eTEyKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBtYWdpYykgewogIEpTVmFsdWUgcmV0ID0gSlNfVU5ERUZJTkVEOwogIEpTTGluZURhdGE8ZG91YmxlPiogbG4gPSBzdGF0aWNfY2FzdDxKU0xpbmVEYXRhPGRvdWJsZT4qPihKU19HZXRPcGFxdWUyKGN0eCwgdGhpc192YWwsIGpzX2xpbmVfY2xhc3NfaWQpKTsKICBpZighbG4pCiAgICByZXQgPSBKU19FWENFUFRJT047CiAgZWxzZSBpZihtYWdpYyA9PSAwKQogICAgcmV0ID0gSlNfTmV3RmxvYXQ2NChjdHgsIGxuLT5hcnJheVswXSk7CiAgZWxzZSBpZihtYWdpYyA9PSAxKQogICAgcmV0ID0gSlNfTmV3RmxvYXQ2NChjdHgsIGxuLT5hcnJheVsxXSk7CiAgZWxzZSBpZihtYWdpYyA9PSAyKQogICAgcmV0ID0gSlNfTmV3RmxvYXQ2NChjdHgsIGxuLT5hcnJheVsyXSk7CiAgZWxzZSBpZihtYWdpYyA9PSAzKQogICAgcmV0ID0gSlNfTmV3RmxvYXQ2NChjdHgsIGxuLT5hcnJheVszXSk7CiAgcmV0dXJuIHJldDsKfQoKc3RhdGljIEpTVmFsdWUKanNfbGluZV9nZXRfYWIoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgaW50IG1hZ2ljKSB7CiAgSlNWYWx1ZSByZXQgPSBKU19VTkRFRklORUQ7CiAgSlNMaW5lRGF0YTxkb3VibGU+KiBsbiA9IHN0YXRpY19jYXN0PEpTTGluZURhdGE8ZG91YmxlPio+KEpTX0dldE9wYXF1ZTIoY3R4LCB0aGlzX3ZhbCwganNfbGluZV9jbGFzc19pZCkpOwogIGlmKCFsbikKICAgIHJldCA9IEpTX0VYQ0VQVElPTjsKICBlbHNlIGlmKG1hZ2ljID09IDApCiAgICByZXQgPSBqc19wb2ludF9uZXcoY3R4LCBsbi0+YXJyYXlbMF0sIGxuLT5hcnJheVsxXSk7CiAgZWxzZSBpZihtYWdpYyA9PSAxKQogICAgcmV0ID0ganNfcG9pbnRfbmV3KGN0eCwgbG4tPmFycmF5WzJdLCBsbi0+YXJyYXlbM10pOwoKICByZXR1cm4gcmV0Owp9CgpzdGF0aWMgSlNWYWx1ZQpqc19saW5lX2dldChKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgbWFnaWMpIHsKICBKU0xpbmVEYXRhPGRvdWJsZT4qIGxuOwoKICBpZighKGxuID0gc3RhdGljX2Nhc3Q8SlNMaW5lRGF0YTxkb3VibGU+Kj4oSlNfR2V0T3BhcXVlMihjdHgsIHRoaXNfdmFsLCBqc19saW5lX2NsYXNzX2lkKSkpKQogICAgcmV0dXJuIEpTX0VYQ0VQVElPTjsKICBzd2l0Y2gobWFnaWMpIHsKICAgIGNhc2UgUFJPUF9TTE9QRTogewogICAgICBMaW5lPGRvdWJsZT4gbGluZShsbi0+YXJyYXkpOwogICAgICByZXR1cm4ganNfcG9pbnRfd3JhcChjdHgsIGxpbmUuc2xvcGUoKSk7CiAgICB9CiAgICBjYXNlIFBST1BfUElWT1Q6IHsKICAgICAgSlNQb2ludERhdGE8ZG91YmxlPiBwaXZvdChsbi0+eDEsIGxuLT55MSk7CiAgICAgIHJldHVybiBqc19wb2ludF93cmFwKGN0eCwgcGl2b3QpOwogICAgfQogICAgY2FzZSBQUk9QX1RPOiB7CiAgICAgIEpTUG9pbnREYXRhPGRvdWJsZT4gdG8obG4tPngyLCBsbi0+eTIpOwogICAgICByZXR1cm4ganNfcG9pbnRfd3JhcChjdHgsIHRvKTsKICAgIH0KICAgIGNhc2UgUFJPUF9BTkdMRTogewogICAgICBMaW5lPGRvdWJsZT4gbGluZShsbi0+YXJyYXkpOwogICAgICByZXR1cm4gSlNfTmV3RmxvYXQ2NChjdHgsIHN0ZDo6YXRhbjIobG4tPngyIC0gbG4tPngxLCBsbi0+eTIgLSBsbi0+eTEpKTsKICAgIH0KICAgIGNhc2UgUFJPUF9MRU5HVEg6IHsKICAgICAgTGluZTxkb3VibGU+IGxpbmUobG4tPmFycmF5KTsKICAgICAgcmV0dXJuIEpTX05ld0Zsb2F0NjQoY3R4LCBsaW5lLmxlbmd0aCgpKTsKICAgIH0KICB9CiAgcmV0dXJuIEpTX1VOREVGSU5FRDsKfQoKc3RhdGljIEpTVmFsdWUKanNfbGluZV9zZXQoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgSlNWYWx1ZUNvbnN0IHZhbCwgaW50IG1hZ2ljKSB7CiAgSlNMaW5lRGF0YTxkb3VibGU+KiBsbjsKICBkb3VibGUgdjsKICBpZighKGxuID0gc3RhdGljX2Nhc3Q8SlNMaW5lRGF0YTxkb3VibGU+Kj4oSlNfR2V0T3BhcXVlMihjdHgsIHRoaXNfdmFsLCBqc19saW5lX2NsYXNzX2lkKSkpKQogICAgcmV0dXJuIEpTX0VYQ0VQVElPTjsKICBzd2l0Y2gobWFnaWMpIHsKICAgIGNhc2UgUFJPUF9QSVZPVDogewogICAgICBKU1BvaW50RGF0YTxkb3VibGU+IHBpdm90OwogICAgICBqc19wb2ludF9yZWFkKGN0eCwgdmFsLCAmcGl2b3QpOwoKICAgICAgbG4tPngxID0gcGl2b3QueDsKICAgICAgbG4tPnkxID0gcGl2b3QueTsKICAgICAgYnJlYWs7CiAgICB9CiAgICBjYXNlIFBST1BfVE86IHsKICAgICAgSlNQb2ludERhdGE8ZG91YmxlPiB0bzsKICAgICAganNfcG9pbnRfcmVhZChjdHgsIHZhbCwgJnRvKTsKCiAgICAgIGxuLT54MiA9IHRvLng7CiAgICAgIGxuLT55MiA9IHRvLnk7CiAgICAgIGJyZWFrOwogICAgfQogIH0KCiAgcmV0dXJuIEpTX1VOREVGSU5FRDsKfQoKc3RhdGljIEpTVmFsdWUKanNfbGluZV9zZXRfeHkxMihKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBKU1ZhbHVlQ29uc3QgdmFsLCBpbnQgbWFnaWMpIHsKICBKU0xpbmVEYXRhPGRvdWJsZT4qIGxuID0gc3RhdGljX2Nhc3Q8SlNMaW5lRGF0YTxkb3VibGU+Kj4oSlNfR2V0T3BhcXVlMihjdHgsIHRoaXNfdmFsLCBqc19saW5lX2NsYXNzX2lkKSk7CiAgZG91YmxlIHY7CiAgaWYoIWxuKQogICAgcmV0dXJuIEpTX0VYQ0VQVElPTjsKICBpZihKU19Ub0Zsb2F0NjQoY3R4LCAmdiwgdmFsKSkKICAgIHJldHVybiBKU19FWENFUFRJT047CiAgaWYobWFnaWMgPT0gMCkKICAgIGxuLT5hcnJheVswXSA9IHY7CiAgZWxzZSBpZihtYWdpYyA9PSAxKQogICAgbG4tPmFycmF5WzFdID0gdjsKICBlbHNlIGlmKG1hZ2ljID09IDIpCiAgICBsbi0+YXJyYXlbMl0gPSB2OwogIGVsc2UgaWYobWFnaWMgPT0gMykKICAgIGxuLT5hcnJheVszXSA9IHY7CgogIHJldHVybiBKU19VTkRFRklORUQ7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX2xpbmVfc2V0X2FiKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIEpTVmFsdWVDb25zdCB2YWwsIGludCBtYWdpYykgewogIEpTTGluZURhdGE8ZG91YmxlPiogbG47CiAgSlNQb2ludERhdGE8ZG91YmxlPiBwdDsKCiAgaWYoIShsbiA9IHN0YXRpY19jYXN0PEpTTGluZURhdGE8ZG91YmxlPio+KEpTX0dldE9wYXF1ZTIoY3R4LCB0aGlzX3ZhbCwganNfbGluZV9jbGFzc19pZCkpKSkKICAgIHJldHVybiBKU19FWENFUFRJT047CgogIGpzX3BvaW50X3JlYWQoY3R4LCB2YWwsICZwdCk7CgogIGlmKG1hZ2ljID09IDApIHsKICAgIGxuLT5hcnJheVswXSA9IHB0Lng7CiAgICBsbi0+YXJyYXlbMV0gPSBwdC55OwoKICB9IGVsc2UgaWYobWFnaWMgPT0gMSkgewogICAgbG4tPmFycmF5WzJdID0gcHQueDsKICAgIGxuLT5hcnJheVszXSA9IHB0Lnk7CiAgfQoKICByZXR1cm4gSlNfVU5ERUZJTkVEOwp9CgpzdGF0aWMgSlNWYWx1ZQpqc19saW5lX3BvaW50cyhKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2KSB7CiAgSlNMaW5lRGF0YTxkb3VibGU+KiBsbjsKCiAgaWYoIShsbiA9IHN0YXRpY19jYXN0PEpTTGluZURhdGE8ZG91YmxlPio+KEpTX0dldE9wYXF1ZTIoY3R4LCB0aGlzX3ZhbCwganNfbGluZV9jbGFzc19pZCkpKSkKICAgIHJldHVybiBKU19FWENFUFRJT047CgogIHJldHVybiBqc19hcnJheV9mcm9tKGN0eCwgbG4tPnBvaW50cyk7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX2xpbmVfaW5zcGVjdChKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2KSB7CiAgSlNMaW5lRGF0YTxkb3VibGU+KiBsbiA9IGpzX2xpbmVfZGF0YShjdHgsIHRoaXNfdmFsKTsKICBKU1ZhbHVlIG9iaiA9IEpTX05ld09iamVjdFByb3RvKGN0eCwgbGluZV9wcm90byk7CgogIEpTX0RlZmluZVByb3BlcnR5VmFsdWVTdHIoY3R4LCBvYmosICJ4MSIsIEpTX05ld0Zsb2F0NjQoY3R4LCBsbi0+eDEpLCBKU19QUk9QX0VOVU1FUkFCTEUpOwogIEpTX0RlZmluZVByb3BlcnR5VmFsdWVTdHIoY3R4LCBvYmosICJ5MSIsIEpTX05ld0Zsb2F0NjQoY3R4LCBsbi0+eTEpLCBKU19QUk9QX0VOVU1FUkFCTEUpOwogIEpTX0RlZmluZVByb3BlcnR5VmFsdWVTdHIoY3R4LCBvYmosICJ4MiIsIEpTX05ld0Zsb2F0NjQoY3R4LCBsbi0+eDIpLCBKU19QUk9QX0VOVU1FUkFCTEUpOwogIEpTX0RlZmluZVByb3BlcnR5VmFsdWVTdHIoY3R4LCBvYmosICJ5MiIsIEpTX05ld0Zsb2F0NjQoY3R4LCBsbi0+eTIpLCBKU19QUk9QX0VOVU1FUkFCTEUpOwogIHJldHVybiBvYmo7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX2xpbmVfbWV0aG9kcyhKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2LCBpbnQgbWFnaWMpIHsKICBKU0xpbmVEYXRhPGRvdWJsZT4qIGxuOwogIEpTVmFsdWUgcmV0ID0gSlNfVU5ERUZJTkVEOwogIGlmKCEobG4gPSBzdGF0aWNfY2FzdDxKU0xpbmVEYXRhPGRvdWJsZT4qPihKU19HZXRPcGFxdWUyKGN0eCwgdGhpc192YWwsIGpzX2xpbmVfY2xhc3NfaWQpKSkpCiAgICByZXR1cm4gSlNfRVhDRVBUSU9OOwoKICBzd2l0Y2gobWFnaWMpIHsKICAgIGNhc2UgTUVUSE9EX1NXQVA6IHsKICAgICAgSlNQb2ludERhdGE8ZG91YmxlPiBhID0gbG4tPnBvaW50c1swXSwgYiA9IGxuLT5wb2ludHNbMV07CiAgICAgIGxuLT5wb2ludHNbMF0gPSBiOwogICAgICBsbi0+cG9pbnRzWzFdID0gYTsKICAgICAgcmV0ID0gSlNfRHVwVmFsdWUoY3R4LCB0aGlzX3ZhbCk7CiAgICAgIGJyZWFrOwogICAgfQogICAgY2FzZSBNRVRIT0RfQVQ6IHsKICAgICAgZG91YmxlIHNpZ21hOwogICAgICBKU1BvaW50RGF0YTxkb3VibGU+IHA7CiAgICAgIGpzX3ZhbHVlX3RvKGN0eCwgYXJndlswXSwgc2lnbWEpOwoKICAgICAgc2lnbWEgPSBmbWluKGZtYXgoc2lnbWEsIDEpLCAwKTsKCiAgICAgIHAueCA9IGxuLT5wb2ludHNbMF0ueCAqICgxLjAgLSBzaWdtYSkgKyBsbi0+cG9pbnRzWzFdLnggKiBzaWdtYTsKICAgICAgcC55ID0gbG4tPnBvaW50c1swXS55ICogKDEuMCAtIHNpZ21hKSArIGxuLT5wb2ludHNbMV0ueSAqIHNpZ21hOwoKICAgICAgcmV0ID0ganNfcG9pbnRfd3JhcChjdHgsIHApOwogICAgICBicmVhazsKICAgIH0KICAgIGNhc2UgTUVUSE9EX0lOVEVSU0VDVDogewogICAgICBzdGQ6OmFycmF5PGRvdWJsZSwgND4gYXJnID0ganNfbGluZV9nZXQ8ZG91YmxlPihjdHgsIGFyZ3ZbMF0pOwogICAgICBKU1BvaW50RGF0YTxkb3VibGU+KiBwb2ludCA9IG51bGxwdHI7CgogICAgICBpZihhcmdjID4gMSkKICAgICAgICBwb2ludCA9IGpzX3BvaW50X2RhdGEoY3R4LCBhcmd2WzFdKTsKCiAgICAgIExpbmU8ZG91YmxlPiBsaW5lID0gTGluZShsbi0+YXJyYXkpOwogICAgICBMaW5lPGRvdWJsZT4gb3RoZXIgPSBMaW5lKGFyZyk7CgogICAgICByZXQgPSBKU19OZXdCb29sKGN0eCwgbGluZS5pbnRlcnNlY3Qob3RoZXIsIHBvaW50KSk7CiAgICAgIGJyZWFrOwogICAgfQogICAgY2FzZSBNRVRIT0RfRU5EUE9JTlRfRElTVEFOQ0VTOiB7CiAgICAgIEpTUG9pbnREYXRhPGRvdWJsZT4gcHQ7CiAgICAgIGpzX3BvaW50X3JlYWQoY3R4LCBhcmd2WzBdLCAmcHQpOwogICAgICBMaW5lPGRvdWJsZT4gbGluZSA9IExpbmUobG4tPmFycmF5KTsKICAgICAgYXV0byBkaXN0YW5jZXMgPSBsaW5lLmVuZHBvaW50X2Rpc3RhbmNlcyhwdCk7CiAgICAgIHJldCA9IEpTX05ld0FycmF5KGN0eCk7CiAgICAgIEpTX1NldFByb3BlcnR5VWludDMyKGN0eCwgcmV0LCAwLCBqc19udW1iZXJfbmV3KGN0eCwgZGlzdGFuY2VzLmZpcnN0KSk7CiAgICAgIEpTX1NldFByb3BlcnR5VWludDMyKGN0eCwgcmV0LCAxLCBqc19udW1iZXJfbmV3KGN0eCwgZGlzdGFuY2VzLnNlY29uZCkpOwogICAgICBicmVhazsKICAgIH0KICAgIGNhc2UgTUVUSE9EX0RJU1RBTkNFOiB7CiAgICAgIGN2OjpQb2ludDJkIHB0OwogICAgICBqc19wb2ludF9yZWFkKGN0eCwgYXJndlswXSwgJnB0KTsKICAgICAgTGluZTxkb3VibGU+IGxpbmUgPSBMaW5lKGxuLT5hcnJheSk7CiAgICAgIHJldCA9IGpzX251bWJlcl9uZXcoY3R4LCBsaW5lLmRpc3RhbmNlKHB0KSk7CiAgICAgIGJyZWFrOwogICAgfQogIH0KICByZXR1cm4gcmV0Owp9CgpzdGF0aWMgSlNWYWx1ZQpqc19saW5lX3RvYXJyYXkoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCBsaW5lLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmcpIHsKICBKU0xpbmVEYXRhPGRvdWJsZT4qIGxuOwoKICBpZighKGxuID0gc3RhdGljX2Nhc3Q8SlNMaW5lRGF0YTxkb3VibGU+Kj4oSlNfR2V0T3BhcXVlMihjdHgsIGxpbmUsIGpzX2xpbmVfY2xhc3NfaWQpKSkpCiAgICByZXR1cm4gSlNfRVhDRVBUSU9OOwoKICByZXR1cm4ganNfdHlwZWRhcnJheV9mcm9tKGN0eCwgbG4tPmFycmF5KTsKfQoKc3RhdGljIEpTVmFsdWUKanNfY2FsbF9tZXRob2QoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWUgb2JqLCBjb25zdCBjaGFyKiBuYW1lLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2KSB7CiAgSlNWYWx1ZSBmbiwgcmV0ID0gSlNfVU5ERUZJTkVEOwoKICBmbiA9IEpTX0dldFByb3BlcnR5U3RyKGN0eCwgb2JqLCBuYW1lKTsKICBpZighSlNfSXNVbmRlZmluZWQoZm4pKQogICAgcmV0ID0gSlNfQ2FsbChjdHgsIGZuLCBvYmosIGFyZ2MsIGFyZ3YpOwogIHJldHVybiByZXQ7Cn0KCiNkZWZpbmUgSlNfTElORV9BU19QT0lOVFMgMHgwMQojZGVmaW5lIEpTX0xJTkVfQVNfVkVDVE9SIDB4MDIKCiNkZWZpbmUgSlNfTElORV9HRVRfSVRFUkFUT1IgMHg4MAojZGVmaW5lIEpTX0xJTkVfVE9fU1RSSU5HIDB4NDAKCnN0YXRpYyBKU1ZhbHVlCmpzX2xpbmVfaXRlcmF0b3IoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCogYXJndiwgaW50IG1hZ2ljKSB7CiAgSlNMaW5lRGF0YTxkb3VibGU+KiBsbiA9IHN0YXRpY19jYXN0PEpTTGluZURhdGE8ZG91YmxlPio+KEpTX0dldE9wYXF1ZTIoY3R4LCB0aGlzX3ZhbCwganNfbGluZV9jbGFzc19pZCkpOwogIEpTVmFsdWUgbWV0aG9kLCByZXQgPSBKU19VTkRFRklORUQ7CgogIGlmKG1hZ2ljICYgSlNfTElORV9BU19QT0lOVFMpCiAgICByZXQgPSBqc19saW5lX3BvaW50cyhjdHgsIHRoaXNfdmFsLCBhcmdjLCBhcmd2KTsKICBpZihtYWdpYyAmIEpTX0xJTkVfQVNfVkVDVE9SKQogICAgcmV0ID0ganNfbGluZV90b2FycmF5KGN0eCwgdGhpc192YWwsIGFyZ2MsIGFyZ3YpOwoKICBpZihtYWdpYyAmIEpTX0xJTkVfR0VUX0lURVJBVE9SKQogICAgcmV0ID0ganNfY2FsbF9tZXRob2QoY3R4LCByZXQsICJ2YWx1ZXMiLCAwLCBOVUxMKTsKCiAgaWYobWFnaWMgJiBKU19MSU5FX1RPX1NUUklORykgewogICAgSlNWYWx1ZUNvbnN0IGFyZ3NbMV0gPSB7MH07CiAgICBhcmdzWzBdID0gSlNfTmV3U3RyaW5nKGN0eCwgIiAiKTsKCiAgICByZXQgPSBqc19jYWxsX21ldGhvZChjdHgsIHJldCwgImpvaW4iLCAxLCBhcmdzKTsKICB9CgogIHJldHVybiByZXQ7Cn0KLyoKc3RhdGljIEpTVmFsdWUKanNfbGluZV9zeW1ib2xfaXRlcmF0b3IoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCogYXJndikgewogIEpTVmFsdWUgYXJyLCBpdGVyOwogIGpzcnQganMoY3R4KTsKICBhcnIgPSBqc19saW5lX3RvX2FycmF5KGN0eCwgdGhpc192YWwsIGFyZ2MsIGFyZ3YpOwoKICBpZihKU19Jc1VuZGVmaW5lZChpdGVyYXRvcl9zeW1ib2wpKQogICAgaXRlcmF0b3Jfc3ltYm9sID0ganMuZ2V0X3N5bWJvbCgiaXRlcmF0b3IiKTsKCiAgaWYoIUpTX0lzRnVuY3Rpb24oY3R4LCAoaXRlciA9IGpzLmdldF9wcm9wZXJ0eShhcnIsIGl0ZXJhdG9yX3N5bWJvbCkpKSkKICAgIHJldHVybiBKU19FWENFUFRJT047CiAgcmV0dXJuIEpTX0NhbGwoY3R4LCBpdGVyLCBhcnIsIDAsIGFyZ3YpOwp9Ki8KCnN0YXRpYyBKU1ZhbHVlCmpzX2xpbmVfZnJvbShKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2KSB7CiAgSlNMaW5lRGF0YTxkb3VibGU+IGxpbmUgPSB7MCwgMCwgMCwgMH07CiAgSlNWYWx1ZSByZXQgPSBKU19FWENFUFRJT047CgogIGlmKEpTX0lzU3RyaW5nKGFyZ3ZbMF0pKSB7CiAgICBjb25zdCBjaGFyKiBzdHIgPSBKU19Ub0NTdHJpbmcoY3R4LCBhcmd2WzBdKTsKICAgIGNoYXIqIGVuZHB0ciA9IG51bGxwdHI7CiAgICBmb3Ioc2l6ZV90IGkgPSAwOyBpIDwgNDsgaSsrKSB7CiAgICAgIHdoaWxlKCFpc2RpZ2l0KCpzdHIpICYmICpzdHIgIT0gJy0nICYmICpzdHIgIT0gJysnICYmICEoKnN0ciA9PSAnLicgJiYgaXNkaWdpdChzdHJbMV0pKSkgc3RyKys7CiAgICAgIGlmKCpzdHIgPT0gJ1wwJykKICAgICAgICBicmVhazsKICAgICAgbGluZS5hcnJheVtpXSA9IHN0cnRvZChzdHIsICZlbmRwdHIpOwogICAgICBzdHIgPSBlbmRwdHI7CiAgICB9CiAgfSBlbHNlIHsKICAgIGpzX2xpbmVfcmVhZChjdHgsIGFyZ3ZbMF0sICZsaW5lKTsKICB9CiAgaWYobGluZS5hcnJheVsyXSA+IDAgJiYgbGluZS5hcnJheVszXSA+IDApCiAgICByZXQgPSBqc19saW5lX25ldyhjdHgsIGxpbmUuYXJyYXlbMF0sIGxpbmUuYXJyYXlbMV0sIGxpbmUuYXJyYXlbMl0sIGxpbmUuYXJyYXlbM10pOwogIHJldHVybiByZXQ7Cn0KCnZvaWQKanNfbGluZV9maW5hbGl6ZXIoSlNSdW50aW1lKiBydCwgSlNWYWx1ZSB2YWwpIHsKICBKU0xpbmVEYXRhPGRvdWJsZT4qIGxuOwoKICBpZigobG4gPSBzdGF0aWNfY2FzdDxKU0xpbmVEYXRhPGRvdWJsZT4qPihKU19HZXRPcGFxdWUodmFsLCBqc19saW5lX2NsYXNzX2lkKSkpKQogICAgLyogTm90ZTogJ2xuJyBjYW4gYmUgTlVMTCBpbiBjYXNlIEpTX1NldE9wYXF1ZSgpIHdhcyBub3QgY2FsbGVkICovCiAgICBqc19kZWFsbG9jYXRlKHJ0LCBsbik7Cn0KCkpTQ2xhc3NEZWYganNfbGluZV9jbGFzcyA9IHsKICAgIC5jbGFzc19uYW1lID0gIkxpbmUiLAogICAgLmZpbmFsaXplciA9IGpzX2xpbmVfZmluYWxpemVyLAp9OwoKY29uc3QgSlNDRnVuY3Rpb25MaXN0RW50cnkganNfbGluZV9wcm90b19mdW5jc1tdID0gewogICAgSlNfQ0dFVFNFVF9FTlVNRVJBQkxFX0RFRigieDEiLCBqc19saW5lX2dldF94eTEyLCBqc19saW5lX3NldF94eTEyLCAwKSwKICAgIEpTX0NHRVRTRVRfRU5VTUVSQUJMRV9ERUYoInkxIiwganNfbGluZV9nZXRfeHkxMiwganNfbGluZV9zZXRfeHkxMiwgMSksCiAgICBKU19DR0VUU0VUX0VOVU1FUkFCTEVfREVGKCJ4MiIsIGpzX2xpbmVfZ2V0X3h5MTIsIGpzX2xpbmVfc2V0X3h5MTIsIDIpLAogICAgSlNfQ0dFVFNFVF9FTlVNRVJBQkxFX0RFRigieTIiLCBqc19saW5lX2dldF94eTEyLCBqc19saW5lX3NldF94eTEyLCAzKSwKICAgIEpTX0NHRVRTRVRfTUFHSUNfREVGKCJhIiwganNfbGluZV9nZXRfYWIsIGpzX2xpbmVfc2V0X2FiLCAwKSwKICAgIEpTX0NHRVRTRVRfTUFHSUNfREVGKCJiIiwganNfbGluZV9nZXRfYWIsIGpzX2xpbmVfc2V0X2FiLCAxKSwKICAgIEpTX0NHRVRTRVRfTUFHSUNfREVGKCIwIiwganNfbGluZV9nZXRfYWIsIGpzX2xpbmVfc2V0X2FiLCAwKSwKICAgIEpTX0NHRVRTRVRfTUFHSUNfREVGKCIxIiwganNfbGluZV9nZXRfYWIsIGpzX2xpbmVfc2V0X2FiLCAxKSwKICAgIEpTX0NHRVRTRVRfTUFHSUNfREVGKCJzbG9wZSIsIGpzX2xpbmVfZ2V0LCAwLCBQUk9QX1NMT1BFKSwKICAgIEpTX0NHRVRTRVRfTUFHSUNfREVGKCJhbmdsZSIsIGpzX2xpbmVfZ2V0LCAwLCBQUk9QX0FOR0xFKSwKICAgIEpTX0NHRVRTRVRfTUFHSUNfREVGKCJsZW5ndGgiLCBqc19saW5lX2dldCwgMCwgUFJPUF9MRU5HVEgpLAogICAgSlNfQ0dFVFNFVF9NQUdJQ19ERUYoInBpdm90IiwganNfbGluZV9nZXQsIGpzX2xpbmVfc2V0LCBQUk9QX1BJVk9UKSwKICAgIEpTX0NHRVRTRVRfTUFHSUNfREVGKCJ0byIsIGpzX2xpbmVfZ2V0LCBqc19saW5lX3NldCwgUFJPUF9UTyksCiAgICBKU19DRlVOQ19NQUdJQ19ERUYoInN3YXAiLCAwLCBqc19saW5lX21ldGhvZHMsIE1FVEhPRF9TV0FQKSwKICAgIEpTX0NGVU5DX01BR0lDX0RFRigiYXQiLCAxLCBqc19saW5lX21ldGhvZHMsIE1FVEhPRF9BVCksCiAgICBKU19DRlVOQ19NQUdJQ19ERUYoImludGVyc2VjdCIsIDEsIGpzX2xpbmVfbWV0aG9kcywgTUVUSE9EX0lOVEVSU0VDVCksCiAgICBKU19DRlVOQ19NQUdJQ19ERUYoImVuZHBvaW50RGlzdGFuY2VzIiwgMSwganNfbGluZV9tZXRob2RzLCBNRVRIT0RfRU5EUE9JTlRfRElTVEFOQ0VTKSwKICAgIEpTX0NGVU5DX01BR0lDX0RFRigiZGlzdGFuY2UiLCAxLCBqc19saW5lX21ldGhvZHMsIE1FVEhPRF9ESVNUQU5DRSksCiAgICBKU19DRlVOQ19ERUYoInRvQXJyYXkiLCAwLCBqc19saW5lX3RvYXJyYXkpLAogICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJ0b1BvaW50cyIsIDAsIGpzX2xpbmVfaXRlcmF0b3IsIEpTX0xJTkVfQVNfUE9JTlRTKSwKICAgIEpTX0NGVU5DX01BR0lDX0RFRigidG9TdHJpbmciLCAwLCBqc19saW5lX2l0ZXJhdG9yLCBKU19MSU5FX0FTX1BPSU5UUyB8IEpTX0xJTkVfVE9fU1RSSU5HKSwKICAgIEpTX0NGVU5DX01BR0lDX0RFRigidmFsdWVzIiwgMCwganNfbGluZV9pdGVyYXRvciwgSlNfTElORV9BU19WRUNUT1IgfCBKU19MSU5FX0dFVF9JVEVSQVRPUiksCiAgICBKU19BTElBU19ERUYoInN0YXJ0IiwgInBpdm90IiksCiAgICBKU19BTElBU19ERUYoImVuZCIsICJ0byIpLAogICAgSlNfQUxJQVNfREVGKCJbU3ltYm9sLml0ZXJhdG9yXSIsICJ2YWx1ZXMiKSwKICAgIEpTX1BST1BfU1RSSU5HX0RFRigiW1N5bWJvbC50b1N0cmluZ1RhZ10iLCAiTGluZSIsIEpTX1BST1BfQ09ORklHVVJBQkxFKSwKfTsKCmNvbnN0IEpTQ0Z1bmN0aW9uTGlzdEVudHJ5IGpzX2xpbmVfc3RhdGljX2Z1bmNzW10gPSB7SlNfQ0ZVTkNfREVGKCJmcm9tIiwgMSwganNfbGluZV9mcm9tKX07CgppbnQganNfbGluZV9pbml0KEpTQ29udGV4dCogY3R4LCBKU01vZHVsZURlZiogbSkgewoKICBpZihqc19saW5lX2NsYXNzX2lkID09IDApIHsKICAgIC8qIGNyZWF0ZSB0aGUgTGluZSBjbGFzcyAqLwogICAgSlNfTmV3Q2xhc3NJRCgmanNfbGluZV9jbGFzc19pZCk7CiAgICBKU19OZXdDbGFzcyhKU19HZXRSdW50aW1lKGN0eCksIGpzX2xpbmVfY2xhc3NfaWQsICZqc19saW5lX2NsYXNzKTsKCiAgICBsaW5lX3Byb3RvID0gSlNfTmV3T2JqZWN0KGN0eCk7CiAgICBKU19TZXRQcm9wZXJ0eUZ1bmN0aW9uTGlzdChjdHgsIGxpbmVfcHJvdG8sIGpzX2xpbmVfcHJvdG9fZnVuY3MsIGNvdW50b2YoanNfbGluZV9wcm90b19mdW5jcykpOwogICAgSlNfU2V0Q2xhc3NQcm90byhjdHgsIGpzX2xpbmVfY2xhc3NfaWQsIGxpbmVfcHJvdG8pOwoKICAgIGxpbmVfY2xhc3MgPSBKU19OZXdDRnVuY3Rpb24yKGN0eCwganNfbGluZV9jdG9yLCAiTGluZSIsIDIsIEpTX0NGVU5DX2NvbnN0cnVjdG9yLCAwKTsKICAgIC8qIHNldCBwcm90by5jb25zdHJ1Y3RvciBhbmQgY3Rvci5wcm90b3R5cGUgKi8KICAgIEpTX1NldENvbnN0cnVjdG9yKGN0eCwgbGluZV9jbGFzcywgbGluZV9wcm90byk7CiAgICBKU19TZXRQcm9wZXJ0eUZ1bmN0aW9uTGlzdChjdHgsIGxpbmVfY2xhc3MsIGpzX2xpbmVfc3RhdGljX2Z1bmNzLCBjb3VudG9mKGpzX2xpbmVfc3RhdGljX2Z1bmNzKSk7CgogICAganNfc2V0X2luc3BlY3RfbWV0aG9kKGN0eCwgbGluZV9wcm90bywganNfbGluZV9pbnNwZWN0KTsKICB9CgogIGlmKG0pCiAgICBKU19TZXRNb2R1bGVFeHBvcnQoY3R4LCBtLCAiTGluZSIsIGxpbmVfY2xhc3MpOwoKICByZXR1cm4gMDsKfQoKdm9pZApqc19saW5lX2NvbnN0cnVjdG9yKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlIHBhcmVudCwgY29uc3QgY2hhciogbmFtZSkgewogIGlmKEpTX0lzVW5kZWZpbmVkKGxpbmVfY2xhc3MpKQogICAganNfbGluZV9pbml0KGN0eCwgMCk7CgogIEpTX1NldFByb3BlcnR5U3RyKGN0eCwgcGFyZW50LCBuYW1lID8gbmFtZSA6ICJMaW5lIiwgbGluZV9jbGFzcyk7Cn0KCiNpZmRlZiBKU19MSU5FX01PRFVMRQojZGVmaW5lIEpTX0lOSVRfTU9EVUxFIC8qVklTSUJMRSovIGpzX2luaXRfbW9kdWxlCiNlbHNlCiNkZWZpbmUgSlNfSU5JVF9NT0RVTEUgLypWSVNJQkxFKi8ganNfaW5pdF9tb2R1bGVfbGluZQojZW5kaWYKCkpTTW9kdWxlRGVmKgpKU19JTklUX01PRFVMRShKU0NvbnRleHQqIGN0eCwgY29uc3QgY2hhciogbW9kdWxlX25hbWUpIHsKICBKU01vZHVsZURlZiogbTsKICBtID0gSlNfTmV3Q01vZHVsZShjdHgsIG1vZHVsZV9uYW1lLCAmanNfbGluZV9pbml0KTsKICBpZighbSkKICAgIHJldHVybiBOVUxMOwogIEpTX0FkZE1vZHVsZUV4cG9ydChjdHgsIG0sICJMaW5lIik7CiAgcmV0dXJuIG07Cn0KfQoAAAAAAAAAAOw5AAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAazkAAAAAAACROQAAAAAAAAAAAAAAAPC/"
				],
				[
					24,
					1,
					"cut",
					null,
					"AQAAAKA5AAAAAAAAoDkAAAAAAABMAAAACmV4dGVybiAiQyIgVklTSUJMRSB2b2lkIGpzX2xpbmVfZXhwb3J0KEpTQ29udGV4dCogY3R4LCBKU01vZHVsZURlZiogbSkgewp9Cg",
					"AQAAAAAAAAABAAAA7DkAAAAAAACgOQAAAAAAAAAAAAAAAPC/"
				],
				[
					29,
					1,
					"paste",
					null,
					"AQAAAGM3AAAAAAAArzcAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAYzcAAAAAAABjNwAAAAAAAAAAAAAAAPC/"
				],
				[
					32,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"AQAAAGM3AAAAAAAAZDcAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAYzcAAAAAAABjNwAAAAAAAAAAAAAAAPC/"
				],
				[
					34,
					1,
					"left_delete",
					null,
					"AQAAAK83AAAAAAAArzcAAAAAAAABAAAACg",
					"AQAAAAAAAAABAAAAsDcAAAAAAACwNwAAAAAAAAAAAAAAAAAA"
				],
				[
					37,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"AgAAAK03AAAAAAAArjcAAAAAAAAAAAAArjcAAAAAAACwNwAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAArTcAAAAAAACtNwAAAAAAAAAAAAAAAPC/"
				],
				[
					48,
					1,
					"cut",
					null,
					"AQAAALo5AAAAAAAAujkAAAAAAAAmAAAAICBKU19BZGRNb2R1bGVFeHBvcnQoY3R4LCBtLCAiTGluZSIpOwo",
					"AQAAAAAAAAABAAAAujkAAAAAAADgOQAAAAAAAAAAAAAAAPC/"
				],
				[
					51,
					1,
					"paste",
					null,
					"AQAAALA3AAAAAAAA1jcAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAsDcAAAAAAACwNwAAAAAAAAAAAAAAAPC/"
				],
				[
					54,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"AgAAAOs5AAAAAAAA7DkAAAAAAAAAAAAA7DkAAAAAAADuOQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA6zkAAAAAAADrOQAAAAAAAAAAAAAAAPC/"
				],
				[
					55,
					2,
					"left_delete",
					null,
					"AgAAAOw5AAAAAAAA7DkAAAAAAAACAAAAICDrOQAAAAAAAOs5AAAAAAAAAQAAAAo",
					"AQAAAAAAAAABAAAA7jkAAAAAAADuOQAAAAAAAAAAAAAAAPC/"
				],
				[
					58,
					1,
					"insert",
					{
						"characters": "\njs_line_export"
					},
					"EgAAAN85AAAAAAAA4DkAAAAAAAAAAAAA4DkAAAAAAADkOQAAAAAAAAAAAADgOQAAAAAAAOA5AAAAAAAABAAAACAgICDgOQAAAAAAAOI5AAAAAAAAAAAAAOI5AAAAAAAA4zkAAAAAAAAAAAAA4zkAAAAAAADkOQAAAAAAAAAAAADkOQAAAAAAAOU5AAAAAAAAAAAAAOU5AAAAAAAA5jkAAAAAAAAAAAAA5jkAAAAAAADnOQAAAAAAAAAAAADnOQAAAAAAAOg5AAAAAAAAAAAAAOg5AAAAAAAA6TkAAAAAAAAAAAAA6TkAAAAAAADqOQAAAAAAAAAAAADqOQAAAAAAAOs5AAAAAAAAAAAAAOs5AAAAAAAA7DkAAAAAAAAAAAAA7DkAAAAAAADtOQAAAAAAAAAAAADtOQAAAAAAAO45AAAAAAAAAAAAAO45AAAAAAAA7zkAAAAAAAAAAAAA7zkAAAAAAADwOQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA3zkAAAAAAADfOQAAAAAAAP///////+9/"
				],
				[
					59,
					1,
					"insert_snippet",
					{
						"contents": "($0)"
					},
					"AQAAAPA5AAAAAAAA8jkAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA8DkAAAAAAADwOQAAAAAAAAAAAAAAAPC/"
				],
				[
					60,
					1,
					"insert",
					{
						"characters": "ctx,m"
					},
					"BQAAAPE5AAAAAAAA8jkAAAAAAAAAAAAA8jkAAAAAAADzOQAAAAAAAAAAAADzOQAAAAAAAPQ5AAAAAAAAAAAAAPQ5AAAAAAAA9TkAAAAAAAAAAAAA9TkAAAAAAAD2OQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA8TkAAAAAAADxOQAAAAAAAAAAAAAAAPC/"
				],
				[
					62,
					1,
					"insert",
					{
						"characters": ";"
					},
					"AQAAAPc5AAAAAAAA+DkAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA9zkAAAAAAAD3OQAAAAAAAAAAAAAAAPC/"
				],
				[
					63,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAAAIOgAAI2luY2x1ZGUgImpzYmluZGluZ3MuaHBwIgojaW5jbHVkZSAianNfcG9pbnQuaHBwIgojaW5jbHVkZSAianNfYWxsb2MuaHBwIgojaW5jbHVkZSAianNfbGluZS5ocHAiCiNpbmNsdWRlICJqc19hcnJheS5ocHAiCiNpbmNsdWRlICJqc190eXBlZF9hcnJheS5ocHAiCiNpbmNsdWRlICJ1dGlsLmhwcCIKI2luY2x1ZGUgImxpbmUuaHBwIgoKZW51bSB7IFBST1BfU0xPUEUgPSAwLCBQUk9QX1BJVk9ULCBQUk9QX1RPLCBQUk9QX0FOR0xFLCBQUk9QX0xFTkdUSCB9OwplbnVtIHsgTUVUSE9EX1NXQVAgPSAwLCBNRVRIT0RfQVQsIE1FVEhPRF9JTlRFUlNFQ1QsIE1FVEhPRF9FTkRQT0lOVF9ESVNUQU5DRVMsIE1FVEhPRF9ESVNUQU5DRSB9OwoKZXh0ZXJuICJDIiB7CgpKU1ZhbHVlIGxpbmVfcHJvdG8gPSBKU19VTkRFRklORUQsIGxpbmVfY2xhc3MgPSBKU19VTkRFRklORUQ7CkpTQ2xhc3NJRCBqc19saW5lX2NsYXNzX2lkID0gMDsKClZJU0lCTEUgSlNWYWx1ZQpqc19saW5lX25ldyhKU0NvbnRleHQqIGN0eCwgZG91YmxlIHgxLCBkb3VibGUgeTEsIGRvdWJsZSB4MiwgZG91YmxlIHkyKSB7CiAgSlNWYWx1ZSByZXQ7CiAgSlNMaW5lRGF0YTxkb3VibGU+KiBsbjsKCiAgaWYoSlNfSXNVbmRlZmluZWQobGluZV9wcm90bykpCiAgICBqc19saW5lX2luaXQoY3R4LCBOVUxMKTsKCiAgcmV0ID0gSlNfTmV3T2JqZWN0UHJvdG9DbGFzcyhjdHgsIGxpbmVfcHJvdG8sIGpzX2xpbmVfY2xhc3NfaWQpOwoKICBsbiA9IGpzX2FsbG9jYXRlPEpTTGluZURhdGE8ZG91YmxlPj4oY3R4KTsKCiAgbG4tPmFycmF5WzBdID0geDE7CiAgbG4tPmFycmF5WzFdID0geTE7CiAgbG4tPmFycmF5WzJdID0geDI7CiAgbG4tPmFycmF5WzNdID0geTI7CgogIEpTX1NldE9wYXF1ZShyZXQsIGxuKTsKICByZXR1cm4gcmV0Owp9CgpzdGF0aWMgSlNWYWx1ZQpqc19saW5lX2N0b3IoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCBuZXdfdGFyZ2V0LCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2KSB7CiAgSlNMaW5lRGF0YTxkb3VibGU+KiBsbjsKICBKU1ZhbHVlIG9iaiA9IEpTX1VOREVGSU5FRDsKICBKU1ZhbHVlIHByb3RvOwogIGF1dG8gYXJncyA9IGFyZ3VtZW50X3JhbmdlKHN0ZDo6bWluKDQsIGFyZ2MpLCBhcmd2KTsKCiAgbG4gPSBqc19hbGxvY2F0ZTxKU0xpbmVEYXRhPGRvdWJsZT4+KGN0eCk7CiAgaWYoIWxuKQogICAgcmV0dXJuIEpTX0VYQ0VQVElPTjsKCiAgaWYoYXJnYyA+PSA0ICYmIHN0ZDo6cmFuZ2VzOjphbGxfb2YoYXJncywgSlNfSXNOdW1iZXIpKSB7CiAgICBpZihKU19Ub0Zsb2F0NjQoY3R4LCAmbG4tPmFycmF5WzBdLCBhcmd2WzBdKSkKICAgICAgZ290byBmYWlsOwogICAgaWYoSlNfVG9GbG9hdDY0KGN0eCwgJmxuLT5hcnJheVsxXSwgYXJndlsxXSkpCiAgICAgIGdvdG8gZmFpbDsKICAgIGlmKEpTX1RvRmxvYXQ2NChjdHgsICZsbi0+YXJyYXlbMl0sIGFyZ3ZbMl0pKQogICAgICBnb3RvIGZhaWw7CiAgICBpZihKU19Ub0Zsb2F0NjQoY3R4LCAmbG4tPmFycmF5WzNdLCBhcmd2WzNdKSkKICAgICAgZ290byBmYWlsOwogIH0gZWxzZSBpZighanNfbGluZV9yZWFkKGN0eCwgYXJndlswXSwgbG4pKSB7CiAgICByZXR1cm4gSlNfVGhyb3dUeXBlRXJyb3IoY3R4LCAiYXJndW1lbnQgMSBpcyBub3QgYSB2YWxpZCBsaW5lIik7CiAgfQogIC8qIHVzaW5nIG5ld190YXJnZXQgdG8gZ2V0IHRoZSBwcm90b3R5cGUgaXMgbmVjZXNzYXJ5IHdoZW4gdGhlCiAgICAgY2xhc3MgaXMgZXh0ZW5kZWQuICovCiAgcHJvdG8gPSBKU19HZXRQcm9wZXJ0eVN0cihjdHgsIG5ld190YXJnZXQsICJwcm90b3R5cGUiKTsKICBpZihKU19Jc0V4Y2VwdGlvbihwcm90bykpCiAgICBnb3RvIGZhaWw7CiAgb2JqID0gSlNfTmV3T2JqZWN0UHJvdG9DbGFzcyhjdHgsIHByb3RvLCBqc19saW5lX2NsYXNzX2lkKTsKICBKU19GcmVlVmFsdWUoY3R4LCBwcm90byk7CiAgaWYoSlNfSXNFeGNlcHRpb24ob2JqKSkKICAgIGdvdG8gZmFpbDsKICBKU19TZXRPcGFxdWUob2JqLCBsbik7CiAgcmV0dXJuIG9iajsKZmFpbDoKICBqc19kZWFsbG9jYXRlKGN0eCwgbG4pOwogIEpTX0ZyZWVWYWx1ZShjdHgsIG9iaik7CiAgcmV0dXJuIEpTX0VYQ0VQVElPTjsKfQoKSlNMaW5lRGF0YTxkb3VibGU+Kgpqc19saW5lX2RhdGEoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB2YWwpIHsKICByZXR1cm4gc3RhdGljX2Nhc3Q8SlNMaW5lRGF0YTxkb3VibGU+Kj4oSlNfR2V0T3BhcXVlMihjdHgsIHZhbCwganNfbGluZV9jbGFzc19pZCkpOwp9CgpzdGF0aWMgSlNWYWx1ZQpqc19saW5lX2dldF94eTEyKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBtYWdpYykgewogIEpTVmFsdWUgcmV0ID0gSlNfVU5ERUZJTkVEOwogIEpTTGluZURhdGE8ZG91YmxlPiogbG4gPSBzdGF0aWNfY2FzdDxKU0xpbmVEYXRhPGRvdWJsZT4qPihKU19HZXRPcGFxdWUyKGN0eCwgdGhpc192YWwsIGpzX2xpbmVfY2xhc3NfaWQpKTsKICBpZighbG4pCiAgICByZXQgPSBKU19FWENFUFRJT047CiAgZWxzZSBpZihtYWdpYyA9PSAwKQogICAgcmV0ID0gSlNfTmV3RmxvYXQ2NChjdHgsIGxuLT5hcnJheVswXSk7CiAgZWxzZSBpZihtYWdpYyA9PSAxKQogICAgcmV0ID0gSlNfTmV3RmxvYXQ2NChjdHgsIGxuLT5hcnJheVsxXSk7CiAgZWxzZSBpZihtYWdpYyA9PSAyKQogICAgcmV0ID0gSlNfTmV3RmxvYXQ2NChjdHgsIGxuLT5hcnJheVsyXSk7CiAgZWxzZSBpZihtYWdpYyA9PSAzKQogICAgcmV0ID0gSlNfTmV3RmxvYXQ2NChjdHgsIGxuLT5hcnJheVszXSk7CiAgcmV0dXJuIHJldDsKfQoKc3RhdGljIEpTVmFsdWUKanNfbGluZV9nZXRfYWIoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgaW50IG1hZ2ljKSB7CiAgSlNWYWx1ZSByZXQgPSBKU19VTkRFRklORUQ7CiAgSlNMaW5lRGF0YTxkb3VibGU+KiBsbiA9IHN0YXRpY19jYXN0PEpTTGluZURhdGE8ZG91YmxlPio+KEpTX0dldE9wYXF1ZTIoY3R4LCB0aGlzX3ZhbCwganNfbGluZV9jbGFzc19pZCkpOwogIGlmKCFsbikKICAgIHJldCA9IEpTX0VYQ0VQVElPTjsKICBlbHNlIGlmKG1hZ2ljID09IDApCiAgICByZXQgPSBqc19wb2ludF9uZXcoY3R4LCBsbi0+YXJyYXlbMF0sIGxuLT5hcnJheVsxXSk7CiAgZWxzZSBpZihtYWdpYyA9PSAxKQogICAgcmV0ID0ganNfcG9pbnRfbmV3KGN0eCwgbG4tPmFycmF5WzJdLCBsbi0+YXJyYXlbM10pOwoKICByZXR1cm4gcmV0Owp9CgpzdGF0aWMgSlNWYWx1ZQpqc19saW5lX2dldChKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgbWFnaWMpIHsKICBKU0xpbmVEYXRhPGRvdWJsZT4qIGxuOwoKICBpZighKGxuID0gc3RhdGljX2Nhc3Q8SlNMaW5lRGF0YTxkb3VibGU+Kj4oSlNfR2V0T3BhcXVlMihjdHgsIHRoaXNfdmFsLCBqc19saW5lX2NsYXNzX2lkKSkpKQogICAgcmV0dXJuIEpTX0VYQ0VQVElPTjsKICBzd2l0Y2gobWFnaWMpIHsKICAgIGNhc2UgUFJPUF9TTE9QRTogewogICAgICBMaW5lPGRvdWJsZT4gbGluZShsbi0+YXJyYXkpOwogICAgICByZXR1cm4ganNfcG9pbnRfd3JhcChjdHgsIGxpbmUuc2xvcGUoKSk7CiAgICB9CiAgICBjYXNlIFBST1BfUElWT1Q6IHsKICAgICAgSlNQb2ludERhdGE8ZG91YmxlPiBwaXZvdChsbi0+eDEsIGxuLT55MSk7CiAgICAgIHJldHVybiBqc19wb2ludF93cmFwKGN0eCwgcGl2b3QpOwogICAgfQogICAgY2FzZSBQUk9QX1RPOiB7CiAgICAgIEpTUG9pbnREYXRhPGRvdWJsZT4gdG8obG4tPngyLCBsbi0+eTIpOwogICAgICByZXR1cm4ganNfcG9pbnRfd3JhcChjdHgsIHRvKTsKICAgIH0KICAgIGNhc2UgUFJPUF9BTkdMRTogewogICAgICBMaW5lPGRvdWJsZT4gbGluZShsbi0+YXJyYXkpOwogICAgICByZXR1cm4gSlNfTmV3RmxvYXQ2NChjdHgsIHN0ZDo6YXRhbjIobG4tPngyIC0gbG4tPngxLCBsbi0+eTIgLSBsbi0+eTEpKTsKICAgIH0KICAgIGNhc2UgUFJPUF9MRU5HVEg6IHsKICAgICAgTGluZTxkb3VibGU+IGxpbmUobG4tPmFycmF5KTsKICAgICAgcmV0dXJuIEpTX05ld0Zsb2F0NjQoY3R4LCBsaW5lLmxlbmd0aCgpKTsKICAgIH0KICB9CiAgcmV0dXJuIEpTX1VOREVGSU5FRDsKfQoKc3RhdGljIEpTVmFsdWUKanNfbGluZV9zZXQoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgSlNWYWx1ZUNvbnN0IHZhbCwgaW50IG1hZ2ljKSB7CiAgSlNMaW5lRGF0YTxkb3VibGU+KiBsbjsKICBkb3VibGUgdjsKICBpZighKGxuID0gc3RhdGljX2Nhc3Q8SlNMaW5lRGF0YTxkb3VibGU+Kj4oSlNfR2V0T3BhcXVlMihjdHgsIHRoaXNfdmFsLCBqc19saW5lX2NsYXNzX2lkKSkpKQogICAgcmV0dXJuIEpTX0VYQ0VQVElPTjsKICBzd2l0Y2gobWFnaWMpIHsKICAgIGNhc2UgUFJPUF9QSVZPVDogewogICAgICBKU1BvaW50RGF0YTxkb3VibGU+IHBpdm90OwogICAgICBqc19wb2ludF9yZWFkKGN0eCwgdmFsLCAmcGl2b3QpOwoKICAgICAgbG4tPngxID0gcGl2b3QueDsKICAgICAgbG4tPnkxID0gcGl2b3QueTsKICAgICAgYnJlYWs7CiAgICB9CiAgICBjYXNlIFBST1BfVE86IHsKICAgICAgSlNQb2ludERhdGE8ZG91YmxlPiB0bzsKICAgICAganNfcG9pbnRfcmVhZChjdHgsIHZhbCwgJnRvKTsKCiAgICAgIGxuLT54MiA9IHRvLng7CiAgICAgIGxuLT55MiA9IHRvLnk7CiAgICAgIGJyZWFrOwogICAgfQogIH0KCiAgcmV0dXJuIEpTX1VOREVGSU5FRDsKfQoKc3RhdGljIEpTVmFsdWUKanNfbGluZV9zZXRfeHkxMihKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBKU1ZhbHVlQ29uc3QgdmFsLCBpbnQgbWFnaWMpIHsKICBKU0xpbmVEYXRhPGRvdWJsZT4qIGxuID0gc3RhdGljX2Nhc3Q8SlNMaW5lRGF0YTxkb3VibGU+Kj4oSlNfR2V0T3BhcXVlMihjdHgsIHRoaXNfdmFsLCBqc19saW5lX2NsYXNzX2lkKSk7CiAgZG91YmxlIHY7CiAgaWYoIWxuKQogICAgcmV0dXJuIEpTX0VYQ0VQVElPTjsKICBpZihKU19Ub0Zsb2F0NjQoY3R4LCAmdiwgdmFsKSkKICAgIHJldHVybiBKU19FWENFUFRJT047CiAgaWYobWFnaWMgPT0gMCkKICAgIGxuLT5hcnJheVswXSA9IHY7CiAgZWxzZSBpZihtYWdpYyA9PSAxKQogICAgbG4tPmFycmF5WzFdID0gdjsKICBlbHNlIGlmKG1hZ2ljID09IDIpCiAgICBsbi0+YXJyYXlbMl0gPSB2OwogIGVsc2UgaWYobWFnaWMgPT0gMykKICAgIGxuLT5hcnJheVszXSA9IHY7CgogIHJldHVybiBKU19VTkRFRklORUQ7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX2xpbmVfc2V0X2FiKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIEpTVmFsdWVDb25zdCB2YWwsIGludCBtYWdpYykgewogIEpTTGluZURhdGE8ZG91YmxlPiogbG47CiAgSlNQb2ludERhdGE8ZG91YmxlPiBwdDsKCiAgaWYoIShsbiA9IHN0YXRpY19jYXN0PEpTTGluZURhdGE8ZG91YmxlPio+KEpTX0dldE9wYXF1ZTIoY3R4LCB0aGlzX3ZhbCwganNfbGluZV9jbGFzc19pZCkpKSkKICAgIHJldHVybiBKU19FWENFUFRJT047CgogIGpzX3BvaW50X3JlYWQoY3R4LCB2YWwsICZwdCk7CgogIGlmKG1hZ2ljID09IDApIHsKICAgIGxuLT5hcnJheVswXSA9IHB0Lng7CiAgICBsbi0+YXJyYXlbMV0gPSBwdC55OwoKICB9IGVsc2UgaWYobWFnaWMgPT0gMSkgewogICAgbG4tPmFycmF5WzJdID0gcHQueDsKICAgIGxuLT5hcnJheVszXSA9IHB0Lnk7CiAgfQoKICByZXR1cm4gSlNfVU5ERUZJTkVEOwp9CgpzdGF0aWMgSlNWYWx1ZQpqc19saW5lX3BvaW50cyhKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2KSB7CiAgSlNMaW5lRGF0YTxkb3VibGU+KiBsbjsKCiAgaWYoIShsbiA9IHN0YXRpY19jYXN0PEpTTGluZURhdGE8ZG91YmxlPio+KEpTX0dldE9wYXF1ZTIoY3R4LCB0aGlzX3ZhbCwganNfbGluZV9jbGFzc19pZCkpKSkKICAgIHJldHVybiBKU19FWENFUFRJT047CgogIHJldHVybiBqc19hcnJheV9mcm9tKGN0eCwgbG4tPnBvaW50cyk7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX2xpbmVfaW5zcGVjdChKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2KSB7CiAgSlNMaW5lRGF0YTxkb3VibGU+KiBsbiA9IGpzX2xpbmVfZGF0YShjdHgsIHRoaXNfdmFsKTsKICBKU1ZhbHVlIG9iaiA9IEpTX05ld09iamVjdFByb3RvKGN0eCwgbGluZV9wcm90byk7CgogIEpTX0RlZmluZVByb3BlcnR5VmFsdWVTdHIoY3R4LCBvYmosICJ4MSIsIEpTX05ld0Zsb2F0NjQoY3R4LCBsbi0+eDEpLCBKU19QUk9QX0VOVU1FUkFCTEUpOwogIEpTX0RlZmluZVByb3BlcnR5VmFsdWVTdHIoY3R4LCBvYmosICJ5MSIsIEpTX05ld0Zsb2F0NjQoY3R4LCBsbi0+eTEpLCBKU19QUk9QX0VOVU1FUkFCTEUpOwogIEpTX0RlZmluZVByb3BlcnR5VmFsdWVTdHIoY3R4LCBvYmosICJ4MiIsIEpTX05ld0Zsb2F0NjQoY3R4LCBsbi0+eDIpLCBKU19QUk9QX0VOVU1FUkFCTEUpOwogIEpTX0RlZmluZVByb3BlcnR5VmFsdWVTdHIoY3R4LCBvYmosICJ5MiIsIEpTX05ld0Zsb2F0NjQoY3R4LCBsbi0+eTIpLCBKU19QUk9QX0VOVU1FUkFCTEUpOwogIHJldHVybiBvYmo7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX2xpbmVfbWV0aG9kcyhKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2LCBpbnQgbWFnaWMpIHsKICBKU0xpbmVEYXRhPGRvdWJsZT4qIGxuOwogIEpTVmFsdWUgcmV0ID0gSlNfVU5ERUZJTkVEOwogIGlmKCEobG4gPSBzdGF0aWNfY2FzdDxKU0xpbmVEYXRhPGRvdWJsZT4qPihKU19HZXRPcGFxdWUyKGN0eCwgdGhpc192YWwsIGpzX2xpbmVfY2xhc3NfaWQpKSkpCiAgICByZXR1cm4gSlNfRVhDRVBUSU9OOwoKICBzd2l0Y2gobWFnaWMpIHsKICAgIGNhc2UgTUVUSE9EX1NXQVA6IHsKICAgICAgSlNQb2ludERhdGE8ZG91YmxlPiBhID0gbG4tPnBvaW50c1swXSwgYiA9IGxuLT5wb2ludHNbMV07CiAgICAgIGxuLT5wb2ludHNbMF0gPSBiOwogICAgICBsbi0+cG9pbnRzWzFdID0gYTsKICAgICAgcmV0ID0gSlNfRHVwVmFsdWUoY3R4LCB0aGlzX3ZhbCk7CiAgICAgIGJyZWFrOwogICAgfQogICAgY2FzZSBNRVRIT0RfQVQ6IHsKICAgICAgZG91YmxlIHNpZ21hOwogICAgICBKU1BvaW50RGF0YTxkb3VibGU+IHA7CiAgICAgIGpzX3ZhbHVlX3RvKGN0eCwgYXJndlswXSwgc2lnbWEpOwoKICAgICAgc2lnbWEgPSBmbWluKGZtYXgoc2lnbWEsIDEpLCAwKTsKCiAgICAgIHAueCA9IGxuLT5wb2ludHNbMF0ueCAqICgxLjAgLSBzaWdtYSkgKyBsbi0+cG9pbnRzWzFdLnggKiBzaWdtYTsKICAgICAgcC55ID0gbG4tPnBvaW50c1swXS55ICogKDEuMCAtIHNpZ21hKSArIGxuLT5wb2ludHNbMV0ueSAqIHNpZ21hOwoKICAgICAgcmV0ID0ganNfcG9pbnRfd3JhcChjdHgsIHApOwogICAgICBicmVhazsKICAgIH0KICAgIGNhc2UgTUVUSE9EX0lOVEVSU0VDVDogewogICAgICBzdGQ6OmFycmF5PGRvdWJsZSwgND4gYXJnID0ganNfbGluZV9nZXQ8ZG91YmxlPihjdHgsIGFyZ3ZbMF0pOwogICAgICBKU1BvaW50RGF0YTxkb3VibGU+KiBwb2ludCA9IG51bGxwdHI7CgogICAgICBpZihhcmdjID4gMSkKICAgICAgICBwb2ludCA9IGpzX3BvaW50X2RhdGEoY3R4LCBhcmd2WzFdKTsKCiAgICAgIExpbmU8ZG91YmxlPiBsaW5lID0gTGluZShsbi0+YXJyYXkpOwogICAgICBMaW5lPGRvdWJsZT4gb3RoZXIgPSBMaW5lKGFyZyk7CgogICAgICByZXQgPSBKU19OZXdCb29sKGN0eCwgbGluZS5pbnRlcnNlY3Qob3RoZXIsIHBvaW50KSk7CiAgICAgIGJyZWFrOwogICAgfQogICAgY2FzZSBNRVRIT0RfRU5EUE9JTlRfRElTVEFOQ0VTOiB7CiAgICAgIEpTUG9pbnREYXRhPGRvdWJsZT4gcHQ7CiAgICAgIGpzX3BvaW50X3JlYWQoY3R4LCBhcmd2WzBdLCAmcHQpOwogICAgICBMaW5lPGRvdWJsZT4gbGluZSA9IExpbmUobG4tPmFycmF5KTsKICAgICAgYXV0byBkaXN0YW5jZXMgPSBsaW5lLmVuZHBvaW50X2Rpc3RhbmNlcyhwdCk7CiAgICAgIHJldCA9IEpTX05ld0FycmF5KGN0eCk7CiAgICAgIEpTX1NldFByb3BlcnR5VWludDMyKGN0eCwgcmV0LCAwLCBqc19udW1iZXJfbmV3KGN0eCwgZGlzdGFuY2VzLmZpcnN0KSk7CiAgICAgIEpTX1NldFByb3BlcnR5VWludDMyKGN0eCwgcmV0LCAxLCBqc19udW1iZXJfbmV3KGN0eCwgZGlzdGFuY2VzLnNlY29uZCkpOwogICAgICBicmVhazsKICAgIH0KICAgIGNhc2UgTUVUSE9EX0RJU1RBTkNFOiB7CiAgICAgIGN2OjpQb2ludDJkIHB0OwogICAgICBqc19wb2ludF9yZWFkKGN0eCwgYXJndlswXSwgJnB0KTsKICAgICAgTGluZTxkb3VibGU+IGxpbmUgPSBMaW5lKGxuLT5hcnJheSk7CiAgICAgIHJldCA9IGpzX251bWJlcl9uZXcoY3R4LCBsaW5lLmRpc3RhbmNlKHB0KSk7CiAgICAgIGJyZWFrOwogICAgfQogIH0KICByZXR1cm4gcmV0Owp9CgpzdGF0aWMgSlNWYWx1ZQpqc19saW5lX3RvYXJyYXkoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCBsaW5lLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmcpIHsKICBKU0xpbmVEYXRhPGRvdWJsZT4qIGxuOwoKICBpZighKGxuID0gc3RhdGljX2Nhc3Q8SlNMaW5lRGF0YTxkb3VibGU+Kj4oSlNfR2V0T3BhcXVlMihjdHgsIGxpbmUsIGpzX2xpbmVfY2xhc3NfaWQpKSkpCiAgICByZXR1cm4gSlNfRVhDRVBUSU9OOwoKICByZXR1cm4ganNfdHlwZWRhcnJheV9mcm9tKGN0eCwgbG4tPmFycmF5KTsKfQoKc3RhdGljIEpTVmFsdWUKanNfY2FsbF9tZXRob2QoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWUgb2JqLCBjb25zdCBjaGFyKiBuYW1lLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2KSB7CiAgSlNWYWx1ZSBmbiwgcmV0ID0gSlNfVU5ERUZJTkVEOwoKICBmbiA9IEpTX0dldFByb3BlcnR5U3RyKGN0eCwgb2JqLCBuYW1lKTsKICBpZighSlNfSXNVbmRlZmluZWQoZm4pKQogICAgcmV0ID0gSlNfQ2FsbChjdHgsIGZuLCBvYmosIGFyZ2MsIGFyZ3YpOwogIHJldHVybiByZXQ7Cn0KCiNkZWZpbmUgSlNfTElORV9BU19QT0lOVFMgMHgwMQojZGVmaW5lIEpTX0xJTkVfQVNfVkVDVE9SIDB4MDIKCiNkZWZpbmUgSlNfTElORV9HRVRfSVRFUkFUT1IgMHg4MAojZGVmaW5lIEpTX0xJTkVfVE9fU1RSSU5HIDB4NDAKCnN0YXRpYyBKU1ZhbHVlCmpzX2xpbmVfaXRlcmF0b3IoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCogYXJndiwgaW50IG1hZ2ljKSB7CiAgSlNMaW5lRGF0YTxkb3VibGU+KiBsbiA9IHN0YXRpY19jYXN0PEpTTGluZURhdGE8ZG91YmxlPio+KEpTX0dldE9wYXF1ZTIoY3R4LCB0aGlzX3ZhbCwganNfbGluZV9jbGFzc19pZCkpOwogIEpTVmFsdWUgbWV0aG9kLCByZXQgPSBKU19VTkRFRklORUQ7CgogIGlmKG1hZ2ljICYgSlNfTElORV9BU19QT0lOVFMpCiAgICByZXQgPSBqc19saW5lX3BvaW50cyhjdHgsIHRoaXNfdmFsLCBhcmdjLCBhcmd2KTsKICBpZihtYWdpYyAmIEpTX0xJTkVfQVNfVkVDVE9SKQogICAgcmV0ID0ganNfbGluZV90b2FycmF5KGN0eCwgdGhpc192YWwsIGFyZ2MsIGFyZ3YpOwoKICBpZihtYWdpYyAmIEpTX0xJTkVfR0VUX0lURVJBVE9SKQogICAgcmV0ID0ganNfY2FsbF9tZXRob2QoY3R4LCByZXQsICJ2YWx1ZXMiLCAwLCBOVUxMKTsKCiAgaWYobWFnaWMgJiBKU19MSU5FX1RPX1NUUklORykgewogICAgSlNWYWx1ZUNvbnN0IGFyZ3NbMV0gPSB7MH07CiAgICBhcmdzWzBdID0gSlNfTmV3U3RyaW5nKGN0eCwgIiAiKTsKCiAgICByZXQgPSBqc19jYWxsX21ldGhvZChjdHgsIHJldCwgImpvaW4iLCAxLCBhcmdzKTsKICB9CgogIHJldHVybiByZXQ7Cn0KLyoKc3RhdGljIEpTVmFsdWUKanNfbGluZV9zeW1ib2xfaXRlcmF0b3IoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCogYXJndikgewogIEpTVmFsdWUgYXJyLCBpdGVyOwogIGpzcnQganMoY3R4KTsKICBhcnIgPSBqc19saW5lX3RvX2FycmF5KGN0eCwgdGhpc192YWwsIGFyZ2MsIGFyZ3YpOwoKICBpZihKU19Jc1VuZGVmaW5lZChpdGVyYXRvcl9zeW1ib2wpKQogICAgaXRlcmF0b3Jfc3ltYm9sID0ganMuZ2V0X3N5bWJvbCgiaXRlcmF0b3IiKTsKCiAgaWYoIUpTX0lzRnVuY3Rpb24oY3R4LCAoaXRlciA9IGpzLmdldF9wcm9wZXJ0eShhcnIsIGl0ZXJhdG9yX3N5bWJvbCkpKSkKICAgIHJldHVybiBKU19FWENFUFRJT047CiAgcmV0dXJuIEpTX0NhbGwoY3R4LCBpdGVyLCBhcnIsIDAsIGFyZ3YpOwp9Ki8KCnN0YXRpYyBKU1ZhbHVlCmpzX2xpbmVfZnJvbShKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2KSB7CiAgSlNMaW5lRGF0YTxkb3VibGU+IGxpbmUgPSB7MCwgMCwgMCwgMH07CiAgSlNWYWx1ZSByZXQgPSBKU19FWENFUFRJT047CgogIGlmKEpTX0lzU3RyaW5nKGFyZ3ZbMF0pKSB7CiAgICBjb25zdCBjaGFyKiBzdHIgPSBKU19Ub0NTdHJpbmcoY3R4LCBhcmd2WzBdKTsKICAgIGNoYXIqIGVuZHB0ciA9IG51bGxwdHI7CiAgICBmb3Ioc2l6ZV90IGkgPSAwOyBpIDwgNDsgaSsrKSB7CiAgICAgIHdoaWxlKCFpc2RpZ2l0KCpzdHIpICYmICpzdHIgIT0gJy0nICYmICpzdHIgIT0gJysnICYmICEoKnN0ciA9PSAnLicgJiYgaXNkaWdpdChzdHJbMV0pKSkgc3RyKys7CiAgICAgIGlmKCpzdHIgPT0gJ1wwJykKICAgICAgICBicmVhazsKICAgICAgbGluZS5hcnJheVtpXSA9IHN0cnRvZChzdHIsICZlbmRwdHIpOwogICAgICBzdHIgPSBlbmRwdHI7CiAgICB9CiAgfSBlbHNlIHsKICAgIGpzX2xpbmVfcmVhZChjdHgsIGFyZ3ZbMF0sICZsaW5lKTsKICB9CiAgaWYobGluZS5hcnJheVsyXSA+IDAgJiYgbGluZS5hcnJheVszXSA+IDApCiAgICByZXQgPSBqc19saW5lX25ldyhjdHgsIGxpbmUuYXJyYXlbMF0sIGxpbmUuYXJyYXlbMV0sIGxpbmUuYXJyYXlbMl0sIGxpbmUuYXJyYXlbM10pOwogIHJldHVybiByZXQ7Cn0KCnZvaWQKanNfbGluZV9maW5hbGl6ZXIoSlNSdW50aW1lKiBydCwgSlNWYWx1ZSB2YWwpIHsKICBKU0xpbmVEYXRhPGRvdWJsZT4qIGxuOwoKICBpZigobG4gPSBzdGF0aWNfY2FzdDxKU0xpbmVEYXRhPGRvdWJsZT4qPihKU19HZXRPcGFxdWUodmFsLCBqc19saW5lX2NsYXNzX2lkKSkpKQogICAgLyogTm90ZTogJ2xuJyBjYW4gYmUgTlVMTCBpbiBjYXNlIEpTX1NldE9wYXF1ZSgpIHdhcyBub3QgY2FsbGVkICovCiAgICBqc19kZWFsbG9jYXRlKHJ0LCBsbik7Cn0KCkpTQ2xhc3NEZWYganNfbGluZV9jbGFzcyA9IHsKICAgIC5jbGFzc19uYW1lID0gIkxpbmUiLAogICAgLmZpbmFsaXplciA9IGpzX2xpbmVfZmluYWxpemVyLAp9OwoKY29uc3QgSlNDRnVuY3Rpb25MaXN0RW50cnkganNfbGluZV9wcm90b19mdW5jc1tdID0gewogICAgSlNfQ0dFVFNFVF9FTlVNRVJBQkxFX0RFRigieDEiLCBqc19saW5lX2dldF94eTEyLCBqc19saW5lX3NldF94eTEyLCAwKSwKICAgIEpTX0NHRVRTRVRfRU5VTUVSQUJMRV9ERUYoInkxIiwganNfbGluZV9nZXRfeHkxMiwganNfbGluZV9zZXRfeHkxMiwgMSksCiAgICBKU19DR0VUU0VUX0VOVU1FUkFCTEVfREVGKCJ4MiIsIGpzX2xpbmVfZ2V0X3h5MTIsIGpzX2xpbmVfc2V0X3h5MTIsIDIpLAogICAgSlNfQ0dFVFNFVF9FTlVNRVJBQkxFX0RFRigieTIiLCBqc19saW5lX2dldF94eTEyLCBqc19saW5lX3NldF94eTEyLCAzKSwKICAgIEpTX0NHRVRTRVRfTUFHSUNfREVGKCJhIiwganNfbGluZV9nZXRfYWIsIGpzX2xpbmVfc2V0X2FiLCAwKSwKICAgIEpTX0NHRVRTRVRfTUFHSUNfREVGKCJiIiwganNfbGluZV9nZXRfYWIsIGpzX2xpbmVfc2V0X2FiLCAxKSwKICAgIEpTX0NHRVRTRVRfTUFHSUNfREVGKCIwIiwganNfbGluZV9nZXRfYWIsIGpzX2xpbmVfc2V0X2FiLCAwKSwKICAgIEpTX0NHRVRTRVRfTUFHSUNfREVGKCIxIiwganNfbGluZV9nZXRfYWIsIGpzX2xpbmVfc2V0X2FiLCAxKSwKICAgIEpTX0NHRVRTRVRfTUFHSUNfREVGKCJzbG9wZSIsIGpzX2xpbmVfZ2V0LCAwLCBQUk9QX1NMT1BFKSwKICAgIEpTX0NHRVRTRVRfTUFHSUNfREVGKCJhbmdsZSIsIGpzX2xpbmVfZ2V0LCAwLCBQUk9QX0FOR0xFKSwKICAgIEpTX0NHRVRTRVRfTUFHSUNfREVGKCJsZW5ndGgiLCBqc19saW5lX2dldCwgMCwgUFJPUF9MRU5HVEgpLAogICAgSlNfQ0dFVFNFVF9NQUdJQ19ERUYoInBpdm90IiwganNfbGluZV9nZXQsIGpzX2xpbmVfc2V0LCBQUk9QX1BJVk9UKSwKICAgIEpTX0NHRVRTRVRfTUFHSUNfREVGKCJ0byIsIGpzX2xpbmVfZ2V0LCBqc19saW5lX3NldCwgUFJPUF9UTyksCiAgICBKU19DRlVOQ19NQUdJQ19ERUYoInN3YXAiLCAwLCBqc19saW5lX21ldGhvZHMsIE1FVEhPRF9TV0FQKSwKICAgIEpTX0NGVU5DX01BR0lDX0RFRigiYXQiLCAxLCBqc19saW5lX21ldGhvZHMsIE1FVEhPRF9BVCksCiAgICBKU19DRlVOQ19NQUdJQ19ERUYoImludGVyc2VjdCIsIDEsIGpzX2xpbmVfbWV0aG9kcywgTUVUSE9EX0lOVEVSU0VDVCksCiAgICBKU19DRlVOQ19NQUdJQ19ERUYoImVuZHBvaW50RGlzdGFuY2VzIiwgMSwganNfbGluZV9tZXRob2RzLCBNRVRIT0RfRU5EUE9JTlRfRElTVEFOQ0VTKSwKICAgIEpTX0NGVU5DX01BR0lDX0RFRigiZGlzdGFuY2UiLCAxLCBqc19saW5lX21ldGhvZHMsIE1FVEhPRF9ESVNUQU5DRSksCiAgICBKU19DRlVOQ19ERUYoInRvQXJyYXkiLCAwLCBqc19saW5lX3RvYXJyYXkpLAogICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJ0b1BvaW50cyIsIDAsIGpzX2xpbmVfaXRlcmF0b3IsIEpTX0xJTkVfQVNfUE9JTlRTKSwKICAgIEpTX0NGVU5DX01BR0lDX0RFRigidG9TdHJpbmciLCAwLCBqc19saW5lX2l0ZXJhdG9yLCBKU19MSU5FX0FTX1BPSU5UUyB8IEpTX0xJTkVfVE9fU1RSSU5HKSwKICAgIEpTX0NGVU5DX01BR0lDX0RFRigidmFsdWVzIiwgMCwganNfbGluZV9pdGVyYXRvciwgSlNfTElORV9BU19WRUNUT1IgfCBKU19MSU5FX0dFVF9JVEVSQVRPUiksCiAgICBKU19BTElBU19ERUYoInN0YXJ0IiwgInBpdm90IiksCiAgICBKU19BTElBU19ERUYoImVuZCIsICJ0byIpLAogICAgSlNfQUxJQVNfREVGKCJbU3ltYm9sLml0ZXJhdG9yXSIsICJ2YWx1ZXMiKSwKICAgIEpTX1BST1BfU1RSSU5HX0RFRigiW1N5bWJvbC50b1N0cmluZ1RhZ10iLCAiTGluZSIsIEpTX1BST1BfQ09ORklHVVJBQkxFKSwKfTsKCmNvbnN0IEpTQ0Z1bmN0aW9uTGlzdEVudHJ5IGpzX2xpbmVfc3RhdGljX2Z1bmNzW10gPSB7SlNfQ0ZVTkNfREVGKCJmcm9tIiwgMSwganNfbGluZV9mcm9tKX07CgppbnQKanNfbGluZV9pbml0KEpTQ29udGV4dCogY3R4LCBKU01vZHVsZURlZiogbSkgewoKICBpZihqc19saW5lX2NsYXNzX2lkID09IDApIHsKICAgIC8qIGNyZWF0ZSB0aGUgTGluZSBjbGFzcyAqLwogICAgSlNfTmV3Q2xhc3NJRCgmanNfbGluZV9jbGFzc19pZCk7CiAgICBKU19OZXdDbGFzcyhKU19HZXRSdW50aW1lKGN0eCksIGpzX2xpbmVfY2xhc3NfaWQsICZqc19saW5lX2NsYXNzKTsKCiAgICBsaW5lX3Byb3RvID0gSlNfTmV3T2JqZWN0KGN0eCk7CiAgICBKU19TZXRQcm9wZXJ0eUZ1bmN0aW9uTGlzdChjdHgsIGxpbmVfcHJvdG8sIGpzX2xpbmVfcHJvdG9fZnVuY3MsIGNvdW50b2YoanNfbGluZV9wcm90b19mdW5jcykpOwogICAgSlNfU2V0Q2xhc3NQcm90byhjdHgsIGpzX2xpbmVfY2xhc3NfaWQsIGxpbmVfcHJvdG8pOwoKICAgIGxpbmVfY2xhc3MgPSBKU19OZXdDRnVuY3Rpb24yKGN0eCwganNfbGluZV9jdG9yLCAiTGluZSIsIDIsIEpTX0NGVU5DX2NvbnN0cnVjdG9yLCAwKTsKICAgIC8qIHNldCBwcm90by5jb25zdHJ1Y3RvciBhbmQgY3Rvci5wcm90b3R5cGUgKi8KICAgIEpTX1NldENvbnN0cnVjdG9yKGN0eCwgbGluZV9jbGFzcywgbGluZV9wcm90byk7CiAgICBKU19TZXRQcm9wZXJ0eUZ1bmN0aW9uTGlzdChjdHgsIGxpbmVfY2xhc3MsIGpzX2xpbmVfc3RhdGljX2Z1bmNzLCBjb3VudG9mKGpzX2xpbmVfc3RhdGljX2Z1bmNzKSk7CgogICAganNfc2V0X2luc3BlY3RfbWV0aG9kKGN0eCwgbGluZV9wcm90bywganNfbGluZV9pbnNwZWN0KTsKICB9CgogIGlmKG0pCiAgICBKU19TZXRNb2R1bGVFeHBvcnQoY3R4LCBtLCAiTGluZSIsIGxpbmVfY2xhc3MpOwoKICByZXR1cm4gMDsKfQoKZXh0ZXJuICJDIiBWSVNJQkxFIHZvaWQganNfbGluZV9leHBvcnQoSlNDb250ZXh0KiBjdHgsIEpTTW9kdWxlRGVmKiBtKSB7CiAgICBKU19BZGRNb2R1bGVFeHBvcnQoY3R4LCBtLCAiTGluZSIpOwoKfQoKdm9pZApqc19saW5lX2NvbnN0cnVjdG9yKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlIHBhcmVudCwgY29uc3QgY2hhciogbmFtZSkgewogIGlmKEpTX0lzVW5kZWZpbmVkKGxpbmVfY2xhc3MpKQogICAganNfbGluZV9pbml0KGN0eCwgMCk7CgogIEpTX1NldFByb3BlcnR5U3RyKGN0eCwgcGFyZW50LCBuYW1lID8gbmFtZSA6ICJMaW5lIiwgbGluZV9jbGFzcyk7Cn0KCiNpZmRlZiBKU19MSU5FX01PRFVMRQojZGVmaW5lIEpTX0lOSVRfTU9EVUxFIC8qVklTSUJMRSovIGpzX2luaXRfbW9kdWxlCiNlbHNlCiNkZWZpbmUgSlNfSU5JVF9NT0RVTEUgLypWSVNJQkxFKi8ganNfaW5pdF9tb2R1bGVfbGluZQojZW5kaWYKCkpTTW9kdWxlRGVmKgpKU19JTklUX01PRFVMRShKU0NvbnRleHQqIGN0eCwgY29uc3QgY2hhciogbW9kdWxlX25hbWUpIHsKICBKU01vZHVsZURlZiogbTsKICBtID0gSlNfTmV3Q01vZHVsZShjdHgsIG1vZHVsZV9uYW1lLCAmanNfbGluZV9pbml0KTsKICBpZighbSkKICAgIHJldHVybiBOVUxMOwogIGpzX2xpbmVfZXhwb3J0KGN0eCxtKTsKICByZXR1cm4gbTsKfQp9AAAAAAAAAAAGOgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA+DkAAAAAAAD4OQAAAAAAAAAAAAAAAPC/"
				],
				[
					78,
					1,
					"insert",
					{
						"characters": " "
					},
					"AgAAAI0mAAAAAAAAjiYAAAAAAAAAAAAAjiYAAAAAAACOJgAAAAAAALcBAAAKLyoKc3RhdGljIEpTVmFsdWUKanNfbGluZV9zeW1ib2xfaXRlcmF0b3IoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCogYXJndikgewogIEpTVmFsdWUgYXJyLCBpdGVyOwogIGpzcnQganMoY3R4KTsKICBhcnIgPSBqc19saW5lX3RvX2FycmF5KGN0eCwgdGhpc192YWwsIGFyZ2MsIGFyZ3YpOwoKICBpZihKU19Jc1VuZGVmaW5lZChpdGVyYXRvcl9zeW1ib2wpKQogICAgaXRlcmF0b3Jfc3ltYm9sID0ganMuZ2V0X3N5bWJvbCgiaXRlcmF0b3IiKTsKCiAgaWYoIUpTX0lzRnVuY3Rpb24oY3R4LCAoaXRlciA9IGpzLmdldF9wcm9wZXJ0eShhcnIsIGl0ZXJhdG9yX3N5bWJvbCkpKSkKICAgIHJldHVybiBKU19FWENFUFRJT047CiAgcmV0dXJuIEpTX0NhbGwoY3R4LCBpdGVyLCBhcnIsIDAsIGFyZ3YpOwp9Ki8K",
					"AQAAAAAAAAABAAAARCgAAAAAAACNJgAAAAAAAAAAAAAAAPC/"
				],
				[
					79,
					1,
					"left_delete",
					null,
					"AQAAAI0mAAAAAAAAjSYAAAAAAAABAAAAIA",
					"AQAAAAAAAAABAAAAjiYAAAAAAACOJgAAAAAAAAAAAAAAAPC/"
				],
				[
					80,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"AQAAAI0mAAAAAAAAjiYAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAjSYAAAAAAACNJgAAAAAAAAAAAAAAAPC/"
				],
				[
					81,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAABQOAAAI2luY2x1ZGUgImpzYmluZGluZ3MuaHBwIgojaW5jbHVkZSAianNfcG9pbnQuaHBwIgojaW5jbHVkZSAianNfYWxsb2MuaHBwIgojaW5jbHVkZSAianNfbGluZS5ocHAiCiNpbmNsdWRlICJqc19hcnJheS5ocHAiCiNpbmNsdWRlICJqc190eXBlZF9hcnJheS5ocHAiCiNpbmNsdWRlICJ1dGlsLmhwcCIKI2luY2x1ZGUgImxpbmUuaHBwIgoKZW51bSB7IFBST1BfU0xPUEUgPSAwLCBQUk9QX1BJVk9ULCBQUk9QX1RPLCBQUk9QX0FOR0xFLCBQUk9QX0xFTkdUSCB9OwplbnVtIHsgTUVUSE9EX1NXQVAgPSAwLCBNRVRIT0RfQVQsIE1FVEhPRF9JTlRFUlNFQ1QsIE1FVEhPRF9FTkRQT0lOVF9ESVNUQU5DRVMsIE1FVEhPRF9ESVNUQU5DRSB9OwoKZXh0ZXJuICJDIiB7CgpKU1ZhbHVlIGxpbmVfcHJvdG8gPSBKU19VTkRFRklORUQsIGxpbmVfY2xhc3MgPSBKU19VTkRFRklORUQ7CkpTQ2xhc3NJRCBqc19saW5lX2NsYXNzX2lkID0gMDsKClZJU0lCTEUgSlNWYWx1ZQpqc19saW5lX25ldyhKU0NvbnRleHQqIGN0eCwgZG91YmxlIHgxLCBkb3VibGUgeTEsIGRvdWJsZSB4MiwgZG91YmxlIHkyKSB7CiAgSlNWYWx1ZSByZXQ7CiAgSlNMaW5lRGF0YTxkb3VibGU+KiBsbjsKCiAgaWYoSlNfSXNVbmRlZmluZWQobGluZV9wcm90bykpCiAgICBqc19saW5lX2luaXQoY3R4LCBOVUxMKTsKCiAgcmV0ID0gSlNfTmV3T2JqZWN0UHJvdG9DbGFzcyhjdHgsIGxpbmVfcHJvdG8sIGpzX2xpbmVfY2xhc3NfaWQpOwoKICBsbiA9IGpzX2FsbG9jYXRlPEpTTGluZURhdGE8ZG91YmxlPj4oY3R4KTsKCiAgbG4tPmFycmF5WzBdID0geDE7CiAgbG4tPmFycmF5WzFdID0geTE7CiAgbG4tPmFycmF5WzJdID0geDI7CiAgbG4tPmFycmF5WzNdID0geTI7CgogIEpTX1NldE9wYXF1ZShyZXQsIGxuKTsKICByZXR1cm4gcmV0Owp9CgpzdGF0aWMgSlNWYWx1ZQpqc19saW5lX2N0b3IoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCBuZXdfdGFyZ2V0LCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2KSB7CiAgSlNMaW5lRGF0YTxkb3VibGU+KiBsbjsKICBKU1ZhbHVlIG9iaiA9IEpTX1VOREVGSU5FRDsKICBKU1ZhbHVlIHByb3RvOwogIGF1dG8gYXJncyA9IGFyZ3VtZW50X3JhbmdlKHN0ZDo6bWluKDQsIGFyZ2MpLCBhcmd2KTsKCiAgbG4gPSBqc19hbGxvY2F0ZTxKU0xpbmVEYXRhPGRvdWJsZT4+KGN0eCk7CiAgaWYoIWxuKQogICAgcmV0dXJuIEpTX0VYQ0VQVElPTjsKCiAgaWYoYXJnYyA+PSA0ICYmIHN0ZDo6cmFuZ2VzOjphbGxfb2YoYXJncywgSlNfSXNOdW1iZXIpKSB7CiAgICBpZihKU19Ub0Zsb2F0NjQoY3R4LCAmbG4tPmFycmF5WzBdLCBhcmd2WzBdKSkKICAgICAgZ290byBmYWlsOwogICAgaWYoSlNfVG9GbG9hdDY0KGN0eCwgJmxuLT5hcnJheVsxXSwgYXJndlsxXSkpCiAgICAgIGdvdG8gZmFpbDsKICAgIGlmKEpTX1RvRmxvYXQ2NChjdHgsICZsbi0+YXJyYXlbMl0sIGFyZ3ZbMl0pKQogICAgICBnb3RvIGZhaWw7CiAgICBpZihKU19Ub0Zsb2F0NjQoY3R4LCAmbG4tPmFycmF5WzNdLCBhcmd2WzNdKSkKICAgICAgZ290byBmYWlsOwogIH0gZWxzZSBpZighanNfbGluZV9yZWFkKGN0eCwgYXJndlswXSwgbG4pKSB7CiAgICByZXR1cm4gSlNfVGhyb3dUeXBlRXJyb3IoY3R4LCAiYXJndW1lbnQgMSBpcyBub3QgYSB2YWxpZCBsaW5lIik7CiAgfQogIC8qIHVzaW5nIG5ld190YXJnZXQgdG8gZ2V0IHRoZSBwcm90b3R5cGUgaXMgbmVjZXNzYXJ5IHdoZW4gdGhlCiAgICAgY2xhc3MgaXMgZXh0ZW5kZWQuICovCiAgcHJvdG8gPSBKU19HZXRQcm9wZXJ0eVN0cihjdHgsIG5ld190YXJnZXQsICJwcm90b3R5cGUiKTsKICBpZihKU19Jc0V4Y2VwdGlvbihwcm90bykpCiAgICBnb3RvIGZhaWw7CiAgb2JqID0gSlNfTmV3T2JqZWN0UHJvdG9DbGFzcyhjdHgsIHByb3RvLCBqc19saW5lX2NsYXNzX2lkKTsKICBKU19GcmVlVmFsdWUoY3R4LCBwcm90byk7CiAgaWYoSlNfSXNFeGNlcHRpb24ob2JqKSkKICAgIGdvdG8gZmFpbDsKICBKU19TZXRPcGFxdWUob2JqLCBsbik7CiAgcmV0dXJuIG9iajsKZmFpbDoKICBqc19kZWFsbG9jYXRlKGN0eCwgbG4pOwogIEpTX0ZyZWVWYWx1ZShjdHgsIG9iaik7CiAgcmV0dXJuIEpTX0VYQ0VQVElPTjsKfQoKSlNMaW5lRGF0YTxkb3VibGU+Kgpqc19saW5lX2RhdGEoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB2YWwpIHsKICByZXR1cm4gc3RhdGljX2Nhc3Q8SlNMaW5lRGF0YTxkb3VibGU+Kj4oSlNfR2V0T3BhcXVlMihjdHgsIHZhbCwganNfbGluZV9jbGFzc19pZCkpOwp9CgpzdGF0aWMgSlNWYWx1ZQpqc19saW5lX2dldF94eTEyKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBtYWdpYykgewogIEpTVmFsdWUgcmV0ID0gSlNfVU5ERUZJTkVEOwogIEpTTGluZURhdGE8ZG91YmxlPiogbG4gPSBzdGF0aWNfY2FzdDxKU0xpbmVEYXRhPGRvdWJsZT4qPihKU19HZXRPcGFxdWUyKGN0eCwgdGhpc192YWwsIGpzX2xpbmVfY2xhc3NfaWQpKTsKICBpZighbG4pCiAgICByZXQgPSBKU19FWENFUFRJT047CiAgZWxzZSBpZihtYWdpYyA9PSAwKQogICAgcmV0ID0gSlNfTmV3RmxvYXQ2NChjdHgsIGxuLT5hcnJheVswXSk7CiAgZWxzZSBpZihtYWdpYyA9PSAxKQogICAgcmV0ID0gSlNfTmV3RmxvYXQ2NChjdHgsIGxuLT5hcnJheVsxXSk7CiAgZWxzZSBpZihtYWdpYyA9PSAyKQogICAgcmV0ID0gSlNfTmV3RmxvYXQ2NChjdHgsIGxuLT5hcnJheVsyXSk7CiAgZWxzZSBpZihtYWdpYyA9PSAzKQogICAgcmV0ID0gSlNfTmV3RmxvYXQ2NChjdHgsIGxuLT5hcnJheVszXSk7CiAgcmV0dXJuIHJldDsKfQoKc3RhdGljIEpTVmFsdWUKanNfbGluZV9nZXRfYWIoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgaW50IG1hZ2ljKSB7CiAgSlNWYWx1ZSByZXQgPSBKU19VTkRFRklORUQ7CiAgSlNMaW5lRGF0YTxkb3VibGU+KiBsbiA9IHN0YXRpY19jYXN0PEpTTGluZURhdGE8ZG91YmxlPio+KEpTX0dldE9wYXF1ZTIoY3R4LCB0aGlzX3ZhbCwganNfbGluZV9jbGFzc19pZCkpOwogIGlmKCFsbikKICAgIHJldCA9IEpTX0VYQ0VQVElPTjsKICBlbHNlIGlmKG1hZ2ljID09IDApCiAgICByZXQgPSBqc19wb2ludF9uZXcoY3R4LCBsbi0+YXJyYXlbMF0sIGxuLT5hcnJheVsxXSk7CiAgZWxzZSBpZihtYWdpYyA9PSAxKQogICAgcmV0ID0ganNfcG9pbnRfbmV3KGN0eCwgbG4tPmFycmF5WzJdLCBsbi0+YXJyYXlbM10pOwoKICByZXR1cm4gcmV0Owp9CgpzdGF0aWMgSlNWYWx1ZQpqc19saW5lX2dldChKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgbWFnaWMpIHsKICBKU0xpbmVEYXRhPGRvdWJsZT4qIGxuOwoKICBpZighKGxuID0gc3RhdGljX2Nhc3Q8SlNMaW5lRGF0YTxkb3VibGU+Kj4oSlNfR2V0T3BhcXVlMihjdHgsIHRoaXNfdmFsLCBqc19saW5lX2NsYXNzX2lkKSkpKQogICAgcmV0dXJuIEpTX0VYQ0VQVElPTjsKICBzd2l0Y2gobWFnaWMpIHsKICAgIGNhc2UgUFJPUF9TTE9QRTogewogICAgICBMaW5lPGRvdWJsZT4gbGluZShsbi0+YXJyYXkpOwogICAgICByZXR1cm4ganNfcG9pbnRfd3JhcChjdHgsIGxpbmUuc2xvcGUoKSk7CiAgICB9CiAgICBjYXNlIFBST1BfUElWT1Q6IHsKICAgICAgSlNQb2ludERhdGE8ZG91YmxlPiBwaXZvdChsbi0+eDEsIGxuLT55MSk7CiAgICAgIHJldHVybiBqc19wb2ludF93cmFwKGN0eCwgcGl2b3QpOwogICAgfQogICAgY2FzZSBQUk9QX1RPOiB7CiAgICAgIEpTUG9pbnREYXRhPGRvdWJsZT4gdG8obG4tPngyLCBsbi0+eTIpOwogICAgICByZXR1cm4ganNfcG9pbnRfd3JhcChjdHgsIHRvKTsKICAgIH0KICAgIGNhc2UgUFJPUF9BTkdMRTogewogICAgICBMaW5lPGRvdWJsZT4gbGluZShsbi0+YXJyYXkpOwogICAgICByZXR1cm4gSlNfTmV3RmxvYXQ2NChjdHgsIHN0ZDo6YXRhbjIobG4tPngyIC0gbG4tPngxLCBsbi0+eTIgLSBsbi0+eTEpKTsKICAgIH0KICAgIGNhc2UgUFJPUF9MRU5HVEg6IHsKICAgICAgTGluZTxkb3VibGU+IGxpbmUobG4tPmFycmF5KTsKICAgICAgcmV0dXJuIEpTX05ld0Zsb2F0NjQoY3R4LCBsaW5lLmxlbmd0aCgpKTsKICAgIH0KICB9CiAgcmV0dXJuIEpTX1VOREVGSU5FRDsKfQoKc3RhdGljIEpTVmFsdWUKanNfbGluZV9zZXQoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgSlNWYWx1ZUNvbnN0IHZhbCwgaW50IG1hZ2ljKSB7CiAgSlNMaW5lRGF0YTxkb3VibGU+KiBsbjsKICBkb3VibGUgdjsKICBpZighKGxuID0gc3RhdGljX2Nhc3Q8SlNMaW5lRGF0YTxkb3VibGU+Kj4oSlNfR2V0T3BhcXVlMihjdHgsIHRoaXNfdmFsLCBqc19saW5lX2NsYXNzX2lkKSkpKQogICAgcmV0dXJuIEpTX0VYQ0VQVElPTjsKICBzd2l0Y2gobWFnaWMpIHsKICAgIGNhc2UgUFJPUF9QSVZPVDogewogICAgICBKU1BvaW50RGF0YTxkb3VibGU+IHBpdm90OwogICAgICBqc19wb2ludF9yZWFkKGN0eCwgdmFsLCAmcGl2b3QpOwoKICAgICAgbG4tPngxID0gcGl2b3QueDsKICAgICAgbG4tPnkxID0gcGl2b3QueTsKICAgICAgYnJlYWs7CiAgICB9CiAgICBjYXNlIFBST1BfVE86IHsKICAgICAgSlNQb2ludERhdGE8ZG91YmxlPiB0bzsKICAgICAganNfcG9pbnRfcmVhZChjdHgsIHZhbCwgJnRvKTsKCiAgICAgIGxuLT54MiA9IHRvLng7CiAgICAgIGxuLT55MiA9IHRvLnk7CiAgICAgIGJyZWFrOwogICAgfQogIH0KCiAgcmV0dXJuIEpTX1VOREVGSU5FRDsKfQoKc3RhdGljIEpTVmFsdWUKanNfbGluZV9zZXRfeHkxMihKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBKU1ZhbHVlQ29uc3QgdmFsLCBpbnQgbWFnaWMpIHsKICBKU0xpbmVEYXRhPGRvdWJsZT4qIGxuID0gc3RhdGljX2Nhc3Q8SlNMaW5lRGF0YTxkb3VibGU+Kj4oSlNfR2V0T3BhcXVlMihjdHgsIHRoaXNfdmFsLCBqc19saW5lX2NsYXNzX2lkKSk7CiAgZG91YmxlIHY7CiAgaWYoIWxuKQogICAgcmV0dXJuIEpTX0VYQ0VQVElPTjsKICBpZihKU19Ub0Zsb2F0NjQoY3R4LCAmdiwgdmFsKSkKICAgIHJldHVybiBKU19FWENFUFRJT047CiAgaWYobWFnaWMgPT0gMCkKICAgIGxuLT5hcnJheVswXSA9IHY7CiAgZWxzZSBpZihtYWdpYyA9PSAxKQogICAgbG4tPmFycmF5WzFdID0gdjsKICBlbHNlIGlmKG1hZ2ljID09IDIpCiAgICBsbi0+YXJyYXlbMl0gPSB2OwogIGVsc2UgaWYobWFnaWMgPT0gMykKICAgIGxuLT5hcnJheVszXSA9IHY7CgogIHJldHVybiBKU19VTkRFRklORUQ7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX2xpbmVfc2V0X2FiKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIEpTVmFsdWVDb25zdCB2YWwsIGludCBtYWdpYykgewogIEpTTGluZURhdGE8ZG91YmxlPiogbG47CiAgSlNQb2ludERhdGE8ZG91YmxlPiBwdDsKCiAgaWYoIShsbiA9IHN0YXRpY19jYXN0PEpTTGluZURhdGE8ZG91YmxlPio+KEpTX0dldE9wYXF1ZTIoY3R4LCB0aGlzX3ZhbCwganNfbGluZV9jbGFzc19pZCkpKSkKICAgIHJldHVybiBKU19FWENFUFRJT047CgogIGpzX3BvaW50X3JlYWQoY3R4LCB2YWwsICZwdCk7CgogIGlmKG1hZ2ljID09IDApIHsKICAgIGxuLT5hcnJheVswXSA9IHB0Lng7CiAgICBsbi0+YXJyYXlbMV0gPSBwdC55OwoKICB9IGVsc2UgaWYobWFnaWMgPT0gMSkgewogICAgbG4tPmFycmF5WzJdID0gcHQueDsKICAgIGxuLT5hcnJheVszXSA9IHB0Lnk7CiAgfQoKICByZXR1cm4gSlNfVU5ERUZJTkVEOwp9CgpzdGF0aWMgSlNWYWx1ZQpqc19saW5lX3BvaW50cyhKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2KSB7CiAgSlNMaW5lRGF0YTxkb3VibGU+KiBsbjsKCiAgaWYoIShsbiA9IHN0YXRpY19jYXN0PEpTTGluZURhdGE8ZG91YmxlPio+KEpTX0dldE9wYXF1ZTIoY3R4LCB0aGlzX3ZhbCwganNfbGluZV9jbGFzc19pZCkpKSkKICAgIHJldHVybiBKU19FWENFUFRJT047CgogIHJldHVybiBqc19hcnJheV9mcm9tKGN0eCwgbG4tPnBvaW50cyk7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX2xpbmVfaW5zcGVjdChKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2KSB7CiAgSlNMaW5lRGF0YTxkb3VibGU+KiBsbiA9IGpzX2xpbmVfZGF0YShjdHgsIHRoaXNfdmFsKTsKICBKU1ZhbHVlIG9iaiA9IEpTX05ld09iamVjdFByb3RvKGN0eCwgbGluZV9wcm90byk7CgogIEpTX0RlZmluZVByb3BlcnR5VmFsdWVTdHIoY3R4LCBvYmosICJ4MSIsIEpTX05ld0Zsb2F0NjQoY3R4LCBsbi0+eDEpLCBKU19QUk9QX0VOVU1FUkFCTEUpOwogIEpTX0RlZmluZVByb3BlcnR5VmFsdWVTdHIoY3R4LCBvYmosICJ5MSIsIEpTX05ld0Zsb2F0NjQoY3R4LCBsbi0+eTEpLCBKU19QUk9QX0VOVU1FUkFCTEUpOwogIEpTX0RlZmluZVByb3BlcnR5VmFsdWVTdHIoY3R4LCBvYmosICJ4MiIsIEpTX05ld0Zsb2F0NjQoY3R4LCBsbi0+eDIpLCBKU19QUk9QX0VOVU1FUkFCTEUpOwogIEpTX0RlZmluZVByb3BlcnR5VmFsdWVTdHIoY3R4LCBvYmosICJ5MiIsIEpTX05ld0Zsb2F0NjQoY3R4LCBsbi0+eTIpLCBKU19QUk9QX0VOVU1FUkFCTEUpOwogIHJldHVybiBvYmo7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX2xpbmVfbWV0aG9kcyhKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2LCBpbnQgbWFnaWMpIHsKICBKU0xpbmVEYXRhPGRvdWJsZT4qIGxuOwogIEpTVmFsdWUgcmV0ID0gSlNfVU5ERUZJTkVEOwogIGlmKCEobG4gPSBzdGF0aWNfY2FzdDxKU0xpbmVEYXRhPGRvdWJsZT4qPihKU19HZXRPcGFxdWUyKGN0eCwgdGhpc192YWwsIGpzX2xpbmVfY2xhc3NfaWQpKSkpCiAgICByZXR1cm4gSlNfRVhDRVBUSU9OOwoKICBzd2l0Y2gobWFnaWMpIHsKICAgIGNhc2UgTUVUSE9EX1NXQVA6IHsKICAgICAgSlNQb2ludERhdGE8ZG91YmxlPiBhID0gbG4tPnBvaW50c1swXSwgYiA9IGxuLT5wb2ludHNbMV07CiAgICAgIGxuLT5wb2ludHNbMF0gPSBiOwogICAgICBsbi0+cG9pbnRzWzFdID0gYTsKICAgICAgcmV0ID0gSlNfRHVwVmFsdWUoY3R4LCB0aGlzX3ZhbCk7CiAgICAgIGJyZWFrOwogICAgfQogICAgY2FzZSBNRVRIT0RfQVQ6IHsKICAgICAgZG91YmxlIHNpZ21hOwogICAgICBKU1BvaW50RGF0YTxkb3VibGU+IHA7CiAgICAgIGpzX3ZhbHVlX3RvKGN0eCwgYXJndlswXSwgc2lnbWEpOwoKICAgICAgc2lnbWEgPSBmbWluKGZtYXgoc2lnbWEsIDEpLCAwKTsKCiAgICAgIHAueCA9IGxuLT5wb2ludHNbMF0ueCAqICgxLjAgLSBzaWdtYSkgKyBsbi0+cG9pbnRzWzFdLnggKiBzaWdtYTsKICAgICAgcC55ID0gbG4tPnBvaW50c1swXS55ICogKDEuMCAtIHNpZ21hKSArIGxuLT5wb2ludHNbMV0ueSAqIHNpZ21hOwoKICAgICAgcmV0ID0ganNfcG9pbnRfd3JhcChjdHgsIHApOwogICAgICBicmVhazsKICAgIH0KICAgIGNhc2UgTUVUSE9EX0lOVEVSU0VDVDogewogICAgICBzdGQ6OmFycmF5PGRvdWJsZSwgND4gYXJnID0ganNfbGluZV9nZXQ8ZG91YmxlPihjdHgsIGFyZ3ZbMF0pOwogICAgICBKU1BvaW50RGF0YTxkb3VibGU+KiBwb2ludCA9IG51bGxwdHI7CgogICAgICBpZihhcmdjID4gMSkKICAgICAgICBwb2ludCA9IGpzX3BvaW50X2RhdGEoY3R4LCBhcmd2WzFdKTsKCiAgICAgIExpbmU8ZG91YmxlPiBsaW5lID0gTGluZShsbi0+YXJyYXkpOwogICAgICBMaW5lPGRvdWJsZT4gb3RoZXIgPSBMaW5lKGFyZyk7CgogICAgICByZXQgPSBKU19OZXdCb29sKGN0eCwgbGluZS5pbnRlcnNlY3Qob3RoZXIsIHBvaW50KSk7CiAgICAgIGJyZWFrOwogICAgfQogICAgY2FzZSBNRVRIT0RfRU5EUE9JTlRfRElTVEFOQ0VTOiB7CiAgICAgIEpTUG9pbnREYXRhPGRvdWJsZT4gcHQ7CiAgICAgIGpzX3BvaW50X3JlYWQoY3R4LCBhcmd2WzBdLCAmcHQpOwogICAgICBMaW5lPGRvdWJsZT4gbGluZSA9IExpbmUobG4tPmFycmF5KTsKICAgICAgYXV0byBkaXN0YW5jZXMgPSBsaW5lLmVuZHBvaW50X2Rpc3RhbmNlcyhwdCk7CiAgICAgIHJldCA9IEpTX05ld0FycmF5KGN0eCk7CiAgICAgIEpTX1NldFByb3BlcnR5VWludDMyKGN0eCwgcmV0LCAwLCBqc19udW1iZXJfbmV3KGN0eCwgZGlzdGFuY2VzLmZpcnN0KSk7CiAgICAgIEpTX1NldFByb3BlcnR5VWludDMyKGN0eCwgcmV0LCAxLCBqc19udW1iZXJfbmV3KGN0eCwgZGlzdGFuY2VzLnNlY29uZCkpOwogICAgICBicmVhazsKICAgIH0KICAgIGNhc2UgTUVUSE9EX0RJU1RBTkNFOiB7CiAgICAgIGN2OjpQb2ludDJkIHB0OwogICAgICBqc19wb2ludF9yZWFkKGN0eCwgYXJndlswXSwgJnB0KTsKICAgICAgTGluZTxkb3VibGU+IGxpbmUgPSBMaW5lKGxuLT5hcnJheSk7CiAgICAgIHJldCA9IGpzX251bWJlcl9uZXcoY3R4LCBsaW5lLmRpc3RhbmNlKHB0KSk7CiAgICAgIGJyZWFrOwogICAgfQogIH0KICByZXR1cm4gcmV0Owp9CgpzdGF0aWMgSlNWYWx1ZQpqc19saW5lX3RvYXJyYXkoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCBsaW5lLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmcpIHsKICBKU0xpbmVEYXRhPGRvdWJsZT4qIGxuOwoKICBpZighKGxuID0gc3RhdGljX2Nhc3Q8SlNMaW5lRGF0YTxkb3VibGU+Kj4oSlNfR2V0T3BhcXVlMihjdHgsIGxpbmUsIGpzX2xpbmVfY2xhc3NfaWQpKSkpCiAgICByZXR1cm4gSlNfRVhDRVBUSU9OOwoKICByZXR1cm4ganNfdHlwZWRhcnJheV9mcm9tKGN0eCwgbG4tPmFycmF5KTsKfQoKc3RhdGljIEpTVmFsdWUKanNfY2FsbF9tZXRob2QoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWUgb2JqLCBjb25zdCBjaGFyKiBuYW1lLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2KSB7CiAgSlNWYWx1ZSBmbiwgcmV0ID0gSlNfVU5ERUZJTkVEOwoKICBmbiA9IEpTX0dldFByb3BlcnR5U3RyKGN0eCwgb2JqLCBuYW1lKTsKICBpZighSlNfSXNVbmRlZmluZWQoZm4pKQogICAgcmV0ID0gSlNfQ2FsbChjdHgsIGZuLCBvYmosIGFyZ2MsIGFyZ3YpOwogIHJldHVybiByZXQ7Cn0KCiNkZWZpbmUgSlNfTElORV9BU19QT0lOVFMgMHgwMQojZGVmaW5lIEpTX0xJTkVfQVNfVkVDVE9SIDB4MDIKCiNkZWZpbmUgSlNfTElORV9HRVRfSVRFUkFUT1IgMHg4MAojZGVmaW5lIEpTX0xJTkVfVE9fU1RSSU5HIDB4NDAKCnN0YXRpYyBKU1ZhbHVlCmpzX2xpbmVfaXRlcmF0b3IoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCogYXJndiwgaW50IG1hZ2ljKSB7CiAgSlNMaW5lRGF0YTxkb3VibGU+KiBsbiA9IHN0YXRpY19jYXN0PEpTTGluZURhdGE8ZG91YmxlPio+KEpTX0dldE9wYXF1ZTIoY3R4LCB0aGlzX3ZhbCwganNfbGluZV9jbGFzc19pZCkpOwogIEpTVmFsdWUgbWV0aG9kLCByZXQgPSBKU19VTkRFRklORUQ7CgogIGlmKG1hZ2ljICYgSlNfTElORV9BU19QT0lOVFMpCiAgICByZXQgPSBqc19saW5lX3BvaW50cyhjdHgsIHRoaXNfdmFsLCBhcmdjLCBhcmd2KTsKICBpZihtYWdpYyAmIEpTX0xJTkVfQVNfVkVDVE9SKQogICAgcmV0ID0ganNfbGluZV90b2FycmF5KGN0eCwgdGhpc192YWwsIGFyZ2MsIGFyZ3YpOwoKICBpZihtYWdpYyAmIEpTX0xJTkVfR0VUX0lURVJBVE9SKQogICAgcmV0ID0ganNfY2FsbF9tZXRob2QoY3R4LCByZXQsICJ2YWx1ZXMiLCAwLCBOVUxMKTsKCiAgaWYobWFnaWMgJiBKU19MSU5FX1RPX1NUUklORykgewogICAgSlNWYWx1ZUNvbnN0IGFyZ3NbMV0gPSB7MH07CiAgICBhcmdzWzBdID0gSlNfTmV3U3RyaW5nKGN0eCwgIiAiKTsKCiAgICByZXQgPSBqc19jYWxsX21ldGhvZChjdHgsIHJldCwgImpvaW4iLCAxLCBhcmdzKTsKICB9CgogIHJldHVybiByZXQ7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX2xpbmVfZnJvbShKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2KSB7CiAgSlNMaW5lRGF0YTxkb3VibGU+IGxpbmUgPSB7MCwgMCwgMCwgMH07CiAgSlNWYWx1ZSByZXQgPSBKU19FWENFUFRJT047CgogIGlmKEpTX0lzU3RyaW5nKGFyZ3ZbMF0pKSB7CiAgICBjb25zdCBjaGFyKiBzdHIgPSBKU19Ub0NTdHJpbmcoY3R4LCBhcmd2WzBdKTsKICAgIGNoYXIqIGVuZHB0ciA9IG51bGxwdHI7CiAgICBmb3Ioc2l6ZV90IGkgPSAwOyBpIDwgNDsgaSsrKSB7CiAgICAgIHdoaWxlKCFpc2RpZ2l0KCpzdHIpICYmICpzdHIgIT0gJy0nICYmICpzdHIgIT0gJysnICYmICEoKnN0ciA9PSAnLicgJiYgaXNkaWdpdChzdHJbMV0pKSkgc3RyKys7CiAgICAgIGlmKCpzdHIgPT0gJ1wwJykKICAgICAgICBicmVhazsKICAgICAgbGluZS5hcnJheVtpXSA9IHN0cnRvZChzdHIsICZlbmRwdHIpOwogICAgICBzdHIgPSBlbmRwdHI7CiAgICB9CiAgfSBlbHNlIHsKICAgIGpzX2xpbmVfcmVhZChjdHgsIGFyZ3ZbMF0sICZsaW5lKTsKICB9CiAgaWYobGluZS5hcnJheVsyXSA+IDAgJiYgbGluZS5hcnJheVszXSA+IDApCiAgICByZXQgPSBqc19saW5lX25ldyhjdHgsIGxpbmUuYXJyYXlbMF0sIGxpbmUuYXJyYXlbMV0sIGxpbmUuYXJyYXlbMl0sIGxpbmUuYXJyYXlbM10pOwogIHJldHVybiByZXQ7Cn0KCnZvaWQKanNfbGluZV9maW5hbGl6ZXIoSlNSdW50aW1lKiBydCwgSlNWYWx1ZSB2YWwpIHsKICBKU0xpbmVEYXRhPGRvdWJsZT4qIGxuOwoKICBpZigobG4gPSBzdGF0aWNfY2FzdDxKU0xpbmVEYXRhPGRvdWJsZT4qPihKU19HZXRPcGFxdWUodmFsLCBqc19saW5lX2NsYXNzX2lkKSkpKQogICAgLyogTm90ZTogJ2xuJyBjYW4gYmUgTlVMTCBpbiBjYXNlIEpTX1NldE9wYXF1ZSgpIHdhcyBub3QgY2FsbGVkICovCiAgICBqc19kZWFsbG9jYXRlKHJ0LCBsbik7Cn0KCkpTQ2xhc3NEZWYganNfbGluZV9jbGFzcyA9IHsKICAgIC5jbGFzc19uYW1lID0gIkxpbmUiLAogICAgLmZpbmFsaXplciA9IGpzX2xpbmVfZmluYWxpemVyLAp9OwoKY29uc3QgSlNDRnVuY3Rpb25MaXN0RW50cnkganNfbGluZV9wcm90b19mdW5jc1tdID0gewogICAgSlNfQ0dFVFNFVF9FTlVNRVJBQkxFX0RFRigieDEiLCBqc19saW5lX2dldF94eTEyLCBqc19saW5lX3NldF94eTEyLCAwKSwKICAgIEpTX0NHRVRTRVRfRU5VTUVSQUJMRV9ERUYoInkxIiwganNfbGluZV9nZXRfeHkxMiwganNfbGluZV9zZXRfeHkxMiwgMSksCiAgICBKU19DR0VUU0VUX0VOVU1FUkFCTEVfREVGKCJ4MiIsIGpzX2xpbmVfZ2V0X3h5MTIsIGpzX2xpbmVfc2V0X3h5MTIsIDIpLAogICAgSlNfQ0dFVFNFVF9FTlVNRVJBQkxFX0RFRigieTIiLCBqc19saW5lX2dldF94eTEyLCBqc19saW5lX3NldF94eTEyLCAzKSwKICAgIEpTX0NHRVRTRVRfTUFHSUNfREVGKCJhIiwganNfbGluZV9nZXRfYWIsIGpzX2xpbmVfc2V0X2FiLCAwKSwKICAgIEpTX0NHRVRTRVRfTUFHSUNfREVGKCJiIiwganNfbGluZV9nZXRfYWIsIGpzX2xpbmVfc2V0X2FiLCAxKSwKICAgIEpTX0NHRVRTRVRfTUFHSUNfREVGKCIwIiwganNfbGluZV9nZXRfYWIsIGpzX2xpbmVfc2V0X2FiLCAwKSwKICAgIEpTX0NHRVRTRVRfTUFHSUNfREVGKCIxIiwganNfbGluZV9nZXRfYWIsIGpzX2xpbmVfc2V0X2FiLCAxKSwKICAgIEpTX0NHRVRTRVRfTUFHSUNfREVGKCJzbG9wZSIsIGpzX2xpbmVfZ2V0LCAwLCBQUk9QX1NMT1BFKSwKICAgIEpTX0NHRVRTRVRfTUFHSUNfREVGKCJhbmdsZSIsIGpzX2xpbmVfZ2V0LCAwLCBQUk9QX0FOR0xFKSwKICAgIEpTX0NHRVRTRVRfTUFHSUNfREVGKCJsZW5ndGgiLCBqc19saW5lX2dldCwgMCwgUFJPUF9MRU5HVEgpLAogICAgSlNfQ0dFVFNFVF9NQUdJQ19ERUYoInBpdm90IiwganNfbGluZV9nZXQsIGpzX2xpbmVfc2V0LCBQUk9QX1BJVk9UKSwKICAgIEpTX0NHRVRTRVRfTUFHSUNfREVGKCJ0byIsIGpzX2xpbmVfZ2V0LCBqc19saW5lX3NldCwgUFJPUF9UTyksCiAgICBKU19DRlVOQ19NQUdJQ19ERUYoInN3YXAiLCAwLCBqc19saW5lX21ldGhvZHMsIE1FVEhPRF9TV0FQKSwKICAgIEpTX0NGVU5DX01BR0lDX0RFRigiYXQiLCAxLCBqc19saW5lX21ldGhvZHMsIE1FVEhPRF9BVCksCiAgICBKU19DRlVOQ19NQUdJQ19ERUYoImludGVyc2VjdCIsIDEsIGpzX2xpbmVfbWV0aG9kcywgTUVUSE9EX0lOVEVSU0VDVCksCiAgICBKU19DRlVOQ19NQUdJQ19ERUYoImVuZHBvaW50RGlzdGFuY2VzIiwgMSwganNfbGluZV9tZXRob2RzLCBNRVRIT0RfRU5EUE9JTlRfRElTVEFOQ0VTKSwKICAgIEpTX0NGVU5DX01BR0lDX0RFRigiZGlzdGFuY2UiLCAxLCBqc19saW5lX21ldGhvZHMsIE1FVEhPRF9ESVNUQU5DRSksCiAgICBKU19DRlVOQ19ERUYoInRvQXJyYXkiLCAwLCBqc19saW5lX3RvYXJyYXkpLAogICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJ0b1BvaW50cyIsIDAsIGpzX2xpbmVfaXRlcmF0b3IsIEpTX0xJTkVfQVNfUE9JTlRTKSwKICAgIEpTX0NGVU5DX01BR0lDX0RFRigidG9TdHJpbmciLCAwLCBqc19saW5lX2l0ZXJhdG9yLCBKU19MSU5FX0FTX1BPSU5UUyB8IEpTX0xJTkVfVE9fU1RSSU5HKSwKICAgIEpTX0NGVU5DX01BR0lDX0RFRigidmFsdWVzIiwgMCwganNfbGluZV9pdGVyYXRvciwgSlNfTElORV9BU19WRUNUT1IgfCBKU19MSU5FX0dFVF9JVEVSQVRPUiksCiAgICBKU19BTElBU19ERUYoInN0YXJ0IiwgInBpdm90IiksCiAgICBKU19BTElBU19ERUYoImVuZCIsICJ0byIpLAogICAgSlNfQUxJQVNfREVGKCJbU3ltYm9sLml0ZXJhdG9yXSIsICJ2YWx1ZXMiKSwKICAgIEpTX1BST1BfU1RSSU5HX0RFRigiW1N5bWJvbC50b1N0cmluZ1RhZ10iLCAiTGluZSIsIEpTX1BST1BfQ09ORklHVVJBQkxFKSwKfTsKCmNvbnN0IEpTQ0Z1bmN0aW9uTGlzdEVudHJ5IGpzX2xpbmVfc3RhdGljX2Z1bmNzW10gPSB7SlNfQ0ZVTkNfREVGKCJmcm9tIiwgMSwganNfbGluZV9mcm9tKX07CgppbnQKanNfbGluZV9pbml0KEpTQ29udGV4dCogY3R4LCBKU01vZHVsZURlZiogbSkgewoKICBpZihqc19saW5lX2NsYXNzX2lkID09IDApIHsKICAgIC8qIGNyZWF0ZSB0aGUgTGluZSBjbGFzcyAqLwogICAgSlNfTmV3Q2xhc3NJRCgmanNfbGluZV9jbGFzc19pZCk7CiAgICBKU19OZXdDbGFzcyhKU19HZXRSdW50aW1lKGN0eCksIGpzX2xpbmVfY2xhc3NfaWQsICZqc19saW5lX2NsYXNzKTsKCiAgICBsaW5lX3Byb3RvID0gSlNfTmV3T2JqZWN0KGN0eCk7CiAgICBKU19TZXRQcm9wZXJ0eUZ1bmN0aW9uTGlzdChjdHgsIGxpbmVfcHJvdG8sIGpzX2xpbmVfcHJvdG9fZnVuY3MsIGNvdW50b2YoanNfbGluZV9wcm90b19mdW5jcykpOwogICAgSlNfU2V0Q2xhc3NQcm90byhjdHgsIGpzX2xpbmVfY2xhc3NfaWQsIGxpbmVfcHJvdG8pOwoKICAgIGxpbmVfY2xhc3MgPSBKU19OZXdDRnVuY3Rpb24yKGN0eCwganNfbGluZV9jdG9yLCAiTGluZSIsIDIsIEpTX0NGVU5DX2NvbnN0cnVjdG9yLCAwKTsKICAgIC8qIHNldCBwcm90by5jb25zdHJ1Y3RvciBhbmQgY3Rvci5wcm90b3R5cGUgKi8KICAgIEpTX1NldENvbnN0cnVjdG9yKGN0eCwgbGluZV9jbGFzcywgbGluZV9wcm90byk7CiAgICBKU19TZXRQcm9wZXJ0eUZ1bmN0aW9uTGlzdChjdHgsIGxpbmVfY2xhc3MsIGpzX2xpbmVfc3RhdGljX2Z1bmNzLCBjb3VudG9mKGpzX2xpbmVfc3RhdGljX2Z1bmNzKSk7CgogICAganNfc2V0X2luc3BlY3RfbWV0aG9kKGN0eCwgbGluZV9wcm90bywganNfbGluZV9pbnNwZWN0KTsKICB9CgogIGlmKG0pCiAgICBKU19TZXRNb2R1bGVFeHBvcnQoY3R4LCBtLCAiTGluZSIsIGxpbmVfY2xhc3MpOwoKICByZXR1cm4gMDsKfQoKZXh0ZXJuICJDIiBWSVNJQkxFIHZvaWQKanNfbGluZV9leHBvcnQoSlNDb250ZXh0KiBjdHgsIEpTTW9kdWxlRGVmKiBtKSB7CiAgSlNfQWRkTW9kdWxlRXhwb3J0KGN0eCwgbSwgIkxpbmUiKTsKfQoKdm9pZApqc19saW5lX2NvbnN0cnVjdG9yKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlIHBhcmVudCwgY29uc3QgY2hhciogbmFtZSkgewogIGlmKEpTX0lzVW5kZWZpbmVkKGxpbmVfY2xhc3MpKQogICAganNfbGluZV9pbml0KGN0eCwgMCk7CgogIEpTX1NldFByb3BlcnR5U3RyKGN0eCwgcGFyZW50LCBuYW1lID8gbmFtZSA6ICJMaW5lIiwgbGluZV9jbGFzcyk7Cn0KCiNpZmRlZiBKU19MSU5FX01PRFVMRQojZGVmaW5lIEpTX0lOSVRfTU9EVUxFIC8qVklTSUJMRSovIGpzX2luaXRfbW9kdWxlCiNlbHNlCiNkZWZpbmUgSlNfSU5JVF9NT0RVTEUgLypWSVNJQkxFKi8ganNfaW5pdF9tb2R1bGVfbGluZQojZW5kaWYKCkpTTW9kdWxlRGVmKgpKU19JTklUX01PRFVMRShKU0NvbnRleHQqIGN0eCwgY29uc3QgY2hhciogbW9kdWxlX25hbWUpIHsKICBKU01vZHVsZURlZiogbTsKICBtID0gSlNfTmV3Q01vZHVsZShjdHgsIG1vZHVsZV9uYW1lLCAmanNfbGluZV9pbml0KTsKICBpZighbSkKICAgIHJldHVybiBOVUxMOwogIGpzX2xpbmVfZXhwb3J0KGN0eCwgbSk7CiAgcmV0dXJuIG07Cn0KfQAAAAAAAAAAUDgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAjiYAAAAAAACOJgAAAAAAAAAAAAAAAPC/"
				],
				[
					82,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAABQOAAAI2luY2x1ZGUgImpzYmluZGluZ3MuaHBwIgojaW5jbHVkZSAianNfcG9pbnQuaHBwIgojaW5jbHVkZSAianNfYWxsb2MuaHBwIgojaW5jbHVkZSAianNfbGluZS5ocHAiCiNpbmNsdWRlICJqc19hcnJheS5ocHAiCiNpbmNsdWRlICJqc190eXBlZF9hcnJheS5ocHAiCiNpbmNsdWRlICJ1dGlsLmhwcCIKI2luY2x1ZGUgImxpbmUuaHBwIgoKZW51bSB7IFBST1BfU0xPUEUgPSAwLCBQUk9QX1BJVk9ULCBQUk9QX1RPLCBQUk9QX0FOR0xFLCBQUk9QX0xFTkdUSCB9OwplbnVtIHsgTUVUSE9EX1NXQVAgPSAwLCBNRVRIT0RfQVQsIE1FVEhPRF9JTlRFUlNFQ1QsIE1FVEhPRF9FTkRQT0lOVF9ESVNUQU5DRVMsIE1FVEhPRF9ESVNUQU5DRSB9OwoKZXh0ZXJuICJDIiB7CgpKU1ZhbHVlIGxpbmVfcHJvdG8gPSBKU19VTkRFRklORUQsIGxpbmVfY2xhc3MgPSBKU19VTkRFRklORUQ7CkpTQ2xhc3NJRCBqc19saW5lX2NsYXNzX2lkID0gMDsKClZJU0lCTEUgSlNWYWx1ZQpqc19saW5lX25ldyhKU0NvbnRleHQqIGN0eCwgZG91YmxlIHgxLCBkb3VibGUgeTEsIGRvdWJsZSB4MiwgZG91YmxlIHkyKSB7CiAgSlNWYWx1ZSByZXQ7CiAgSlNMaW5lRGF0YTxkb3VibGU+KiBsbjsKCiAgaWYoSlNfSXNVbmRlZmluZWQobGluZV9wcm90bykpCiAgICBqc19saW5lX2luaXQoY3R4LCBOVUxMKTsKCiAgcmV0ID0gSlNfTmV3T2JqZWN0UHJvdG9DbGFzcyhjdHgsIGxpbmVfcHJvdG8sIGpzX2xpbmVfY2xhc3NfaWQpOwoKICBsbiA9IGpzX2FsbG9jYXRlPEpTTGluZURhdGE8ZG91YmxlPj4oY3R4KTsKCiAgbG4tPmFycmF5WzBdID0geDE7CiAgbG4tPmFycmF5WzFdID0geTE7CiAgbG4tPmFycmF5WzJdID0geDI7CiAgbG4tPmFycmF5WzNdID0geTI7CgogIEpTX1NldE9wYXF1ZShyZXQsIGxuKTsKICByZXR1cm4gcmV0Owp9CgpzdGF0aWMgSlNWYWx1ZQpqc19saW5lX2N0b3IoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCBuZXdfdGFyZ2V0LCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2KSB7CiAgSlNMaW5lRGF0YTxkb3VibGU+KiBsbjsKICBKU1ZhbHVlIG9iaiA9IEpTX1VOREVGSU5FRDsKICBKU1ZhbHVlIHByb3RvOwogIGF1dG8gYXJncyA9IGFyZ3VtZW50X3JhbmdlKHN0ZDo6bWluKDQsIGFyZ2MpLCBhcmd2KTsKCiAgbG4gPSBqc19hbGxvY2F0ZTxKU0xpbmVEYXRhPGRvdWJsZT4+KGN0eCk7CiAgaWYoIWxuKQogICAgcmV0dXJuIEpTX0VYQ0VQVElPTjsKCiAgaWYoYXJnYyA+PSA0ICYmIHN0ZDo6cmFuZ2VzOjphbGxfb2YoYXJncywgSlNfSXNOdW1iZXIpKSB7CiAgICBpZihKU19Ub0Zsb2F0NjQoY3R4LCAmbG4tPmFycmF5WzBdLCBhcmd2WzBdKSkKICAgICAgZ290byBmYWlsOwogICAgaWYoSlNfVG9GbG9hdDY0KGN0eCwgJmxuLT5hcnJheVsxXSwgYXJndlsxXSkpCiAgICAgIGdvdG8gZmFpbDsKICAgIGlmKEpTX1RvRmxvYXQ2NChjdHgsICZsbi0+YXJyYXlbMl0sIGFyZ3ZbMl0pKQogICAgICBnb3RvIGZhaWw7CiAgICBpZihKU19Ub0Zsb2F0NjQoY3R4LCAmbG4tPmFycmF5WzNdLCBhcmd2WzNdKSkKICAgICAgZ290byBmYWlsOwogIH0gZWxzZSBpZighanNfbGluZV9yZWFkKGN0eCwgYXJndlswXSwgbG4pKSB7CiAgICByZXR1cm4gSlNfVGhyb3dUeXBlRXJyb3IoY3R4LCAiYXJndW1lbnQgMSBpcyBub3QgYSB2YWxpZCBsaW5lIik7CiAgfQogIC8qIHVzaW5nIG5ld190YXJnZXQgdG8gZ2V0IHRoZSBwcm90b3R5cGUgaXMgbmVjZXNzYXJ5IHdoZW4gdGhlCiAgICAgY2xhc3MgaXMgZXh0ZW5kZWQuICovCiAgcHJvdG8gPSBKU19HZXRQcm9wZXJ0eVN0cihjdHgsIG5ld190YXJnZXQsICJwcm90b3R5cGUiKTsKICBpZihKU19Jc0V4Y2VwdGlvbihwcm90bykpCiAgICBnb3RvIGZhaWw7CiAgb2JqID0gSlNfTmV3T2JqZWN0UHJvdG9DbGFzcyhjdHgsIHByb3RvLCBqc19saW5lX2NsYXNzX2lkKTsKICBKU19GcmVlVmFsdWUoY3R4LCBwcm90byk7CiAgaWYoSlNfSXNFeGNlcHRpb24ob2JqKSkKICAgIGdvdG8gZmFpbDsKICBKU19TZXRPcGFxdWUob2JqLCBsbik7CiAgcmV0dXJuIG9iajsKZmFpbDoKICBqc19kZWFsbG9jYXRlKGN0eCwgbG4pOwogIEpTX0ZyZWVWYWx1ZShjdHgsIG9iaik7CiAgcmV0dXJuIEpTX0VYQ0VQVElPTjsKfQoKSlNMaW5lRGF0YTxkb3VibGU+Kgpqc19saW5lX2RhdGEoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB2YWwpIHsKICByZXR1cm4gc3RhdGljX2Nhc3Q8SlNMaW5lRGF0YTxkb3VibGU+Kj4oSlNfR2V0T3BhcXVlMihjdHgsIHZhbCwganNfbGluZV9jbGFzc19pZCkpOwp9CgpzdGF0aWMgSlNWYWx1ZQpqc19saW5lX2dldF94eTEyKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBtYWdpYykgewogIEpTVmFsdWUgcmV0ID0gSlNfVU5ERUZJTkVEOwogIEpTTGluZURhdGE8ZG91YmxlPiogbG4gPSBzdGF0aWNfY2FzdDxKU0xpbmVEYXRhPGRvdWJsZT4qPihKU19HZXRPcGFxdWUyKGN0eCwgdGhpc192YWwsIGpzX2xpbmVfY2xhc3NfaWQpKTsKICBpZighbG4pCiAgICByZXQgPSBKU19FWENFUFRJT047CiAgZWxzZSBpZihtYWdpYyA9PSAwKQogICAgcmV0ID0gSlNfTmV3RmxvYXQ2NChjdHgsIGxuLT5hcnJheVswXSk7CiAgZWxzZSBpZihtYWdpYyA9PSAxKQogICAgcmV0ID0gSlNfTmV3RmxvYXQ2NChjdHgsIGxuLT5hcnJheVsxXSk7CiAgZWxzZSBpZihtYWdpYyA9PSAyKQogICAgcmV0ID0gSlNfTmV3RmxvYXQ2NChjdHgsIGxuLT5hcnJheVsyXSk7CiAgZWxzZSBpZihtYWdpYyA9PSAzKQogICAgcmV0ID0gSlNfTmV3RmxvYXQ2NChjdHgsIGxuLT5hcnJheVszXSk7CiAgcmV0dXJuIHJldDsKfQoKc3RhdGljIEpTVmFsdWUKanNfbGluZV9nZXRfYWIoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgaW50IG1hZ2ljKSB7CiAgSlNWYWx1ZSByZXQgPSBKU19VTkRFRklORUQ7CiAgSlNMaW5lRGF0YTxkb3VibGU+KiBsbiA9IHN0YXRpY19jYXN0PEpTTGluZURhdGE8ZG91YmxlPio+KEpTX0dldE9wYXF1ZTIoY3R4LCB0aGlzX3ZhbCwganNfbGluZV9jbGFzc19pZCkpOwogIGlmKCFsbikKICAgIHJldCA9IEpTX0VYQ0VQVElPTjsKICBlbHNlIGlmKG1hZ2ljID09IDApCiAgICByZXQgPSBqc19wb2ludF9uZXcoY3R4LCBsbi0+YXJyYXlbMF0sIGxuLT5hcnJheVsxXSk7CiAgZWxzZSBpZihtYWdpYyA9PSAxKQogICAgcmV0ID0ganNfcG9pbnRfbmV3KGN0eCwgbG4tPmFycmF5WzJdLCBsbi0+YXJyYXlbM10pOwoKICByZXR1cm4gcmV0Owp9CgpzdGF0aWMgSlNWYWx1ZQpqc19saW5lX2dldChKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgbWFnaWMpIHsKICBKU0xpbmVEYXRhPGRvdWJsZT4qIGxuOwoKICBpZighKGxuID0gc3RhdGljX2Nhc3Q8SlNMaW5lRGF0YTxkb3VibGU+Kj4oSlNfR2V0T3BhcXVlMihjdHgsIHRoaXNfdmFsLCBqc19saW5lX2NsYXNzX2lkKSkpKQogICAgcmV0dXJuIEpTX0VYQ0VQVElPTjsKICBzd2l0Y2gobWFnaWMpIHsKICAgIGNhc2UgUFJPUF9TTE9QRTogewogICAgICBMaW5lPGRvdWJsZT4gbGluZShsbi0+YXJyYXkpOwogICAgICByZXR1cm4ganNfcG9pbnRfd3JhcChjdHgsIGxpbmUuc2xvcGUoKSk7CiAgICB9CiAgICBjYXNlIFBST1BfUElWT1Q6IHsKICAgICAgSlNQb2ludERhdGE8ZG91YmxlPiBwaXZvdChsbi0+eDEsIGxuLT55MSk7CiAgICAgIHJldHVybiBqc19wb2ludF93cmFwKGN0eCwgcGl2b3QpOwogICAgfQogICAgY2FzZSBQUk9QX1RPOiB7CiAgICAgIEpTUG9pbnREYXRhPGRvdWJsZT4gdG8obG4tPngyLCBsbi0+eTIpOwogICAgICByZXR1cm4ganNfcG9pbnRfd3JhcChjdHgsIHRvKTsKICAgIH0KICAgIGNhc2UgUFJPUF9BTkdMRTogewogICAgICBMaW5lPGRvdWJsZT4gbGluZShsbi0+YXJyYXkpOwogICAgICByZXR1cm4gSlNfTmV3RmxvYXQ2NChjdHgsIHN0ZDo6YXRhbjIobG4tPngyIC0gbG4tPngxLCBsbi0+eTIgLSBsbi0+eTEpKTsKICAgIH0KICAgIGNhc2UgUFJPUF9MRU5HVEg6IHsKICAgICAgTGluZTxkb3VibGU+IGxpbmUobG4tPmFycmF5KTsKICAgICAgcmV0dXJuIEpTX05ld0Zsb2F0NjQoY3R4LCBsaW5lLmxlbmd0aCgpKTsKICAgIH0KICB9CiAgcmV0dXJuIEpTX1VOREVGSU5FRDsKfQoKc3RhdGljIEpTVmFsdWUKanNfbGluZV9zZXQoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgSlNWYWx1ZUNvbnN0IHZhbCwgaW50IG1hZ2ljKSB7CiAgSlNMaW5lRGF0YTxkb3VibGU+KiBsbjsKICBkb3VibGUgdjsKICBpZighKGxuID0gc3RhdGljX2Nhc3Q8SlNMaW5lRGF0YTxkb3VibGU+Kj4oSlNfR2V0T3BhcXVlMihjdHgsIHRoaXNfdmFsLCBqc19saW5lX2NsYXNzX2lkKSkpKQogICAgcmV0dXJuIEpTX0VYQ0VQVElPTjsKICBzd2l0Y2gobWFnaWMpIHsKICAgIGNhc2UgUFJPUF9QSVZPVDogewogICAgICBKU1BvaW50RGF0YTxkb3VibGU+IHBpdm90OwogICAgICBqc19wb2ludF9yZWFkKGN0eCwgdmFsLCAmcGl2b3QpOwoKICAgICAgbG4tPngxID0gcGl2b3QueDsKICAgICAgbG4tPnkxID0gcGl2b3QueTsKICAgICAgYnJlYWs7CiAgICB9CiAgICBjYXNlIFBST1BfVE86IHsKICAgICAgSlNQb2ludERhdGE8ZG91YmxlPiB0bzsKICAgICAganNfcG9pbnRfcmVhZChjdHgsIHZhbCwgJnRvKTsKCiAgICAgIGxuLT54MiA9IHRvLng7CiAgICAgIGxuLT55MiA9IHRvLnk7CiAgICAgIGJyZWFrOwogICAgfQogIH0KCiAgcmV0dXJuIEpTX1VOREVGSU5FRDsKfQoKc3RhdGljIEpTVmFsdWUKanNfbGluZV9zZXRfeHkxMihKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBKU1ZhbHVlQ29uc3QgdmFsLCBpbnQgbWFnaWMpIHsKICBKU0xpbmVEYXRhPGRvdWJsZT4qIGxuID0gc3RhdGljX2Nhc3Q8SlNMaW5lRGF0YTxkb3VibGU+Kj4oSlNfR2V0T3BhcXVlMihjdHgsIHRoaXNfdmFsLCBqc19saW5lX2NsYXNzX2lkKSk7CiAgZG91YmxlIHY7CiAgaWYoIWxuKQogICAgcmV0dXJuIEpTX0VYQ0VQVElPTjsKICBpZihKU19Ub0Zsb2F0NjQoY3R4LCAmdiwgdmFsKSkKICAgIHJldHVybiBKU19FWENFUFRJT047CiAgaWYobWFnaWMgPT0gMCkKICAgIGxuLT5hcnJheVswXSA9IHY7CiAgZWxzZSBpZihtYWdpYyA9PSAxKQogICAgbG4tPmFycmF5WzFdID0gdjsKICBlbHNlIGlmKG1hZ2ljID09IDIpCiAgICBsbi0+YXJyYXlbMl0gPSB2OwogIGVsc2UgaWYobWFnaWMgPT0gMykKICAgIGxuLT5hcnJheVszXSA9IHY7CgogIHJldHVybiBKU19VTkRFRklORUQ7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX2xpbmVfc2V0X2FiKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIEpTVmFsdWVDb25zdCB2YWwsIGludCBtYWdpYykgewogIEpTTGluZURhdGE8ZG91YmxlPiogbG47CiAgSlNQb2ludERhdGE8ZG91YmxlPiBwdDsKCiAgaWYoIShsbiA9IHN0YXRpY19jYXN0PEpTTGluZURhdGE8ZG91YmxlPio+KEpTX0dldE9wYXF1ZTIoY3R4LCB0aGlzX3ZhbCwganNfbGluZV9jbGFzc19pZCkpKSkKICAgIHJldHVybiBKU19FWENFUFRJT047CgogIGpzX3BvaW50X3JlYWQoY3R4LCB2YWwsICZwdCk7CgogIGlmKG1hZ2ljID09IDApIHsKICAgIGxuLT5hcnJheVswXSA9IHB0Lng7CiAgICBsbi0+YXJyYXlbMV0gPSBwdC55OwoKICB9IGVsc2UgaWYobWFnaWMgPT0gMSkgewogICAgbG4tPmFycmF5WzJdID0gcHQueDsKICAgIGxuLT5hcnJheVszXSA9IHB0Lnk7CiAgfQoKICByZXR1cm4gSlNfVU5ERUZJTkVEOwp9CgpzdGF0aWMgSlNWYWx1ZQpqc19saW5lX3BvaW50cyhKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2KSB7CiAgSlNMaW5lRGF0YTxkb3VibGU+KiBsbjsKCiAgaWYoIShsbiA9IHN0YXRpY19jYXN0PEpTTGluZURhdGE8ZG91YmxlPio+KEpTX0dldE9wYXF1ZTIoY3R4LCB0aGlzX3ZhbCwganNfbGluZV9jbGFzc19pZCkpKSkKICAgIHJldHVybiBKU19FWENFUFRJT047CgogIHJldHVybiBqc19hcnJheV9mcm9tKGN0eCwgbG4tPnBvaW50cyk7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX2xpbmVfaW5zcGVjdChKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2KSB7CiAgSlNMaW5lRGF0YTxkb3VibGU+KiBsbiA9IGpzX2xpbmVfZGF0YShjdHgsIHRoaXNfdmFsKTsKICBKU1ZhbHVlIG9iaiA9IEpTX05ld09iamVjdFByb3RvKGN0eCwgbGluZV9wcm90byk7CgogIEpTX0RlZmluZVByb3BlcnR5VmFsdWVTdHIoY3R4LCBvYmosICJ4MSIsIEpTX05ld0Zsb2F0NjQoY3R4LCBsbi0+eDEpLCBKU19QUk9QX0VOVU1FUkFCTEUpOwogIEpTX0RlZmluZVByb3BlcnR5VmFsdWVTdHIoY3R4LCBvYmosICJ5MSIsIEpTX05ld0Zsb2F0NjQoY3R4LCBsbi0+eTEpLCBKU19QUk9QX0VOVU1FUkFCTEUpOwogIEpTX0RlZmluZVByb3BlcnR5VmFsdWVTdHIoY3R4LCBvYmosICJ4MiIsIEpTX05ld0Zsb2F0NjQoY3R4LCBsbi0+eDIpLCBKU19QUk9QX0VOVU1FUkFCTEUpOwogIEpTX0RlZmluZVByb3BlcnR5VmFsdWVTdHIoY3R4LCBvYmosICJ5MiIsIEpTX05ld0Zsb2F0NjQoY3R4LCBsbi0+eTIpLCBKU19QUk9QX0VOVU1FUkFCTEUpOwogIHJldHVybiBvYmo7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX2xpbmVfbWV0aG9kcyhKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2LCBpbnQgbWFnaWMpIHsKICBKU0xpbmVEYXRhPGRvdWJsZT4qIGxuOwogIEpTVmFsdWUgcmV0ID0gSlNfVU5ERUZJTkVEOwogIGlmKCEobG4gPSBzdGF0aWNfY2FzdDxKU0xpbmVEYXRhPGRvdWJsZT4qPihKU19HZXRPcGFxdWUyKGN0eCwgdGhpc192YWwsIGpzX2xpbmVfY2xhc3NfaWQpKSkpCiAgICByZXR1cm4gSlNfRVhDRVBUSU9OOwoKICBzd2l0Y2gobWFnaWMpIHsKICAgIGNhc2UgTUVUSE9EX1NXQVA6IHsKICAgICAgSlNQb2ludERhdGE8ZG91YmxlPiBhID0gbG4tPnBvaW50c1swXSwgYiA9IGxuLT5wb2ludHNbMV07CiAgICAgIGxuLT5wb2ludHNbMF0gPSBiOwogICAgICBsbi0+cG9pbnRzWzFdID0gYTsKICAgICAgcmV0ID0gSlNfRHVwVmFsdWUoY3R4LCB0aGlzX3ZhbCk7CiAgICAgIGJyZWFrOwogICAgfQogICAgY2FzZSBNRVRIT0RfQVQ6IHsKICAgICAgZG91YmxlIHNpZ21hOwogICAgICBKU1BvaW50RGF0YTxkb3VibGU+IHA7CiAgICAgIGpzX3ZhbHVlX3RvKGN0eCwgYXJndlswXSwgc2lnbWEpOwoKICAgICAgc2lnbWEgPSBmbWluKGZtYXgoc2lnbWEsIDEpLCAwKTsKCiAgICAgIHAueCA9IGxuLT5wb2ludHNbMF0ueCAqICgxLjAgLSBzaWdtYSkgKyBsbi0+cG9pbnRzWzFdLnggKiBzaWdtYTsKICAgICAgcC55ID0gbG4tPnBvaW50c1swXS55ICogKDEuMCAtIHNpZ21hKSArIGxuLT5wb2ludHNbMV0ueSAqIHNpZ21hOwoKICAgICAgcmV0ID0ganNfcG9pbnRfd3JhcChjdHgsIHApOwogICAgICBicmVhazsKICAgIH0KICAgIGNhc2UgTUVUSE9EX0lOVEVSU0VDVDogewogICAgICBzdGQ6OmFycmF5PGRvdWJsZSwgND4gYXJnID0ganNfbGluZV9nZXQ8ZG91YmxlPihjdHgsIGFyZ3ZbMF0pOwogICAgICBKU1BvaW50RGF0YTxkb3VibGU+KiBwb2ludCA9IG51bGxwdHI7CgogICAgICBpZihhcmdjID4gMSkKICAgICAgICBwb2ludCA9IGpzX3BvaW50X2RhdGEoY3R4LCBhcmd2WzFdKTsKCiAgICAgIExpbmU8ZG91YmxlPiBsaW5lID0gTGluZShsbi0+YXJyYXkpOwogICAgICBMaW5lPGRvdWJsZT4gb3RoZXIgPSBMaW5lKGFyZyk7CgogICAgICByZXQgPSBKU19OZXdCb29sKGN0eCwgbGluZS5pbnRlcnNlY3Qob3RoZXIsIHBvaW50KSk7CiAgICAgIGJyZWFrOwogICAgfQogICAgY2FzZSBNRVRIT0RfRU5EUE9JTlRfRElTVEFOQ0VTOiB7CiAgICAgIEpTUG9pbnREYXRhPGRvdWJsZT4gcHQ7CiAgICAgIGpzX3BvaW50X3JlYWQoY3R4LCBhcmd2WzBdLCAmcHQpOwogICAgICBMaW5lPGRvdWJsZT4gbGluZSA9IExpbmUobG4tPmFycmF5KTsKICAgICAgYXV0byBkaXN0YW5jZXMgPSBsaW5lLmVuZHBvaW50X2Rpc3RhbmNlcyhwdCk7CiAgICAgIHJldCA9IEpTX05ld0FycmF5KGN0eCk7CiAgICAgIEpTX1NldFByb3BlcnR5VWludDMyKGN0eCwgcmV0LCAwLCBqc19udW1iZXJfbmV3KGN0eCwgZGlzdGFuY2VzLmZpcnN0KSk7CiAgICAgIEpTX1NldFByb3BlcnR5VWludDMyKGN0eCwgcmV0LCAxLCBqc19udW1iZXJfbmV3KGN0eCwgZGlzdGFuY2VzLnNlY29uZCkpOwogICAgICBicmVhazsKICAgIH0KICAgIGNhc2UgTUVUSE9EX0RJU1RBTkNFOiB7CiAgICAgIGN2OjpQb2ludDJkIHB0OwogICAgICBqc19wb2ludF9yZWFkKGN0eCwgYXJndlswXSwgJnB0KTsKICAgICAgTGluZTxkb3VibGU+IGxpbmUgPSBMaW5lKGxuLT5hcnJheSk7CiAgICAgIHJldCA9IGpzX251bWJlcl9uZXcoY3R4LCBsaW5lLmRpc3RhbmNlKHB0KSk7CiAgICAgIGJyZWFrOwogICAgfQogIH0KICByZXR1cm4gcmV0Owp9CgpzdGF0aWMgSlNWYWx1ZQpqc19saW5lX3RvYXJyYXkoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCBsaW5lLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmcpIHsKICBKU0xpbmVEYXRhPGRvdWJsZT4qIGxuOwoKICBpZighKGxuID0gc3RhdGljX2Nhc3Q8SlNMaW5lRGF0YTxkb3VibGU+Kj4oSlNfR2V0T3BhcXVlMihjdHgsIGxpbmUsIGpzX2xpbmVfY2xhc3NfaWQpKSkpCiAgICByZXR1cm4gSlNfRVhDRVBUSU9OOwoKICByZXR1cm4ganNfdHlwZWRhcnJheV9mcm9tKGN0eCwgbG4tPmFycmF5KTsKfQoKc3RhdGljIEpTVmFsdWUKanNfY2FsbF9tZXRob2QoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWUgb2JqLCBjb25zdCBjaGFyKiBuYW1lLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2KSB7CiAgSlNWYWx1ZSBmbiwgcmV0ID0gSlNfVU5ERUZJTkVEOwoKICBmbiA9IEpTX0dldFByb3BlcnR5U3RyKGN0eCwgb2JqLCBuYW1lKTsKICBpZighSlNfSXNVbmRlZmluZWQoZm4pKQogICAgcmV0ID0gSlNfQ2FsbChjdHgsIGZuLCBvYmosIGFyZ2MsIGFyZ3YpOwogIHJldHVybiByZXQ7Cn0KCiNkZWZpbmUgSlNfTElORV9BU19QT0lOVFMgMHgwMQojZGVmaW5lIEpTX0xJTkVfQVNfVkVDVE9SIDB4MDIKCiNkZWZpbmUgSlNfTElORV9HRVRfSVRFUkFUT1IgMHg4MAojZGVmaW5lIEpTX0xJTkVfVE9fU1RSSU5HIDB4NDAKCnN0YXRpYyBKU1ZhbHVlCmpzX2xpbmVfaXRlcmF0b3IoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCogYXJndiwgaW50IG1hZ2ljKSB7CiAgSlNMaW5lRGF0YTxkb3VibGU+KiBsbiA9IHN0YXRpY19jYXN0PEpTTGluZURhdGE8ZG91YmxlPio+KEpTX0dldE9wYXF1ZTIoY3R4LCB0aGlzX3ZhbCwganNfbGluZV9jbGFzc19pZCkpOwogIEpTVmFsdWUgbWV0aG9kLCByZXQgPSBKU19VTkRFRklORUQ7CgogIGlmKG1hZ2ljICYgSlNfTElORV9BU19QT0lOVFMpCiAgICByZXQgPSBqc19saW5lX3BvaW50cyhjdHgsIHRoaXNfdmFsLCBhcmdjLCBhcmd2KTsKICBpZihtYWdpYyAmIEpTX0xJTkVfQVNfVkVDVE9SKQogICAgcmV0ID0ganNfbGluZV90b2FycmF5KGN0eCwgdGhpc192YWwsIGFyZ2MsIGFyZ3YpOwoKICBpZihtYWdpYyAmIEpTX0xJTkVfR0VUX0lURVJBVE9SKQogICAgcmV0ID0ganNfY2FsbF9tZXRob2QoY3R4LCByZXQsICJ2YWx1ZXMiLCAwLCBOVUxMKTsKCiAgaWYobWFnaWMgJiBKU19MSU5FX1RPX1NUUklORykgewogICAgSlNWYWx1ZUNvbnN0IGFyZ3NbMV0gPSB7MH07CiAgICBhcmdzWzBdID0gSlNfTmV3U3RyaW5nKGN0eCwgIiAiKTsKCiAgICByZXQgPSBqc19jYWxsX21ldGhvZChjdHgsIHJldCwgImpvaW4iLCAxLCBhcmdzKTsKICB9CgogIHJldHVybiByZXQ7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX2xpbmVfZnJvbShKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2KSB7CiAgSlNMaW5lRGF0YTxkb3VibGU+IGxpbmUgPSB7MCwgMCwgMCwgMH07CiAgSlNWYWx1ZSByZXQgPSBKU19FWENFUFRJT047CgogIGlmKEpTX0lzU3RyaW5nKGFyZ3ZbMF0pKSB7CiAgICBjb25zdCBjaGFyKiBzdHIgPSBKU19Ub0NTdHJpbmcoY3R4LCBhcmd2WzBdKTsKICAgIGNoYXIqIGVuZHB0ciA9IG51bGxwdHI7CiAgICBmb3Ioc2l6ZV90IGkgPSAwOyBpIDwgNDsgaSsrKSB7CiAgICAgIHdoaWxlKCFpc2RpZ2l0KCpzdHIpICYmICpzdHIgIT0gJy0nICYmICpzdHIgIT0gJysnICYmICEoKnN0ciA9PSAnLicgJiYgaXNkaWdpdChzdHJbMV0pKSkgc3RyKys7CiAgICAgIGlmKCpzdHIgPT0gJ1wwJykKICAgICAgICBicmVhazsKICAgICAgbGluZS5hcnJheVtpXSA9IHN0cnRvZChzdHIsICZlbmRwdHIpOwogICAgICBzdHIgPSBlbmRwdHI7CiAgICB9CiAgfSBlbHNlIHsKICAgIGpzX2xpbmVfcmVhZChjdHgsIGFyZ3ZbMF0sICZsaW5lKTsKICB9CiAgaWYobGluZS5hcnJheVsyXSA+IDAgJiYgbGluZS5hcnJheVszXSA+IDApCiAgICByZXQgPSBqc19saW5lX25ldyhjdHgsIGxpbmUuYXJyYXlbMF0sIGxpbmUuYXJyYXlbMV0sIGxpbmUuYXJyYXlbMl0sIGxpbmUuYXJyYXlbM10pOwogIHJldHVybiByZXQ7Cn0KCnZvaWQKanNfbGluZV9maW5hbGl6ZXIoSlNSdW50aW1lKiBydCwgSlNWYWx1ZSB2YWwpIHsKICBKU0xpbmVEYXRhPGRvdWJsZT4qIGxuOwoKICBpZigobG4gPSBzdGF0aWNfY2FzdDxKU0xpbmVEYXRhPGRvdWJsZT4qPihKU19HZXRPcGFxdWUodmFsLCBqc19saW5lX2NsYXNzX2lkKSkpKQogICAgLyogTm90ZTogJ2xuJyBjYW4gYmUgTlVMTCBpbiBjYXNlIEpTX1NldE9wYXF1ZSgpIHdhcyBub3QgY2FsbGVkICovCiAgICBqc19kZWFsbG9jYXRlKHJ0LCBsbik7Cn0KCkpTQ2xhc3NEZWYganNfbGluZV9jbGFzcyA9IHsKICAgIC5jbGFzc19uYW1lID0gIkxpbmUiLAogICAgLmZpbmFsaXplciA9IGpzX2xpbmVfZmluYWxpemVyLAp9OwoKY29uc3QgSlNDRnVuY3Rpb25MaXN0RW50cnkganNfbGluZV9wcm90b19mdW5jc1tdID0gewogICAgSlNfQ0dFVFNFVF9FTlVNRVJBQkxFX0RFRigieDEiLCBqc19saW5lX2dldF94eTEyLCBqc19saW5lX3NldF94eTEyLCAwKSwKICAgIEpTX0NHRVRTRVRfRU5VTUVSQUJMRV9ERUYoInkxIiwganNfbGluZV9nZXRfeHkxMiwganNfbGluZV9zZXRfeHkxMiwgMSksCiAgICBKU19DR0VUU0VUX0VOVU1FUkFCTEVfREVGKCJ4MiIsIGpzX2xpbmVfZ2V0X3h5MTIsIGpzX2xpbmVfc2V0X3h5MTIsIDIpLAogICAgSlNfQ0dFVFNFVF9FTlVNRVJBQkxFX0RFRigieTIiLCBqc19saW5lX2dldF94eTEyLCBqc19saW5lX3NldF94eTEyLCAzKSwKICAgIEpTX0NHRVRTRVRfTUFHSUNfREVGKCJhIiwganNfbGluZV9nZXRfYWIsIGpzX2xpbmVfc2V0X2FiLCAwKSwKICAgIEpTX0NHRVRTRVRfTUFHSUNfREVGKCJiIiwganNfbGluZV9nZXRfYWIsIGpzX2xpbmVfc2V0X2FiLCAxKSwKICAgIEpTX0NHRVRTRVRfTUFHSUNfREVGKCIwIiwganNfbGluZV9nZXRfYWIsIGpzX2xpbmVfc2V0X2FiLCAwKSwKICAgIEpTX0NHRVRTRVRfTUFHSUNfREVGKCIxIiwganNfbGluZV9nZXRfYWIsIGpzX2xpbmVfc2V0X2FiLCAxKSwKICAgIEpTX0NHRVRTRVRfTUFHSUNfREVGKCJzbG9wZSIsIGpzX2xpbmVfZ2V0LCAwLCBQUk9QX1NMT1BFKSwKICAgIEpTX0NHRVRTRVRfTUFHSUNfREVGKCJhbmdsZSIsIGpzX2xpbmVfZ2V0LCAwLCBQUk9QX0FOR0xFKSwKICAgIEpTX0NHRVRTRVRfTUFHSUNfREVGKCJsZW5ndGgiLCBqc19saW5lX2dldCwgMCwgUFJPUF9MRU5HVEgpLAogICAgSlNfQ0dFVFNFVF9NQUdJQ19ERUYoInBpdm90IiwganNfbGluZV9nZXQsIGpzX2xpbmVfc2V0LCBQUk9QX1BJVk9UKSwKICAgIEpTX0NHRVRTRVRfTUFHSUNfREVGKCJ0byIsIGpzX2xpbmVfZ2V0LCBqc19saW5lX3NldCwgUFJPUF9UTyksCiAgICBKU19DRlVOQ19NQUdJQ19ERUYoInN3YXAiLCAwLCBqc19saW5lX21ldGhvZHMsIE1FVEhPRF9TV0FQKSwKICAgIEpTX0NGVU5DX01BR0lDX0RFRigiYXQiLCAxLCBqc19saW5lX21ldGhvZHMsIE1FVEhPRF9BVCksCiAgICBKU19DRlVOQ19NQUdJQ19ERUYoImludGVyc2VjdCIsIDEsIGpzX2xpbmVfbWV0aG9kcywgTUVUSE9EX0lOVEVSU0VDVCksCiAgICBKU19DRlVOQ19NQUdJQ19ERUYoImVuZHBvaW50RGlzdGFuY2VzIiwgMSwganNfbGluZV9tZXRob2RzLCBNRVRIT0RfRU5EUE9JTlRfRElTVEFOQ0VTKSwKICAgIEpTX0NGVU5DX01BR0lDX0RFRigiZGlzdGFuY2UiLCAxLCBqc19saW5lX21ldGhvZHMsIE1FVEhPRF9ESVNUQU5DRSksCiAgICBKU19DRlVOQ19ERUYoInRvQXJyYXkiLCAwLCBqc19saW5lX3RvYXJyYXkpLAogICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJ0b1BvaW50cyIsIDAsIGpzX2xpbmVfaXRlcmF0b3IsIEpTX0xJTkVfQVNfUE9JTlRTKSwKICAgIEpTX0NGVU5DX01BR0lDX0RFRigidG9TdHJpbmciLCAwLCBqc19saW5lX2l0ZXJhdG9yLCBKU19MSU5FX0FTX1BPSU5UUyB8IEpTX0xJTkVfVE9fU1RSSU5HKSwKICAgIEpTX0NGVU5DX01BR0lDX0RFRigidmFsdWVzIiwgMCwganNfbGluZV9pdGVyYXRvciwgSlNfTElORV9BU19WRUNUT1IgfCBKU19MSU5FX0dFVF9JVEVSQVRPUiksCiAgICBKU19BTElBU19ERUYoInN0YXJ0IiwgInBpdm90IiksCiAgICBKU19BTElBU19ERUYoImVuZCIsICJ0byIpLAogICAgSlNfQUxJQVNfREVGKCJbU3ltYm9sLml0ZXJhdG9yXSIsICJ2YWx1ZXMiKSwKICAgIEpTX1BST1BfU1RSSU5HX0RFRigiW1N5bWJvbC50b1N0cmluZ1RhZ10iLCAiTGluZSIsIEpTX1BST1BfQ09ORklHVVJBQkxFKSwKfTsKCmNvbnN0IEpTQ0Z1bmN0aW9uTGlzdEVudHJ5IGpzX2xpbmVfc3RhdGljX2Z1bmNzW10gPSB7SlNfQ0ZVTkNfREVGKCJmcm9tIiwgMSwganNfbGluZV9mcm9tKX07CgppbnQKanNfbGluZV9pbml0KEpTQ29udGV4dCogY3R4LCBKU01vZHVsZURlZiogbSkgewoKICBpZihqc19saW5lX2NsYXNzX2lkID09IDApIHsKICAgIC8qIGNyZWF0ZSB0aGUgTGluZSBjbGFzcyAqLwogICAgSlNfTmV3Q2xhc3NJRCgmanNfbGluZV9jbGFzc19pZCk7CiAgICBKU19OZXdDbGFzcyhKU19HZXRSdW50aW1lKGN0eCksIGpzX2xpbmVfY2xhc3NfaWQsICZqc19saW5lX2NsYXNzKTsKCiAgICBsaW5lX3Byb3RvID0gSlNfTmV3T2JqZWN0KGN0eCk7CiAgICBKU19TZXRQcm9wZXJ0eUZ1bmN0aW9uTGlzdChjdHgsIGxpbmVfcHJvdG8sIGpzX2xpbmVfcHJvdG9fZnVuY3MsIGNvdW50b2YoanNfbGluZV9wcm90b19mdW5jcykpOwogICAgSlNfU2V0Q2xhc3NQcm90byhjdHgsIGpzX2xpbmVfY2xhc3NfaWQsIGxpbmVfcHJvdG8pOwoKICAgIGxpbmVfY2xhc3MgPSBKU19OZXdDRnVuY3Rpb24yKGN0eCwganNfbGluZV9jdG9yLCAiTGluZSIsIDIsIEpTX0NGVU5DX2NvbnN0cnVjdG9yLCAwKTsKICAgIC8qIHNldCBwcm90by5jb25zdHJ1Y3RvciBhbmQgY3Rvci5wcm90b3R5cGUgKi8KICAgIEpTX1NldENvbnN0cnVjdG9yKGN0eCwgbGluZV9jbGFzcywgbGluZV9wcm90byk7CiAgICBKU19TZXRQcm9wZXJ0eUZ1bmN0aW9uTGlzdChjdHgsIGxpbmVfY2xhc3MsIGpzX2xpbmVfc3RhdGljX2Z1bmNzLCBjb3VudG9mKGpzX2xpbmVfc3RhdGljX2Z1bmNzKSk7CgogICAganNfc2V0X2luc3BlY3RfbWV0aG9kKGN0eCwgbGluZV9wcm90bywganNfbGluZV9pbnNwZWN0KTsKICB9CgogIGlmKG0pCiAgICBKU19TZXRNb2R1bGVFeHBvcnQoY3R4LCBtLCAiTGluZSIsIGxpbmVfY2xhc3MpOwoKICByZXR1cm4gMDsKfQoKZXh0ZXJuICJDIiBWSVNJQkxFIHZvaWQKanNfbGluZV9leHBvcnQoSlNDb250ZXh0KiBjdHgsIEpTTW9kdWxlRGVmKiBtKSB7CiAgSlNfQWRkTW9kdWxlRXhwb3J0KGN0eCwgbSwgIkxpbmUiKTsKfQoKdm9pZApqc19saW5lX2NvbnN0cnVjdG9yKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlIHBhcmVudCwgY29uc3QgY2hhciogbmFtZSkgewogIGlmKEpTX0lzVW5kZWZpbmVkKGxpbmVfY2xhc3MpKQogICAganNfbGluZV9pbml0KGN0eCwgMCk7CgogIEpTX1NldFByb3BlcnR5U3RyKGN0eCwgcGFyZW50LCBuYW1lID8gbmFtZSA6ICJMaW5lIiwgbGluZV9jbGFzcyk7Cn0KCiNpZmRlZiBKU19MSU5FX01PRFVMRQojZGVmaW5lIEpTX0lOSVRfTU9EVUxFIC8qVklTSUJMRSovIGpzX2luaXRfbW9kdWxlCiNlbHNlCiNkZWZpbmUgSlNfSU5JVF9NT0RVTEUgLypWSVNJQkxFKi8ganNfaW5pdF9tb2R1bGVfbGluZQojZW5kaWYKCkpTTW9kdWxlRGVmKgpKU19JTklUX01PRFVMRShKU0NvbnRleHQqIGN0eCwgY29uc3QgY2hhciogbW9kdWxlX25hbWUpIHsKICBKU01vZHVsZURlZiogbTsKICBtID0gSlNfTmV3Q01vZHVsZShjdHgsIG1vZHVsZV9uYW1lLCAmanNfbGluZV9pbml0KTsKICBpZighbSkKICAgIHJldHVybiBOVUxMOwogIGpzX2xpbmVfZXhwb3J0KGN0eCwgbSk7CiAgcmV0dXJuIG07Cn0KfQAAAAAAAAAAQDgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAjiYAAAAAAACOJgAAAAAAAAAAAAAAAPC/"
				]
			]
		},
		{
			"contents": "#include \"jsbindings.hpp\"\n#include \"js_cv.hpp\"\n#include \"js_mat.hpp\"\n#include \"js_size.hpp\"\n#include \"js_point.hpp\"\n#include \"js_rect.hpp\"\n#include \"js_array.hpp\"\n#include \"js_typed_array.hpp\"\n#include \"js_alloc.hpp\"\n#include \"js_umat.hpp\"\n#include \"geometry.hpp\"\n#include \"util.hpp\"\n#include \"../quickjs/cutils.h\"\n#include <list>\n#include <map>\n#include <fstream>\n\nenum {\n  PROP_COLS = 0,\n  PROP_ROWS,\n  PROP_CHANNELS,\n  PROP_TYPE,\n  PROP_DEPTH,\n  PROP_EMPTY,\n  PROP_TOTAL,\n  PROP_SIZE,\n  PROP_CONTINUOUS,\n  PROP_SUBMATRIX,\n  PROP_STEP,\n  PROP_ELEMSIZE,\n  PROP_ELEMSIZE1\n};\nenum {\n  METHOD_COL = 0,\n  METHOD_ROW,\n  METHOD_COL_RANGE,\n  METHOD_ROW_RANGE,\n  METHOD_CLONE,\n  METHOD_ROI,\n  METHOD_RELEASE,\n  METHOD_DUP,\n  METHOD_CLEAR,\n  METHOD_RESET,\n  METHOD_RESIZE,\n  METHOD_STEP1,\n  METHOD_LOCATE_ROI,\n  METHOD_PTR\n};\nenum { MAT_EXPR_AND = 0, MAT_EXPR_OR, MAT_EXPR_XOR, MAT_EXPR_MUL };\nenum { MAT_ITERATOR_KEYS, MAT_ITERATOR_VALUES, MAT_ITERATOR_ENTRIES };\nextern \"C\" {\nJSValue mat_proto = JS_UNDEFINED, mat_class = JS_UNDEFINED, mat_iterator_proto = JS_UNDEFINED,\n        mat_iterator_class = JS_UNDEFINED;\nJSClassID js_mat_class_id = 0, js_mat_iterator_class_id = 0;\n\nJSValue umat_proto = JS_UNDEFINED, umat_class = JS_UNDEFINED;\nJSClassID js_umat_class_id = 0;\n\ntypedef struct JSMatIteratorData {\n  JSValue obj, buf;\n  uint32_t row, col;\n  int magic;\n  TypedArrayType type;\n} JSMatIteratorData;\n\nstatic void\njs_mat_free_func(JSRuntime* rt, void* opaque, void* ptr) {\n  static_cast<JSMatData*>(opaque)->release();\n}\n}\n\nstatic std::vector<JSMatData*> mat_list;\nstatic std::list<JSMatData*> mat_freed;\n\nstatic inline std::vector<int>\njs_mat_sizes(const JSMatData& mat) {\n  const cv::MatSize size(mat.size);\n  std::vector<int> sizes;\n  if(mat.dims == 2) {\n    sizes.push_back(mat.rows);\n    sizes.push_back(mat.cols);\n  } else {\n    std::copy(&size[0], &size[size.dims()], std::back_inserter(sizes));\n  }\n  return sizes;\n}\n\nstatic inline std::vector<std::string>\njs_mat_dimensions(const JSMatData& mat) {\n  std::vector<int> sizes = js_mat_sizes(mat);\n  std::vector<std::string> dimensions;\n\n  std::transform(sizes.cbegin(),\n                 sizes.cend(),\n                 std::back_inserter(dimensions),\n                 static_cast<std::string (*)(int)>(&std::to_string));\n  return dimensions;\n}\n\nstatic inline JSMatData*\njs_mat_track(JSContext* ctx, JSMatData* s) {\n  std::vector<cv::Mat*> deallocate;\n\n  for(;;) {\n    auto it2 = std::find(mat_freed.cbegin(), mat_freed.cend(), s);\n    if(it2 != mat_freed.cend()) {\n      deallocate.push_back(s);\n\n      // std::cerr << \"allocated @\" << static_cast<void*>(s) << \" which is in free list\" <<\n      // std::endl;\n\n      // mat_freed.erase(it2);\n      s = js_allocate<cv::Mat>(ctx);\n      memcpy(s, deallocate[deallocate.size() - 1], sizeof(JSMatData));\n\n    } else {\n      break;\n    }\n  }\n\n  mat_list.push_back(s);\n\n  for(const auto& ptr : deallocate) js_deallocate(ctx, ptr);\n  return s;\n}\n\nVISIBLE JSValue\njs_mat_new(JSContext* ctx, uint32_t rows, uint32_t cols, int type) {\n  JSValue ret;\n  JSMatData* s;\n  if(JS_IsUndefined(mat_proto))\n    js_mat_init(ctx, NULL);\n  ret = JS_NewObjectProtoClass(ctx, mat_proto, js_mat_class_id);\n  s = js_mat_track(ctx, js_allocate<cv::Mat>(ctx));\n  if(cols || rows || type) {\n    new(s) cv::Mat(rows, cols, type);\n  } else {\n    new(s) cv::Mat();\n  }\n#ifdef DEBUG_MAT\n  std::cerr << ((cols > 0 || rows > 0) ? \"js_mat_new (h,w)\" : \"js_mat_new      \");\n  js_mat_dump(s);\n  std::cerr << std::endl;\n#endif\n  JS_SetOpaque(ret, s);\n  return ret;\n}\n\nVISIBLE JSValue\njs_mat_wrap(JSContext* ctx, const cv::Mat& mat) {\n  JSValue ret;\n  JSMatData* s;\n  ret = JS_NewObjectProtoClass(ctx, mat_proto, js_mat_class_id);\n\n  s = js_mat_track(ctx, js_allocate<cv::Mat>(ctx));\n  new(s) cv::Mat();\n  *s = mat;\n#ifdef DEBUG_MAT\n  std::cerr << \"js_mat_wrap     \";\n  auto posList = std::find(mat_list.cbegin(), mat_list.cend(), const_cast<JSMatData*>(&mat));\n  bool inList;\n  if((inList = posList != mat_list.cend())) {\n    std::cerr << \"arg[\" << (posList - mat_list.cbegin()) << \"]=\" << static_cast<const void*>(&mat);\n    std::cerr << \", inList(arg)=\" << (inList ? \"true\" : \"false\");\n  } else {\n    std::cerr << \"arg=\" << static_cast<const void*>(&mat);\n  }\n  js_mat_dump(s);\n  std::cerr << std::endl;\n#endif\n\n  JS_SetOpaque(ret, s);\n  return ret;\n}\n\n#ifdef DEBUG_MAT\nstatic inline std::map<void*, std::vector<JSMatData*>>\njs_mat_data(void* data = nullptr) {\n  std::map<void*, std::vector<JSMatData*>> ret;\n  for(auto mat : mat_list) {\n    const auto u = mat->u;\n    if(u != nullptr && (data == nullptr || u == data)) {\n      void* data = u;\n      if(ret.find(data) == ret.end()) {\n        std::vector<JSMatData*> v{mat};\n        ret.insert({data, v});\n      } else {\n        ret[data].push_back(mat);\n      }\n    }\n  }\n  return ret;\n}\n\nstatic inline void\njs_mat_print_data(const std::map<void*, std::vector<JSMatData*>>& data, size_t minSize = 1) {\n\n  for(const auto& [key, value] : data) {\n\n    if(value.size() >= minSize) {\n      std::cerr << \"data @\" << key << \" =\";\n\n      for(const auto& ptr : value) {\n        size_t refcount = ptr->u ? ptr->u->refcount : 0;\n        std::cerr << \" mat @\" << static_cast<void*>(ptr);\n        if(refcount > 1)\n          std::cerr << \" (refcount=\" << refcount << \")\";\n      }\n      std::cerr << std::endl;\n    }\n  }\n}\n\nstatic inline void\njs_mat_dump(JSMatData* const s) {\n  auto posList = std::find(mat_list.cbegin(), mat_list.cend(), s);\n  bool inList = posList != mat_list.cend();\n  bool inFreed = std::find(mat_freed.cbegin(), mat_freed.cend(), s) != mat_freed.cend();\n  const auto u = s->u;\n  std::cerr << \" mat\"\n            << \"[\" << (posList - mat_list.cbegin()) << \"]=\" << static_cast<void*>(s);\n\n  if(inList)\n    std::cerr << \", inList=\" << (inList ? \"true\" : \"false\");\n  if(inFreed)\n    std::cerr << \", inFreed=\" << (inFreed ? \"true\" : \"false\");\n\n  if(s->rows || s->cols || s->channels() > 1 || s->depth() > 0) {\n    std::cerr << \", rows=\" << s->rows;\n    std::cerr << \", cols=\" << s->cols;\n    std::cerr << \", channels=\" << s->channels();\n    std::cerr << \", depth=\" << s->depth();\n  }\n\n  if(u != nullptr) {\n\n    // if(u->refcount)\n    std::cerr << \", refcount=\" << u->refcount;\n    if(u->data)\n      std::cerr << \", data=\" << static_cast<void*>(u->data);\n    if(u->size)\n      std::cerr << \", size=\" << u->size;\n  }\n}\n#endif\n\nstatic std::pair<JSSizeData<uint32_t>, int>\njs_mat_params(JSContext* ctx, int argc, JSValueConst* argv) {\n  JSSizeData<uint32_t> size;\n  int32_t type = 0;\n  if(argc > 0) {\n    if(js_size_read(ctx, argv[0], &size)) {\n      argv++;\n      argc--;\n    } else {\n      JS_ToUint32(ctx, &size.height, argv[0]);\n      JS_ToUint32(ctx, &size.width, argv[1]);\n      argv += 2;\n      argc -= 2;\n    }\n    if(argc > 0) {\n      if(!JS_ToInt32(ctx, &type, argv[0])) {\n        argv++;\n        argc--;\n      }\n    }\n  }\n  return std::make_pair(size, type);\n}\n\nstatic JSValue\njs_mat_ctor(JSContext* ctx, JSValueConst new_target, int argc, JSValueConst* argv) {\n\n  const auto& [size, type] = js_mat_params(ctx, argc, argv);\n\n  return js_mat_new(ctx, size.height, size.width, type);\n}\n\nstatic JSValue\njs_mat_funcs(JSContext* ctx, JSValueConst this_val, int argc, JSValueConst* argv, int magic) {\n  JSValue ret = JS_UNDEFINED;\n  int64_t i = -1, i2 = -1;\n  JSPointData<double> pt;\n  JSMatData* m = js_mat_data(ctx, this_val);\n\n  if(argc > 0) {\n    JS_ToInt64(ctx, &i, argv[0]);\n    pt = js_point_get(ctx, argv[0]);\n    if(argc > 1) {\n      JS_ToInt64(ctx, &i2, argv[1]);\n    }\n  }\n\n  switch(magic) {\n    case METHOD_COL: {\n      ret = js_mat_wrap(ctx, m->col(i));\n      break;\n    }\n    case METHOD_ROW: {\n      ret = js_mat_wrap(ctx, m->row(i));\n      break;\n    }\n    case METHOD_COL_RANGE: {\n      ret = js_mat_wrap(ctx, m->colRange(i, i2));\n      break;\n    }\n    case METHOD_ROW_RANGE: {\n      ret = js_mat_wrap(ctx, m->rowRange(i, i2));\n      break;\n    }\n    case METHOD_CLONE: {\n      ret = js_mat_wrap(ctx, m->clone());\n      break;\n    }\n    case METHOD_ROI: {\n      JSRectData<double> rect = {0, 0, 0, 0};\n\n      if(argc > 0)\n        rect = js_rect_get(ctx, argv[0]);\n\n      ret = js_mat_wrap(ctx, (*m)(rect));\n      break;\n    }\n    case METHOD_RELEASE: {\n      m->release();\n      break;\n    }\n    case METHOD_DUP: {\n      ret = js_mat_wrap(ctx, *m);\n      break;\n    }\n    case METHOD_CLEAR: {\n      *m = cv::Mat::zeros(m->rows, m->cols, m->type());\n      break;\n    }\n    case METHOD_RESET: {\n      *m = cv::Mat();\n      break;\n    }\n    case METHOD_RESIZE: {\n      uint32_t rows = 0;\n      cv::Scalar color{0, 0, 0, 0};\n\n      JS_ToUint32(ctx, &rows, argv[0]);\n      if(argc > 1) {\n        js_color_read(ctx, argv[1], &color);\n        m->resize(rows, color);\n      } else {\n        m->resize(rows);\n      }\n      break;\n    }\n    case METHOD_STEP1: {\n      int32_t i = 0;\n\n      JS_ToInt32(ctx, &i, argv[0]);\n      ret = JS_NewInt64(ctx, m->step1(i));\n      break;\n    }\n    case METHOD_LOCATE_ROI: {\n      cv::Size wholeSize;\n      cv::Point ofs;\n      m->locateROI(wholeSize, ofs);\n      js_size_write(ctx, argv[0], wholeSize);\n      js_point_write(ctx, argv[0], ofs);\n      break;\n    }\n    case METHOD_PTR: {\n      uint32_t row = 0, col = 0;\n      uchar* ptr;\n      std::ostringstream os;\n      if(argc > 0)\n        JS_ToUint32(ctx, &row, argv[0]);\n      if(argc > 1)\n        JS_ToUint32(ctx, &col, argv[1]);\n      ptr = m->ptr<uchar>(row, col);\n\n      os << static_cast<void*>(ptr);\n\n      ret = js_value_from(ctx, os.str());\n      break;\n    }\n  }\n\n  return ret;\n}\n\nstatic JSValue\njs_mat_expr(JSContext* ctx, JSValueConst this_val, int argc, JSValueConst* argv, int magic) {\n  JSValue ret = JS_UNDEFINED;\n  JSColorData<double> color;\n  double value = 0;\n  JSMatData *input = nullptr, *output = nullptr, *other = nullptr;\n  double scale = 1.0;\n\n  if((input = js_mat_data(ctx, this_val)) == nullptr)\n    return JS_EXCEPTION;\n\n  if(argc < 1)\n    return JS_EXCEPTION;\n\n  if(JS_IsNumber(argv[0])) {\n    JS_ToFloat64(ctx, &value, argv[0]);\n\n  } else if((other = js_mat_data_nothrow(argv[0])) == nullptr)\n    js_color_read(ctx, argv[0], &color);\n\n  if(magic == 3 && argc > 1) {\n    JS_ToFloat64(ctx, &scale, argv[1]);\n    argv++;\n    argc--;\n  }\n\n  if(argc > 1)\n    output = js_mat_data(ctx, argv[1]);\n\n  if(output == nullptr)\n    output = input;\n\n  {\n    cv::MatExpr expr;\n    cv::Mat tmp(input->rows, input->cols, input->type());\n\n    if(other == nullptr) {\n      cv::Mat& mat = *input;\n\n      if(mat.channels() == 1) {\n\n        if(mat.depth() == 0) {\n          switch(magic) {\n            case MAT_EXPR_AND: mat &= (uchar)value; break;\n            case MAT_EXPR_OR: cv::bitwise_or(mat, cv::Scalar(value, value, value, value), mat); break;\n            case MAT_EXPR_XOR: mat ^= (uchar)value; break;\n            case MAT_EXPR_MUL: mat = mat * value; break;\n          }\n        } else {\n          switch(magic) {\n            case MAT_EXPR_AND: mat &= value; break;\n            case MAT_EXPR_OR: cv::bitwise_or(mat, cv::Scalar(value, value, value, value), mat); break;\n            case MAT_EXPR_XOR: mat ^= value; break;\n            case MAT_EXPR_MUL: mat *= value; break;\n          }\n        }\n      } else {\n        cv::Scalar& scalar = *reinterpret_cast<cv::Scalar*>(&color);\n\n        // std::cerr << \"js_mat_expr input=\" << (void*)input << \" output=\" << (void*)output << \" scalar=\" <<\n        // scalar << std::endl;\n\n        switch(magic) {\n          case MAT_EXPR_AND: expr = mat & scalar; break;\n          case MAT_EXPR_OR: expr = mat | scalar; break;\n          case MAT_EXPR_XOR: expr = mat ^ scalar; break;\n          case MAT_EXPR_MUL: expr = mat.mul(scalar, scale); break;\n        }\n        tmp = static_cast<cv::Mat>(expr);\n      }\n\n    } else {\n\n      if(input->rows != other->rows || input->cols != other->cols) {\n        ret = JS_ThrowInternalError(ctx, \"Mat dimensions mismatch\");\n      } else if(input->type() != other->type()) {\n        ret = JS_ThrowInternalError(ctx, \"Mat type mismatch\");\n      } else if(input->channels() != other->channels()) {\n        ret = JS_ThrowInternalError(ctx, \"Mat channels mismatch\");\n      } else {\n\n        if(input == output) {\n          switch(magic) {\n            case MAT_EXPR_AND: (*input) &= (*other); break;\n            case MAT_EXPR_OR: (*input) |= (*other); break;\n            case MAT_EXPR_XOR: (*input) ^= (*other); break;\n            case MAT_EXPR_MUL: (*input) *= (*other); break;\n          }\n        } else {\n          switch(magic) {\n            case MAT_EXPR_AND: (*output) = (*input) & (*other); break;\n            case MAT_EXPR_OR: (*output) = (*input) | (*other); break;\n            case MAT_EXPR_XOR: (*output) = (*input) ^ (*other); break;\n            case MAT_EXPR_MUL: (*output) = (*input) * (*other); break;\n          }\n        }\n      }\n    }\n  }\n\n  return ret;\n}\n\nstatic JSValue\njs_mat_init(JSContext* ctx, JSValueConst this_val, int argc, JSValueConst* argv, int magic) {\n  JSValue ret = JS_UNDEFINED;\n  JSMatData* m;\n\n  auto [size, type] = js_mat_params(ctx, argc, argv);\n\n  if((m = js_mat_data(ctx, this_val))) {\n    if(size.width == 0 || size.height == 0) {\n      if(m->rows && m->cols) {\n        size.width = m->cols;\n        size.height = m->rows;\n        type = m->type();\n      }\n    }\n    ret = JS_DupValue(ctx, this_val);\n  } else if(size.width > 0 && size.height > 0) {\n    ret = js_mat_new(ctx, size.height, size.width, type);\n\n    m = js_mat_data(ctx, ret);\n  } else {\n    return JS_EXCEPTION;\n  }\n\n  cv::Mat& mat = *m;\n\n  switch(magic) {\n    case 0: {\n      mat = cv::Mat::zeros(size, type);\n      break;\n    }\n    case 1: {\n      mat = cv::Mat::ones(size, type);\n      break;\n    }\n  }\n\n  return ret;\n}\n\ntemplate<class T>\nvoid\njs_mat_get(JSContext* ctx, JSValueConst this_val, uint32_t row, uint32_t col, T& value) {\n  cv::Mat* m = js_mat_data(ctx, this_val);\n\n  if(m)\n    value = (*m).at<T>(row, col);\n  else\n    value = T();\n}\n\nstatic JSValue\njs_mat_get(JSContext* ctx, JSValueConst this_val, uint32_t row, uint32_t col) {\n  JSValue ret = JS_EXCEPTION;\n  cv::Mat* m = js_mat_data(ctx, this_val);\n\n  if(m) {\n    uint32_t bytes = m->elemSize();\n    size_t channels = mat_channels(*m);\n    size_t offset = mat_offset(*m, row, col);\n\n    if(channels == 1) {\n      switch(m->type()) {\n\n        case CV_8UC1: {\n          uint8_t value;\n          js_mat_get(ctx, this_val, row, col, value);\n          ret = JS_NewUint32(ctx, value);\n          break;\n        }\n\n        case CV_16UC1: {\n          uint16_t value;\n          js_mat_get(ctx, this_val, row, col, value);\n          ret = JS_NewUint32(ctx, value);\n          break;\n        }\n        case CV_32SC1: {\n          int32_t value;\n          js_mat_get(ctx, this_val, row, col, value);\n          ret = JS_NewInt32(ctx, value);\n          break;\n        }\n        case CV_32FC1: {\n          float value;\n          js_mat_get(ctx, this_val, row, col, value);\n          ret = JS_NewFloat64(ctx, value);\n          break;\n        }\n        case CV_64FC1: {\n          double value;\n          js_mat_get(ctx, this_val, row, col, value);\n          ret = JS_NewFloat64(ctx, value);\n          break;\n        }\n        default: {\n          ret = JS_ThrowTypeError(ctx, \"Invalid Mat type %u\", m->type());\n          break;\n        }\n      }\n\n    } else {\n      JSValue buffer = js_arraybuffer_from(ctx, begin(*m), end(*m));\n      TypedArrayType type(*m);\n\n      ret = js_typedarray_new(ctx, buffer, offset, channels, type);\n    }\n    return ret;\n  }\n  return JS_UNDEFINED;\n}\n\nstatic int\njs_mat_get_wh(JSContext* ctx, JSMatDimensions* size, JSValueConst obj) {\n  cv::Mat* m = js_mat_data(ctx, obj);\n\n  if(m) {\n    size->rows = m->rows;\n    size->cols = m->cols;\n    return 1;\n  }\n  return 0;\n}\n\nstatic JSValue\njs_mat_at(JSContext* ctx, JSValueConst this_val, int argc, JSValueConst* argv) {\n  JSMatData* m = js_mat_data(ctx, this_val);\n  if(!m)\n    return JS_EXCEPTION;\n  JSPointData<double> pt;\n  JSValue ret;\n  uint32_t row = 0, col = 0;\n  if(js_point_read(ctx, argv[0], &pt)) {\n    col = pt.x;\n    row = pt.y;\n  } else if(argc >= 2 && JS_IsNumber(argv[0]) && JS_IsNumber(argv[1])) {\n    JS_ToUint32(ctx, &row, argv[0]);\n    JS_ToUint32(ctx, &col, argv[1]);\n    argc -= 2;\n    argv += 2;\n  } else if(argc >= 1 && JS_IsNumber(argv[0])) {\n    JSMatDimensions dim = {uint32_t(m->rows), uint32_t(m->cols)};\n    uint32_t idx;\n\n    JS_ToUint32(ctx, &idx, argv[0]);\n    row = idx / dim.cols;\n    col = idx % dim.cols;\n  }\n  return js_mat_get(ctx, this_val, row, col);\n}\n\nstatic JSValue\njs_mat_set(JSContext* ctx, JSValueConst this_val, int argc, JSValueConst* argv) {\n  cv::Mat* m = js_mat_data(ctx, this_val);\n  uint32_t bytes;\n  if(!m)\n    return JS_EXCEPTION;\n\n  JSPointData<double> pt;\n  JSValue ret;\n  int32_t col = -1, row = -1;\n\n  if(js_point_read(ctx, argv[0], &pt)) {\n    col = pt.x;\n    row = pt.y;\n    argc--;\n    argv++;\n  } else {\n    if(argc >= 1) {\n      JS_ToInt32(ctx, &row, argv[0]);\n      argc--;\n      argv++;\n    }\n    if(argc >= 1) {\n      JS_ToInt32(ctx, &col, argv[0]);\n      argc--;\n      argv++;\n    }\n  }\n  bytes = m->elemSize();\n  if(m->type() == CV_32FC1) {\n    double data;\n    if(JS_ToFloat64(ctx, &data, argv[0]))\n      return JS_EXCEPTION;\n    (*m).at<float>(row, col) = (float)data;\n  } else if(bytes <= sizeof(uint)) {\n    uint32_t mask = (1LU << (bytes * 8)) - 1;\n    uint32_t data;\n    if(JS_ToUint32(ctx, &data, argv[0]))\n      return JS_EXCEPTION;\n\n    if(bytes <= 1) {\n      uint8_t* p = &(*m).at<uint8_t>(row, col);\n      *p = (uint8_t)data & mask;\n    } else if(bytes <= 2) {\n      uint16_t* p = &(*m).at<uint16_t>(row, col);\n      *p = (uint16_t)data & mask;\n\n    } else if(bytes <= 4) {\n      uint* p = &(*m).at<uint>(row, col);\n      *p = (uint)data & mask;\n    }\n\n  } else\n    return JS_UNDEFINED;\n  return JS_UNDEFINED;\n}\n/*\ntemplate<class T>\ntypename std::enable_if<std::is_integral<T>::value, void>::type\njs_mat_vector_get(JSContext* ctx, int argc, JSValueConst* argv, std::vector<T>& output,\nstd::vector<bool>& defined) { output.resize(static_cast<size_t>(argc));\n  defined.resize(static_cast<size_t>(argc));\n  for(int i = 0; i < argc; i++) {\n    uint32_t val = 0;\n    bool isDef = JS_IsNumber(argv[i]) && !JS_ToUint32(ctx, &val, argv[i]);\n\n    output[i] = val;\n    defined[i] = isDef;\n  }\n}\n\ntemplate<class T>\ntypename std::enable_if<std::is_floating_point<T>::value, void>::type\njs_mat_vector_get(JSContext* ctx, int argc, JSValueConst* argv, std::vector<T>& output,\nstd::vector<bool>& defined) { output.resize(static_cast<size_t>(argc));\n  defined.resize(static_cast<size_t>(argc));\n  for(int i = 0; i < argc; i++) {\n    double val = 0;\n    bool isDef = JS_IsNumber(argv[i]) && !JS_ToFloat64(ctx, &val, argv[i]);\n\n    output[i] = val;\n    defined[i] = isDef;\n  }\n}\n\ntemplate<class T>\ntypename std::enable_if<std::is_integral<typename T::value_type>::value, void>::type\njs_mat_vector_get(JSContext* ctx, int argc, JSValueConst* argv, std::vector<T>& output,\nstd::vector<bool>& defined) { const size_t bits = (sizeof(typename T::value_type) * 8); const size_t\nn = T::channels; output.resize(static_cast<size_t>(argc));\n  defined.resize(static_cast<size_t>(argc));\n  for(int i = 0; i < argc; i++) {\n    double val = 0;\n    bool isDef = JS_IsNumber(argv[i]) && !JS_ToFloat64(ctx, &val, argv[i]);\n    if(isDef) {\n      const uint64_t mask = (1U << bits) - 1;\n      uint64_t ival = val;\n      for(int j = 0; j < n; j++) {\n        output[i][j] = ival & mask;\n        ival >>= bits;\n      }\n    }\n    defined[i] = isDef;\n  }\n};\n*/\n/*\ntemplate<class T>\nstatic std::vector<T>\njs_mat_set_vector(JSContext* ctx, JSMatData* m, int argc, JSValueConst* argv) {\n  JSMatDimensions dim = {static_cast<uint32_t>(m->rows), static_cast<uint32_t>(m->cols)};\n  uint32_t idx;\n  std::vector<bool> defined;\n  std::vector<T> v;\n  js_mat_vector_get(ctx, argc, argv, v, defined);\n\n  for(idx = 0; idx < v.size(); idx++)\n    if(defined[idx])\n      m->at<T>(idx / dim.cols, idx % dim.cols) = v[idx];\n  return v;\n}\n*/\nstatic JSValue\njs_mat_set_to(JSContext* ctx, JSValueConst this_val, int argc, JSValueConst* argv) {\n  JSMatData* m = js_mat_data(ctx, this_val);\n  uint32_t bytes;\n  std::vector<bool> defined;\n\n  if(!m)\n    return JS_EXCEPTION;\n\n  if(m->channels() == 1) {\n    double value;\n    js_value_to(ctx, argv[0], value);\n    m->setTo(cv::Scalar(value));\n\n  } else if(js_is_array(ctx, argv[0])) {\n    cv::Scalar s;\n    size_t n = js_array_to(ctx, argv[0], s);\n\n    // std::cerr << \"Scalar [ \" << s[0] << \", \" << s[1] << \", \" << s[2] << \", \" << s[3] << \" ]\" <<\n    // std::endl; std::cerr << \"Scalar.size() = \" << n << std::endl;\n\n    if(n >= m->channels()) {\n      m->setTo(s);\n      return JS_UNDEFINED;\n    }\n  }\n\n  bytes = m->elemSize();\n  /*  if(m->depth() == CV_16U && m->channels() > 1) {\n      if(m->channels() == 2)\n        js_mat_set_vector<cv::Vec<uint16_t, 2>>(ctx, m, argc, argv);\n      else if(m->channels() == 3)\n        js_mat_set_vector<cv::Vec<uint16_t, 3>>(ctx, m, argc, argv);\n      else if(m->channels() == 4)\n        js_mat_set_vector<cv::Vec<uint16_t, 4>>(ctx, m, argc, argv);\n    } else if(m->depth() == CV_32F) {\n      if(m->channels() == 1)\n        js_mat_set_vector<float>(ctx, m, argc, argv);\n    } else if(bytes <= sizeof(uint)) {\n      if(bytes <= 1) {\n        std::vector<uint8_t> v;\n        js_mat_vector_get(ctx, argc, argv, v, defined);\n        m->setTo(cv::InputArray(v), defined);\n      } else if(bytes <= 2) {\n        std::vector<uint16_t> v;\n        js_mat_vector_get(ctx, argc, argv, v, defined);\n        m->setTo(cv::InputArray(v), defined);\n      } else if(bytes <= 4) {\n\n        js_mat_set_vector<uint32_t>(ctx, m, argc, argv);\n      } else if(bytes <= 8) {\n        js_mat_set_vector<uint64_t>(ctx, m, argc, argv);\n      }\n    }*/\n\n  return JS_UNDEFINED;\n}\n\nstatic JSValue\njs_mat_get_props(JSContext* ctx, JSValueConst this_val, int magic) {\n  cv::Mat* m;\n  JSValue ret = JS_UNDEFINED;\n\n  if(!(m = js_mat_data(ctx, this_val)))\n    return JS_EXCEPTION;\n\n  if(m->empty())\n    return JS_NULL;\n\n  switch(magic) {\n    case PROP_COLS: {\n      ret = JS_NewUint32(ctx, m->cols);\n      break;\n    }\n    case PROP_ROWS: {\n      ret = JS_NewUint32(ctx, m->rows);\n      break;\n    }\n    case PROP_CHANNELS: {\n      ret = JS_NewUint32(ctx, m->channels());\n      break;\n    }\n    case PROP_TYPE: {\n      ret = JS_NewUint32(ctx, m->type());\n      break;\n    }\n    case PROP_DEPTH: {\n      ret = JS_NewUint32(ctx, m->depth());\n      break;\n    }\n    case PROP_EMPTY: {\n      ret = JS_NewBool(ctx, m->empty());\n      break;\n    }\n    case PROP_TOTAL: {\n      ret = JS_NewFloat64(ctx, m->total());\n      break;\n    }\n    case PROP_SIZE: {\n      ret = js_size_new(ctx, m->cols, m->rows);\n      break;\n    }\n    case PROP_CONTINUOUS: {\n      ret = JS_NewBool(ctx, m->isContinuous());\n      break;\n    }\n    case PROP_SUBMATRIX: {\n      ret = JS_NewBool(ctx, m->isSubmatrix());\n      break;\n    }\n    case PROP_STEP: {\n      ret = JS_NewUint32(ctx, m->step);\n      break;\n    }\n    case PROP_ELEMSIZE: {\n      ret = JS_NewUint32(ctx, m->elemSize());\n      break;\n    }\n    case PROP_ELEMSIZE1: {\n      ret = JS_NewUint32(ctx, m->elemSize1());\n      break;\n    }\n  }\n\n  return ret;\n}\n\nstatic JSValue\njs_mat_tostring(JSContext* ctx, JSValueConst this_val, int argc, JSValueConst* argv) {\n  cv::Mat* m = js_mat_data(ctx, this_val);\n  int x, y;\n\n  std::ostringstream os;\n  std::string str;\n  int i = 0;\n  if(!m)\n    return JS_EXCEPTION;\n\n  os << \"Mat(\";\n\n  if(false && (m->rows > 0 && m->cols > 0) && m->dims == 2) {\n    os << m->rows << \", \" << m->cols;\n  } else {\n    std::vector<std::string> sizeStrs = js_mat_dimensions(*m);\n    os << \"[\" << join(sizeStrs.cbegin(), sizeStrs.cend(), \", \") << \"]\";\n  }\n\n  if(m->depth() == CV_8U || m->channels() > 1) {\n    os << \", \";\n    const char* tstr;\n    switch(m->depth() & 7) {\n      case CV_8U: tstr = \"CV_8U\"; break;\n      case CV_8S: tstr = \"CV_8S\"; break;\n      case CV_16U: tstr = \"CV_16U\"; break;\n      case CV_16S: tstr = \"CV_16S\"; break;\n      case CV_32S: tstr = \"CV_32S\"; break;\n      case CV_32F: tstr = \"CV_32F\"; break;\n      case CV_64F: tstr = \"CV_64F\"; break;\n    }\n    os << tstr << 'C' << m->channels() << \")\" /*<< std::endl*/;\n  } else {\n    os << \"Mat[\";\n    for(y = 0; y < m->rows; y++) {\n      os << \"\\n  \";\n\n      for(x = 0; x < m->cols; x++) {\n        if(x > 0)\n          os << ',';\n        if(m->type() == CV_32FC1)\n          os << m->at<float>(y, x);\n        else\n          os << std::setfill('0') << std::setbase(16) << std::setw(m->type() == CV_8UC4 ? 8 : m->type() == CV_8UC1 ? 2 : 6)\n             << m->at<uint32_t>(y, x);\n      }\n    }\n\n    os << ']' /*<< std::endl*/;\n  }\n  os << ' ';\n  os << (void*)m->elemSize();\n  os << \"x\";\n  os << (void*)m->total();\n  os << \" @\";\n  os << (void*)m->ptr();\n\n  str = os.str();\n\n  return JS_NewStringLen(ctx, str.data(), str.size());\n}\n\nstatic JSValue\njs_mat_inspect(JSContext* ctx, JSValueConst this_val, int argc, JSValueConst* argv) {\n  JSMatData* mat = js_mat_data(ctx, this_val);\n  JSValue obj = JS_NewObjectProto(ctx, mat_proto);\n\n  JS_DefinePropertyValueStr(ctx, obj, \"cols\", JS_NewUint32(ctx, mat->cols), JS_PROP_ENUMERABLE);\n  JS_DefinePropertyValueStr(ctx, obj, \"rows\", JS_NewUint32(ctx, mat->rows), JS_PROP_ENUMERABLE);\n  JS_DefinePropertyValueStr(ctx, obj, \"depth\", JS_NewUint32(ctx, mat->depth()), JS_PROP_ENUMERABLE);\n  JS_DefinePropertyValueStr(ctx, obj, \"channels\", JS_NewUint32(ctx, mat->channels()), JS_PROP_ENUMERABLE);\n  return obj;\n}\n\nstatic JSValue\njs_mat_getrotationmatrix2d(JSContext* ctx, JSValueConst this_val, int argc, JSValueConst* argv) {\n  JSPointData<double> s;\n\n  double angle = 0, scale = 1;\n  cv::Mat m;\n\n  JSValue ret;\n  if(argc == 0)\n    return JS_EXCEPTION;\n  if(argc > 0) {\n    s = js_point_get(ctx, argv[0]);\n    if(argc > 1) {\n      JS_ToFloat64(ctx, &angle, argv[1]);\n      if(argc > 2) {\n        JS_ToFloat64(ctx, &scale, argv[2]);\n      }\n    }\n  }\n\n  m = cv::getRotationMatrix2D(s, angle, scale);\n\n  ret = js_mat_wrap(ctx, m);\n  return ret;\n}\n\nstatic JSValue\njs_mat_convert_to(JSContext* ctx, JSValueConst this_val, int argc, JSValueConst* argv) {\n  JSMatData *m, *output;\n  int32_t rtype;\n  double alpha = 1, beta = 0;\n\n  m = js_mat_data(ctx, this_val);\n  output = js_mat_data(ctx, argv[0]);\n\n  if(m == nullptr || output == nullptr)\n    return JS_EXCEPTION;\n\n  JS_ToInt32(ctx, &rtype, argv[1]);\n\n  if(argc >= 3)\n    JS_ToFloat64(ctx, &alpha, argv[2]);\n\n  if(argc >= 4)\n    JS_ToFloat64(ctx, &beta, argv[3]);\n\n  m->convertTo(*output, rtype, alpha, beta);\n\n  return JS_UNDEFINED;\n}\n\nstatic JSValue\njs_mat_copy_to(JSContext* ctx, JSValueConst this_val, int argc, JSValueConst* argv) {\n  JSMatData* m;\n  JSOutputArray output;\n  JSInputArray /*output,*/ mask = cv::noArray();\n\n  m = js_mat_data(ctx, this_val);\n\n  output = js_umat_or_mat(ctx, argv[0]);\n  // output = js_umat_or_mat(ctx, argv[0]);\n\n  if(js_is_noarray(output))\n    return JS_ThrowInternalError(ctx, \"argument 1 not an array!\");\n\n  if(argc > 1)\n    mask = js_umat_or_mat(ctx, argv[1]);\n\n  try {\n    if(!js_is_noarray(mask))\n      m->copyTo(output, mask);\n    else\n      m->copyTo(output);\n  } catch(const cv::Exception& e) { return JS_ThrowInternalError(ctx, \"cv::Exception what='%s'\", e.what()); }\n    \n  return JS_UNDEFINED;\n}\n\nstatic JSValue\njs_mat_reshape(JSContext* ctx, JSValueConst this_val, int argc, JSValueConst* argv) {\n  JSMatData *m, mat;\n  int32_t cn, rows = 0;\n  JSValue ret = JS_EXCEPTION;\n\n  m = js_mat_data(ctx, this_val);\n\n  if(m == nullptr || argc < 1)\n    return ret;\n\n  if(argc >= 1 && JS_IsNumber(argv[0])) {\n    JS_ToInt32(ctx, &cn, argv[0]);\n    argv++;\n    argc--;\n  } else {\n    cn = m->channels();\n  }\n\n  if(argc >= 1) {\n    std::vector<int> newshape;\n    if(js_is_array(ctx, argv[0])) {\n      js_array_to(ctx, argv[0], newshape);\n      if(argc >= 2 && JS_IsNumber(argv[1])) {\n        uint32_t ndims;\n        JS_ToUint32(ctx, &ndims, argv[1]);\n        if(ndims > newshape.size())\n          return JS_EXCEPTION;\n        mat = m->reshape(cn, ndims, &newshape[0]);\n      } else {\n        mat = m->reshape(cn, newshape);\n      }\n    } else if(JS_IsNumber(argv[0])) {\n      JS_ToInt32(ctx, &rows, argv[0]);\n      mat = m->reshape(cn, rows);\n    }\n    ret = js_mat_wrap(ctx, mat);\n  }\n\n  return ret;\n}\n\nstatic JSValue\njs_mat_getumat(JSContext* ctx, JSValueConst this_val, int argc, JSValueConst* argv) {\n  JSMatData* m;\n  JSUMatData umat;\n  int32_t accessFlags, usageFlags = cv::USAGE_DEFAULT;\n  JSValue ret = JS_EXCEPTION;\n\n  m = js_mat_data(ctx, this_val);\n\n  if(m == nullptr || argc < 1)\n    return ret;\n\n  if(js_umat_class_id == 0)\n    return JS_NULL;\n\n  JS_ToInt32(ctx, &accessFlags, argv[0]);\n\n  if(argc > 1)\n    JS_ToInt32(ctx, &usageFlags, argv[1]);\n\n  umat = m->getUMat(cv::AccessFlag(accessFlags), cv::UMatUsageFlags(usageFlags));\n\n  return js_umat_wrap(ctx, umat);\n}\n\nstatic JSValue\njs_mat_class_func(JSContext* ctx, JSValueConst this_val, int argc, JSValueConst* argv, int magic) {\n  JSValueConst *v = argv, *e = &argv[argc];\n  JSMatData result;\n  JSMatData *prev = nullptr, *mat = nullptr;\n\n  while(v < e) {\n    JSValueConst arg = *v++;\n\n    if(nullptr == (mat = js_mat_data(ctx, arg)))\n      return JS_EXCEPTION;\n\n    if(prev) {\n      JSMatData const &a = *prev, &b = *mat;\n      switch(magic) {\n        case 0: result = a + b; break;\n        case 1: result = a - b; break;\n        case 2: result = a * b; break;\n        case 3: result = a / b; break;\n        case 4: result = a & b; break;\n        case 5: result = a | b; break;\n        case 6: result = a ^ b; break;\n      }\n      prev = &result;\n    } else {\n      prev = mat;\n      result = cv::Mat::zeros(mat->rows, mat->cols, mat->type());\n      mat->copyTo(result);\n    }\n  }\n\n  return js_mat_wrap(ctx, result);\n}\n\nstatic JSValue\njs_mat_fill(JSContext* ctx, JSValueConst this_val, int argc, JSValueConst* argv, int magic) {\n  JSMatData* m;\n\n  m = js_mat_data(ctx, this_val);\n\n  if(m == nullptr)\n    return JS_EXCEPTION;\n\n  if(m->empty() || m->rows == 0 || m->cols == 0)\n    return JS_EXCEPTION;\n\n  cv::Mat& mat = *m;\n\n  switch(magic) {\n    case 0: {\n      mat = cv::Mat::zeros(mat.rows, mat.cols, mat.type());\n      break;\n    }\n    case 1: {\n      mat = cv::Mat::ones(mat.rows, mat.cols, mat.type());\n      break;\n    }\n  }\n\n  return JS_DupValue(ctx, this_val);\n}\n\nstatic JSValue\njs_mat_class_create(JSContext* ctx, JSValueConst this_val, int argc, JSValueConst* argv, int magic) {\n  JSValue ret = JS_UNDEFINED;\n\n  const auto& [size, type] = js_mat_params(ctx, argc, argv);\n\n  if(size.width == 0 || size.height == 0)\n    return JS_EXCEPTION;\n\n  ret = js_mat_new(ctx, uint32_t(0), uint32_t(0), int(0));\n  JSMatData& mat = *js_mat_data(ctx, ret);\n\n  switch(magic) {\n    case 0: {\n      mat = cv::Scalar::all(0);\n      break;\n    }\n    case 1: {\n      mat = cv::Scalar::all(1);\n      break;\n    }\n  }\n\n  return ret;\n}\n\n/*static JSValue\njs_mat_create_vec(JSContext* ctx, int len, JSValue* vec) {\n  JSValue obj = JS_EXCEPTION;\n  int i;\n\n  obj = JS_NewArray(ctx);\n  if(!JS_IsException(obj)) {\n\n    for(i = 0; i < len; i++) {\n\n      if(JS_SetPropertyUint32(ctx, obj, i, vec[i]) < 0) {\n        JS_FreeValue(ctx, obj);\n        return JS_EXCEPTION;\n      }\n    }\n  }\n  return obj;\n}*/\n\nstatic JSValue\njs_mat_buffer(JSContext* ctx, JSValueConst this_val) {\n  JSMatData* m;\n  JSValue buf;\n  /*  buf = JS_GetPropertyStr(ctx, this_val, \"arrayBuffer\");\n\n    if(JS_IsObject(buf))\n      return buf;*/\n\n  if((m = js_mat_data(ctx, this_val))) {\n    JSValue buf;\n    size_t byte_size;\n    m->addref();\n    // m->addref();\n    byte_size = mat_bytesize(*m);\n\n    if(byte_size == 0)\n      byte_size = end(*m) - begin(*m);\n    if(byte_size == 0)\n      byte_size = m->elemSize() * m->total();\n    assert(byte_size);\n    buf = js_arraybuffer_from(\n        ctx, mat_ptr(*m), mat_ptr(*m) + byte_size, *(JSFreeArrayBufferDataFunc*)&js_mat_free_func, (void*)m);\n\n    //   JS_SetPropertyStr(ctx, this_val, \"arrayBuffer\", JS_DupValue(ctx, buf));\n    return buf;\n  }\n  return JS_EXCEPTION;\n}\n\nstatic JSValue\njs_mat_array(JSContext* ctx, JSValueConst this_val) {\n  JSMatData* m;\n  const char* ctor;\n\n  if((m = js_mat_data(ctx, this_val))) {\n    JSValue buffer, typed_array;\n    TypedArrayType type(*m);\n    buffer = js_mat_buffer(ctx, this_val);\n\n    std::ranges::subrange<uint8_t*> range(begin(*m), end(*m));\n\n    /*printf(\"m->rows=%i m->cols=%i m->step=%zu m->total()=%zu range.size()=%zu type.byte_size=%u\n       size=%zu\\n\", m->rows, m->cols, size_t(m->step), range.size() / type.byte_size, range.size(),\n           type.byte_size,\n           range.size() / type.byte_size);*/\n\n    return js_typedarray_new(ctx, buffer, 0, range.size() / type.byte_size, type);\n  }\n  return JS_EXCEPTION;\n}\n\nJSValue\njs_mat_call(JSContext* ctx, JSValueConst func_obj, JSValueConst this_val, int argc, JSValueConst* argv, int flags) {\n  cv::Rect rect = {0, 0, 0, 0};\n  JSMatData* src;\n\n  if((src = js_mat_data(ctx, func_obj)) == nullptr)\n    return JS_EXCEPTION;\n\n  if(!js_rect_read(ctx, argv[0], &rect))\n    return JS_ThrowTypeError(ctx, \"argument 1 expecting Rect\");\n  // printf(\"js_mat_call %u,%u %ux%u\\n\", rect.x, rect.y, rect.width, rect.height);\n\n  cv::Mat mat = src->operator()(rect);\n  return js_mat_wrap(ctx, mat);\n}\n\nvoid\njs_mat_finalizer(JSRuntime* rt, JSValue val) {\n  JSMatData* s;\n\n  if((s = static_cast<JSMatData*>(JS_GetOpaque(val, js_mat_class_id)))) {\n    js_deallocate(rt, s);\n  }\n  return;\n\n  /*auto it2 = std::find(mat_freed.cbegin(), mat_freed.cend(), s);\n  auto it = std::find(mat_list.cbegin(), mat_list.cend(), s);\n\n  if(it2 != mat_freed.cend()) {\n#ifdef DEBUG_MAT\n    std::cerr << \"js_mat_finalizer\";\n    js_mat_dump(s);\n#endif\n\n    std::cerr << \" ERROR: already freed\" << std::endl;\n    return;\n  }\n  JS_FreeValueRT(rt, val);\n  if(it != mat_list.cend()) {\n    size_t refcount = s->u != nullptr ? s->u->refcount : 0;\n    if(s->u) {\n      auto data = s->u;\n#ifdef DEBUG_MAT\n      std::cerr << \"cv::Mat::release\";\n      std::cerr << \" mat=\" << static_cast<void*>(s);\n      std::cerr << \", refcount=\" << refcount;\n      std::cerr << std::endl;\n#endif\n      if(refcount > 1)\n        s->release();\n      if(s->u)\n        refcount = s->u->refcount;\n      else\n        refcount = 0;\n    }\n    if(s->u == nullptr) {\n      mat_list.erase(it);\n      mat_freed.push_front(s);\n    }\n#ifdef DEBUG_MAT\n    std::cerr << \"js_mat_finalizer\";\n    js_mat_dump(s);\n    std::cerr << \", refcount=\" << refcount;\n    std::cerr << \", mat_list.size()=\" << mat_list.size();\n    std::cerr << \", mat_freed.size()=\" << mat_freed.size() << std::endl;\n#endif\n  } else {\n#ifdef DEBUG_MAT\n    std::cerr << \"js_mat_finalizer\";\n    js_mat_dump(s);\n#endif\n    std::cerr << \" ERROR: not found\" << std::endl;\n  }*/\n}\n\nJSValue\njs_mat_iterator_new(JSContext* ctx, JSValueConst this_val, int argc, JSValueConst* argv, int magic) {\n  JSValue enum_obj, mat;\n  JSMatData* m;\n  JSMatIteratorData* it;\n\n  if(!(m = static_cast<JSMatData*>(JS_GetOpaque(this_val, js_mat_class_id))))\n    return JS_EXCEPTION;\n\n  mat = JS_DupValue(ctx, this_val);\n  if(!JS_IsException(mat)) {\n    enum_obj = JS_NewObjectProtoClass(ctx, mat_iterator_proto, js_mat_iterator_class_id);\n    if(!JS_IsException(enum_obj)) {\n      it = js_allocate<JSMatIteratorData>(ctx);\n\n      it->obj = mat;\n      it->buf = m->empty() ? JS_UNDEFINED : js_mat_buffer(ctx, this_val);\n      it->row = 0;\n      it->col = 0;\n      it->magic = magic;\n      it->type = TypedArrayType(*m);\n\n      // printf(\"js_mat_iterator_new type=%s\\n\", it->type.constructor_name().c_str());\n\n      JS_SetOpaque(/*ctx, */ enum_obj, it);\n      return enum_obj;\n    }\n    JS_FreeValue(ctx, enum_obj);\n  }\n  JS_FreeValue(ctx, mat);\n  return JS_EXCEPTION;\n}\n\n/*typedef struct JSMatIteratorData {\n  JSValue obj, buf;\n  uint32_t row, col;\n  int magic;\n  TypedArrayType type;\n} JSMatIteratorData;\n*/\n\nvoid\njs_mat_iterator_dump(JSMatIteratorData* it) {\n  std::cout << \"MatIterator { row: \" << it->row << \", col: \" << it->col << \", magic: \" << it->magic << \", type: \" << it->type\n            << \" }\" << std::endl;\n}\n\nJSValue\njs_mat_iterator_next(JSContext* ctx, JSValueConst this_val, int argc, JSValueConst* argv, BOOL* pdone, int magic) {\n  JSMatIteratorData* it;\n  JSValue ret = JS_UNDEFINED;\n  *pdone = FALSE;\n  it = static_cast<JSMatIteratorData*>(JS_GetOpaque(this_val, js_mat_iterator_class_id));\n  if(it) {\n    JSMatData* m;\n    uint32_t row, col;\n    size_t offset, channels;\n    JSMatDimensions dim;\n    if((m = js_mat_data(ctx, it->obj)) == nullptr)\n      return JS_EXCEPTION;\n    dim = mat_dimensions(*m);\n\n    /*std::cout << \"mat_dimensions(*m) = \" << dim.cols << \"x\" << dim.rows << std::endl;\n    js_mat_iterator_dump(it);*/\n\n    row = it->row;\n    col = it->col;\n    if(row >= m->rows) {\n      JS_FreeValue(ctx, it->obj);\n      it->obj = JS_UNDEFINED;\n    done:\n      *pdone = TRUE;\n      return JS_UNDEFINED;\n    }\n    if(col + 1 < dim.cols) {\n      it->col = col + 1;\n    } else {\n      it->col = 0;\n      it->row = row + 1;\n    }\n    *pdone = FALSE;\n    channels = mat_channels(*m);\n    offset = mat_offset(*m, row, col);\n    switch(it->magic) {\n      case MAT_ITERATOR_KEYS: {\n        std::array<uint32_t, 2> pos = {row, col};\n        ret = js_array_from(ctx, pos);\n        break;\n      }\n      case MAT_ITERATOR_VALUES: {\n        TypedArrayType type(*m);\n\n        /*   printf(\"js_mat_iterator_next is_signed=%d\\n\", type.is_signed);\n           printf(\"js_mat_iterator_next is_floating_point=%d\\n\", type.is_floating_point);\n           printf(\"js_mat_iterator_next byte_size=%d\\n\", type.byte_size);\n           printf(\"js_mat_iterator_next channels=%d type=%d\\n\", m->channels(), m->type());\n           printf(\"js_mat_iterator_next %s\\n\", type.constructor_name().c_str());*/\n\n        if(channels == 1)\n          return js_mat_get(ctx, it->obj, row, col);\n\n        ret = js_typedarray_new(ctx, it->buf, offset, channels, type);\n        break;\n      }\n      case MAT_ITERATOR_ENTRIES: {\n        JSValue value = channels == 1 ? js_mat_get(ctx, it->obj, row, col)\n                                      : js_typedarray_new(ctx, it->buf, offset, channels, TypedArrayType(*m));\n        std::array<uint32_t, 2> pos = {row, col};\n        std::array<JSValue, 2> entry = {js_array_from(ctx, pos), value};\n        ret = js_array_from(ctx, entry);\n        break;\n      }\n    }\n  }\n  return ret;\n}\n\nvoid\njs_mat_iterator_finalizer(JSRuntime* rt, JSValue val) {\n  JSMatIteratorData* it = static_cast<JSMatIteratorData*>(JS_GetOpaque(val, js_mat_iterator_class_id));\n  js_deallocate(rt, it);\n}\n\nstatic JSValue\njs_mat_iterator_dup(JSContext* ctx, JSValueConst this_val, int argc, JSValueConst* argv) {\n  return JS_DupValue(ctx, this_val);\n}\n\nJSClassDef js_mat_class = {\n    .class_name = \"Mat\",\n    .finalizer = js_mat_finalizer,\n    .call = js_mat_call,\n};\n\nJSClassDef js_mat_iterator_class = {\n    .class_name = \"MatIterator\",\n    .finalizer = js_mat_iterator_finalizer,\n};\n\nconst JSCFunctionListEntry js_mat_proto_funcs[] = {JS_CGETSET_MAGIC_DEF(\"cols\", js_mat_get_props, NULL, PROP_COLS),\n                                                   JS_CGETSET_MAGIC_DEF(\"rows\", js_mat_get_props, NULL, PROP_ROWS),\n                                                   JS_CGETSET_MAGIC_DEF(\"channels\", js_mat_get_props, NULL, PROP_CHANNELS),\n                                                   JS_CGETSET_MAGIC_DEF(\"type\", js_mat_get_props, NULL, PROP_TYPE),\n                                                   JS_CGETSET_MAGIC_DEF(\"depth\", js_mat_get_props, NULL, PROP_DEPTH),\n                                                   JS_CGETSET_MAGIC_DEF(\"empty\", js_mat_get_props, NULL, PROP_EMPTY),\n                                                   JS_CGETSET_MAGIC_DEF(\"total\", js_mat_get_props, NULL, PROP_TOTAL),\n                                                   JS_CGETSET_MAGIC_DEF(\"size\", js_mat_get_props, NULL, PROP_SIZE),\n                                                   JS_CGETSET_MAGIC_DEF(\"continuous\", js_mat_get_props, NULL, PROP_CONTINUOUS),\n                                                   JS_CGETSET_MAGIC_DEF(\"submatrix\", js_mat_get_props, NULL, PROP_SUBMATRIX),\n                                                   JS_CGETSET_MAGIC_DEF(\"step\", js_mat_get_props, NULL, PROP_STEP),\n                                                   JS_CGETSET_MAGIC_DEF(\"elemSize\", js_mat_get_props, NULL, PROP_ELEMSIZE),\n                                                   JS_CGETSET_MAGIC_DEF(\"elemSize1\", js_mat_get_props, NULL, PROP_ELEMSIZE1),\n                                                   JS_CGETSET_DEF(\"buffer\", js_mat_buffer, NULL),\n                                                   JS_CGETSET_DEF(\"array\", js_mat_array, NULL),\n                                                   JS_CFUNC_MAGIC_DEF(\"col\", 1, js_mat_funcs, METHOD_COL),\n                                                   JS_CFUNC_MAGIC_DEF(\"row\", 1, js_mat_funcs, METHOD_ROW),\n                                                   JS_CFUNC_MAGIC_DEF(\"colRange\", 2, js_mat_funcs, METHOD_COL_RANGE),\n                                                   JS_CFUNC_MAGIC_DEF(\"rowRange\", 2, js_mat_funcs, METHOD_ROW_RANGE),\n                                                   JS_CFUNC_MAGIC_DEF(\"clone\", 0, js_mat_funcs, METHOD_CLONE),\n                                                   JS_CFUNC_MAGIC_DEF(\"roi\", 0, js_mat_funcs, METHOD_ROI),\n                                                   JS_CFUNC_MAGIC_DEF(\"release\", 0, js_mat_funcs, METHOD_RELEASE),\n                                                   JS_CFUNC_MAGIC_DEF(\"dup\", 0, js_mat_funcs, METHOD_DUP),\n                                                   JS_CFUNC_MAGIC_DEF(\"clear\", 0, js_mat_funcs, METHOD_CLEAR),\n                                                   JS_CFUNC_MAGIC_DEF(\"reset\", 0, js_mat_funcs, METHOD_RESET),\n                                                   JS_CFUNC_MAGIC_DEF(\"resize\", 1, js_mat_funcs, METHOD_RESIZE),\n                                                   JS_CFUNC_MAGIC_DEF(\"step1\", 0, js_mat_funcs, METHOD_STEP1),\n                                                   JS_CFUNC_MAGIC_DEF(\"locateROI\", 0, js_mat_funcs, METHOD_LOCATE_ROI),\n                                                   JS_CFUNC_MAGIC_DEF(\"ptr\", 0, js_mat_funcs, METHOD_PTR),\n\n                                                   JS_CFUNC_MAGIC_DEF(\"and\", 2, js_mat_expr, MAT_EXPR_AND),\n                                                   JS_CFUNC_MAGIC_DEF(\"or\", 2, js_mat_expr, MAT_EXPR_OR),\n                                                   JS_CFUNC_MAGIC_DEF(\"xor\", 3, js_mat_expr, MAT_EXPR_XOR),\n                                                   JS_CFUNC_MAGIC_DEF(\"mul\", 3, js_mat_expr, MAT_EXPR_MUL),\n\n                                                   JS_CFUNC_MAGIC_DEF(\"zero\", 2, js_mat_fill, 0),\n                                                   JS_CFUNC_MAGIC_DEF(\"one\", 2, js_mat_fill, 1),\n\n                                                   JS_CFUNC_DEF(\"toString\", 0, js_mat_tostring),\n                                                   JS_CFUNC_DEF(\"at\", 1, js_mat_at),\n                                                   JS_CFUNC_DEF(\"set\", 2, js_mat_set),\n                                                   JS_CFUNC_DEF(\"setTo\", 1, js_mat_set_to),\n                                                   JS_CFUNC_DEF(\"convertTo\", 2, js_mat_convert_to),\n                                                   JS_CFUNC_DEF(\"copyTo\", 1, js_mat_copy_to),\n                                                   JS_CFUNC_DEF(\"reshape\", 1, js_mat_reshape),\n                                                   JS_CFUNC_DEF(\"getUMat\", 1, js_mat_getumat),\n                                                   JS_CFUNC_MAGIC_DEF(\"keys\", 0, js_mat_iterator_new, MAT_ITERATOR_KEYS),\n                                                   JS_CFUNC_MAGIC_DEF(\"values\", 0, js_mat_iterator_new, MAT_ITERATOR_VALUES),\n                                                   JS_CFUNC_MAGIC_DEF(\"entries\", 0, js_mat_iterator_new, MAT_ITERATOR_ENTRIES),\n                                                   JS_ALIAS_DEF(\"[Symbol.iterator]\", \"values\"),\n                                                   JS_ALIAS_DEF(\"[Symbol.toPrimitive]\", \"toString\"),\n\n                                                   JS_PROP_STRING_DEF(\"[Symbol.toStringTag]\", \"Mat\", JS_PROP_CONFIGURABLE)\n\n};\n\nconst JSCFunctionListEntry js_mat_iterator_proto_funcs[] = {\n    JS_ITERATOR_NEXT_DEF(\"next\", 0, js_mat_iterator_next, 0),\n    JS_PROP_STRING_DEF(\"[Symbol.toStringTag]\", \"MatIterator\", JS_PROP_CONFIGURABLE),\n    JS_CFUNC_DEF(\"[Symbol.iterator]\", 0, js_mat_iterator_dup),\n\n};\n\nconst JSCFunctionListEntry js_mat_static_funcs[] = {\n    JS_CFUNC_DEF(\"getRotationMatrix2D\", 3, js_mat_getrotationmatrix2d),\n    JS_CFUNC_MAGIC_DEF(\"add\", 2, js_mat_class_func, 0),\n    JS_CFUNC_MAGIC_DEF(\"sub\", 2, js_mat_class_func, 1),\n    JS_CFUNC_MAGIC_DEF(\"mul\", 2, js_mat_class_func, 2),\n    JS_CFUNC_MAGIC_DEF(\"div\", 2, js_mat_class_func, 3),\n    JS_CFUNC_MAGIC_DEF(\"and\", 2, js_mat_class_func, 4),\n    JS_CFUNC_MAGIC_DEF(\"or\", 2, js_mat_class_func, 5),\n    JS_CFUNC_MAGIC_DEF(\"xor\", 3, js_mat_class_func, 6),\n    JS_CFUNC_MAGIC_DEF(\"zeros\", 1, js_mat_class_create, 0),\n    JS_CFUNC_MAGIC_DEF(\"ones\", 1, js_mat_class_create, 1),\n    JS_PROP_INT32_DEF(\"CV_8U\", CV_MAKETYPE(CV_8U, 1), JS_PROP_ENUMERABLE),\n};\n\nint\njs_mat_init(JSContext* ctx, JSModuleDef* m) {\n  if(js_mat_class_id == 0) {\n    /* create the Mat class */\n    JS_NewClassID(&js_mat_class_id);\n    JS_NewClassID(&js_mat_iterator_class_id);\n    JS_NewClass(JS_GetRuntime(ctx), js_mat_class_id, &js_mat_class);\n    JS_NewClass(JS_GetRuntime(ctx), js_mat_iterator_class_id, &js_mat_iterator_class);\n\n    mat_proto = JS_NewObject(ctx);\n    JS_SetPropertyFunctionList(ctx, mat_proto, js_mat_proto_funcs, countof(js_mat_proto_funcs));\n    JS_SetClassProto(ctx, js_mat_class_id, mat_proto);\n\n    mat_iterator_proto = JS_NewObject(ctx);\n    JS_SetPropertyFunctionList(ctx, mat_iterator_proto, js_mat_iterator_proto_funcs, countof(js_mat_iterator_proto_funcs));\n    JS_SetClassProto(ctx, js_mat_iterator_class_id, mat_iterator_proto);\n\n    mat_class = JS_NewCFunction2(ctx, js_mat_ctor, \"Mat\", 2, JS_CFUNC_constructor, 0);\n    /* set proto.constructor and ctor.prototype */\n    JS_SetConstructor(ctx, mat_class, mat_proto);\n\n    JS_SetPropertyFunctionList(ctx, mat_class, js_mat_static_funcs, countof(js_mat_static_funcs));\n\n    js_set_inspect_method(ctx, mat_proto, js_mat_inspect);\n    /*   JSValue g = JS_GetGlobalObject(ctx);\n       int32array_ctor = JS_GetProperty(ctx, g, JS_ATOM_Int32Array);\n       int32array_proto = JS_GetPrototype(ctx, int32array_ctor);\n\n       JS_FreeValue(ctx, g);*/\n  }\n\n  if(m)\n    JS_SetModuleExport(ctx, m, \"Mat\", mat_class);\n  return 0;\n}\n\nextern \"C\" VISIBLE void\njs_mat_export(JSContext* ctx, JSModuleDef* m) {\n  JS_AddModuleExport(ctx, m, \"Mat\");\n}\n\n#if defined(JS_MAT_MODULE)\n#define JS_INIT_MODULE VISIBLE js_init_module\n#else\n#define JS_INIT_MODULE js_init_module_mat\n#endif\n\nextern \"C\" JSModuleDef*\nJS_INIT_MODULE(JSContext* ctx, const char* module_name) {\n  JSModuleDef* m;\n  m = JS_NewCModule(ctx, module_name, &js_mat_init);\n  if(!m)\n    return NULL;\n  js_mat_export(ctx, m);\n  return m;\n}\n",
			"file": "js_mat.cpp",
			"file_size": 46998,
			"file_write_time": 132653242556048378,
			"settings":
			{
				"buffer_size": 47000,
				"encoding": "UTF-8",
				"line_ending": "Unix"
			},
			"undo_stack":
			[
				[
					89,
					1,
					"insert",
					{
						"characters": "t"
					},
					"AQAAABJpAAAAAAAAE2kAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAEmkAAAAAAAASaQAAAAAAAAAAAAAAAPC/"
				],
				[
					90,
					1,
					"insert",
					{
						"characters": "\nry"
					},
					"AwAAABNpAAAAAAAAFGkAAAAAAAAAAAAAFGkAAAAAAAAVaQAAAAAAAAAAAAAVaQAAAAAAABZpAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAE2kAAAAAAAATaQAAAAAAAAAAAAAAAPC/"
				],
				[
					91,
					4,
					"left_delete",
					null,
					"BQAAABVpAAAAAAAAFWkAAAAAAAABAAAAeRRpAAAAAAAAFGkAAAAAAAABAAAAchNpAAAAAAAAE2kAAAAAAAABAAAAChJpAAAAAAAAEmkAAAAAAAABAAAAdBJpAAAAAAAAFGkAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAFmkAAAAAAAAWaQAAAAAAAAAAAAAAAPC/"
				],
				[
					92,
					1,
					"insert",
					{
						"characters": "\ntry"
					},
					"BgAAABRpAAAAAAAAFWkAAAAAAAAAAAAAFWkAAAAAAAAXaQAAAAAAAAAAAAASaQAAAAAAABJpAAAAAAAAAgAAACAgFWkAAAAAAAAWaQAAAAAAAAAAAAAWaQAAAAAAABdpAAAAAAAAAAAAABdpAAAAAAAAGGkAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAFGkAAAAAAAAUaQAAAAAAAAAAAAAAAPC/"
				],
				[
					93,
					1,
					"insert_snippet",
					{
						"contents": "{$0}"
					},
					"AQAAABhpAAAAAAAAGmkAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAGGkAAAAAAAAYaQAAAAAAAAAAAAAAAPC/"
				],
				[
					94,
					1,
					"run_macro_file",
					{
						"file": "res://Packages/Default/Delete Left Right.sublime-macro"
					},
					"AgAAABhpAAAAAAAAGGkAAAAAAAABAAAAexhpAAAAAAAAGGkAAAAAAAABAAAAfQ",
					"AQAAAAAAAAABAAAAGWkAAAAAAAAZaQAAAAAAAAAAAAAAAPC/"
				],
				[
					95,
					1,
					"insert",
					{
						"characters": " }"
					},
					"AgAAABhpAAAAAAAAGWkAAAAAAAAAAAAAGWkAAAAAAAAaaQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAGGkAAAAAAAAYaQAAAAAAAAAAAAAAAPC/"
				],
				[
					96,
					1,
					"left_delete",
					null,
					"AQAAABlpAAAAAAAAGWkAAAAAAAABAAAAfQ",
					"AQAAAAAAAAABAAAAGmkAAAAAAAAaaQAAAAAAAAAAAAAAAPC/"
				],
				[
					97,
					1,
					"insert_snippet",
					{
						"contents": "{$0}"
					},
					"AQAAABlpAAAAAAAAG2kAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAGWkAAAAAAAAZaQAAAAAAAAAAAAAAAPC/"
				],
				[
					98,
					1,
					"right_delete",
					null,
					"AQAAABppAAAAAAAAGmkAAAAAAAABAAAAfQ",
					"AQAAAAAAAAABAAAAGmkAAAAAAAAaaQAAAAAAAAAAAAAAAPC/"
				],
				[
					100,
					1,
					"insert",
					{
						"characters": "}cta"
					},
					"BAAAAHFpAAAAAAAAcmkAAAAAAAAAAAAAcmkAAAAAAABzaQAAAAAAAAAAAABzaQAAAAAAAHRpAAAAAAAAAAAAAHRpAAAAAAAAdWkAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAcWkAAAAAAABxaQAAAAAAAAAAAAAAgFFA"
				],
				[
					101,
					1,
					"left_delete",
					null,
					"AQAAAHRpAAAAAAAAdGkAAAAAAAABAAAAYQ",
					"AQAAAAAAAAABAAAAdWkAAAAAAAB1aQAAAAAAAAAAAAAAAPC/"
				],
				[
					102,
					1,
					"insert",
					{
						"characters": "at"
					},
					"AgAAAHRpAAAAAAAAdWkAAAAAAAAAAAAAdWkAAAAAAAB2aQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAdGkAAAAAAAB0aQAAAAAAAAAAAAAAAPC/"
				],
				[
					103,
					3,
					"left_delete",
					null,
					"AwAAAHVpAAAAAAAAdWkAAAAAAAABAAAAdHRpAAAAAAAAdGkAAAAAAAABAAAAYXNpAAAAAAAAc2kAAAAAAAABAAAAdA",
					"AQAAAAAAAAABAAAAdmkAAAAAAAB2aQAAAAAAAAAAAAAAAPC/"
				],
				[
					104,
					1,
					"insert",
					{
						"characters": "atch"
					},
					"BAAAAHNpAAAAAAAAdGkAAAAAAAAAAAAAdGkAAAAAAAB1aQAAAAAAAAAAAAB1aQAAAAAAAHZpAAAAAAAAAAAAAHZpAAAAAAAAd2kAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAc2kAAAAAAABzaQAAAAAAAAAAAAAAAPC/"
				],
				[
					105,
					1,
					"insert_snippet",
					{
						"contents": "($0)"
					},
					"AQAAAHdpAAAAAAAAeWkAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAd2kAAAAAAAB3aQAAAAAAAAAAAAAAAPC/"
				],
				[
					106,
					1,
					"insert",
					{
						"characters": "cv::Exception"
					},
					"DQAAAHhpAAAAAAAAeWkAAAAAAAAAAAAAeWkAAAAAAAB6aQAAAAAAAAAAAAB6aQAAAAAAAHtpAAAAAAAAAAAAAHtpAAAAAAAAfGkAAAAAAAAAAAAAfGkAAAAAAAB9aQAAAAAAAAAAAAB9aQAAAAAAAH5pAAAAAAAAAAAAAH5pAAAAAAAAf2kAAAAAAAAAAAAAf2kAAAAAAACAaQAAAAAAAAAAAACAaQAAAAAAAIFpAAAAAAAAAAAAAIFpAAAAAAAAgmkAAAAAAAAAAAAAgmkAAAAAAACDaQAAAAAAAAAAAACDaQAAAAAAAIRpAAAAAAAAAAAAAIRpAAAAAAAAhWkAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAeGkAAAAAAAB4aQAAAAAAAAAAAAAAAPC/"
				],
				[
					108,
					1,
					"left_delete",
					null,
					"AQAAAIVpAAAAAAAAhWkAAAAAAAABAAAAKQ",
					"AQAAAAAAAAABAAAAhmkAAAAAAACGaQAAAAAAAAAAAAAAAPC/"
				],
				[
					109,
					1,
					"insert",
					{
						"characters": " "
					},
					"AQAAAIVpAAAAAAAAhmkAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAhWkAAAAAAACFaQAAAAAAAAAAAAAAAPC/"
				],
				[
					110,
					1,
					"left_delete",
					null,
					"AQAAAIVpAAAAAAAAhWkAAAAAAAABAAAAIA",
					"AQAAAAAAAAABAAAAhmkAAAAAAACGaQAAAAAAAAAAAAAAAPC/"
				],
				[
					111,
					1,
					"insert",
					{
						"characters": "&"
					},
					"AQAAAIVpAAAAAAAAhmkAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAhWkAAAAAAACFaQAAAAAAAAAAAAAAAPC/"
				],
				[
					112,
					1,
					"insert",
					{
						"characters": " ex"
					},
					"AwAAAIZpAAAAAAAAh2kAAAAAAAAAAAAAh2kAAAAAAACIaQAAAAAAAAAAAACIaQAAAAAAAIlpAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAhmkAAAAAAACGaQAAAAAAAAAAAAAAAPC/"
				],
				[
					113,
					1,
					"left_delete",
					null,
					"AQAAAIhpAAAAAAAAiGkAAAAAAAABAAAAeA",
					"AQAAAAAAAAABAAAAiWkAAAAAAACJaQAAAAAAAAAAAAAAAPC/"
				],
				[
					114,
					1,
					"insert",
					{
						"characters": ")"
					},
					"AQAAAIhpAAAAAAAAiWkAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAiGkAAAAAAACIaQAAAAAAAAAAAAAAAPC/"
				],
				[
					115,
					1,
					"insert",
					{
						"characters": " "
					},
					"AQAAAIlpAAAAAAAAimkAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAiWkAAAAAAACJaQAAAAAAAAAAAAAAAPC/"
				],
				[
					116,
					1,
					"wrap_block",
					{
						"begin": "{",
						"end": "}"
					},
					"AgAAAIppAAAAAAAAi2kAAAAAAAAAAAAAo2kAAAAAAAClaQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAimkAAAAAAACKaQAAAAAAAAAAAAAAAPC/"
				],
				[
					117,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"AgAAAItpAAAAAAAAjGkAAAAAAAAAAAAAjGkAAAAAAACOaQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAi2kAAAAAAACLaQAAAAAAAAAAAAAAAPC/"
				],
				[
					120,
					1,
					"insert",
					{
						"characters": "const"
					},
					"BgAAAHhpAAAAAAAAeWkAAAAAAAAAAAAAjWkAAAAAAACNaQAAAAAAAAIAAAAgIHlpAAAAAAAAemkAAAAAAAAAAAAAemkAAAAAAAB7aQAAAAAAAAAAAAB7aQAAAAAAAHxpAAAAAAAAAAAAAHxpAAAAAAAAfWkAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAeGkAAAAAAAB4aQAAAAAAAAAAAAAAAPC/"
				],
				[
					123,
					1,
					"insert",
					{
						"characters": " "
					},
					"AQAAAH1pAAAAAAAAfmkAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAfWkAAAAAAAB9aQAAAAAAAAAAAAAAAF5A"
				],
				[
					126,
					1,
					"cut",
					null,
					"AQAAAKppAAAAAAAAqmkAAAAAAAABAAAAfQ",
					"AQAAAAAAAAABAAAAq2kAAAAAAACqaQAAAAAAAAAAAAAAAAAA"
				],
				[
					128,
					1,
					"paste",
					null,
					"AQAAAJJpAAAAAAAAk2kAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAkmkAAAAAAACSaQAAAAAAAAAAAAAAAAAA"
				],
				[
					131,
					1,
					"insert",
					{
						"characters": "\n\n"
					},
					"BQAAAJFpAAAAAAAAkmkAAAAAAAAAAAAAkmkAAAAAAACUaQAAAAAAAAAAAACUaQAAAAAAAJVpAAAAAAAAAAAAAJVpAAAAAAAAl2kAAAAAAAAAAAAAkmkAAAAAAACSaQAAAAAAAAIAAAAgIA",
					"AQAAAAAAAAABAAAAkWkAAAAAAACRaQAAAAAAAP///////+9/"
				],
				[
					132,
					1,
					"insert",
					{
						"characters": "return"
					},
					"BgAAAJVpAAAAAAAAlmkAAAAAAAAAAAAAlmkAAAAAAACXaQAAAAAAAAAAAACXaQAAAAAAAJhpAAAAAAAAAAAAAJhpAAAAAAAAmWkAAAAAAAAAAAAAmWkAAAAAAACaaQAAAAAAAAAAAACaaQAAAAAAAJtpAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAlWkAAAAAAACVaQAAAAAAAAAAAAAAAPC/"
				],
				[
					133,
					1,
					"insert",
					{
						"characters": " JS_ThrowInte"
					},
					"DQAAAJtpAAAAAAAAnGkAAAAAAAAAAAAAnGkAAAAAAACdaQAAAAAAAAAAAACdaQAAAAAAAJ5pAAAAAAAAAAAAAJ5pAAAAAAAAn2kAAAAAAAAAAAAAn2kAAAAAAACgaQAAAAAAAAAAAACgaQAAAAAAAKFpAAAAAAAAAAAAAKFpAAAAAAAAomkAAAAAAAAAAAAAomkAAAAAAACjaQAAAAAAAAAAAACjaQAAAAAAAKRpAAAAAAAAAAAAAKRpAAAAAAAApWkAAAAAAAAAAAAApWkAAAAAAACmaQAAAAAAAAAAAACmaQAAAAAAAKdpAAAAAAAAAAAAAKdpAAAAAAAAqGkAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAm2kAAAAAAACbaQAAAAAAAAAAAAAAAPC/"
				],
				[
					134,
					1,
					"insert",
					{
						"characters": "rnalError"
					},
					"CQAAAKhpAAAAAAAAqWkAAAAAAAAAAAAAqWkAAAAAAACqaQAAAAAAAAAAAACqaQAAAAAAAKtpAAAAAAAAAAAAAKtpAAAAAAAArGkAAAAAAAAAAAAArGkAAAAAAACtaQAAAAAAAAAAAACtaQAAAAAAAK5pAAAAAAAAAAAAAK5pAAAAAAAAr2kAAAAAAAAAAAAAr2kAAAAAAACwaQAAAAAAAAAAAACwaQAAAAAAALFpAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAqGkAAAAAAACoaQAAAAAAAAAAAAAAAPC/"
				],
				[
					135,
					1,
					"insert_snippet",
					{
						"contents": "($0)"
					},
					"AQAAALFpAAAAAAAAs2kAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAsWkAAAAAAACxaQAAAAAAAAAAAAAAAPC/"
				],
				[
					136,
					1,
					"insert",
					{
						"characters": "ctx,"
					},
					"BAAAALJpAAAAAAAAs2kAAAAAAAAAAAAAs2kAAAAAAAC0aQAAAAAAAAAAAAC0aQAAAAAAALVpAAAAAAAAAAAAALVpAAAAAAAAtmkAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAsmkAAAAAAACyaQAAAAAAAAAAAAAAAPC/"
				],
				[
					137,
					1,
					"insert",
					{
						"characters": " "
					},
					"AQAAALZpAAAAAAAAt2kAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAtmkAAAAAAAC2aQAAAAAAAAAAAAAAAPC/"
				],
				[
					138,
					1,
					"insert_snippet",
					{
						"contents": "\"$0\""
					},
					"AQAAALdpAAAAAAAAuWkAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAt2kAAAAAAAC3aQAAAAAAAAAAAAAAAPC/"
				],
				[
					139,
					1,
					"insert",
					{
						"characters": "cv::Exception"
					},
					"DQAAALhpAAAAAAAAuWkAAAAAAAAAAAAAuWkAAAAAAAC6aQAAAAAAAAAAAAC6aQAAAAAAALtpAAAAAAAAAAAAALtpAAAAAAAAvGkAAAAAAAAAAAAAvGkAAAAAAAC9aQAAAAAAAAAAAAC9aQAAAAAAAL5pAAAAAAAAAAAAAL5pAAAAAAAAv2kAAAAAAAAAAAAAv2kAAAAAAADAaQAAAAAAAAAAAADAaQAAAAAAAMFpAAAAAAAAAAAAAMFpAAAAAAAAwmkAAAAAAAAAAAAAwmkAAAAAAADDaQAAAAAAAAAAAADDaQAAAAAAAMRpAAAAAAAAAAAAAMRpAAAAAAAAxWkAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAuGkAAAAAAAC4aQAAAAAAAAAAAAAAAPC/"
				],
				[
					140,
					1,
					"insert",
					{
						"characters": " what='"
					},
					"BwAAAMVpAAAAAAAAxmkAAAAAAAAAAAAAxmkAAAAAAADHaQAAAAAAAAAAAADHaQAAAAAAAMhpAAAAAAAAAAAAAMhpAAAAAAAAyWkAAAAAAAAAAAAAyWkAAAAAAADKaQAAAAAAAAAAAADKaQAAAAAAAMtpAAAAAAAAAAAAAMtpAAAAAAAAzGkAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAxWkAAAAAAADFaQAAAAAAAAAAAAAAAPC/"
				],
				[
					141,
					1,
					"insert",
					{
						"characters": "%s'"
					},
					"AwAAAMxpAAAAAAAAzWkAAAAAAAAAAAAAzWkAAAAAAADOaQAAAAAAAAAAAADOaQAAAAAAAM9pAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAzGkAAAAAAADMaQAAAAAAAAAAAAAAAPC/"
				],
				[
					143,
					1,
					"insert",
					{
						"characters": ","
					},
					"AQAAANBpAAAAAAAA0WkAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA0GkAAAAAAADQaQAAAAAAAAAAAAAAAPC/"
				],
				[
					144,
					1,
					"insert",
					{
						"characters": " "
					},
					"AQAAANFpAAAAAAAA0mkAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA0WkAAAAAAADRaQAAAAAAAAAAAAAAAPC/"
				],
				[
					145,
					1,
					"paste",
					null,
					"AQAAANJpAAAAAAAA1mkAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA0mkAAAAAAADSaQAAAAAAAAAAAAAAAPC/"
				],
				[
					146,
					4,
					"left_delete",
					null,
					"BAAAANVpAAAAAAAA1WkAAAAAAAABAAAAdNRpAAAAAAAA1GkAAAAAAAABAAAAYdNpAAAAAAAA02kAAAAAAAABAAAAaNJpAAAAAAAA0mkAAAAAAAABAAAAdw",
					"AQAAAAAAAAABAAAA1mkAAAAAAADWaQAAAAAAAAAAAAAAAPC/"
				],
				[
					147,
					1,
					"insert",
					{
						"characters": "e.what"
					},
					"BgAAANJpAAAAAAAA02kAAAAAAAAAAAAA02kAAAAAAADUaQAAAAAAAAAAAADUaQAAAAAAANVpAAAAAAAAAAAAANVpAAAAAAAA1mkAAAAAAAAAAAAA1mkAAAAAAADXaQAAAAAAAAAAAADXaQAAAAAAANhpAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA0mkAAAAAAADSaQAAAAAAAAAAAAAAAPC/"
				],
				[
					148,
					1,
					"insert_snippet",
					{
						"contents": "($0)"
					},
					"AQAAANhpAAAAAAAA2mkAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA2GkAAAAAAADYaQAAAAAAAAAAAAAAAPC/"
				],
				[
					150,
					1,
					"insert",
					{
						"characters": ";"
					},
					"AQAAANtpAAAAAAAA3GkAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA22kAAAAAAADbaQAAAAAAAAAAAAAAAPC/"
				],
				[
					152,
					1,
					"left_delete",
					null,
					"AQAAAJFpAAAAAAAAkWkAAAAAAAABAAAACg",
					"AQAAAAAAAAABAAAAkmkAAAAAAACSaQAAAAAAAAAAAAAA0IZA"
				],
				[
					153,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAACLtwAAI2luY2x1ZGUgImpzYmluZGluZ3MuaHBwIgojaW5jbHVkZSAianNfY3YuaHBwIgojaW5jbHVkZSAianNfbWF0LmhwcCIKI2luY2x1ZGUgImpzX3NpemUuaHBwIgojaW5jbHVkZSAianNfcG9pbnQuaHBwIgojaW5jbHVkZSAianNfcmVjdC5ocHAiCiNpbmNsdWRlICJqc19hcnJheS5ocHAiCiNpbmNsdWRlICJqc190eXBlZF9hcnJheS5ocHAiCiNpbmNsdWRlICJqc19hbGxvYy5ocHAiCiNpbmNsdWRlICJqc191bWF0LmhwcCIKI2luY2x1ZGUgImdlb21ldHJ5LmhwcCIKI2luY2x1ZGUgInV0aWwuaHBwIgojaW5jbHVkZSAiLi4vcXVpY2tqcy9jdXRpbHMuaCIKI2luY2x1ZGUgPGxpc3Q+CiNpbmNsdWRlIDxtYXA+CiNpbmNsdWRlIDxmc3RyZWFtPgoKZW51bSB7CiAgUFJPUF9DT0xTID0gMCwKICBQUk9QX1JPV1MsCiAgUFJPUF9DSEFOTkVMUywKICBQUk9QX1RZUEUsCiAgUFJPUF9ERVBUSCwKICBQUk9QX0VNUFRZLAogIFBST1BfVE9UQUwsCiAgUFJPUF9TSVpFLAogIFBST1BfQ09OVElOVU9VUywKICBQUk9QX1NVQk1BVFJJWCwKICBQUk9QX1NURVAsCiAgUFJPUF9FTEVNU0laRSwKICBQUk9QX0VMRU1TSVpFMQp9OwplbnVtIHsKICBNRVRIT0RfQ09MID0gMCwKICBNRVRIT0RfUk9XLAogIE1FVEhPRF9DT0xfUkFOR0UsCiAgTUVUSE9EX1JPV19SQU5HRSwKICBNRVRIT0RfQ0xPTkUsCiAgTUVUSE9EX1JPSSwKICBNRVRIT0RfUkVMRUFTRSwKICBNRVRIT0RfRFVQLAogIE1FVEhPRF9DTEVBUiwKICBNRVRIT0RfUkVTRVQsCiAgTUVUSE9EX1JFU0laRSwKICBNRVRIT0RfU1RFUDEsCiAgTUVUSE9EX0xPQ0FURV9ST0ksCiAgTUVUSE9EX1BUUgp9OwplbnVtIHsgTUFUX0VYUFJfQU5EID0gMCwgTUFUX0VYUFJfT1IsIE1BVF9FWFBSX1hPUiwgTUFUX0VYUFJfTVVMIH07CmVudW0geyBNQVRfSVRFUkFUT1JfS0VZUywgTUFUX0lURVJBVE9SX1ZBTFVFUywgTUFUX0lURVJBVE9SX0VOVFJJRVMgfTsKZXh0ZXJuICJDIiB7CkpTVmFsdWUgbWF0X3Byb3RvID0gSlNfVU5ERUZJTkVELCBtYXRfY2xhc3MgPSBKU19VTkRFRklORUQsIG1hdF9pdGVyYXRvcl9wcm90byA9IEpTX1VOREVGSU5FRCwKICAgICAgICBtYXRfaXRlcmF0b3JfY2xhc3MgPSBKU19VTkRFRklORUQ7CkpTQ2xhc3NJRCBqc19tYXRfY2xhc3NfaWQgPSAwLCBqc19tYXRfaXRlcmF0b3JfY2xhc3NfaWQgPSAwOwoKSlNWYWx1ZSB1bWF0X3Byb3RvID0gSlNfVU5ERUZJTkVELCB1bWF0X2NsYXNzID0gSlNfVU5ERUZJTkVEOwpKU0NsYXNzSUQganNfdW1hdF9jbGFzc19pZCA9IDA7Cgp0eXBlZGVmIHN0cnVjdCBKU01hdEl0ZXJhdG9yRGF0YSB7CiAgSlNWYWx1ZSBvYmosIGJ1ZjsKICB1aW50MzJfdCByb3csIGNvbDsKICBpbnQgbWFnaWM7CiAgVHlwZWRBcnJheVR5cGUgdHlwZTsKfSBKU01hdEl0ZXJhdG9yRGF0YTsKCnN0YXRpYyB2b2lkCmpzX21hdF9mcmVlX2Z1bmMoSlNSdW50aW1lKiBydCwgdm9pZCogb3BhcXVlLCB2b2lkKiBwdHIpIHsKICBzdGF0aWNfY2FzdDxKU01hdERhdGEqPihvcGFxdWUpLT5yZWxlYXNlKCk7Cn0KfQoKc3RhdGljIHN0ZDo6dmVjdG9yPEpTTWF0RGF0YSo+IG1hdF9saXN0OwpzdGF0aWMgc3RkOjpsaXN0PEpTTWF0RGF0YSo+IG1hdF9mcmVlZDsKCnN0YXRpYyBpbmxpbmUgc3RkOjp2ZWN0b3I8aW50Pgpqc19tYXRfc2l6ZXMoY29uc3QgSlNNYXREYXRhJiBtYXQpIHsKICBjb25zdCBjdjo6TWF0U2l6ZSBzaXplKG1hdC5zaXplKTsKICBzdGQ6OnZlY3RvcjxpbnQ+IHNpemVzOwogIGlmKG1hdC5kaW1zID09IDIpIHsKICAgIHNpemVzLnB1c2hfYmFjayhtYXQucm93cyk7CiAgICBzaXplcy5wdXNoX2JhY2sobWF0LmNvbHMpOwogIH0gZWxzZSB7CiAgICBzdGQ6OmNvcHkoJnNpemVbMF0sICZzaXplW3NpemUuZGltcygpXSwgc3RkOjpiYWNrX2luc2VydGVyKHNpemVzKSk7CiAgfQogIHJldHVybiBzaXplczsKfQoKc3RhdGljIGlubGluZSBzdGQ6OnZlY3RvcjxzdGQ6OnN0cmluZz4KanNfbWF0X2RpbWVuc2lvbnMoY29uc3QgSlNNYXREYXRhJiBtYXQpIHsKICBzdGQ6OnZlY3RvcjxpbnQ+IHNpemVzID0ganNfbWF0X3NpemVzKG1hdCk7CiAgc3RkOjp2ZWN0b3I8c3RkOjpzdHJpbmc+IGRpbWVuc2lvbnM7CgogIHN0ZDo6dHJhbnNmb3JtKHNpemVzLmNiZWdpbigpLAogICAgICAgICAgICAgICAgIHNpemVzLmNlbmQoKSwKICAgICAgICAgICAgICAgICBzdGQ6OmJhY2tfaW5zZXJ0ZXIoZGltZW5zaW9ucyksCiAgICAgICAgICAgICAgICAgc3RhdGljX2Nhc3Q8c3RkOjpzdHJpbmcgKCopKGludCk+KCZzdGQ6OnRvX3N0cmluZykpOwogIHJldHVybiBkaW1lbnNpb25zOwp9CgpzdGF0aWMgaW5saW5lIEpTTWF0RGF0YSoKanNfbWF0X3RyYWNrKEpTQ29udGV4dCogY3R4LCBKU01hdERhdGEqIHMpIHsKICBzdGQ6OnZlY3Rvcjxjdjo6TWF0Kj4gZGVhbGxvY2F0ZTsKCiAgZm9yKDs7KSB7CiAgICBhdXRvIGl0MiA9IHN0ZDo6ZmluZChtYXRfZnJlZWQuY2JlZ2luKCksIG1hdF9mcmVlZC5jZW5kKCksIHMpOwogICAgaWYoaXQyICE9IG1hdF9mcmVlZC5jZW5kKCkpIHsKICAgICAgZGVhbGxvY2F0ZS5wdXNoX2JhY2socyk7CgogICAgICAvLyBzdGQ6OmNlcnIgPDwgImFsbG9jYXRlZCBAIiA8PCBzdGF0aWNfY2FzdDx2b2lkKj4ocykgPDwgIiB3aGljaCBpcyBpbiBmcmVlIGxpc3QiIDw8CiAgICAgIC8vIHN0ZDo6ZW5kbDsKCiAgICAgIC8vIG1hdF9mcmVlZC5lcmFzZShpdDIpOwogICAgICBzID0ganNfYWxsb2NhdGU8Y3Y6Ok1hdD4oY3R4KTsKICAgICAgbWVtY3B5KHMsIGRlYWxsb2NhdGVbZGVhbGxvY2F0ZS5zaXplKCkgLSAxXSwgc2l6ZW9mKEpTTWF0RGF0YSkpOwoKICAgIH0gZWxzZSB7CiAgICAgIGJyZWFrOwogICAgfQogIH0KCiAgbWF0X2xpc3QucHVzaF9iYWNrKHMpOwoKICBmb3IoY29uc3QgYXV0byYgcHRyIDogZGVhbGxvY2F0ZSkganNfZGVhbGxvY2F0ZShjdHgsIHB0cik7CiAgcmV0dXJuIHM7Cn0KClZJU0lCTEUgSlNWYWx1ZQpqc19tYXRfbmV3KEpTQ29udGV4dCogY3R4LCB1aW50MzJfdCByb3dzLCB1aW50MzJfdCBjb2xzLCBpbnQgdHlwZSkgewogIEpTVmFsdWUgcmV0OwogIEpTTWF0RGF0YSogczsKICBpZihKU19Jc1VuZGVmaW5lZChtYXRfcHJvdG8pKQogICAganNfbWF0X2luaXQoY3R4LCBOVUxMKTsKICByZXQgPSBKU19OZXdPYmplY3RQcm90b0NsYXNzKGN0eCwgbWF0X3Byb3RvLCBqc19tYXRfY2xhc3NfaWQpOwogIHMgPSBqc19tYXRfdHJhY2soY3R4LCBqc19hbGxvY2F0ZTxjdjo6TWF0PihjdHgpKTsKICBpZihjb2xzIHx8IHJvd3MgfHwgdHlwZSkgewogICAgbmV3KHMpIGN2OjpNYXQocm93cywgY29scywgdHlwZSk7CiAgfSBlbHNlIHsKICAgIG5ldyhzKSBjdjo6TWF0KCk7CiAgfQojaWZkZWYgREVCVUdfTUFUCiAgc3RkOjpjZXJyIDw8ICgoY29scyA+IDAgfHwgcm93cyA+IDApID8gImpzX21hdF9uZXcgKGgsdykiIDogImpzX21hdF9uZXcgICAgICAiKTsKICBqc19tYXRfZHVtcChzKTsKICBzdGQ6OmNlcnIgPDwgc3RkOjplbmRsOwojZW5kaWYKICBKU19TZXRPcGFxdWUocmV0LCBzKTsKICByZXR1cm4gcmV0Owp9CgpWSVNJQkxFIEpTVmFsdWUKanNfbWF0X3dyYXAoSlNDb250ZXh0KiBjdHgsIGNvbnN0IGN2OjpNYXQmIG1hdCkgewogIEpTVmFsdWUgcmV0OwogIEpTTWF0RGF0YSogczsKICByZXQgPSBKU19OZXdPYmplY3RQcm90b0NsYXNzKGN0eCwgbWF0X3Byb3RvLCBqc19tYXRfY2xhc3NfaWQpOwoKICBzID0ganNfbWF0X3RyYWNrKGN0eCwganNfYWxsb2NhdGU8Y3Y6Ok1hdD4oY3R4KSk7CiAgbmV3KHMpIGN2OjpNYXQoKTsKICAqcyA9IG1hdDsKI2lmZGVmIERFQlVHX01BVAogIHN0ZDo6Y2VyciA8PCAianNfbWF0X3dyYXAgICAgICI7CiAgYXV0byBwb3NMaXN0ID0gc3RkOjpmaW5kKG1hdF9saXN0LmNiZWdpbigpLCBtYXRfbGlzdC5jZW5kKCksIGNvbnN0X2Nhc3Q8SlNNYXREYXRhKj4oJm1hdCkpOwogIGJvb2wgaW5MaXN0OwogIGlmKChpbkxpc3QgPSBwb3NMaXN0ICE9IG1hdF9saXN0LmNlbmQoKSkpIHsKICAgIHN0ZDo6Y2VyciA8PCAiYXJnWyIgPDwgKHBvc0xpc3QgLSBtYXRfbGlzdC5jYmVnaW4oKSkgPDwgIl09IiA8PCBzdGF0aWNfY2FzdDxjb25zdCB2b2lkKj4oJm1hdCk7CiAgICBzdGQ6OmNlcnIgPDwgIiwgaW5MaXN0KGFyZyk9IiA8PCAoaW5MaXN0ID8gInRydWUiIDogImZhbHNlIik7CiAgfSBlbHNlIHsKICAgIHN0ZDo6Y2VyciA8PCAiYXJnPSIgPDwgc3RhdGljX2Nhc3Q8Y29uc3Qgdm9pZCo+KCZtYXQpOwogIH0KICBqc19tYXRfZHVtcChzKTsKICBzdGQ6OmNlcnIgPDwgc3RkOjplbmRsOwojZW5kaWYKCiAgSlNfU2V0T3BhcXVlKHJldCwgcyk7CiAgcmV0dXJuIHJldDsKfQoKI2lmZGVmIERFQlVHX01BVApzdGF0aWMgaW5saW5lIHN0ZDo6bWFwPHZvaWQqLCBzdGQ6OnZlY3RvcjxKU01hdERhdGEqPj4KanNfbWF0X2RhdGEodm9pZCogZGF0YSA9IG51bGxwdHIpIHsKICBzdGQ6Om1hcDx2b2lkKiwgc3RkOjp2ZWN0b3I8SlNNYXREYXRhKj4+IHJldDsKICBmb3IoYXV0byBtYXQgOiBtYXRfbGlzdCkgewogICAgY29uc3QgYXV0byB1ID0gbWF0LT51OwogICAgaWYodSAhPSBudWxscHRyICYmIChkYXRhID09IG51bGxwdHIgfHwgdSA9PSBkYXRhKSkgewogICAgICB2b2lkKiBkYXRhID0gdTsKICAgICAgaWYocmV0LmZpbmQoZGF0YSkgPT0gcmV0LmVuZCgpKSB7CiAgICAgICAgc3RkOjp2ZWN0b3I8SlNNYXREYXRhKj4gdnttYXR9OwogICAgICAgIHJldC5pbnNlcnQoe2RhdGEsIHZ9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXRbZGF0YV0ucHVzaF9iYWNrKG1hdCk7CiAgICAgIH0KICAgIH0KICB9CiAgcmV0dXJuIHJldDsKfQoKc3RhdGljIGlubGluZSB2b2lkCmpzX21hdF9wcmludF9kYXRhKGNvbnN0IHN0ZDo6bWFwPHZvaWQqLCBzdGQ6OnZlY3RvcjxKU01hdERhdGEqPj4mIGRhdGEsIHNpemVfdCBtaW5TaXplID0gMSkgewoKICBmb3IoY29uc3QgYXV0byYgW2tleSwgdmFsdWVdIDogZGF0YSkgewoKICAgIGlmKHZhbHVlLnNpemUoKSA+PSBtaW5TaXplKSB7CiAgICAgIHN0ZDo6Y2VyciA8PCAiZGF0YSBAIiA8PCBrZXkgPDwgIiA9IjsKCiAgICAgIGZvcihjb25zdCBhdXRvJiBwdHIgOiB2YWx1ZSkgewogICAgICAgIHNpemVfdCByZWZjb3VudCA9IHB0ci0+dSA/IHB0ci0+dS0+cmVmY291bnQgOiAwOwogICAgICAgIHN0ZDo6Y2VyciA8PCAiIG1hdCBAIiA8PCBzdGF0aWNfY2FzdDx2b2lkKj4ocHRyKTsKICAgICAgICBpZihyZWZjb3VudCA+IDEpCiAgICAgICAgICBzdGQ6OmNlcnIgPDwgIiAocmVmY291bnQ9IiA8PCByZWZjb3VudCA8PCAiKSI7CiAgICAgIH0KICAgICAgc3RkOjpjZXJyIDw8IHN0ZDo6ZW5kbDsKICAgIH0KICB9Cn0KCnN0YXRpYyBpbmxpbmUgdm9pZApqc19tYXRfZHVtcChKU01hdERhdGEqIGNvbnN0IHMpIHsKICBhdXRvIHBvc0xpc3QgPSBzdGQ6OmZpbmQobWF0X2xpc3QuY2JlZ2luKCksIG1hdF9saXN0LmNlbmQoKSwgcyk7CiAgYm9vbCBpbkxpc3QgPSBwb3NMaXN0ICE9IG1hdF9saXN0LmNlbmQoKTsKICBib29sIGluRnJlZWQgPSBzdGQ6OmZpbmQobWF0X2ZyZWVkLmNiZWdpbigpLCBtYXRfZnJlZWQuY2VuZCgpLCBzKSAhPSBtYXRfZnJlZWQuY2VuZCgpOwogIGNvbnN0IGF1dG8gdSA9IHMtPnU7CiAgc3RkOjpjZXJyIDw8ICIgbWF0IgogICAgICAgICAgICA8PCAiWyIgPDwgKHBvc0xpc3QgLSBtYXRfbGlzdC5jYmVnaW4oKSkgPDwgIl09IiA8PCBzdGF0aWNfY2FzdDx2b2lkKj4ocyk7CgogIGlmKGluTGlzdCkKICAgIHN0ZDo6Y2VyciA8PCAiLCBpbkxpc3Q9IiA8PCAoaW5MaXN0ID8gInRydWUiIDogImZhbHNlIik7CiAgaWYoaW5GcmVlZCkKICAgIHN0ZDo6Y2VyciA8PCAiLCBpbkZyZWVkPSIgPDwgKGluRnJlZWQgPyAidHJ1ZSIgOiAiZmFsc2UiKTsKCiAgaWYocy0+cm93cyB8fCBzLT5jb2xzIHx8IHMtPmNoYW5uZWxzKCkgPiAxIHx8IHMtPmRlcHRoKCkgPiAwKSB7CiAgICBzdGQ6OmNlcnIgPDwgIiwgcm93cz0iIDw8IHMtPnJvd3M7CiAgICBzdGQ6OmNlcnIgPDwgIiwgY29scz0iIDw8IHMtPmNvbHM7CiAgICBzdGQ6OmNlcnIgPDwgIiwgY2hhbm5lbHM9IiA8PCBzLT5jaGFubmVscygpOwogICAgc3RkOjpjZXJyIDw8ICIsIGRlcHRoPSIgPDwgcy0+ZGVwdGgoKTsKICB9CgogIGlmKHUgIT0gbnVsbHB0cikgewoKICAgIC8vIGlmKHUtPnJlZmNvdW50KQogICAgc3RkOjpjZXJyIDw8ICIsIHJlZmNvdW50PSIgPDwgdS0+cmVmY291bnQ7CiAgICBpZih1LT5kYXRhKQogICAgICBzdGQ6OmNlcnIgPDwgIiwgZGF0YT0iIDw8IHN0YXRpY19jYXN0PHZvaWQqPih1LT5kYXRhKTsKICAgIGlmKHUtPnNpemUpCiAgICAgIHN0ZDo6Y2VyciA8PCAiLCBzaXplPSIgPDwgdS0+c2l6ZTsKICB9Cn0KI2VuZGlmCgpzdGF0aWMgc3RkOjpwYWlyPEpTU2l6ZURhdGE8dWludDMyX3Q+LCBpbnQ+CmpzX21hdF9wYXJhbXMoSlNDb250ZXh0KiBjdHgsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QqIGFyZ3YpIHsKICBKU1NpemVEYXRhPHVpbnQzMl90PiBzaXplOwogIGludDMyX3QgdHlwZSA9IDA7CiAgaWYoYXJnYyA+IDApIHsKICAgIGlmKGpzX3NpemVfcmVhZChjdHgsIGFyZ3ZbMF0sICZzaXplKSkgewogICAgICBhcmd2Kys7CiAgICAgIGFyZ2MtLTsKICAgIH0gZWxzZSB7CiAgICAgIEpTX1RvVWludDMyKGN0eCwgJnNpemUuaGVpZ2h0LCBhcmd2WzBdKTsKICAgICAgSlNfVG9VaW50MzIoY3R4LCAmc2l6ZS53aWR0aCwgYXJndlsxXSk7CiAgICAgIGFyZ3YgKz0gMjsKICAgICAgYXJnYyAtPSAyOwogICAgfQogICAgaWYoYXJnYyA+IDApIHsKICAgICAgaWYoIUpTX1RvSW50MzIoY3R4LCAmdHlwZSwgYXJndlswXSkpIHsKICAgICAgICBhcmd2Kys7CiAgICAgICAgYXJnYy0tOwogICAgICB9CiAgICB9CiAgfQogIHJldHVybiBzdGQ6Om1ha2VfcGFpcihzaXplLCB0eXBlKTsKfQoKc3RhdGljIEpTVmFsdWUKanNfbWF0X2N0b3IoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCBuZXdfdGFyZ2V0LCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2KSB7CgogIGNvbnN0IGF1dG8mIFtzaXplLCB0eXBlXSA9IGpzX21hdF9wYXJhbXMoY3R4LCBhcmdjLCBhcmd2KTsKCiAgcmV0dXJuIGpzX21hdF9uZXcoY3R4LCBzaXplLmhlaWdodCwgc2l6ZS53aWR0aCwgdHlwZSk7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX21hdF9mdW5jcyhKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2LCBpbnQgbWFnaWMpIHsKICBKU1ZhbHVlIHJldCA9IEpTX1VOREVGSU5FRDsKICBpbnQ2NF90IGkgPSAtMSwgaTIgPSAtMTsKICBKU1BvaW50RGF0YTxkb3VibGU+IHB0OwogIEpTTWF0RGF0YSogbSA9IGpzX21hdF9kYXRhKGN0eCwgdGhpc192YWwpOwoKICBpZihhcmdjID4gMCkgewogICAgSlNfVG9JbnQ2NChjdHgsICZpLCBhcmd2WzBdKTsKICAgIHB0ID0ganNfcG9pbnRfZ2V0KGN0eCwgYXJndlswXSk7CiAgICBpZihhcmdjID4gMSkgewogICAgICBKU19Ub0ludDY0KGN0eCwgJmkyLCBhcmd2WzFdKTsKICAgIH0KICB9CgogIHN3aXRjaChtYWdpYykgewogICAgY2FzZSBNRVRIT0RfQ09MOiB7CiAgICAgIHJldCA9IGpzX21hdF93cmFwKGN0eCwgbS0+Y29sKGkpKTsKICAgICAgYnJlYWs7CiAgICB9CiAgICBjYXNlIE1FVEhPRF9ST1c6IHsKICAgICAgcmV0ID0ganNfbWF0X3dyYXAoY3R4LCBtLT5yb3coaSkpOwogICAgICBicmVhazsKICAgIH0KICAgIGNhc2UgTUVUSE9EX0NPTF9SQU5HRTogewogICAgICByZXQgPSBqc19tYXRfd3JhcChjdHgsIG0tPmNvbFJhbmdlKGksIGkyKSk7CiAgICAgIGJyZWFrOwogICAgfQogICAgY2FzZSBNRVRIT0RfUk9XX1JBTkdFOiB7CiAgICAgIHJldCA9IGpzX21hdF93cmFwKGN0eCwgbS0+cm93UmFuZ2UoaSwgaTIpKTsKICAgICAgYnJlYWs7CiAgICB9CiAgICBjYXNlIE1FVEhPRF9DTE9ORTogewogICAgICByZXQgPSBqc19tYXRfd3JhcChjdHgsIG0tPmNsb25lKCkpOwogICAgICBicmVhazsKICAgIH0KICAgIGNhc2UgTUVUSE9EX1JPSTogewogICAgICBKU1JlY3REYXRhPGRvdWJsZT4gcmVjdCA9IHswLCAwLCAwLCAwfTsKCiAgICAgIGlmKGFyZ2MgPiAwKQogICAgICAgIHJlY3QgPSBqc19yZWN0X2dldChjdHgsIGFyZ3ZbMF0pOwoKICAgICAgcmV0ID0ganNfbWF0X3dyYXAoY3R4LCAoKm0pKHJlY3QpKTsKICAgICAgYnJlYWs7CiAgICB9CiAgICBjYXNlIE1FVEhPRF9SRUxFQVNFOiB7CiAgICAgIG0tPnJlbGVhc2UoKTsKICAgICAgYnJlYWs7CiAgICB9CiAgICBjYXNlIE1FVEhPRF9EVVA6IHsKICAgICAgcmV0ID0ganNfbWF0X3dyYXAoY3R4LCAqbSk7CiAgICAgIGJyZWFrOwogICAgfQogICAgY2FzZSBNRVRIT0RfQ0xFQVI6IHsKICAgICAgKm0gPSBjdjo6TWF0Ojp6ZXJvcyhtLT5yb3dzLCBtLT5jb2xzLCBtLT50eXBlKCkpOwogICAgICBicmVhazsKICAgIH0KICAgIGNhc2UgTUVUSE9EX1JFU0VUOiB7CiAgICAgICptID0gY3Y6Ok1hdCgpOwogICAgICBicmVhazsKICAgIH0KICAgIGNhc2UgTUVUSE9EX1JFU0laRTogewogICAgICB1aW50MzJfdCByb3dzID0gMDsKICAgICAgY3Y6OlNjYWxhciBjb2xvcnswLCAwLCAwLCAwfTsKCiAgICAgIEpTX1RvVWludDMyKGN0eCwgJnJvd3MsIGFyZ3ZbMF0pOwogICAgICBpZihhcmdjID4gMSkgewogICAgICAgIGpzX2NvbG9yX3JlYWQoY3R4LCBhcmd2WzFdLCAmY29sb3IpOwogICAgICAgIG0tPnJlc2l6ZShyb3dzLCBjb2xvcik7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgbS0+cmVzaXplKHJvd3MpOwogICAgICB9CiAgICAgIGJyZWFrOwogICAgfQogICAgY2FzZSBNRVRIT0RfU1RFUDE6IHsKICAgICAgaW50MzJfdCBpID0gMDsKCiAgICAgIEpTX1RvSW50MzIoY3R4LCAmaSwgYXJndlswXSk7CiAgICAgIHJldCA9IEpTX05ld0ludDY0KGN0eCwgbS0+c3RlcDEoaSkpOwogICAgICBicmVhazsKICAgIH0KICAgIGNhc2UgTUVUSE9EX0xPQ0FURV9ST0k6IHsKICAgICAgY3Y6OlNpemUgd2hvbGVTaXplOwogICAgICBjdjo6UG9pbnQgb2ZzOwogICAgICBtLT5sb2NhdGVST0kod2hvbGVTaXplLCBvZnMpOwogICAgICBqc19zaXplX3dyaXRlKGN0eCwgYXJndlswXSwgd2hvbGVTaXplKTsKICAgICAganNfcG9pbnRfd3JpdGUoY3R4LCBhcmd2WzBdLCBvZnMpOwogICAgICBicmVhazsKICAgIH0KICAgIGNhc2UgTUVUSE9EX1BUUjogewogICAgICB1aW50MzJfdCByb3cgPSAwLCBjb2wgPSAwOwogICAgICB1Y2hhciogcHRyOwogICAgICBzdGQ6Om9zdHJpbmdzdHJlYW0gb3M7CiAgICAgIGlmKGFyZ2MgPiAwKQogICAgICAgIEpTX1RvVWludDMyKGN0eCwgJnJvdywgYXJndlswXSk7CiAgICAgIGlmKGFyZ2MgPiAxKQogICAgICAgIEpTX1RvVWludDMyKGN0eCwgJmNvbCwgYXJndlsxXSk7CiAgICAgIHB0ciA9IG0tPnB0cjx1Y2hhcj4ocm93LCBjb2wpOwoKICAgICAgb3MgPDwgc3RhdGljX2Nhc3Q8dm9pZCo+KHB0cik7CgogICAgICByZXQgPSBqc192YWx1ZV9mcm9tKGN0eCwgb3Muc3RyKCkpOwogICAgICBicmVhazsKICAgIH0KICB9CgogIHJldHVybiByZXQ7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX21hdF9leHByKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QqIGFyZ3YsIGludCBtYWdpYykgewogIEpTVmFsdWUgcmV0ID0gSlNfVU5ERUZJTkVEOwogIEpTQ29sb3JEYXRhPGRvdWJsZT4gY29sb3I7CiAgZG91YmxlIHZhbHVlID0gMDsKICBKU01hdERhdGEgKmlucHV0ID0gbnVsbHB0ciwgKm91dHB1dCA9IG51bGxwdHIsICpvdGhlciA9IG51bGxwdHI7CiAgZG91YmxlIHNjYWxlID0gMS4wOwoKICBpZigoaW5wdXQgPSBqc19tYXRfZGF0YShjdHgsIHRoaXNfdmFsKSkgPT0gbnVsbHB0cikKICAgIHJldHVybiBKU19FWENFUFRJT047CgogIGlmKGFyZ2MgPCAxKQogICAgcmV0dXJuIEpTX0VYQ0VQVElPTjsKCiAgaWYoSlNfSXNOdW1iZXIoYXJndlswXSkpIHsKICAgIEpTX1RvRmxvYXQ2NChjdHgsICZ2YWx1ZSwgYXJndlswXSk7CgogIH0gZWxzZSBpZigob3RoZXIgPSBqc19tYXRfZGF0YV9ub3Rocm93KGFyZ3ZbMF0pKSA9PSBudWxscHRyKQogICAganNfY29sb3JfcmVhZChjdHgsIGFyZ3ZbMF0sICZjb2xvcik7CgogIGlmKG1hZ2ljID09IDMgJiYgYXJnYyA+IDEpIHsKICAgIEpTX1RvRmxvYXQ2NChjdHgsICZzY2FsZSwgYXJndlsxXSk7CiAgICBhcmd2Kys7CiAgICBhcmdjLS07CiAgfQoKICBpZihhcmdjID4gMSkKICAgIG91dHB1dCA9IGpzX21hdF9kYXRhKGN0eCwgYXJndlsxXSk7CgogIGlmKG91dHB1dCA9PSBudWxscHRyKQogICAgb3V0cHV0ID0gaW5wdXQ7CgogIHsKICAgIGN2OjpNYXRFeHByIGV4cHI7CiAgICBjdjo6TWF0IHRtcChpbnB1dC0+cm93cywgaW5wdXQtPmNvbHMsIGlucHV0LT50eXBlKCkpOwoKICAgIGlmKG90aGVyID09IG51bGxwdHIpIHsKICAgICAgY3Y6Ok1hdCYgbWF0ID0gKmlucHV0OwoKICAgICAgaWYobWF0LmNoYW5uZWxzKCkgPT0gMSkgewoKICAgICAgICBpZihtYXQuZGVwdGgoKSA9PSAwKSB7CiAgICAgICAgICBzd2l0Y2gobWFnaWMpIHsKICAgICAgICAgICAgY2FzZSBNQVRfRVhQUl9BTkQ6IG1hdCAmPSAodWNoYXIpdmFsdWU7IGJyZWFrOwogICAgICAgICAgICBjYXNlIE1BVF9FWFBSX09SOiBjdjo6Yml0d2lzZV9vcihtYXQsIGN2OjpTY2FsYXIodmFsdWUsIHZhbHVlLCB2YWx1ZSwgdmFsdWUpLCBtYXQpOyBicmVhazsKICAgICAgICAgICAgY2FzZSBNQVRfRVhQUl9YT1I6IG1hdCBePSAodWNoYXIpdmFsdWU7IGJyZWFrOwogICAgICAgICAgICBjYXNlIE1BVF9FWFBSX01VTDogbWF0ID0gbWF0ICogdmFsdWU7IGJyZWFrOwogICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBzd2l0Y2gobWFnaWMpIHsKICAgICAgICAgICAgY2FzZSBNQVRfRVhQUl9BTkQ6IG1hdCAmPSB2YWx1ZTsgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgTUFUX0VYUFJfT1I6IGN2OjpiaXR3aXNlX29yKG1hdCwgY3Y6OlNjYWxhcih2YWx1ZSwgdmFsdWUsIHZhbHVlLCB2YWx1ZSksIG1hdCk7IGJyZWFrOwogICAgICAgICAgICBjYXNlIE1BVF9FWFBSX1hPUjogbWF0IF49IHZhbHVlOyBicmVhazsKICAgICAgICAgICAgY2FzZSBNQVRfRVhQUl9NVUw6IG1hdCAqPSB2YWx1ZTsgYnJlYWs7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIGN2OjpTY2FsYXImIHNjYWxhciA9ICpyZWludGVycHJldF9jYXN0PGN2OjpTY2FsYXIqPigmY29sb3IpOwoKICAgICAgICAvLyBzdGQ6OmNlcnIgPDwgImpzX21hdF9leHByIGlucHV0PSIgPDwgKHZvaWQqKWlucHV0IDw8ICIgb3V0cHV0PSIgPDwgKHZvaWQqKW91dHB1dCA8PCAiIHNjYWxhcj0iIDw8CiAgICAgICAgLy8gc2NhbGFyIDw8IHN0ZDo6ZW5kbDsKCiAgICAgICAgc3dpdGNoKG1hZ2ljKSB7CiAgICAgICAgICBjYXNlIE1BVF9FWFBSX0FORDogZXhwciA9IG1hdCAmIHNjYWxhcjsgYnJlYWs7CiAgICAgICAgICBjYXNlIE1BVF9FWFBSX09SOiBleHByID0gbWF0IHwgc2NhbGFyOyBicmVhazsKICAgICAgICAgIGNhc2UgTUFUX0VYUFJfWE9SOiBleHByID0gbWF0IF4gc2NhbGFyOyBicmVhazsKICAgICAgICAgIGNhc2UgTUFUX0VYUFJfTVVMOiBleHByID0gbWF0Lm11bChzY2FsYXIsIHNjYWxlKTsgYnJlYWs7CiAgICAgICAgfQogICAgICAgIHRtcCA9IHN0YXRpY19jYXN0PGN2OjpNYXQ+KGV4cHIpOwogICAgICB9CgogICAgfSBlbHNlIHsKCiAgICAgIGlmKGlucHV0LT5yb3dzICE9IG90aGVyLT5yb3dzIHx8IGlucHV0LT5jb2xzICE9IG90aGVyLT5jb2xzKSB7CiAgICAgICAgcmV0ID0gSlNfVGhyb3dJbnRlcm5hbEVycm9yKGN0eCwgIk1hdCBkaW1lbnNpb25zIG1pc21hdGNoIik7CiAgICAgIH0gZWxzZSBpZihpbnB1dC0+dHlwZSgpICE9IG90aGVyLT50eXBlKCkpIHsKICAgICAgICByZXQgPSBKU19UaHJvd0ludGVybmFsRXJyb3IoY3R4LCAiTWF0IHR5cGUgbWlzbWF0Y2giKTsKICAgICAgfSBlbHNlIGlmKGlucHV0LT5jaGFubmVscygpICE9IG90aGVyLT5jaGFubmVscygpKSB7CiAgICAgICAgcmV0ID0gSlNfVGhyb3dJbnRlcm5hbEVycm9yKGN0eCwgIk1hdCBjaGFubmVscyBtaXNtYXRjaCIpOwogICAgICB9IGVsc2UgewoKICAgICAgICBpZihpbnB1dCA9PSBvdXRwdXQpIHsKICAgICAgICAgIHN3aXRjaChtYWdpYykgewogICAgICAgICAgICBjYXNlIE1BVF9FWFBSX0FORDogKCppbnB1dCkgJj0gKCpvdGhlcik7IGJyZWFrOwogICAgICAgICAgICBjYXNlIE1BVF9FWFBSX09SOiAoKmlucHV0KSB8PSAoKm90aGVyKTsgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgTUFUX0VYUFJfWE9SOiAoKmlucHV0KSBePSAoKm90aGVyKTsgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgTUFUX0VYUFJfTVVMOiAoKmlucHV0KSAqPSAoKm90aGVyKTsgYnJlYWs7CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHN3aXRjaChtYWdpYykgewogICAgICAgICAgICBjYXNlIE1BVF9FWFBSX0FORDogKCpvdXRwdXQpID0gKCppbnB1dCkgJiAoKm90aGVyKTsgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgTUFUX0VYUFJfT1I6ICgqb3V0cHV0KSA9ICgqaW5wdXQpIHwgKCpvdGhlcik7IGJyZWFrOwogICAgICAgICAgICBjYXNlIE1BVF9FWFBSX1hPUjogKCpvdXRwdXQpID0gKCppbnB1dCkgXiAoKm90aGVyKTsgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgTUFUX0VYUFJfTVVMOiAoKm91dHB1dCkgPSAoKmlucHV0KSAqICgqb3RoZXIpOyBicmVhazsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgIH0KICB9CgogIHJldHVybiByZXQ7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX21hdF9pbml0KEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QqIGFyZ3YsIGludCBtYWdpYykgewogIEpTVmFsdWUgcmV0ID0gSlNfVU5ERUZJTkVEOwogIEpTTWF0RGF0YSogbTsKCiAgYXV0byBbc2l6ZSwgdHlwZV0gPSBqc19tYXRfcGFyYW1zKGN0eCwgYXJnYywgYXJndik7CgogIGlmKChtID0ganNfbWF0X2RhdGEoY3R4LCB0aGlzX3ZhbCkpKSB7CiAgICBpZihzaXplLndpZHRoID09IDAgfHwgc2l6ZS5oZWlnaHQgPT0gMCkgewogICAgICBpZihtLT5yb3dzICYmIG0tPmNvbHMpIHsKICAgICAgICBzaXplLndpZHRoID0gbS0+Y29sczsKICAgICAgICBzaXplLmhlaWdodCA9IG0tPnJvd3M7CiAgICAgICAgdHlwZSA9IG0tPnR5cGUoKTsKICAgICAgfQogICAgfQogICAgcmV0ID0gSlNfRHVwVmFsdWUoY3R4LCB0aGlzX3ZhbCk7CiAgfSBlbHNlIGlmKHNpemUud2lkdGggPiAwICYmIHNpemUuaGVpZ2h0ID4gMCkgewogICAgcmV0ID0ganNfbWF0X25ldyhjdHgsIHNpemUuaGVpZ2h0LCBzaXplLndpZHRoLCB0eXBlKTsKCiAgICBtID0ganNfbWF0X2RhdGEoY3R4LCByZXQpOwogIH0gZWxzZSB7CiAgICByZXR1cm4gSlNfRVhDRVBUSU9OOwogIH0KCiAgY3Y6Ok1hdCYgbWF0ID0gKm07CgogIHN3aXRjaChtYWdpYykgewogICAgY2FzZSAwOiB7CiAgICAgIG1hdCA9IGN2OjpNYXQ6Onplcm9zKHNpemUsIHR5cGUpOwogICAgICBicmVhazsKICAgIH0KICAgIGNhc2UgMTogewogICAgICBtYXQgPSBjdjo6TWF0OjpvbmVzKHNpemUsIHR5cGUpOwogICAgICBicmVhazsKICAgIH0KICB9CgogIHJldHVybiByZXQ7Cn0KCnRlbXBsYXRlPGNsYXNzIFQ+CnZvaWQKanNfbWF0X2dldChKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCB1aW50MzJfdCByb3csIHVpbnQzMl90IGNvbCwgVCYgdmFsdWUpIHsKICBjdjo6TWF0KiBtID0ganNfbWF0X2RhdGEoY3R4LCB0aGlzX3ZhbCk7CgogIGlmKG0pCiAgICB2YWx1ZSA9ICgqbSkuYXQ8VD4ocm93LCBjb2wpOwogIGVsc2UKICAgIHZhbHVlID0gVCgpOwp9CgpzdGF0aWMgSlNWYWx1ZQpqc19tYXRfZ2V0KEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIHVpbnQzMl90IHJvdywgdWludDMyX3QgY29sKSB7CiAgSlNWYWx1ZSByZXQgPSBKU19FWENFUFRJT047CiAgY3Y6Ok1hdCogbSA9IGpzX21hdF9kYXRhKGN0eCwgdGhpc192YWwpOwoKICBpZihtKSB7CiAgICB1aW50MzJfdCBieXRlcyA9IG0tPmVsZW1TaXplKCk7CiAgICBzaXplX3QgY2hhbm5lbHMgPSBtYXRfY2hhbm5lbHMoKm0pOwogICAgc2l6ZV90IG9mZnNldCA9IG1hdF9vZmZzZXQoKm0sIHJvdywgY29sKTsKCiAgICBpZihjaGFubmVscyA9PSAxKSB7CiAgICAgIHN3aXRjaChtLT50eXBlKCkpIHsKCiAgICAgICAgY2FzZSBDVl84VUMxOiB7CiAgICAgICAgICB1aW50OF90IHZhbHVlOwogICAgICAgICAganNfbWF0X2dldChjdHgsIHRoaXNfdmFsLCByb3csIGNvbCwgdmFsdWUpOwogICAgICAgICAgcmV0ID0gSlNfTmV3VWludDMyKGN0eCwgdmFsdWUpOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQoKICAgICAgICBjYXNlIENWXzE2VUMxOiB7CiAgICAgICAgICB1aW50MTZfdCB2YWx1ZTsKICAgICAgICAgIGpzX21hdF9nZXQoY3R4LCB0aGlzX3ZhbCwgcm93LCBjb2wsIHZhbHVlKTsKICAgICAgICAgIHJldCA9IEpTX05ld1VpbnQzMihjdHgsIHZhbHVlKTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KICAgICAgICBjYXNlIENWXzMyU0MxOiB7CiAgICAgICAgICBpbnQzMl90IHZhbHVlOwogICAgICAgICAganNfbWF0X2dldChjdHgsIHRoaXNfdmFsLCByb3csIGNvbCwgdmFsdWUpOwogICAgICAgICAgcmV0ID0gSlNfTmV3SW50MzIoY3R4LCB2YWx1ZSk7CiAgICAgICAgICBicmVhazsKICAgICAgICB9CiAgICAgICAgY2FzZSBDVl8zMkZDMTogewogICAgICAgICAgZmxvYXQgdmFsdWU7CiAgICAgICAgICBqc19tYXRfZ2V0KGN0eCwgdGhpc192YWwsIHJvdywgY29sLCB2YWx1ZSk7CiAgICAgICAgICByZXQgPSBKU19OZXdGbG9hdDY0KGN0eCwgdmFsdWUpOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQogICAgICAgIGNhc2UgQ1ZfNjRGQzE6IHsKICAgICAgICAgIGRvdWJsZSB2YWx1ZTsKICAgICAgICAgIGpzX21hdF9nZXQoY3R4LCB0aGlzX3ZhbCwgcm93LCBjb2wsIHZhbHVlKTsKICAgICAgICAgIHJldCA9IEpTX05ld0Zsb2F0NjQoY3R4LCB2YWx1ZSk7CiAgICAgICAgICBicmVhazsKICAgICAgICB9CiAgICAgICAgZGVmYXVsdDogewogICAgICAgICAgcmV0ID0gSlNfVGhyb3dUeXBlRXJyb3IoY3R4LCAiSW52YWxpZCBNYXQgdHlwZSAldSIsIG0tPnR5cGUoKSk7CiAgICAgICAgICBicmVhazsKICAgICAgICB9CiAgICAgIH0KCiAgICB9IGVsc2UgewogICAgICBKU1ZhbHVlIGJ1ZmZlciA9IGpzX2FycmF5YnVmZmVyX2Zyb20oY3R4LCBiZWdpbigqbSksIGVuZCgqbSkpOwogICAgICBUeXBlZEFycmF5VHlwZSB0eXBlKCptKTsKCiAgICAgIHJldCA9IGpzX3R5cGVkYXJyYXlfbmV3KGN0eCwgYnVmZmVyLCBvZmZzZXQsIGNoYW5uZWxzLCB0eXBlKTsKICAgIH0KICAgIHJldHVybiByZXQ7CiAgfQogIHJldHVybiBKU19VTkRFRklORUQ7Cn0KCnN0YXRpYyBpbnQKanNfbWF0X2dldF93aChKU0NvbnRleHQqIGN0eCwgSlNNYXREaW1lbnNpb25zKiBzaXplLCBKU1ZhbHVlQ29uc3Qgb2JqKSB7CiAgY3Y6Ok1hdCogbSA9IGpzX21hdF9kYXRhKGN0eCwgb2JqKTsKCiAgaWYobSkgewogICAgc2l6ZS0+cm93cyA9IG0tPnJvd3M7CiAgICBzaXplLT5jb2xzID0gbS0+Y29sczsKICAgIHJldHVybiAxOwogIH0KICByZXR1cm4gMDsKfQoKc3RhdGljIEpTVmFsdWUKanNfbWF0X2F0KEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QqIGFyZ3YpIHsKICBKU01hdERhdGEqIG0gPSBqc19tYXRfZGF0YShjdHgsIHRoaXNfdmFsKTsKICBpZighbSkKICAgIHJldHVybiBKU19FWENFUFRJT047CiAgSlNQb2ludERhdGE8ZG91YmxlPiBwdDsKICBKU1ZhbHVlIHJldDsKICB1aW50MzJfdCByb3cgPSAwLCBjb2wgPSAwOwogIGlmKGpzX3BvaW50X3JlYWQoY3R4LCBhcmd2WzBdLCAmcHQpKSB7CiAgICBjb2wgPSBwdC54OwogICAgcm93ID0gcHQueTsKICB9IGVsc2UgaWYoYXJnYyA+PSAyICYmIEpTX0lzTnVtYmVyKGFyZ3ZbMF0pICYmIEpTX0lzTnVtYmVyKGFyZ3ZbMV0pKSB7CiAgICBKU19Ub1VpbnQzMihjdHgsICZyb3csIGFyZ3ZbMF0pOwogICAgSlNfVG9VaW50MzIoY3R4LCAmY29sLCBhcmd2WzFdKTsKICAgIGFyZ2MgLT0gMjsKICAgIGFyZ3YgKz0gMjsKICB9IGVsc2UgaWYoYXJnYyA+PSAxICYmIEpTX0lzTnVtYmVyKGFyZ3ZbMF0pKSB7CiAgICBKU01hdERpbWVuc2lvbnMgZGltID0ge3VpbnQzMl90KG0tPnJvd3MpLCB1aW50MzJfdChtLT5jb2xzKX07CiAgICB1aW50MzJfdCBpZHg7CgogICAgSlNfVG9VaW50MzIoY3R4LCAmaWR4LCBhcmd2WzBdKTsKICAgIHJvdyA9IGlkeCAvIGRpbS5jb2xzOwogICAgY29sID0gaWR4ICUgZGltLmNvbHM7CiAgfQogIHJldHVybiBqc19tYXRfZ2V0KGN0eCwgdGhpc192YWwsIHJvdywgY29sKTsKfQoKc3RhdGljIEpTVmFsdWUKanNfbWF0X3NldChKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2KSB7CiAgY3Y6Ok1hdCogbSA9IGpzX21hdF9kYXRhKGN0eCwgdGhpc192YWwpOwogIHVpbnQzMl90IGJ5dGVzOwogIGlmKCFtKQogICAgcmV0dXJuIEpTX0VYQ0VQVElPTjsKCiAgSlNQb2ludERhdGE8ZG91YmxlPiBwdDsKICBKU1ZhbHVlIHJldDsKICBpbnQzMl90IGNvbCA9IC0xLCByb3cgPSAtMTsKCiAgaWYoanNfcG9pbnRfcmVhZChjdHgsIGFyZ3ZbMF0sICZwdCkpIHsKICAgIGNvbCA9IHB0Lng7CiAgICByb3cgPSBwdC55OwogICAgYXJnYy0tOwogICAgYXJndisrOwogIH0gZWxzZSB7CiAgICBpZihhcmdjID49IDEpIHsKICAgICAgSlNfVG9JbnQzMihjdHgsICZyb3csIGFyZ3ZbMF0pOwogICAgICBhcmdjLS07CiAgICAgIGFyZ3YrKzsKICAgIH0KICAgIGlmKGFyZ2MgPj0gMSkgewogICAgICBKU19Ub0ludDMyKGN0eCwgJmNvbCwgYXJndlswXSk7CiAgICAgIGFyZ2MtLTsKICAgICAgYXJndisrOwogICAgfQogIH0KICBieXRlcyA9IG0tPmVsZW1TaXplKCk7CiAgaWYobS0+dHlwZSgpID09IENWXzMyRkMxKSB7CiAgICBkb3VibGUgZGF0YTsKICAgIGlmKEpTX1RvRmxvYXQ2NChjdHgsICZkYXRhLCBhcmd2WzBdKSkKICAgICAgcmV0dXJuIEpTX0VYQ0VQVElPTjsKICAgICgqbSkuYXQ8ZmxvYXQ+KHJvdywgY29sKSA9IChmbG9hdClkYXRhOwogIH0gZWxzZSBpZihieXRlcyA8PSBzaXplb2YodWludCkpIHsKICAgIHVpbnQzMl90IG1hc2sgPSAoMUxVIDw8IChieXRlcyAqIDgpKSAtIDE7CiAgICB1aW50MzJfdCBkYXRhOwogICAgaWYoSlNfVG9VaW50MzIoY3R4LCAmZGF0YSwgYXJndlswXSkpCiAgICAgIHJldHVybiBKU19FWENFUFRJT047CgogICAgaWYoYnl0ZXMgPD0gMSkgewogICAgICB1aW50OF90KiBwID0gJigqbSkuYXQ8dWludDhfdD4ocm93LCBjb2wpOwogICAgICAqcCA9ICh1aW50OF90KWRhdGEgJiBtYXNrOwogICAgfSBlbHNlIGlmKGJ5dGVzIDw9IDIpIHsKICAgICAgdWludDE2X3QqIHAgPSAmKCptKS5hdDx1aW50MTZfdD4ocm93LCBjb2wpOwogICAgICAqcCA9ICh1aW50MTZfdClkYXRhICYgbWFzazsKCiAgICB9IGVsc2UgaWYoYnl0ZXMgPD0gNCkgewogICAgICB1aW50KiBwID0gJigqbSkuYXQ8dWludD4ocm93LCBjb2wpOwogICAgICAqcCA9ICh1aW50KWRhdGEgJiBtYXNrOwogICAgfQoKICB9IGVsc2UKICAgIHJldHVybiBKU19VTkRFRklORUQ7CiAgcmV0dXJuIEpTX1VOREVGSU5FRDsKfQovKgp0ZW1wbGF0ZTxjbGFzcyBUPgp0eXBlbmFtZSBzdGQ6OmVuYWJsZV9pZjxzdGQ6OmlzX2ludGVncmFsPFQ+Ojp2YWx1ZSwgdm9pZD46OnR5cGUKanNfbWF0X3ZlY3Rvcl9nZXQoSlNDb250ZXh0KiBjdHgsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QqIGFyZ3YsIHN0ZDo6dmVjdG9yPFQ+JiBvdXRwdXQsCnN0ZDo6dmVjdG9yPGJvb2w+JiBkZWZpbmVkKSB7IG91dHB1dC5yZXNpemUoc3RhdGljX2Nhc3Q8c2l6ZV90PihhcmdjKSk7CiAgZGVmaW5lZC5yZXNpemUoc3RhdGljX2Nhc3Q8c2l6ZV90PihhcmdjKSk7CiAgZm9yKGludCBpID0gMDsgaSA8IGFyZ2M7IGkrKykgewogICAgdWludDMyX3QgdmFsID0gMDsKICAgIGJvb2wgaXNEZWYgPSBKU19Jc051bWJlcihhcmd2W2ldKSAmJiAhSlNfVG9VaW50MzIoY3R4LCAmdmFsLCBhcmd2W2ldKTsKCiAgICBvdXRwdXRbaV0gPSB2YWw7CiAgICBkZWZpbmVkW2ldID0gaXNEZWY7CiAgfQp9Cgp0ZW1wbGF0ZTxjbGFzcyBUPgp0eXBlbmFtZSBzdGQ6OmVuYWJsZV9pZjxzdGQ6OmlzX2Zsb2F0aW5nX3BvaW50PFQ+Ojp2YWx1ZSwgdm9pZD46OnR5cGUKanNfbWF0X3ZlY3Rvcl9nZXQoSlNDb250ZXh0KiBjdHgsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QqIGFyZ3YsIHN0ZDo6dmVjdG9yPFQ+JiBvdXRwdXQsCnN0ZDo6dmVjdG9yPGJvb2w+JiBkZWZpbmVkKSB7IG91dHB1dC5yZXNpemUoc3RhdGljX2Nhc3Q8c2l6ZV90PihhcmdjKSk7CiAgZGVmaW5lZC5yZXNpemUoc3RhdGljX2Nhc3Q8c2l6ZV90PihhcmdjKSk7CiAgZm9yKGludCBpID0gMDsgaSA8IGFyZ2M7IGkrKykgewogICAgZG91YmxlIHZhbCA9IDA7CiAgICBib29sIGlzRGVmID0gSlNfSXNOdW1iZXIoYXJndltpXSkgJiYgIUpTX1RvRmxvYXQ2NChjdHgsICZ2YWwsIGFyZ3ZbaV0pOwoKICAgIG91dHB1dFtpXSA9IHZhbDsKICAgIGRlZmluZWRbaV0gPSBpc0RlZjsKICB9Cn0KCnRlbXBsYXRlPGNsYXNzIFQ+CnR5cGVuYW1lIHN0ZDo6ZW5hYmxlX2lmPHN0ZDo6aXNfaW50ZWdyYWw8dHlwZW5hbWUgVDo6dmFsdWVfdHlwZT46OnZhbHVlLCB2b2lkPjo6dHlwZQpqc19tYXRfdmVjdG9yX2dldChKU0NvbnRleHQqIGN0eCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCogYXJndiwgc3RkOjp2ZWN0b3I8VD4mIG91dHB1dCwKc3RkOjp2ZWN0b3I8Ym9vbD4mIGRlZmluZWQpIHsgY29uc3Qgc2l6ZV90IGJpdHMgPSAoc2l6ZW9mKHR5cGVuYW1lIFQ6OnZhbHVlX3R5cGUpICogOCk7IGNvbnN0IHNpemVfdApuID0gVDo6Y2hhbm5lbHM7IG91dHB1dC5yZXNpemUoc3RhdGljX2Nhc3Q8c2l6ZV90PihhcmdjKSk7CiAgZGVmaW5lZC5yZXNpemUoc3RhdGljX2Nhc3Q8c2l6ZV90PihhcmdjKSk7CiAgZm9yKGludCBpID0gMDsgaSA8IGFyZ2M7IGkrKykgewogICAgZG91YmxlIHZhbCA9IDA7CiAgICBib29sIGlzRGVmID0gSlNfSXNOdW1iZXIoYXJndltpXSkgJiYgIUpTX1RvRmxvYXQ2NChjdHgsICZ2YWwsIGFyZ3ZbaV0pOwogICAgaWYoaXNEZWYpIHsKICAgICAgY29uc3QgdWludDY0X3QgbWFzayA9ICgxVSA8PCBiaXRzKSAtIDE7CiAgICAgIHVpbnQ2NF90IGl2YWwgPSB2YWw7CiAgICAgIGZvcihpbnQgaiA9IDA7IGogPCBuOyBqKyspIHsKICAgICAgICBvdXRwdXRbaV1bal0gPSBpdmFsICYgbWFzazsKICAgICAgICBpdmFsID4+PSBiaXRzOwogICAgICB9CiAgICB9CiAgICBkZWZpbmVkW2ldID0gaXNEZWY7CiAgfQp9OwoqLwovKgp0ZW1wbGF0ZTxjbGFzcyBUPgpzdGF0aWMgc3RkOjp2ZWN0b3I8VD4KanNfbWF0X3NldF92ZWN0b3IoSlNDb250ZXh0KiBjdHgsIEpTTWF0RGF0YSogbSwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCogYXJndikgewogIEpTTWF0RGltZW5zaW9ucyBkaW0gPSB7c3RhdGljX2Nhc3Q8dWludDMyX3Q+KG0tPnJvd3MpLCBzdGF0aWNfY2FzdDx1aW50MzJfdD4obS0+Y29scyl9OwogIHVpbnQzMl90IGlkeDsKICBzdGQ6OnZlY3Rvcjxib29sPiBkZWZpbmVkOwogIHN0ZDo6dmVjdG9yPFQ+IHY7CiAganNfbWF0X3ZlY3Rvcl9nZXQoY3R4LCBhcmdjLCBhcmd2LCB2LCBkZWZpbmVkKTsKCiAgZm9yKGlkeCA9IDA7IGlkeCA8IHYuc2l6ZSgpOyBpZHgrKykKICAgIGlmKGRlZmluZWRbaWR4XSkKICAgICAgbS0+YXQ8VD4oaWR4IC8gZGltLmNvbHMsIGlkeCAlIGRpbS5jb2xzKSA9IHZbaWR4XTsKICByZXR1cm4gdjsKfQoqLwpzdGF0aWMgSlNWYWx1ZQpqc19tYXRfc2V0X3RvKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QqIGFyZ3YpIHsKICBKU01hdERhdGEqIG0gPSBqc19tYXRfZGF0YShjdHgsIHRoaXNfdmFsKTsKICB1aW50MzJfdCBieXRlczsKICBzdGQ6OnZlY3Rvcjxib29sPiBkZWZpbmVkOwoKICBpZighbSkKICAgIHJldHVybiBKU19FWENFUFRJT047CgogIGlmKG0tPmNoYW5uZWxzKCkgPT0gMSkgewogICAgZG91YmxlIHZhbHVlOwogICAganNfdmFsdWVfdG8oY3R4LCBhcmd2WzBdLCB2YWx1ZSk7CiAgICBtLT5zZXRUbyhjdjo6U2NhbGFyKHZhbHVlKSk7CgogIH0gZWxzZSBpZihqc19pc19hcnJheShjdHgsIGFyZ3ZbMF0pKSB7CiAgICBjdjo6U2NhbGFyIHM7CiAgICBzaXplX3QgbiA9IGpzX2FycmF5X3RvKGN0eCwgYXJndlswXSwgcyk7CgogICAgLy8gc3RkOjpjZXJyIDw8ICJTY2FsYXIgWyAiIDw8IHNbMF0gPDwgIiwgIiA8PCBzWzFdIDw8ICIsICIgPDwgc1syXSA8PCAiLCAiIDw8IHNbM10gPDwgIiBdIiA8PAogICAgLy8gc3RkOjplbmRsOyBzdGQ6OmNlcnIgPDwgIlNjYWxhci5zaXplKCkgPSAiIDw8IG4gPDwgc3RkOjplbmRsOwoKICAgIGlmKG4gPj0gbS0+Y2hhbm5lbHMoKSkgewogICAgICBtLT5zZXRUbyhzKTsKICAgICAgcmV0dXJuIEpTX1VOREVGSU5FRDsKICAgIH0KICB9CgogIGJ5dGVzID0gbS0+ZWxlbVNpemUoKTsKICAvKiAgaWYobS0+ZGVwdGgoKSA9PSBDVl8xNlUgJiYgbS0+Y2hhbm5lbHMoKSA+IDEpIHsKICAgICAgaWYobS0+Y2hhbm5lbHMoKSA9PSAyKQogICAgICAgIGpzX21hdF9zZXRfdmVjdG9yPGN2OjpWZWM8dWludDE2X3QsIDI+PihjdHgsIG0sIGFyZ2MsIGFyZ3YpOwogICAgICBlbHNlIGlmKG0tPmNoYW5uZWxzKCkgPT0gMykKICAgICAgICBqc19tYXRfc2V0X3ZlY3Rvcjxjdjo6VmVjPHVpbnQxNl90LCAzPj4oY3R4LCBtLCBhcmdjLCBhcmd2KTsKICAgICAgZWxzZSBpZihtLT5jaGFubmVscygpID09IDQpCiAgICAgICAganNfbWF0X3NldF92ZWN0b3I8Y3Y6OlZlYzx1aW50MTZfdCwgND4+KGN0eCwgbSwgYXJnYywgYXJndik7CiAgICB9IGVsc2UgaWYobS0+ZGVwdGgoKSA9PSBDVl8zMkYpIHsKICAgICAgaWYobS0+Y2hhbm5lbHMoKSA9PSAxKQogICAgICAgIGpzX21hdF9zZXRfdmVjdG9yPGZsb2F0PihjdHgsIG0sIGFyZ2MsIGFyZ3YpOwogICAgfSBlbHNlIGlmKGJ5dGVzIDw9IHNpemVvZih1aW50KSkgewogICAgICBpZihieXRlcyA8PSAxKSB7CiAgICAgICAgc3RkOjp2ZWN0b3I8dWludDhfdD4gdjsKICAgICAgICBqc19tYXRfdmVjdG9yX2dldChjdHgsIGFyZ2MsIGFyZ3YsIHYsIGRlZmluZWQpOwogICAgICAgIG0tPnNldFRvKGN2OjpJbnB1dEFycmF5KHYpLCBkZWZpbmVkKTsKICAgICAgfSBlbHNlIGlmKGJ5dGVzIDw9IDIpIHsKICAgICAgICBzdGQ6OnZlY3Rvcjx1aW50MTZfdD4gdjsKICAgICAgICBqc19tYXRfdmVjdG9yX2dldChjdHgsIGFyZ2MsIGFyZ3YsIHYsIGRlZmluZWQpOwogICAgICAgIG0tPnNldFRvKGN2OjpJbnB1dEFycmF5KHYpLCBkZWZpbmVkKTsKICAgICAgfSBlbHNlIGlmKGJ5dGVzIDw9IDQpIHsKCiAgICAgICAganNfbWF0X3NldF92ZWN0b3I8dWludDMyX3Q+KGN0eCwgbSwgYXJnYywgYXJndik7CiAgICAgIH0gZWxzZSBpZihieXRlcyA8PSA4KSB7CiAgICAgICAganNfbWF0X3NldF92ZWN0b3I8dWludDY0X3Q+KGN0eCwgbSwgYXJnYywgYXJndik7CiAgICAgIH0KICAgIH0qLwoKICByZXR1cm4gSlNfVU5ERUZJTkVEOwp9CgpzdGF0aWMgSlNWYWx1ZQpqc19tYXRfZ2V0X3Byb3BzKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBtYWdpYykgewogIGN2OjpNYXQqIG07CiAgSlNWYWx1ZSByZXQgPSBKU19VTkRFRklORUQ7CgogIGlmKCEobSA9IGpzX21hdF9kYXRhKGN0eCwgdGhpc192YWwpKSkKICAgIHJldHVybiBKU19FWENFUFRJT047CgogIGlmKG0tPmVtcHR5KCkpCiAgICByZXR1cm4gSlNfTlVMTDsKCiAgc3dpdGNoKG1hZ2ljKSB7CiAgICBjYXNlIFBST1BfQ09MUzogewogICAgICByZXQgPSBKU19OZXdVaW50MzIoY3R4LCBtLT5jb2xzKTsKICAgICAgYnJlYWs7CiAgICB9CiAgICBjYXNlIFBST1BfUk9XUzogewogICAgICByZXQgPSBKU19OZXdVaW50MzIoY3R4LCBtLT5yb3dzKTsKICAgICAgYnJlYWs7CiAgICB9CiAgICBjYXNlIFBST1BfQ0hBTk5FTFM6IHsKICAgICAgcmV0ID0gSlNfTmV3VWludDMyKGN0eCwgbS0+Y2hhbm5lbHMoKSk7CiAgICAgIGJyZWFrOwogICAgfQogICAgY2FzZSBQUk9QX1RZUEU6IHsKICAgICAgcmV0ID0gSlNfTmV3VWludDMyKGN0eCwgbS0+dHlwZSgpKTsKICAgICAgYnJlYWs7CiAgICB9CiAgICBjYXNlIFBST1BfREVQVEg6IHsKICAgICAgcmV0ID0gSlNfTmV3VWludDMyKGN0eCwgbS0+ZGVwdGgoKSk7CiAgICAgIGJyZWFrOwogICAgfQogICAgY2FzZSBQUk9QX0VNUFRZOiB7CiAgICAgIHJldCA9IEpTX05ld0Jvb2woY3R4LCBtLT5lbXB0eSgpKTsKICAgICAgYnJlYWs7CiAgICB9CiAgICBjYXNlIFBST1BfVE9UQUw6IHsKICAgICAgcmV0ID0gSlNfTmV3RmxvYXQ2NChjdHgsIG0tPnRvdGFsKCkpOwogICAgICBicmVhazsKICAgIH0KICAgIGNhc2UgUFJPUF9TSVpFOiB7CiAgICAgIHJldCA9IGpzX3NpemVfbmV3KGN0eCwgbS0+Y29scywgbS0+cm93cyk7CiAgICAgIGJyZWFrOwogICAgfQogICAgY2FzZSBQUk9QX0NPTlRJTlVPVVM6IHsKICAgICAgcmV0ID0gSlNfTmV3Qm9vbChjdHgsIG0tPmlzQ29udGludW91cygpKTsKICAgICAgYnJlYWs7CiAgICB9CiAgICBjYXNlIFBST1BfU1VCTUFUUklYOiB7CiAgICAgIHJldCA9IEpTX05ld0Jvb2woY3R4LCBtLT5pc1N1Ym1hdHJpeCgpKTsKICAgICAgYnJlYWs7CiAgICB9CiAgICBjYXNlIFBST1BfU1RFUDogewogICAgICByZXQgPSBKU19OZXdVaW50MzIoY3R4LCBtLT5zdGVwKTsKICAgICAgYnJlYWs7CiAgICB9CiAgICBjYXNlIFBST1BfRUxFTVNJWkU6IHsKICAgICAgcmV0ID0gSlNfTmV3VWludDMyKGN0eCwgbS0+ZWxlbVNpemUoKSk7CiAgICAgIGJyZWFrOwogICAgfQogICAgY2FzZSBQUk9QX0VMRU1TSVpFMTogewogICAgICByZXQgPSBKU19OZXdVaW50MzIoY3R4LCBtLT5lbGVtU2l6ZTEoKSk7CiAgICAgIGJyZWFrOwogICAgfQogIH0KCiAgcmV0dXJuIHJldDsKfQoKc3RhdGljIEpTVmFsdWUKanNfbWF0X3Rvc3RyaW5nKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QqIGFyZ3YpIHsKICBjdjo6TWF0KiBtID0ganNfbWF0X2RhdGEoY3R4LCB0aGlzX3ZhbCk7CiAgaW50IHgsIHk7CgogIHN0ZDo6b3N0cmluZ3N0cmVhbSBvczsKICBzdGQ6OnN0cmluZyBzdHI7CiAgaW50IGkgPSAwOwogIGlmKCFtKQogICAgcmV0dXJuIEpTX0VYQ0VQVElPTjsKCiAgb3MgPDwgIk1hdCgiOwoKICBpZihmYWxzZSAmJiAobS0+cm93cyA+IDAgJiYgbS0+Y29scyA+IDApICYmIG0tPmRpbXMgPT0gMikgewogICAgb3MgPDwgbS0+cm93cyA8PCAiLCAiIDw8IG0tPmNvbHM7CiAgfSBlbHNlIHsKICAgIHN0ZDo6dmVjdG9yPHN0ZDo6c3RyaW5nPiBzaXplU3RycyA9IGpzX21hdF9kaW1lbnNpb25zKCptKTsKICAgIG9zIDw8ICJbIiA8PCBqb2luKHNpemVTdHJzLmNiZWdpbigpLCBzaXplU3Rycy5jZW5kKCksICIsICIpIDw8ICJdIjsKICB9CgogIGlmKG0tPmRlcHRoKCkgPT0gQ1ZfOFUgfHwgbS0+Y2hhbm5lbHMoKSA+IDEpIHsKICAgIG9zIDw8ICIsICI7CiAgICBjb25zdCBjaGFyKiB0c3RyOwogICAgc3dpdGNoKG0tPmRlcHRoKCkgJiA3KSB7CiAgICAgIGNhc2UgQ1ZfOFU6IHRzdHIgPSAiQ1ZfOFUiOyBicmVhazsKICAgICAgY2FzZSBDVl84UzogdHN0ciA9ICJDVl84UyI7IGJyZWFrOwogICAgICBjYXNlIENWXzE2VTogdHN0ciA9ICJDVl8xNlUiOyBicmVhazsKICAgICAgY2FzZSBDVl8xNlM6IHRzdHIgPSAiQ1ZfMTZTIjsgYnJlYWs7CiAgICAgIGNhc2UgQ1ZfMzJTOiB0c3RyID0gIkNWXzMyUyI7IGJyZWFrOwogICAgICBjYXNlIENWXzMyRjogdHN0ciA9ICJDVl8zMkYiOyBicmVhazsKICAgICAgY2FzZSBDVl82NEY6IHRzdHIgPSAiQ1ZfNjRGIjsgYnJlYWs7CiAgICB9CiAgICBvcyA8PCB0c3RyIDw8ICdDJyA8PCBtLT5jaGFubmVscygpIDw8ICIpIiAvKjw8IHN0ZDo6ZW5kbCovOwogIH0gZWxzZSB7CiAgICBvcyA8PCAiTWF0WyI7CiAgICBmb3IoeSA9IDA7IHkgPCBtLT5yb3dzOyB5KyspIHsKICAgICAgb3MgPDwgIlxuICAiOwoKICAgICAgZm9yKHggPSAwOyB4IDwgbS0+Y29sczsgeCsrKSB7CiAgICAgICAgaWYoeCA+IDApCiAgICAgICAgICBvcyA8PCAnLCc7CiAgICAgICAgaWYobS0+dHlwZSgpID09IENWXzMyRkMxKQogICAgICAgICAgb3MgPDwgbS0+YXQ8ZmxvYXQ+KHksIHgpOwogICAgICAgIGVsc2UKICAgICAgICAgIG9zIDw8IHN0ZDo6c2V0ZmlsbCgnMCcpIDw8IHN0ZDo6c2V0YmFzZSgxNikgPDwgc3RkOjpzZXR3KG0tPnR5cGUoKSA9PSBDVl84VUM0ID8gOCA6IG0tPnR5cGUoKSA9PSBDVl84VUMxID8gMiA6IDYpCiAgICAgICAgICAgICA8PCBtLT5hdDx1aW50MzJfdD4oeSwgeCk7CiAgICAgIH0KICAgIH0KCiAgICBvcyA8PCAnXScgLyo8PCBzdGQ6OmVuZGwqLzsKICB9CiAgb3MgPDwgJyAnOwogIG9zIDw8ICh2b2lkKiltLT5lbGVtU2l6ZSgpOwogIG9zIDw8ICJ4IjsKICBvcyA8PCAodm9pZCopbS0+dG90YWwoKTsKICBvcyA8PCAiIEAiOwogIG9zIDw8ICh2b2lkKiltLT5wdHIoKTsKCiAgc3RyID0gb3Muc3RyKCk7CgogIHJldHVybiBKU19OZXdTdHJpbmdMZW4oY3R4LCBzdHIuZGF0YSgpLCBzdHIuc2l6ZSgpKTsKfQoKc3RhdGljIEpTVmFsdWUKanNfbWF0X2luc3BlY3QoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCogYXJndikgewogIEpTTWF0RGF0YSogbWF0ID0ganNfbWF0X2RhdGEoY3R4LCB0aGlzX3ZhbCk7CiAgSlNWYWx1ZSBvYmogPSBKU19OZXdPYmplY3RQcm90byhjdHgsIG1hdF9wcm90byk7CgogIEpTX0RlZmluZVByb3BlcnR5VmFsdWVTdHIoY3R4LCBvYmosICJjb2xzIiwgSlNfTmV3VWludDMyKGN0eCwgbWF0LT5jb2xzKSwgSlNfUFJPUF9FTlVNRVJBQkxFKTsKICBKU19EZWZpbmVQcm9wZXJ0eVZhbHVlU3RyKGN0eCwgb2JqLCAicm93cyIsIEpTX05ld1VpbnQzMihjdHgsIG1hdC0+cm93cyksIEpTX1BST1BfRU5VTUVSQUJMRSk7CiAgSlNfRGVmaW5lUHJvcGVydHlWYWx1ZVN0cihjdHgsIG9iaiwgImRlcHRoIiwgSlNfTmV3VWludDMyKGN0eCwgbWF0LT5kZXB0aCgpKSwgSlNfUFJPUF9FTlVNRVJBQkxFKTsKICBKU19EZWZpbmVQcm9wZXJ0eVZhbHVlU3RyKGN0eCwgb2JqLCAiY2hhbm5lbHMiLCBKU19OZXdVaW50MzIoY3R4LCBtYXQtPmNoYW5uZWxzKCkpLCBKU19QUk9QX0VOVU1FUkFCTEUpOwogIHJldHVybiBvYmo7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX21hdF9nZXRyb3RhdGlvbm1hdHJpeDJkKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QqIGFyZ3YpIHsKICBKU1BvaW50RGF0YTxkb3VibGU+IHM7CgogIGRvdWJsZSBhbmdsZSA9IDAsIHNjYWxlID0gMTsKICBjdjo6TWF0IG07CgogIEpTVmFsdWUgcmV0OwogIGlmKGFyZ2MgPT0gMCkKICAgIHJldHVybiBKU19FWENFUFRJT047CiAgaWYoYXJnYyA+IDApIHsKICAgIHMgPSBqc19wb2ludF9nZXQoY3R4LCBhcmd2WzBdKTsKICAgIGlmKGFyZ2MgPiAxKSB7CiAgICAgIEpTX1RvRmxvYXQ2NChjdHgsICZhbmdsZSwgYXJndlsxXSk7CiAgICAgIGlmKGFyZ2MgPiAyKSB7CiAgICAgICAgSlNfVG9GbG9hdDY0KGN0eCwgJnNjYWxlLCBhcmd2WzJdKTsKICAgICAgfQogICAgfQogIH0KCiAgbSA9IGN2OjpnZXRSb3RhdGlvbk1hdHJpeDJEKHMsIGFuZ2xlLCBzY2FsZSk7CgogIHJldCA9IGpzX21hdF93cmFwKGN0eCwgbSk7CiAgcmV0dXJuIHJldDsKfQoKc3RhdGljIEpTVmFsdWUKanNfbWF0X2NvbnZlcnRfdG8oSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCogYXJndikgewogIEpTTWF0RGF0YSAqbSwgKm91dHB1dDsKICBpbnQzMl90IHJ0eXBlOwogIGRvdWJsZSBhbHBoYSA9IDEsIGJldGEgPSAwOwoKICBtID0ganNfbWF0X2RhdGEoY3R4LCB0aGlzX3ZhbCk7CiAgb3V0cHV0ID0ganNfbWF0X2RhdGEoY3R4LCBhcmd2WzBdKTsKCiAgaWYobSA9PSBudWxscHRyIHx8IG91dHB1dCA9PSBudWxscHRyKQogICAgcmV0dXJuIEpTX0VYQ0VQVElPTjsKCiAgSlNfVG9JbnQzMihjdHgsICZydHlwZSwgYXJndlsxXSk7CgogIGlmKGFyZ2MgPj0gMykKICAgIEpTX1RvRmxvYXQ2NChjdHgsICZhbHBoYSwgYXJndlsyXSk7CgogIGlmKGFyZ2MgPj0gNCkKICAgIEpTX1RvRmxvYXQ2NChjdHgsICZiZXRhLCBhcmd2WzNdKTsKCiAgbS0+Y29udmVydFRvKCpvdXRwdXQsIHJ0eXBlLCBhbHBoYSwgYmV0YSk7CgogIHJldHVybiBKU19VTkRFRklORUQ7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX21hdF9jb3B5X3RvKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QqIGFyZ3YpIHsKICBKU01hdERhdGEqIG07CiAgSlNPdXRwdXRBcnJheSBvdXRwdXQ7CiAgSlNJbnB1dEFycmF5IC8qb3V0cHV0LCovIG1hc2sgPSBjdjo6bm9BcnJheSgpOwoKICBtID0ganNfbWF0X2RhdGEoY3R4LCB0aGlzX3ZhbCk7CgogIG91dHB1dCA9IGpzX3VtYXRfb3JfbWF0KGN0eCwgYXJndlswXSk7CiAgLy8gb3V0cHV0ID0ganNfdW1hdF9vcl9tYXQoY3R4LCBhcmd2WzBdKTsKCiAgaWYoanNfaXNfbm9hcnJheShvdXRwdXQpKQogICAgcmV0dXJuIEpTX1Rocm93SW50ZXJuYWxFcnJvcihjdHgsICJhcmd1bWVudCAxIG5vdCBhbiBhcnJheSEiKTsKCiAgaWYoYXJnYyA+IDEpCiAgICBtYXNrID0ganNfdW1hdF9vcl9tYXQoY3R4LCBhcmd2WzFdKTsKCiAgdHJ5IHsKICBpZighanNfaXNfbm9hcnJheShtYXNrKSkKICAgIG0tPmNvcHlUbyhvdXRwdXQsIG1hc2spOwogIGVsc2UKICAgIG0tPmNvcHlUbyhvdXRwdXQpOwp9Y2F0Y2goY29uc3QgY3Y6OkV4Y2VwdGlvbiYgZSkgewogIHJldHVybiBKU19UaHJvd0ludGVybmFsRXJyb3IoY3R4LCAiY3Y6OkV4Y2VwdGlvbiB3aGF0PSclcyciLCBlLndoYXQoKSk7Cn0KICByZXR1cm4gSlNfVU5ERUZJTkVEOwoKfQoKc3RhdGljIEpTVmFsdWUKanNfbWF0X3Jlc2hhcGUoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCogYXJndikgewogIEpTTWF0RGF0YSAqbSwgbWF0OwogIGludDMyX3QgY24sIHJvd3MgPSAwOwogIEpTVmFsdWUgcmV0ID0gSlNfRVhDRVBUSU9OOwoKICBtID0ganNfbWF0X2RhdGEoY3R4LCB0aGlzX3ZhbCk7CgogIGlmKG0gPT0gbnVsbHB0ciB8fCBhcmdjIDwgMSkKICAgIHJldHVybiByZXQ7CgogIGlmKGFyZ2MgPj0gMSAmJiBKU19Jc051bWJlcihhcmd2WzBdKSkgewogICAgSlNfVG9JbnQzMihjdHgsICZjbiwgYXJndlswXSk7CiAgICBhcmd2Kys7CiAgICBhcmdjLS07CiAgfSBlbHNlIHsKICAgIGNuID0gbS0+Y2hhbm5lbHMoKTsKICB9CgogIGlmKGFyZ2MgPj0gMSkgewogICAgc3RkOjp2ZWN0b3I8aW50PiBuZXdzaGFwZTsKICAgIGlmKGpzX2lzX2FycmF5KGN0eCwgYXJndlswXSkpIHsKICAgICAganNfYXJyYXlfdG8oY3R4LCBhcmd2WzBdLCBuZXdzaGFwZSk7CiAgICAgIGlmKGFyZ2MgPj0gMiAmJiBKU19Jc051bWJlcihhcmd2WzFdKSkgewogICAgICAgIHVpbnQzMl90IG5kaW1zOwogICAgICAgIEpTX1RvVWludDMyKGN0eCwgJm5kaW1zLCBhcmd2WzFdKTsKICAgICAgICBpZihuZGltcyA+IG5ld3NoYXBlLnNpemUoKSkKICAgICAgICAgIHJldHVybiBKU19FWENFUFRJT047CiAgICAgICAgbWF0ID0gbS0+cmVzaGFwZShjbiwgbmRpbXMsICZuZXdzaGFwZVswXSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgbWF0ID0gbS0+cmVzaGFwZShjbiwgbmV3c2hhcGUpOwogICAgICB9CiAgICB9IGVsc2UgaWYoSlNfSXNOdW1iZXIoYXJndlswXSkpIHsKICAgICAgSlNfVG9JbnQzMihjdHgsICZyb3dzLCBhcmd2WzBdKTsKICAgICAgbWF0ID0gbS0+cmVzaGFwZShjbiwgcm93cyk7CiAgICB9CiAgICByZXQgPSBqc19tYXRfd3JhcChjdHgsIG1hdCk7CiAgfQoKICByZXR1cm4gcmV0Owp9CgpzdGF0aWMgSlNWYWx1ZQpqc19tYXRfZ2V0dW1hdChKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2KSB7CiAgSlNNYXREYXRhKiBtOwogIEpTVU1hdERhdGEgdW1hdDsKICBpbnQzMl90IGFjY2Vzc0ZsYWdzLCB1c2FnZUZsYWdzID0gY3Y6OlVTQUdFX0RFRkFVTFQ7CiAgSlNWYWx1ZSByZXQgPSBKU19FWENFUFRJT047CgogIG0gPSBqc19tYXRfZGF0YShjdHgsIHRoaXNfdmFsKTsKCiAgaWYobSA9PSBudWxscHRyIHx8IGFyZ2MgPCAxKQogICAgcmV0dXJuIHJldDsKCiAgaWYoanNfdW1hdF9jbGFzc19pZCA9PSAwKQogICAgcmV0dXJuIEpTX05VTEw7CgogIEpTX1RvSW50MzIoY3R4LCAmYWNjZXNzRmxhZ3MsIGFyZ3ZbMF0pOwoKICBpZihhcmdjID4gMSkKICAgIEpTX1RvSW50MzIoY3R4LCAmdXNhZ2VGbGFncywgYXJndlsxXSk7CgogIHVtYXQgPSBtLT5nZXRVTWF0KGN2OjpBY2Nlc3NGbGFnKGFjY2Vzc0ZsYWdzKSwgY3Y6OlVNYXRVc2FnZUZsYWdzKHVzYWdlRmxhZ3MpKTsKCiAgcmV0dXJuIGpzX3VtYXRfd3JhcChjdHgsIHVtYXQpOwp9CgpzdGF0aWMgSlNWYWx1ZQpqc19tYXRfY2xhc3NfZnVuYyhKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2LCBpbnQgbWFnaWMpIHsKICBKU1ZhbHVlQ29uc3QgKnYgPSBhcmd2LCAqZSA9ICZhcmd2W2FyZ2NdOwogIEpTTWF0RGF0YSByZXN1bHQ7CiAgSlNNYXREYXRhICpwcmV2ID0gbnVsbHB0ciwgKm1hdCA9IG51bGxwdHI7CgogIHdoaWxlKHYgPCBlKSB7CiAgICBKU1ZhbHVlQ29uc3QgYXJnID0gKnYrKzsKCiAgICBpZihudWxscHRyID09IChtYXQgPSBqc19tYXRfZGF0YShjdHgsIGFyZykpKQogICAgICByZXR1cm4gSlNfRVhDRVBUSU9OOwoKICAgIGlmKHByZXYpIHsKICAgICAgSlNNYXREYXRhIGNvbnN0ICZhID0gKnByZXYsICZiID0gKm1hdDsKICAgICAgc3dpdGNoKG1hZ2ljKSB7CiAgICAgICAgY2FzZSAwOiByZXN1bHQgPSBhICsgYjsgYnJlYWs7CiAgICAgICAgY2FzZSAxOiByZXN1bHQgPSBhIC0gYjsgYnJlYWs7CiAgICAgICAgY2FzZSAyOiByZXN1bHQgPSBhICogYjsgYnJlYWs7CiAgICAgICAgY2FzZSAzOiByZXN1bHQgPSBhIC8gYjsgYnJlYWs7CiAgICAgICAgY2FzZSA0OiByZXN1bHQgPSBhICYgYjsgYnJlYWs7CiAgICAgICAgY2FzZSA1OiByZXN1bHQgPSBhIHwgYjsgYnJlYWs7CiAgICAgICAgY2FzZSA2OiByZXN1bHQgPSBhIF4gYjsgYnJlYWs7CiAgICAgIH0KICAgICAgcHJldiA9ICZyZXN1bHQ7CiAgICB9IGVsc2UgewogICAgICBwcmV2ID0gbWF0OwogICAgICByZXN1bHQgPSBjdjo6TWF0Ojp6ZXJvcyhtYXQtPnJvd3MsIG1hdC0+Y29scywgbWF0LT50eXBlKCkpOwogICAgICBtYXQtPmNvcHlUbyhyZXN1bHQpOwogICAgfQogIH0KCiAgcmV0dXJuIGpzX21hdF93cmFwKGN0eCwgcmVzdWx0KTsKfQoKc3RhdGljIEpTVmFsdWUKanNfbWF0X2ZpbGwoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCogYXJndiwgaW50IG1hZ2ljKSB7CiAgSlNNYXREYXRhKiBtOwoKICBtID0ganNfbWF0X2RhdGEoY3R4LCB0aGlzX3ZhbCk7CgogIGlmKG0gPT0gbnVsbHB0cikKICAgIHJldHVybiBKU19FWENFUFRJT047CgogIGlmKG0tPmVtcHR5KCkgfHwgbS0+cm93cyA9PSAwIHx8IG0tPmNvbHMgPT0gMCkKICAgIHJldHVybiBKU19FWENFUFRJT047CgogIGN2OjpNYXQmIG1hdCA9ICptOwoKICBzd2l0Y2gobWFnaWMpIHsKICAgIGNhc2UgMDogewogICAgICBtYXQgPSBjdjo6TWF0Ojp6ZXJvcyhtYXQucm93cywgbWF0LmNvbHMsIG1hdC50eXBlKCkpOwogICAgICBicmVhazsKICAgIH0KICAgIGNhc2UgMTogewogICAgICBtYXQgPSBjdjo6TWF0OjpvbmVzKG1hdC5yb3dzLCBtYXQuY29scywgbWF0LnR5cGUoKSk7CiAgICAgIGJyZWFrOwogICAgfQogIH0KCiAgcmV0dXJuIEpTX0R1cFZhbHVlKGN0eCwgdGhpc192YWwpOwp9CgpzdGF0aWMgSlNWYWx1ZQpqc19tYXRfY2xhc3NfY3JlYXRlKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QqIGFyZ3YsIGludCBtYWdpYykgewogIEpTVmFsdWUgcmV0ID0gSlNfVU5ERUZJTkVEOwoKICBjb25zdCBhdXRvJiBbc2l6ZSwgdHlwZV0gPSBqc19tYXRfcGFyYW1zKGN0eCwgYXJnYywgYXJndik7CgogIGlmKHNpemUud2lkdGggPT0gMCB8fCBzaXplLmhlaWdodCA9PSAwKQogICAgcmV0dXJuIEpTX0VYQ0VQVElPTjsKCiAgcmV0ID0ganNfbWF0X25ldyhjdHgsIHVpbnQzMl90KDApLCB1aW50MzJfdCgwKSwgaW50KDApKTsKICBKU01hdERhdGEmIG1hdCA9ICpqc19tYXRfZGF0YShjdHgsIHJldCk7CgogIHN3aXRjaChtYWdpYykgewogICAgY2FzZSAwOiB7CiAgICAgIG1hdCA9IGN2OjpTY2FsYXI6OmFsbCgwKTsKICAgICAgYnJlYWs7CiAgICB9CiAgICBjYXNlIDE6IHsKICAgICAgbWF0ID0gY3Y6OlNjYWxhcjo6YWxsKDEpOwogICAgICBicmVhazsKICAgIH0KICB9CgogIHJldHVybiByZXQ7Cn0KCi8qc3RhdGljIEpTVmFsdWUKanNfbWF0X2NyZWF0ZV92ZWMoSlNDb250ZXh0KiBjdHgsIGludCBsZW4sIEpTVmFsdWUqIHZlYykgewogIEpTVmFsdWUgb2JqID0gSlNfRVhDRVBUSU9OOwogIGludCBpOwoKICBvYmogPSBKU19OZXdBcnJheShjdHgpOwogIGlmKCFKU19Jc0V4Y2VwdGlvbihvYmopKSB7CgogICAgZm9yKGkgPSAwOyBpIDwgbGVuOyBpKyspIHsKCiAgICAgIGlmKEpTX1NldFByb3BlcnR5VWludDMyKGN0eCwgb2JqLCBpLCB2ZWNbaV0pIDwgMCkgewogICAgICAgIEpTX0ZyZWVWYWx1ZShjdHgsIG9iaik7CiAgICAgICAgcmV0dXJuIEpTX0VYQ0VQVElPTjsKICAgICAgfQogICAgfQogIH0KICByZXR1cm4gb2JqOwp9Ki8KCnN0YXRpYyBKU1ZhbHVlCmpzX21hdF9idWZmZXIoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCkgewogIEpTTWF0RGF0YSogbTsKICBKU1ZhbHVlIGJ1ZjsKICAvKiAgYnVmID0gSlNfR2V0UHJvcGVydHlTdHIoY3R4LCB0aGlzX3ZhbCwgImFycmF5QnVmZmVyIik7CgogICAgaWYoSlNfSXNPYmplY3QoYnVmKSkKICAgICAgcmV0dXJuIGJ1ZjsqLwoKICBpZigobSA9IGpzX21hdF9kYXRhKGN0eCwgdGhpc192YWwpKSkgewogICAgSlNWYWx1ZSBidWY7CiAgICBzaXplX3QgYnl0ZV9zaXplOwogICAgbS0+YWRkcmVmKCk7CiAgICAvLyBtLT5hZGRyZWYoKTsKICAgIGJ5dGVfc2l6ZSA9IG1hdF9ieXRlc2l6ZSgqbSk7CgogICAgaWYoYnl0ZV9zaXplID09IDApCiAgICAgIGJ5dGVfc2l6ZSA9IGVuZCgqbSkgLSBiZWdpbigqbSk7CiAgICBpZihieXRlX3NpemUgPT0gMCkKICAgICAgYnl0ZV9zaXplID0gbS0+ZWxlbVNpemUoKSAqIG0tPnRvdGFsKCk7CiAgICBhc3NlcnQoYnl0ZV9zaXplKTsKICAgIGJ1ZiA9IGpzX2FycmF5YnVmZmVyX2Zyb20oCiAgICAgICAgY3R4LCBtYXRfcHRyKCptKSwgbWF0X3B0cigqbSkgKyBieXRlX3NpemUsICooSlNGcmVlQXJyYXlCdWZmZXJEYXRhRnVuYyopJmpzX21hdF9mcmVlX2Z1bmMsICh2b2lkKiltKTsKCiAgICAvLyAgIEpTX1NldFByb3BlcnR5U3RyKGN0eCwgdGhpc192YWwsICJhcnJheUJ1ZmZlciIsIEpTX0R1cFZhbHVlKGN0eCwgYnVmKSk7CiAgICByZXR1cm4gYnVmOwogIH0KICByZXR1cm4gSlNfRVhDRVBUSU9OOwp9CgpzdGF0aWMgSlNWYWx1ZQpqc19tYXRfYXJyYXkoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCkgewogIEpTTWF0RGF0YSogbTsKICBjb25zdCBjaGFyKiBjdG9yOwoKICBpZigobSA9IGpzX21hdF9kYXRhKGN0eCwgdGhpc192YWwpKSkgewogICAgSlNWYWx1ZSBidWZmZXIsIHR5cGVkX2FycmF5OwogICAgVHlwZWRBcnJheVR5cGUgdHlwZSgqbSk7CiAgICBidWZmZXIgPSBqc19tYXRfYnVmZmVyKGN0eCwgdGhpc192YWwpOwoKICAgIHN0ZDo6cmFuZ2VzOjpzdWJyYW5nZTx1aW50OF90Kj4gcmFuZ2UoYmVnaW4oKm0pLCBlbmQoKm0pKTsKCiAgICAvKnByaW50ZigibS0+cm93cz0laSBtLT5jb2xzPSVpIG0tPnN0ZXA9JXp1IG0tPnRvdGFsKCk9JXp1IHJhbmdlLnNpemUoKT0lenUgdHlwZS5ieXRlX3NpemU9JXUKICAgICAgIHNpemU9JXp1XG4iLCBtLT5yb3dzLCBtLT5jb2xzLCBzaXplX3QobS0+c3RlcCksIHJhbmdlLnNpemUoKSAvIHR5cGUuYnl0ZV9zaXplLCByYW5nZS5zaXplKCksCiAgICAgICAgICAgdHlwZS5ieXRlX3NpemUsCiAgICAgICAgICAgcmFuZ2Uuc2l6ZSgpIC8gdHlwZS5ieXRlX3NpemUpOyovCgogICAgcmV0dXJuIGpzX3R5cGVkYXJyYXlfbmV3KGN0eCwgYnVmZmVyLCAwLCByYW5nZS5zaXplKCkgLyB0eXBlLmJ5dGVfc2l6ZSwgdHlwZSk7CiAgfQogIHJldHVybiBKU19FWENFUFRJT047Cn0KCkpTVmFsdWUKanNfbWF0X2NhbGwoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCBmdW5jX29iaiwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2LCBpbnQgZmxhZ3MpIHsKICBjdjo6UmVjdCByZWN0ID0gezAsIDAsIDAsIDB9OwogIEpTTWF0RGF0YSogc3JjOwoKICBpZigoc3JjID0ganNfbWF0X2RhdGEoY3R4LCBmdW5jX29iaikpID09IG51bGxwdHIpCiAgICByZXR1cm4gSlNfRVhDRVBUSU9OOwoKICBpZighanNfcmVjdF9yZWFkKGN0eCwgYXJndlswXSwgJnJlY3QpKQogICAgcmV0dXJuIEpTX1Rocm93VHlwZUVycm9yKGN0eCwgImFyZ3VtZW50IDEgZXhwZWN0aW5nIFJlY3QiKTsKICAvLyBwcmludGYoImpzX21hdF9jYWxsICV1LCV1ICV1eCV1XG4iLCByZWN0LngsIHJlY3QueSwgcmVjdC53aWR0aCwgcmVjdC5oZWlnaHQpOwoKICBjdjo6TWF0IG1hdCA9IHNyYy0+b3BlcmF0b3IoKShyZWN0KTsKICByZXR1cm4ganNfbWF0X3dyYXAoY3R4LCBtYXQpOwp9Cgp2b2lkCmpzX21hdF9maW5hbGl6ZXIoSlNSdW50aW1lKiBydCwgSlNWYWx1ZSB2YWwpIHsKICBKU01hdERhdGEqIHM7CgogIGlmKChzID0gc3RhdGljX2Nhc3Q8SlNNYXREYXRhKj4oSlNfR2V0T3BhcXVlKHZhbCwganNfbWF0X2NsYXNzX2lkKSkpKSB7CiAgICBqc19kZWFsbG9jYXRlKHJ0LCBzKTsKICB9CiAgcmV0dXJuOwoKICAvKmF1dG8gaXQyID0gc3RkOjpmaW5kKG1hdF9mcmVlZC5jYmVnaW4oKSwgbWF0X2ZyZWVkLmNlbmQoKSwgcyk7CiAgYXV0byBpdCA9IHN0ZDo6ZmluZChtYXRfbGlzdC5jYmVnaW4oKSwgbWF0X2xpc3QuY2VuZCgpLCBzKTsKCiAgaWYoaXQyICE9IG1hdF9mcmVlZC5jZW5kKCkpIHsKI2lmZGVmIERFQlVHX01BVAogICAgc3RkOjpjZXJyIDw8ICJqc19tYXRfZmluYWxpemVyIjsKICAgIGpzX21hdF9kdW1wKHMpOwojZW5kaWYKCiAgICBzdGQ6OmNlcnIgPDwgIiBFUlJPUjogYWxyZWFkeSBmcmVlZCIgPDwgc3RkOjplbmRsOwogICAgcmV0dXJuOwogIH0KICBKU19GcmVlVmFsdWVSVChydCwgdmFsKTsKICBpZihpdCAhPSBtYXRfbGlzdC5jZW5kKCkpIHsKICAgIHNpemVfdCByZWZjb3VudCA9IHMtPnUgIT0gbnVsbHB0ciA/IHMtPnUtPnJlZmNvdW50IDogMDsKICAgIGlmKHMtPnUpIHsKICAgICAgYXV0byBkYXRhID0gcy0+dTsKI2lmZGVmIERFQlVHX01BVAogICAgICBzdGQ6OmNlcnIgPDwgImN2OjpNYXQ6OnJlbGVhc2UiOwogICAgICBzdGQ6OmNlcnIgPDwgIiBtYXQ9IiA8PCBzdGF0aWNfY2FzdDx2b2lkKj4ocyk7CiAgICAgIHN0ZDo6Y2VyciA8PCAiLCByZWZjb3VudD0iIDw8IHJlZmNvdW50OwogICAgICBzdGQ6OmNlcnIgPDwgc3RkOjplbmRsOwojZW5kaWYKICAgICAgaWYocmVmY291bnQgPiAxKQogICAgICAgIHMtPnJlbGVhc2UoKTsKICAgICAgaWYocy0+dSkKICAgICAgICByZWZjb3VudCA9IHMtPnUtPnJlZmNvdW50OwogICAgICBlbHNlCiAgICAgICAgcmVmY291bnQgPSAwOwogICAgfQogICAgaWYocy0+dSA9PSBudWxscHRyKSB7CiAgICAgIG1hdF9saXN0LmVyYXNlKGl0KTsKICAgICAgbWF0X2ZyZWVkLnB1c2hfZnJvbnQocyk7CiAgICB9CiNpZmRlZiBERUJVR19NQVQKICAgIHN0ZDo6Y2VyciA8PCAianNfbWF0X2ZpbmFsaXplciI7CiAgICBqc19tYXRfZHVtcChzKTsKICAgIHN0ZDo6Y2VyciA8PCAiLCByZWZjb3VudD0iIDw8IHJlZmNvdW50OwogICAgc3RkOjpjZXJyIDw8ICIsIG1hdF9saXN0LnNpemUoKT0iIDw8IG1hdF9saXN0LnNpemUoKTsKICAgIHN0ZDo6Y2VyciA8PCAiLCBtYXRfZnJlZWQuc2l6ZSgpPSIgPDwgbWF0X2ZyZWVkLnNpemUoKSA8PCBzdGQ6OmVuZGw7CiNlbmRpZgogIH0gZWxzZSB7CiNpZmRlZiBERUJVR19NQVQKICAgIHN0ZDo6Y2VyciA8PCAianNfbWF0X2ZpbmFsaXplciI7CiAgICBqc19tYXRfZHVtcChzKTsKI2VuZGlmCiAgICBzdGQ6OmNlcnIgPDwgIiBFUlJPUjogbm90IGZvdW5kIiA8PCBzdGQ6OmVuZGw7CiAgfSovCn0KCkpTVmFsdWUKanNfbWF0X2l0ZXJhdG9yX25ldyhKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2LCBpbnQgbWFnaWMpIHsKICBKU1ZhbHVlIGVudW1fb2JqLCBtYXQ7CiAgSlNNYXREYXRhKiBtOwogIEpTTWF0SXRlcmF0b3JEYXRhKiBpdDsKCiAgaWYoIShtID0gc3RhdGljX2Nhc3Q8SlNNYXREYXRhKj4oSlNfR2V0T3BhcXVlKHRoaXNfdmFsLCBqc19tYXRfY2xhc3NfaWQpKSkpCiAgICByZXR1cm4gSlNfRVhDRVBUSU9OOwoKICBtYXQgPSBKU19EdXBWYWx1ZShjdHgsIHRoaXNfdmFsKTsKICBpZighSlNfSXNFeGNlcHRpb24obWF0KSkgewogICAgZW51bV9vYmogPSBKU19OZXdPYmplY3RQcm90b0NsYXNzKGN0eCwgbWF0X2l0ZXJhdG9yX3Byb3RvLCBqc19tYXRfaXRlcmF0b3JfY2xhc3NfaWQpOwogICAgaWYoIUpTX0lzRXhjZXB0aW9uKGVudW1fb2JqKSkgewogICAgICBpdCA9IGpzX2FsbG9jYXRlPEpTTWF0SXRlcmF0b3JEYXRhPihjdHgpOwoKICAgICAgaXQtPm9iaiA9IG1hdDsKICAgICAgaXQtPmJ1ZiA9IG0tPmVtcHR5KCkgPyBKU19VTkRFRklORUQgOiBqc19tYXRfYnVmZmVyKGN0eCwgdGhpc192YWwpOwogICAgICBpdC0+cm93ID0gMDsKICAgICAgaXQtPmNvbCA9IDA7CiAgICAgIGl0LT5tYWdpYyA9IG1hZ2ljOwogICAgICBpdC0+dHlwZSA9IFR5cGVkQXJyYXlUeXBlKCptKTsKCiAgICAgIC8vIHByaW50ZigianNfbWF0X2l0ZXJhdG9yX25ldyB0eXBlPSVzXG4iLCBpdC0+dHlwZS5jb25zdHJ1Y3Rvcl9uYW1lKCkuY19zdHIoKSk7CgogICAgICBKU19TZXRPcGFxdWUoLypjdHgsICovIGVudW1fb2JqLCBpdCk7CiAgICAgIHJldHVybiBlbnVtX29iajsKICAgIH0KICAgIEpTX0ZyZWVWYWx1ZShjdHgsIGVudW1fb2JqKTsKICB9CiAgSlNfRnJlZVZhbHVlKGN0eCwgbWF0KTsKICByZXR1cm4gSlNfRVhDRVBUSU9OOwp9CgovKnR5cGVkZWYgc3RydWN0IEpTTWF0SXRlcmF0b3JEYXRhIHsKICBKU1ZhbHVlIG9iaiwgYnVmOwogIHVpbnQzMl90IHJvdywgY29sOwogIGludCBtYWdpYzsKICBUeXBlZEFycmF5VHlwZSB0eXBlOwp9IEpTTWF0SXRlcmF0b3JEYXRhOwoqLwoKdm9pZApqc19tYXRfaXRlcmF0b3JfZHVtcChKU01hdEl0ZXJhdG9yRGF0YSogaXQpIHsKICBzdGQ6OmNvdXQgPDwgIk1hdEl0ZXJhdG9yIHsgcm93OiAiIDw8IGl0LT5yb3cgPDwgIiwgY29sOiAiIDw8IGl0LT5jb2wgPDwgIiwgbWFnaWM6ICIgPDwgaXQtPm1hZ2ljIDw8ICIsIHR5cGU6ICIgPDwgaXQtPnR5cGUKICAgICAgICAgICAgPDwgIiB9IiA8PCBzdGQ6OmVuZGw7Cn0KCkpTVmFsdWUKanNfbWF0X2l0ZXJhdG9yX25leHQoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCogYXJndiwgQk9PTCogcGRvbmUsIGludCBtYWdpYykgewogIEpTTWF0SXRlcmF0b3JEYXRhKiBpdDsKICBKU1ZhbHVlIHJldCA9IEpTX1VOREVGSU5FRDsKICAqcGRvbmUgPSBGQUxTRTsKICBpdCA9IHN0YXRpY19jYXN0PEpTTWF0SXRlcmF0b3JEYXRhKj4oSlNfR2V0T3BhcXVlKHRoaXNfdmFsLCBqc19tYXRfaXRlcmF0b3JfY2xhc3NfaWQpKTsKICBpZihpdCkgewogICAgSlNNYXREYXRhKiBtOwogICAgdWludDMyX3Qgcm93LCBjb2w7CiAgICBzaXplX3Qgb2Zmc2V0LCBjaGFubmVsczsKICAgIEpTTWF0RGltZW5zaW9ucyBkaW07CiAgICBpZigobSA9IGpzX21hdF9kYXRhKGN0eCwgaXQtPm9iaikpID09IG51bGxwdHIpCiAgICAgIHJldHVybiBKU19FWENFUFRJT047CiAgICBkaW0gPSBtYXRfZGltZW5zaW9ucygqbSk7CgogICAgLypzdGQ6OmNvdXQgPDwgIm1hdF9kaW1lbnNpb25zKCptKSA9ICIgPDwgZGltLmNvbHMgPDwgIngiIDw8IGRpbS5yb3dzIDw8IHN0ZDo6ZW5kbDsKICAgIGpzX21hdF9pdGVyYXRvcl9kdW1wKGl0KTsqLwoKICAgIHJvdyA9IGl0LT5yb3c7CiAgICBjb2wgPSBpdC0+Y29sOwogICAgaWYocm93ID49IG0tPnJvd3MpIHsKICAgICAgSlNfRnJlZVZhbHVlKGN0eCwgaXQtPm9iaik7CiAgICAgIGl0LT5vYmogPSBKU19VTkRFRklORUQ7CiAgICBkb25lOgogICAgICAqcGRvbmUgPSBUUlVFOwogICAgICByZXR1cm4gSlNfVU5ERUZJTkVEOwogICAgfQogICAgaWYoY29sICsgMSA8IGRpbS5jb2xzKSB7CiAgICAgIGl0LT5jb2wgPSBjb2wgKyAxOwogICAgfSBlbHNlIHsKICAgICAgaXQtPmNvbCA9IDA7CiAgICAgIGl0LT5yb3cgPSByb3cgKyAxOwogICAgfQogICAgKnBkb25lID0gRkFMU0U7CiAgICBjaGFubmVscyA9IG1hdF9jaGFubmVscygqbSk7CiAgICBvZmZzZXQgPSBtYXRfb2Zmc2V0KCptLCByb3csIGNvbCk7CiAgICBzd2l0Y2goaXQtPm1hZ2ljKSB7CiAgICAgIGNhc2UgTUFUX0lURVJBVE9SX0tFWVM6IHsKICAgICAgICBzdGQ6OmFycmF5PHVpbnQzMl90LCAyPiBwb3MgPSB7cm93LCBjb2x9OwogICAgICAgIHJldCA9IGpzX2FycmF5X2Zyb20oY3R4LCBwb3MpOwogICAgICAgIGJyZWFrOwogICAgICB9CiAgICAgIGNhc2UgTUFUX0lURVJBVE9SX1ZBTFVFUzogewogICAgICAgIFR5cGVkQXJyYXlUeXBlIHR5cGUoKm0pOwoKICAgICAgICAvKiAgIHByaW50ZigianNfbWF0X2l0ZXJhdG9yX25leHQgaXNfc2lnbmVkPSVkXG4iLCB0eXBlLmlzX3NpZ25lZCk7CiAgICAgICAgICAgcHJpbnRmKCJqc19tYXRfaXRlcmF0b3JfbmV4dCBpc19mbG9hdGluZ19wb2ludD0lZFxuIiwgdHlwZS5pc19mbG9hdGluZ19wb2ludCk7CiAgICAgICAgICAgcHJpbnRmKCJqc19tYXRfaXRlcmF0b3JfbmV4dCBieXRlX3NpemU9JWRcbiIsIHR5cGUuYnl0ZV9zaXplKTsKICAgICAgICAgICBwcmludGYoImpzX21hdF9pdGVyYXRvcl9uZXh0IGNoYW5uZWxzPSVkIHR5cGU9JWRcbiIsIG0tPmNoYW5uZWxzKCksIG0tPnR5cGUoKSk7CiAgICAgICAgICAgcHJpbnRmKCJqc19tYXRfaXRlcmF0b3JfbmV4dCAlc1xuIiwgdHlwZS5jb25zdHJ1Y3Rvcl9uYW1lKCkuY19zdHIoKSk7Ki8KCiAgICAgICAgaWYoY2hhbm5lbHMgPT0gMSkKICAgICAgICAgIHJldHVybiBqc19tYXRfZ2V0KGN0eCwgaXQtPm9iaiwgcm93LCBjb2wpOwoKICAgICAgICByZXQgPSBqc190eXBlZGFycmF5X25ldyhjdHgsIGl0LT5idWYsIG9mZnNldCwgY2hhbm5lbHMsIHR5cGUpOwogICAgICAgIGJyZWFrOwogICAgICB9CiAgICAgIGNhc2UgTUFUX0lURVJBVE9SX0VOVFJJRVM6IHsKICAgICAgICBKU1ZhbHVlIHZhbHVlID0gY2hhbm5lbHMgPT0gMSA/IGpzX21hdF9nZXQoY3R4LCBpdC0+b2JqLCByb3csIGNvbCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IGpzX3R5cGVkYXJyYXlfbmV3KGN0eCwgaXQtPmJ1Ziwgb2Zmc2V0LCBjaGFubmVscywgVHlwZWRBcnJheVR5cGUoKm0pKTsKICAgICAgICBzdGQ6OmFycmF5PHVpbnQzMl90LCAyPiBwb3MgPSB7cm93LCBjb2x9OwogICAgICAgIHN0ZDo6YXJyYXk8SlNWYWx1ZSwgMj4gZW50cnkgPSB7anNfYXJyYXlfZnJvbShjdHgsIHBvcyksIHZhbHVlfTsKICAgICAgICByZXQgPSBqc19hcnJheV9mcm9tKGN0eCwgZW50cnkpOwogICAgICAgIGJyZWFrOwogICAgICB9CiAgICB9CiAgfQogIHJldHVybiByZXQ7Cn0KCnZvaWQKanNfbWF0X2l0ZXJhdG9yX2ZpbmFsaXplcihKU1J1bnRpbWUqIHJ0LCBKU1ZhbHVlIHZhbCkgewogIEpTTWF0SXRlcmF0b3JEYXRhKiBpdCA9IHN0YXRpY19jYXN0PEpTTWF0SXRlcmF0b3JEYXRhKj4oSlNfR2V0T3BhcXVlKHZhbCwganNfbWF0X2l0ZXJhdG9yX2NsYXNzX2lkKSk7CiAganNfZGVhbGxvY2F0ZShydCwgaXQpOwp9CgpzdGF0aWMgSlNWYWx1ZQpqc19tYXRfaXRlcmF0b3JfZHVwKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QqIGFyZ3YpIHsKICByZXR1cm4gSlNfRHVwVmFsdWUoY3R4LCB0aGlzX3ZhbCk7Cn0KCkpTQ2xhc3NEZWYganNfbWF0X2NsYXNzID0gewogICAgLmNsYXNzX25hbWUgPSAiTWF0IiwKICAgIC5maW5hbGl6ZXIgPSBqc19tYXRfZmluYWxpemVyLAogICAgLmNhbGwgPSBqc19tYXRfY2FsbCwKfTsKCkpTQ2xhc3NEZWYganNfbWF0X2l0ZXJhdG9yX2NsYXNzID0gewogICAgLmNsYXNzX25hbWUgPSAiTWF0SXRlcmF0b3IiLAogICAgLmZpbmFsaXplciA9IGpzX21hdF9pdGVyYXRvcl9maW5hbGl6ZXIsCn07Cgpjb25zdCBKU0NGdW5jdGlvbkxpc3RFbnRyeSBqc19tYXRfcHJvdG9fZnVuY3NbXSA9IHtKU19DR0VUU0VUX01BR0lDX0RFRigiY29scyIsIGpzX21hdF9nZXRfcHJvcHMsIE5VTEwsIFBST1BfQ09MUyksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEpTX0NHRVRTRVRfTUFHSUNfREVGKCJyb3dzIiwganNfbWF0X2dldF9wcm9wcywgTlVMTCwgUFJPUF9ST1dTKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSlNfQ0dFVFNFVF9NQUdJQ19ERUYoImNoYW5uZWxzIiwganNfbWF0X2dldF9wcm9wcywgTlVMTCwgUFJPUF9DSEFOTkVMUyksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEpTX0NHRVRTRVRfTUFHSUNfREVGKCJ0eXBlIiwganNfbWF0X2dldF9wcm9wcywgTlVMTCwgUFJPUF9UWVBFKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSlNfQ0dFVFNFVF9NQUdJQ19ERUYoImRlcHRoIiwganNfbWF0X2dldF9wcm9wcywgTlVMTCwgUFJPUF9ERVBUSCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEpTX0NHRVRTRVRfTUFHSUNfREVGKCJlbXB0eSIsIGpzX21hdF9nZXRfcHJvcHMsIE5VTEwsIFBST1BfRU1QVFkpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBKU19DR0VUU0VUX01BR0lDX0RFRigidG90YWwiLCBqc19tYXRfZ2V0X3Byb3BzLCBOVUxMLCBQUk9QX1RPVEFMKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSlNfQ0dFVFNFVF9NQUdJQ19ERUYoInNpemUiLCBqc19tYXRfZ2V0X3Byb3BzLCBOVUxMLCBQUk9QX1NJWkUpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBKU19DR0VUU0VUX01BR0lDX0RFRigiY29udGludW91cyIsIGpzX21hdF9nZXRfcHJvcHMsIE5VTEwsIFBST1BfQ09OVElOVU9VUyksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEpTX0NHRVRTRVRfTUFHSUNfREVGKCJzdWJtYXRyaXgiLCBqc19tYXRfZ2V0X3Byb3BzLCBOVUxMLCBQUk9QX1NVQk1BVFJJWCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEpTX0NHRVRTRVRfTUFHSUNfREVGKCJzdGVwIiwganNfbWF0X2dldF9wcm9wcywgTlVMTCwgUFJPUF9TVEVQKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSlNfQ0dFVFNFVF9NQUdJQ19ERUYoImVsZW1TaXplIiwganNfbWF0X2dldF9wcm9wcywgTlVMTCwgUFJPUF9FTEVNU0laRSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEpTX0NHRVRTRVRfTUFHSUNfREVGKCJlbGVtU2l6ZTEiLCBqc19tYXRfZ2V0X3Byb3BzLCBOVUxMLCBQUk9QX0VMRU1TSVpFMSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEpTX0NHRVRTRVRfREVGKCJidWZmZXIiLCBqc19tYXRfYnVmZmVyLCBOVUxMKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSlNfQ0dFVFNFVF9ERUYoImFycmF5IiwganNfbWF0X2FycmF5LCBOVUxMKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJjb2wiLCAxLCBqc19tYXRfZnVuY3MsIE1FVEhPRF9DT0wpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBKU19DRlVOQ19NQUdJQ19ERUYoInJvdyIsIDEsIGpzX21hdF9mdW5jcywgTUVUSE9EX1JPVyksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEpTX0NGVU5DX01BR0lDX0RFRigiY29sUmFuZ2UiLCAyLCBqc19tYXRfZnVuY3MsIE1FVEhPRF9DT0xfUkFOR0UpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBKU19DRlVOQ19NQUdJQ19ERUYoInJvd1JhbmdlIiwgMiwganNfbWF0X2Z1bmNzLCBNRVRIT0RfUk9XX1JBTkdFKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJjbG9uZSIsIDAsIGpzX21hdF9mdW5jcywgTUVUSE9EX0NMT05FKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJyb2kiLCAwLCBqc19tYXRfZnVuY3MsIE1FVEhPRF9ST0kpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBKU19DRlVOQ19NQUdJQ19ERUYoInJlbGVhc2UiLCAwLCBqc19tYXRfZnVuY3MsIE1FVEhPRF9SRUxFQVNFKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJkdXAiLCAwLCBqc19tYXRfZnVuY3MsIE1FVEhPRF9EVVApLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBKU19DRlVOQ19NQUdJQ19ERUYoImNsZWFyIiwgMCwganNfbWF0X2Z1bmNzLCBNRVRIT0RfQ0xFQVIpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBKU19DRlVOQ19NQUdJQ19ERUYoInJlc2V0IiwgMCwganNfbWF0X2Z1bmNzLCBNRVRIT0RfUkVTRVQpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBKU19DRlVOQ19NQUdJQ19ERUYoInJlc2l6ZSIsIDEsIGpzX21hdF9mdW5jcywgTUVUSE9EX1JFU0laRSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEpTX0NGVU5DX01BR0lDX0RFRigic3RlcDEiLCAwLCBqc19tYXRfZnVuY3MsIE1FVEhPRF9TVEVQMSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEpTX0NGVU5DX01BR0lDX0RFRigibG9jYXRlUk9JIiwgMCwganNfbWF0X2Z1bmNzLCBNRVRIT0RfTE9DQVRFX1JPSSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEpTX0NGVU5DX01BR0lDX0RFRigicHRyIiwgMCwganNfbWF0X2Z1bmNzLCBNRVRIT0RfUFRSKSwKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEpTX0NGVU5DX01BR0lDX0RFRigiYW5kIiwgMiwganNfbWF0X2V4cHIsIE1BVF9FWFBSX0FORCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEpTX0NGVU5DX01BR0lDX0RFRigib3IiLCAyLCBqc19tYXRfZXhwciwgTUFUX0VYUFJfT1IpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBKU19DRlVOQ19NQUdJQ19ERUYoInhvciIsIDMsIGpzX21hdF9leHByLCBNQVRfRVhQUl9YT1IpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBKU19DRlVOQ19NQUdJQ19ERUYoIm11bCIsIDMsIGpzX21hdF9leHByLCBNQVRfRVhQUl9NVUwpLAoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJ6ZXJvIiwgMiwganNfbWF0X2ZpbGwsIDApLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBKU19DRlVOQ19NQUdJQ19ERUYoIm9uZSIsIDIsIGpzX21hdF9maWxsLCAxKSwKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEpTX0NGVU5DX0RFRigidG9TdHJpbmciLCAwLCBqc19tYXRfdG9zdHJpbmcpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBKU19DRlVOQ19ERUYoImF0IiwgMSwganNfbWF0X2F0KSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSlNfQ0ZVTkNfREVGKCJzZXQiLCAyLCBqc19tYXRfc2V0KSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSlNfQ0ZVTkNfREVGKCJzZXRUbyIsIDEsIGpzX21hdF9zZXRfdG8pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBKU19DRlVOQ19ERUYoImNvbnZlcnRUbyIsIDIsIGpzX21hdF9jb252ZXJ0X3RvKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSlNfQ0ZVTkNfREVGKCJjb3B5VG8iLCAxLCBqc19tYXRfY29weV90byksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEpTX0NGVU5DX0RFRigicmVzaGFwZSIsIDEsIGpzX21hdF9yZXNoYXBlKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSlNfQ0ZVTkNfREVGKCJnZXRVTWF0IiwgMSwganNfbWF0X2dldHVtYXQpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBKU19DRlVOQ19NQUdJQ19ERUYoImtleXMiLCAwLCBqc19tYXRfaXRlcmF0b3JfbmV3LCBNQVRfSVRFUkFUT1JfS0VZUyksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEpTX0NGVU5DX01BR0lDX0RFRigidmFsdWVzIiwgMCwganNfbWF0X2l0ZXJhdG9yX25ldywgTUFUX0lURVJBVE9SX1ZBTFVFUyksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEpTX0NGVU5DX01BR0lDX0RFRigiZW50cmllcyIsIDAsIGpzX21hdF9pdGVyYXRvcl9uZXcsIE1BVF9JVEVSQVRPUl9FTlRSSUVTKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSlNfQUxJQVNfREVGKCJbU3ltYm9sLml0ZXJhdG9yXSIsICJ2YWx1ZXMiKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSlNfQUxJQVNfREVGKCJbU3ltYm9sLnRvUHJpbWl0aXZlXSIsICJ0b1N0cmluZyIpLAoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSlNfUFJPUF9TVFJJTkdfREVGKCJbU3ltYm9sLnRvU3RyaW5nVGFnXSIsICJNYXQiLCBKU19QUk9QX0NPTkZJR1VSQUJMRSkKCn07Cgpjb25zdCBKU0NGdW5jdGlvbkxpc3RFbnRyeSBqc19tYXRfaXRlcmF0b3JfcHJvdG9fZnVuY3NbXSA9IHsKICAgIEpTX0lURVJBVE9SX05FWFRfREVGKCJuZXh0IiwgMCwganNfbWF0X2l0ZXJhdG9yX25leHQsIDApLAogICAgSlNfUFJPUF9TVFJJTkdfREVGKCJbU3ltYm9sLnRvU3RyaW5nVGFnXSIsICJNYXRJdGVyYXRvciIsIEpTX1BST1BfQ09ORklHVVJBQkxFKSwKICAgIEpTX0NGVU5DX0RFRigiW1N5bWJvbC5pdGVyYXRvcl0iLCAwLCBqc19tYXRfaXRlcmF0b3JfZHVwKSwKCn07Cgpjb25zdCBKU0NGdW5jdGlvbkxpc3RFbnRyeSBqc19tYXRfc3RhdGljX2Z1bmNzW10gPSB7CiAgICBKU19DRlVOQ19ERUYoImdldFJvdGF0aW9uTWF0cml4MkQiLCAzLCBqc19tYXRfZ2V0cm90YXRpb25tYXRyaXgyZCksCiAgICBKU19DRlVOQ19NQUdJQ19ERUYoImFkZCIsIDIsIGpzX21hdF9jbGFzc19mdW5jLCAwKSwKICAgIEpTX0NGVU5DX01BR0lDX0RFRigic3ViIiwgMiwganNfbWF0X2NsYXNzX2Z1bmMsIDEpLAogICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJtdWwiLCAyLCBqc19tYXRfY2xhc3NfZnVuYywgMiksCiAgICBKU19DRlVOQ19NQUdJQ19ERUYoImRpdiIsIDIsIGpzX21hdF9jbGFzc19mdW5jLCAzKSwKICAgIEpTX0NGVU5DX01BR0lDX0RFRigiYW5kIiwgMiwganNfbWF0X2NsYXNzX2Z1bmMsIDQpLAogICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJvciIsIDIsIGpzX21hdF9jbGFzc19mdW5jLCA1KSwKICAgIEpTX0NGVU5DX01BR0lDX0RFRigieG9yIiwgMywganNfbWF0X2NsYXNzX2Z1bmMsIDYpLAogICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJ6ZXJvcyIsIDEsIGpzX21hdF9jbGFzc19jcmVhdGUsIDApLAogICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJvbmVzIiwgMSwganNfbWF0X2NsYXNzX2NyZWF0ZSwgMSksCiAgICBKU19QUk9QX0lOVDMyX0RFRigiQ1ZfOFUiLCBDVl9NQUtFVFlQRShDVl84VSwgMSksIEpTX1BST1BfRU5VTUVSQUJMRSksCn07CgppbnQKanNfbWF0X2luaXQoSlNDb250ZXh0KiBjdHgsIEpTTW9kdWxlRGVmKiBtKSB7CiAgaWYoanNfbWF0X2NsYXNzX2lkID09IDApIHsKICAgIC8qIGNyZWF0ZSB0aGUgTWF0IGNsYXNzICovCiAgICBKU19OZXdDbGFzc0lEKCZqc19tYXRfY2xhc3NfaWQpOwogICAgSlNfTmV3Q2xhc3NJRCgmanNfbWF0X2l0ZXJhdG9yX2NsYXNzX2lkKTsKICAgIEpTX05ld0NsYXNzKEpTX0dldFJ1bnRpbWUoY3R4KSwganNfbWF0X2NsYXNzX2lkLCAmanNfbWF0X2NsYXNzKTsKICAgIEpTX05ld0NsYXNzKEpTX0dldFJ1bnRpbWUoY3R4KSwganNfbWF0X2l0ZXJhdG9yX2NsYXNzX2lkLCAmanNfbWF0X2l0ZXJhdG9yX2NsYXNzKTsKCiAgICBtYXRfcHJvdG8gPSBKU19OZXdPYmplY3QoY3R4KTsKICAgIEpTX1NldFByb3BlcnR5RnVuY3Rpb25MaXN0KGN0eCwgbWF0X3Byb3RvLCBqc19tYXRfcHJvdG9fZnVuY3MsIGNvdW50b2YoanNfbWF0X3Byb3RvX2Z1bmNzKSk7CiAgICBKU19TZXRDbGFzc1Byb3RvKGN0eCwganNfbWF0X2NsYXNzX2lkLCBtYXRfcHJvdG8pOwoKICAgIG1hdF9pdGVyYXRvcl9wcm90byA9IEpTX05ld09iamVjdChjdHgpOwogICAgSlNfU2V0UHJvcGVydHlGdW5jdGlvbkxpc3QoY3R4LCBtYXRfaXRlcmF0b3JfcHJvdG8sIGpzX21hdF9pdGVyYXRvcl9wcm90b19mdW5jcywgY291bnRvZihqc19tYXRfaXRlcmF0b3JfcHJvdG9fZnVuY3MpKTsKICAgIEpTX1NldENsYXNzUHJvdG8oY3R4LCBqc19tYXRfaXRlcmF0b3JfY2xhc3NfaWQsIG1hdF9pdGVyYXRvcl9wcm90byk7CgogICAgbWF0X2NsYXNzID0gSlNfTmV3Q0Z1bmN0aW9uMihjdHgsIGpzX21hdF9jdG9yLCAiTWF0IiwgMiwgSlNfQ0ZVTkNfY29uc3RydWN0b3IsIDApOwogICAgLyogc2V0IHByb3RvLmNvbnN0cnVjdG9yIGFuZCBjdG9yLnByb3RvdHlwZSAqLwogICAgSlNfU2V0Q29uc3RydWN0b3IoY3R4LCBtYXRfY2xhc3MsIG1hdF9wcm90byk7CgogICAgSlNfU2V0UHJvcGVydHlGdW5jdGlvbkxpc3QoY3R4LCBtYXRfY2xhc3MsIGpzX21hdF9zdGF0aWNfZnVuY3MsIGNvdW50b2YoanNfbWF0X3N0YXRpY19mdW5jcykpOwoKICAgIGpzX3NldF9pbnNwZWN0X21ldGhvZChjdHgsIG1hdF9wcm90bywganNfbWF0X2luc3BlY3QpOwogICAgLyogICBKU1ZhbHVlIGcgPSBKU19HZXRHbG9iYWxPYmplY3QoY3R4KTsKICAgICAgIGludDMyYXJyYXlfY3RvciA9IEpTX0dldFByb3BlcnR5KGN0eCwgZywgSlNfQVRPTV9JbnQzMkFycmF5KTsKICAgICAgIGludDMyYXJyYXlfcHJvdG8gPSBKU19HZXRQcm90b3R5cGUoY3R4LCBpbnQzMmFycmF5X2N0b3IpOwoKICAgICAgIEpTX0ZyZWVWYWx1ZShjdHgsIGcpOyovCiAgfQoKICBpZihtKQogICAgSlNfU2V0TW9kdWxlRXhwb3J0KGN0eCwgbSwgIk1hdCIsIG1hdF9jbGFzcyk7CiAgcmV0dXJuIDA7Cn0KCmV4dGVybiAiQyIgVklTSUJMRSB2b2lkCmpzX21hdF9leHBvcnQoSlNDb250ZXh0KiBjdHgsIEpTTW9kdWxlRGVmKiBtKSB7CiAgSlNfQWRkTW9kdWxlRXhwb3J0KGN0eCwgbSwgIk1hdCIpOwp9CgojaWYgZGVmaW5lZChKU19NQVRfTU9EVUxFKQojZGVmaW5lIEpTX0lOSVRfTU9EVUxFIFZJU0lCTEUganNfaW5pdF9tb2R1bGUKI2Vsc2UKI2RlZmluZSBKU19JTklUX01PRFVMRSBqc19pbml0X21vZHVsZV9tYXQKI2VuZGlmCgpleHRlcm4gIkMiIEpTTW9kdWxlRGVmKgpKU19JTklUX01PRFVMRShKU0NvbnRleHQqIGN0eCwgY29uc3QgY2hhciogbW9kdWxlX25hbWUpIHsKICBKU01vZHVsZURlZiogbTsKICBtID0gSlNfTmV3Q01vZHVsZShjdHgsIG1vZHVsZV9uYW1lLCAmanNfbWF0X2luaXQpOwogIGlmKCFtKQogICAgcmV0dXJuIE5VTEw7CiAganNfbWF0X2V4cG9ydChjdHgsIG0pOwogIHJldHVybiBtOwp9CgAAAAAAAAAAk7cAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAkWkAAAAAAACRaQAAAAAAAAAAAAAAAPC/"
				],
				[
					157,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"AgAAAOZpAAAAAAAA52kAAAAAAAAAAAAA52kAAAAAAADpaQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA5mkAAAAAAADmaQAAAAAAAP///////+9/"
				],
				[
					158,
					1,
					"insert",
					{
						"characters": "\t"
					},
					"AQAAAOlpAAAAAAAA62kAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA6WkAAAAAAADpaQAAAAAAAAAAAAAAAPC/"
				]
			]
		},
		{
			"file": "js_point.cpp",
			"settings":
			{
				"buffer_size": 12536,
				"line_ending": "Unix"
			},
			"undo_stack":
			[
				[
					3,
					1,
					"cut",
					null,
					"AQAAANMwAAAAAAAA0zAAAAAAAABNAAAACmV4dGVybiAiQyIgVklTSUJMRSB2b2lkIGpzX3BvaW50X2V4cG9ydChKU0NvbnRleHQqIGN0eCwgSlNNb2R1bGVEZWYqIG0pIHsKfQo",
					"AQAAAAAAAAABAAAAIDEAAAAAAADTMAAAAAAAAAAAAAAAAPC/"
				],
				[
					6,
					1,
					"paste",
					null,
					"AQAAAF0vAAAAAAAAqi8AAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAXS8AAAAAAABdLwAAAAAAAAAAAAAAAPC/"
				],
				[
					13,
					1,
					"cut",
					null,
					"AQAAAOowAAAAAAAA6jAAAAAAAAAnAAAAICBKU19BZGRNb2R1bGVFeHBvcnQoY3R4LCBtLCAiUG9pbnQiKTsK",
					"AQAAAAAAAAABAAAA6jAAAAAAAAARMQAAAAAAAAAAAAAAAPC/"
				],
				[
					16,
					1,
					"paste",
					null,
					"AQAAAKgvAAAAAAAAzy8AAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAqC8AAAAAAACoLwAAAAAAAAAAAAAAAPC/"
				],
				[
					19,
					1,
					"insert",
					{
						"characters": "\njs_poitn_expor"
					},
					"EgAAABAxAAAAAAAAETEAAAAAAAAAAAAAETEAAAAAAAAVMQAAAAAAAAAAAAARMQAAAAAAABExAAAAAAAABAAAACAgICARMQAAAAAAABMxAAAAAAAAAAAAABMxAAAAAAAAFDEAAAAAAAAAAAAAFDEAAAAAAAAVMQAAAAAAAAAAAAAVMQAAAAAAABYxAAAAAAAAAAAAABYxAAAAAAAAFzEAAAAAAAAAAAAAFzEAAAAAAAAYMQAAAAAAAAAAAAAYMQAAAAAAABkxAAAAAAAAAAAAABkxAAAAAAAAGjEAAAAAAAAAAAAAGjEAAAAAAAAbMQAAAAAAAAAAAAAbMQAAAAAAABwxAAAAAAAAAAAAABwxAAAAAAAAHTEAAAAAAAAAAAAAHTEAAAAAAAAeMQAAAAAAAAAAAAAeMQAAAAAAAB8xAAAAAAAAAAAAAB8xAAAAAAAAIDEAAAAAAAAAAAAAIDEAAAAAAAAhMQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAEDEAAAAAAAAQMQAAAAAAAAAAAAAAAPC/"
				],
				[
					20,
					1,
					"insert",
					{
						"characters": "t"
					},
					"AQAAACExAAAAAAAAIjEAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAITEAAAAAAAAhMQAAAAAAAAAAAAAAAPC/"
				],
				[
					21,
					9,
					"left_delete",
					null,
					"CQAAACExAAAAAAAAITEAAAAAAAABAAAAdCAxAAAAAAAAIDEAAAAAAAABAAAAch8xAAAAAAAAHzEAAAAAAAABAAAAbx4xAAAAAAAAHjEAAAAAAAABAAAAcB0xAAAAAAAAHTEAAAAAAAABAAAAeBwxAAAAAAAAHDEAAAAAAAABAAAAZRsxAAAAAAAAGzEAAAAAAAABAAAAXxoxAAAAAAAAGjEAAAAAAAABAAAAbhkxAAAAAAAAGTEAAAAAAAABAAAAdA",
					"AQAAAAAAAAABAAAAIjEAAAAAAAAiMQAAAAAAAAAAAAAAAPC/"
				],
				[
					22,
					1,
					"insert",
					{
						"characters": "nt_export"
					},
					"CQAAABkxAAAAAAAAGjEAAAAAAAAAAAAAGjEAAAAAAAAbMQAAAAAAAAAAAAAbMQAAAAAAABwxAAAAAAAAAAAAABwxAAAAAAAAHTEAAAAAAAAAAAAAHTEAAAAAAAAeMQAAAAAAAAAAAAAeMQAAAAAAAB8xAAAAAAAAAAAAAB8xAAAAAAAAIDEAAAAAAAAAAAAAIDEAAAAAAAAhMQAAAAAAAAAAAAAhMQAAAAAAACIxAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAGTEAAAAAAAAZMQAAAAAAAAAAAAAAAPC/"
				],
				[
					23,
					1,
					"insert_snippet",
					{
						"contents": "($0)"
					},
					"AQAAACIxAAAAAAAAJDEAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAIjEAAAAAAAAiMQAAAAAAAAAAAAAAAPC/"
				],
				[
					24,
					1,
					"insert",
					{
						"characters": "ctx,m"
					},
					"BQAAACMxAAAAAAAAJDEAAAAAAAAAAAAAJDEAAAAAAAAlMQAAAAAAAAAAAAAlMQAAAAAAACYxAAAAAAAAAAAAACYxAAAAAAAAJzEAAAAAAAAAAAAAJzEAAAAAAAAoMQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAIzEAAAAAAAAjMQAAAAAAAAAAAAAAAPC/"
				],
				[
					26,
					1,
					"insert",
					{
						"characters": ";"
					},
					"AQAAACkxAAAAAAAAKjEAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAKTEAAAAAAAApMQAAAAAAAAAAAAAAAPC/"
				],
				[
					27,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAAA6MQAAI2luY2x1ZGUgImpzYmluZGluZ3MuaHBwIgojaW5jbHVkZSAianMuaHBwIgojaW5jbHVkZSAianNfcG9pbnQuaHBwIgojaW5jbHVkZSAianNfcmVjdC5ocHAiCiNpbmNsdWRlICJqc19tYXQuaHBwIgojaW5jbHVkZSAianNfYXJyYXkuaHBwIgojaW5jbHVkZSAianNfYWxsb2MuaHBwIgojaW5jbHVkZSAianNfdHlwZWRfYXJyYXkuaHBwIgojaW5jbHVkZSAicXVpY2tqcy9jdXRpbHMuaCIKI2luY2x1ZGUgInF1aWNranMvcXVpY2tqcy5oIgoKI2luY2x1ZGUgPGxpc3Q+CiNpbmNsdWRlIDxvcGVuY3YyL2NvcmUvY29yZS5ocHA+CiNpbmNsdWRlIDxvcGVuY3YyL2ltZ3Byb2MvaW1ncHJvYy5ocHA+CgpzdGQ6OnZlY3RvcjxKU1BvaW50RGF0YTxkb3VibGU+Kj4gcG9pbnRzOwoKZXh0ZXJuICJDIiB7CgpKU1ZhbHVlIHBvaW50X3Byb3RvID0gSlNfVU5ERUZJTkVEOwpKU0NsYXNzSUQganNfcG9pbnRfY2xhc3NfaWQgPSAwOwoKVklTSUJMRSBKU1ZhbHVlCmpzX3BvaW50X25ldyhKU0NvbnRleHQqIGN0eCwgZG91YmxlIHgsIGRvdWJsZSB5KSB7CiAgSlNWYWx1ZSByZXQ7CiAgSlNQb2ludERhdGE8ZG91YmxlPiogczsKCiAgaWYoSlNfSXNVbmRlZmluZWQocG9pbnRfcHJvdG8pKQogICAganNfcG9pbnRfaW5pdChjdHgsIE5VTEwpOwoKICByZXQgPSBKU19OZXdPYmplY3RQcm90b0NsYXNzKGN0eCwgcG9pbnRfcHJvdG8sIGpzX3BvaW50X2NsYXNzX2lkKTsKCiAgcyA9IGpzX2FsbG9jYXRlPEpTUG9pbnREYXRhPGRvdWJsZT4+KGN0eCk7CgogIG5ldyhzKSBKU1BvaW50RGF0YTxkb3VibGU+KCk7CiAgcy0+eCA9IHggPD0gREJMX0VQU0lMT04gPyAwIDogeDsKICBzLT55ID0geSA8PSBEQkxfRVBTSUxPTiA/IDAgOiB5OwoKICBwb2ludHMucHVzaF9iYWNrKHMpOwoKICBKU19TZXRPcGFxdWUocmV0LCBzKTsKICByZXR1cm4gcmV0Owp9CgpWSVNJQkxFIEpTVmFsdWUKanNfcG9pbnRfd3JhcChKU0NvbnRleHQqIGN0eCwgY29uc3QgSlNQb2ludERhdGE8ZG91YmxlPiYgcG9pbnQpIHsKICByZXR1cm4ganNfcG9pbnRfbmV3KGN0eCwgcG9pbnQueCwgcG9pbnQueSk7Cn0KCkpTVmFsdWUKanNfcG9pbnRfY2xvbmUoSlNDb250ZXh0KiBjdHgsIGNvbnN0IEpTUG9pbnREYXRhPGRvdWJsZT4mIHBvaW50KSB7CiAgcmV0dXJuIGpzX3BvaW50X25ldyhjdHgsIHBvaW50LngsIHBvaW50LnkpOwp9CgpzdGF0aWMgSlNWYWx1ZQpqc19wb2ludF9jcm9zcyhKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2KSB7CiAgSlNQb2ludERhdGE8ZG91YmxlPiogcyA9IGpzX3BvaW50X2RhdGEoY3R4LCB0aGlzX3ZhbCk7CiAgSlNQb2ludERhdGE8ZG91YmxlPiogb3RoZXIgPSBqc19wb2ludF9kYXRhKGN0eCwgYXJndlswXSk7CiAgZG91YmxlIHJldHZhbDsKICBpZighcyB8fCAhb3RoZXIpCiAgICByZXR1cm4gSlNfRVhDRVBUSU9OOwogIHJldHZhbCA9IHMtPmNyb3NzKCpvdGhlcik7CiAgcmV0dXJuIEpTX05ld0Zsb2F0NjQoY3R4LCByZXR2YWwpOwp9CgpzdGF0aWMgSlNWYWx1ZQpqc19wb2ludF9jdG9yKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgbmV3X3RhcmdldCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCogYXJndikgewogIGRvdWJsZSB4LCB5OwogIEpTUG9pbnREYXRhPGRvdWJsZT4gcG9pbnQ7CgogIGlmKGFyZ2MgPiAwKSB7CiAgICBpZihqc19wb2ludF9yZWFkKGN0eCwgYXJndlswXSwgJnBvaW50KSkgewogICAgICB4ID0gcG9pbnQueDsKICAgICAgeSA9IHBvaW50Lnk7CiAgICB9IGVsc2UgewogICAgICBpZihKU19Ub0Zsb2F0NjQoY3R4LCAmeCwgYXJndlswXSkpCiAgICAgICAgcmV0dXJuIEpTX0VYQ0VQVElPTjsKICAgICAgaWYoYXJnYyA8IDIgfHwgSlNfVG9GbG9hdDY0KGN0eCwgJnksIGFyZ3ZbMV0pKQogICAgICAgIHJldHVybiBKU19FWENFUFRJT047CiAgICB9CiAgfQoKICByZXR1cm4ganNfcG9pbnRfbmV3KGN0eCwgeCwgeSk7Cn0KClZJU0lCTEUgSlNQb2ludERhdGE8ZG91YmxlPioKanNfcG9pbnRfZGF0YShKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHZhbCkgewogIHJldHVybiBzdGF0aWNfY2FzdDxKU1BvaW50RGF0YTxkb3VibGU+Kj4oSlNfR2V0T3BhcXVlMihjdHgsIHZhbCwganNfcG9pbnRfY2xhc3NfaWQpKTsKfQoKc3RhdGljIEpTVmFsdWUKanNfcG9pbnRfZGRvdChKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2KSB7CiAgSlNQb2ludERhdGE8ZG91YmxlPiogcyA9IGpzX3BvaW50X2RhdGEoY3R4LCB0aGlzX3ZhbCk7CiAgSlNQb2ludERhdGE8ZG91YmxlPiogb3RoZXIgPSBqc19wb2ludF9kYXRhKGN0eCwgYXJndlswXSk7CiAgZG91YmxlIHJldHZhbDsKICBpZighcyB8fCAhb3RoZXIpCiAgICByZXR1cm4gSlNfRVhDRVBUSU9OOwogIHJldHZhbCA9IHMtPmRkb3QoKm90aGVyKTsKICByZXR1cm4gSlNfTmV3RmxvYXQ2NChjdHgsIHJldHZhbCk7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX3BvaW50X2RpZmYoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCogYXJndikgewogIEpTUG9pbnREYXRhPGRvdWJsZT4qIHMgPSBqc19wb2ludF9kYXRhKGN0eCwgdGhpc192YWwpOwogIEpTUG9pbnREYXRhPGRvdWJsZT4qIG90aGVyID0ganNfcG9pbnRfZGF0YShjdHgsIGFyZ3ZbMF0pOwoKICBKU1ZhbHVlIHJldDsKICBpZighcyB8fCAhb3RoZXIpCiAgICByZXR1cm4gSlNfRVhDRVBUSU9OOwoKICByZXQgPSBqc19wb2ludF9uZXcoY3R4LCBzLT54IC0gb3RoZXItPngsIHMtPnkgLSBvdGhlci0+eSk7CiAgcmV0dXJuIHJldDsKfQoKc3RhdGljIEpTVmFsdWUKanNfcG9pbnRfZ2V0X3h5KEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBtYWdpYykgewogIEpTUG9pbnREYXRhPGRvdWJsZT4qIHMgPSBqc19wb2ludF9kYXRhKGN0eCwgdGhpc192YWwpOwogIGlmKCFzKQogICAgcmV0dXJuIEpTX0VYQ0VQVElPTjsKICBpZihtYWdpYyA9PSAwKQogICAgcmV0dXJuIEpTX05ld0Zsb2F0NjQoY3R4LCBzLT54KTsKICBlbHNlIGlmKG1hZ2ljID09IDEpCiAgICByZXR1cm4gSlNfTmV3RmxvYXQ2NChjdHgsIHMtPnkpOwogIHJldHVybiBKU19VTkRFRklORUQ7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX3BvaW50X2luc2lkZShKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2KSB7CiAgSlNQb2ludERhdGE8ZG91YmxlPiogcyA9IGpzX3BvaW50X2RhdGEoY3R4LCB0aGlzX3ZhbCk7CiAgSlNSZWN0RGF0YTxkb3VibGU+IHIgPSBqc19yZWN0X2dldChjdHgsIGFyZ3ZbMF0pOwogIGJvb2wgcmV0dmFsOwogIGlmKCFzIC8qfHwgIXIqLykKICAgIHJldHVybiBKU19FWENFUFRJT047CgogIHJldHZhbCA9IHMtPmluc2lkZShyKTsKCiAgcmV0dXJuIEpTX05ld0Jvb2woY3R4LCByZXR2YWwpOwp9CgpzdGF0aWMgSlNWYWx1ZQpqc19wb2ludF9ub3JtKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QqIGFyZ3YpIHsKICBKU1BvaW50RGF0YTxkb3VibGU+KiBzID0ganNfcG9pbnRfZGF0YShjdHgsIHRoaXNfdmFsKTsKICBpZighcykKICAgIHJldHVybiBKU19FWENFUFRJT047CiAgcmV0dXJuIEpTX05ld0Zsb2F0NjQoY3R4LCBzcXJ0KChkb3VibGUpcy0+eCAqIHMtPnggKyAoZG91YmxlKXMtPnkgKiBzLT55KSk7Cn0KCi8qCnN0YXRpYyBKU1ZhbHVlCmpzX3BvaW50X211bChKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2KSB7CiAgSlNQb2ludERhdGE8ZG91YmxlPiogcyA9IGpzX3BvaW50X2RhdGEoY3R4LCB0aGlzX3ZhbCk7CiAgZG91YmxlIGZhY3RvciA9IDEuMDsKICBKU19Ub0Zsb2F0NjQoY3R4LCAmZmFjdG9yLCBhcmd2WzBdKTsKICBKU1ZhbHVlIHJldDsKICBpZighcyB8fCBhcmdjIDwgMSkKICAgIHJldHVybiBKU19FWENFUFRJT047CgogIHJldHVybiBqc19wb2ludF9uZXcoY3R4LCBzLT54ICogZmFjdG9yLCBzLT55ICogZmFjdG9yKTsKfQoKc3RhdGljIEpTVmFsdWUKanNfcG9pbnRfcXVvdChKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2KSB7CiAgSlNQb2ludERhdGE8ZG91YmxlPiogcyA9IGpzX3BvaW50X2RhdGEoY3R4LCB0aGlzX3ZhbCk7CiAgZG91YmxlIGRpdmlzb3IgPSAxLjA7CiAgSlNfVG9GbG9hdDY0KGN0eCwgJmRpdmlzb3IsIGFyZ3ZbMF0pOwogIEpTVmFsdWUgcmV0OwogIGlmKCFzIHx8IGFyZ2MgPCAxKQogICAgcmV0dXJuIEpTX0VYQ0VQVElPTjsKCiAgcmV0ID0ganNfcG9pbnRfbmV3KGN0eCwgcy0+eCAvIGRpdmlzb3IsIHMtPnkgLyBkaXZpc29yKTsKICByZXR1cm4gcmV0Owp9Ki8KCnN0YXRpYyBKU1ZhbHVlCmpzX3BvaW50X3NldF94eShKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBKU1ZhbHVlQ29uc3QgdmFsLCBpbnQgbWFnaWMpIHsKICBKU1BvaW50RGF0YTxkb3VibGU+KiBzID0ganNfcG9pbnRfZGF0YShjdHgsIHRoaXNfdmFsKTsKICBkb3VibGUgdjsKICBpZighcykKICAgIHJldHVybiBKU19FWENFUFRJT047CiAgaWYoSlNfVG9GbG9hdDY0KGN0eCwgJnYsIHZhbCkpCiAgICByZXR1cm4gSlNfRVhDRVBUSU9OOwogIGlmKG1hZ2ljID09IDApCiAgICBzLT54ID0gdjsKICBlbHNlCiAgICBzLT55ID0gdjsKICByZXR1cm4gSlNfVU5ERUZJTkVEOwp9CgpzdGF0aWMgSlNWYWx1ZQpqc19wb2ludF9hZGQoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCogYXJndiwgaW50IG1hZ2ljKSB7CiAgSlNQb2ludERhdGE8ZG91YmxlPiBvdGhlciwgcG9pbnQsICpzID0ganNfcG9pbnRfZGF0YShjdHgsIHRoaXNfdmFsKTsKICBkb3VibGUgeCwgeTsKCiAgaWYoanNfcG9pbnRfcmVhZChjdHgsIGFyZ3ZbMF0sICZvdGhlcikpIHsKICAgIHggPSBvdGhlci54OwogICAgeSA9IG90aGVyLnk7CiAgfSBlbHNlIHsKICAgIEpTX1RvRmxvYXQ2NChjdHgsICZ4LCBhcmd2WzBdKTsKICAgIGlmKGFyZ2MgPCAyKQogICAgICB5ID0geDsKICAgIGVsc2UKICAgICAgSlNfVG9GbG9hdDY0KGN0eCwgJnksIGFyZ3ZbMV0pOwogIH0KCiAgc3dpdGNoKG1hZ2ljKSB7CiAgICBjYXNlIDA6CiAgICAgIHBvaW50LnggPSBzLT54ICsgeDsKICAgICAgcG9pbnQueSA9IHMtPnkgKyB5OwoKICAgICAgYnJlYWs7CiAgICBjYXNlIDE6CiAgICAgIHBvaW50LnggPSBzLT54IC0geDsKICAgICAgcG9pbnQueSA9IHMtPnkgLSB5OwogICAgICBicmVhazsKICAgIGNhc2UgMjoKICAgICAgcG9pbnQueCA9IHMtPnggKiB4OwogICAgICBwb2ludC55ID0gcy0+eSAqIHk7CiAgICAgIGJyZWFrOwogICAgY2FzZSAzOgogICAgICBwb2ludC54ID0gcy0+eCAvIHg7CiAgICAgIHBvaW50LnkgPSBzLT55IC8geTsKICAgICAgYnJlYWs7CiAgfQogIHJldHVybiBqc19wb2ludF93cmFwKGN0eCwgcG9pbnQpOwp9CgpzdGF0aWMgSlNWYWx1ZQpqc19wb2ludF90b19zdHJpbmcoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCogYXJndiwgaW50IG1hZ2ljKSB7CiAgSlNQb2ludERhdGE8ZG91YmxlPiogcyA9IGpzX3BvaW50X2RhdGEoY3R4LCB0aGlzX3ZhbCk7CiAgc3RkOjpvc3RyaW5nc3RyZWFtIG9zOwogIEpTVmFsdWUgeHYsIHl2OwogIGNvbnN0IGNoYXIqIGRlbGltID0gIiwiOwogIGRvdWJsZSB4ID0gLTEsIHkgPSAtMTsKICAvKiBpZighcykKICAgICByZXR1cm4gSlNfRVhDRVBUSU9OOyovCiAgaWYoYXJnYyA+IDApCiAgICBkZWxpbSA9IEpTX1RvQ1N0cmluZyhjdHgsIGFyZ3ZbMF0pOwoKICB4diA9IEpTX0dldFByb3BlcnR5U3RyKGN0eCwgdGhpc192YWwsICJ4Iik7CiAgeXYgPSBKU19HZXRQcm9wZXJ0eVN0cihjdHgsIHRoaXNfdmFsLCAieSIpOwoKICBpZihKU19Jc051bWJlcih4dikgJiYgSlNfSXNOdW1iZXIoeXYpKSB7CiAgICBKU19Ub0Zsb2F0NjQoY3R4LCAmeCwgeHYpOwogICAgSlNfVG9GbG9hdDY0KGN0eCwgJnksIHl2KTsKICB9IGVsc2UgaWYocykgewogICAgeCA9IHMtPng7CiAgICB5ID0gcy0+eTsKICB9CgogIHN3aXRjaChtYWdpYykgewogICAgY2FzZSAwOiB7CiAgICAgIG9zIDw8IHggPDwgIiwiIDw8IHk7CiAgICAgIGJyZWFrOwogICAgfQogICAgY2FzZSAxOiB7CiAgICAgIG9zIDw8ICJbIiA8PCB4IDw8ICIsIiA8PCB5IDw8ICJdIjsKICAgICAgYnJlYWs7CiAgICB9CiAgICBjYXNlIDI6IHsKCiAgICAgIG9zIDw8ICJ7eDoiIDw8IHggPDwgIix5OiIgPDwgeSA8PCAifSI7CiAgICAgIGJyZWFrOwogICAgfQogIH0KICByZXR1cm4gSlNfTmV3U3RyaW5nKGN0eCwgb3Muc3RyKCkuY19zdHIoKSk7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX3BvaW50X3RvX2FycmF5KEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QqIGFyZ3YpIHsKICBKU1BvaW50RGF0YTxkb3VibGU+KiBzID0ganNfcG9pbnRfZGF0YShjdHgsIHRoaXNfdmFsKTsKICBzdGQ6OmFycmF5PGRvdWJsZSwgMj4gYXJyOwoKICBhcnJbMF0gPSBzLT54OwogIGFyclsxXSA9IHMtPnk7CgogIHJldHVybiBqc19hcnJheV9mcm9tKGN0eCwgYXJyLmNiZWdpbigpLCBhcnIuY2VuZCgpKTsKfQoKc3RhdGljIEpTVmFsdWUKanNfcG9pbnRfaW5zcGVjdChKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2KSB7CiAgSlNQb2ludERhdGE8ZG91YmxlPiogcyA9IGpzX3BvaW50X2RhdGEoY3R4LCB0aGlzX3ZhbCk7CiAgSlNWYWx1ZSBvYmogPSBKU19OZXdPYmplY3RQcm90byhjdHgsIHBvaW50X3Byb3RvKTsKCiAgSlNfRGVmaW5lUHJvcGVydHlWYWx1ZVN0cihjdHgsIG9iaiwgIngiLCBKU19OZXdGbG9hdDY0KGN0eCwgcy0+eCksIEpTX1BST1BfRU5VTUVSQUJMRSk7CiAgSlNfRGVmaW5lUHJvcGVydHlWYWx1ZVN0cihjdHgsIG9iaiwgInkiLCBKU19OZXdGbG9hdDY0KGN0eCwgcy0+eSksIEpTX1BST1BfRU5VTUVSQUJMRSk7CgogIHJldHVybiBvYmo7Cn0KCnN0YXRpYyBKU1ZhbHVlIGl0ZXJhdG9yX3N5bWJvbCA9IEpTX1VOREVGSU5FRDsKCnN0YXRpYyBKU1ZhbHVlCmpzX3BvaW50X3N5bWJvbF9pdGVyYXRvcihKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2KSB7CiAgSlNWYWx1ZSBhcnIsIGl0ZXI7CiAganNydCBqcyhjdHgpOwogIGFyciA9IGpzX3BvaW50X3RvX2FycmF5KGN0eCwgdGhpc192YWwsIGFyZ2MsIGFyZ3YpOwoKICBpZihKU19Jc1VuZGVmaW5lZChpdGVyYXRvcl9zeW1ib2wpKQogICAgaXRlcmF0b3Jfc3ltYm9sID0ganMuZ2V0X3N5bWJvbCgiaXRlcmF0b3IiKTsKCiAgaWYoIUpTX0lzRnVuY3Rpb24oY3R4LCAoaXRlciA9IGpzLmdldF9wcm9wZXJ0eShhcnIsIGl0ZXJhdG9yX3N5bWJvbCkpKSkKICAgIHJldHVybiBKU19FWENFUFRJT047CiAgcmV0dXJuIEpTX0NhbGwoY3R4LCBpdGVyLCBhcnIsIDAsIGFyZ3YpOwp9CgpzdGF0aWMgSlNWYWx1ZQpqc19wb2ludF9yb3VuZChKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2LCBpbnQgbWFnaWMpIHsKICBKU1BvaW50RGF0YTxkb3VibGU+IHBvaW50LCAqcyA9IGpzX3BvaW50X2RhdGEoY3R4LCB0aGlzX3ZhbCk7CiAgZG91YmxlIHgsIHk7CiAgZG91YmxlIHByZWMgPSAxOwogIHBvaW50ID0gKnM7CiAgSlNWYWx1ZSByZXQgPSBKU19VTkRFRklORUQ7CgogIHN3aXRjaChtYWdpYykgewogICAgY2FzZSAwOgogICAgICBpZihhcmdjID4gMCkKICAgICAgICBKU19Ub0Zsb2F0NjQoY3R4LCAmcHJlYywgYXJndlswXSk7CgogICAgICB4ID0gcm91bmQocy0+eCAvIHByZWMpOwogICAgICB5ID0gcm91bmQocy0+eSAvIHByZWMpOwogICAgICByZXQgPSBqc19wb2ludF9uZXcoY3R4LCB4ICogcHJlYywgeSAqIHByZWMpOwogICAgICBicmVhazsKICAgIGNhc2UgMToKICAgICAgaWYoYXJnYyA+IDApCiAgICAgICAgSlNfVG9GbG9hdDY0KGN0eCwgJnByZWMsIGFyZ3ZbMF0pOwoKICAgICAgeCA9IGZsb29yKHMtPnggLyBwcmVjKTsKICAgICAgeSA9IGZsb29yKHMtPnkgLyBwcmVjKTsKICAgICAgcmV0ID0ganNfcG9pbnRfbmV3KGN0eCwgeCAqIHByZWMsIHkgKiBwcmVjKTsKICAgICAgYnJlYWs7CiAgICBjYXNlIDI6CiAgICAgIGlmKGFyZ2MgPiAwKQogICAgICAgIEpTX1RvRmxvYXQ2NChjdHgsICZwcmVjLCBhcmd2WzBdKTsKCiAgICAgIHggPSBjZWlsKHMtPnggLyBwcmVjKTsKICAgICAgeSA9IGNlaWwocy0+eSAvIHByZWMpOwogICAgICByZXQgPSBqc19wb2ludF9uZXcoY3R4LCB4ICogcHJlYywgeSAqIHByZWMpOwogICAgICBicmVhazsKICB9CiAgcmV0dXJuIHJldDsKfQoKc3RhdGljIEpTVmFsdWUKanNfcG9pbnRfZnJvbShKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHBvaW50LCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2KSB7CiAgc3RkOjphcnJheTxkb3VibGUsIDI+IGFycmF5OwogIEpTVmFsdWUgcmV0ID0gSlNfRVhDRVBUSU9OOwoKICBpZihKU19Jc1N0cmluZyhhcmd2WzBdKSkgewogICAgY29uc3QgY2hhciogc3RyID0gSlNfVG9DU3RyaW5nKGN0eCwgYXJndlswXSk7CiAgICBjaGFyKiBlbmRwdHIgPSBudWxscHRyOwogICAgZm9yKHNpemVfdCBpID0gMDsgaSA8IDI7IGkrKykgewogICAgICB3aGlsZSghaXNkaWdpdCgqc3RyKSAmJiAqc3RyICE9ICctJyAmJiAqc3RyICE9ICcrJyAmJiAhKCpzdHIgPT0gJy4nICYmIGlzZGlnaXQoc3RyWzFdKSkpIHN0cisrOwogICAgICBpZigqc3RyID09ICdcMCcpCiAgICAgICAgYnJlYWs7CiAgICAgIGFycmF5W2ldID0gc3RydG9kKHN0ciwgJmVuZHB0cik7CiAgICAgIHN0ciA9IGVuZHB0cjsKICAgIH0KICB9IGVsc2UgaWYoanNfaXNfYXJyYXkoY3R4LCBhcmd2WzBdKSkgewogICAganNfYXJyYXlfdG88ZG91YmxlLCAyPihjdHgsIGFyZ3ZbMF0sIGFycmF5KTsKICB9CiAgaWYoYXJyYXlbMF0gPiAwICYmIGFycmF5WzFdID4gMCkKICAgIHJldCA9IGpzX3BvaW50X25ldyhjdHgsIGFycmF5WzBdLCBhcnJheVsxXSk7CiAgcmV0dXJuIHJldDsKfQoKc3RhdGljIHZvaWQKanNfcG9pbnRfZmluYWxpemVyKEpTUnVudGltZSogcnQsIEpTVmFsdWUgdmFsKSB7CiAgSlNQb2ludERhdGE8ZG91YmxlPiogcyA9IHN0YXRpY19jYXN0PEpTUG9pbnREYXRhPGRvdWJsZT4qPihKU19HZXRPcGFxdWUodmFsLCBqc19wb2ludF9jbGFzc19pZCkpOwoKICBpZihzICE9IG51bGxwdHIpIHsKICAgIGpzX2RlYWxsb2NhdGUocnQsIHMpOwogIH0KCiAgLy8gSlNfRnJlZVZhbHVlUlQocnQsIHZhbCk7CgogIC8qICBpZihwb2ludHMuc2l6ZSgpID09IDApCiAgICAgIEpTX0ZyZWVWYWx1ZVJUKHJ0LCBwb2ludF9wcm90byk7Ki8KfQoKSlNWYWx1ZSBwb2ludF9jbGFzcyA9IEpTX1VOREVGSU5FRDsKCkpTQ2xhc3NEZWYganNfcG9pbnRfY2xhc3MgPSB7CiAgICAuY2xhc3NfbmFtZSA9ICJQb2ludCIsCiAgICAuZmluYWxpemVyID0ganNfcG9pbnRfZmluYWxpemVyLAp9OwoKY29uc3QgSlNDRnVuY3Rpb25MaXN0RW50cnkganNfcG9pbnRfcHJvdG9fZnVuY3NbXSA9IHsKICAgIEpTX0NHRVRTRVRfRU5VTUVSQUJMRV9ERUYoIngiLCBqc19wb2ludF9nZXRfeHksIGpzX3BvaW50X3NldF94eSwgMCksCiAgICBKU19DR0VUU0VUX0VOVU1FUkFCTEVfREVGKCJ5IiwganNfcG9pbnRfZ2V0X3h5LCBqc19wb2ludF9zZXRfeHksIDEpLAogICAgSlNfQ0ZVTkNfREVGKCJjcm9zcyIsIDEsIGpzX3BvaW50X2Nyb3NzKSwKICAgIEpTX0NGVU5DX0RFRigiZG90IiwgMSwganNfcG9pbnRfZGRvdCksCiAgICBKU19DRlVOQ19ERUYoImluc2lkZSIsIDEsIGpzX3BvaW50X2luc2lkZSksCiAgICBKU19DRlVOQ19ERUYoImRpZmYiLCAxLCBqc19wb2ludF9kaWZmKSwKICAgIEpTX0NGVU5DX01BR0lDX0RFRigiYWRkIiwgMSwganNfcG9pbnRfYWRkLCAwKSwKICAgIEpTX0NGVU5DX01BR0lDX0RFRigic3ViIiwgMSwganNfcG9pbnRfYWRkLCAxKSwKICAgIEpTX0NGVU5DX01BR0lDX0RFRigibXVsIiwgMSwganNfcG9pbnRfYWRkLCAyKSwKICAgIEpTX0NGVU5DX01BR0lDX0RFRigiZGl2IiwgMSwganNfcG9pbnRfYWRkLCAzKSwKICAgIEpTX0NGVU5DX0RFRigibm9ybSIsIDAsIGpzX3BvaW50X25vcm0pLAogICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJyb3VuZCIsIDAsIGpzX3BvaW50X3JvdW5kLCAwKSwKICAgIEpTX0NGVU5DX01BR0lDX0RFRigiZmxvb3IiLCAwLCBqc19wb2ludF9yb3VuZCwgMSksCiAgICBKU19DRlVOQ19NQUdJQ19ERUYoImNlaWwiLCAwLCBqc19wb2ludF9yb3VuZCwgMiksCiAgICBKU19DRlVOQ19NQUdJQ19ERUYoInRvU3RyaW5nIiwgMCwganNfcG9pbnRfdG9fc3RyaW5nLCAwKSwKICAgIEpTX0NGVU5DX0RFRigidG9BcnJheSIsIDAsIGpzX3BvaW50X3RvX2FycmF5KSwKICAgIEpTX0NGVU5DX0RFRigiW1N5bWJvbC5pdGVyYXRvcl0iLCAwLCBqc19wb2ludF9zeW1ib2xfaXRlcmF0b3IpLAogICAgSlNfUFJPUF9TVFJJTkdfREVGKCJbU3ltYm9sLnRvU3RyaW5nVGFnXSIsICJQb2ludCIsIEpTX1BST1BfQ09ORklHVVJBQkxFKSwKCiAgICAvLyBKU19DRlVOQ19NQUdJQ19ERUYoIltTeW1ib2wudG9TdHJpbmdUYWddIiwgMCwganNfcG9pbnRfdG9fc3RyaW5nLCAxKSwKfTsKY29uc3QgSlNDRnVuY3Rpb25MaXN0RW50cnkganNfcG9pbnRfc3RhdGljX2Z1bmNzW10gPSB7SlNfQ0ZVTkNfREVGKCJmcm9tIiwgMSwganNfcG9pbnRfZnJvbSl9OwoKaW50CmpzX3BvaW50X2luaXQoSlNDb250ZXh0KiBjdHgsIEpTTW9kdWxlRGVmKiBtKSB7CgogIGlmKGpzX3BvaW50X2NsYXNzX2lkID09IDApIHsKICAgIC8qIGNyZWF0ZSB0aGUgUG9pbnQgY2xhc3MgKi8KICAgIEpTX05ld0NsYXNzSUQoJmpzX3BvaW50X2NsYXNzX2lkKTsKICAgIEpTX05ld0NsYXNzKEpTX0dldFJ1bnRpbWUoY3R4KSwganNfcG9pbnRfY2xhc3NfaWQsICZqc19wb2ludF9jbGFzcyk7CgogICAgcG9pbnRfcHJvdG8gPSBKU19OZXdPYmplY3QoY3R4KTsKICAgIEpTX1NldFByb3BlcnR5RnVuY3Rpb25MaXN0KGN0eCwgcG9pbnRfcHJvdG8sIGpzX3BvaW50X3Byb3RvX2Z1bmNzLCBjb3VudG9mKGpzX3BvaW50X3Byb3RvX2Z1bmNzKSk7CiAgICBKU19TZXRDbGFzc1Byb3RvKGN0eCwganNfcG9pbnRfY2xhc3NfaWQsIHBvaW50X3Byb3RvKTsKCiAgICBwb2ludF9jbGFzcyA9IEpTX05ld0NGdW5jdGlvbjIoY3R4LCBqc19wb2ludF9jdG9yLCAiUG9pbnQiLCAwLCBKU19DRlVOQ19jb25zdHJ1Y3RvciwgMCk7CiAgICAvKiBzZXQgcHJvdG8uY29uc3RydWN0b3IgYW5kIGN0b3IucHJvdG90eXBlICovCiAgICBKU19TZXRDb25zdHJ1Y3RvcihjdHgsIHBvaW50X2NsYXNzLCBwb2ludF9wcm90byk7CiAgICBKU19TZXRQcm9wZXJ0eUZ1bmN0aW9uTGlzdChjdHgsIHBvaW50X2NsYXNzLCBqc19wb2ludF9zdGF0aWNfZnVuY3MsIGNvdW50b2YoanNfcG9pbnRfc3RhdGljX2Z1bmNzKSk7CgogICAganNfc2V0X2luc3BlY3RfbWV0aG9kKGN0eCwgcG9pbnRfcHJvdG8sIGpzX3BvaW50X2luc3BlY3QpOwogIH0KCiAgaWYobSkKICAgIEpTX1NldE1vZHVsZUV4cG9ydChjdHgsIG0sICJQb2ludCIsIHBvaW50X2NsYXNzKTsKICAvKiBlbHNlCiAgICAgSlNfU2V0UHJvcGVydHlTdHIoY3R4LCAqc3RhdGljX2Nhc3Q8SlNWYWx1ZSo+KG0pLCBuYW1lLCBwb2ludF9jbGFzcyk7Ki8KICByZXR1cm4gMDsKfQoKdm9pZApqc19wb2ludF9jb25zdHJ1Y3RvcihKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZSBwYXJlbnQsIGNvbnN0IGNoYXIqIG5hbWUpIHsKICBpZihKU19Jc1VuZGVmaW5lZChwb2ludF9jbGFzcykpCiAgICBqc19wb2ludF9pbml0KGN0eCwgMCk7CgogIEpTX1NldFByb3BlcnR5U3RyKGN0eCwgcGFyZW50LCBuYW1lID8gbmFtZSA6ICJQb2ludCIsIHBvaW50X2NsYXNzKTsKfQoKZXh0ZXJuICJDIiBWSVNJQkxFIHZvaWQganNfcG9pbnRfZXhwb3J0KEpTQ29udGV4dCogY3R4LCBKU01vZHVsZURlZiogbSkgewogIEpTX0FkZE1vZHVsZUV4cG9ydChjdHgsIG0sICJQb2ludCIpOwp9CgojaWYgZGVmaW5lZChKU19QT0lOVF9NT0RVTEUpCiNkZWZpbmUgSlNfSU5JVF9NT0RVTEUgLypWSVNJQkxFKi8ganNfaW5pdF9tb2R1bGUKI2Vsc2UKI2RlZmluZSBKU19JTklUX01PRFVMRSAvKlZJU0lCTEUqLyBqc19pbml0X21vZHVsZV9wb2ludAojZW5kaWYKCkpTTW9kdWxlRGVmKgpKU19JTklUX01PRFVMRShKU0NvbnRleHQqIGN0eCwgY29uc3QgY2hhciogbW9kdWxlX25hbWUpIHsKICBKU01vZHVsZURlZiogbTsKICBtID0gSlNfTmV3Q01vZHVsZShjdHgsIG1vZHVsZV9uYW1lLCAmanNfcG9pbnRfaW5pdCk7CiAgaWYoIW0pCiAgICByZXR1cm4gTlVMTDsKICBqc19wb2ludF9leHBvcnQoY3R4LG0pOwogIHJldHVybiBtOwp9Cn0AAAAAAAAAADsxAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAKjEAAAAAAAAqMQAAAAAAAAAAAAAAAPC/"
				],
				[
					58,
					1,
					"paste",
					null,
					"AgAAAEwdAAAAAAAAYB0AAAAAAAAAAAAAYB0AAAAAAABgHQAAAAAAAA0AAABqcy5nZXRfc3ltYm9s",
					"AQAAAAAAAAABAAAATB0AAAAAAABZHQAAAAAAAAAAAAAAAPC/"
				],
				[
					60,
					1,
					"insert",
					{
						"characters": "ctx,"
					},
					"BAAAAGEdAAAAAAAAYh0AAAAAAAAAAAAAYh0AAAAAAABjHQAAAAAAAAAAAABjHQAAAAAAAGQdAAAAAAAAAAAAAGQdAAAAAAAAZR0AAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAYR0AAAAAAABhHQAAAAAAAAAAAAAAAPC/"
				],
				[
					61,
					1,
					"insert",
					{
						"characters": " "
					},
					"AQAAAGUdAAAAAAAAZh0AAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAZR0AAAAAAABlHQAAAAAAAAAAAAAAAPC/"
				],
				[
					64,
					1,
					"insert",
					{
						"characters": "JS_GetProperty"
					},
					"DwAAAJUdAAAAAAAAlh0AAAAAAAAAAAAAlh0AAAAAAACWHQAAAAAAAA8AAABqcy5nZXRfcHJvcGVydHmWHQAAAAAAAJcdAAAAAAAAAAAAAJcdAAAAAAAAmB0AAAAAAAAAAAAAmB0AAAAAAACZHQAAAAAAAAAAAACZHQAAAAAAAJodAAAAAAAAAAAAAJodAAAAAAAAmx0AAAAAAAAAAAAAmx0AAAAAAACcHQAAAAAAAAAAAACcHQAAAAAAAJ0dAAAAAAAAAAAAAJ0dAAAAAAAAnh0AAAAAAAAAAAAAnh0AAAAAAACfHQAAAAAAAAAAAACfHQAAAAAAAKAdAAAAAAAAAAAAAKAdAAAAAAAAoR0AAAAAAAAAAAAAoR0AAAAAAACiHQAAAAAAAAAAAACiHQAAAAAAAKMdAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAlR0AAAAAAACkHQAAAAAAAAAAAAAAAPC/"
				],
				[
					67,
					1,
					"insert",
					{
						"characters": "ctxm"
					},
					"BAAAAKQdAAAAAAAApR0AAAAAAAAAAAAApR0AAAAAAACmHQAAAAAAAAAAAACmHQAAAAAAAKcdAAAAAAAAAAAAAKcdAAAAAAAAqB0AAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAApB0AAAAAAACkHQAAAAAAAAAAAAAAAPC/"
				],
				[
					68,
					1,
					"insert",
					{
						"characters": " "
					},
					"AQAAAKgdAAAAAAAAqR0AAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAqB0AAAAAAACoHQAAAAAAAAAAAAAAAPC/"
				],
				[
					69,
					2,
					"left_delete",
					null,
					"AgAAAKgdAAAAAAAAqB0AAAAAAAABAAAAIKcdAAAAAAAApx0AAAAAAAABAAAAbQ",
					"AQAAAAAAAAABAAAAqR0AAAAAAACpHQAAAAAAAAAAAAAAAPC/"
				],
				[
					70,
					1,
					"insert",
					{
						"characters": ","
					},
					"AQAAAKcdAAAAAAAAqB0AAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAApx0AAAAAAACnHQAAAAAAAAAAAAAAAPC/"
				],
				[
					71,
					1,
					"insert",
					{
						"characters": " "
					},
					"AQAAAKgdAAAAAAAAqR0AAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAqB0AAAAAAACoHQAAAAAAAAAAAAAAAPC/"
				],
				[
					86,
					1,
					"left_delete",
					null,
					"AQAAAMkcAAAAAAAAyRwAAAAAAAAQAAAAICBqc3J0IGpzKGN0eCk7Cg",
					"AQAAAAAAAAABAAAAyRwAAAAAAADZHAAAAAAAAAAAAAAAAPC/"
				],
				[
					109,
					1,
					"insert",
					{
						"characters": "JSAtom"
					},
					"BwAAABwcAAAAAAAAHRwAAAAAAAAAAAAAHRwAAAAAAAAdHAAAAAAAAAcAAABKU1ZhbHVlHRwAAAAAAAAeHAAAAAAAAAAAAAAeHAAAAAAAAB8cAAAAAAAAAAAAAB8cAAAAAAAAIBwAAAAAAAAAAAAAIBwAAAAAAAAhHAAAAAAAAAAAAAAhHAAAAAAAACIcAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAHBwAAAAAAAAjHAAAAAAAAAAAAAAAAPC/"
				],
				[
					114,
					1,
					"paste",
					null,
					"AgAAADsdAAAAAAAASR0AAAAAAAAAAAAASR0AAAAAAABJHQAAAAAAABQAAABqc19zeW1ib2xfZ2V0X3N0YXRpYw",
					"AQAAAAAAAAABAAAAOx0AAAAAAABPHQAAAAAAAAAAAAAAAPC/"
				],
				[
					118,
					4,
					"left_delete",
					null,
					"BAAAADUcAAAAAAAANRwAAAAAAAAMAAAASlNfVU5ERUZJTkVENBwAAAAAAAA0HAAAAAAAAAEAAAAgMxwAAAAAAAAzHAAAAAAAAAEAAAA9MhwAAAAAAAAyHAAAAAAAAAEAAAAg",
					"AQAAAAAAAAABAAAANRwAAAAAAABBHAAAAAAAAAAAAAAAAPC/"
				],
				[
					140,
					2,
					"right_delete",
					null,
					"AgAAAPUcAAAAAAAA9RwAAAAAAAAOAAAASlNfSXNVbmRlZmluZWT1HAAAAAAAAPUcAAAAAAAAAQAAACg",
					"AQAAAAAAAAABAAAA9RwAAAAAAAADHQAAAAAAAAAAAAAAAPC/"
				],
				[
					144,
					1,
					"left_delete",
					null,
					"AQAAAAQdAAAAAAAABB0AAAAAAAABAAAAKQ",
					"AQAAAAAAAAABAAAABR0AAAAAAAAFHQAAAAAAAAAAAAAAAPC/"
				],
				[
					145,
					1,
					"insert",
					{
						"characters": " =="
					},
					"AwAAAAQdAAAAAAAABR0AAAAAAAAAAAAABR0AAAAAAAAGHQAAAAAAAAAAAAAGHQAAAAAAAAcdAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAABB0AAAAAAAAEHQAAAAAAAAAAAAAAAPC/"
				],
				[
					146,
					1,
					"insert",
					{
						"characters": " 0"
					},
					"AgAAAAcdAAAAAAAACB0AAAAAAAAAAAAACB0AAAAAAAAJHQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAABx0AAAAAAAAHHQAAAAAAAAAAAAAAAPC/"
				],
				[
					147,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAAAaMQAAI2luY2x1ZGUgImpzYmluZGluZ3MuaHBwIgojaW5jbHVkZSAianMuaHBwIgojaW5jbHVkZSAianNfcG9pbnQuaHBwIgojaW5jbHVkZSAianNfcmVjdC5ocHAiCiNpbmNsdWRlICJqc19tYXQuaHBwIgojaW5jbHVkZSAianNfYXJyYXkuaHBwIgojaW5jbHVkZSAianNfYWxsb2MuaHBwIgojaW5jbHVkZSAianNfdHlwZWRfYXJyYXkuaHBwIgojaW5jbHVkZSAicXVpY2tqcy9jdXRpbHMuaCIKI2luY2x1ZGUgInF1aWNranMvcXVpY2tqcy5oIgoKI2luY2x1ZGUgPGxpc3Q+CiNpbmNsdWRlIDxvcGVuY3YyL2NvcmUvY29yZS5ocHA+CiNpbmNsdWRlIDxvcGVuY3YyL2ltZ3Byb2MvaW1ncHJvYy5ocHA+CgpzdGQ6OnZlY3RvcjxKU1BvaW50RGF0YTxkb3VibGU+Kj4gcG9pbnRzOwoKZXh0ZXJuICJDIiB7CgpKU1ZhbHVlIHBvaW50X3Byb3RvID0gSlNfVU5ERUZJTkVEOwpKU0NsYXNzSUQganNfcG9pbnRfY2xhc3NfaWQgPSAwOwoKVklTSUJMRSBKU1ZhbHVlCmpzX3BvaW50X25ldyhKU0NvbnRleHQqIGN0eCwgZG91YmxlIHgsIGRvdWJsZSB5KSB7CiAgSlNWYWx1ZSByZXQ7CiAgSlNQb2ludERhdGE8ZG91YmxlPiogczsKCiAgaWYoSlNfSXNVbmRlZmluZWQocG9pbnRfcHJvdG8pKQogICAganNfcG9pbnRfaW5pdChjdHgsIE5VTEwpOwoKICByZXQgPSBKU19OZXdPYmplY3RQcm90b0NsYXNzKGN0eCwgcG9pbnRfcHJvdG8sIGpzX3BvaW50X2NsYXNzX2lkKTsKCiAgcyA9IGpzX2FsbG9jYXRlPEpTUG9pbnREYXRhPGRvdWJsZT4+KGN0eCk7CgogIG5ldyhzKSBKU1BvaW50RGF0YTxkb3VibGU+KCk7CiAgcy0+eCA9IHggPD0gREJMX0VQU0lMT04gPyAwIDogeDsKICBzLT55ID0geSA8PSBEQkxfRVBTSUxPTiA/IDAgOiB5OwoKICBwb2ludHMucHVzaF9iYWNrKHMpOwoKICBKU19TZXRPcGFxdWUocmV0LCBzKTsKICByZXR1cm4gcmV0Owp9CgpWSVNJQkxFIEpTVmFsdWUKanNfcG9pbnRfd3JhcChKU0NvbnRleHQqIGN0eCwgY29uc3QgSlNQb2ludERhdGE8ZG91YmxlPiYgcG9pbnQpIHsKICByZXR1cm4ganNfcG9pbnRfbmV3KGN0eCwgcG9pbnQueCwgcG9pbnQueSk7Cn0KCkpTVmFsdWUKanNfcG9pbnRfY2xvbmUoSlNDb250ZXh0KiBjdHgsIGNvbnN0IEpTUG9pbnREYXRhPGRvdWJsZT4mIHBvaW50KSB7CiAgcmV0dXJuIGpzX3BvaW50X25ldyhjdHgsIHBvaW50LngsIHBvaW50LnkpOwp9CgpzdGF0aWMgSlNWYWx1ZQpqc19wb2ludF9jcm9zcyhKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2KSB7CiAgSlNQb2ludERhdGE8ZG91YmxlPiogcyA9IGpzX3BvaW50X2RhdGEoY3R4LCB0aGlzX3ZhbCk7CiAgSlNQb2ludERhdGE8ZG91YmxlPiogb3RoZXIgPSBqc19wb2ludF9kYXRhKGN0eCwgYXJndlswXSk7CiAgZG91YmxlIHJldHZhbDsKICBpZighcyB8fCAhb3RoZXIpCiAgICByZXR1cm4gSlNfRVhDRVBUSU9OOwogIHJldHZhbCA9IHMtPmNyb3NzKCpvdGhlcik7CiAgcmV0dXJuIEpTX05ld0Zsb2F0NjQoY3R4LCByZXR2YWwpOwp9CgpzdGF0aWMgSlNWYWx1ZQpqc19wb2ludF9jdG9yKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgbmV3X3RhcmdldCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCogYXJndikgewogIGRvdWJsZSB4LCB5OwogIEpTUG9pbnREYXRhPGRvdWJsZT4gcG9pbnQ7CgogIGlmKGFyZ2MgPiAwKSB7CiAgICBpZihqc19wb2ludF9yZWFkKGN0eCwgYXJndlswXSwgJnBvaW50KSkgewogICAgICB4ID0gcG9pbnQueDsKICAgICAgeSA9IHBvaW50Lnk7CiAgICB9IGVsc2UgewogICAgICBpZihKU19Ub0Zsb2F0NjQoY3R4LCAmeCwgYXJndlswXSkpCiAgICAgICAgcmV0dXJuIEpTX0VYQ0VQVElPTjsKICAgICAgaWYoYXJnYyA8IDIgfHwgSlNfVG9GbG9hdDY0KGN0eCwgJnksIGFyZ3ZbMV0pKQogICAgICAgIHJldHVybiBKU19FWENFUFRJT047CiAgICB9CiAgfQoKICByZXR1cm4ganNfcG9pbnRfbmV3KGN0eCwgeCwgeSk7Cn0KClZJU0lCTEUgSlNQb2ludERhdGE8ZG91YmxlPioKanNfcG9pbnRfZGF0YShKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHZhbCkgewogIHJldHVybiBzdGF0aWNfY2FzdDxKU1BvaW50RGF0YTxkb3VibGU+Kj4oSlNfR2V0T3BhcXVlMihjdHgsIHZhbCwganNfcG9pbnRfY2xhc3NfaWQpKTsKfQoKc3RhdGljIEpTVmFsdWUKanNfcG9pbnRfZGRvdChKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2KSB7CiAgSlNQb2ludERhdGE8ZG91YmxlPiogcyA9IGpzX3BvaW50X2RhdGEoY3R4LCB0aGlzX3ZhbCk7CiAgSlNQb2ludERhdGE8ZG91YmxlPiogb3RoZXIgPSBqc19wb2ludF9kYXRhKGN0eCwgYXJndlswXSk7CiAgZG91YmxlIHJldHZhbDsKICBpZighcyB8fCAhb3RoZXIpCiAgICByZXR1cm4gSlNfRVhDRVBUSU9OOwogIHJldHZhbCA9IHMtPmRkb3QoKm90aGVyKTsKICByZXR1cm4gSlNfTmV3RmxvYXQ2NChjdHgsIHJldHZhbCk7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX3BvaW50X2RpZmYoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCogYXJndikgewogIEpTUG9pbnREYXRhPGRvdWJsZT4qIHMgPSBqc19wb2ludF9kYXRhKGN0eCwgdGhpc192YWwpOwogIEpTUG9pbnREYXRhPGRvdWJsZT4qIG90aGVyID0ganNfcG9pbnRfZGF0YShjdHgsIGFyZ3ZbMF0pOwoKICBKU1ZhbHVlIHJldDsKICBpZighcyB8fCAhb3RoZXIpCiAgICByZXR1cm4gSlNfRVhDRVBUSU9OOwoKICByZXQgPSBqc19wb2ludF9uZXcoY3R4LCBzLT54IC0gb3RoZXItPngsIHMtPnkgLSBvdGhlci0+eSk7CiAgcmV0dXJuIHJldDsKfQoKc3RhdGljIEpTVmFsdWUKanNfcG9pbnRfZ2V0X3h5KEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBtYWdpYykgewogIEpTUG9pbnREYXRhPGRvdWJsZT4qIHMgPSBqc19wb2ludF9kYXRhKGN0eCwgdGhpc192YWwpOwogIGlmKCFzKQogICAgcmV0dXJuIEpTX0VYQ0VQVElPTjsKICBpZihtYWdpYyA9PSAwKQogICAgcmV0dXJuIEpTX05ld0Zsb2F0NjQoY3R4LCBzLT54KTsKICBlbHNlIGlmKG1hZ2ljID09IDEpCiAgICByZXR1cm4gSlNfTmV3RmxvYXQ2NChjdHgsIHMtPnkpOwogIHJldHVybiBKU19VTkRFRklORUQ7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX3BvaW50X2luc2lkZShKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2KSB7CiAgSlNQb2ludERhdGE8ZG91YmxlPiogcyA9IGpzX3BvaW50X2RhdGEoY3R4LCB0aGlzX3ZhbCk7CiAgSlNSZWN0RGF0YTxkb3VibGU+IHIgPSBqc19yZWN0X2dldChjdHgsIGFyZ3ZbMF0pOwogIGJvb2wgcmV0dmFsOwogIGlmKCFzIC8qfHwgIXIqLykKICAgIHJldHVybiBKU19FWENFUFRJT047CgogIHJldHZhbCA9IHMtPmluc2lkZShyKTsKCiAgcmV0dXJuIEpTX05ld0Jvb2woY3R4LCByZXR2YWwpOwp9CgpzdGF0aWMgSlNWYWx1ZQpqc19wb2ludF9ub3JtKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QqIGFyZ3YpIHsKICBKU1BvaW50RGF0YTxkb3VibGU+KiBzID0ganNfcG9pbnRfZGF0YShjdHgsIHRoaXNfdmFsKTsKICBpZighcykKICAgIHJldHVybiBKU19FWENFUFRJT047CiAgcmV0dXJuIEpTX05ld0Zsb2F0NjQoY3R4LCBzcXJ0KChkb3VibGUpcy0+eCAqIHMtPnggKyAoZG91YmxlKXMtPnkgKiBzLT55KSk7Cn0KCi8qCnN0YXRpYyBKU1ZhbHVlCmpzX3BvaW50X211bChKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2KSB7CiAgSlNQb2ludERhdGE8ZG91YmxlPiogcyA9IGpzX3BvaW50X2RhdGEoY3R4LCB0aGlzX3ZhbCk7CiAgZG91YmxlIGZhY3RvciA9IDEuMDsKICBKU19Ub0Zsb2F0NjQoY3R4LCAmZmFjdG9yLCBhcmd2WzBdKTsKICBKU1ZhbHVlIHJldDsKICBpZighcyB8fCBhcmdjIDwgMSkKICAgIHJldHVybiBKU19FWENFUFRJT047CgogIHJldHVybiBqc19wb2ludF9uZXcoY3R4LCBzLT54ICogZmFjdG9yLCBzLT55ICogZmFjdG9yKTsKfQoKc3RhdGljIEpTVmFsdWUKanNfcG9pbnRfcXVvdChKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2KSB7CiAgSlNQb2ludERhdGE8ZG91YmxlPiogcyA9IGpzX3BvaW50X2RhdGEoY3R4LCB0aGlzX3ZhbCk7CiAgZG91YmxlIGRpdmlzb3IgPSAxLjA7CiAgSlNfVG9GbG9hdDY0KGN0eCwgJmRpdmlzb3IsIGFyZ3ZbMF0pOwogIEpTVmFsdWUgcmV0OwogIGlmKCFzIHx8IGFyZ2MgPCAxKQogICAgcmV0dXJuIEpTX0VYQ0VQVElPTjsKCiAgcmV0ID0ganNfcG9pbnRfbmV3KGN0eCwgcy0+eCAvIGRpdmlzb3IsIHMtPnkgLyBkaXZpc29yKTsKICByZXR1cm4gcmV0Owp9Ki8KCnN0YXRpYyBKU1ZhbHVlCmpzX3BvaW50X3NldF94eShKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBKU1ZhbHVlQ29uc3QgdmFsLCBpbnQgbWFnaWMpIHsKICBKU1BvaW50RGF0YTxkb3VibGU+KiBzID0ganNfcG9pbnRfZGF0YShjdHgsIHRoaXNfdmFsKTsKICBkb3VibGUgdjsKICBpZighcykKICAgIHJldHVybiBKU19FWENFUFRJT047CiAgaWYoSlNfVG9GbG9hdDY0KGN0eCwgJnYsIHZhbCkpCiAgICByZXR1cm4gSlNfRVhDRVBUSU9OOwogIGlmKG1hZ2ljID09IDApCiAgICBzLT54ID0gdjsKICBlbHNlCiAgICBzLT55ID0gdjsKICByZXR1cm4gSlNfVU5ERUZJTkVEOwp9CgpzdGF0aWMgSlNWYWx1ZQpqc19wb2ludF9hZGQoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCogYXJndiwgaW50IG1hZ2ljKSB7CiAgSlNQb2ludERhdGE8ZG91YmxlPiBvdGhlciwgcG9pbnQsICpzID0ganNfcG9pbnRfZGF0YShjdHgsIHRoaXNfdmFsKTsKICBkb3VibGUgeCwgeTsKCiAgaWYoanNfcG9pbnRfcmVhZChjdHgsIGFyZ3ZbMF0sICZvdGhlcikpIHsKICAgIHggPSBvdGhlci54OwogICAgeSA9IG90aGVyLnk7CiAgfSBlbHNlIHsKICAgIEpTX1RvRmxvYXQ2NChjdHgsICZ4LCBhcmd2WzBdKTsKICAgIGlmKGFyZ2MgPCAyKQogICAgICB5ID0geDsKICAgIGVsc2UKICAgICAgSlNfVG9GbG9hdDY0KGN0eCwgJnksIGFyZ3ZbMV0pOwogIH0KCiAgc3dpdGNoKG1hZ2ljKSB7CiAgICBjYXNlIDA6CiAgICAgIHBvaW50LnggPSBzLT54ICsgeDsKICAgICAgcG9pbnQueSA9IHMtPnkgKyB5OwoKICAgICAgYnJlYWs7CiAgICBjYXNlIDE6CiAgICAgIHBvaW50LnggPSBzLT54IC0geDsKICAgICAgcG9pbnQueSA9IHMtPnkgLSB5OwogICAgICBicmVhazsKICAgIGNhc2UgMjoKICAgICAgcG9pbnQueCA9IHMtPnggKiB4OwogICAgICBwb2ludC55ID0gcy0+eSAqIHk7CiAgICAgIGJyZWFrOwogICAgY2FzZSAzOgogICAgICBwb2ludC54ID0gcy0+eCAvIHg7CiAgICAgIHBvaW50LnkgPSBzLT55IC8geTsKICAgICAgYnJlYWs7CiAgfQogIHJldHVybiBqc19wb2ludF93cmFwKGN0eCwgcG9pbnQpOwp9CgpzdGF0aWMgSlNWYWx1ZQpqc19wb2ludF90b19zdHJpbmcoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCogYXJndiwgaW50IG1hZ2ljKSB7CiAgSlNQb2ludERhdGE8ZG91YmxlPiogcyA9IGpzX3BvaW50X2RhdGEoY3R4LCB0aGlzX3ZhbCk7CiAgc3RkOjpvc3RyaW5nc3RyZWFtIG9zOwogIEpTVmFsdWUgeHYsIHl2OwogIGNvbnN0IGNoYXIqIGRlbGltID0gIiwiOwogIGRvdWJsZSB4ID0gLTEsIHkgPSAtMTsKICAvKiBpZighcykKICAgICByZXR1cm4gSlNfRVhDRVBUSU9OOyovCiAgaWYoYXJnYyA+IDApCiAgICBkZWxpbSA9IEpTX1RvQ1N0cmluZyhjdHgsIGFyZ3ZbMF0pOwoKICB4diA9IEpTX0dldFByb3BlcnR5U3RyKGN0eCwgdGhpc192YWwsICJ4Iik7CiAgeXYgPSBKU19HZXRQcm9wZXJ0eVN0cihjdHgsIHRoaXNfdmFsLCAieSIpOwoKICBpZihKU19Jc051bWJlcih4dikgJiYgSlNfSXNOdW1iZXIoeXYpKSB7CiAgICBKU19Ub0Zsb2F0NjQoY3R4LCAmeCwgeHYpOwogICAgSlNfVG9GbG9hdDY0KGN0eCwgJnksIHl2KTsKICB9IGVsc2UgaWYocykgewogICAgeCA9IHMtPng7CiAgICB5ID0gcy0+eTsKICB9CgogIHN3aXRjaChtYWdpYykgewogICAgY2FzZSAwOiB7CiAgICAgIG9zIDw8IHggPDwgIiwiIDw8IHk7CiAgICAgIGJyZWFrOwogICAgfQogICAgY2FzZSAxOiB7CiAgICAgIG9zIDw8ICJbIiA8PCB4IDw8ICIsIiA8PCB5IDw8ICJdIjsKICAgICAgYnJlYWs7CiAgICB9CiAgICBjYXNlIDI6IHsKCiAgICAgIG9zIDw8ICJ7eDoiIDw8IHggPDwgIix5OiIgPDwgeSA8PCAifSI7CiAgICAgIGJyZWFrOwogICAgfQogIH0KICByZXR1cm4gSlNfTmV3U3RyaW5nKGN0eCwgb3Muc3RyKCkuY19zdHIoKSk7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX3BvaW50X3RvX2FycmF5KEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QqIGFyZ3YpIHsKICBKU1BvaW50RGF0YTxkb3VibGU+KiBzID0ganNfcG9pbnRfZGF0YShjdHgsIHRoaXNfdmFsKTsKICBzdGQ6OmFycmF5PGRvdWJsZSwgMj4gYXJyOwoKICBhcnJbMF0gPSBzLT54OwogIGFyclsxXSA9IHMtPnk7CgogIHJldHVybiBqc19hcnJheV9mcm9tKGN0eCwgYXJyLmNiZWdpbigpLCBhcnIuY2VuZCgpKTsKfQoKc3RhdGljIEpTVmFsdWUKanNfcG9pbnRfaW5zcGVjdChKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2KSB7CiAgSlNQb2ludERhdGE8ZG91YmxlPiogcyA9IGpzX3BvaW50X2RhdGEoY3R4LCB0aGlzX3ZhbCk7CiAgSlNWYWx1ZSBvYmogPSBKU19OZXdPYmplY3RQcm90byhjdHgsIHBvaW50X3Byb3RvKTsKCiAgSlNfRGVmaW5lUHJvcGVydHlWYWx1ZVN0cihjdHgsIG9iaiwgIngiLCBKU19OZXdGbG9hdDY0KGN0eCwgcy0+eCksIEpTX1BST1BfRU5VTUVSQUJMRSk7CiAgSlNfRGVmaW5lUHJvcGVydHlWYWx1ZVN0cihjdHgsIG9iaiwgInkiLCBKU19OZXdGbG9hdDY0KGN0eCwgcy0+eSksIEpTX1BST1BfRU5VTUVSQUJMRSk7CgogIHJldHVybiBvYmo7Cn0KCnN0YXRpYyBKU0F0b20gaXRlcmF0b3Jfc3ltYm9sOwoKc3RhdGljIEpTVmFsdWUKanNfcG9pbnRfc3ltYm9sX2l0ZXJhdG9yKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QqIGFyZ3YpIHsKICBKU1ZhbHVlIGFyciwgaXRlcjsKICBhcnIgPSBqc19wb2ludF90b19hcnJheShjdHgsIHRoaXNfdmFsLCBhcmdjLCBhcmd2KTsKCiAgaWYoaXRlcmF0b3Jfc3ltYm9sID09IDApCiAgICBpdGVyYXRvcl9zeW1ib2wgPSBqc19zeW1ib2xfYXRvbShjdHgsICJpdGVyYXRvciIpOwoKICBpZighSlNfSXNGdW5jdGlvbihjdHgsIChpdGVyID0gSlNfR2V0UHJvcGVydHkoY3R4LCBhcnIsIGl0ZXJhdG9yX3N5bWJvbCkpKSkKICAgIHJldHVybiBKU19FWENFUFRJT047CiAgcmV0dXJuIEpTX0NhbGwoY3R4LCBpdGVyLCBhcnIsIDAsIGFyZ3YpOwp9CgpzdGF0aWMgSlNWYWx1ZQpqc19wb2ludF9yb3VuZChKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2LCBpbnQgbWFnaWMpIHsKICBKU1BvaW50RGF0YTxkb3VibGU+IHBvaW50LCAqcyA9IGpzX3BvaW50X2RhdGEoY3R4LCB0aGlzX3ZhbCk7CiAgZG91YmxlIHgsIHk7CiAgZG91YmxlIHByZWMgPSAxOwogIHBvaW50ID0gKnM7CiAgSlNWYWx1ZSByZXQgPSBKU19VTkRFRklORUQ7CgogIHN3aXRjaChtYWdpYykgewogICAgY2FzZSAwOgogICAgICBpZihhcmdjID4gMCkKICAgICAgICBKU19Ub0Zsb2F0NjQoY3R4LCAmcHJlYywgYXJndlswXSk7CgogICAgICB4ID0gcm91bmQocy0+eCAvIHByZWMpOwogICAgICB5ID0gcm91bmQocy0+eSAvIHByZWMpOwogICAgICByZXQgPSBqc19wb2ludF9uZXcoY3R4LCB4ICogcHJlYywgeSAqIHByZWMpOwogICAgICBicmVhazsKICAgIGNhc2UgMToKICAgICAgaWYoYXJnYyA+IDApCiAgICAgICAgSlNfVG9GbG9hdDY0KGN0eCwgJnByZWMsIGFyZ3ZbMF0pOwoKICAgICAgeCA9IGZsb29yKHMtPnggLyBwcmVjKTsKICAgICAgeSA9IGZsb29yKHMtPnkgLyBwcmVjKTsKICAgICAgcmV0ID0ganNfcG9pbnRfbmV3KGN0eCwgeCAqIHByZWMsIHkgKiBwcmVjKTsKICAgICAgYnJlYWs7CiAgICBjYXNlIDI6CiAgICAgIGlmKGFyZ2MgPiAwKQogICAgICAgIEpTX1RvRmxvYXQ2NChjdHgsICZwcmVjLCBhcmd2WzBdKTsKCiAgICAgIHggPSBjZWlsKHMtPnggLyBwcmVjKTsKICAgICAgeSA9IGNlaWwocy0+eSAvIHByZWMpOwogICAgICByZXQgPSBqc19wb2ludF9uZXcoY3R4LCB4ICogcHJlYywgeSAqIHByZWMpOwogICAgICBicmVhazsKICB9CiAgcmV0dXJuIHJldDsKfQoKc3RhdGljIEpTVmFsdWUKanNfcG9pbnRfZnJvbShKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHBvaW50LCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2KSB7CiAgc3RkOjphcnJheTxkb3VibGUsIDI+IGFycmF5OwogIEpTVmFsdWUgcmV0ID0gSlNfRVhDRVBUSU9OOwoKICBpZihKU19Jc1N0cmluZyhhcmd2WzBdKSkgewogICAgY29uc3QgY2hhciogc3RyID0gSlNfVG9DU3RyaW5nKGN0eCwgYXJndlswXSk7CiAgICBjaGFyKiBlbmRwdHIgPSBudWxscHRyOwogICAgZm9yKHNpemVfdCBpID0gMDsgaSA8IDI7IGkrKykgewogICAgICB3aGlsZSghaXNkaWdpdCgqc3RyKSAmJiAqc3RyICE9ICctJyAmJiAqc3RyICE9ICcrJyAmJiAhKCpzdHIgPT0gJy4nICYmIGlzZGlnaXQoc3RyWzFdKSkpIHN0cisrOwogICAgICBpZigqc3RyID09ICdcMCcpCiAgICAgICAgYnJlYWs7CiAgICAgIGFycmF5W2ldID0gc3RydG9kKHN0ciwgJmVuZHB0cik7CiAgICAgIHN0ciA9IGVuZHB0cjsKICAgIH0KICB9IGVsc2UgaWYoanNfaXNfYXJyYXkoY3R4LCBhcmd2WzBdKSkgewogICAganNfYXJyYXlfdG88ZG91YmxlLCAyPihjdHgsIGFyZ3ZbMF0sIGFycmF5KTsKICB9CiAgaWYoYXJyYXlbMF0gPiAwICYmIGFycmF5WzFdID4gMCkKICAgIHJldCA9IGpzX3BvaW50X25ldyhjdHgsIGFycmF5WzBdLCBhcnJheVsxXSk7CiAgcmV0dXJuIHJldDsKfQoKc3RhdGljIHZvaWQKanNfcG9pbnRfZmluYWxpemVyKEpTUnVudGltZSogcnQsIEpTVmFsdWUgdmFsKSB7CiAgSlNQb2ludERhdGE8ZG91YmxlPiogcyA9IHN0YXRpY19jYXN0PEpTUG9pbnREYXRhPGRvdWJsZT4qPihKU19HZXRPcGFxdWUodmFsLCBqc19wb2ludF9jbGFzc19pZCkpOwoKICBpZihzICE9IG51bGxwdHIpIHsKICAgIGpzX2RlYWxsb2NhdGUocnQsIHMpOwogIH0KCiAgLy8gSlNfRnJlZVZhbHVlUlQocnQsIHZhbCk7CgogIC8qICBpZihwb2ludHMuc2l6ZSgpID09IDApCiAgICAgIEpTX0ZyZWVWYWx1ZVJUKHJ0LCBwb2ludF9wcm90byk7Ki8KfQoKSlNWYWx1ZSBwb2ludF9jbGFzcyA9IEpTX1VOREVGSU5FRDsKCkpTQ2xhc3NEZWYganNfcG9pbnRfY2xhc3MgPSB7CiAgICAuY2xhc3NfbmFtZSA9ICJQb2ludCIsCiAgICAuZmluYWxpemVyID0ganNfcG9pbnRfZmluYWxpemVyLAp9OwoKY29uc3QgSlNDRnVuY3Rpb25MaXN0RW50cnkganNfcG9pbnRfcHJvdG9fZnVuY3NbXSA9IHsKICAgIEpTX0NHRVRTRVRfRU5VTUVSQUJMRV9ERUYoIngiLCBqc19wb2ludF9nZXRfeHksIGpzX3BvaW50X3NldF94eSwgMCksCiAgICBKU19DR0VUU0VUX0VOVU1FUkFCTEVfREVGKCJ5IiwganNfcG9pbnRfZ2V0X3h5LCBqc19wb2ludF9zZXRfeHksIDEpLAogICAgSlNfQ0ZVTkNfREVGKCJjcm9zcyIsIDEsIGpzX3BvaW50X2Nyb3NzKSwKICAgIEpTX0NGVU5DX0RFRigiZG90IiwgMSwganNfcG9pbnRfZGRvdCksCiAgICBKU19DRlVOQ19ERUYoImluc2lkZSIsIDEsIGpzX3BvaW50X2luc2lkZSksCiAgICBKU19DRlVOQ19ERUYoImRpZmYiLCAxLCBqc19wb2ludF9kaWZmKSwKICAgIEpTX0NGVU5DX01BR0lDX0RFRigiYWRkIiwgMSwganNfcG9pbnRfYWRkLCAwKSwKICAgIEpTX0NGVU5DX01BR0lDX0RFRigic3ViIiwgMSwganNfcG9pbnRfYWRkLCAxKSwKICAgIEpTX0NGVU5DX01BR0lDX0RFRigibXVsIiwgMSwganNfcG9pbnRfYWRkLCAyKSwKICAgIEpTX0NGVU5DX01BR0lDX0RFRigiZGl2IiwgMSwganNfcG9pbnRfYWRkLCAzKSwKICAgIEpTX0NGVU5DX0RFRigibm9ybSIsIDAsIGpzX3BvaW50X25vcm0pLAogICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJyb3VuZCIsIDAsIGpzX3BvaW50X3JvdW5kLCAwKSwKICAgIEpTX0NGVU5DX01BR0lDX0RFRigiZmxvb3IiLCAwLCBqc19wb2ludF9yb3VuZCwgMSksCiAgICBKU19DRlVOQ19NQUdJQ19ERUYoImNlaWwiLCAwLCBqc19wb2ludF9yb3VuZCwgMiksCiAgICBKU19DRlVOQ19NQUdJQ19ERUYoInRvU3RyaW5nIiwgMCwganNfcG9pbnRfdG9fc3RyaW5nLCAwKSwKICAgIEpTX0NGVU5DX0RFRigidG9BcnJheSIsIDAsIGpzX3BvaW50X3RvX2FycmF5KSwKICAgIEpTX0NGVU5DX0RFRigiW1N5bWJvbC5pdGVyYXRvcl0iLCAwLCBqc19wb2ludF9zeW1ib2xfaXRlcmF0b3IpLAogICAgSlNfUFJPUF9TVFJJTkdfREVGKCJbU3ltYm9sLnRvU3RyaW5nVGFnXSIsICJQb2ludCIsIEpTX1BST1BfQ09ORklHVVJBQkxFKSwKCiAgICAvLyBKU19DRlVOQ19NQUdJQ19ERUYoIltTeW1ib2wudG9TdHJpbmdUYWddIiwgMCwganNfcG9pbnRfdG9fc3RyaW5nLCAxKSwKfTsKY29uc3QgSlNDRnVuY3Rpb25MaXN0RW50cnkganNfcG9pbnRfc3RhdGljX2Z1bmNzW10gPSB7SlNfQ0ZVTkNfREVGKCJmcm9tIiwgMSwganNfcG9pbnRfZnJvbSl9OwoKaW50CmpzX3BvaW50X2luaXQoSlNDb250ZXh0KiBjdHgsIEpTTW9kdWxlRGVmKiBtKSB7CgogIGlmKGpzX3BvaW50X2NsYXNzX2lkID09IDApIHsKICAgIC8qIGNyZWF0ZSB0aGUgUG9pbnQgY2xhc3MgKi8KICAgIEpTX05ld0NsYXNzSUQoJmpzX3BvaW50X2NsYXNzX2lkKTsKICAgIEpTX05ld0NsYXNzKEpTX0dldFJ1bnRpbWUoY3R4KSwganNfcG9pbnRfY2xhc3NfaWQsICZqc19wb2ludF9jbGFzcyk7CgogICAgcG9pbnRfcHJvdG8gPSBKU19OZXdPYmplY3QoY3R4KTsKICAgIEpTX1NldFByb3BlcnR5RnVuY3Rpb25MaXN0KGN0eCwgcG9pbnRfcHJvdG8sIGpzX3BvaW50X3Byb3RvX2Z1bmNzLCBjb3VudG9mKGpzX3BvaW50X3Byb3RvX2Z1bmNzKSk7CiAgICBKU19TZXRDbGFzc1Byb3RvKGN0eCwganNfcG9pbnRfY2xhc3NfaWQsIHBvaW50X3Byb3RvKTsKCiAgICBwb2ludF9jbGFzcyA9IEpTX05ld0NGdW5jdGlvbjIoY3R4LCBqc19wb2ludF9jdG9yLCAiUG9pbnQiLCAwLCBKU19DRlVOQ19jb25zdHJ1Y3RvciwgMCk7CiAgICAvKiBzZXQgcHJvdG8uY29uc3RydWN0b3IgYW5kIGN0b3IucHJvdG90eXBlICovCiAgICBKU19TZXRDb25zdHJ1Y3RvcihjdHgsIHBvaW50X2NsYXNzLCBwb2ludF9wcm90byk7CiAgICBKU19TZXRQcm9wZXJ0eUZ1bmN0aW9uTGlzdChjdHgsIHBvaW50X2NsYXNzLCBqc19wb2ludF9zdGF0aWNfZnVuY3MsIGNvdW50b2YoanNfcG9pbnRfc3RhdGljX2Z1bmNzKSk7CgogICAganNfc2V0X2luc3BlY3RfbWV0aG9kKGN0eCwgcG9pbnRfcHJvdG8sIGpzX3BvaW50X2luc3BlY3QpOwogIH0KCiAgaWYobSkKICAgIEpTX1NldE1vZHVsZUV4cG9ydChjdHgsIG0sICJQb2ludCIsIHBvaW50X2NsYXNzKTsKICAvKiBlbHNlCiAgICAgSlNfU2V0UHJvcGVydHlTdHIoY3R4LCAqc3RhdGljX2Nhc3Q8SlNWYWx1ZSo+KG0pLCBuYW1lLCBwb2ludF9jbGFzcyk7Ki8KICByZXR1cm4gMDsKfQoKdm9pZApqc19wb2ludF9jb25zdHJ1Y3RvcihKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZSBwYXJlbnQsIGNvbnN0IGNoYXIqIG5hbWUpIHsKICBpZihKU19Jc1VuZGVmaW5lZChwb2ludF9jbGFzcykpCiAgICBqc19wb2ludF9pbml0KGN0eCwgMCk7CgogIEpTX1NldFByb3BlcnR5U3RyKGN0eCwgcGFyZW50LCBuYW1lID8gbmFtZSA6ICJQb2ludCIsIHBvaW50X2NsYXNzKTsKfQoKZXh0ZXJuICJDIiBWSVNJQkxFIHZvaWQKanNfcG9pbnRfZXhwb3J0KEpTQ29udGV4dCogY3R4LCBKU01vZHVsZURlZiogbSkgewogIEpTX0FkZE1vZHVsZUV4cG9ydChjdHgsIG0sICJQb2ludCIpOwp9CgojaWYgZGVmaW5lZChKU19QT0lOVF9NT0RVTEUpCiNkZWZpbmUgSlNfSU5JVF9NT0RVTEUgLypWSVNJQkxFKi8ganNfaW5pdF9tb2R1bGUKI2Vsc2UKI2RlZmluZSBKU19JTklUX01PRFVMRSAvKlZJU0lCTEUqLyBqc19pbml0X21vZHVsZV9wb2ludAojZW5kaWYKCkpTTW9kdWxlRGVmKgpKU19JTklUX01PRFVMRShKU0NvbnRleHQqIGN0eCwgY29uc3QgY2hhciogbW9kdWxlX25hbWUpIHsKICBKU01vZHVsZURlZiogbTsKICBtID0gSlNfTmV3Q01vZHVsZShjdHgsIG1vZHVsZV9uYW1lLCAmanNfcG9pbnRfaW5pdCk7CiAgaWYoIW0pCiAgICByZXR1cm4gTlVMTDsKICBqc19wb2ludF9leHBvcnQoY3R4LCBtKTsKICByZXR1cm4gbTsKfQp9AAAAAAAAAAAIMQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAACR0AAAAAAAAJHQAAAAAAAAAAAAAAAPC/"
				],
				[
					148,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAAAIMQAAI2luY2x1ZGUgImpzYmluZGluZ3MuaHBwIgojaW5jbHVkZSAianNfcG9pbnQuaHBwIgojaW5jbHVkZSAianNfcmVjdC5ocHAiCiNpbmNsdWRlICJqc19tYXQuaHBwIgojaW5jbHVkZSAianNfYXJyYXkuaHBwIgojaW5jbHVkZSAianNfYWxsb2MuaHBwIgojaW5jbHVkZSAianNfdHlwZWRfYXJyYXkuaHBwIgojaW5jbHVkZSAicXVpY2tqcy9jdXRpbHMuaCIKI2luY2x1ZGUgInF1aWNranMvcXVpY2tqcy5oIgoKI2luY2x1ZGUgPGxpc3Q+CiNpbmNsdWRlIDxvcGVuY3YyL2NvcmUvY29yZS5ocHA+CiNpbmNsdWRlIDxvcGVuY3YyL2ltZ3Byb2MvaW1ncHJvYy5ocHA+CgpzdGQ6OnZlY3RvcjxKU1BvaW50RGF0YTxkb3VibGU+Kj4gcG9pbnRzOwoKZXh0ZXJuICJDIiB7CgpKU1ZhbHVlIHBvaW50X3Byb3RvID0gSlNfVU5ERUZJTkVEOwpKU0NsYXNzSUQganNfcG9pbnRfY2xhc3NfaWQgPSAwOwoKVklTSUJMRSBKU1ZhbHVlCmpzX3BvaW50X25ldyhKU0NvbnRleHQqIGN0eCwgZG91YmxlIHgsIGRvdWJsZSB5KSB7CiAgSlNWYWx1ZSByZXQ7CiAgSlNQb2ludERhdGE8ZG91YmxlPiogczsKCiAgaWYoSlNfSXNVbmRlZmluZWQocG9pbnRfcHJvdG8pKQogICAganNfcG9pbnRfaW5pdChjdHgsIE5VTEwpOwoKICByZXQgPSBKU19OZXdPYmplY3RQcm90b0NsYXNzKGN0eCwgcG9pbnRfcHJvdG8sIGpzX3BvaW50X2NsYXNzX2lkKTsKCiAgcyA9IGpzX2FsbG9jYXRlPEpTUG9pbnREYXRhPGRvdWJsZT4+KGN0eCk7CgogIG5ldyhzKSBKU1BvaW50RGF0YTxkb3VibGU+KCk7CiAgcy0+eCA9IHggPD0gREJMX0VQU0lMT04gPyAwIDogeDsKICBzLT55ID0geSA8PSBEQkxfRVBTSUxPTiA/IDAgOiB5OwoKICBwb2ludHMucHVzaF9iYWNrKHMpOwoKICBKU19TZXRPcGFxdWUocmV0LCBzKTsKICByZXR1cm4gcmV0Owp9CgpWSVNJQkxFIEpTVmFsdWUKanNfcG9pbnRfd3JhcChKU0NvbnRleHQqIGN0eCwgY29uc3QgSlNQb2ludERhdGE8ZG91YmxlPiYgcG9pbnQpIHsKICByZXR1cm4ganNfcG9pbnRfbmV3KGN0eCwgcG9pbnQueCwgcG9pbnQueSk7Cn0KCkpTVmFsdWUKanNfcG9pbnRfY2xvbmUoSlNDb250ZXh0KiBjdHgsIGNvbnN0IEpTUG9pbnREYXRhPGRvdWJsZT4mIHBvaW50KSB7CiAgcmV0dXJuIGpzX3BvaW50X25ldyhjdHgsIHBvaW50LngsIHBvaW50LnkpOwp9CgpzdGF0aWMgSlNWYWx1ZQpqc19wb2ludF9jcm9zcyhKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2KSB7CiAgSlNQb2ludERhdGE8ZG91YmxlPiogcyA9IGpzX3BvaW50X2RhdGEoY3R4LCB0aGlzX3ZhbCk7CiAgSlNQb2ludERhdGE8ZG91YmxlPiogb3RoZXIgPSBqc19wb2ludF9kYXRhKGN0eCwgYXJndlswXSk7CiAgZG91YmxlIHJldHZhbDsKICBpZighcyB8fCAhb3RoZXIpCiAgICByZXR1cm4gSlNfRVhDRVBUSU9OOwogIHJldHZhbCA9IHMtPmNyb3NzKCpvdGhlcik7CiAgcmV0dXJuIEpTX05ld0Zsb2F0NjQoY3R4LCByZXR2YWwpOwp9CgpzdGF0aWMgSlNWYWx1ZQpqc19wb2ludF9jdG9yKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgbmV3X3RhcmdldCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCogYXJndikgewogIGRvdWJsZSB4LCB5OwogIEpTUG9pbnREYXRhPGRvdWJsZT4gcG9pbnQ7CgogIGlmKGFyZ2MgPiAwKSB7CiAgICBpZihqc19wb2ludF9yZWFkKGN0eCwgYXJndlswXSwgJnBvaW50KSkgewogICAgICB4ID0gcG9pbnQueDsKICAgICAgeSA9IHBvaW50Lnk7CiAgICB9IGVsc2UgewogICAgICBpZihKU19Ub0Zsb2F0NjQoY3R4LCAmeCwgYXJndlswXSkpCiAgICAgICAgcmV0dXJuIEpTX0VYQ0VQVElPTjsKICAgICAgaWYoYXJnYyA8IDIgfHwgSlNfVG9GbG9hdDY0KGN0eCwgJnksIGFyZ3ZbMV0pKQogICAgICAgIHJldHVybiBKU19FWENFUFRJT047CiAgICB9CiAgfQoKICByZXR1cm4ganNfcG9pbnRfbmV3KGN0eCwgeCwgeSk7Cn0KClZJU0lCTEUgSlNQb2ludERhdGE8ZG91YmxlPioKanNfcG9pbnRfZGF0YShKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHZhbCkgewogIHJldHVybiBzdGF0aWNfY2FzdDxKU1BvaW50RGF0YTxkb3VibGU+Kj4oSlNfR2V0T3BhcXVlMihjdHgsIHZhbCwganNfcG9pbnRfY2xhc3NfaWQpKTsKfQoKc3RhdGljIEpTVmFsdWUKanNfcG9pbnRfZGRvdChKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2KSB7CiAgSlNQb2ludERhdGE8ZG91YmxlPiogcyA9IGpzX3BvaW50X2RhdGEoY3R4LCB0aGlzX3ZhbCk7CiAgSlNQb2ludERhdGE8ZG91YmxlPiogb3RoZXIgPSBqc19wb2ludF9kYXRhKGN0eCwgYXJndlswXSk7CiAgZG91YmxlIHJldHZhbDsKICBpZighcyB8fCAhb3RoZXIpCiAgICByZXR1cm4gSlNfRVhDRVBUSU9OOwogIHJldHZhbCA9IHMtPmRkb3QoKm90aGVyKTsKICByZXR1cm4gSlNfTmV3RmxvYXQ2NChjdHgsIHJldHZhbCk7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX3BvaW50X2RpZmYoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCogYXJndikgewogIEpTUG9pbnREYXRhPGRvdWJsZT4qIHMgPSBqc19wb2ludF9kYXRhKGN0eCwgdGhpc192YWwpOwogIEpTUG9pbnREYXRhPGRvdWJsZT4qIG90aGVyID0ganNfcG9pbnRfZGF0YShjdHgsIGFyZ3ZbMF0pOwoKICBKU1ZhbHVlIHJldDsKICBpZighcyB8fCAhb3RoZXIpCiAgICByZXR1cm4gSlNfRVhDRVBUSU9OOwoKICByZXQgPSBqc19wb2ludF9uZXcoY3R4LCBzLT54IC0gb3RoZXItPngsIHMtPnkgLSBvdGhlci0+eSk7CiAgcmV0dXJuIHJldDsKfQoKc3RhdGljIEpTVmFsdWUKanNfcG9pbnRfZ2V0X3h5KEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBtYWdpYykgewogIEpTUG9pbnREYXRhPGRvdWJsZT4qIHMgPSBqc19wb2ludF9kYXRhKGN0eCwgdGhpc192YWwpOwogIGlmKCFzKQogICAgcmV0dXJuIEpTX0VYQ0VQVElPTjsKICBpZihtYWdpYyA9PSAwKQogICAgcmV0dXJuIEpTX05ld0Zsb2F0NjQoY3R4LCBzLT54KTsKICBlbHNlIGlmKG1hZ2ljID09IDEpCiAgICByZXR1cm4gSlNfTmV3RmxvYXQ2NChjdHgsIHMtPnkpOwogIHJldHVybiBKU19VTkRFRklORUQ7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX3BvaW50X2luc2lkZShKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2KSB7CiAgSlNQb2ludERhdGE8ZG91YmxlPiogcyA9IGpzX3BvaW50X2RhdGEoY3R4LCB0aGlzX3ZhbCk7CiAgSlNSZWN0RGF0YTxkb3VibGU+IHIgPSBqc19yZWN0X2dldChjdHgsIGFyZ3ZbMF0pOwogIGJvb2wgcmV0dmFsOwogIGlmKCFzIC8qfHwgIXIqLykKICAgIHJldHVybiBKU19FWENFUFRJT047CgogIHJldHZhbCA9IHMtPmluc2lkZShyKTsKCiAgcmV0dXJuIEpTX05ld0Jvb2woY3R4LCByZXR2YWwpOwp9CgpzdGF0aWMgSlNWYWx1ZQpqc19wb2ludF9ub3JtKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QqIGFyZ3YpIHsKICBKU1BvaW50RGF0YTxkb3VibGU+KiBzID0ganNfcG9pbnRfZGF0YShjdHgsIHRoaXNfdmFsKTsKICBpZighcykKICAgIHJldHVybiBKU19FWENFUFRJT047CiAgcmV0dXJuIEpTX05ld0Zsb2F0NjQoY3R4LCBzcXJ0KChkb3VibGUpcy0+eCAqIHMtPnggKyAoZG91YmxlKXMtPnkgKiBzLT55KSk7Cn0KCi8qCnN0YXRpYyBKU1ZhbHVlCmpzX3BvaW50X211bChKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2KSB7CiAgSlNQb2ludERhdGE8ZG91YmxlPiogcyA9IGpzX3BvaW50X2RhdGEoY3R4LCB0aGlzX3ZhbCk7CiAgZG91YmxlIGZhY3RvciA9IDEuMDsKICBKU19Ub0Zsb2F0NjQoY3R4LCAmZmFjdG9yLCBhcmd2WzBdKTsKICBKU1ZhbHVlIHJldDsKICBpZighcyB8fCBhcmdjIDwgMSkKICAgIHJldHVybiBKU19FWENFUFRJT047CgogIHJldHVybiBqc19wb2ludF9uZXcoY3R4LCBzLT54ICogZmFjdG9yLCBzLT55ICogZmFjdG9yKTsKfQoKc3RhdGljIEpTVmFsdWUKanNfcG9pbnRfcXVvdChKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2KSB7CiAgSlNQb2ludERhdGE8ZG91YmxlPiogcyA9IGpzX3BvaW50X2RhdGEoY3R4LCB0aGlzX3ZhbCk7CiAgZG91YmxlIGRpdmlzb3IgPSAxLjA7CiAgSlNfVG9GbG9hdDY0KGN0eCwgJmRpdmlzb3IsIGFyZ3ZbMF0pOwogIEpTVmFsdWUgcmV0OwogIGlmKCFzIHx8IGFyZ2MgPCAxKQogICAgcmV0dXJuIEpTX0VYQ0VQVElPTjsKCiAgcmV0ID0ganNfcG9pbnRfbmV3KGN0eCwgcy0+eCAvIGRpdmlzb3IsIHMtPnkgLyBkaXZpc29yKTsKICByZXR1cm4gcmV0Owp9Ki8KCnN0YXRpYyBKU1ZhbHVlCmpzX3BvaW50X3NldF94eShKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBKU1ZhbHVlQ29uc3QgdmFsLCBpbnQgbWFnaWMpIHsKICBKU1BvaW50RGF0YTxkb3VibGU+KiBzID0ganNfcG9pbnRfZGF0YShjdHgsIHRoaXNfdmFsKTsKICBkb3VibGUgdjsKICBpZighcykKICAgIHJldHVybiBKU19FWENFUFRJT047CiAgaWYoSlNfVG9GbG9hdDY0KGN0eCwgJnYsIHZhbCkpCiAgICByZXR1cm4gSlNfRVhDRVBUSU9OOwogIGlmKG1hZ2ljID09IDApCiAgICBzLT54ID0gdjsKICBlbHNlCiAgICBzLT55ID0gdjsKICByZXR1cm4gSlNfVU5ERUZJTkVEOwp9CgpzdGF0aWMgSlNWYWx1ZQpqc19wb2ludF9hZGQoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCogYXJndiwgaW50IG1hZ2ljKSB7CiAgSlNQb2ludERhdGE8ZG91YmxlPiBvdGhlciwgcG9pbnQsICpzID0ganNfcG9pbnRfZGF0YShjdHgsIHRoaXNfdmFsKTsKICBkb3VibGUgeCwgeTsKCiAgaWYoanNfcG9pbnRfcmVhZChjdHgsIGFyZ3ZbMF0sICZvdGhlcikpIHsKICAgIHggPSBvdGhlci54OwogICAgeSA9IG90aGVyLnk7CiAgfSBlbHNlIHsKICAgIEpTX1RvRmxvYXQ2NChjdHgsICZ4LCBhcmd2WzBdKTsKICAgIGlmKGFyZ2MgPCAyKQogICAgICB5ID0geDsKICAgIGVsc2UKICAgICAgSlNfVG9GbG9hdDY0KGN0eCwgJnksIGFyZ3ZbMV0pOwogIH0KCiAgc3dpdGNoKG1hZ2ljKSB7CiAgICBjYXNlIDA6CiAgICAgIHBvaW50LnggPSBzLT54ICsgeDsKICAgICAgcG9pbnQueSA9IHMtPnkgKyB5OwoKICAgICAgYnJlYWs7CiAgICBjYXNlIDE6CiAgICAgIHBvaW50LnggPSBzLT54IC0geDsKICAgICAgcG9pbnQueSA9IHMtPnkgLSB5OwogICAgICBicmVhazsKICAgIGNhc2UgMjoKICAgICAgcG9pbnQueCA9IHMtPnggKiB4OwogICAgICBwb2ludC55ID0gcy0+eSAqIHk7CiAgICAgIGJyZWFrOwogICAgY2FzZSAzOgogICAgICBwb2ludC54ID0gcy0+eCAvIHg7CiAgICAgIHBvaW50LnkgPSBzLT55IC8geTsKICAgICAgYnJlYWs7CiAgfQogIHJldHVybiBqc19wb2ludF93cmFwKGN0eCwgcG9pbnQpOwp9CgpzdGF0aWMgSlNWYWx1ZQpqc19wb2ludF90b19zdHJpbmcoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCogYXJndiwgaW50IG1hZ2ljKSB7CiAgSlNQb2ludERhdGE8ZG91YmxlPiogcyA9IGpzX3BvaW50X2RhdGEoY3R4LCB0aGlzX3ZhbCk7CiAgc3RkOjpvc3RyaW5nc3RyZWFtIG9zOwogIEpTVmFsdWUgeHYsIHl2OwogIGNvbnN0IGNoYXIqIGRlbGltID0gIiwiOwogIGRvdWJsZSB4ID0gLTEsIHkgPSAtMTsKICAvKiBpZighcykKICAgICByZXR1cm4gSlNfRVhDRVBUSU9OOyovCiAgaWYoYXJnYyA+IDApCiAgICBkZWxpbSA9IEpTX1RvQ1N0cmluZyhjdHgsIGFyZ3ZbMF0pOwoKICB4diA9IEpTX0dldFByb3BlcnR5U3RyKGN0eCwgdGhpc192YWwsICJ4Iik7CiAgeXYgPSBKU19HZXRQcm9wZXJ0eVN0cihjdHgsIHRoaXNfdmFsLCAieSIpOwoKICBpZihKU19Jc051bWJlcih4dikgJiYgSlNfSXNOdW1iZXIoeXYpKSB7CiAgICBKU19Ub0Zsb2F0NjQoY3R4LCAmeCwgeHYpOwogICAgSlNfVG9GbG9hdDY0KGN0eCwgJnksIHl2KTsKICB9IGVsc2UgaWYocykgewogICAgeCA9IHMtPng7CiAgICB5ID0gcy0+eTsKICB9CgogIHN3aXRjaChtYWdpYykgewogICAgY2FzZSAwOiB7CiAgICAgIG9zIDw8IHggPDwgIiwiIDw8IHk7CiAgICAgIGJyZWFrOwogICAgfQogICAgY2FzZSAxOiB7CiAgICAgIG9zIDw8ICJbIiA8PCB4IDw8ICIsIiA8PCB5IDw8ICJdIjsKICAgICAgYnJlYWs7CiAgICB9CiAgICBjYXNlIDI6IHsKCiAgICAgIG9zIDw8ICJ7eDoiIDw8IHggPDwgIix5OiIgPDwgeSA8PCAifSI7CiAgICAgIGJyZWFrOwogICAgfQogIH0KICByZXR1cm4gSlNfTmV3U3RyaW5nKGN0eCwgb3Muc3RyKCkuY19zdHIoKSk7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX3BvaW50X3RvX2FycmF5KEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QqIGFyZ3YpIHsKICBKU1BvaW50RGF0YTxkb3VibGU+KiBzID0ganNfcG9pbnRfZGF0YShjdHgsIHRoaXNfdmFsKTsKICBzdGQ6OmFycmF5PGRvdWJsZSwgMj4gYXJyOwoKICBhcnJbMF0gPSBzLT54OwogIGFyclsxXSA9IHMtPnk7CgogIHJldHVybiBqc19hcnJheV9mcm9tKGN0eCwgYXJyLmNiZWdpbigpLCBhcnIuY2VuZCgpKTsKfQoKc3RhdGljIEpTVmFsdWUKanNfcG9pbnRfaW5zcGVjdChKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2KSB7CiAgSlNQb2ludERhdGE8ZG91YmxlPiogcyA9IGpzX3BvaW50X2RhdGEoY3R4LCB0aGlzX3ZhbCk7CiAgSlNWYWx1ZSBvYmogPSBKU19OZXdPYmplY3RQcm90byhjdHgsIHBvaW50X3Byb3RvKTsKCiAgSlNfRGVmaW5lUHJvcGVydHlWYWx1ZVN0cihjdHgsIG9iaiwgIngiLCBKU19OZXdGbG9hdDY0KGN0eCwgcy0+eCksIEpTX1BST1BfRU5VTUVSQUJMRSk7CiAgSlNfRGVmaW5lUHJvcGVydHlWYWx1ZVN0cihjdHgsIG9iaiwgInkiLCBKU19OZXdGbG9hdDY0KGN0eCwgcy0+eSksIEpTX1BST1BfRU5VTUVSQUJMRSk7CgogIHJldHVybiBvYmo7Cn0KCnN0YXRpYyBKU0F0b20gaXRlcmF0b3Jfc3ltYm9sOwoKc3RhdGljIEpTVmFsdWUKanNfcG9pbnRfc3ltYm9sX2l0ZXJhdG9yKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QqIGFyZ3YpIHsKICBKU1ZhbHVlIGFyciwgaXRlcjsKICBhcnIgPSBqc19wb2ludF90b19hcnJheShjdHgsIHRoaXNfdmFsLCBhcmdjLCBhcmd2KTsKCiAgaWYoaXRlcmF0b3Jfc3ltYm9sID09IDApCiAgICBpdGVyYXRvcl9zeW1ib2wgPSBqc19zeW1ib2xfYXRvbShjdHgsICJpdGVyYXRvciIpOwoKICBpZighSlNfSXNGdW5jdGlvbihjdHgsIChpdGVyID0gSlNfR2V0UHJvcGVydHkoY3R4LCBhcnIsIGl0ZXJhdG9yX3N5bWJvbCkpKSkKICAgIHJldHVybiBKU19FWENFUFRJT047CiAgcmV0dXJuIEpTX0NhbGwoY3R4LCBpdGVyLCBhcnIsIDAsIGFyZ3YpOwp9CgpzdGF0aWMgSlNWYWx1ZQpqc19wb2ludF9yb3VuZChKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2LCBpbnQgbWFnaWMpIHsKICBKU1BvaW50RGF0YTxkb3VibGU+IHBvaW50LCAqcyA9IGpzX3BvaW50X2RhdGEoY3R4LCB0aGlzX3ZhbCk7CiAgZG91YmxlIHgsIHk7CiAgZG91YmxlIHByZWMgPSAxOwogIHBvaW50ID0gKnM7CiAgSlNWYWx1ZSByZXQgPSBKU19VTkRFRklORUQ7CgogIHN3aXRjaChtYWdpYykgewogICAgY2FzZSAwOgogICAgICBpZihhcmdjID4gMCkKICAgICAgICBKU19Ub0Zsb2F0NjQoY3R4LCAmcHJlYywgYXJndlswXSk7CgogICAgICB4ID0gcm91bmQocy0+eCAvIHByZWMpOwogICAgICB5ID0gcm91bmQocy0+eSAvIHByZWMpOwogICAgICByZXQgPSBqc19wb2ludF9uZXcoY3R4LCB4ICogcHJlYywgeSAqIHByZWMpOwogICAgICBicmVhazsKICAgIGNhc2UgMToKICAgICAgaWYoYXJnYyA+IDApCiAgICAgICAgSlNfVG9GbG9hdDY0KGN0eCwgJnByZWMsIGFyZ3ZbMF0pOwoKICAgICAgeCA9IGZsb29yKHMtPnggLyBwcmVjKTsKICAgICAgeSA9IGZsb29yKHMtPnkgLyBwcmVjKTsKICAgICAgcmV0ID0ganNfcG9pbnRfbmV3KGN0eCwgeCAqIHByZWMsIHkgKiBwcmVjKTsKICAgICAgYnJlYWs7CiAgICBjYXNlIDI6CiAgICAgIGlmKGFyZ2MgPiAwKQogICAgICAgIEpTX1RvRmxvYXQ2NChjdHgsICZwcmVjLCBhcmd2WzBdKTsKCiAgICAgIHggPSBjZWlsKHMtPnggLyBwcmVjKTsKICAgICAgeSA9IGNlaWwocy0+eSAvIHByZWMpOwogICAgICByZXQgPSBqc19wb2ludF9uZXcoY3R4LCB4ICogcHJlYywgeSAqIHByZWMpOwogICAgICBicmVhazsKICB9CiAgcmV0dXJuIHJldDsKfQoKc3RhdGljIEpTVmFsdWUKanNfcG9pbnRfZnJvbShKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHBvaW50LCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2KSB7CiAgc3RkOjphcnJheTxkb3VibGUsIDI+IGFycmF5OwogIEpTVmFsdWUgcmV0ID0gSlNfRVhDRVBUSU9OOwoKICBpZihKU19Jc1N0cmluZyhhcmd2WzBdKSkgewogICAgY29uc3QgY2hhciogc3RyID0gSlNfVG9DU3RyaW5nKGN0eCwgYXJndlswXSk7CiAgICBjaGFyKiBlbmRwdHIgPSBudWxscHRyOwogICAgZm9yKHNpemVfdCBpID0gMDsgaSA8IDI7IGkrKykgewogICAgICB3aGlsZSghaXNkaWdpdCgqc3RyKSAmJiAqc3RyICE9ICctJyAmJiAqc3RyICE9ICcrJyAmJiAhKCpzdHIgPT0gJy4nICYmIGlzZGlnaXQoc3RyWzFdKSkpIHN0cisrOwogICAgICBpZigqc3RyID09ICdcMCcpCiAgICAgICAgYnJlYWs7CiAgICAgIGFycmF5W2ldID0gc3RydG9kKHN0ciwgJmVuZHB0cik7CiAgICAgIHN0ciA9IGVuZHB0cjsKICAgIH0KICB9IGVsc2UgaWYoanNfaXNfYXJyYXkoY3R4LCBhcmd2WzBdKSkgewogICAganNfYXJyYXlfdG88ZG91YmxlLCAyPihjdHgsIGFyZ3ZbMF0sIGFycmF5KTsKICB9CiAgaWYoYXJyYXlbMF0gPiAwICYmIGFycmF5WzFdID4gMCkKICAgIHJldCA9IGpzX3BvaW50X25ldyhjdHgsIGFycmF5WzBdLCBhcnJheVsxXSk7CiAgcmV0dXJuIHJldDsKfQoKc3RhdGljIHZvaWQKanNfcG9pbnRfZmluYWxpemVyKEpTUnVudGltZSogcnQsIEpTVmFsdWUgdmFsKSB7CiAgSlNQb2ludERhdGE8ZG91YmxlPiogcyA9IHN0YXRpY19jYXN0PEpTUG9pbnREYXRhPGRvdWJsZT4qPihKU19HZXRPcGFxdWUodmFsLCBqc19wb2ludF9jbGFzc19pZCkpOwoKICBpZihzICE9IG51bGxwdHIpIHsKICAgIGpzX2RlYWxsb2NhdGUocnQsIHMpOwogIH0KCiAgLy8gSlNfRnJlZVZhbHVlUlQocnQsIHZhbCk7CgogIC8qICBpZihwb2ludHMuc2l6ZSgpID09IDApCiAgICAgIEpTX0ZyZWVWYWx1ZVJUKHJ0LCBwb2ludF9wcm90byk7Ki8KfQoKSlNWYWx1ZSBwb2ludF9jbGFzcyA9IEpTX1VOREVGSU5FRDsKCkpTQ2xhc3NEZWYganNfcG9pbnRfY2xhc3MgPSB7CiAgICAuY2xhc3NfbmFtZSA9ICJQb2ludCIsCiAgICAuZmluYWxpemVyID0ganNfcG9pbnRfZmluYWxpemVyLAp9OwoKY29uc3QgSlNDRnVuY3Rpb25MaXN0RW50cnkganNfcG9pbnRfcHJvdG9fZnVuY3NbXSA9IHsKICAgIEpTX0NHRVRTRVRfRU5VTUVSQUJMRV9ERUYoIngiLCBqc19wb2ludF9nZXRfeHksIGpzX3BvaW50X3NldF94eSwgMCksCiAgICBKU19DR0VUU0VUX0VOVU1FUkFCTEVfREVGKCJ5IiwganNfcG9pbnRfZ2V0X3h5LCBqc19wb2ludF9zZXRfeHksIDEpLAogICAgSlNfQ0ZVTkNfREVGKCJjcm9zcyIsIDEsIGpzX3BvaW50X2Nyb3NzKSwKICAgIEpTX0NGVU5DX0RFRigiZG90IiwgMSwganNfcG9pbnRfZGRvdCksCiAgICBKU19DRlVOQ19ERUYoImluc2lkZSIsIDEsIGpzX3BvaW50X2luc2lkZSksCiAgICBKU19DRlVOQ19ERUYoImRpZmYiLCAxLCBqc19wb2ludF9kaWZmKSwKICAgIEpTX0NGVU5DX01BR0lDX0RFRigiYWRkIiwgMSwganNfcG9pbnRfYWRkLCAwKSwKICAgIEpTX0NGVU5DX01BR0lDX0RFRigic3ViIiwgMSwganNfcG9pbnRfYWRkLCAxKSwKICAgIEpTX0NGVU5DX01BR0lDX0RFRigibXVsIiwgMSwganNfcG9pbnRfYWRkLCAyKSwKICAgIEpTX0NGVU5DX01BR0lDX0RFRigiZGl2IiwgMSwganNfcG9pbnRfYWRkLCAzKSwKICAgIEpTX0NGVU5DX0RFRigibm9ybSIsIDAsIGpzX3BvaW50X25vcm0pLAogICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJyb3VuZCIsIDAsIGpzX3BvaW50X3JvdW5kLCAwKSwKICAgIEpTX0NGVU5DX01BR0lDX0RFRigiZmxvb3IiLCAwLCBqc19wb2ludF9yb3VuZCwgMSksCiAgICBKU19DRlVOQ19NQUdJQ19ERUYoImNlaWwiLCAwLCBqc19wb2ludF9yb3VuZCwgMiksCiAgICBKU19DRlVOQ19NQUdJQ19ERUYoInRvU3RyaW5nIiwgMCwganNfcG9pbnRfdG9fc3RyaW5nLCAwKSwKICAgIEpTX0NGVU5DX0RFRigidG9BcnJheSIsIDAsIGpzX3BvaW50X3RvX2FycmF5KSwKICAgIEpTX0NGVU5DX0RFRigiW1N5bWJvbC5pdGVyYXRvcl0iLCAwLCBqc19wb2ludF9zeW1ib2xfaXRlcmF0b3IpLAogICAgSlNfUFJPUF9TVFJJTkdfREVGKCJbU3ltYm9sLnRvU3RyaW5nVGFnXSIsICJQb2ludCIsIEpTX1BST1BfQ09ORklHVVJBQkxFKSwKCiAgICAvLyBKU19DRlVOQ19NQUdJQ19ERUYoIltTeW1ib2wudG9TdHJpbmdUYWddIiwgMCwganNfcG9pbnRfdG9fc3RyaW5nLCAxKSwKfTsKY29uc3QgSlNDRnVuY3Rpb25MaXN0RW50cnkganNfcG9pbnRfc3RhdGljX2Z1bmNzW10gPSB7SlNfQ0ZVTkNfREVGKCJmcm9tIiwgMSwganNfcG9pbnRfZnJvbSl9OwoKaW50CmpzX3BvaW50X2luaXQoSlNDb250ZXh0KiBjdHgsIEpTTW9kdWxlRGVmKiBtKSB7CgogIGlmKGpzX3BvaW50X2NsYXNzX2lkID09IDApIHsKICAgIC8qIGNyZWF0ZSB0aGUgUG9pbnQgY2xhc3MgKi8KICAgIEpTX05ld0NsYXNzSUQoJmpzX3BvaW50X2NsYXNzX2lkKTsKICAgIEpTX05ld0NsYXNzKEpTX0dldFJ1bnRpbWUoY3R4KSwganNfcG9pbnRfY2xhc3NfaWQsICZqc19wb2ludF9jbGFzcyk7CgogICAgcG9pbnRfcHJvdG8gPSBKU19OZXdPYmplY3QoY3R4KTsKICAgIEpTX1NldFByb3BlcnR5RnVuY3Rpb25MaXN0KGN0eCwgcG9pbnRfcHJvdG8sIGpzX3BvaW50X3Byb3RvX2Z1bmNzLCBjb3VudG9mKGpzX3BvaW50X3Byb3RvX2Z1bmNzKSk7CiAgICBKU19TZXRDbGFzc1Byb3RvKGN0eCwganNfcG9pbnRfY2xhc3NfaWQsIHBvaW50X3Byb3RvKTsKCiAgICBwb2ludF9jbGFzcyA9IEpTX05ld0NGdW5jdGlvbjIoY3R4LCBqc19wb2ludF9jdG9yLCAiUG9pbnQiLCAwLCBKU19DRlVOQ19jb25zdHJ1Y3RvciwgMCk7CiAgICAvKiBzZXQgcHJvdG8uY29uc3RydWN0b3IgYW5kIGN0b3IucHJvdG90eXBlICovCiAgICBKU19TZXRDb25zdHJ1Y3RvcihjdHgsIHBvaW50X2NsYXNzLCBwb2ludF9wcm90byk7CiAgICBKU19TZXRQcm9wZXJ0eUZ1bmN0aW9uTGlzdChjdHgsIHBvaW50X2NsYXNzLCBqc19wb2ludF9zdGF0aWNfZnVuY3MsIGNvdW50b2YoanNfcG9pbnRfc3RhdGljX2Z1bmNzKSk7CgogICAganNfc2V0X2luc3BlY3RfbWV0aG9kKGN0eCwgcG9pbnRfcHJvdG8sIGpzX3BvaW50X2luc3BlY3QpOwogIH0KCiAgaWYobSkKICAgIEpTX1NldE1vZHVsZUV4cG9ydChjdHgsIG0sICJQb2ludCIsIHBvaW50X2NsYXNzKTsKICAvKiBlbHNlCiAgICAgSlNfU2V0UHJvcGVydHlTdHIoY3R4LCAqc3RhdGljX2Nhc3Q8SlNWYWx1ZSo+KG0pLCBuYW1lLCBwb2ludF9jbGFzcyk7Ki8KICByZXR1cm4gMDsKfQoKdm9pZApqc19wb2ludF9jb25zdHJ1Y3RvcihKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZSBwYXJlbnQsIGNvbnN0IGNoYXIqIG5hbWUpIHsKICBpZihKU19Jc1VuZGVmaW5lZChwb2ludF9jbGFzcykpCiAgICBqc19wb2ludF9pbml0KGN0eCwgMCk7CgogIEpTX1NldFByb3BlcnR5U3RyKGN0eCwgcGFyZW50LCBuYW1lID8gbmFtZSA6ICJQb2ludCIsIHBvaW50X2NsYXNzKTsKfQoKZXh0ZXJuICJDIiBWSVNJQkxFIHZvaWQKanNfcG9pbnRfZXhwb3J0KEpTQ29udGV4dCogY3R4LCBKU01vZHVsZURlZiogbSkgewogIEpTX0FkZE1vZHVsZUV4cG9ydChjdHgsIG0sICJQb2ludCIpOwp9CgojaWYgZGVmaW5lZChKU19QT0lOVF9NT0RVTEUpCiNkZWZpbmUgSlNfSU5JVF9NT0RVTEUgLypWSVNJQkxFKi8ganNfaW5pdF9tb2R1bGUKI2Vsc2UKI2RlZmluZSBKU19JTklUX01PRFVMRSAvKlZJU0lCTEUqLyBqc19pbml0X21vZHVsZV9wb2ludAojZW5kaWYKCkpTTW9kdWxlRGVmKgpKU19JTklUX01PRFVMRShKU0NvbnRleHQqIGN0eCwgY29uc3QgY2hhciogbW9kdWxlX25hbWUpIHsKICBKU01vZHVsZURlZiogbTsKICBtID0gSlNfTmV3Q01vZHVsZShjdHgsIG1vZHVsZV9uYW1lLCAmanNfcG9pbnRfaW5pdCk7CiAgaWYoIW0pCiAgICByZXR1cm4gTlVMTDsKICBqc19wb2ludF9leHBvcnQoY3R4LCBtKTsKICByZXR1cm4gbTsKfQp9AAAAAAAAAAD4MAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAACR0AAAAAAAAJHQAAAAAAAAAAAAAAAPC/"
				]
			]
		},
		{
			"file": "util.hpp",
			"settings":
			{
				"buffer_size": 7222,
				"line_ending": "Unix"
			},
			"undo_stack":
			[
				[
					1,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAAA2HAAAI2lmbmRlZiBVVElMX0hQUAojZGVmaW5lIFVUSUxfSFBQCgojaW5jbHVkZSA8c3RyaW5nPgojaW5jbHVkZSA8bnVtZXJpYz4KI2luY2x1ZGUgPGlvc3RyZWFtPgojaW5jbHVkZSA8aW9tYW5pcD4KI2luY2x1ZGUgPHN5cy9zdGF0Lmg+CgojaW5jbHVkZSA8b3BlbmN2Mi9jb3JlLmhwcD4KCiNpZiBkZWZpbmVkKF9XSU4zMikgfHwgZGVmaW5lZChfX01JTkdXMzJfXykKI2RlZmluZSBWSVNJQkxFIF9fZGVjbHNwZWMoZGxsZXhwb3J0KQojZGVmaW5lIEhJRERFTgojZWxzZQojZGVmaW5lIFZJU0lCTEUgX19hdHRyaWJ1dGVfXygodmlzaWJpbGl0eSgiZGVmYXVsdCIpKSkKI2RlZmluZSBISURERU4gX19hdHRyaWJ1dGVfXygodmlzaWJpbGl0eSgiaGlkZGVuIikpKQojZW5kaWYKCiNkZWZpbmUgQ09MT1JfQkxBQ0sgIlx4MWJbMzBtIgojZGVmaW5lIENPTE9SX1JFRCAiXHgxYlszMW0iCiNkZWZpbmUgQ09MT1JfR1JFRU4gIlx4MWJbMzJtIgojZGVmaW5lIENPTE9SX1lFTExPVyAiXHgxYlszM20iCiNkZWZpbmUgQ09MT1JfQkxVRSAiXHgxYlszNG0iCiNkZWZpbmUgQ09MT1JfTUFHRU5UQSAiXHgxYlszNW0iCiNkZWZpbmUgQ09MT1JfQ1lBTiAiXHgxYlszNm0iCiNkZWZpbmUgQ09MT1JfV0hJVEUgIlx4MWJbMzdtIgoKI2RlZmluZSBDT0xPUl9HUkFZICJceDFiWzE7MzBtIgojZGVmaW5lIENPTE9SX0xJR0hUUkVEICJceDFiWzE7MzFtIgojZGVmaW5lIENPTE9SX0xJR0hUR1JFRU4gIlx4MWJbMTszMm0iCiNkZWZpbmUgQ09MT1JfTElHSFRZRUxMT1cgIlx4MWJbMTszM20iCiNkZWZpbmUgQ09MT1JfTElHSFRCTFVFICJceDFiWzE7MzRtIgojZGVmaW5lIENPTE9SX0xJR0hUTUFHRU5UQSAiXHgxYlsxOzM1bSIKI2RlZmluZSBDT0xPUl9MSUdIVENZQU4gIlx4MWJbMTszNm0iCiNkZWZpbmUgQ09MT1JfTElHSFRXSElURSAiXHgxYlsxOzM3bSIKCiNkZWZpbmUgQ09MT1JfTk9ORSAiXHgxYlttIgoKYm9vbCBzdHJfZW5kKGNvbnN0IGNoYXIqIHN0ciwgY29uc3QgY2hhciogc3VmZml4KTsKYm9vbCBzdHJfZW5kKGNvbnN0IHN0ZDo6c3RyaW5nJiBzdHIsIGNvbnN0IHN0ZDo6c3RyaW5nJiBzdWZmaXgpOwoKc3RkOjpzdHJpbmcgdG9fc3RyaW5nKGNvbnN0IGN2OjpTY2FsYXImIHNjYWxhcik7CgpzdGQ6OnN0cmluZyBtYWtlX2ZpbGVuYW1lKGNvbnN0IHN0ZDo6c3RyaW5nJiBuYW1lLCBpbnQgY291bnQsIGNvbnN0IHN0ZDo6c3RyaW5nJiBleHQsIGNvbnN0IHN0ZDo6c3RyaW5nJiBkaXIgPSAidG1wIik7CgppbmxpbmUgaW50MzJfdApnZXRfbXRpbWUoY29uc3QgY2hhciogZmlsZW5hbWUpIHsKI2lmIF9fU1REQ19WRVJTSU9OX18gPj0gMjAxNzEwTAogIHJldHVybiBzdGQ6OmZpbGVzeXN0ZW06Omxhc3Rfd3JpdGVfdGltZShmaWxlbmFtZSk7CiNlbHNlCiAgc3RydWN0IHN0YXQgc3Q7CiAgaWYoc3RhdChmaWxlbmFtZSwgJnN0KSAhPSAtMSkgewogICAgdWludDMyX3QgcmV0ID0gc3Quc3RfbXRpbWU7CiAgICByZXR1cm4gcmV0OwogIH0KI2VuZGlmCiAgcmV0dXJuIC0xOwp9Cgp0ZW1wbGF0ZTxjbGFzcyBDaGFyLCBjbGFzcyBWYWx1ZT4KaW5saW5lIHN0ZDo6b3N0cmVhbSYKb3BlcmF0b3I8PChzdGQ6Om9zdHJlYW0mIG9zLCBjb25zdCBzdGQ6OnZlY3RvcjxWYWx1ZT4mIGMpIHsKICB0eXBlZGVmIHR5cGVuYW1lIHN0ZDo6dmVjdG9yPFZhbHVlPjo6Y29uc3RfaXRlcmF0b3IgaXRlcmF0b3JfdHlwZTsKICBpdGVyYXRvcl90eXBlIGVuZCA9IGMuZW5kKCk7CiAgZm9yKGl0ZXJhdG9yX3R5cGUgaXQgPSBjLmJlZ2luKCk7IGl0ICE9IGVuZDsgKytpdCkgewogICAgb3MgPDwgJyAnOwogICAgb3MgPDwgdG9fc3RyaW5nKCppdCk7CiAgfQogIHJldHVybiBvczsKfQoKaW5saW5lIHN0ZDo6c3RyaW5nCnRvX3N0cmluZyhjb25zdCBjdjo6U2NhbGFyJiBzY2FsYXIpIHsKICBjb25zdCBpbnQgcGFkID0gMzsKICBzdGQ6Om9zdHJpbmdzdHJlYW0gb3NzOwogIG9zcyA8PCAnWycgPDwgc3RkOjpzZXRmaWxsKCcgJykgPDwgc3RkOjpzZXR3KHBhZCkgPDwgc2NhbGFyWzBdIDw8ICcsJyA8PCBzdGQ6OnNldGZpbGwoJyAnKSA8PCBzdGQ6OnNldHcocGFkKSA8PCBzY2FsYXJbMV0KICAgICAgPDwgJywnIDw8IHN0ZDo6c2V0ZmlsbCgnICcpIDw8IHN0ZDo6c2V0dyhwYWQpIDw8IHNjYWxhclsyXSA8PCAnLCcgPDwgc3RkOjpzZXRmaWxsKCcgJykgPDwgc3RkOjpzZXR3KHBhZCkgPDwgc2NhbGFyWzNdCiAgICAgIDw8ICddJzsKICByZXR1cm4gb3NzLnN0cigpOwp9Cgp0ZW1wbGF0ZTxjbGFzcyBJdGVyYXRvcj4Kc3RhdGljIGlubGluZSBzdGQ6OnN0cmluZwpqb2luKGNvbnN0IEl0ZXJhdG9yJiBzdGFydCwgY29uc3QgSXRlcmF0b3ImIGVuZCwgY29uc3Qgc3RkOjpzdHJpbmcmIGRlbGltKSB7CiAgcmV0dXJuIHN0ZDo6YWNjdW11bGF0ZShzdGFydCwgZW5kLCBzdGQ6OnN0cmluZygpLCBbJmRlbGltXShjb25zdCBzdGQ6OnN0cmluZyYgYSwgY29uc3Qgc3RkOjpzdHJpbmcmIGIpIC0+IHN0ZDo6c3RyaW5nIHsKICAgIHJldHVybiBhICsgKGEubGVuZ3RoKCkgPiAwID8gZGVsaW0gOiAiIikgKyBiOwogIH0pOwp9CgpleHRlcm4gIkMiIHZvaWQqIGdldF9oZWFwX2Jhc2UoKTsKCnR5cGVkZWYgc3RydWN0IEpTTWF0RGltZW5zaW9ucyB7CiAgdWludDMyX3Qgcm93cywgY29sczsKCiAgb3BlcmF0b3IgY3Y6OlNpemUoKSBjb25zdCB7IHJldHVybiBjdjo6U2l6ZShjb2xzLCByb3dzKTsgfQp9IEpTTWF0RGltZW5zaW9uczsKCnN0YXRpYyBpbmxpbmUgaW50Cm1hdHR5cGVfZGVwdGgoaW50IHR5cGUpIHsKICByZXR1cm4gdHlwZSAmIDB4NzsKfQpzdGF0aWMgaW5saW5lIGludAptYXR0eXBlX2NoYW5uZWxzKGludCB0eXBlKSB7CiAgcmV0dXJuICh0eXBlID4+IDMpICsgMTsKfQpzdGF0aWMgaW5saW5lIGJvb2wKbWF0dHlwZV9mbG9hdGluZyhpbnQgdHlwZSkgewogIHN3aXRjaChtYXR0eXBlX2RlcHRoKHR5cGUpKSB7CiAgICBjYXNlIENWXzMyRjoKICAgIGNhc2UgQ1ZfNjRGOiByZXR1cm4gdHJ1ZTsKICAgIGRlZmF1bHQ6IHJldHVybiBmYWxzZTsKICB9Cn0Kc3RhdGljIGlubGluZSBib29sCm1hdHR5cGVfc2lnbmVkKGludCB0eXBlKSB7CiAgc3dpdGNoKG1hdHR5cGVfZGVwdGgodHlwZSkpIHsKICAgIGNhc2UgQ1ZfOFM6CiAgICBjYXNlIENWXzE2UzoKICAgIGNhc2UgQ1ZfMzJTOiByZXR1cm4gdHJ1ZTsKICAgIGRlZmF1bHQ6IHJldHVybiBmYWxzZTsKICB9Cn0KCnRlbXBsYXRlPGNsYXNzIFQ+CnN0YXRpYyBpbmxpbmUgSlNNYXREaW1lbnNpb25zCm1hdF9kaW1lbnNpb25zKGNvbnN0IFQmIG1hdCkgewogIEpTTWF0RGltZW5zaW9ucyByZXQ7CiAgcmV0LnJvd3MgPSBtYXQucm93czsKICByZXQuY29scyA9IG1hdC5jb2xzOwogIHJldHVybiByZXQ7Cn0KCnN0YXRpYyBpbmxpbmUgdWludDhfdCoKbWF0X3B0cihjdjo6TWF0JiBtYXQpIHsKICByZXR1cm4gcmVpbnRlcnByZXRfY2FzdDx1aW50OF90Kj4obWF0LnB0cigpKTsKfQoKc3RhdGljIGlubGluZSB1aW50OF90KgptYXRfcHRyKGN2OjpVTWF0JiBtYXQpIHsKICBjdjo6VU1hdERhdGEqIHU7CgogIGlmKCh1ID0gbWF0LnUpKQogICAgcmV0dXJuIHJlaW50ZXJwcmV0X2Nhc3Q8dWludDhfdCo+KHUtPmRhdGEpOwoKICByZXR1cm4gbnVsbHB0cjsKfQoKc3RhdGljIGlubGluZSBzaXplX3QKbWF0X29mZnNldChjb25zdCBjdjo6TWF0JiBtYXQsIHVpbnQzMl90IHJvdywgdWludDMyX3QgY29sKSB7CiAgY29uc3QgdWNoYXIgKmJhc2UsICpwdHI7CgogIGJhc2UgPSBtYXQucHRyPHVjaGFyPigpOwogIHB0ciA9IG1hdC5wdHI8dWNoYXI+KHJvdywgY29sKTsKCiAgcmV0dXJuIHB0ciAtIGJhc2U7Cn0KCnN0YXRpYyBpbmxpbmUgc2l6ZV90Cm1hdF9vZmZzZXQoY29uc3QgY3Y6OlVNYXQmIG1hdCwgdWludDMyX3Qgcm93LCB1aW50MzJfdCBjb2wpIHsKICByZXR1cm4gKHNpemVfdChtYXQuY29scykgKiByb3cgKyBjb2wpICogbWF0LmVsZW1TaXplKCk7Cn0KCnRlbXBsYXRlPGNsYXNzIFQ+CnN0YXRpYyBpbmxpbmUgVCYKbWF0X2F0KGN2OjpNYXQmIG1hdCwgdWludDMyX3Qgcm93LCB1aW50MzJfdCBjb2wpIHsKICByZXR1cm4gKm1hdC5wdHI8VD4ocm93LCBjb2wpOwp9Cgp0ZW1wbGF0ZTxjbGFzcyBUPgpzdGF0aWMgaW5saW5lIFQmCm1hdF9hdChjdjo6VU1hdCYgbWF0LCB1aW50MzJfdCByb3csIHVpbnQzMl90IGNvbCkgewogIHNpemVfdCBvZmZzID0gbWF0X29mZnNldChtYXQsIHJvdywgY29sKTsKICByZXR1cm4gKnJlaW50ZXJwcmV0X2Nhc3Q8VCo+KG1hdF9wdHIobWF0KSArIG9mZnMpOwp9Cgp0ZW1wbGF0ZTxjbGFzcyBUPgpzdGF0aWMgaW5saW5lIHNpemVfdAptYXRfYnl0ZXNpemUoY29uc3QgVCYgbWF0KSB7CiAgcmV0dXJuIG1hdC5lbGVtU2l6ZSgpICogbWF0LnRvdGFsKCk7Cn0KCnRlbXBsYXRlPGNsYXNzIFQ+CnN0YXRpYyBpbmxpbmUgaW50Cm1hdF9kZXB0aChjb25zdCBUJiBtYXQpIHsKICByZXR1cm4gbWF0dHlwZV9kZXB0aChtYXQudHlwZSgpKTsKfQoKdGVtcGxhdGU8Y2xhc3MgVD4Kc3RhdGljIGlubGluZSBpbnQKbWF0X2NoYW5uZWxzKGNvbnN0IFQmIG1hdCkgewogIHJldHVybiBtYXR0eXBlX2NoYW5uZWxzKG1hdC50eXBlKCkpOwp9Cgp0ZW1wbGF0ZTxjbGFzcyBUPgpzdGF0aWMgaW5saW5lIGJvb2wKbWF0X3NpZ25lZChjb25zdCBUJiBtYXQpIHsKICByZXR1cm4gbWF0dHlwZV9zaWduZWQobWF0LnR5cGUoKSk7Cn0KCnRlbXBsYXRlPGNsYXNzIFQ+CnN0YXRpYyBpbmxpbmUgYm9vbAptYXRfZmxvYXRpbmcoY29uc3QgVCYgbWF0KSB7CiAgcmV0dXJuIG1hdHR5cGVfZmxvYXRpbmcobWF0LnR5cGUoKSk7Cn0KCnRlbXBsYXRlPGNsYXNzIFQsIGludCBOPgpzdGF0aWMgaW5saW5lIFQqCmJlZ2luKGN2OjpWZWM8VCwgTj4mIHYpIHsKICByZXR1cm4gJnZbMF07Cn0KdGVtcGxhdGU8Y2xhc3MgVCwgaW50IE4+CnN0YXRpYyBpbmxpbmUgVCoKZW5kKGN2OjpWZWM8VCwgTj4mIHYpIHsKICByZXR1cm4gJnZbTl07Cn0KCnRlbXBsYXRlPGNsYXNzIFQsIGludCBOPgpzdGF0aWMgaW5saW5lIFQgY29uc3QqCmJlZ2luKGN2OjpWZWM8VCwgTj4gY29uc3QmIHYpIHsKICByZXR1cm4gJnZbMF07Cn0KdGVtcGxhdGU8Y2xhc3MgVCwgaW50IE4+CnN0YXRpYyBpbmxpbmUgVCBjb25zdCoKZW5kKGN2OjpWZWM8VCwgTj4gY29uc3QmIHYpIHsKICByZXR1cm4gJnZbTl07Cn0KLyoKdGVtcGxhdGU8Y2xhc3MgVD4Kc3RhdGljIGlubGluZSB0eXBlbmFtZSBUOjp2YWx1ZV90eXBlIGNvbnN0KgpiZWdpbihjb25zdCBUJiBvYmopIHsKICByZXR1cm4gb2JqLmJlZ2luKCk7Cn0KdGVtcGxhdGU8Y2xhc3MgVD4Kc3RhdGljIGlubGluZSB0eXBlbmFtZSBUOjp2YWx1ZV90eXBlKgpiZWdpbihUJiBvYmopIHsKICByZXR1cm4gb2JqLmJlZ2luKCk7Cn0KCnRlbXBsYXRlPGNsYXNzIFQ+CnN0YXRpYyBpbmxpbmUgdHlwZW5hbWUgVDo6dmFsdWVfdHlwZSBjb25zdCoKZW5kKGNvbnN0IFQmIG9iaikgewogIHJldHVybiBvYmouZW5kKCk7Cn0KdGVtcGxhdGU8Y2xhc3MgVD4Kc3RhdGljIGlubGluZSB0eXBlbmFtZSBUOjp2YWx1ZV90eXBlKgplbmQoVCYgb2JqKSB7CiAgcmV0dXJuIG9iai5lbmQoKTsKfQoqLwp0ZW1wbGF0ZTxjbGFzcyBUPgpzdGF0aWMgaW5saW5lIFQqCmJlZ2luKHN0ZDo6dmVjdG9yPFQ+JiB2KSB7CiAgcmV0dXJuICZ2WzBdOwp9CnRlbXBsYXRlPGNsYXNzIFQ+CnN0YXRpYyBpbmxpbmUgVCoKZW5kKHN0ZDo6dmVjdG9yPFQ+JiB2KSB7CiAgcmV0dXJuICZ2W3Yuc2l6ZSgpXTsKfQp0ZW1wbGF0ZTxjbGFzcyBUPgpzdGF0aWMgaW5saW5lIFQgY29uc3QqCmJlZ2luKHN0ZDo6dmVjdG9yPFQ+IGNvbnN0JiB2KSB7CiAgcmV0dXJuICZ2WzBdOwp9CnRlbXBsYXRlPGNsYXNzIFQ+CnN0YXRpYyBpbmxpbmUgVCBjb25zdCoKZW5kKHN0ZDo6dmVjdG9yPFQ+IGNvbnN0JiB2KSB7CiAgcmV0dXJuICZ2W3Yuc2l6ZSgpXTsKfQoKc3RhdGljIGlubGluZSB1aW50OF90KgpiZWdpbihjdjo6TWF0JiBtYXQpIHsKICByZXR1cm4gbWF0LnB0cjx1aW50OF90PigpOwp9CnN0YXRpYyBpbmxpbmUgdWludDhfdCoKZW5kKGN2OjpNYXQmIG1hdCkgewogIHJldHVybiBtYXQucHRyPHVpbnQ4X3Q+KCkgKyAobWF0LnRvdGFsKCkgKiBtYXQuZWxlbVNpemUoKSk7Cn0KCnN0YXRpYyBpbmxpbmUgdWludDhfdCBjb25zdCoKYmVnaW4oY3Y6Ok1hdCBjb25zdCYgbWF0KSB7CiAgcmV0dXJuIG1hdC5wdHI8dWludDhfdCBjb25zdD4oKTsKfQpzdGF0aWMgaW5saW5lIHVpbnQ4X3QgY29uc3QqCmVuZChjdjo6TWF0IGNvbnN0JiBtYXQpIHsKICByZXR1cm4gbWF0LnB0cjx1aW50OF90IGNvbnN0PigpICsgKG1hdC50b3RhbCgpICogbWF0LmVsZW1TaXplKCkpOwp9CgojaWYgQ1hYX1NUQU5EQVJEID49IDIwCiNpbmNsdWRlIDxyYW5nZXM+Cgp0ZW1wbGF0ZTxjbGFzcyBUPgpzdGF0aWMgaW5saW5lIHN0ZDo6cmFuZ2VzOjpzdWJyYW5nZTxUPgpzaXplZF9yYW5nZShUIHB0ciwgc2l6ZV90IGxlbikgewogIHJldHVybiBzdGQ6OnJhbmdlczo6c3VicmFuZ2U8VD4ocHRyLCBwdHIgKyBsZW4pOwp9Cgp0ZW1wbGF0ZTxjbGFzcyBUPgpzdGF0aWMgaW5saW5lIHN0ZDo6cmFuZ2VzOjpzdWJyYW5nZTxUKj4KYXJndW1lbnRfcmFuZ2UoaW50IGFyZ2MsIFQqIGFyZ3YpIHsKICByZXR1cm4gc3RkOjpyYW5nZXM6OnN1YnJhbmdlPFQqPihhcmd2LCBhcmd2ICsgYXJnYyk7Cn0KCnRlbXBsYXRlPGNsYXNzIFQ+CnN0YXRpYyBpbmxpbmUgc3RkOjpyYW5nZXM6OnN1YnJhbmdlPFQqPgpyYW5nZShUKiBiZWdpbiwgVCogZW5kKSB7CiAgcmV0dXJuIHN0ZDo6cmFuZ2VzOjpzdWJyYW5nZTxUKj4oYmVnaW4sIGVuZCk7Cn0KCnRlbXBsYXRlPGNsYXNzIENvbnRhaW5lcj4Kc3RhdGljIGlubGluZSBzdGQ6OnJhbmdlczo6c3VicmFuZ2U8dHlwZW5hbWUgQ29udGFpbmVyOjp2YWx1ZV90eXBlKj4KcmFuZ2UoQ29udGFpbmVyJiBjKSB7CiAgcmV0dXJuIHN0ZDo6cmFuZ2VzOjpzdWJyYW5nZTx0eXBlbmFtZSBDb250YWluZXI6OnZhbHVlX3R5cGUqPihiZWdpbihjKSwgZW5kKGMpKTsKfQoKdGVtcGxhdGU8Y2xhc3MgVCwgY2xhc3MgQ29udGFpbmVyPgpzdGF0aWMgaW5saW5lIHN0ZDo6cmFuZ2VzOjpzdWJyYW5nZTxUPgpyYW5nZShDb250YWluZXImIGMpIHsKICByZXR1cm4gc3RkOjpyYW5nZXM6OnN1YnJhbmdlPFQ+KHJlaW50ZXJwcmV0X2Nhc3Q8VD4oYmVnaW4oYykpLCByZWludGVycHJldF9jYXN0PFQ+KGVuZChjKSkpOwp9CiNlbmRpZgoKI2VuZGlmIC8vIGRlZmluZWQoVVRJTF9IUFApCgAAAAAAAAAANhwAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/"
				]
			]
		},
		{
			"contents": "#ifndef JSBINDINGS_HPP\n#define JSBINDINGS_HPP\n\n#include \"util.hpp\"\n#include <quickjs/quickjs.h>\n#include <quickjs/cutils.h>\n\n#include <opencv2/core/core.hpp>\n#include <opencv2/imgproc/imgproc.hpp>\n#include <opencv2/videoio.hpp>\n#include <iomanip>\n#include <map>\n#include <iterator>\n#include <ranges>\n#include <array>\n#include <algorithm>\n#include <string>\n#include <cctype>\n\ntypedef struct {\n  BOOL done;\n  JSValue value;\n} IteratorValue;\n\ntypedef cv::Rect2d JSRectDataD;\ntypedef cv::Mat JSMatData;\ntypedef cv::UMat JSUMatData;\ntypedef cv::Size2d JSSizeDataD;\n\ntemplate<class T> using JSPointData = cv::Point_<T>;\ntemplate<class T> using JSSizeData = cv::Size_<T>;\ntemplate<class T> using JSRectData = cv::Rect_<T>;\ntemplate<class T> using JSContourData = std::vector<JSPointData<T>>;\ntemplate<class T> using JSContoursData = std::vector<JSContourData<T>>;\n\n/*typedef JSPointData<int> JSPointData<int>;\ntypedef JSPointData<float> JSPointDataF;\ntypedef JSPointData<double> JSPointDataD;*/\n\ntypedef cv::VideoCapture JSVideoCaptureData;\ntypedef cv::TickMeter JSTickMeterData;\ntypedef cv::Ptr<cv::CLAHE> JSCLAHEData;\n\ntypedef cv::_InputArray JSInputArray;\ntypedef cv::_OutputArray JSOutputArray;\ntypedef cv::_InputOutputArray JSInputOutputArray;\n\ntemplate<class T> union JSLineData {\n  std::array<T, 4> array;\n  // cv::Vec<T, 4> vec;\n  // cv::Scalar_<T> scalar;\n  std::array<JSPointData<T>, 2> points;\n  std::pair<JSPointData<T>, JSPointData<T>> pt;\n  struct {\n    T x1, y1, x2, y2;\n  };\n};\n\ntemplate<class T> struct JSLineTraits {\n  typedef std::array<T, 4> array_type;\n  typedef cv::Vec<T, 4> vector_type;\n  typedef cv::Scalar_<T> scalar_type;\n};\n\ntemplate<class T> union JSColorData {\n  std::array<T, 4> arr;\n  struct {\n    T r, g, b, a;\n  };\n};\n\ntemplate<> union JSColorData<uint8_t> {\n  std::array<uint8_t, 4> arr;\n  struct {\n    uint8_t r, g, b, a;\n  };\n  uint32_t u32;\n};\n\n#if defined(_WIN32) || defined(__MINGW32__)\n#define VISIBLE __declspec(dllexport)\n#define HIDDEN\n#else\n#define VISIBLE __attribute__((visibility(\"default\")))\n#define HIDDEN __attribute__((visibility(\"hidden\")))\n#endif\n\n#define JS_CGETSET_ENUMERABLE_DEF(prop_name, fgetter, fsetter, magic_num)                                                      \\\n  {                                                                                                                            \\\n    .name = prop_name, .prop_flags = JS_PROP_ENUMERABLE | JS_PROP_CONFIGURABLE, .def_type = JS_DEF_CGETSET_MAGIC,              \\\n    .magic = magic_num, .u = {                                                                                                 \\\n      .getset = {.get = {.getter_magic = fgetter}, .set = {.setter_magic = fsetter}}                                           \\\n    }                                                                                                                          \\\n  }\n\nextern \"C\" {\n\nint js_draw_functions(JSContext* ctx, JSValue parent);\nint js_draw_init(JSContext*, JSModuleDef*);\n\nVISIBLE JSValue js_line_new(JSContext* ctx, double x1, double y1, double x2, double y2);\n\nJSModuleDef* js_init_module(JSContext* ctx, const char* module_name);\nJSModuleDef* js_init_module_point(JSContext*, const char*);\nJSModuleDef* js_init_module_size(JSContext*, const char*);\nJSModuleDef* js_init_module_rect(JSContext*, const char*);\nJSModuleDef* js_init_module_mat(JSContext*, const char*);\nJSModuleDef* js_init_module_contour(JSContext*, const char*);\nJSModuleDef* js_init_module_line(JSContext*, const char*);\nJSModuleDef* js_init_module_draw(JSContext*, const char*);\nJSModuleDef* js_init_module_cv(JSContext*, const char*);\nJSModuleDef* js_init_module_video_capture(JSContext*, const char*);\n\nint js_video_capture_init(JSContext*, JSModuleDef*);\n\nVISIBLE JSValue js_video_capture_wrap(JSContext*, cv::VideoCapture* cap);\n\n// extern \"C\" JSValue int32array_ctor, int32array_proto, mat_class, mat_proto, mat_iterator_proto,\n// point_class, line_class,  draw_class,  point_proto,\n// rect_class, rect_proto, size_class, size_proto, line_proto, draw_proto;\n\nVISIBLE JSValue js_mat_wrap(JSContext*, const cv::Mat& mat);\n}\n\nextern \"C\" JSClassDef js_size_class, js_point_class, js_mat_class, js_rect_class;\nextern \"C\" JSClassID js_line_class_id, js_draw_class_id;\n\nextern \"C\" const JSCFunctionListEntry js_rect_proto_funcs[];\n\nextern \"C\" JSClassID js_point_class_id, js_size_class_id, js_rect_class_id, js_mat_class_id, js_mat_iterator_class_id;\n\nextern \"C\" {\nstatic inline JSValue js_global_get(JSContext* ctx, const char* prop);\nstatic inline BOOL js_is_iterable(JSContext* ctx, JSValueConst obj);\nstatic inline JSValue js_iterator_method(JSContext* ctx, JSValueConst obj);\nstatic inline JSValue js_iterator_new(JSContext* ctx, JSValueConst obj);\nstatic inline IteratorValue js_iterator_next(JSContext* ctx, JSValueConst obj);\nstatic inline JSAtom js_symbol_atom(JSContext* ctx, const char* name);\nstatic inline JSValue js_symbol_ctor(JSContext* ctx);\nstatic inline JSValue js_symbol_get_static(JSContext* ctx, const char* name);\n}\n/*\ntemplate<class Type> JSValue js_contour_new(JSContext* ctx, const JSContourData<Type>& points);\n\ntemplate<> JSValue js_contour_new<double>(JSContext* ctx, const JSContourData<double>& points);\n\ntemplate<> JSValue js_contour_new<float>(JSContext* ctx, const JSContourData<float>& points);\n\ntemplate<> JSValue js_contour_new<int>(JSContext* ctx, const JSContourData<int>& points);\n*/\n#define countof(x) (sizeof(x) / sizeof((x)[0]))\n\nJSValue js_vector_vec4i_to_array(JSContext*, const std::vector<cv::Vec4i>& vec);\n\ninline JSValueConst\njs_ctor(JSContext* ctx, const char* name) {\n  JSValue global = JS_GetGlobalObject(ctx);\n  JSValueConst ctor = JS_GetPropertyStr(ctx, global, name);\n  return ctor;\n}\n\ninline JSValueConst\njs_proto(JSContext* ctx, const char* name) {\n  return JS_GetPrototype(ctx, js_ctor(ctx, name));\n}\n\ninline JSValue\njs_new(JSContext* ctx, const char* name) {\n  return JS_NewObjectProto(ctx, js_proto(ctx, name));\n}\n\ntemplate<class T>\nstatic inline int\njs_number_read(JSContext* ctx, JSValueConst num, T* out) {\n  double d;\n  int ret;\n  if((ret = !JS_ToFloat64(ctx, &d, num)))\n    *out = d;\n  return ret;\n}\n\ntemplate<>\ninline int\njs_number_read<int32_t>(JSContext* ctx, JSValueConst num, int32_t* out) {\n  return !JS_ToInt32(ctx, out, num);\n}\n\ntemplate<>\ninline int\njs_number_read<uint32_t>(JSContext* ctx, JSValueConst num, uint32_t* out) {\n  return !JS_ToUint32(ctx, out, num);\n}\n\ntemplate<>\ninline int\njs_number_read<int64_t>(JSContext* ctx, JSValueConst num, int64_t* out) {\n  return !JS_ToInt64(ctx, out, num);\n}\n\ntemplate<class T>\nstatic inline JSValue\njs_number_new(JSContext* ctx, T num) {\n  return JS_NewFloat64(ctx, num);\n}\n\ntemplate<>\ninline JSValue\njs_number_new<int32_t>(JSContext* ctx, int32_t num) {\n  return JS_NewInt32(ctx, num);\n}\ntemplate<>\ninline JSValue\njs_number_new<uint32_t>(JSContext* ctx, uint32_t num) {\n  return JS_NewUint32(ctx, num);\n}\n\ntemplate<>\ninline JSValue\njs_number_new<int64_t>(JSContext* ctx, int64_t num) {\n  return JS_NewInt64(ctx, num);\n}\n\nint js_color_read(JSContext* ctx, JSValueConst color, JSColorData<double>* out);\nint js_color_read(JSContext* ctx, JSValueConst value, JSColorData<uint8_t>* out);\n\nstatic inline int\njs_color_read(JSContext* ctx, JSValueConst value, cv::Scalar* out) {\n  JSColorData<double> color;\n  int ret;\n  if((ret = js_color_read(ctx, value, &color))) {\n    (*out)[0] = color.arr[0];\n    (*out)[1] = color.arr[1];\n    (*out)[2] = color.arr[2];\n    (*out)[3] = color.arr[3];\n  }\n  return ret;\n}\n\ntemplate<class T>\ninline JSValue\njs_color_new(JSContext* ctx, const JSColorData<T>& color) {\n  JSValue ret = JS_NewArray(ctx);\n\n  JS_SetPropertyUint32(ctx, ret, 0, js_number_new<T>(ctx, color.arr[0]));\n  JS_SetPropertyUint32(ctx, ret, 1, js_number_new<T>(ctx, color.arr[1]));\n  JS_SetPropertyUint32(ctx, ret, 2, js_number_new<T>(ctx, color.arr[2]));\n  JS_SetPropertyUint32(ctx, ret, 3, js_number_new<T>(ctx, color.arr[3]));\n  return ret;\n}\n\ntemplate<class T>\nstd::ostream&\noperator<<(std::ostream& stream, const JSColorData<T>& color) {\n  stream << \"[ \" << (int)color.arr[0] << \", \" << (int)color.arr[1] << \", \" << (int)color.arr[2] << \", \" << (int)color.arr[3]\n         << \" ]\";\n  return stream;\n}\n\nint js_ref(JSContext* ctx, const char* name, JSValueConst arg, JSValue value);\n\nstatic inline size_t\nround_to(size_t num, size_t x) {\n  num /= x;\n  num *= x;\n  return num;\n}\n\n#if CXX_STANDARD >= 20\nstatic inline std::ranges::subrange<uint8_t*>\njs_arraybuffer_range(JSContext* ctx, JSValueConst buffer) {\n  size_t size;\n  uint8_t* ptr;\n  ptr = JS_GetArrayBuffer(ctx, &size, buffer);\n  return std::ranges::subrange<uint8_t*>(ptr, ptr + size);\n}\n\ntemplate<class T>\nstatic inline std::ranges::subrange<T>\njs_arraybuffer_range(JSContext* ctx, JSValueConst buffer) {\n  typedef typename std::remove_pointer<T>::type value_type;\n  size_t size;\n  uint8_t* byte_ptr;\n  byte_ptr = JS_GetArrayBuffer(ctx, &size, buffer);\n  size = round_to(size, sizeof(value_type));\n  return std::ranges::subrange<T>(reinterpret_cast<T>(byte_ptr), reinterpret_cast<T>(byte_ptr + size));\n}\n#endif\n\ntemplate<class Ptr>\nstatic inline JSValue\njs_arraybuffer_from(JSContext* ctx, const Ptr& begin, const Ptr& end) {\n  const uint8_t* ptr;\n  size_t len;\n  ptr = reinterpret_cast<const uint8_t*>(begin);\n  len = reinterpret_cast<const uint8_t*>(end) - ptr;\n  return JS_NewArrayBufferCopy(ctx, ptr, len);\n}\n\ntemplate<class Ptr>\nstatic inline JSValue\njs_arraybuffer_from(JSContext* ctx,\n                    const Ptr& begin,\n                    const Ptr& end,\n                    JSFreeArrayBufferDataFunc& free_func,\n                    void* opaque = nullptr,\n                    bool is_shared = false) {\n  const uint8_t* ptr;\n  size_t len;\n  ptr = reinterpret_cast<const uint8_t*>(begin);\n  len = reinterpret_cast<const uint8_t*>(end) - ptr;\n  return JS_NewArrayBuffer(ctx, const_cast<uint8_t*>(ptr), len, &free_func, opaque, is_shared);\n}\n\nstatic inline JSValue\njs_global_get(JSContext* ctx, const char* prop) {\n  JSValue global_obj, ret;\n\n  global_obj = JS_GetGlobalObject(ctx);\n  ret = JS_GetPropertyStr(ctx, global_obj, prop);\n  JS_FreeValue(ctx, global_obj);\n  return ret;\n}\n\nstatic inline JSValue\njs_symbol_ctor(JSContext* ctx) {\n  return js_global_get(ctx, \"Symbol\");\n}\n\nstatic inline JSValue\njs_symbol_invoke_static(JSContext* ctx, const char* name, JSValueConst arg) {\n  JSValue ret;\n  JSAtom method_name = JS_NewAtom(ctx, name);\n  ret = JS_Invoke(ctx, js_symbol_ctor(ctx), method_name, 1, &arg);\n  JS_FreeAtom(ctx, method_name);\n  return ret;\n}\n\nstatic inline JSValue\njs_symbol_for(JSContext* ctx, const char* sym_for) {\n  JSValue key, sym;\n  JSAtom atom;\n  key = JS_NewString(ctx, sym_for);\n  sym = js_symbol_invoke_static(ctx, \"for\", key);\n  JS_FreeValue(ctx, key);\n  return sym;\n}\n\nstatic inline JSAtom\njs_symbol_for_atom(JSContext* ctx, const char* sym_for) {\n  JSValue sym = js_symbol_for(ctx, sym_for);\n  JSAtom atom = JS_ValueToAtom(ctx, sym);\n  JS_FreeValue(ctx, sym);\n  return atom;\n}\n\nstatic inline void\njs_set_inspect_method(JSContext* ctx, JSValueConst obj, JSCFunction* func) {\n  JSAtom inspect_symbol = js_symbol_for_atom(ctx, \"quickjs.inspect.custom\");\n  JS_SetProperty(ctx, obj, inspect_symbol, JS_NewCFunction(ctx, func, \"inspect\", 1));\n  JS_FreeAtom(ctx, inspect_symbol);\n}\n\nstatic inline JSValue\njs_symbol_get_static(JSContext* ctx, const char* name) {\n  JSValue symbol_ctor, ret;\n  symbol_ctor = js_symbol_ctor(ctx);\n  ret = JS_GetPropertyStr(ctx, symbol_ctor, name);\n  JS_FreeValue(ctx, symbol_ctor);\n  return ret;\n}\n\nstatic inline JSAtom\njs_symbol_atom(JSContext* ctx, const char* name) {\n  JSValue sym = js_symbol_get_static(ctx, name);\n  JSAtom ret = JS_ValueToAtom(ctx, sym);\n  JS_FreeValue(ctx, sym);\n  return ret;\n}\n\nstatic inline JSValue\njs_iterator_method(JSContext* ctx, JSValueConst obj) {\n  JSAtom atom;\n  JSValue ret = JS_UNDEFINED;\n  atom = js_symbol_atom(ctx, \"iterator\");\n  if(JS_HasProperty(ctx, obj, atom))\n    ret = JS_GetProperty(ctx, obj, atom);\n  JS_FreeAtom(ctx, atom);\n  if(!JS_IsFunction(ctx, ret)) {\n    atom = js_symbol_atom(ctx, \"asyncIterator\");\n    if(JS_HasProperty(ctx, obj, atom))\n      ret = JS_GetProperty(ctx, obj, atom);\n    JS_FreeAtom(ctx, atom);\n  }\n  return ret;\n}\n\nstatic inline BOOL\njs_is_iterable(JSContext* ctx, JSValueConst obj) {\n  JSAtom atom;\n  BOOL ret = FALSE;\n  atom = js_symbol_atom(ctx, \"iterator\");\n  if(JS_HasProperty(ctx, obj, atom))\n    ret = TRUE;\n  JS_FreeAtom(ctx, atom);\n  if(!ret) {\n    atom = js_symbol_atom(ctx, \"asyncIterator\");\n    if(JS_HasProperty(ctx, obj, atom))\n      ret = TRUE;\n    JS_FreeAtom(ctx, atom);\n  }\n  return ret;\n}\n\nstatic inline BOOL\njs_is_array_like(JSContext* ctx, JSValueConst obj) {\n  JSValue len;\n  bool ret;\n  len = JS_GetPropertyStr(ctx, obj, \"length\");\n  ret = JS_IsNumber(len);\n  JS_FreeValue(ctx, len);\n  return ret;\n}\n\nstruct ArrayBufferProps {\n  uint8_t* ptr;\n  size_t len;\n\n  ArrayBufferProps(uint8_t* _ptr, size_t _len) : ptr(_ptr), len(_len) {}\n};\n\nstatic inline BOOL\njs_is_arraybuffer(JSContext* ctx, JSValueConst obj) {\n  JSValue arraybuffer_ctor;\n  BOOL ret = FALSE;\n  arraybuffer_ctor = js_global_get(ctx, \"ArrayBuffer\");\n  if(JS_IsInstanceOf(ctx, obj, arraybuffer_ctor))\n    ret = TRUE;\n  JS_FreeValue(ctx, arraybuffer_ctor);\n  return ret;\n}\n\nstatic inline ArrayBufferProps\njs_arraybuffer_props(JSContext* ctx, JSValueConst obj) {\n  uint8_t* ptr;\n  size_t len;\n  ptr = JS_GetArrayBuffer(ctx, &len, obj);\n  return ArrayBufferProps(ptr, len);\n}\n\nstatic inline std::string\njs_function_name(JSContext* ctx, JSValueConst value) {\n  const char* str;\n  const char* name = 0;\n  std::string ret;\n  int namelen;\n  if((str = JS_ToCString(ctx, value))) {\n    if(!strncmp(str, \"function \", 9)) {\n      name = str + 9;\n      namelen = strchr(str + 9, '(') - name;\n      ret = std::string(name, namelen);\n    }\n  }\n  if(!name) {\n    if(str)\n      JS_FreeCString(ctx, str);\n    if((str = JS_ToCString(ctx, JS_GetPropertyStr(ctx, value, \"name\"))))\n      ret = std::string(str);\n  }\n  if(str)\n    JS_FreeCString(ctx, str);\n  return ret;\n}\n\nstatic inline std::string\njs_class_name(JSContext* ctx, JSValueConst value) {\n  JSValue proto, ctor;\n\n  std::string ret;\n  proto = JS_GetPrototype(ctx, value);\n  ctor = JS_GetPropertyStr(ctx, proto, \"constructor\");\n\n  ret = js_function_name(ctx, ctor);\n  JS_FreeValue(ctx, ctor);\n  JS_FreeValue(ctx, proto);\n\n  return ret;\n}\n\nstatic inline JSValue\njs_typedarray_prototype(JSContext* ctx) {\n  JSValue global_obj, u32_ctor, u32_proto, typedarray_proto;\n  global_obj = JS_GetGlobalObject(ctx);\n  u32_ctor = JS_GetPropertyStr(ctx, global_obj, \"Uint32Array\");\n  u32_proto = JS_GetPropertyStr(ctx, u32_ctor, \"prototype\");\n  typedarray_proto = JS_GetPrototype(ctx, u32_proto);\n  JS_FreeValue(ctx, global_obj);\n  JS_FreeValue(ctx, u32_ctor);\n  JS_FreeValue(ctx, u32_proto);\n  return typedarray_proto;\n}\n\nstatic inline JSValue\njs_typedarray_constructor(JSContext* ctx) {\n\n  JSValue typedarray_proto, typedarray_ctor;\n  typedarray_proto = js_typedarray_prototype(ctx);\n\n  typedarray_ctor = JS_GetPropertyStr(ctx, typedarray_proto, \"constructor\");\n  JS_FreeValue(ctx, typedarray_proto);\n  return typedarray_ctor;\n}\n\nstatic inline bool\njs_is_typedarray(JSContext* ctx, JSValueConst obj) {\n  JSValue typedarray_ctor;\n  BOOL ret;\n  typedarray_ctor = js_typedarray_constructor(ctx);\n  ret = JS_IsInstanceOf(ctx, obj, typedarray_ctor);\n  JS_FreeValue(ctx, typedarray_ctor);\n  return ret;\n\n  /*  std::string class_name = js_class_name(ctx, obj);\n    char* start = &class_name[0];\n    char* end = &class_name[class_name.size()];\n    bool is_signed = true;\n\n    if(start < end && *start == 'U') {\n      start++;\n      is_signed = false;\n      *start = toupper(*start);\n    }\n\n    char* num_start = std::find_if(start, end, &::isdigit);\n    char* num_end = std::find_if_not(num_start, end, &::isdigit);\n    char* next;\n    const auto bits = strtoul(num_start, &next, 10);\n\n    assert(next == num_end);\n    return (!strncmp(start, \"Int\", 3) || !strncmp(start, \"Float\", 5)) && !strncmp(num_end, \"Array\",\n    5) && (bits == 64 || bits == 32 || bits == 16 || bits == 8);*/\n}\n\nstatic inline BOOL\n  (JSContext* ctx, JSValueConst obj) {\n  return JS_IsArray(ctx, obj) || js_is_typedarray(ctx, obj);\n}\n\nstatic inline JSValue\njs_iterator_new(JSContext* ctx, JSValueConst obj) {\n  JSValue fn, ret;\n  fn = js_iterator_method(ctx, obj);\n\n  ret = JS_Call(ctx, fn, obj, 0, 0);\n  JS_FreeValue(ctx, fn);\n  return ret;\n}\n\nstatic inline IteratorValue\njs_iterator_next(JSContext* ctx, JSValueConst obj) {\n  JSValue fn, result, done;\n  IteratorValue ret;\n\n  fn = JS_GetPropertyStr(ctx, obj, \"next\");\n\n  result = JS_Call(ctx, fn, obj, 0, 0);\n  JS_FreeValue(ctx, fn);\n\n  done = JS_GetPropertyStr(ctx, result, \"done\");\n  ret.value = JS_GetPropertyStr(ctx, result, \"value\");\n  JS_FreeValue(ctx, result);\n\n  ret.done = JS_ToBool(ctx, done);\n  JS_FreeValue(ctx, done);\n\n  return ret;\n}\n\ntemplate<class T, typename std::enable_if<std::is_integral<T>::value || std::is_floating_point<T>::value, T>::type* = nullptr>\nstatic inline int\njs_value_to(JSContext* ctx, JSValueConst value, T& out) {\n  return js_number_read(ctx, value, &out);\n}\n\nstatic inline int\njs_value_to(JSContext* ctx, JSValueConst value, bool& out) {\n  out = JS_ToBool(ctx, value);\n  return 1;\n}\n\nstatic inline int\njs_value_to(JSContext* ctx, JSValueConst value, std::string& out) {\n  const char* str;\n  size_t len;\n  str = JS_ToCStringLen(ctx, &len, value);\n  out.clear();\n  out.assign(str, len);\n  JS_FreeCString(ctx, str);\n  return 1;\n}\n\ntemplate<class T, typename std::enable_if<std::is_integral<T>::value || std::is_floating_point<T>::value, T>::type* = nullptr>\nstatic inline JSValue\njs_value_from(JSContext* ctx, const T& in) {\n  return js_number_new<T>(ctx, in);\n}\n\nstatic inline JSValue\njs_value_from(JSContext* ctx, bool in) {\n  return JS_NewBool(ctx, in);\n}\n\nstatic inline JSValue\njs_value_from(JSContext* ctx, const std::string& in) {\n  return JS_NewStringLen(ctx, in.data(), in.size());\n}\n\ntemplate<class T, int N>\nstatic inline JSValue\njs_value_from(JSContext* ctx, const cv::Vec<T, N>& in) {\n  return js_array_from(ctx, begin(in), end(in));\n}\n\ntemplate<class T> class js_iterable {\npublic:\n  static int64_t\n  to_vector(JSContext* ctx, JSValueConst arg, std::vector<T>& out) {\n    IteratorValue item;\n    JSValueConst iter = js_iterator_new(ctx, arg);\n    out.clear();\n    for(;;) {\n      T value;\n      item = js_iterator_next(ctx, iter);\n      if(item.done)\n        break;\n      js_value_to(ctx, item.value, value);\n      out.push_back(value);\n      JS_FreeValue(ctx, item.value);\n    }\n    JS_FreeValue(ctx, iter);\n    return out.size();\n  }\n\n  template<size_t N>\n  static int64_t\n  to_array(JSContext* ctx, JSValueConst arg, std::array<T, N>& out) {\n    int64_t i = 0;\n    IteratorValue item;\n    JSValue iter = js_iterator_new(ctx, arg);\n    for(i = 0; i < N; i++) {\n      T value;\n      item = js_iterator_next(ctx, iter);\n      if(item.done)\n        break;\n      js_value_to(ctx, item.value, value);\n      out[i] = value;\n      JS_FreeValue(ctx, item.value);\n    }\n    JS_FreeValue(ctx, iter);\n    return i;\n  }\n\n  static int64_t\n  to_scalar(JSContext* ctx, JSValueConst arg, cv::Scalar_<T>& out) {\n    return to_array(ctx, arg, *reinterpret_cast<std::array<T, 4>*>(&out));\n  }\n};\n\ntemplate<class T>\nstatic inline int64_t\njs_iterable_to(JSContext* ctx, JSValueConst arr, std::vector<T>& out) {\n  return js_iterable<T>::to_vector(ctx, arr, out);\n}\n\ntemplate<class T, size_t N>\nstatic inline int64_t\njs_iterable_to(JSContext* ctx, JSValueConst arr, std::array<T, N>& out) {\n  typedef js_iterable<T> array_type;\n  return array_type::to_array(ctx, arr, out);\n}\n\ntemplate<class T>\nstatic inline int64_t\njs_iterable_to(JSContext* ctx, JSValueConst arr, cv::Scalar_<T>& out) {\n  return js_iterable<T>::to_scalar(ctx, arr, out);\n}\n\n#endif\n",
			"file": "jsbindings.hpp",
			"file_size": 19807,
			"file_write_time": 132653228212607936,
			"settings":
			{
				"buffer_size": 19798,
				"encoding": "UTF-8",
				"line_ending": "Unix"
			},
			"undo_stack":
			[
				[
					27,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAABUTQAAI2lmbmRlZiBKU0JJTkRJTkdTX0hQUAojZGVmaW5lIEpTQklORElOR1NfSFBQCgojaW5jbHVkZSAianMuaHBwIgojaW5jbHVkZSAidXRpbC5ocHAiCiNpbmNsdWRlIDxxdWlja2pzL2N1dGlscy5oPgoKI2luY2x1ZGUgPG9wZW5jdjIvY29yZS9jb3JlLmhwcD4KI2luY2x1ZGUgPG9wZW5jdjIvaW1ncHJvYy9pbWdwcm9jLmhwcD4KI2luY2x1ZGUgPG9wZW5jdjIvdmlkZW9pby5ocHA+CiNpbmNsdWRlIDxpb21hbmlwPgojaW5jbHVkZSA8bWFwPgojaW5jbHVkZSA8aXRlcmF0b3I+CiNpbmNsdWRlIDxyYW5nZXM+CiNpbmNsdWRlIDxhcnJheT4KI2luY2x1ZGUgPGFsZ29yaXRobT4KI2luY2x1ZGUgPHN0cmluZz4KI2luY2x1ZGUgPGNjdHlwZT4KCnR5cGVkZWYgc3RydWN0IHsKICBCT09MIGRvbmU7CiAgSlNWYWx1ZSB2YWx1ZTsKfSBJdGVyYXRvclZhbHVlOwoKdHlwZWRlZiBjdjo6UmVjdDJkIEpTUmVjdERhdGFEOwp0eXBlZGVmIGN2OjpNYXQgSlNNYXREYXRhOwp0eXBlZGVmIGN2OjpVTWF0IEpTVU1hdERhdGE7CnR5cGVkZWYgY3Y6OlNpemUyZCBKU1NpemVEYXRhRDsKCnRlbXBsYXRlPGNsYXNzIFQ+IHVzaW5nIEpTUG9pbnREYXRhID0gY3Y6OlBvaW50XzxUPjsKdGVtcGxhdGU8Y2xhc3MgVD4gdXNpbmcgSlNTaXplRGF0YSA9IGN2OjpTaXplXzxUPjsKdGVtcGxhdGU8Y2xhc3MgVD4gdXNpbmcgSlNSZWN0RGF0YSA9IGN2OjpSZWN0XzxUPjsKdGVtcGxhdGU8Y2xhc3MgVD4gdXNpbmcgSlNDb250b3VyRGF0YSA9IHN0ZDo6dmVjdG9yPEpTUG9pbnREYXRhPFQ+PjsKdGVtcGxhdGU8Y2xhc3MgVD4gdXNpbmcgSlNDb250b3Vyc0RhdGEgPSBzdGQ6OnZlY3RvcjxKU0NvbnRvdXJEYXRhPFQ+PjsKCi8qdHlwZWRlZiBKU1BvaW50RGF0YTxpbnQ+IEpTUG9pbnREYXRhPGludD47CnR5cGVkZWYgSlNQb2ludERhdGE8ZmxvYXQ+IEpTUG9pbnREYXRhRjsKdHlwZWRlZiBKU1BvaW50RGF0YTxkb3VibGU+IEpTUG9pbnREYXRhRDsqLwoKdHlwZWRlZiBjdjo6VmlkZW9DYXB0dXJlIEpTVmlkZW9DYXB0dXJlRGF0YTsKdHlwZWRlZiBjdjo6VGlja01ldGVyIEpTVGlja01ldGVyRGF0YTsKdHlwZWRlZiBjdjo6UHRyPGN2OjpDTEFIRT4gSlNDTEFIRURhdGE7Cgp0eXBlZGVmIGN2OjpfSW5wdXRBcnJheSBKU0lucHV0QXJyYXk7CnR5cGVkZWYgY3Y6Ol9PdXRwdXRBcnJheSBKU091dHB1dEFycmF5Owp0eXBlZGVmIGN2OjpfSW5wdXRPdXRwdXRBcnJheSBKU0lucHV0T3V0cHV0QXJyYXk7Cgp0ZW1wbGF0ZTxjbGFzcyBUPiB1bmlvbiBKU0xpbmVEYXRhIHsKICBzdGQ6OmFycmF5PFQsIDQ+IGFycmF5OwogIC8vIGN2OjpWZWM8VCwgND4gdmVjOwogIC8vIGN2OjpTY2FsYXJfPFQ+IHNjYWxhcjsKICBzdGQ6OmFycmF5PEpTUG9pbnREYXRhPFQ+LCAyPiBwb2ludHM7CiAgc3RkOjpwYWlyPEpTUG9pbnREYXRhPFQ+LCBKU1BvaW50RGF0YTxUPj4gcHQ7CiAgc3RydWN0IHsKICAgIFQgeDEsIHkxLCB4MiwgeTI7CiAgfTsKfTsKCnRlbXBsYXRlPGNsYXNzIFQ+IHN0cnVjdCBKU0xpbmVUcmFpdHMgewogIHR5cGVkZWYgc3RkOjphcnJheTxULCA0PiBhcnJheV90eXBlOwogIHR5cGVkZWYgY3Y6OlZlYzxULCA0PiB2ZWN0b3JfdHlwZTsKICB0eXBlZGVmIGN2OjpTY2FsYXJfPFQ+IHNjYWxhcl90eXBlOwp9OwoKdGVtcGxhdGU8Y2xhc3MgVD4gdW5pb24gSlNDb2xvckRhdGEgewogIHN0ZDo6YXJyYXk8VCwgND4gYXJyOwogIHN0cnVjdCB7CiAgICBUIHIsIGcsIGIsIGE7CiAgfTsKfTsKCnRlbXBsYXRlPD4gdW5pb24gSlNDb2xvckRhdGE8dWludDhfdD4gewogIHN0ZDo6YXJyYXk8dWludDhfdCwgND4gYXJyOwogIHN0cnVjdCB7CiAgICB1aW50OF90IHIsIGcsIGIsIGE7CiAgfTsKICB1aW50MzJfdCB1MzI7Cn07CgojaWYgZGVmaW5lZChfV0lOMzIpIHx8IGRlZmluZWQoX19NSU5HVzMyX18pCiNkZWZpbmUgVklTSUJMRSBfX2RlY2xzcGVjKGRsbGV4cG9ydCkKI2RlZmluZSBISURERU4KI2Vsc2UKI2RlZmluZSBWSVNJQkxFIF9fYXR0cmlidXRlX18oKHZpc2liaWxpdHkoImRlZmF1bHQiKSkpCiNkZWZpbmUgSElEREVOIF9fYXR0cmlidXRlX18oKHZpc2liaWxpdHkoImhpZGRlbiIpKSkKI2VuZGlmCgojZGVmaW5lIEpTX0NHRVRTRVRfRU5VTUVSQUJMRV9ERUYocHJvcF9uYW1lLCBmZ2V0dGVyLCBmc2V0dGVyLCBtYWdpY19udW0pICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXAogIHsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXAogICAgLm5hbWUgPSBwcm9wX25hbWUsIC5wcm9wX2ZsYWdzID0gSlNfUFJPUF9FTlVNRVJBQkxFIHwgSlNfUFJPUF9DT05GSUdVUkFCTEUsIC5kZWZfdHlwZSA9IEpTX0RFRl9DR0VUU0VUX01BR0lDLCAgICAgICAgICAgICAgXAogICAgLm1hZ2ljID0gbWFnaWNfbnVtLCAudSA9IHsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXAogICAgICAuZ2V0c2V0ID0gey5nZXQgPSB7LmdldHRlcl9tYWdpYyA9IGZnZXR0ZXJ9LCAuc2V0ID0gey5zZXR0ZXJfbWFnaWMgPSBmc2V0dGVyfX0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXAogICAgfSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXAogIH0KCmV4dGVybiAiQyIgewoKaW50IGpzX2RyYXdfZnVuY3Rpb25zKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlIHBhcmVudCk7CmludCBqc19kcmF3X2luaXQoSlNDb250ZXh0KiwgSlNNb2R1bGVEZWYqKTsKClZJU0lCTEUgSlNWYWx1ZSBqc19saW5lX25ldyhKU0NvbnRleHQqIGN0eCwgZG91YmxlIHgxLCBkb3VibGUgeTEsIGRvdWJsZSB4MiwgZG91YmxlIHkyKTsKCkpTTW9kdWxlRGVmKiBqc19pbml0X21vZHVsZShKU0NvbnRleHQqIGN0eCwgY29uc3QgY2hhciogbW9kdWxlX25hbWUpOwpKU01vZHVsZURlZioganNfaW5pdF9tb2R1bGVfcG9pbnQoSlNDb250ZXh0KiwgY29uc3QgY2hhciopOwpKU01vZHVsZURlZioganNfaW5pdF9tb2R1bGVfc2l6ZShKU0NvbnRleHQqLCBjb25zdCBjaGFyKik7CkpTTW9kdWxlRGVmKiBqc19pbml0X21vZHVsZV9yZWN0KEpTQ29udGV4dCosIGNvbnN0IGNoYXIqKTsKSlNNb2R1bGVEZWYqIGpzX2luaXRfbW9kdWxlX21hdChKU0NvbnRleHQqLCBjb25zdCBjaGFyKik7CkpTTW9kdWxlRGVmKiBqc19pbml0X21vZHVsZV9jb250b3VyKEpTQ29udGV4dCosIGNvbnN0IGNoYXIqKTsKSlNNb2R1bGVEZWYqIGpzX2luaXRfbW9kdWxlX2xpbmUoSlNDb250ZXh0KiwgY29uc3QgY2hhciopOwpKU01vZHVsZURlZioganNfaW5pdF9tb2R1bGVfZHJhdyhKU0NvbnRleHQqLCBjb25zdCBjaGFyKik7CkpTTW9kdWxlRGVmKiBqc19pbml0X21vZHVsZV9jdihKU0NvbnRleHQqLCBjb25zdCBjaGFyKik7CkpTTW9kdWxlRGVmKiBqc19pbml0X21vZHVsZV92aWRlb19jYXB0dXJlKEpTQ29udGV4dCosIGNvbnN0IGNoYXIqKTsKCmludCBqc192aWRlb19jYXB0dXJlX2luaXQoSlNDb250ZXh0KiwgSlNNb2R1bGVEZWYqKTsKClZJU0lCTEUgSlNWYWx1ZSBqc192aWRlb19jYXB0dXJlX3dyYXAoSlNDb250ZXh0KiwgY3Y6OlZpZGVvQ2FwdHVyZSogY2FwKTsKCi8vIGV4dGVybiAiQyIgSlNWYWx1ZSBpbnQzMmFycmF5X2N0b3IsIGludDMyYXJyYXlfcHJvdG8sIG1hdF9jbGFzcywgbWF0X3Byb3RvLCBtYXRfaXRlcmF0b3JfcHJvdG8sCi8vIHBvaW50X2NsYXNzLCBsaW5lX2NsYXNzLCAgZHJhd19jbGFzcywgIHBvaW50X3Byb3RvLAovLyByZWN0X2NsYXNzLCByZWN0X3Byb3RvLCBzaXplX2NsYXNzLCBzaXplX3Byb3RvLCBsaW5lX3Byb3RvLCBkcmF3X3Byb3RvOwoKVklTSUJMRSBKU1ZhbHVlIGpzX21hdF93cmFwKEpTQ29udGV4dCosIGNvbnN0IGN2OjpNYXQmIG1hdCk7Cn0KCmV4dGVybiAiQyIgSlNDbGFzc0RlZiBqc19zaXplX2NsYXNzLCBqc19wb2ludF9jbGFzcywganNfbWF0X2NsYXNzLCBqc19yZWN0X2NsYXNzOwpleHRlcm4gIkMiIEpTQ2xhc3NJRCBqc19saW5lX2NsYXNzX2lkLCBqc19kcmF3X2NsYXNzX2lkOwoKZXh0ZXJuICJDIiBjb25zdCBKU0NGdW5jdGlvbkxpc3RFbnRyeSBqc19yZWN0X3Byb3RvX2Z1bmNzW107CgpleHRlcm4gIkMiIEpTQ2xhc3NJRCBqc19wb2ludF9jbGFzc19pZCwganNfc2l6ZV9jbGFzc19pZCwganNfcmVjdF9jbGFzc19pZCwganNfbWF0X2NsYXNzX2lkLCBqc19tYXRfaXRlcmF0b3JfY2xhc3NfaWQ7CgpleHRlcm4gIkMiIHsKc3RhdGljIGlubGluZSBKU1ZhbHVlIGpzX2dsb2JhbF9nZXQoSlNDb250ZXh0KiBjdHgsIGNvbnN0IGNoYXIqIHByb3ApOwpzdGF0aWMgaW5saW5lIEJPT0wganNfaXNfaXRlcmFibGUoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCBvYmopOwpzdGF0aWMgaW5saW5lIEpTVmFsdWUganNfaXRlcmF0b3JfbWV0aG9kKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3Qgb2JqKTsKc3RhdGljIGlubGluZSBKU1ZhbHVlIGpzX2l0ZXJhdG9yX25ldyhKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IG9iaik7CnN0YXRpYyBpbmxpbmUgSXRlcmF0b3JWYWx1ZSBqc19pdGVyYXRvcl9uZXh0KEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3Qgb2JqKTsKc3RhdGljIGlubGluZSBKU0F0b20ganNfc3ltYm9sX2F0b20oSlNDb250ZXh0KiBjdHgsIGNvbnN0IGNoYXIqIG5hbWUpOwpzdGF0aWMgaW5saW5lIEpTVmFsdWUganNfc3ltYm9sX2N0b3IoSlNDb250ZXh0KiBjdHgpOwpzdGF0aWMgaW5saW5lIEpTVmFsdWUganNfc3ltYm9sX2dldF9zdGF0aWMoSlNDb250ZXh0KiBjdHgsIGNvbnN0IGNoYXIqIG5hbWUpOwp9Ci8qCnRlbXBsYXRlPGNsYXNzIFR5cGU+IEpTVmFsdWUganNfY29udG91cl9uZXcoSlNDb250ZXh0KiBjdHgsIGNvbnN0IEpTQ29udG91ckRhdGE8VHlwZT4mIHBvaW50cyk7Cgp0ZW1wbGF0ZTw+IEpTVmFsdWUganNfY29udG91cl9uZXc8ZG91YmxlPihKU0NvbnRleHQqIGN0eCwgY29uc3QgSlNDb250b3VyRGF0YTxkb3VibGU+JiBwb2ludHMpOwoKdGVtcGxhdGU8PiBKU1ZhbHVlIGpzX2NvbnRvdXJfbmV3PGZsb2F0PihKU0NvbnRleHQqIGN0eCwgY29uc3QgSlNDb250b3VyRGF0YTxmbG9hdD4mIHBvaW50cyk7Cgp0ZW1wbGF0ZTw+IEpTVmFsdWUganNfY29udG91cl9uZXc8aW50PihKU0NvbnRleHQqIGN0eCwgY29uc3QgSlNDb250b3VyRGF0YTxpbnQ+JiBwb2ludHMpOwoqLwojZGVmaW5lIGNvdW50b2YoeCkgKHNpemVvZih4KSAvIHNpemVvZigoeClbMF0pKQoKSlNWYWx1ZSBqc192ZWN0b3JfdmVjNGlfdG9fYXJyYXkoSlNDb250ZXh0KiwgY29uc3Qgc3RkOjp2ZWN0b3I8Y3Y6OlZlYzRpPiYgdmVjKTsKCmlubGluZSBKU1ZhbHVlQ29uc3QKanNfY3RvcihKU0NvbnRleHQqIGN0eCwgY29uc3QgY2hhciogbmFtZSkgewogIEpTVmFsdWUgZ2xvYmFsID0gSlNfR2V0R2xvYmFsT2JqZWN0KGN0eCk7CiAgSlNWYWx1ZUNvbnN0IGN0b3IgPSBKU19HZXRQcm9wZXJ0eVN0cihjdHgsIGdsb2JhbCwgbmFtZSk7CiAgcmV0dXJuIGN0b3I7Cn0KCmlubGluZSBKU1ZhbHVlQ29uc3QKanNfcHJvdG8oSlNDb250ZXh0KiBjdHgsIGNvbnN0IGNoYXIqIG5hbWUpIHsKICByZXR1cm4gSlNfR2V0UHJvdG90eXBlKGN0eCwganNfY3RvcihjdHgsIG5hbWUpKTsKfQoKaW5saW5lIEpTVmFsdWUKanNfbmV3KEpTQ29udGV4dCogY3R4LCBjb25zdCBjaGFyKiBuYW1lKSB7CiAgcmV0dXJuIEpTX05ld09iamVjdFByb3RvKGN0eCwganNfcHJvdG8oY3R4LCBuYW1lKSk7Cn0KCnRlbXBsYXRlPGNsYXNzIFQ+CnN0YXRpYyBpbmxpbmUgaW50CmpzX251bWJlcl9yZWFkKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgbnVtLCBUKiBvdXQpIHsKICBkb3VibGUgZDsKICBpbnQgcmV0OwogIGlmKChyZXQgPSAhSlNfVG9GbG9hdDY0KGN0eCwgJmQsIG51bSkpKQogICAgKm91dCA9IGQ7CiAgcmV0dXJuIHJldDsKfQoKdGVtcGxhdGU8PgppbmxpbmUgaW50CmpzX251bWJlcl9yZWFkPGludDMyX3Q+KEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgbnVtLCBpbnQzMl90KiBvdXQpIHsKICByZXR1cm4gIUpTX1RvSW50MzIoY3R4LCBvdXQsIG51bSk7Cn0KCnRlbXBsYXRlPD4KaW5saW5lIGludApqc19udW1iZXJfcmVhZDx1aW50MzJfdD4oSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCBudW0sIHVpbnQzMl90KiBvdXQpIHsKICByZXR1cm4gIUpTX1RvVWludDMyKGN0eCwgb3V0LCBudW0pOwp9Cgp0ZW1wbGF0ZTw+CmlubGluZSBpbnQKanNfbnVtYmVyX3JlYWQ8aW50NjRfdD4oSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCBudW0sIGludDY0X3QqIG91dCkgewogIHJldHVybiAhSlNfVG9JbnQ2NChjdHgsIG91dCwgbnVtKTsKfQoKdGVtcGxhdGU8Y2xhc3MgVD4Kc3RhdGljIGlubGluZSBKU1ZhbHVlCmpzX251bWJlcl9uZXcoSlNDb250ZXh0KiBjdHgsIFQgbnVtKSB7CiAgcmV0dXJuIEpTX05ld0Zsb2F0NjQoY3R4LCBudW0pOwp9Cgp0ZW1wbGF0ZTw+CmlubGluZSBKU1ZhbHVlCmpzX251bWJlcl9uZXc8aW50MzJfdD4oSlNDb250ZXh0KiBjdHgsIGludDMyX3QgbnVtKSB7CiAgcmV0dXJuIEpTX05ld0ludDMyKGN0eCwgbnVtKTsKfQp0ZW1wbGF0ZTw+CmlubGluZSBKU1ZhbHVlCmpzX251bWJlcl9uZXc8dWludDMyX3Q+KEpTQ29udGV4dCogY3R4LCB1aW50MzJfdCBudW0pIHsKICByZXR1cm4gSlNfTmV3VWludDMyKGN0eCwgbnVtKTsKfQoKdGVtcGxhdGU8PgppbmxpbmUgSlNWYWx1ZQpqc19udW1iZXJfbmV3PGludDY0X3Q+KEpTQ29udGV4dCogY3R4LCBpbnQ2NF90IG51bSkgewogIHJldHVybiBKU19OZXdJbnQ2NChjdHgsIG51bSk7Cn0KCmludCBqc19jb2xvcl9yZWFkKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgY29sb3IsIEpTQ29sb3JEYXRhPGRvdWJsZT4qIG91dCk7CmludCBqc19jb2xvcl9yZWFkKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdmFsdWUsIEpTQ29sb3JEYXRhPHVpbnQ4X3Q+KiBvdXQpOwoKc3RhdGljIGlubGluZSBpbnQKanNfY29sb3JfcmVhZChKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHZhbHVlLCBjdjo6U2NhbGFyKiBvdXQpIHsKICBKU0NvbG9yRGF0YTxkb3VibGU+IGNvbG9yOwogIGludCByZXQ7CiAgaWYoKHJldCA9IGpzX2NvbG9yX3JlYWQoY3R4LCB2YWx1ZSwgJmNvbG9yKSkpIHsKICAgICgqb3V0KVswXSA9IGNvbG9yLmFyclswXTsKICAgICgqb3V0KVsxXSA9IGNvbG9yLmFyclsxXTsKICAgICgqb3V0KVsyXSA9IGNvbG9yLmFyclsyXTsKICAgICgqb3V0KVszXSA9IGNvbG9yLmFyclszXTsKICB9CiAgcmV0dXJuIHJldDsKfQoKdGVtcGxhdGU8Y2xhc3MgVD4KaW5saW5lIEpTVmFsdWUKanNfY29sb3JfbmV3KEpTQ29udGV4dCogY3R4LCBjb25zdCBKU0NvbG9yRGF0YTxUPiYgY29sb3IpIHsKICBKU1ZhbHVlIHJldCA9IEpTX05ld0FycmF5KGN0eCk7CgogIEpTX1NldFByb3BlcnR5VWludDMyKGN0eCwgcmV0LCAwLCBqc19udW1iZXJfbmV3PFQ+KGN0eCwgY29sb3IuYXJyWzBdKSk7CiAgSlNfU2V0UHJvcGVydHlVaW50MzIoY3R4LCByZXQsIDEsIGpzX251bWJlcl9uZXc8VD4oY3R4LCBjb2xvci5hcnJbMV0pKTsKICBKU19TZXRQcm9wZXJ0eVVpbnQzMihjdHgsIHJldCwgMiwganNfbnVtYmVyX25ldzxUPihjdHgsIGNvbG9yLmFyclsyXSkpOwogIEpTX1NldFByb3BlcnR5VWludDMyKGN0eCwgcmV0LCAzLCBqc19udW1iZXJfbmV3PFQ+KGN0eCwgY29sb3IuYXJyWzNdKSk7CiAgcmV0dXJuIHJldDsKfQoKdGVtcGxhdGU8Y2xhc3MgVD4Kc3RkOjpvc3RyZWFtJgpvcGVyYXRvcjw8KHN0ZDo6b3N0cmVhbSYgc3RyZWFtLCBjb25zdCBKU0NvbG9yRGF0YTxUPiYgY29sb3IpIHsKICBzdHJlYW0gPDwgIlsgIiA8PCAoaW50KWNvbG9yLmFyclswXSA8PCAiLCAiIDw8IChpbnQpY29sb3IuYXJyWzFdIDw8ICIsICIgPDwgKGludCljb2xvci5hcnJbMl0gPDwgIiwgIiA8PCAoaW50KWNvbG9yLmFyclszXQogICAgICAgICA8PCAiIF0iOwogIHJldHVybiBzdHJlYW07Cn0KCmludCBqc19yZWYoSlNDb250ZXh0KiBjdHgsIGNvbnN0IGNoYXIqIG5hbWUsIEpTVmFsdWVDb25zdCBhcmcsIEpTVmFsdWUgdmFsdWUpOwoKc3RhdGljIGlubGluZSBzaXplX3QKcm91bmRfdG8oc2l6ZV90IG51bSwgc2l6ZV90IHgpIHsKICBudW0gLz0geDsKICBudW0gKj0geDsKICByZXR1cm4gbnVtOwp9CgojaWYgQ1hYX1NUQU5EQVJEID49IDIwCnN0YXRpYyBpbmxpbmUgc3RkOjpyYW5nZXM6OnN1YnJhbmdlPHVpbnQ4X3QqPgpqc19hcnJheWJ1ZmZlcl9yYW5nZShKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IGJ1ZmZlcikgewogIHNpemVfdCBzaXplOwogIHVpbnQ4X3QqIHB0cjsKICBwdHIgPSBKU19HZXRBcnJheUJ1ZmZlcihjdHgsICZzaXplLCBidWZmZXIpOwogIHJldHVybiBzdGQ6OnJhbmdlczo6c3VicmFuZ2U8dWludDhfdCo+KHB0ciwgcHRyICsgc2l6ZSk7Cn0KCnRlbXBsYXRlPGNsYXNzIFQ+CnN0YXRpYyBpbmxpbmUgc3RkOjpyYW5nZXM6OnN1YnJhbmdlPFQ+CmpzX2FycmF5YnVmZmVyX3JhbmdlKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgYnVmZmVyKSB7CiAgdHlwZWRlZiB0eXBlbmFtZSBzdGQ6OnJlbW92ZV9wb2ludGVyPFQ+Ojp0eXBlIHZhbHVlX3R5cGU7CiAgc2l6ZV90IHNpemU7CiAgdWludDhfdCogYnl0ZV9wdHI7CiAgYnl0ZV9wdHIgPSBKU19HZXRBcnJheUJ1ZmZlcihjdHgsICZzaXplLCBidWZmZXIpOwogIHNpemUgPSByb3VuZF90byhzaXplLCBzaXplb2YodmFsdWVfdHlwZSkpOwogIHJldHVybiBzdGQ6OnJhbmdlczo6c3VicmFuZ2U8VD4ocmVpbnRlcnByZXRfY2FzdDxUPihieXRlX3B0ciksIHJlaW50ZXJwcmV0X2Nhc3Q8VD4oYnl0ZV9wdHIgKyBzaXplKSk7Cn0KI2VuZGlmCgp0ZW1wbGF0ZTxjbGFzcyBQdHI+CnN0YXRpYyBpbmxpbmUgSlNWYWx1ZQpqc19hcnJheWJ1ZmZlcl9mcm9tKEpTQ29udGV4dCogY3R4LCBjb25zdCBQdHImIGJlZ2luLCBjb25zdCBQdHImIGVuZCkgewogIGNvbnN0IHVpbnQ4X3QqIHB0cjsKICBzaXplX3QgbGVuOwogIHB0ciA9IHJlaW50ZXJwcmV0X2Nhc3Q8Y29uc3QgdWludDhfdCo+KGJlZ2luKTsKICBsZW4gPSByZWludGVycHJldF9jYXN0PGNvbnN0IHVpbnQ4X3QqPihlbmQpIC0gcHRyOwogIHJldHVybiBKU19OZXdBcnJheUJ1ZmZlckNvcHkoY3R4LCBwdHIsIGxlbik7Cn0KCnRlbXBsYXRlPGNsYXNzIFB0cj4Kc3RhdGljIGlubGluZSBKU1ZhbHVlCmpzX2FycmF5YnVmZmVyX2Zyb20oSlNDb250ZXh0KiBjdHgsCiAgICAgICAgICAgICAgICAgICAgY29uc3QgUHRyJiBiZWdpbiwKICAgICAgICAgICAgICAgICAgICBjb25zdCBQdHImIGVuZCwKICAgICAgICAgICAgICAgICAgICBKU0ZyZWVBcnJheUJ1ZmZlckRhdGFGdW5jJiBmcmVlX2Z1bmMsCiAgICAgICAgICAgICAgICAgICAgdm9pZCogb3BhcXVlID0gbnVsbHB0ciwKICAgICAgICAgICAgICAgICAgICBib29sIGlzX3NoYXJlZCA9IGZhbHNlKSB7CiAgY29uc3QgdWludDhfdCogcHRyOwogIHNpemVfdCBsZW47CiAgcHRyID0gcmVpbnRlcnByZXRfY2FzdDxjb25zdCB1aW50OF90Kj4oYmVnaW4pOwogIGxlbiA9IHJlaW50ZXJwcmV0X2Nhc3Q8Y29uc3QgdWludDhfdCo+KGVuZCkgLSBwdHI7CiAgcmV0dXJuIEpTX05ld0FycmF5QnVmZmVyKGN0eCwgY29uc3RfY2FzdDx1aW50OF90Kj4ocHRyKSwgbGVuLCAmZnJlZV9mdW5jLCBvcGFxdWUsIGlzX3NoYXJlZCk7Cn0KCnN0YXRpYyBpbmxpbmUgSlNWYWx1ZQpqc19nbG9iYWxfZ2V0KEpTQ29udGV4dCogY3R4LCBjb25zdCBjaGFyKiBwcm9wKSB7CiAgSlNWYWx1ZSBnbG9iYWxfb2JqLCByZXQ7CgogIGdsb2JhbF9vYmogPSBKU19HZXRHbG9iYWxPYmplY3QoY3R4KTsKICByZXQgPSBKU19HZXRQcm9wZXJ0eVN0cihjdHgsIGdsb2JhbF9vYmosIHByb3ApOwogIEpTX0ZyZWVWYWx1ZShjdHgsIGdsb2JhbF9vYmopOwogIHJldHVybiByZXQ7Cn0KCnN0YXRpYyBpbmxpbmUgSlNWYWx1ZQpqc19zeW1ib2xfY3RvcihKU0NvbnRleHQqIGN0eCkgewogIHJldHVybiBqc19nbG9iYWxfZ2V0KGN0eCwgIlN5bWJvbCIpOwp9CgpzdGF0aWMgaW5saW5lIEpTVmFsdWUKanNfc3ltYm9sX2ludm9rZV9zdGF0aWMoSlNDb250ZXh0KiBjdHgsIGNvbnN0IGNoYXIqIG5hbWUsIEpTVmFsdWVDb25zdCBhcmcpIHsKICBKU1ZhbHVlIHJldDsKICBKU0F0b20gbWV0aG9kX25hbWUgPSBKU19OZXdBdG9tKGN0eCwgbmFtZSk7CiAgcmV0ID0gSlNfSW52b2tlKGN0eCwganNfc3ltYm9sX2N0b3IoY3R4KSwgbWV0aG9kX25hbWUsIDEsICZhcmcpOwogIEpTX0ZyZWVBdG9tKGN0eCwgbWV0aG9kX25hbWUpOwogIHJldHVybiByZXQ7Cn0KCnN0YXRpYyBpbmxpbmUgSlNWYWx1ZQpqc19zeW1ib2xfZm9yKEpTQ29udGV4dCogY3R4LCBjb25zdCBjaGFyKiBzeW1fZm9yKSB7CiAgSlNWYWx1ZSBrZXksIHN5bTsKICBKU0F0b20gYXRvbTsKICBrZXkgPSBKU19OZXdTdHJpbmcoY3R4LCBzeW1fZm9yKTsKICBzeW0gPSBqc19zeW1ib2xfaW52b2tlX3N0YXRpYyhjdHgsICJmb3IiLCBrZXkpOwogIEpTX0ZyZWVWYWx1ZShjdHgsIGtleSk7CiAgcmV0dXJuIHN5bTsKfQoKc3RhdGljIGlubGluZSBKU0F0b20KanNfc3ltYm9sX2Zvcl9hdG9tKEpTQ29udGV4dCogY3R4LCBjb25zdCBjaGFyKiBzeW1fZm9yKSB7CiAgSlNWYWx1ZSBzeW0gPSBqc19zeW1ib2xfZm9yKGN0eCwgc3ltX2Zvcik7CiAgSlNBdG9tIGF0b20gPSBKU19WYWx1ZVRvQXRvbShjdHgsIHN5bSk7CiAgSlNfRnJlZVZhbHVlKGN0eCwgc3ltKTsKICByZXR1cm4gYXRvbTsKfQoKc3RhdGljIGlubGluZSB2b2lkCmpzX3NldF9pbnNwZWN0X21ldGhvZChKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IG9iaiwgSlNDRnVuY3Rpb24qIGZ1bmMpIHsKICBKU0F0b20gaW5zcGVjdF9zeW1ib2wgPSBqc19zeW1ib2xfZm9yX2F0b20oY3R4LCAicXVpY2tqcy5pbnNwZWN0LmN1c3RvbSIpOwogIEpTX1NldFByb3BlcnR5KGN0eCwgb2JqLCBpbnNwZWN0X3N5bWJvbCwgSlNfTmV3Q0Z1bmN0aW9uKGN0eCwgZnVuYywgImluc3BlY3QiLCAxKSk7CiAgSlNfRnJlZUF0b20oY3R4LCBpbnNwZWN0X3N5bWJvbCk7Cn0KCnN0YXRpYyBpbmxpbmUgSlNWYWx1ZQpqc19zeW1ib2xfZ2V0X3N0YXRpYyhKU0NvbnRleHQqIGN0eCwgY29uc3QgY2hhciogbmFtZSkgewogIEpTVmFsdWUgc3ltYm9sX2N0b3IsIHJldDsKICBzeW1ib2xfY3RvciA9IGpzX3N5bWJvbF9jdG9yKGN0eCk7CiAgcmV0ID0gSlNfR2V0UHJvcGVydHlTdHIoY3R4LCBzeW1ib2xfY3RvciwgbmFtZSk7CiAgSlNfRnJlZVZhbHVlKGN0eCwgc3ltYm9sX2N0b3IpOwogIHJldHVybiByZXQ7Cn0KCnN0YXRpYyBpbmxpbmUgSlNBdG9tCmpzX3N5bWJvbF9hdG9tKEpTQ29udGV4dCogY3R4LCBjb25zdCBjaGFyKiBuYW1lKSB7CiAgSlNWYWx1ZSBzeW0gPSBqc19zeW1ib2xfZ2V0X3N0YXRpYyhjdHgsIG5hbWUpOwogIEpTQXRvbSByZXQgPSBKU19WYWx1ZVRvQXRvbShjdHgsIHN5bSk7CiAgSlNfRnJlZVZhbHVlKGN0eCwgc3ltKTsKICByZXR1cm4gcmV0Owp9CgpzdGF0aWMgaW5saW5lIEpTVmFsdWUKanNfaXRlcmF0b3JfbWV0aG9kKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3Qgb2JqKSB7CiAgSlNBdG9tIGF0b207CiAgSlNWYWx1ZSByZXQgPSBKU19VTkRFRklORUQ7CiAgYXRvbSA9IGpzX3N5bWJvbF9hdG9tKGN0eCwgIml0ZXJhdG9yIik7CiAgaWYoSlNfSGFzUHJvcGVydHkoY3R4LCBvYmosIGF0b20pKQogICAgcmV0ID0gSlNfR2V0UHJvcGVydHkoY3R4LCBvYmosIGF0b20pOwogIEpTX0ZyZWVBdG9tKGN0eCwgYXRvbSk7CiAgaWYoIUpTX0lzRnVuY3Rpb24oY3R4LCByZXQpKSB7CiAgICBhdG9tID0ganNfc3ltYm9sX2F0b20oY3R4LCAiYXN5bmNJdGVyYXRvciIpOwogICAgaWYoSlNfSGFzUHJvcGVydHkoY3R4LCBvYmosIGF0b20pKQogICAgICByZXQgPSBKU19HZXRQcm9wZXJ0eShjdHgsIG9iaiwgYXRvbSk7CiAgICBKU19GcmVlQXRvbShjdHgsIGF0b20pOwogIH0KICByZXR1cm4gcmV0Owp9CgpzdGF0aWMgaW5saW5lIEJPT0wKanNfaXNfaXRlcmFibGUoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCBvYmopIHsKICBKU0F0b20gYXRvbTsKICBCT09MIHJldCA9IEZBTFNFOwogIGF0b20gPSBqc19zeW1ib2xfYXRvbShjdHgsICJpdGVyYXRvciIpOwogIGlmKEpTX0hhc1Byb3BlcnR5KGN0eCwgb2JqLCBhdG9tKSkKICAgIHJldCA9IFRSVUU7CiAgSlNfRnJlZUF0b20oY3R4LCBhdG9tKTsKICBpZighcmV0KSB7CiAgICBhdG9tID0ganNfc3ltYm9sX2F0b20oY3R4LCAiYXN5bmNJdGVyYXRvciIpOwogICAgaWYoSlNfSGFzUHJvcGVydHkoY3R4LCBvYmosIGF0b20pKQogICAgICByZXQgPSBUUlVFOwogICAgSlNfRnJlZUF0b20oY3R4LCBhdG9tKTsKICB9CiAgcmV0dXJuIHJldDsKfQoKc3RhdGljIGlubGluZSBCT09MCmpzX2lzX2FycmF5X2xpa2UoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCBvYmopIHsKICBKU1ZhbHVlIGxlbjsKICBib29sIHJldDsKICBsZW4gPSBKU19HZXRQcm9wZXJ0eVN0cihjdHgsIG9iaiwgImxlbmd0aCIpOwogIHJldCA9IEpTX0lzTnVtYmVyKGxlbik7CiAgSlNfRnJlZVZhbHVlKGN0eCwgbGVuKTsKICByZXR1cm4gcmV0Owp9CgpzdHJ1Y3QgQXJyYXlCdWZmZXJQcm9wcyB7CiAgdWludDhfdCogcHRyOwogIHNpemVfdCBsZW47CgogIEFycmF5QnVmZmVyUHJvcHModWludDhfdCogX3B0ciwgc2l6ZV90IF9sZW4pIDogcHRyKF9wdHIpLCBsZW4oX2xlbikge30KfTsKCnN0YXRpYyBpbmxpbmUgQk9PTApqc19pc19hcnJheWJ1ZmZlcihKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IG9iaikgewogIEpTVmFsdWUgYXJyYXlidWZmZXJfY3RvcjsKICBCT09MIHJldCA9IEZBTFNFOwogIGFycmF5YnVmZmVyX2N0b3IgPSBqc19nbG9iYWxfZ2V0KGN0eCwgIkFycmF5QnVmZmVyIik7CiAgaWYoSlNfSXNJbnN0YW5jZU9mKGN0eCwgb2JqLCBhcnJheWJ1ZmZlcl9jdG9yKSkKICAgIHJldCA9IFRSVUU7CiAgSlNfRnJlZVZhbHVlKGN0eCwgYXJyYXlidWZmZXJfY3Rvcik7CiAgcmV0dXJuIHJldDsKfQoKc3RhdGljIGlubGluZSBBcnJheUJ1ZmZlclByb3BzCmpzX2FycmF5YnVmZmVyX3Byb3BzKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3Qgb2JqKSB7CiAgdWludDhfdCogcHRyOwogIHNpemVfdCBsZW47CiAgcHRyID0gSlNfR2V0QXJyYXlCdWZmZXIoY3R4LCAmbGVuLCBvYmopOwogIHJldHVybiBBcnJheUJ1ZmZlclByb3BzKHB0ciwgbGVuKTsKfQoKc3RhdGljIGlubGluZSBzdGQ6OnN0cmluZwpqc19mdW5jdGlvbl9uYW1lKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdmFsdWUpIHsKICBjb25zdCBjaGFyKiBzdHI7CiAgY29uc3QgY2hhciogbmFtZSA9IDA7CiAgc3RkOjpzdHJpbmcgcmV0OwogIGludCBuYW1lbGVuOwogIGlmKChzdHIgPSBKU19Ub0NTdHJpbmcoY3R4LCB2YWx1ZSkpKSB7CiAgICBpZighc3RybmNtcChzdHIsICJmdW5jdGlvbiAiLCA5KSkgewogICAgICBuYW1lID0gc3RyICsgOTsKICAgICAgbmFtZWxlbiA9IHN0cmNocihzdHIgKyA5LCAnKCcpIC0gbmFtZTsKICAgICAgcmV0ID0gc3RkOjpzdHJpbmcobmFtZSwgbmFtZWxlbik7CiAgICB9CiAgfQogIGlmKCFuYW1lKSB7CiAgICBpZihzdHIpCiAgICAgIEpTX0ZyZWVDU3RyaW5nKGN0eCwgc3RyKTsKICAgIGlmKChzdHIgPSBKU19Ub0NTdHJpbmcoY3R4LCBKU19HZXRQcm9wZXJ0eVN0cihjdHgsIHZhbHVlLCAibmFtZSIpKSkpCiAgICAgIHJldCA9IHN0ZDo6c3RyaW5nKHN0cik7CiAgfQogIGlmKHN0cikKICAgIEpTX0ZyZWVDU3RyaW5nKGN0eCwgc3RyKTsKICByZXR1cm4gcmV0Owp9CgpzdGF0aWMgaW5saW5lIHN0ZDo6c3RyaW5nCmpzX2NsYXNzX25hbWUoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB2YWx1ZSkgewogIEpTVmFsdWUgcHJvdG8sIGN0b3I7CgogIHN0ZDo6c3RyaW5nIHJldDsKICBwcm90byA9IEpTX0dldFByb3RvdHlwZShjdHgsIHZhbHVlKTsKICBjdG9yID0gSlNfR2V0UHJvcGVydHlTdHIoY3R4LCBwcm90bywgImNvbnN0cnVjdG9yIik7CgogIHJldCA9IGpzX2Z1bmN0aW9uX25hbWUoY3R4LCBjdG9yKTsKICBKU19GcmVlVmFsdWUoY3R4LCBjdG9yKTsKICBKU19GcmVlVmFsdWUoY3R4LCBwcm90byk7CgogIHJldHVybiByZXQ7Cn0KCnN0YXRpYyBpbmxpbmUgSlNWYWx1ZQpqc190eXBlZGFycmF5X3Byb3RvdHlwZShKU0NvbnRleHQqIGN0eCkgewogIEpTVmFsdWUgZ2xvYmFsX29iaiwgdTMyX2N0b3IsIHUzMl9wcm90bywgdHlwZWRhcnJheV9wcm90bzsKICBnbG9iYWxfb2JqID0gSlNfR2V0R2xvYmFsT2JqZWN0KGN0eCk7CiAgdTMyX2N0b3IgPSBKU19HZXRQcm9wZXJ0eVN0cihjdHgsIGdsb2JhbF9vYmosICJVaW50MzJBcnJheSIpOwogIHUzMl9wcm90byA9IEpTX0dldFByb3BlcnR5U3RyKGN0eCwgdTMyX2N0b3IsICJwcm90b3R5cGUiKTsKICB0eXBlZGFycmF5X3Byb3RvID0gSlNfR2V0UHJvdG90eXBlKGN0eCwgdTMyX3Byb3RvKTsKICBKU19GcmVlVmFsdWUoY3R4LCBnbG9iYWxfb2JqKTsKICBKU19GcmVlVmFsdWUoY3R4LCB1MzJfY3Rvcik7CiAgSlNfRnJlZVZhbHVlKGN0eCwgdTMyX3Byb3RvKTsKICByZXR1cm4gdHlwZWRhcnJheV9wcm90bzsKfQoKc3RhdGljIGlubGluZSBKU1ZhbHVlCmpzX3R5cGVkYXJyYXlfY29uc3RydWN0b3IoSlNDb250ZXh0KiBjdHgpIHsKCiAgSlNWYWx1ZSB0eXBlZGFycmF5X3Byb3RvLCB0eXBlZGFycmF5X2N0b3I7CiAgdHlwZWRhcnJheV9wcm90byA9IGpzX3R5cGVkYXJyYXlfcHJvdG90eXBlKGN0eCk7CgogIHR5cGVkYXJyYXlfY3RvciA9IEpTX0dldFByb3BlcnR5U3RyKGN0eCwgdHlwZWRhcnJheV9wcm90bywgImNvbnN0cnVjdG9yIik7CiAgSlNfRnJlZVZhbHVlKGN0eCwgdHlwZWRhcnJheV9wcm90byk7CiAgcmV0dXJuIHR5cGVkYXJyYXlfY3RvcjsKfQoKc3RhdGljIGlubGluZSBib29sCmpzX2lzX3R5cGVkYXJyYXkoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCBvYmopIHsKICBKU1ZhbHVlIHR5cGVkYXJyYXlfY3RvcjsKICBCT09MIHJldDsKICB0eXBlZGFycmF5X2N0b3IgPSBqc190eXBlZGFycmF5X2NvbnN0cnVjdG9yKGN0eCk7CiAgcmV0ID0gSlNfSXNJbnN0YW5jZU9mKGN0eCwgb2JqLCB0eXBlZGFycmF5X2N0b3IpOwogIEpTX0ZyZWVWYWx1ZShjdHgsIHR5cGVkYXJyYXlfY3Rvcik7CiAgcmV0dXJuIHJldDsKCiAgLyogIHN0ZDo6c3RyaW5nIGNsYXNzX25hbWUgPSBqc19jbGFzc19uYW1lKGN0eCwgb2JqKTsKICAgIGNoYXIqIHN0YXJ0ID0gJmNsYXNzX25hbWVbMF07CiAgICBjaGFyKiBlbmQgPSAmY2xhc3NfbmFtZVtjbGFzc19uYW1lLnNpemUoKV07CiAgICBib29sIGlzX3NpZ25lZCA9IHRydWU7CgogICAgaWYoc3RhcnQgPCBlbmQgJiYgKnN0YXJ0ID09ICdVJykgewogICAgICBzdGFydCsrOwogICAgICBpc19zaWduZWQgPSBmYWxzZTsKICAgICAgKnN0YXJ0ID0gdG91cHBlcigqc3RhcnQpOwogICAgfQoKICAgIGNoYXIqIG51bV9zdGFydCA9IHN0ZDo6ZmluZF9pZihzdGFydCwgZW5kLCAmOjppc2RpZ2l0KTsKICAgIGNoYXIqIG51bV9lbmQgPSBzdGQ6OmZpbmRfaWZfbm90KG51bV9zdGFydCwgZW5kLCAmOjppc2RpZ2l0KTsKICAgIGNoYXIqIG5leHQ7CiAgICBjb25zdCBhdXRvIGJpdHMgPSBzdHJ0b3VsKG51bV9zdGFydCwgJm5leHQsIDEwKTsKCiAgICBhc3NlcnQobmV4dCA9PSBudW1fZW5kKTsKICAgIHJldHVybiAoIXN0cm5jbXAoc3RhcnQsICJJbnQiLCAzKSB8fCAhc3RybmNtcChzdGFydCwgIkZsb2F0IiwgNSkpICYmICFzdHJuY21wKG51bV9lbmQsICJBcnJheSIsCiAgICA1KSAmJiAoYml0cyA9PSA2NCB8fCBiaXRzID09IDMyIHx8IGJpdHMgPT0gMTYgfHwgYml0cyA9PSA4KTsqLwp9CgpzdGF0aWMgaW5saW5lIEJPT0wKanNfaXNfYXJyYXkoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCBvYmopIHsKICByZXR1cm4gSlNfSXNBcnJheShjdHgsIG9iaikgfHwganNfaXNfdHlwZWRhcnJheShjdHgsIG9iaik7Cn0KCnN0YXRpYyBpbmxpbmUgSlNWYWx1ZQpqc19pdGVyYXRvcl9uZXcoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCBvYmopIHsKICBKU1ZhbHVlIGZuLCByZXQ7CiAgZm4gPSBqc19pdGVyYXRvcl9tZXRob2QoY3R4LCBvYmopOwoKICByZXQgPSBKU19DYWxsKGN0eCwgZm4sIG9iaiwgMCwgMCk7CiAgSlNfRnJlZVZhbHVlKGN0eCwgZm4pOwogIHJldHVybiByZXQ7Cn0KCnN0YXRpYyBpbmxpbmUgSXRlcmF0b3JWYWx1ZQpqc19pdGVyYXRvcl9uZXh0KEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3Qgb2JqKSB7CiAgSlNWYWx1ZSBmbiwgcmVzdWx0LCBkb25lOwogIEl0ZXJhdG9yVmFsdWUgcmV0OwoKICBmbiA9IEpTX0dldFByb3BlcnR5U3RyKGN0eCwgb2JqLCAibmV4dCIpOwoKICByZXN1bHQgPSBKU19DYWxsKGN0eCwgZm4sIG9iaiwgMCwgMCk7CiAgSlNfRnJlZVZhbHVlKGN0eCwgZm4pOwoKICBkb25lID0gSlNfR2V0UHJvcGVydHlTdHIoY3R4LCByZXN1bHQsICJkb25lIik7CiAgcmV0LnZhbHVlID0gSlNfR2V0UHJvcGVydHlTdHIoY3R4LCByZXN1bHQsICJ2YWx1ZSIpOwogIEpTX0ZyZWVWYWx1ZShjdHgsIHJlc3VsdCk7CgogIHJldC5kb25lID0gSlNfVG9Cb29sKGN0eCwgZG9uZSk7CiAgSlNfRnJlZVZhbHVlKGN0eCwgZG9uZSk7CgogIHJldHVybiByZXQ7Cn0KCnRlbXBsYXRlPGNsYXNzIFQsIHR5cGVuYW1lIHN0ZDo6ZW5hYmxlX2lmPHN0ZDo6aXNfaW50ZWdyYWw8VD46OnZhbHVlIHx8IHN0ZDo6aXNfZmxvYXRpbmdfcG9pbnQ8VD46OnZhbHVlLCBUPjo6dHlwZSogPSBudWxscHRyPgpzdGF0aWMgaW5saW5lIGludApqc192YWx1ZV90byhKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHZhbHVlLCBUJiBvdXQpIHsKICByZXR1cm4ganNfbnVtYmVyX3JlYWQoY3R4LCB2YWx1ZSwgJm91dCk7Cn0KCnN0YXRpYyBpbmxpbmUgaW50CmpzX3ZhbHVlX3RvKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdmFsdWUsIGJvb2wmIG91dCkgewogIG91dCA9IEpTX1RvQm9vbChjdHgsIHZhbHVlKTsKICByZXR1cm4gMTsKfQoKc3RhdGljIGlubGluZSBpbnQKanNfdmFsdWVfdG8oSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB2YWx1ZSwgc3RkOjpzdHJpbmcmIG91dCkgewogIGNvbnN0IGNoYXIqIHN0cjsKICBzaXplX3QgbGVuOwogIHN0ciA9IEpTX1RvQ1N0cmluZ0xlbihjdHgsICZsZW4sIHZhbHVlKTsKICBvdXQuY2xlYXIoKTsKICBvdXQuYXNzaWduKHN0ciwgbGVuKTsKICBKU19GcmVlQ1N0cmluZyhjdHgsIHN0cik7CiAgcmV0dXJuIDE7Cn0KCnRlbXBsYXRlPGNsYXNzIFQsIHR5cGVuYW1lIHN0ZDo6ZW5hYmxlX2lmPHN0ZDo6aXNfaW50ZWdyYWw8VD46OnZhbHVlIHx8IHN0ZDo6aXNfZmxvYXRpbmdfcG9pbnQ8VD46OnZhbHVlLCBUPjo6dHlwZSogPSBudWxscHRyPgpzdGF0aWMgaW5saW5lIEpTVmFsdWUKanNfdmFsdWVfZnJvbShKU0NvbnRleHQqIGN0eCwgY29uc3QgVCYgaW4pIHsKICByZXR1cm4ganNfbnVtYmVyX25ldzxUPihjdHgsIGluKTsKfQoKc3RhdGljIGlubGluZSBKU1ZhbHVlCmpzX3ZhbHVlX2Zyb20oSlNDb250ZXh0KiBjdHgsIGJvb2wgaW4pIHsKICByZXR1cm4gSlNfTmV3Qm9vbChjdHgsIGluKTsKfQoKc3RhdGljIGlubGluZSBKU1ZhbHVlCmpzX3ZhbHVlX2Zyb20oSlNDb250ZXh0KiBjdHgsIGNvbnN0IHN0ZDo6c3RyaW5nJiBpbikgewogIHJldHVybiBKU19OZXdTdHJpbmdMZW4oY3R4LCBpbi5kYXRhKCksIGluLnNpemUoKSk7Cn0KCnRlbXBsYXRlPGNsYXNzIFQsIGludCBOPgpzdGF0aWMgaW5saW5lIEpTVmFsdWUKanNfdmFsdWVfZnJvbShKU0NvbnRleHQqIGN0eCwgY29uc3QgY3Y6OlZlYzxULCBOPiYgaW4pIHsKICByZXR1cm4ganNfYXJyYXlfZnJvbShjdHgsIGJlZ2luKGluKSwgZW5kKGluKSk7Cn0KCnRlbXBsYXRlPGNsYXNzIFQ+IGNsYXNzIGpzX2l0ZXJhYmxlIHsKcHVibGljOgogIHN0YXRpYyBpbnQ2NF90CiAgdG9fdmVjdG9yKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgYXJnLCBzdGQ6OnZlY3RvcjxUPiYgb3V0KSB7CiAgICBJdGVyYXRvclZhbHVlIGl0ZW07CiAgICBKU1ZhbHVlQ29uc3QgaXRlciA9IGpzX2l0ZXJhdG9yX25ldyhjdHgsIGFyZyk7CiAgICBvdXQuY2xlYXIoKTsKICAgIGZvcig7OykgewogICAgICBUIHZhbHVlOwogICAgICBpdGVtID0ganNfaXRlcmF0b3JfbmV4dChjdHgsIGl0ZXIpOwogICAgICBpZihpdGVtLmRvbmUpCiAgICAgICAgYnJlYWs7CiAgICAgIGpzX3ZhbHVlX3RvKGN0eCwgaXRlbS52YWx1ZSwgdmFsdWUpOwogICAgICBvdXQucHVzaF9iYWNrKHZhbHVlKTsKICAgICAgSlNfRnJlZVZhbHVlKGN0eCwgaXRlbS52YWx1ZSk7CiAgICB9CiAgICBKU19GcmVlVmFsdWUoY3R4LCBpdGVyKTsKICAgIHJldHVybiBvdXQuc2l6ZSgpOwogIH0KCiAgdGVtcGxhdGU8c2l6ZV90IE4+CiAgc3RhdGljIGludDY0X3QKICB0b19hcnJheShKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IGFyZywgc3RkOjphcnJheTxULCBOPiYgb3V0KSB7CiAgICBpbnQ2NF90IGkgPSAwOwogICAgSXRlcmF0b3JWYWx1ZSBpdGVtOwogICAgSlNWYWx1ZSBpdGVyID0ganNfaXRlcmF0b3JfbmV3KGN0eCwgYXJnKTsKICAgIGZvcihpID0gMDsgaSA8IE47IGkrKykgewogICAgICBUIHZhbHVlOwogICAgICBpdGVtID0ganNfaXRlcmF0b3JfbmV4dChjdHgsIGl0ZXIpOwogICAgICBpZihpdGVtLmRvbmUpCiAgICAgICAgYnJlYWs7CiAgICAgIGpzX3ZhbHVlX3RvKGN0eCwgaXRlbS52YWx1ZSwgdmFsdWUpOwogICAgICBvdXRbaV0gPSB2YWx1ZTsKICAgICAgSlNfRnJlZVZhbHVlKGN0eCwgaXRlbS52YWx1ZSk7CiAgICB9CiAgICBKU19GcmVlVmFsdWUoY3R4LCBpdGVyKTsKICAgIHJldHVybiBpOwogIH0KCiAgc3RhdGljIGludDY0X3QKICB0b19zY2FsYXIoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCBhcmcsIGN2OjpTY2FsYXJfPFQ+JiBvdXQpIHsKICAgIHJldHVybiB0b19hcnJheShjdHgsIGFyZywgKnJlaW50ZXJwcmV0X2Nhc3Q8c3RkOjphcnJheTxULCA0Pio+KCZvdXQpKTsKICB9Cn07Cgp0ZW1wbGF0ZTxjbGFzcyBUPgpzdGF0aWMgaW5saW5lIGludDY0X3QKanNfaXRlcmFibGVfdG8oSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCBhcnIsIHN0ZDo6dmVjdG9yPFQ+JiBvdXQpIHsKICByZXR1cm4ganNfaXRlcmFibGU8VD46OnRvX3ZlY3RvcihjdHgsIGFyciwgb3V0KTsKfQoKdGVtcGxhdGU8Y2xhc3MgVCwgc2l6ZV90IE4+CnN0YXRpYyBpbmxpbmUgaW50NjRfdApqc19pdGVyYWJsZV90byhKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IGFyciwgc3RkOjphcnJheTxULCBOPiYgb3V0KSB7CiAgdHlwZWRlZiBqc19pdGVyYWJsZTxUPiBhcnJheV90eXBlOwogIHJldHVybiBhcnJheV90eXBlOjp0b19hcnJheShjdHgsIGFyciwgb3V0KTsKfQoKdGVtcGxhdGU8Y2xhc3MgVD4Kc3RhdGljIGlubGluZSBpbnQ2NF90CmpzX2l0ZXJhYmxlX3RvKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgYXJyLCBjdjo6U2NhbGFyXzxUPiYgb3V0KSB7CiAgcmV0dXJuIGpzX2l0ZXJhYmxlPFQ+Ojp0b19zY2FsYXIoY3R4LCBhcnIsIG91dCk7Cn0KCiNlbmRpZgoAAAAAAAAAAEJNAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAACi0AAAAAAAAYLQAAAAAAAAAAAAAAAPC/"
				],
				[
					38,
					1,
					"paste",
					null,
					"AQAAAEMAAAAAAAAAYAAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAQwAAAAAAAABDAAAAAAAAAAAAAAAAAPC/"
				],
				[
					41,
					1,
					"left_delete",
					null,
					"AQAAAEwAAAAAAAAATAAAAAAAAAABAAAAIg",
					"AQAAAAAAAAABAAAATQAAAAAAAABNAAAAAAAAAAAAAAAAAPC/"
				],
				[
					42,
					1,
					"insert",
					{
						"characters": "<"
					},
					"AQAAAEwAAAAAAAAATQAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAATAAAAAAAAABMAAAAAAAAAAAAAAAAAPC/"
				],
				[
					44,
					1,
					"left_delete",
					null,
					"AQAAAF4AAAAAAAAAXgAAAAAAAAABAAAAIg",
					"AQAAAAAAAAABAAAAXwAAAAAAAABfAAAAAAAAAP///////+9/"
				],
				[
					45,
					1,
					"insert",
					{
						"characters": ">"
					},
					"AQAAAF4AAAAAAAAAXwAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAXgAAAAAAAABeAAAAAAAAAAAAAAAAAPC/"
				],
				[
					60,
					1,
					"insert",
					{
						"characters": "\t"
					},
					"AgAAAOQ+AAAAAAAA5j4AAAAAAAAAAAAA5j4AAAAAAADmPgAAAAAAAAsAAABqc19pc19hcnJheQ",
					"AQAAAAAAAAABAAAA5D4AAAAAAADvPgAAAAAAAAAAAAAAAPC/"
				]
			]
		},
		{
			"file": "LICENSE",
			"settings":
			{
				"buffer_size": 1067,
				"line_ending": "Unix"
			}
		},
		{
			"file": "js_array.hpp",
			"settings":
			{
				"buffer_size": 17595,
				"line_ending": "Unix"
			},
			"undo_stack":
			[
				[
					51,
					1,
					"insert",
					{
						"characters": "JSPropertyEnum*"
					},
					"EAAAALtBAAAAAAAAvEEAAAAAAAAAAAAAvEEAAAAAAAC8QQAAAAAAAAQAAABhdXRvvEEAAAAAAAC9QQAAAAAAAAAAAAC9QQAAAAAAAL5BAAAAAAAAAAAAAL5BAAAAAAAAv0EAAAAAAAAAAAAAv0EAAAAAAADAQQAAAAAAAAAAAADAQQAAAAAAAMFBAAAAAAAAAAAAAMFBAAAAAAAAwkEAAAAAAAAAAAAAwkEAAAAAAADDQQAAAAAAAAAAAADDQQAAAAAAAMRBAAAAAAAAAAAAAMRBAAAAAAAAxUEAAAAAAAAAAAAAxUEAAAAAAADGQQAAAAAAAAAAAADGQQAAAAAAAMdBAAAAAAAAAAAAAMdBAAAAAAAAyEEAAAAAAAAAAAAAyEEAAAAAAADJQQAAAAAAAAAAAADJQQAAAAAAAMpBAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAu0EAAAAAAAC/QQAAAAAAAAAAAAAAAPC/"
				],
				[
					66,
					1,
					"insert",
					{
						"characters": " "
					},
					"AgAAAKVBAAAAAAAApkEAAAAAAAAAAAAApkEAAAAAAACmQQAAAAAAABIAAAAgICAganNydCBqcyhjdHgpOwo",
					"AQAAAAAAAAABAAAApUEAAAAAAAC3QQAAAAAAAAAAAAAAAPC/"
				],
				[
					69,
					1,
					"insert",
					{
						"characters": ";"
					},
					"AQAAAL9BAAAAAAAAwEEAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAv0EAAAAAAAC/QQAAAAAAAAAAAAAAAPC/"
				],
				[
					70,
					1,
					"insert_completion",
					{
						"completion": "props",
						"format": "text",
						"keep_prefix": false,
						"must_insert": true,
						"trigger": "props"
					},
					"AQAAAMBBAAAAAAAAxUEAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAwEEAAAAAAADAQQAAAAAAAAAAAAAAAPC/"
				],
				[
					71,
					1,
					"insert",
					{
						"characters": "s"
					},
					"AQAAAMVBAAAAAAAAxkEAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAxUEAAAAAAADFQQAAAAAAAAAAAAAAAPC/"
				],
				[
					72,
					6,
					"left_delete",
					null,
					"BgAAAMVBAAAAAAAAxUEAAAAAAAABAAAAc8RBAAAAAAAAxEEAAAAAAAABAAAAc8NBAAAAAAAAw0EAAAAAAAABAAAAcMJBAAAAAAAAwkEAAAAAAAABAAAAb8FBAAAAAAAAwUEAAAAAAAABAAAAcsBBAAAAAAAAwEEAAAAAAAABAAAAcA",
					"AQAAAAAAAAABAAAAxkEAAAAAAADGQQAAAAAAAAAAAAAAAPC/"
				],
				[
					73,
					1,
					"insert",
					{
						"characters": "\nsie"
					},
					"BQAAAMBBAAAAAAAAwUEAAAAAAAAAAAAAwUEAAAAAAADGQQAAAAAAAAAAAADGQQAAAAAAAMdBAAAAAAAAAAAAAMdBAAAAAAAAyEEAAAAAAAAAAAAAyEEAAAAAAADJQQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAwEEAAAAAAADAQQAAAAAAAAAAAAAAAPC/"
				],
				[
					74,
					1,
					"left_delete",
					null,
					"AQAAAMhBAAAAAAAAyEEAAAAAAAABAAAAZQ",
					"AQAAAAAAAAABAAAAyUEAAAAAAADJQQAAAAAAAAAAAAAAAPC/"
				],
				[
					75,
					1,
					"insert",
					{
						"characters": "ze_t"
					},
					"BAAAAMhBAAAAAAAAyUEAAAAAAAAAAAAAyUEAAAAAAADKQQAAAAAAAAAAAADKQQAAAAAAAMtBAAAAAAAAAAAAAMtBAAAAAAAAzEEAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAyEEAAAAAAADIQQAAAAAAAAAAAAAAAPC/"
				],
				[
					76,
					1,
					"insert",
					{
						"characters": " plen;"
					},
					"BgAAAMxBAAAAAAAAzUEAAAAAAAAAAAAAzUEAAAAAAADOQQAAAAAAAAAAAADOQQAAAAAAAM9BAAAAAAAAAAAAAM9BAAAAAAAA0EEAAAAAAAAAAAAA0EEAAAAAAADRQQAAAAAAAAAAAADRQQAAAAAAANJBAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAzEEAAAAAAADMQQAAAAAAAAAAAAAAAPC/"
				],
				[
					77,
					1,
					"insert_completion",
					{
						"completion": "i",
						"format": "text",
						"keep_prefix": false,
						"must_insert": true,
						"trigger": "i"
					},
					"AQAAANJBAAAAAAAA00EAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA0kEAAAAAAADSQQAAAAAAAAAAAAAAAPC/"
				],
				[
					78,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"AgAAANNBAAAAAAAA1EEAAAAAAAAAAAAA1EEAAAAAAADZQQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA00EAAAAAAADTQQAAAAAAAAAAAAAAAPC/"
				],
				[
					79,
					5,
					"left_delete",
					null,
					"BQAAANhBAAAAAAAA2EEAAAAAAAABAAAAINZBAAAAAAAA1kEAAAAAAAACAAAAICDUQQAAAAAAANRBAAAAAAAAAgAAACAg00EAAAAAAADTQQAAAAAAAAEAAAAK0kEAAAAAAADSQQAAAAAAAAEAAABp",
					"AQAAAAAAAAABAAAA2UEAAAAAAADZQQAAAAAAAAAAAAAAAPC/"
				],
				[
					80,
					1,
					"insert",
					{
						"characters": "\n\n\n"
					},
					"CAAAANJBAAAAAAAA00EAAAAAAAAAAAAA00EAAAAAAADYQQAAAAAAAAAAAADYQQAAAAAAANlBAAAAAAAAAAAAANlBAAAAAAAA3kEAAAAAAAAAAAAA00EAAAAAAADTQQAAAAAAAAUAAAAgICAgINlBAAAAAAAA2kEAAAAAAAAAAAAA2kEAAAAAAADfQQAAAAAAAAAAAADUQQAAAAAAANRBAAAAAAAABQAAACAgICAg",
					"AQAAAAAAAAABAAAA0kEAAAAAAADSQQAAAAAAAAAAAAAAAPC/"
				],
				[
					82,
					1,
					"insert",
					{
						"characters": "JS_GetOwnProper"
					},
					"DwAAANRBAAAAAAAA1UEAAAAAAAAAAAAA1UEAAAAAAADWQQAAAAAAAAAAAADWQQAAAAAAANdBAAAAAAAAAAAAANdBAAAAAAAA2EEAAAAAAAAAAAAA2EEAAAAAAADZQQAAAAAAAAAAAADZQQAAAAAAANpBAAAAAAAAAAAAANpBAAAAAAAA20EAAAAAAAAAAAAA20EAAAAAAADcQQAAAAAAAAAAAADcQQAAAAAAAN1BAAAAAAAAAAAAAN1BAAAAAAAA3kEAAAAAAAAAAAAA3kEAAAAAAADfQQAAAAAAAAAAAADfQQAAAAAAAOBBAAAAAAAAAAAAAOBBAAAAAAAA4UEAAAAAAAAAAAAA4UEAAAAAAADiQQAAAAAAAAAAAADiQQAAAAAAAONBAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA1EEAAAAAAADUQQAAAAAAAAAAAAAAAElA"
				],
				[
					83,
					1,
					"insert",
					{
						"characters": "tyNames"
					},
					"BwAAAONBAAAAAAAA5EEAAAAAAAAAAAAA5EEAAAAAAADlQQAAAAAAAAAAAADlQQAAAAAAAOZBAAAAAAAAAAAAAOZBAAAAAAAA50EAAAAAAAAAAAAA50EAAAAAAADoQQAAAAAAAAAAAADoQQAAAAAAAOlBAAAAAAAAAAAAAOlBAAAAAAAA6kEAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA40EAAAAAAADjQQAAAAAAAAAAAAAAAPC/"
				],
				[
					84,
					1,
					"insert_snippet",
					{
						"contents": "($0)"
					},
					"AQAAAOpBAAAAAAAA7EEAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA6kEAAAAAAADqQQAAAAAAAAAAAAAAAPC/"
				],
				[
					85,
					1,
					"insert",
					{
						"characters": "ctx,"
					},
					"BAAAAOtBAAAAAAAA7EEAAAAAAAAAAAAA7EEAAAAAAADtQQAAAAAAAAAAAADtQQAAAAAAAO5BAAAAAAAAAAAAAO5BAAAAAAAA70EAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA60EAAAAAAADrQQAAAAAAAAAAAAAAAPC/"
				],
				[
					86,
					1,
					"insert",
					{
						"characters": " obj,"
					},
					"BQAAAO9BAAAAAAAA8EEAAAAAAAAAAAAA8EEAAAAAAADxQQAAAAAAAAAAAADxQQAAAAAAAPJBAAAAAAAAAAAAAPJBAAAAAAAA80EAAAAAAAAAAAAA80EAAAAAAAD0QQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA70EAAAAAAADvQQAAAAAAAAAAAAAAAPC/"
				],
				[
					87,
					1,
					"insert",
					{
						"characters": " "
					},
					"AQAAAPRBAAAAAAAA9UEAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA9EEAAAAAAAD0QQAAAAAAAAAAAAAAAPC/"
				],
				[
					89,
					1,
					"insert",
					{
						"characters": "&names,"
					},
					"BwAAAPBBAAAAAAAA8UEAAAAAAAAAAAAA8UEAAAAAAADyQQAAAAAAAAAAAADyQQAAAAAAAPNBAAAAAAAAAAAAAPNBAAAAAAAA9EEAAAAAAAAAAAAA9EEAAAAAAAD1QQAAAAAAAAAAAAD1QQAAAAAAAPZBAAAAAAAAAAAAAPZBAAAAAAAA90EAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA8EEAAAAAAADwQQAAAAAAAAAAAAAAAPC/"
				],
				[
					90,
					1,
					"insert",
					{
						"characters": " /p"
					},
					"AwAAAPdBAAAAAAAA+EEAAAAAAAAAAAAA+EEAAAAAAAD5QQAAAAAAAAAAAAD5QQAAAAAAAPpBAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA90EAAAAAAAD3QQAAAAAAAAAAAAAAAPC/"
				],
				[
					91,
					2,
					"left_delete",
					null,
					"AgAAAPlBAAAAAAAA+UEAAAAAAAABAAAAcPhBAAAAAAAA+EEAAAAAAAABAAAALw",
					"AQAAAAAAAAABAAAA+kEAAAAAAAD6QQAAAAAAAAAAAAAAAPC/"
				],
				[
					92,
					1,
					"insert",
					{
						"characters": "&plen,"
					},
					"BgAAAPhBAAAAAAAA+UEAAAAAAAAAAAAA+UEAAAAAAAD6QQAAAAAAAAAAAAD6QQAAAAAAAPtBAAAAAAAAAAAAAPtBAAAAAAAA/EEAAAAAAAAAAAAA/EEAAAAAAAD9QQAAAAAAAAAAAAD9QQAAAAAAAP5BAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA+EEAAAAAAAD4QQAAAAAAAAAAAAAAAPC/"
				],
				[
					93,
					1,
					"insert",
					{
						"characters": " "
					},
					"AQAAAP5BAAAAAAAA/0EAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA/kEAAAAAAAD+QQAAAAAAAAAAAAAAAPC/"
				],
				[
					95,
					1,
					"paste",
					null,
					"AQAAAARCAAAAAAAAFEIAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAABEIAAAAAAAAEQgAAAAAAAAAAAAAAAPC/"
				],
				[
					97,
					1,
					"insert",
					{
						"characters": ";"
					},
					"AQAAABVCAAAAAAAAFkIAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAFUIAAAAAAAAVQgAAAAAAAAAAAAAAAPC/"
				],
				[
					98,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"AQAAABZCAAAAAAAAF0IAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAFkIAAAAAAAAWQgAAAAAAAAAAAAAAAPC/"
				],
				[
					104,
					1,
					"insert",
					{
						"characters": " "
					},
					"AgAAABhCAAAAAAAAGUIAAAAAAAAAAAAAGUIAAAAAAAAZQgAAAAAAACAAAAAgICAgICA9IGpzLnByb3BlcnR5X25hbWVzKG9iaik7Cg",
					"AQAAAAAAAAABAAAAGEIAAAAAAAA4QgAAAAAAAAAAAAAAAPC/"
				],
				[
					165,
					1,
					"paste",
					null,
					"AgAAAC1CAAAAAAAARkIAAAAAAAAAAAAARkIAAAAAAABGQgAAAAAAAAUAAABuYW1lcw",
					"AQAAAAAAAAABAAAALUIAAAAAAAAyQgAAAAAAAAAAAAAAAPC/"
				],
				[
					173,
					1,
					"paste",
					null,
					"AgAAAERCAAAAAAAAUkIAAAAAAAAAAAAAUkIAAAAAAABSQgAAAAAAAAEAAABU",
					"AQAAAAAAAAABAAAAREIAAAAAAABFQgAAAAAAAAAAAAAAAPC/"
				],
				[
					175,
					1,
					"insert_snippet",
					{
						"contents": "($0)"
					},
					"AQAAAFNCAAAAAAAAVUIAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAU0IAAAAAAABTQgAAAAAAAAAAAAAAAPC/"
				],
				[
					176,
					1,
					"insert",
					{
						"characters": "e"
					},
					"AQAAAFRCAAAAAAAAVUIAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAVEIAAAAAAABUQgAAAAAAAAAAAAAAAPC/"
				],
				[
					177,
					1,
					"left_delete",
					null,
					"AQAAAFRCAAAAAAAAVEIAAAAAAAABAAAAZQ",
					"AQAAAAAAAAABAAAAVUIAAAAAAABVQgAAAAAAAAAAAAAAAPC/"
				],
				[
					178,
					1,
					"insert",
					{
						"characters": "names,"
					},
					"BgAAAFRCAAAAAAAAVUIAAAAAAAAAAAAAVUIAAAAAAABWQgAAAAAAAAAAAABWQgAAAAAAAFdCAAAAAAAAAAAAAFdCAAAAAAAAWEIAAAAAAAAAAAAAWEIAAAAAAABZQgAAAAAAAAAAAABZQgAAAAAAAFpCAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAVEIAAAAAAABUQgAAAAAAAAAAAAAAAPC/"
				],
				[
					179,
					1,
					"insert",
					{
						"characters": " names+plen"
					},
					"CwAAAFpCAAAAAAAAW0IAAAAAAAAAAAAAW0IAAAAAAABcQgAAAAAAAAAAAABcQgAAAAAAAF1CAAAAAAAAAAAAAF1CAAAAAAAAXkIAAAAAAAAAAAAAXkIAAAAAAABfQgAAAAAAAAAAAABfQgAAAAAAAGBCAAAAAAAAAAAAAGBCAAAAAAAAYUIAAAAAAAAAAAAAYUIAAAAAAABiQgAAAAAAAAAAAABiQgAAAAAAAGNCAAAAAAAAAAAAAGNCAAAAAAAAZEIAAAAAAAAAAAAAZEIAAAAAAABlQgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAWkIAAAAAAABaQgAAAAAAAAAAAAAAAPC/"
				],
				[
					193,
					1,
					"insert",
					{
						"characters": "JS_GetProperty"
					},
					"DwAAAIJCAAAAAAAAg0IAAAAAAAAAAAAAg0IAAAAAAACDQgAAAAAAAA8AAABqcy5nZXRfcHJvcGVydHmDQgAAAAAAAIRCAAAAAAAAAAAAAIRCAAAAAAAAhUIAAAAAAAAAAAAAhUIAAAAAAACGQgAAAAAAAAAAAACGQgAAAAAAAIdCAAAAAAAAAAAAAIdCAAAAAAAAiEIAAAAAAAAAAAAAiEIAAAAAAACJQgAAAAAAAAAAAACJQgAAAAAAAIpCAAAAAAAAAAAAAIpCAAAAAAAAi0IAAAAAAAAAAAAAi0IAAAAAAACMQgAAAAAAAAAAAACMQgAAAAAAAI1CAAAAAAAAAAAAAI1CAAAAAAAAjkIAAAAAAAAAAAAAjkIAAAAAAACPQgAAAAAAAAAAAACPQgAAAAAAAJBCAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAgkIAAAAAAACRQgAAAAAAAAAAAAAAAPC/"
				],
				[
					196,
					1,
					"insert",
					{
						"characters": "ctx,"
					},
					"BAAAAJFCAAAAAAAAkkIAAAAAAAAAAAAAkkIAAAAAAACTQgAAAAAAAAAAAACTQgAAAAAAAJRCAAAAAAAAAAAAAJRCAAAAAAAAlUIAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAkUIAAAAAAACRQgAAAAAAAAAAAAAAAPC/"
				],
				[
					197,
					1,
					"insert",
					{
						"characters": " "
					},
					"AQAAAJVCAAAAAAAAlkIAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAlUIAAAAAAACVQgAAAAAAAAAAAAAAAPC/"
				],
				[
					209,
					1,
					"insert",
					{
						"characters": ".atom"
					},
					"BQAAAJ9CAAAAAAAAoEIAAAAAAAAAAAAAoEIAAAAAAAChQgAAAAAAAAAAAAChQgAAAAAAAKJCAAAAAAAAAAAAAKJCAAAAAAAAo0IAAAAAAAAAAAAAo0IAAAAAAACkQgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAn0IAAAAAAACfQgAAAAAAAAAAAAAAAPC/"
				],
				[
					231,
					1,
					"left_delete",
					null,
					"AQAAAHhCAAAAAAAAeEIAAAAAAAAKAAAAIGpzLnRvPFQ+KA",
					"AQAAAAAAAAABAAAAeEIAAAAAAACCQgAAAAAAAAAAAAAAAPC/"
				],
				[
					236,
					1,
					"left_delete",
					null,
					"AQAAAJtCAAAAAAAAm0IAAAAAAAABAAAAKQ",
					"AQAAAAAAAAABAAAAnEIAAAAAAACcQgAAAAAAAAAAAAAAAPC/"
				],
				[
					238,
					1,
					"left_delete",
					null,
					"AQAAAG5CAAAAAAAAbkIAAAAAAAACAAAAICA",
					"AQAAAAAAAAABAAAAcEIAAAAAAABwQgAAAAAAAAAAAAAAAE5A"
				],
				[
					241,
					1,
					"insert",
					{
						"characters": "JSValue"
					},
					"CAAAAGxCAAAAAAAAbUIAAAAAAAAAAAAAbUIAAAAAAABtQgAAAAAAAAgAAAAgIFQgcHJvcG1CAAAAAAAAbkIAAAAAAAAAAAAAbkIAAAAAAABvQgAAAAAAAAAAAABvQgAAAAAAAHBCAAAAAAAAAAAAAHBCAAAAAAAAcUIAAAAAAAAAAAAAcUIAAAAAAAByQgAAAAAAAAAAAAByQgAAAAAAAHNCAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAdEIAAAAAAABsQgAAAAAAAAAAAAAAAPC/"
				],
				[
					242,
					1,
					"insert",
					{
						"characters": " prop"
					},
					"BQAAAHNCAAAAAAAAdEIAAAAAAAAAAAAAdEIAAAAAAAB1QgAAAAAAAAAAAAB1QgAAAAAAAHZCAAAAAAAAAAAAAHZCAAAAAAAAd0IAAAAAAAAAAAAAd0IAAAAAAAB4QgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAc0IAAAAAAABzQgAAAAAAAAAAAAAAAPC/"
				],
				[
					248,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"AgAAAJ5CAAAAAAAAn0IAAAAAAAAAAAAAn0IAAAAAAAChQgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAnkIAAAAAAACeQgAAAAAAAP///////+9/"
				],
				[
					272,
					1,
					"insert",
					{
						"characters": "js_value_to"
					},
					"CwAAAKFCAAAAAAAAokIAAAAAAAAAAAAAokIAAAAAAACjQgAAAAAAAAAAAACjQgAAAAAAAKRCAAAAAAAAAAAAAKRCAAAAAAAApUIAAAAAAAAAAAAApUIAAAAAAACmQgAAAAAAAAAAAACmQgAAAAAAAKdCAAAAAAAAAAAAAKdCAAAAAAAAqEIAAAAAAAAAAAAAqEIAAAAAAACpQgAAAAAAAAAAAACpQgAAAAAAAKpCAAAAAAAAAAAAAKpCAAAAAAAAq0IAAAAAAAAAAAAAq0IAAAAAAACsQgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAoUIAAAAAAAChQgAAAAAAAAAAAAAAAPC/"
				],
				[
					273,
					1,
					"insert_snippet",
					{
						"contents": "($0)"
					},
					"AQAAAKxCAAAAAAAArkIAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAArEIAAAAAAACsQgAAAAAAAAAAAAAAAPC/"
				],
				[
					274,
					1,
					"insert",
					{
						"characters": "ctx,"
					},
					"BAAAAK1CAAAAAAAArkIAAAAAAAAAAAAArkIAAAAAAACvQgAAAAAAAAAAAACvQgAAAAAAALBCAAAAAAAAAAAAALBCAAAAAAAAsUIAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAArUIAAAAAAACtQgAAAAAAAAAAAAAAAPC/"
				],
				[
					275,
					1,
					"insert",
					{
						"characters": " "
					},
					"AQAAALFCAAAAAAAAskIAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAsUIAAAAAAACxQgAAAAAAAAAAAAAAAPC/"
				],
				[
					276,
					1,
					"insert",
					{
						"characters": "prop,"
					},
					"BQAAALJCAAAAAAAAs0IAAAAAAAAAAAAAs0IAAAAAAAC0QgAAAAAAAAAAAAC0QgAAAAAAALVCAAAAAAAAAAAAALVCAAAAAAAAtkIAAAAAAAAAAAAAtkIAAAAAAAC3QgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAskIAAAAAAACyQgAAAAAAAAAAAAAAAPC/"
				],
				[
					277,
					1,
					"insert",
					{
						"characters": " out"
					},
					"BAAAALdCAAAAAAAAuEIAAAAAAAAAAAAAuEIAAAAAAAC5QgAAAAAAAAAAAAC5QgAAAAAAALpCAAAAAAAAAAAAALpCAAAAAAAAu0IAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAt0IAAAAAAAC3QgAAAAAAAAAAAAAAAPC/"
				],
				[
					278,
					1,
					"insert_snippet",
					{
						"contents": "[$0]"
					},
					"AQAAALtCAAAAAAAAvUIAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAu0IAAAAAAAC7QgAAAAAAAAAAAAAAAPC/"
				],
				[
					279,
					1,
					"insert",
					{
						"characters": "name"
					},
					"BAAAALxCAAAAAAAAvUIAAAAAAAAAAAAAvUIAAAAAAAC+QgAAAAAAAAAAAAC+QgAAAAAAAL9CAAAAAAAAAAAAAL9CAAAAAAAAwEIAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAvEIAAAAAAAC8QgAAAAAAAAAAAAAAAPC/"
				],
				[
					281,
					1,
					"insert",
					{
						"characters": ";"
					},
					"AQAAAMJCAAAAAAAAw0IAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAwkIAAAAAAADCQgAAAAAAAAAAAAAAAPC/"
				],
				[
					282,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"AgAAAMNCAAAAAAAAxEIAAAAAAAAAAAAAxEIAAAAAAADGQgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAw0IAAAAAAADDQgAAAAAAAAAAAAAAAPC/"
				],
				[
					290,
					1,
					"insert",
					{
						"characters": "value"
					},
					"BwAAAHRCAAAAAAAAdUIAAAAAAAAAAAAAdUIAAAAAAAB1QgAAAAAAAAQAAABwcm9wwUIAAAAAAADBQgAAAAAAAAIAAAAgIHVCAAAAAAAAdkIAAAAAAAAAAAAAdkIAAAAAAAB3QgAAAAAAAAAAAAB3QgAAAAAAAHhCAAAAAAAAAAAAAHhCAAAAAAAAeUIAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAdEIAAAAAAAB4QgAAAAAAAAAAAAAAAPC/"
				],
				[
					297,
					1,
					"insert",
					{
						"characters": "\nT"
					},
					"AwAAAJ9CAAAAAAAAoEIAAAAAAAAAAAAAoEIAAAAAAACiQgAAAAAAAAAAAACiQgAAAAAAAKNCAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAn0IAAAAAAACfQgAAAAAAAAAAAAAAAPC/"
				],
				[
					298,
					1,
					"insert",
					{
						"characters": " prop"
					},
					"BQAAAKNCAAAAAAAApEIAAAAAAAAAAAAApEIAAAAAAAClQgAAAAAAAAAAAAClQgAAAAAAAKZCAAAAAAAAAAAAAKZCAAAAAAAAp0IAAAAAAAAAAAAAp0IAAAAAAACoQgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAo0IAAAAAAACjQgAAAAAAAAAAAAAAAPC/"
				],
				[
					299,
					1,
					"insert",
					{
						"characters": " ;"
					},
					"AgAAAKhCAAAAAAAAqUIAAAAAAAAAAAAAqUIAAAAAAACqQgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAqEIAAAAAAACoQgAAAAAAAAAAAAAAAPC/"
				],
				[
					300,
					2,
					"left_delete",
					null,
					"AgAAAKlCAAAAAAAAqUIAAAAAAAABAAAAO6hCAAAAAAAAqEIAAAAAAAABAAAAIA",
					"AQAAAAAAAAABAAAAqkIAAAAAAACqQgAAAAAAAAAAAAAAAPC/"
				],
				[
					301,
					1,
					"insert",
					{
						"characters": ";"
					},
					"AQAAAKhCAAAAAAAAqUIAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAqEIAAAAAAACoQgAAAAAAAAAAAAAAAPC/"
				],
				[
					305,
					8,
					"left_delete",
					null,
					"CAAAAMNCAAAAAAAAw0IAAAAAAAAJAAAAb3V0W25hbWVdwkIAAAAAAADCQgAAAAAAAAEAAAAgwUIAAAAAAADBQgAAAAAAAAEAAAAswEIAAAAAAADAQgAAAAAAAAEAAABwv0IAAAAAAAC/QgAAAAAAAAEAAABvvkIAAAAAAAC+QgAAAAAAAAEAAAByvUIAAAAAAAC9QgAAAAAAAAEAAABwvEIAAAAAAAC8QgAAAAAAAAEAAAAg",
					"AQAAAAAAAAABAAAAw0IAAAAAAADMQgAAAAAAAAAAAAAAAPC/"
				],
				[
					306,
					1,
					"insert",
					{
						"characters": "value,prop"
					},
					"CgAAALxCAAAAAAAAvUIAAAAAAAAAAAAAvUIAAAAAAAC+QgAAAAAAAAAAAAC+QgAAAAAAAL9CAAAAAAAAAAAAAL9CAAAAAAAAwEIAAAAAAAAAAAAAwEIAAAAAAADBQgAAAAAAAAAAAADBQgAAAAAAAMJCAAAAAAAAAAAAAMJCAAAAAAAAw0IAAAAAAAAAAAAAw0IAAAAAAADEQgAAAAAAAAAAAADEQgAAAAAAAMVCAAAAAAAAAAAAAMVCAAAAAAAAxkIAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAvEIAAAAAAAC8QgAAAAAAAAAAAAAAAPC/"
				],
				[
					313,
					1,
					"left_delete",
					null,
					"AQAAAMhCAAAAAAAAyEIAAAAAAAABAAAACg",
					"AQAAAAAAAAABAAAAyUIAAAAAAADJQgAAAAAAAAAAAAAAAPC/"
				],
				[
					353,
					1,
					"insert",
					{
						"characters": "JS_DefineProperty"
					},
					"EgAAAPRDAAAAAAAA9UMAAAAAAAAAAAAA9UMAAAAAAAD1QwAAAAAAAA8AAABqcy5zZXRfcHJvcGVydHn1QwAAAAAAAPZDAAAAAAAAAAAAAPZDAAAAAAAA90MAAAAAAAAAAAAA90MAAAAAAAD4QwAAAAAAAAAAAAD4QwAAAAAAAPlDAAAAAAAAAAAAAPlDAAAAAAAA+kMAAAAAAAAAAAAA+kMAAAAAAAD7QwAAAAAAAAAAAAD7QwAAAAAAAPxDAAAAAAAAAAAAAPxDAAAAAAAA/UMAAAAAAAAAAAAA/UMAAAAAAAD+QwAAAAAAAAAAAAD+QwAAAAAAAP9DAAAAAAAAAAAAAP9DAAAAAAAAAEQAAAAAAAAAAAAAAEQAAAAAAAABRAAAAAAAAAAAAAABRAAAAAAAAAJEAAAAAAAAAAAAAAJEAAAAAAAAA0QAAAAAAAAAAAAAA0QAAAAAAAAERAAAAAAAAAAAAAAERAAAAAAAAAVEAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA9EMAAAAAAAADRAAAAAAAAAAAAAAAAPC/"
				],
				[
					355,
					1,
					"insert",
					{
						"characters": "cf"
					},
					"AgAAAAZEAAAAAAAAB0QAAAAAAAAAAAAAB0QAAAAAAAAIRAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAABkQAAAAAAAAGRAAAAAAAAAAAAAAAAPC/"
				],
				[
					356,
					1,
					"left_delete",
					null,
					"AQAAAAdEAAAAAAAAB0QAAAAAAAABAAAAZg",
					"AQAAAAAAAAABAAAACEQAAAAAAAAIRAAAAAAAAAAAAAAAAPC/"
				],
				[
					357,
					1,
					"insert",
					{
						"characters": "tx,"
					},
					"AwAAAAdEAAAAAAAACEQAAAAAAAAAAAAACEQAAAAAAAAJRAAAAAAAAAAAAAAJRAAAAAAAAApEAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAB0QAAAAAAAAHRAAAAAAAAAAAAAAAAPC/"
				],
				[
					358,
					1,
					"insert",
					{
						"characters": " "
					},
					"AQAAAApEAAAAAAAAC0QAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAACkQAAAAAAAAKRAAAAAAAAAAAAAAAAPC/"
				],
				[
					380,
					1,
					"insert",
					{
						"characters": "Str"
					},
					"AwAAAAVEAAAAAAAABkQAAAAAAAAAAAAABkQAAAAAAAAHRAAAAAAAAAAAAAAHRAAAAAAAAAhEAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAABUQAAAAAAAAFRAAAAAAAAAAAAAAAAPC/"
				],
				[
					383,
					1,
					"insert",
					{
						"characters": ".c_str()"
					},
					"CAAAAB5EAAAAAAAAH0QAAAAAAAAAAAAAH0QAAAAAAAAgRAAAAAAAAAAAAAAgRAAAAAAAACFEAAAAAAAAAAAAACFEAAAAAAAAIkQAAAAAAAAAAAAAIkQAAAAAAAAjRAAAAAAAAAAAAAAjRAAAAAAAACREAAAAAAAAAAAAACREAAAAAAAAJUQAAAAAAAAAAAAAJUQAAAAAAAAmRAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAHkQAAAAAAAAeRAAAAAAAAAAAAAAAAPC/"
				],
				[
					402,
					1,
					"insert",
					{
						"characters": "\nT"
					},
					"AwAAANNDAAAAAAAA1EMAAAAAAAAAAAAA1EMAAAAAAADYQwAAAAAAAAAAAADYQwAAAAAAANlDAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA00MAAAAAAADTQwAAAAAAAAAAAAAAAPC/"
				],
				[
					403,
					1,
					"insert",
					{
						"characters": " v"
					},
					"AgAAANlDAAAAAAAA2kMAAAAAAAAAAAAA2kMAAAAAAADbQwAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA2UMAAAAAAADZQwAAAAAAAAAAAAAAAPC/"
				],
				[
					404,
					1,
					"left_delete",
					null,
					"AQAAANpDAAAAAAAA2kMAAAAAAAABAAAAdg",
					"AQAAAAAAAAABAAAA20MAAAAAAADbQwAAAAAAAAAAAAAAAPC/"
				],
				[
					405,
					1,
					"insert",
					{
						"characters": "prop;"
					},
					"BQAAANpDAAAAAAAA20MAAAAAAAAAAAAA20MAAAAAAADcQwAAAAAAAAAAAADcQwAAAAAAAN1DAAAAAAAAAAAAAN1DAAAAAAAA3kMAAAAAAAAAAAAA3kMAAAAAAADfQwAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA2kMAAAAAAADaQwAAAAAAAAAAAAAAAPC/"
				],
				[
					409,
					1,
					"insert",
					{
						"characters": "\n\nj"
					},
					"BgAAAN9DAAAAAAAA4EMAAAAAAAAAAAAA4EMAAAAAAADkQwAAAAAAAAAAAADkQwAAAAAAAOVDAAAAAAAAAAAAAOVDAAAAAAAA6UMAAAAAAAAAAAAA4EMAAAAAAADgQwAAAAAAAAQAAAAgICAg5UMAAAAAAADmQwAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA30MAAAAAAADfQwAAAAAAAAAAAAAAgHZA"
				],
				[
					410,
					2,
					"left_delete",
					null,
					"AgAAAOVDAAAAAAAA5UMAAAAAAAABAAAAauNDAAAAAAAA40MAAAAAAAACAAAAICA",
					"AQAAAAAAAAABAAAA5kMAAAAAAADmQwAAAAAAAAAAAAAAAPC/"
				],
				[
					413,
					1,
					"insert",
					{
						"characters": " "
					},
					"AgAAAAREAAAAAAAABUQAAAAAAAAAAAAA4UMAAAAAAADhQwAAAAAAAAIAAAAgIA",
					"AQAAAAAAAAABAAAABEQAAAAAAAAERAAAAAAAAAAAAAAAAPC/"
				],
				[
					414,
					1,
					"left_delete",
					null,
					"AQAAAAJEAAAAAAAAAkQAAAAAAAABAAAAIA",
					"AQAAAAAAAAABAAAAA0QAAAAAAAADRAAAAAAAAAAAAAAAAPC/"
				],
				[
					415,
					1,
					"insert",
					{
						"characters": "{"
					},
					"AQAAAAJEAAAAAAAAA0QAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAAkQAAAAAAAACRAAAAAAAAAAAAAAAAPC/"
				],
				[
					416,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"BAAAAANEAAAAAAAABEQAAAAAAAAAAAAABEQAAAAAAAAIRAAAAAAAAAAAAAAERAAAAAAAAAREAAAAAAAABAAAACAgICAERAAAAAAAAApEAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAA0QAAAAAAAADRAAAAAAAAAAAAAAAAPC/"
				],
				[
					418,
					1,
					"insert",
					{
						"characters": "\n}"
					},
					"BQAAAGlEAAAAAAAAakQAAAAAAAAAAAAAakQAAAAAAABwRAAAAAAAAAAAAABwRAAAAAAAAHFEAAAAAAAAAAAAAGpEAAAAAAAAakQAAAAAAAAGAAAAICAgICAgakQAAAAAAABuRAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAaUQAAAAAAABpRAAAAAAAAP///////+9/"
				],
				[
					424,
					1,
					"cut",
					null,
					"AQAAANRDAAAAAAAA1EMAAAAAAAAMAAAAICAgIFQgcHJvcDsK",
					"AQAAAAAAAAABAAAA4EMAAAAAAADUQwAAAAAAAAAAAAAAAPC/"
				],
				[
					427,
					1,
					"paste",
					null,
					"AQAAAPtDAAAAAAAAB0QAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA+0MAAAAAAAD7QwAAAAAAAAAAAAAAAPC/"
				],
				[
					432,
					1,
					"insert",
					{
						"characters": "\njs_value_to"
					},
					"DQAAAAZEAAAAAAAAB0QAAAAAAAAAAAAAB0QAAAAAAAAORAAAAAAAAAAAAAAORAAAAAAAAA9EAAAAAAAAAAAAAA9EAAAAAAAAEEQAAAAAAAAAAAAAEEQAAAAAAAARRAAAAAAAAAAAAAARRAAAAAAAABJEAAAAAAAAAAAAABJEAAAAAAAAE0QAAAAAAAAAAAAAE0QAAAAAAAAURAAAAAAAAAAAAAAURAAAAAAAABVEAAAAAAAAAAAAABVEAAAAAAAAFkQAAAAAAAAAAAAAFkQAAAAAAAAXRAAAAAAAAAAAAAAXRAAAAAAAABhEAAAAAAAAAAAAABhEAAAAAAAAGUQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAABkQAAAAAAAAGRAAAAAAAAAAAAAAAAPC/"
				],
				[
					433,
					1,
					"insert_snippet",
					{
						"contents": "($0)"
					},
					"AQAAABlEAAAAAAAAG0QAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAGUQAAAAAAAAZRAAAAAAAAAAAAAAAAPC/"
				],
				[
					434,
					1,
					"insert",
					{
						"characters": "ctx,"
					},
					"BAAAABpEAAAAAAAAG0QAAAAAAAAAAAAAG0QAAAAAAAAcRAAAAAAAAAAAAAAcRAAAAAAAAB1EAAAAAAAAAAAAAB1EAAAAAAAAHkQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAGkQAAAAAAAAaRAAAAAAAAAAAAAAAAPC/"
				],
				[
					435,
					1,
					"insert",
					{
						"characters": "  entry.secont"
					},
					"DgAAAB5EAAAAAAAAH0QAAAAAAAAAAAAAH0QAAAAAAAAgRAAAAAAAAAAAAAAgRAAAAAAAACFEAAAAAAAAAAAAACFEAAAAAAAAIkQAAAAAAAAAAAAAIkQAAAAAAAAjRAAAAAAAAAAAAAAjRAAAAAAAACREAAAAAAAAAAAAACREAAAAAAAAJUQAAAAAAAAAAAAAJUQAAAAAAAAmRAAAAAAAAAAAAAAmRAAAAAAAACdEAAAAAAAAAAAAACdEAAAAAAAAKEQAAAAAAAAAAAAAKEQAAAAAAAApRAAAAAAAAAAAAAApRAAAAAAAACpEAAAAAAAAAAAAACpEAAAAAAAAK0QAAAAAAAAAAAAAK0QAAAAAAAAsRAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAHkQAAAAAAAAeRAAAAAAAAAAAAAAAAPC/"
				],
				[
					436,
					1,
					"left_delete",
					null,
					"AQAAACtEAAAAAAAAK0QAAAAAAAABAAAAdA",
					"AQAAAAAAAAABAAAALEQAAAAAAAAsRAAAAAAAAAAAAAAAAPC/"
				],
				[
					437,
					1,
					"insert",
					{
						"characters": "d,"
					},
					"AgAAACtEAAAAAAAALEQAAAAAAAAAAAAALEQAAAAAAAAtRAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAK0QAAAAAAAArRAAAAAAAAAAAAAAAAPC/"
				],
				[
					438,
					1,
					"insert",
					{
						"characters": " prop"
					},
					"BQAAAC1EAAAAAAAALkQAAAAAAAAAAAAALkQAAAAAAAAvRAAAAAAAAAAAAAAvRAAAAAAAADBEAAAAAAAAAAAAADBEAAAAAAAAMUQAAAAAAAAAAAAAMUQAAAAAAAAyRAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAALUQAAAAAAAAtRAAAAAAAAAAAAAAAAPC/"
				],
				[
					440,
					1,
					"insert",
					{
						"characters": ";"
					},
					"AQAAADNEAAAAAAAANEQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAM0QAAAAAAAAzRAAAAAAAAAAAAAAAAPC/"
				],
				[
					443,
					1,
					"insert",
					{
						"characters": "rop"
					},
					"BAAAAGxEAAAAAAAAbUQAAAAAAAAAAAAAbUQAAAAAAABtRAAAAAAAABoAAABqcy5jcmVhdGU8VD4oZW50cnkuc2Vjb25kKW1EAAAAAAAAbkQAAAAAAAAAAAAAbkQAAAAAAABvRAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAbEQAAAAAAACGRAAAAAAAAAAAAAAAAPC/"
				],
				[
					444,
					3,
					"left_delete",
					null,
					"AwAAAG5EAAAAAAAAbkQAAAAAAAABAAAAcG1EAAAAAAAAbUQAAAAAAAABAAAAb2xEAAAAAAAAbEQAAAAAAAABAAAAcg",
					"AQAAAAAAAAABAAAAb0QAAAAAAABvRAAAAAAAAAAAAAAAAPC/"
				],
				[
					445,
					1,
					"insert",
					{
						"characters": "prop"
					},
					"BAAAAGxEAAAAAAAAbUQAAAAAAAAAAAAAbUQAAAAAAABuRAAAAAAAAAAAAABuRAAAAAAAAG9EAAAAAAAAAAAAAG9EAAAAAAAAcEQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAbEQAAAAAAABsRAAAAAAAAAAAAAAAAPC/"
				],
				[
					449,
					1,
					"left_delete",
					null,
					"AQAAANVDAAAAAAAA1UMAAAAAAAABAAAACg",
					"AQAAAAAAAAABAAAA1kMAAAAAAADWQwAAAAAAAAAAAAAAAAAA"
				],
				[
					452,
					1,
					"left_delete",
					null,
					"AQAAAJ1DAAAAAAAAnUMAAAAAAAASAAAAICAgIGpzcnQganMoY3R4KTsK",
					"AQAAAAAAAAABAAAAnUMAAAAAAACvQwAAAAAAAAAAAAAAAAAA"
				],
				[
					453,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAACwRAAAI2lmbmRlZiBKU19BUlJBWV9IUFAKI2RlZmluZSBKU19BUlJBWV9IUFAKCiNpbmNsdWRlIDx0eXBlX3RyYWl0cz4KI2luY2x1ZGUgImpzX21hdC5ocHAiCiNpbmNsdWRlICJqc19wb2ludC5ocHAiCiNpbmNsdWRlICJqc19jb250b3VyLmhwcCIKI2luY2x1ZGUgImpzYmluZGluZ3MuaHBwIgoKc3RhdGljIGlubGluZSBpbnQ2NF90CmpzX2FycmF5X2xlbmd0aChKU0NvbnRleHQqIGN0eCwgY29uc3QgSlNWYWx1ZUNvbnN0JiBhcnIpIHsKICBpbnQ2NF90IHJldCA9IC0xOwogIGlmKGpzX2lzX2FycmF5KGN0eCwgYXJyKSkgewogICAgdWludDMyX3QgbGVuOwogICAgSlNWYWx1ZSB2ID0gSlNfR2V0UHJvcGVydHlTdHIoY3R4LCBhcnIsICJsZW5ndGgiKTsKICAgIEpTX1RvVWludDMyKGN0eCwgJmxlbiwgdik7CiAgICBKU19GcmVlVmFsdWUoY3R4LCB2KTsKICAgIHJldCA9IGxlbjsKICB9CiAgcmV0dXJuIHJldDsKfQoKZXh0ZXJuICJDIiBpbnQgSlNfRGVsZXRlUHJvcGVydHlJbnQ2NChKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IG9iaiwgaW50NjRfdCBpZHgsIGludCBmbGFncyk7CgpzdGF0aWMgaW5saW5lIGludDY0X3QKanNfYXJyYXlfdHJ1bmNhdGUoSlNDb250ZXh0KiBjdHgsIGNvbnN0IEpTVmFsdWVDb25zdCYgYXJyLCBpbnQ2NF90IGxlbikgewogIGludDY0X3QgbmV3bGVuID0gLTE7CiAgaWYoanNfaXNfYXJyYXkoY3R4LCBhcnIpKSB7CiAgICBpbnQ2NF90IHRvcCA9IGpzX2FycmF5X2xlbmd0aChjdHgsIGFycik7CiAgICBuZXdsZW4gPSBzdGQ6Om1pbih0b3AsIGxlbiA8IDAgPyB0b3AgKyBsZW4gOiBsZW4pOwogICAgd2hpbGUoLS10b3AgPj0gbmV3bGVuKSBKU19EZWxldGVQcm9wZXJ0eUludDY0KGN0eCwgYXJyLCB0b3AsIDApOwogICAgSlNfU2V0UHJvcGVydHlTdHIoY3R4LCBhcnIsICJsZW5ndGgiLCBKU19OZXdJbnQ2NChjdHgsIG5ld2xlbikpOwogIH0KICByZXR1cm4gbmV3bGVuOwp9CgpjbGFzcyBqc19hcnJheV9pdGVyYXRvciA6IHB1YmxpYyBzdGQ6Oml0ZXJhdG9yPHN0ZDo6aW5wdXRfaXRlcmF0b3JfdGFnLCBKU1ZhbHVlPiB7CnB1YmxpYzoKICBqc19hcnJheV9pdGVyYXRvcihKU0NvbnRleHQqIGMsIGNvbnN0IEpTVmFsdWVDb25zdCYgYSwgY29uc3Qgc2l6ZV90IGkgPSAwKSA6IGN0eChjKSwgYXJyYXkoJmEpLCBwb3MoaSkge30KCiAgdmFsdWVfdHlwZQogIG9wZXJhdG9yKigpIGNvbnN0IHsKICAgIHJldHVybiBKU19HZXRQcm9wZXJ0eVVpbnQzMihjdHgsICphcnJheSwgcG9zKTsKICB9CgogIGpzX2FycmF5X2l0ZXJhdG9yJgogIG9wZXJhdG9yKysoKSB7CiAgICArK3RoaXMtPnBvczsKICAgIHJldHVybiAqdGhpczsKICB9CgogIGpzX2FycmF5X2l0ZXJhdG9yCiAgb3BlcmF0b3IrKyhpbnQpIHsKICAgIGpzX2FycmF5X2l0ZXJhdG9yIHRlbXAoKnRoaXMpOwogICAgKysoKnRoaXMpOwogICAgcmV0dXJuIHRlbXA7CiAgfQoKICBib29sCiAgb3BlcmF0b3I9PShjb25zdCBqc19hcnJheV9pdGVyYXRvciYgcmhzKSB7CiAgICByZXR1cm4gYXJyYXkgPT0gcmhzLmFycmF5ICYmIHBvcyA9PSByaHMucG9zOwogIH0KCiAgYm9vbAogIG9wZXJhdG9yIT0oY29uc3QganNfYXJyYXlfaXRlcmF0b3ImIHJocykgewogICAgcmV0dXJuICFvcGVyYXRvcj09KHJocyk7CiAgfQoKcHJpdmF0ZToKICBKU0NvbnRleHQqIGN0eDsKICBjb25zdCBKU1ZhbHVlQ29uc3QqIGFycmF5OwogIGRpZmZlcmVuY2VfdHlwZSBwb3M7Cn07CgpzdGF0aWMgaW5saW5lIGpzX2FycmF5X2l0ZXJhdG9yCmpzX2JlZ2luKEpTQ29udGV4dCogYywgY29uc3QgSlNWYWx1ZUNvbnN0JiBhKSB7CiAgcmV0dXJuIGpzX2FycmF5X2l0ZXJhdG9yKGMsIGEsIDApOwp9CgpzdGF0aWMgaW5saW5lIGpzX2FycmF5X2l0ZXJhdG9yCmpzX2VuZChKU0NvbnRleHQqIGMsIGNvbnN0IEpTVmFsdWVDb25zdCYgYSkgewogIHJldHVybiBqc19hcnJheV9pdGVyYXRvcihjLCBhLCBqc19hcnJheV9sZW5ndGgoYywgYSkpOwp9Cgp0ZW1wbGF0ZTxjbGFzcyBUPiBjbGFzcyBqc19hcnJheSB7CnB1YmxpYzoKICBzdGF0aWMgaW50NjRfdAogIHRvX3ZlY3RvcihKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IGFyciwgc3RkOjp2ZWN0b3I8VD4mIG91dCkgewogICAgaW50NjRfdCBpLCBuOwogICAgSlNWYWx1ZSBsZW47CiAgICBpZighanNfaXNfYXJyYXkoY3R4LCBhcnIpKQogICAgICByZXR1cm4gLTE7CiAgICBsZW4gPSBKU19HZXRQcm9wZXJ0eVN0cihjdHgsIGFyciwgImxlbmd0aCIpOwogICAgSlNfVG9JbnQ2NChjdHgsICZuLCBsZW4pOwogICAgb3V0LnJlc2VydmUob3V0LnNpemUoKSArIG4pOwogICAgZm9yKGkgPSAwOyBpIDwgbjsgaSsrKSB7CiAgICAgIGRvdWJsZSB2YWx1ZTsKICAgICAgSlNWYWx1ZSBpdGVtID0gSlNfR2V0UHJvcGVydHlVaW50MzIoY3R4LCBhcnIsICh1aW50MzJfdClpKTsKICAgICAgaWYoSlNfVG9GbG9hdDY0KGN0eCwgJnZhbHVlLCBpdGVtKSA9PSAtMSkgewogICAgICAgIEpTX0ZyZWVWYWx1ZShjdHgsIGl0ZW0pOwogICAgICAgIG91dC5jbGVhcigpOwogICAgICAgIHJldHVybiAtMTsKICAgICAgfQogICAgICBvdXQucHVzaF9iYWNrKHZhbHVlKTsKICAgICAgSlNfRnJlZVZhbHVlKGN0eCwgaXRlbSk7CiAgICB9CiAgICByZXR1cm4gbjsKICB9CgogIHRlbXBsYXRlPGNsYXNzIENvbnRhaW5lcj4KICBzdGF0aWMgSlNWYWx1ZQogIGZyb20oSlNDb250ZXh0KiBjdHgsIGNvbnN0IENvbnRhaW5lciYgaW4pIHsKICAgIHJldHVybiBmcm9tX3NlcXVlbmNlPHR5cGVuYW1lIENvbnRhaW5lcjo6Y29uc3RfaXRlcmF0b3I+KGN0eCwgaW4uYmVnaW4oKSwgaW4uZW5kKCkpOwogIH0KCiAgc3RhdGljIEpTVmFsdWUKICBmcm9tX3ZlY3RvcihKU0NvbnRleHQqIGN0eCwgY29uc3Qgc3RkOjp2ZWN0b3I8VD4mIGluKSB7CiAgICByZXR1cm4gZnJvbV9zZXF1ZW5jZShjdHgsIGluLmJlZ2luKCksIGluLmVuZCgpKTsKICB9CgogIHRlbXBsYXRlPGNsYXNzIEl0ZXJhdG9yPgogc3RhdGljICBKU1ZhbHVlCiAgZnJvbV9zZXF1ZW5jZShKU0NvbnRleHQqIGN0eCwgY29uc3QgSXRlcmF0b3ImIHN0YXJ0LCBjb25zdCBJdGVyYXRvciYgZW5kIC8qLAogICAgdHlwZW5hbWUgIHN0ZDo6ZW5hYmxlX2lmPHBvaW50ZXJfdHlwZTxJdGVyYXRvcj46OnR5cGVkX2FycmF5ID46OnR5cGUqIGR1bW15ID0gMCovKSB7CiAgICBKU1ZhbHVlIGFyciA9IEpTX05ld0FycmF5KGN0eCk7CiAgICBzaXplX3QgaSA9IDA7CiAgICBmb3IoSXRlcmF0b3IgaXQgPSBzdGFydDsgaXQgIT0gZW5kOyArK2l0KSB7CiAgICAgIEpTVmFsdWUgaXRlbSA9IGpzX3ZhbHVlX2Zyb20oY3R4LCAqaXQpOwogICAgICBKU19TZXRQcm9wZXJ0eVVpbnQzMihjdHgsIGFyciwgaSwgaXRlbSk7CiAgICAgICsraTsKICAgIH0KICAgIHJldHVybiBhcnI7CiAgfQoKICB0ZW1wbGF0ZTxzaXplX3QgTj4gc3RhdGljIGludDY0X3QgdG9fYXJyYXkoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCBhcnIsIHN0ZDo6YXJyYXk8VCwgTj4mIG91dCk7CiAgc3RhdGljIGludDY0X3QgdG9fc2NhbGFyKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgYXJyLCBjdjo6U2NhbGFyXzxUPiYgb3V0KTsKfTsKCnRlbXBsYXRlPGNsYXNzIFQ+CnRlbXBsYXRlPHNpemVfdCBOPgppbnQ2NF90CmpzX2FycmF5PFQ+Ojp0b19hcnJheShKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IGFyciwgc3RkOjphcnJheTxULCBOPiYgb3V0KSB7CiAgc3RkOjp2ZWN0b3I8VD4gdG1wOwogIHRvX3ZlY3RvcihjdHgsIGFyciwgdG1wKTsKICBpZih0bXAuc2l6ZSgpIDwgTikKICAgIHJldHVybiAtMTsKICBmb3Ioc2l6ZV90IGkgPSAwOyBpIDwgTjsgaSsrKSBvdXRbaV0gPSB0bXBbaV07CiAgcmV0dXJuIE47Cn0KCnRlbXBsYXRlPGNsYXNzIFQ+CmludDY0X3QKanNfYXJyYXk8VD46OnRvX3NjYWxhcihKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IGFyciwgY3Y6OlNjYWxhcl88VD4mIG91dCkgewogIHNpemVfdCBuOwogIHN0ZDo6dmVjdG9yPFQ+IHRtcDsKICB0b192ZWN0b3IoY3R4LCBhcnIsIHRtcCk7CiAgaWYoKG4gPSB0bXAuc2l6ZSgpKSA8IDQpCiAgICB0bXAucmVzaXplKDQpOwogIGZvcihzaXplX3QgaSA9IDA7IGkgPCA0OyBpKyspIG91dFtpXSA9IHRtcFtpXTsKICByZXR1cm4gbjsKfQoKdGVtcGxhdGU8PiBjbGFzcyBqc19hcnJheTx1aW50MzJfdD4gewpwdWJsaWM6CiAgc3RhdGljIGludDY0X3QKICB0b192ZWN0b3IoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCBhcnIsIHN0ZDo6dmVjdG9yPHVpbnQzMl90PiYgb3V0KSB7CiAgICBpbnQ2NF90IGksIG47CiAgICBKU1ZhbHVlIGxlbjsKICAgIGlmKCFqc19pc19hcnJheShjdHgsIGFycikpCiAgICAgIHJldHVybiAtMTsKICAgIGxlbiA9IEpTX0dldFByb3BlcnR5U3RyKGN0eCwgYXJyLCAibGVuZ3RoIik7CiAgICBKU19Ub0ludDY0KGN0eCwgJm4sIGxlbik7CiAgICBvdXQucmVzZXJ2ZShvdXQuc2l6ZSgpICsgbik7CiAgICBmb3IoaSA9IDA7IGkgPCBuOyBpKyspIHsKICAgICAgSlNWYWx1ZSB2YWx1ZSA9IEpTX0dldFByb3BlcnR5VWludDMyKGN0eCwgYXJyLCAodWludDMyX3QpaSk7CiAgICAgIHVpbnQzMl90IHU7CiAgICAgIEpTX1RvVWludDMyKGN0eCwgJnUsIHZhbHVlKTsKICAgICAgb3V0LnB1c2hfYmFjayh1KTsKICAgIH0KICAgIHJldHVybiBuOwogIH0KCiAgdGVtcGxhdGU8Y2xhc3MgSXRlcmF0b3I+CiAgc3RhdGljIEpTVmFsdWUKICBmcm9tX3NlcXVlbmNlKEpTQ29udGV4dCogY3R4LCBjb25zdCBJdGVyYXRvciYgc3RhcnQsIGNvbnN0IEl0ZXJhdG9yJiBlbmQpIHsKICAgIEpTVmFsdWUgYXJyID0gSlNfTmV3QXJyYXkoY3R4KTsKICAgIHNpemVfdCBpID0gMDsKICAgIGZvcihJdGVyYXRvciBpdCA9IHN0YXJ0OyBpdCAhPSBlbmQ7ICsraXQpIHsKICAgICAgdWludDMyX3QgdSA9ICppdDsKICAgICAgSlNfU2V0UHJvcGVydHlVaW50MzIoY3R4LCBhcnIsIGksIEpTX05ld1VpbnQzMihjdHgsIHUpKTsKICAgICAgKytpOwogICAgfQogICAgcmV0dXJuIGFycjsKICB9CgogIHRlbXBsYXRlPHNpemVfdCBOPiBzdGF0aWMgaW50NjRfdCB0b19hcnJheShKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IGFyciwgc3RkOjphcnJheTx1aW50MzJfdCwgTj4mIG91dCk7Cn07Cgp0ZW1wbGF0ZTxzaXplX3QgTj4KaW50NjRfdApqc19hcnJheTx1aW50MzJfdD46OnRvX2FycmF5KEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgYXJyLCBzdGQ6OmFycmF5PHVpbnQzMl90LCBOPiYgb3V0KSB7CiAgaW50NjRfdCBpOwogIGlmKCFqc19pc19hcnJheShjdHgsIGFycikpCiAgICByZXR1cm4gLTE7CiAgZm9yKGkgPSAwOyBpIDwgTjsgaSsrKSB7CiAgICBKU1ZhbHVlIHZhbHVlID0gSlNfR2V0UHJvcGVydHlVaW50MzIoY3R4LCBhcnIsICh1aW50MzJfdClpKTsKICAgIHVpbnQzMl90IHU7CiAgICBKU19Ub1VpbnQzMihjdHgsICZ1LCB2YWx1ZSk7CiAgICBvdXRbaV0gPSB1OwogIH0KICByZXR1cm4gaTsKfQoKdGVtcGxhdGU8PiBjbGFzcyBqc19hcnJheTxKU1ZhbHVlPiB7CnB1YmxpYzoKICBzdGF0aWMgaW50NjRfdAogIHRvX3ZlY3RvcihKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IGFyciwgc3RkOjp2ZWN0b3I8SlNWYWx1ZT4mIG91dCkgewogICAgaW50NjRfdCBpLCBuOwogICAgSlNWYWx1ZSBsZW47CiAgICBpZighanNfaXNfYXJyYXkoY3R4LCBhcnIpKQogICAgICByZXR1cm4gLTE7CiAgICBsZW4gPSBKU19HZXRQcm9wZXJ0eVN0cihjdHgsIGFyciwgImxlbmd0aCIpOwogICAgSlNfVG9JbnQ2NChjdHgsICZuLCBsZW4pOwogICAgb3V0LnJlc2VydmUob3V0LnNpemUoKSArIG4pOwogICAgZm9yKGkgPSAwOyBpIDwgbjsgaSsrKSB7CiAgICAgIEpTVmFsdWUgdmFsdWUgPSBKU19HZXRQcm9wZXJ0eVVpbnQzMihjdHgsIGFyciwgKHVpbnQzMl90KWkpOwogICAgICBvdXQucHVzaF9iYWNrKHZhbHVlKTsKICAgIH0KICAgIHJldHVybiBuOwogIH0KCiAgdGVtcGxhdGU8Y2xhc3MgSXRlcmF0b3I+CiAgc3RhdGljIEpTVmFsdWUKICBmcm9tX3NlcXVlbmNlKEpTQ29udGV4dCogY3R4LCBjb25zdCBJdGVyYXRvciYgc3RhcnQsIGNvbnN0IEl0ZXJhdG9yJiBlbmQpIHsKICAgIEpTVmFsdWUgYXJyID0gSlNfTmV3QXJyYXkoY3R4KTsKICAgIHNpemVfdCBpID0gMDsKICAgIGZvcihJdGVyYXRvciBpdCA9IHN0YXJ0OyBpdCAhPSBlbmQ7ICsraXQpIHsKICAgICAgSlNfU2V0UHJvcGVydHlVaW50MzIoY3R4LCBhcnIsIGksICppdCk7CiAgICAgICsraTsKICAgIH0KICAgIHJldHVybiBhcnI7CiAgfQoKICB0ZW1wbGF0ZTxzaXplX3QgTj4gc3RhdGljIGludDY0X3QgdG9fYXJyYXkoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCBhcnIsIHN0ZDo6YXJyYXk8SlNWYWx1ZSwgTj4mIG91dCk7Cn07Cgp0ZW1wbGF0ZTxzaXplX3QgTj4KaW50NjRfdApqc19hcnJheTxKU1ZhbHVlPjo6dG9fYXJyYXkoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCBhcnIsIHN0ZDo6YXJyYXk8SlNWYWx1ZSwgTj4mIG91dCkgewogIGludDY0X3QgaTsKICBpZighanNfaXNfYXJyYXkoY3R4LCBhcnIpKQogICAgcmV0dXJuIC0xOwogIGZvcihpID0gMDsgaSA8IE47IGkrKykgewogICAgSlNWYWx1ZSB2YWx1ZSA9IEpTX0dldFByb3BlcnR5VWludDMyKGN0eCwgYXJyLCAodWludDMyX3QpaSk7CiAgICBvdXRbaV0gPSB2YWx1ZTsKICB9CiAgcmV0dXJuIGk7Cn0KCnRlbXBsYXRlPGNsYXNzIFQ+IGNsYXNzIGpzX2FycmF5PEpTQ29sb3JEYXRhPFQ+PiB7CnB1YmxpYzoKICBzdGF0aWMgaW50NjRfdAogIHRvX3ZlY3RvcihKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IGFyciwgc3RkOjp2ZWN0b3I8SlNDb2xvckRhdGE8VD4+JiBvdXQpIHsKICAgIGludDY0X3QgaSwgbjsKICAgIEpTVmFsdWUgbGVuOwogICAgaWYoIWpzX2lzX2FycmF5KGN0eCwgYXJyKSkKICAgICAgcmV0dXJuIC0xOwogICAgbGVuID0gSlNfR2V0UHJvcGVydHlTdHIoY3R4LCBhcnIsICJsZW5ndGgiKTsKICAgIEpTX1RvSW50NjQoY3R4LCAmbiwgbGVuKTsKICAgIG91dC5yZXNlcnZlKG91dC5zaXplKCkgKyBuKTsKICAgIGZvcihpID0gMDsgaSA8IG47IGkrKykgewogICAgICBKU0NvbG9yRGF0YTxUPiB2YWx1ZTsKICAgICAgSlNWYWx1ZSBpdGVtID0gSlNfR2V0UHJvcGVydHlVaW50MzIoY3R4LCBhcnIsICh1aW50MzJfdClpKTsKICAgICAgaWYoIWpzX2NvbG9yX3JlYWQoY3R4LCBpdGVtLCAmdmFsdWUpKSB7CiAgICAgICAgSlNfRnJlZVZhbHVlKGN0eCwgaXRlbSk7CiAgICAgICAgb3V0LmNsZWFyKCk7CiAgICAgICAgcmV0dXJuIC0xOwogICAgICB9CiAgICAgIG91dC5wdXNoX2JhY2sodmFsdWUpOwogICAgICBKU19GcmVlVmFsdWUoY3R4LCBpdGVtKTsKICAgIH0KICAgIHJldHVybiBuOwogIH0KCiAgdGVtcGxhdGU8Y2xhc3MgSXRlcmF0b3I+CiAgc3RhdGljIEpTVmFsdWUKICBmcm9tX3NlcXVlbmNlKEpTQ29udGV4dCogY3R4LCBjb25zdCBJdGVyYXRvciYgc3RhcnQsIGNvbnN0IEl0ZXJhdG9yJiBlbmQpIHsKICAgIEpTVmFsdWUgYXJyID0gSlNfTmV3QXJyYXkoY3R4KTsKICAgIHNpemVfdCBpID0gMDsKICAgIGZvcihJdGVyYXRvciBpdCA9IHN0YXJ0OyBpdCAhPSBlbmQ7ICsraXQpIHsKICAgICAgSlNfU2V0UHJvcGVydHlVaW50MzIoY3R4LCBhcnIsIGksIGpzX2NvbG9yX25ldyhjdHgsICppdCkpOwogICAgICArK2k7CiAgICB9CiAgICByZXR1cm4gYXJyOwogIH0KCiAgdGVtcGxhdGU8c2l6ZV90IE4+IHN0YXRpYyBpbnQ2NF90IHRvX2FycmF5KEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgYXJyLCBzdGQ6OmFycmF5PEpTQ29sb3JEYXRhPFQ+LCBOPiYgb3V0KTsKfTsKCnRlbXBsYXRlPGNsYXNzIFQ+CnRlbXBsYXRlPHNpemVfdCBOPgppbnQ2NF90CmpzX2FycmF5PEpTQ29sb3JEYXRhPFQ+Pjo6dG9fYXJyYXkoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCBhcnIsIHN0ZDo6YXJyYXk8SlNDb2xvckRhdGE8VD4sIE4+JiBvdXQpIHsKICB1aW50MzJfdCBpOwogIGlmKCFqc19pc19hcnJheShjdHgsIGFycikpCiAgICByZXR1cm4gLTE7CiAgZm9yKGkgPSAwOyBpIDwgTjsgaSsrKSB7CiAgICBKU1ZhbHVlIHZhbHVlID0gSlNfR2V0UHJvcGVydHlVaW50MzIoY3R4LCBhcnIsIGkpOwogICAganNfY29sb3JfcmVhZChjdHgsIHZhbHVlLCAmb3V0W2ldKTsKICB9CiAgcmV0dXJuIGk7Cn0KCiNpbmNsdWRlICJqc19wb2ludC5ocHAiCgp0ZW1wbGF0ZTxjbGFzcyBUPiBjbGFzcyBqc19hcnJheTxKU1BvaW50RGF0YTxUPj4gewpwdWJsaWM6CiAgc3RhdGljIGludDY0X3QKICB0b192ZWN0b3IoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCBhcnIsIEpTQ29udG91ckRhdGE8VD4mIG91dCkgewogICAgaW50NjRfdCBpLCBuOwogICAgSlNWYWx1ZSBsZW47CiAgICBpZighanNfaXNfYXJyYXkoY3R4LCBhcnIpKQogICAgICByZXR1cm4gLTE7CiAgICBsZW4gPSBKU19HZXRQcm9wZXJ0eVN0cihjdHgsIGFyciwgImxlbmd0aCIpOwogICAgSlNfVG9JbnQ2NChjdHgsICZuLCBsZW4pOwogICAgb3V0LnJlc2VydmUob3V0LnNpemUoKSArIG4pOwogICAgZm9yKGkgPSAwOyBpIDwgbjsgaSsrKSB7CiAgICAgIEpTUG9pbnREYXRhPGRvdWJsZT4gdmFsdWU7CiAgICAgIEpTVmFsdWUgaXRlbSA9IEpTX0dldFByb3BlcnR5VWludDMyKGN0eCwgYXJyLCAodWludDMyX3QpaSk7CiAgICAgIGlmKCFqc19wb2ludF9yZWFkKGN0eCwgaXRlbSwgJnZhbHVlKSkgewogICAgICAgIEpTX0ZyZWVWYWx1ZShjdHgsIGl0ZW0pOwogICAgICAgIG91dC5jbGVhcigpOwogICAgICAgIHJldHVybiAtMTsKICAgICAgfQogICAgICBvdXQucHVzaF9iYWNrKHZhbHVlKTsKICAgICAgSlNfRnJlZVZhbHVlKGN0eCwgaXRlbSk7CiAgICB9CiAgICByZXR1cm4gbjsKICB9CgogIHRlbXBsYXRlPGNsYXNzIEl0ZXJhdG9yPgogIHN0YXRpYyBKU1ZhbHVlCiAgZnJvbV9zZXF1ZW5jZShKU0NvbnRleHQqIGN0eCwgY29uc3QgSXRlcmF0b3ImIHN0YXJ0LCBjb25zdCBJdGVyYXRvciYgZW5kKSB7CiAgICBKU1ZhbHVlIGFyciA9IEpTX05ld0FycmF5KGN0eCk7CiAgICBzaXplX3QgaSA9IDA7CiAgICBmb3IoSXRlcmF0b3IgaXQgPSBzdGFydDsgaXQgIT0gZW5kOyArK2l0KSB7CiAgICAgIEpTX1NldFByb3BlcnR5VWludDMyKGN0eCwgYXJyLCBpLCBqc19wb2ludF93cmFwKGN0eCwgKml0KSk7CiAgICAgICsraTsKICAgIH0KICAgIHJldHVybiBhcnI7CiAgfQoKICB0ZW1wbGF0ZTxzaXplX3QgTj4gc3RhdGljIGludDY0X3QgdG9fYXJyYXkoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCBhcnIsIHN0ZDo6YXJyYXk8Y3Y6Ok1hdCwgTj4mIG91dCk7Cn07Cgp0ZW1wbGF0ZTxjbGFzcyBUPiBjbGFzcyBqc19hcnJheTxKU1JlY3REYXRhPFQ+PiB7CnB1YmxpYzoKICBzdGF0aWMgaW50NjRfdAogIHRvX3ZlY3RvcihKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IGFyciwgc3RkOjp2ZWN0b3I8SlNSZWN0RGF0YTxUPj4mIG91dCkgewogICAgaW50NjRfdCBpLCBuOwogICAgSlNWYWx1ZSBsZW47CiAgICBpZighanNfaXNfYXJyYXkoY3R4LCBhcnIpKQogICAgICByZXR1cm4gLTE7CiAgICBsZW4gPSBKU19HZXRQcm9wZXJ0eVN0cihjdHgsIGFyciwgImxlbmd0aCIpOwogICAgSlNfVG9JbnQ2NChjdHgsICZuLCBsZW4pOwogICAgb3V0LnJlc2VydmUob3V0LnNpemUoKSArIG4pOwogICAgZm9yKGkgPSAwOyBpIDwgbjsgaSsrKSB7CiAgICAgIEpTUmVjdERhdGE8VD4gdmFsdWU7CiAgICAgIEpTVmFsdWUgaXRlbSA9IEpTX0dldFByb3BlcnR5VWludDMyKGN0eCwgYXJyLCAodWludDMyX3QpaSk7CiAgICAgIGlmKCFqc19yZWN0X3JlYWQoY3R4LCBpdGVtLCAmdmFsdWUpKSB7CiAgICAgICAgSlNfRnJlZVZhbHVlKGN0eCwgaXRlbSk7CiAgICAgICAgb3V0LmNsZWFyKCk7CiAgICAgICAgcmV0dXJuIC0xOwogICAgICB9CiAgICAgIG91dC5wdXNoX2JhY2sodmFsdWUpOwogICAgICBKU19GcmVlVmFsdWUoY3R4LCBpdGVtKTsKICAgIH0KICAgIHJldHVybiBuOwogIH0KCiAgdGVtcGxhdGU8Y2xhc3MgSXRlcmF0b3I+CiAgc3RhdGljIEpTVmFsdWUKICBmcm9tX3NlcXVlbmNlKEpTQ29udGV4dCogY3R4LCBjb25zdCBJdGVyYXRvciYgc3RhcnQsIGNvbnN0IEl0ZXJhdG9yJiBlbmQpIHsKICAgIEpTVmFsdWUgYXJyID0gSlNfTmV3QXJyYXkoY3R4KTsKICAgIHNpemVfdCBpID0gMDsKICAgIGZvcihJdGVyYXRvciBpdCA9IHN0YXJ0OyBpdCAhPSBlbmQ7ICsraXQpIHsKICAgICAgSlNfU2V0UHJvcGVydHlVaW50MzIoY3R4LCBhcnIsIGksIGpzX3JlY3Rfd3JhcChjdHgsICppdCkpOwogICAgICArK2k7CiAgICB9CiAgICByZXR1cm4gYXJyOwogIH0KCiAgdGVtcGxhdGU8c2l6ZV90IE4+IHN0YXRpYyBpbnQ2NF90IHRvX2FycmF5KEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgYXJyLCBzdGQ6OmFycmF5PEpTUmVjdERhdGE8VD4sIE4+JiBvdXQpOwp9OwoKdGVtcGxhdGU8PiBjbGFzcyBqc19hcnJheTxkb3VibGU+IHsKcHVibGljOgogIHN0YXRpYyBpbnQ2NF90CiAgdG9fdmVjdG9yKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgYXJyLCBzdGQ6OnZlY3Rvcjxkb3VibGU+JiBvdXQpIHsKICAgIGludDY0X3QgaSwgbjsKICAgIEpTVmFsdWUgbGVuOwogICAgaWYoIWpzX2lzX2FycmF5KGN0eCwgYXJyKSkKICAgICAgcmV0dXJuIC0xOwogICAgbGVuID0gSlNfR2V0UHJvcGVydHlTdHIoY3R4LCBhcnIsICJsZW5ndGgiKTsKICAgIEpTX1RvSW50NjQoY3R4LCAmbiwgbGVuKTsKICAgIG91dC5yZXNlcnZlKG91dC5zaXplKCkgKyBuKTsKICAgIGZvcihpID0gMDsgaSA8IG47IGkrKykgewogICAgICBkb3VibGUgdmFsdWU7CiAgICAgIEpTVmFsdWUgaXRlbSA9IEpTX0dldFByb3BlcnR5VWludDMyKGN0eCwgYXJyLCAodWludDMyX3QpaSk7CiAgICAgIGlmKEpTX1RvRmxvYXQ2NChjdHgsICZ2YWx1ZSwgaXRlbSkpIHsKICAgICAgICBKU19GcmVlVmFsdWUoY3R4LCBpdGVtKTsKICAgICAgICBvdXQuY2xlYXIoKTsKICAgICAgICByZXR1cm4gLTE7CiAgICAgIH0KICAgICAgb3V0LnB1c2hfYmFjayh2YWx1ZSk7CiAgICAgIEpTX0ZyZWVWYWx1ZShjdHgsIGl0ZW0pOwogICAgfQogICAgcmV0dXJuIG47CiAgfQoKICB0ZW1wbGF0ZTxjbGFzcyBJdGVyYXRvcj4KICBzdGF0aWMgSlNWYWx1ZQogIGZyb21fc2VxdWVuY2UoSlNDb250ZXh0KiBjdHgsIGNvbnN0IEl0ZXJhdG9yJiBzdGFydCwgY29uc3QgSXRlcmF0b3ImIGVuZCkgewogICAgSlNWYWx1ZSBhcnIgPSBKU19OZXdBcnJheShjdHgpOwogICAgc2l6ZV90IGkgPSAwOwogICAgZm9yKEl0ZXJhdG9yIGl0ID0gc3RhcnQ7IGl0ICE9IGVuZDsgKytpdCkgewogICAgICBKU1ZhbHVlIGl0ZW0gPSBKU19OZXdGbG9hdDY0KGN0eCwgKml0KTsKICAgICAgSlNfU2V0UHJvcGVydHlVaW50MzIoY3R4LCBhcnIsIGksIGl0ZW0pOwogICAgICArK2k7CiAgICB9CiAgICByZXR1cm4gYXJyOwogIH0KCiAgc3RhdGljIGludDY0X3QKICB0b19zY2FsYXIoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCBhcnIsIGN2OjpTY2FsYXJfPGRvdWJsZT4mIG91dCkgewogICAgc3RkOjp2ZWN0b3I8ZG91YmxlPiB0bXA7CiAgICBzaXplX3QgbjsKICAgIHRvX3ZlY3RvcihjdHgsIGFyciwgdG1wKTsKICAgIG4gPSB0bXAuc2l6ZSgpOwoKICAgIGZvcihzaXplX3QgaSA9IDA7IGkgPCA0OyBpKyspIG91dFtpXSA9IHRtcFtpXTsKICAgIHJldHVybiBuOwogIH0KCiAgdGVtcGxhdGU8c2l6ZV90IE4+CiAgc3RhdGljIGludDY0X3QKICB0b19hcnJheShKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IGFyciwgc3RkOjphcnJheTxkb3VibGUsIE4+JiBvdXQpIHsKICAgIHN0ZDo6dmVjdG9yPGRvdWJsZT4gdG1wOwogICAgdG9fdmVjdG9yKGN0eCwgYXJyLCB0bXApOwoKICAgIGZvcihzaXplX3QgaSA9IDA7IGkgPCBOOyBpKyspIG91dFtpXSA9IHRtcFtpXTsKICAgIHJldHVybiBOOwogIH0KfTsKCnRlbXBsYXRlPD4gY2xhc3MganNfYXJyYXk8Y3Y6Ok1hdD4gewpwdWJsaWM6CiAgc3RhdGljIGludDY0X3QKICB0b192ZWN0b3IoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCBhcnIsIHN0ZDo6dmVjdG9yPGN2OjpNYXQ+JiBvdXQpIHsKICAgIGludDY0X3QgaSwgbjsKICAgIEpTVmFsdWUgbGVuOwogICAgaWYoIWpzX2lzX2FycmF5KGN0eCwgYXJyKSkKICAgICAgcmV0dXJuIC0xOwogICAgbGVuID0gSlNfR2V0UHJvcGVydHlTdHIoY3R4LCBhcnIsICJsZW5ndGgiKTsKICAgIEpTX1RvSW50NjQoY3R4LCAmbiwgbGVuKTsKICAgIG91dC5yZXNlcnZlKG91dC5zaXplKCkgKyBuKTsKICAgIGZvcihpID0gMDsgaSA8IG47IGkrKykgewogICAgICBKU01hdERhdGEqIHZhbHVlOwogICAgICBKU1ZhbHVlIGl0ZW0gPSBKU19HZXRQcm9wZXJ0eVVpbnQzMihjdHgsIGFyciwgKHVpbnQzMl90KWkpOwogICAgICB2YWx1ZSA9IGpzX21hdF9kYXRhKGN0eCwgaXRlbSk7CiAgICAgIGlmKHZhbHVlID09IG51bGxwdHIpIHsKICAgICAgICBKU19GcmVlVmFsdWUoY3R4LCBpdGVtKTsKICAgICAgICBvdXQuY2xlYXIoKTsKICAgICAgICByZXR1cm4gLTE7CiAgICAgIH0KICAgICAgb3V0LnB1c2hfYmFjaygqdmFsdWUpOwogICAgICBKU19GcmVlVmFsdWUoY3R4LCBpdGVtKTsKICAgIH0KICAgIHJldHVybiBuOwogIH0KCiAgdGVtcGxhdGU8c2l6ZV90IE4+IHN0YXRpYyBpbnQ2NF90IHRvX2FycmF5KEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgYXJyLCBzdGQ6OmFycmF5PGN2OjpNYXQsIE4+JiBvdXQpOwp9OwoKdGVtcGxhdGU8Y2xhc3MgVD4gY2xhc3MganNfYXJyYXk8SlNDb250b3VyRGF0YTxUPj4gewpwdWJsaWM6CiAgdHlwZWRlZiBKU0NvbnRvdXJEYXRhPFQ+IGNvbnRvdXJfdHlwZTsKICB0eXBlZGVmIEpTUG9pbnREYXRhPFQ+IHBvaW50X3R5cGU7CgogIHN0YXRpYyBpbnQ2NF90CiAgdG9fdmVjdG9yKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgYXJyLCBzdGQ6OnZlY3Rvcjxjb250b3VyX3R5cGU+JiBvdXQpIHsKICAgIGludDY0X3QgaSwgbjsKICAgIEpTVmFsdWUgbGVuOwogICAgaWYoIWpzX2lzX2FycmF5KGN0eCwgYXJyKSkKICAgICAgcmV0dXJuIC0xOwogICAgbGVuID0gSlNfR2V0UHJvcGVydHlTdHIoY3R4LCBhcnIsICJsZW5ndGgiKTsKICAgIEpTX1RvSW50NjQoY3R4LCAmbiwgbGVuKTsKICAgIG91dC5yZXNlcnZlKG91dC5zaXplKCkgKyBuKTsKICAgIGZvcihpID0gMDsgaSA8IG47IGkrKykgewogICAgICBKU0NvbnRvdXJEYXRhPGRvdWJsZT4qIHB0cjsKICAgICAgY29udG91cl90eXBlIGNvbnRvdXI7CiAgICAgIEpTVmFsdWUgaXRlbSA9IEpTX0dldFByb3BlcnR5VWludDMyKGN0eCwgYXJyLCAodWludDMyX3QpaSk7CiAgICAgIGlmKChwdHIgPSBqc19jb250b3VyX2RhdGEoY3R4LCBpdGVtKSkpIHsKICAgICAgICBmb3IoY29uc3QgYXV0byYgcG9pbnQgOiAqcHRyKSBjb250b3VyLmVtcGxhY2VfYmFjayhwb2ludC54LCBwb2ludC55KTsKICAgICAgfSBlbHNlIHsKICAgICAgICBqc19hcnJheTxKU1BvaW50RGF0YTxUPj46OnRvX3ZlY3RvcihjdHgsIGl0ZW0sIGNvbnRvdXIpOwogICAgICB9CiAgICAgIG91dC5wdXNoX2JhY2soY29udG91cik7CiAgICAgIEpTX0ZyZWVWYWx1ZShjdHgsIGl0ZW0pOwogICAgfQogICAgcmV0dXJuIG47CiAgfQoKICB0ZW1wbGF0ZTxjbGFzcyBJdGVyYXRvcj4KICBzdGF0aWMgSlNWYWx1ZQogIGZyb21fc2VxdWVuY2UoSlNDb250ZXh0KiBjdHgsIGNvbnN0IEl0ZXJhdG9yJiBzdGFydCwgY29uc3QgSXRlcmF0b3ImIGVuZCkgewogICAgSlNWYWx1ZSBhcnIgPSBKU19OZXdBcnJheShjdHgpOwogICAgc2l6ZV90IGkgPSAwOwogICAgZm9yKEl0ZXJhdG9yIGl0ID0gc3RhcnQ7IGl0ICE9IGVuZDsgKytpdCkgewogICAgICBKU1ZhbHVlIGl0ZW0gPSBqc19jb250b3VyX25ldyhjdHgsICppdCk7CiAgICAgIEpTX1NldFByb3BlcnR5VWludDMyKGN0eCwgYXJyLCBpLCBpdGVtKTsKICAgICAgKytpOwogICAgfQogICAgcmV0dXJuIGFycjsKICB9CgogIHRlbXBsYXRlPGNsYXNzIENvbnRhaW5lcj4KICBzdGF0aWMgSlNWYWx1ZQogIGZyb20oSlNDb250ZXh0KiBjdHgsIGNvbnN0IENvbnRhaW5lciYgaW4pIHsKICAgIHJldHVybiBmcm9tX3NlcXVlbmNlPHR5cGVuYW1lIENvbnRhaW5lcjo6Y29uc3RfaXRlcmF0b3I+KGN0eCwgaW4uYmVnaW4oKSwgaW4uZW5kKCkpOwogIH0KfTsKCnRlbXBsYXRlPGNsYXNzIFQ+IGNsYXNzIGpzX2FycmF5PHN0ZDo6dmVjdG9yPFQ+PiB7CnB1YmxpYzoKICBzdGF0aWMgaW50NjRfdAogIHRvX3ZlY3RvcihKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IGFyciwgc3RkOjp2ZWN0b3I8c3RkOjp2ZWN0b3I8VD4+JiBvdXQpIHsKICAgIGludDY0X3QgaSwgbjsKICAgIEpTVmFsdWUgbGVuOwogICAgaWYoIWpzX2lzX2FycmF5KGN0eCwgYXJyKSkKICAgICAgcmV0dXJuIC0xOwogICAgbGVuID0gSlNfR2V0UHJvcGVydHlTdHIoY3R4LCBhcnIsICJsZW5ndGgiKTsKICAgIEpTX1RvSW50NjQoY3R4LCAmbiwgbGVuKTsKICAgIG91dC5yZXNlcnZlKG91dC5zaXplKCkgKyBuKTsKICAgIGZvcihpID0gMDsgaSA8IG47IGkrKykgewogICAgICBzdGQ6OnZlY3RvcjxUPiB2YWx1ZTsKICAgICAgSlNWYWx1ZSBpdGVtID0gSlNfR2V0UHJvcGVydHlVaW50MzIoY3R4LCBhcnIsICh1aW50MzJfdClpKTsKICAgICAgaWYoanNfYXJyYXk8VD46OnRvX3ZlY3RvcihjdHgsIGFyciwgdmFsdWUpID09IC0xKSB7CiAgICAgICAgSlNfRnJlZVZhbHVlKGN0eCwgaXRlbSk7CiAgICAgICAgb3V0LmNsZWFyKCk7CiAgICAgICAgcmV0dXJuIC0xOwogICAgICB9CiAgICAgIG91dC5wdXNoX2JhY2sodmFsdWUpOwogICAgICBKU19GcmVlVmFsdWUoY3R4LCBpdGVtKTsKICAgIH0KICAgIHJldHVybiBuOwogIH0KCiAgdGVtcGxhdGU8Y2xhc3MgSXRlcmF0b3I+CiAgc3RhdGljIEpTVmFsdWUKICBmcm9tX3NlcXVlbmNlKEpTQ29udGV4dCogY3R4LCBjb25zdCBJdGVyYXRvciYgc3RhcnQsIGNvbnN0IEl0ZXJhdG9yJiBlbmQpIHsKICAgIEpTVmFsdWUgYXJyID0gSlNfTmV3QXJyYXkoY3R4KTsKICAgIHNpemVfdCBpID0gMDsKICAgIGZvcihJdGVyYXRvciBpdCA9IHN0YXJ0OyBpdCAhPSBlbmQ7ICsraXQpIHsKICAgICAgSlNWYWx1ZSBpdGVtID0ganNfYXJyYXlfZnJvbShjdHgsICppdCk7CiAgICAgIEpTX1NldFByb3BlcnR5VWludDMyKGN0eCwgYXJyLCBpLCBpdGVtKTsKICAgICAgKytpOwogICAgfQogICAgcmV0dXJuIGFycjsKICB9CgogIHRlbXBsYXRlPHNpemVfdCBOPiBzdGF0aWMgaW50NjRfdCB0b19hcnJheShKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IGFyciwgc3RkOjphcnJheTxzdGQ6OnZlY3RvcjxUPiwgTj4mIG91dCk7Cn07Cgp0ZW1wbGF0ZTxjbGFzcyBUPgpzdGF0aWMgaW5saW5lIGludDY0X3QKanNfYXJyYXlfdG8oSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCBhcnIsIHN0ZDo6dmVjdG9yPFQ+JiBvdXQpIHsKICByZXR1cm4ganNfYXJyYXk8VD46OnRvX3ZlY3RvcihjdHgsIGFyciwgb3V0KTsKfQoKdGVtcGxhdGU8Y2xhc3MgVCwgc2l6ZV90IE4+CnN0YXRpYyBpbmxpbmUgaW50NjRfdApqc19hcnJheV90byhKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IGFyciwgc3RkOjphcnJheTxULCBOPiYgb3V0KSB7CiAgdHlwZWRlZiBqc19hcnJheTxUPiBhcnJheV90eXBlOwogIHJldHVybiBhcnJheV90eXBlOjp0b19hcnJheShjdHgsIGFyciwgb3V0KTsKfQoKdGVtcGxhdGU8Y2xhc3MgVD4Kc3RhdGljIGlubGluZSBpbnQ2NF90CmpzX2FycmF5X3RvKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgYXJyLCBjdjo6U2NhbGFyXzxUPiYgb3V0KSB7CiAgcmV0dXJuIGpzX2FycmF5PFQ+Ojp0b19zY2FsYXIoY3R4LCBhcnIsIG91dCk7Cn0KCnRlbXBsYXRlPGNsYXNzIEl0ZXJhdG9yPgpzdGF0aWMgaW5saW5lIHR5cGVuYW1lIHN0ZDo6ZW5hYmxlX2lmPHN0ZDo6aXNfcG9pbnRlcjxJdGVyYXRvcj46OnZhbHVlLCBKU1ZhbHVlPjo6dHlwZQpqc19hcnJheV9mcm9tKEpTQ29udGV4dCogY3R4LCBjb25zdCBJdGVyYXRvciYgc3RhcnQsIGNvbnN0IEl0ZXJhdG9yJiBlbmQpIHsKICByZXR1cm4ganNfYXJyYXk8dHlwZW5hbWUgc3RkOjpyZW1vdmVfcG9pbnRlcjxJdGVyYXRvcj46OnR5cGU+Ojpmcm9tX3NlcXVlbmNlKGN0eCwgc3RhcnQsIGVuZCk7Cn0KCnRlbXBsYXRlPGNsYXNzIEl0ZXJhdG9yPgpzdGF0aWMgaW5saW5lIHR5cGVuYW1lIHN0ZDo6ZW5hYmxlX2lmPEl0ZXJhdG9yOjp2YWx1ZV90eXBlLCBKU1ZhbHVlPjo6dHlwZQpqc19hcnJheV9mcm9tKEpTQ29udGV4dCogY3R4LCBjb25zdCBJdGVyYXRvciYgc3RhcnQsIGNvbnN0IEl0ZXJhdG9yJiBlbmQpIHsKICByZXR1cm4ganNfYXJyYXk8dHlwZW5hbWUgSXRlcmF0b3I6OnZhbHVlX3R5cGU+Ojpmcm9tX3NlcXVlbmNlKGN0eCwgc3RhcnQsIGVuZCk7Cn0KCnRlbXBsYXRlPGNsYXNzIENvbnRhaW5lcj4Kc3RhdGljIGlubGluZSBKU1ZhbHVlCmpzX2FycmF5X2Zyb20oSlNDb250ZXh0KiBjdHgsIGNvbnN0IENvbnRhaW5lciYgdikgewogIHJldHVybiBqc19hcnJheTx0eXBlbmFtZSBDb250YWluZXI6OnZhbHVlX3R5cGU+Ojpmcm9tX3NlcXVlbmNlKGN0eCwgdi5iZWdpbigpLCB2LmVuZCgpKTsKfQoKY2xhc3MganNfb2JqZWN0IHsKcHVibGljOgogIHRlbXBsYXRlPGNsYXNzIFQ+CiAgc3RhdGljIGludDY0X3QKICB0b19tYXAoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCBvYmosIHN0ZDo6bWFwPHN0ZDo6c3RyaW5nLCBUPiYgb3V0KSB7CiAgICBpbnQ2NF90IGkgPSAwOwogICAgIEpTUHJvcGVydHlFbnVtKiBuYW1lczsKICAgICBzaXplX3QgcGxlbjsKCkpTX0dldE93blByb3BlcnR5TmFtZXMoY3R4LCAmbmFtZXMsICZwbGVuLCBvYmosIEpTX0dQTl9FTlVNX09OTFkpOwoKICAgICBmb3IoYXV0byBuYW1lIDogIHN0ZDo6cmFuZ2VzOjpzdWJyYW5nZTxKU1Byb3BlcnR5RW51bT4obmFtZXMsIG5hbWVzK3BsZW4pKSB7CiAgSlNWYWx1ZSB2YWx1ZSA9SlNfR2V0UHJvcGVydHkoY3R4LCBvYmosIG5hbWUuYXRvbSk7CiAgVCBwcm9wOwogIGpzX3ZhbHVlX3RvKGN0eCx2YWx1ZSxwcm9wKTsKICAgICAgb3V0W25hbWVdID0gcHJvcDsKICAgICAgKytpOwogICAgfQogICAgcmV0dXJuIGk7CiAgfQoKICB0ZW1wbGF0ZTxjbGFzcyBUPgogIHN0YXRpYyBKU1ZhbHVlCiAgZnJvbV9tYXAoSlNDb250ZXh0KiBjdHgsIGNvbnN0IHN0ZDo6bWFwPHN0ZDo6c3RyaW5nLCBUPiYgaW4pIHsKICAgIHR5cGVkZWYgc3RkOjpwYWlyPHN0ZDo6c3RyaW5nLCBUPiBlbnRyeV90eXBlOwogICAgSlNWYWx1ZSBvYmogPSBKU19OZXdPYmplY3QoY3R4KTsKCgogICAgZm9yKGVudHJ5X3R5cGUgZW50cnkgOiBpbikgewogICAgICAgVCBwcm9wOwogICAgICAganNfdmFsdWVfdG8oY3R4LCAgZW50cnkuc2Vjb25kLCBwcm9wKTsKICAgSlNfRGVmaW5lUHJvcGVydHlTdHIoY3R4LCBvYmosIGVudHJ5LmZpcnN0LmNfc3RyKCksIHByb3AsIEpTX1BST1BfQ19XX0UpOwogICAgfQoKICAgIHJldHVybiBvYmo7CiAgfQp9OwoKI2VuZGlmIC8qIGRlZmluZWQoSlNfQVJSQVlfSFBQKSAqLwAAAAAAAAAAwEQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAnUMAAAAAAACdQwAAAAAAAAAAAAAAAPC/"
				],
				[
					473,
					1,
					"insert",
					{
						"characters": "uint32_t"
					},
					"CQAAAMRBAAAAAAAAxUEAAAAAAAAAAAAAxUEAAAAAAADFQQAAAAAAAAYAAABzaXplX3TFQQAAAAAAAMZBAAAAAAAAAAAAAMZBAAAAAAAAx0EAAAAAAAAAAAAAx0EAAAAAAADIQQAAAAAAAAAAAADIQQAAAAAAAMlBAAAAAAAAAAAAAMlBAAAAAAAAykEAAAAAAAAAAAAAykEAAAAAAADLQQAAAAAAAAAAAADLQQAAAAAAAMxBAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAxEEAAAAAAADKQQAAAAAAAAAAAAAAAPC/"
				],
				[
					504,
					1,
					"insert",
					{
						"characters": "from"
					},
					"BQAAABREAAAAAAAAFUQAAAAAAAAAAAAAFUQAAAAAAAAVRAAAAAAAAAIAAAB0bxVEAAAAAAAAFkQAAAAAAAAAAAAAFkQAAAAAAAAXRAAAAAAAAAAAAAAXRAAAAAAAABhEAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAFEQAAAAAAAAWRAAAAAAAAAAAAAAAAPC/"
				],
				[
					516,
					1,
					"left_delete",
					null,
					"AQAAAANEAAAAAAAAA0QAAAAAAAABAAAAOw",
					"AQAAAAAAAAABAAAABEQAAAAAAAAERAAAAAAAAAAAAAAAAPC/"
				],
				[
					517,
					1,
					"insert",
					{
						"characters": " ="
					},
					"AgAAAANEAAAAAAAABEQAAAAAAAAAAAAABEQAAAAAAAAFRAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAA0QAAAAAAAADRAAAAAAAAAAAAAAAAPC/"
				],
				[
					518,
					1,
					"insert",
					{
						"characters": " entry.second"
					},
					"DQAAAAVEAAAAAAAABkQAAAAAAAAAAAAABkQAAAAAAAAHRAAAAAAAAAAAAAAHRAAAAAAAAAhEAAAAAAAAAAAAAAhEAAAAAAAACUQAAAAAAAAAAAAACUQAAAAAAAAKRAAAAAAAAAAAAAAKRAAAAAAAAAtEAAAAAAAAAAAAAAtEAAAAAAAADEQAAAAAAAAAAAAADEQAAAAAAAANRAAAAAAAAAAAAAANRAAAAAAAAA5EAAAAAAAAAAAAAA5EAAAAAAAAD0QAAAAAAAAAAAAAD0QAAAAAAAAQRAAAAAAAAAAAAAAQRAAAAAAAABFEAAAAAAAAAAAAABFEAAAAAAAAEkQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAABUQAAAAAAAAFRAAAAAAAAAAAAAAAAPC/"
				],
				[
					519,
					1,
					"insert",
					{
						"characters": ";"
					},
					"AQAAABJEAAAAAAAAE0QAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAEkQAAAAAAAASRAAAAAAAAAAAAAAAAPC/"
				],
				[
					522,
					1,
					"insert",
					{
						"characters": " "
					},
					"AgAAAC1EAAAAAAAALkQAAAAAAAAAAAAALkQAAAAAAAAuRAAAAAAAAA0AAABlbnRyeS5zZWNvbmQs",
					"AQAAAAAAAAABAAAALUQAAAAAAAA6RAAAAAAAAAAAAAAAAPC/"
				],
				[
					532,
					1,
					"cut",
					null,
					"AQAAABlEAAAAAAAAGUQAAAAAAAAbAAAAIGpzX3ZhbHVlX2Zyb20oY3R4LCAgIHByb3Ap",
					"AQAAAAAAAAABAAAANEQAAAAAAAAZRAAAAAAAAAAAAAAAAPC/"
				],
				[
					536,
					1,
					"paste",
					null,
					"AgAAAFVEAAAAAAAAcEQAAAAAAAAAAAAAcEQAAAAAAABwRAAAAAAAAAQAAABwcm9w",
					"AQAAAAAAAAABAAAAVUQAAAAAAABZRAAAAAAAAAAAAAAAAPC/"
				],
				[
					539,
					5,
					"left_delete",
					null,
					"BQAAABlEAAAAAAAAGUQAAAAAAAABAAAAOxhEAAAAAAAAGEQAAAAAAAABAAAAIBZEAAAAAAAAFkQAAAAAAAACAAAAICAURAAAAAAAABREAAAAAAAAAgAAACAgE0QAAAAAAAATRAAAAAAAAAEAAAAK",
					"AQAAAAAAAAABAAAAGkQAAAAAAAAaRAAAAAAAAAAAAAAAAPC/"
				],
				[
					542,
					1,
					"insert",
					{
						"characters": "SetP"
					},
					"BQAAAB1EAAAAAAAAHkQAAAAAAAAAAAAAHkQAAAAAAAAeRAAAAAAAAAcAAABEZWZpbmVQHkQAAAAAAAAfRAAAAAAAAAAAAAAfRAAAAAAAACBEAAAAAAAAAAAAACBEAAAAAAAAIUQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAHUQAAAAAAAAkRAAAAAAAAAAAAAAAAPC/"
				],
				[
					548,
					1,
					"toggle_comment",
					{
						"block": true
					},
					"AgAAAHVEAAAAAAAAd0QAAAAAAAAAAAAAZkQAAAAAAABoRAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAZkQAAAAAAAB1RAAAAAAAAAAAAAAAAPC/"
				],
				[
					564,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAAC9RAAAI2lmbmRlZiBKU19BUlJBWV9IUFAKI2RlZmluZSBKU19BUlJBWV9IUFAKCiNpbmNsdWRlIDx0eXBlX3RyYWl0cz4KI2luY2x1ZGUgImpzX21hdC5ocHAiCiNpbmNsdWRlICJqc19wb2ludC5ocHAiCiNpbmNsdWRlICJqc19jb250b3VyLmhwcCIKI2luY2x1ZGUgImpzYmluZGluZ3MuaHBwIgoKc3RhdGljIGlubGluZSBpbnQ2NF90CmpzX2FycmF5X2xlbmd0aChKU0NvbnRleHQqIGN0eCwgY29uc3QgSlNWYWx1ZUNvbnN0JiBhcnIpIHsKICBpbnQ2NF90IHJldCA9IC0xOwogIGlmKGpzX2lzX2FycmF5KGN0eCwgYXJyKSkgewogICAgdWludDMyX3QgbGVuOwogICAgSlNWYWx1ZSB2ID0gSlNfR2V0UHJvcGVydHlTdHIoY3R4LCBhcnIsICJsZW5ndGgiKTsKICAgIEpTX1RvVWludDMyKGN0eCwgJmxlbiwgdik7CiAgICBKU19GcmVlVmFsdWUoY3R4LCB2KTsKICAgIHJldCA9IGxlbjsKICB9CiAgcmV0dXJuIHJldDsKfQoKZXh0ZXJuICJDIiBpbnQgSlNfRGVsZXRlUHJvcGVydHlJbnQ2NChKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IG9iaiwgaW50NjRfdCBpZHgsIGludCBmbGFncyk7CgpzdGF0aWMgaW5saW5lIGludDY0X3QKanNfYXJyYXlfdHJ1bmNhdGUoSlNDb250ZXh0KiBjdHgsIGNvbnN0IEpTVmFsdWVDb25zdCYgYXJyLCBpbnQ2NF90IGxlbikgewogIGludDY0X3QgbmV3bGVuID0gLTE7CiAgaWYoanNfaXNfYXJyYXkoY3R4LCBhcnIpKSB7CiAgICBpbnQ2NF90IHRvcCA9IGpzX2FycmF5X2xlbmd0aChjdHgsIGFycik7CiAgICBuZXdsZW4gPSBzdGQ6Om1pbih0b3AsIGxlbiA8IDAgPyB0b3AgKyBsZW4gOiBsZW4pOwogICAgd2hpbGUoLS10b3AgPj0gbmV3bGVuKSBKU19EZWxldGVQcm9wZXJ0eUludDY0KGN0eCwgYXJyLCB0b3AsIDApOwogICAgSlNfU2V0UHJvcGVydHlTdHIoY3R4LCBhcnIsICJsZW5ndGgiLCBKU19OZXdJbnQ2NChjdHgsIG5ld2xlbikpOwogIH0KICByZXR1cm4gbmV3bGVuOwp9CgpjbGFzcyBqc19hcnJheV9pdGVyYXRvciA6IHB1YmxpYyBzdGQ6Oml0ZXJhdG9yPHN0ZDo6aW5wdXRfaXRlcmF0b3JfdGFnLCBKU1ZhbHVlPiB7CnB1YmxpYzoKICBqc19hcnJheV9pdGVyYXRvcihKU0NvbnRleHQqIGMsIGNvbnN0IEpTVmFsdWVDb25zdCYgYSwgY29uc3Qgc2l6ZV90IGkgPSAwKSA6IGN0eChjKSwgYXJyYXkoJmEpLCBwb3MoaSkge30KCiAgdmFsdWVfdHlwZQogIG9wZXJhdG9yKigpIGNvbnN0IHsKICAgIHJldHVybiBKU19HZXRQcm9wZXJ0eVVpbnQzMihjdHgsICphcnJheSwgcG9zKTsKICB9CgogIGpzX2FycmF5X2l0ZXJhdG9yJgogIG9wZXJhdG9yKysoKSB7CiAgICArK3RoaXMtPnBvczsKICAgIHJldHVybiAqdGhpczsKICB9CgogIGpzX2FycmF5X2l0ZXJhdG9yCiAgb3BlcmF0b3IrKyhpbnQpIHsKICAgIGpzX2FycmF5X2l0ZXJhdG9yIHRlbXAoKnRoaXMpOwogICAgKysoKnRoaXMpOwogICAgcmV0dXJuIHRlbXA7CiAgfQoKICBib29sCiAgb3BlcmF0b3I9PShjb25zdCBqc19hcnJheV9pdGVyYXRvciYgcmhzKSB7CiAgICByZXR1cm4gYXJyYXkgPT0gcmhzLmFycmF5ICYmIHBvcyA9PSByaHMucG9zOwogIH0KCiAgYm9vbAogIG9wZXJhdG9yIT0oY29uc3QganNfYXJyYXlfaXRlcmF0b3ImIHJocykgewogICAgcmV0dXJuICFvcGVyYXRvcj09KHJocyk7CiAgfQoKcHJpdmF0ZToKICBKU0NvbnRleHQqIGN0eDsKICBjb25zdCBKU1ZhbHVlQ29uc3QqIGFycmF5OwogIGRpZmZlcmVuY2VfdHlwZSBwb3M7Cn07CgpzdGF0aWMgaW5saW5lIGpzX2FycmF5X2l0ZXJhdG9yCmpzX2JlZ2luKEpTQ29udGV4dCogYywgY29uc3QgSlNWYWx1ZUNvbnN0JiBhKSB7CiAgcmV0dXJuIGpzX2FycmF5X2l0ZXJhdG9yKGMsIGEsIDApOwp9CgpzdGF0aWMgaW5saW5lIGpzX2FycmF5X2l0ZXJhdG9yCmpzX2VuZChKU0NvbnRleHQqIGMsIGNvbnN0IEpTVmFsdWVDb25zdCYgYSkgewogIHJldHVybiBqc19hcnJheV9pdGVyYXRvcihjLCBhLCBqc19hcnJheV9sZW5ndGgoYywgYSkpOwp9Cgp0ZW1wbGF0ZTxjbGFzcyBUPiBjbGFzcyBqc19hcnJheSB7CnB1YmxpYzoKICBzdGF0aWMgaW50NjRfdAogIHRvX3ZlY3RvcihKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IGFyciwgc3RkOjp2ZWN0b3I8VD4mIG91dCkgewogICAgaW50NjRfdCBpLCBuOwogICAgSlNWYWx1ZSBsZW47CiAgICBpZighanNfaXNfYXJyYXkoY3R4LCBhcnIpKQogICAgICByZXR1cm4gLTE7CiAgICBsZW4gPSBKU19HZXRQcm9wZXJ0eVN0cihjdHgsIGFyciwgImxlbmd0aCIpOwogICAgSlNfVG9JbnQ2NChjdHgsICZuLCBsZW4pOwogICAgb3V0LnJlc2VydmUob3V0LnNpemUoKSArIG4pOwogICAgZm9yKGkgPSAwOyBpIDwgbjsgaSsrKSB7CiAgICAgIGRvdWJsZSB2YWx1ZTsKICAgICAgSlNWYWx1ZSBpdGVtID0gSlNfR2V0UHJvcGVydHlVaW50MzIoY3R4LCBhcnIsICh1aW50MzJfdClpKTsKICAgICAgaWYoSlNfVG9GbG9hdDY0KGN0eCwgJnZhbHVlLCBpdGVtKSA9PSAtMSkgewogICAgICAgIEpTX0ZyZWVWYWx1ZShjdHgsIGl0ZW0pOwogICAgICAgIG91dC5jbGVhcigpOwogICAgICAgIHJldHVybiAtMTsKICAgICAgfQogICAgICBvdXQucHVzaF9iYWNrKHZhbHVlKTsKICAgICAgSlNfRnJlZVZhbHVlKGN0eCwgaXRlbSk7CiAgICB9CiAgICByZXR1cm4gbjsKICB9CgogIHRlbXBsYXRlPGNsYXNzIENvbnRhaW5lcj4KICBzdGF0aWMgSlNWYWx1ZQogIGZyb20oSlNDb250ZXh0KiBjdHgsIGNvbnN0IENvbnRhaW5lciYgaW4pIHsKICAgIHJldHVybiBmcm9tX3NlcXVlbmNlPHR5cGVuYW1lIENvbnRhaW5lcjo6Y29uc3RfaXRlcmF0b3I+KGN0eCwgaW4uYmVnaW4oKSwgaW4uZW5kKCkpOwogIH0KCiAgc3RhdGljIEpTVmFsdWUKICBmcm9tX3ZlY3RvcihKU0NvbnRleHQqIGN0eCwgY29uc3Qgc3RkOjp2ZWN0b3I8VD4mIGluKSB7CiAgICByZXR1cm4gZnJvbV9zZXF1ZW5jZShjdHgsIGluLmJlZ2luKCksIGluLmVuZCgpKTsKICB9CgogIHRlbXBsYXRlPGNsYXNzIEl0ZXJhdG9yPgogc3RhdGljICBKU1ZhbHVlCiAgZnJvbV9zZXF1ZW5jZShKU0NvbnRleHQqIGN0eCwgY29uc3QgSXRlcmF0b3ImIHN0YXJ0LCBjb25zdCBJdGVyYXRvciYgZW5kIC8qLAogICAgdHlwZW5hbWUgIHN0ZDo6ZW5hYmxlX2lmPHBvaW50ZXJfdHlwZTxJdGVyYXRvcj46OnR5cGVkX2FycmF5ID46OnR5cGUqIGR1bW15ID0gMCovKSB7CiAgICBKU1ZhbHVlIGFyciA9IEpTX05ld0FycmF5KGN0eCk7CiAgICBzaXplX3QgaSA9IDA7CiAgICBmb3IoSXRlcmF0b3IgaXQgPSBzdGFydDsgaXQgIT0gZW5kOyArK2l0KSB7CiAgICAgIEpTVmFsdWUgaXRlbSA9IGpzX3ZhbHVlX2Zyb20oY3R4LCAqaXQpOwogICAgICBKU19TZXRQcm9wZXJ0eVVpbnQzMihjdHgsIGFyciwgaSwgaXRlbSk7CiAgICAgICsraTsKICAgIH0KICAgIHJldHVybiBhcnI7CiAgfQoKICB0ZW1wbGF0ZTxzaXplX3QgTj4gc3RhdGljIGludDY0X3QgdG9fYXJyYXkoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCBhcnIsIHN0ZDo6YXJyYXk8VCwgTj4mIG91dCk7CiAgc3RhdGljIGludDY0X3QgdG9fc2NhbGFyKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgYXJyLCBjdjo6U2NhbGFyXzxUPiYgb3V0KTsKfTsKCnRlbXBsYXRlPGNsYXNzIFQ+CnRlbXBsYXRlPHNpemVfdCBOPgppbnQ2NF90CmpzX2FycmF5PFQ+Ojp0b19hcnJheShKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IGFyciwgc3RkOjphcnJheTxULCBOPiYgb3V0KSB7CiAgc3RkOjp2ZWN0b3I8VD4gdG1wOwogIHRvX3ZlY3RvcihjdHgsIGFyciwgdG1wKTsKICBpZih0bXAuc2l6ZSgpIDwgTikKICAgIHJldHVybiAtMTsKICBmb3Ioc2l6ZV90IGkgPSAwOyBpIDwgTjsgaSsrKSBvdXRbaV0gPSB0bXBbaV07CiAgcmV0dXJuIE47Cn0KCnRlbXBsYXRlPGNsYXNzIFQ+CmludDY0X3QKanNfYXJyYXk8VD46OnRvX3NjYWxhcihKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IGFyciwgY3Y6OlNjYWxhcl88VD4mIG91dCkgewogIHNpemVfdCBuOwogIHN0ZDo6dmVjdG9yPFQ+IHRtcDsKICB0b192ZWN0b3IoY3R4LCBhcnIsIHRtcCk7CiAgaWYoKG4gPSB0bXAuc2l6ZSgpKSA8IDQpCiAgICB0bXAucmVzaXplKDQpOwogIGZvcihzaXplX3QgaSA9IDA7IGkgPCA0OyBpKyspIG91dFtpXSA9IHRtcFtpXTsKICByZXR1cm4gbjsKfQoKdGVtcGxhdGU8PiBjbGFzcyBqc19hcnJheTx1aW50MzJfdD4gewpwdWJsaWM6CiAgc3RhdGljIGludDY0X3QKICB0b192ZWN0b3IoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCBhcnIsIHN0ZDo6dmVjdG9yPHVpbnQzMl90PiYgb3V0KSB7CiAgICBpbnQ2NF90IGksIG47CiAgICBKU1ZhbHVlIGxlbjsKICAgIGlmKCFqc19pc19hcnJheShjdHgsIGFycikpCiAgICAgIHJldHVybiAtMTsKICAgIGxlbiA9IEpTX0dldFByb3BlcnR5U3RyKGN0eCwgYXJyLCAibGVuZ3RoIik7CiAgICBKU19Ub0ludDY0KGN0eCwgJm4sIGxlbik7CiAgICBvdXQucmVzZXJ2ZShvdXQuc2l6ZSgpICsgbik7CiAgICBmb3IoaSA9IDA7IGkgPCBuOyBpKyspIHsKICAgICAgSlNWYWx1ZSB2YWx1ZSA9IEpTX0dldFByb3BlcnR5VWludDMyKGN0eCwgYXJyLCAodWludDMyX3QpaSk7CiAgICAgIHVpbnQzMl90IHU7CiAgICAgIEpTX1RvVWludDMyKGN0eCwgJnUsIHZhbHVlKTsKICAgICAgb3V0LnB1c2hfYmFjayh1KTsKICAgIH0KICAgIHJldHVybiBuOwogIH0KCiAgdGVtcGxhdGU8Y2xhc3MgSXRlcmF0b3I+CiAgc3RhdGljIEpTVmFsdWUKICBmcm9tX3NlcXVlbmNlKEpTQ29udGV4dCogY3R4LCBjb25zdCBJdGVyYXRvciYgc3RhcnQsIGNvbnN0IEl0ZXJhdG9yJiBlbmQpIHsKICAgIEpTVmFsdWUgYXJyID0gSlNfTmV3QXJyYXkoY3R4KTsKICAgIHNpemVfdCBpID0gMDsKICAgIGZvcihJdGVyYXRvciBpdCA9IHN0YXJ0OyBpdCAhPSBlbmQ7ICsraXQpIHsKICAgICAgdWludDMyX3QgdSA9ICppdDsKICAgICAgSlNfU2V0UHJvcGVydHlVaW50MzIoY3R4LCBhcnIsIGksIEpTX05ld1VpbnQzMihjdHgsIHUpKTsKICAgICAgKytpOwogICAgfQogICAgcmV0dXJuIGFycjsKICB9CgogIHRlbXBsYXRlPHNpemVfdCBOPiBzdGF0aWMgaW50NjRfdCB0b19hcnJheShKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IGFyciwgc3RkOjphcnJheTx1aW50MzJfdCwgTj4mIG91dCk7Cn07Cgp0ZW1wbGF0ZTxzaXplX3QgTj4KaW50NjRfdApqc19hcnJheTx1aW50MzJfdD46OnRvX2FycmF5KEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgYXJyLCBzdGQ6OmFycmF5PHVpbnQzMl90LCBOPiYgb3V0KSB7CiAgaW50NjRfdCBpOwogIGlmKCFqc19pc19hcnJheShjdHgsIGFycikpCiAgICByZXR1cm4gLTE7CiAgZm9yKGkgPSAwOyBpIDwgTjsgaSsrKSB7CiAgICBKU1ZhbHVlIHZhbHVlID0gSlNfR2V0UHJvcGVydHlVaW50MzIoY3R4LCBhcnIsICh1aW50MzJfdClpKTsKICAgIHVpbnQzMl90IHU7CiAgICBKU19Ub1VpbnQzMihjdHgsICZ1LCB2YWx1ZSk7CiAgICBvdXRbaV0gPSB1OwogIH0KICByZXR1cm4gaTsKfQoKdGVtcGxhdGU8PiBjbGFzcyBqc19hcnJheTxKU1ZhbHVlPiB7CnB1YmxpYzoKICBzdGF0aWMgaW50NjRfdAogIHRvX3ZlY3RvcihKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IGFyciwgc3RkOjp2ZWN0b3I8SlNWYWx1ZT4mIG91dCkgewogICAgaW50NjRfdCBpLCBuOwogICAgSlNWYWx1ZSBsZW47CiAgICBpZighanNfaXNfYXJyYXkoY3R4LCBhcnIpKQogICAgICByZXR1cm4gLTE7CiAgICBsZW4gPSBKU19HZXRQcm9wZXJ0eVN0cihjdHgsIGFyciwgImxlbmd0aCIpOwogICAgSlNfVG9JbnQ2NChjdHgsICZuLCBsZW4pOwogICAgb3V0LnJlc2VydmUob3V0LnNpemUoKSArIG4pOwogICAgZm9yKGkgPSAwOyBpIDwgbjsgaSsrKSB7CiAgICAgIEpTVmFsdWUgdmFsdWUgPSBKU19HZXRQcm9wZXJ0eVVpbnQzMihjdHgsIGFyciwgKHVpbnQzMl90KWkpOwogICAgICBvdXQucHVzaF9iYWNrKHZhbHVlKTsKICAgIH0KICAgIHJldHVybiBuOwogIH0KCiAgdGVtcGxhdGU8Y2xhc3MgSXRlcmF0b3I+CiAgc3RhdGljIEpTVmFsdWUKICBmcm9tX3NlcXVlbmNlKEpTQ29udGV4dCogY3R4LCBjb25zdCBJdGVyYXRvciYgc3RhcnQsIGNvbnN0IEl0ZXJhdG9yJiBlbmQpIHsKICAgIEpTVmFsdWUgYXJyID0gSlNfTmV3QXJyYXkoY3R4KTsKICAgIHNpemVfdCBpID0gMDsKICAgIGZvcihJdGVyYXRvciBpdCA9IHN0YXJ0OyBpdCAhPSBlbmQ7ICsraXQpIHsKICAgICAgSlNfU2V0UHJvcGVydHlVaW50MzIoY3R4LCBhcnIsIGksICppdCk7CiAgICAgICsraTsKICAgIH0KICAgIHJldHVybiBhcnI7CiAgfQoKICB0ZW1wbGF0ZTxzaXplX3QgTj4gc3RhdGljIGludDY0X3QgdG9fYXJyYXkoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCBhcnIsIHN0ZDo6YXJyYXk8SlNWYWx1ZSwgTj4mIG91dCk7Cn07Cgp0ZW1wbGF0ZTxzaXplX3QgTj4KaW50NjRfdApqc19hcnJheTxKU1ZhbHVlPjo6dG9fYXJyYXkoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCBhcnIsIHN0ZDo6YXJyYXk8SlNWYWx1ZSwgTj4mIG91dCkgewogIGludDY0X3QgaTsKICBpZighanNfaXNfYXJyYXkoY3R4LCBhcnIpKQogICAgcmV0dXJuIC0xOwogIGZvcihpID0gMDsgaSA8IE47IGkrKykgewogICAgSlNWYWx1ZSB2YWx1ZSA9IEpTX0dldFByb3BlcnR5VWludDMyKGN0eCwgYXJyLCAodWludDMyX3QpaSk7CiAgICBvdXRbaV0gPSB2YWx1ZTsKICB9CiAgcmV0dXJuIGk7Cn0KCnRlbXBsYXRlPGNsYXNzIFQ+IGNsYXNzIGpzX2FycmF5PEpTQ29sb3JEYXRhPFQ+PiB7CnB1YmxpYzoKICBzdGF0aWMgaW50NjRfdAogIHRvX3ZlY3RvcihKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IGFyciwgc3RkOjp2ZWN0b3I8SlNDb2xvckRhdGE8VD4+JiBvdXQpIHsKICAgIGludDY0X3QgaSwgbjsKICAgIEpTVmFsdWUgbGVuOwogICAgaWYoIWpzX2lzX2FycmF5KGN0eCwgYXJyKSkKICAgICAgcmV0dXJuIC0xOwogICAgbGVuID0gSlNfR2V0UHJvcGVydHlTdHIoY3R4LCBhcnIsICJsZW5ndGgiKTsKICAgIEpTX1RvSW50NjQoY3R4LCAmbiwgbGVuKTsKICAgIG91dC5yZXNlcnZlKG91dC5zaXplKCkgKyBuKTsKICAgIGZvcihpID0gMDsgaSA8IG47IGkrKykgewogICAgICBKU0NvbG9yRGF0YTxUPiB2YWx1ZTsKICAgICAgSlNWYWx1ZSBpdGVtID0gSlNfR2V0UHJvcGVydHlVaW50MzIoY3R4LCBhcnIsICh1aW50MzJfdClpKTsKICAgICAgaWYoIWpzX2NvbG9yX3JlYWQoY3R4LCBpdGVtLCAmdmFsdWUpKSB7CiAgICAgICAgSlNfRnJlZVZhbHVlKGN0eCwgaXRlbSk7CiAgICAgICAgb3V0LmNsZWFyKCk7CiAgICAgICAgcmV0dXJuIC0xOwogICAgICB9CiAgICAgIG91dC5wdXNoX2JhY2sodmFsdWUpOwogICAgICBKU19GcmVlVmFsdWUoY3R4LCBpdGVtKTsKICAgIH0KICAgIHJldHVybiBuOwogIH0KCiAgdGVtcGxhdGU8Y2xhc3MgSXRlcmF0b3I+CiAgc3RhdGljIEpTVmFsdWUKICBmcm9tX3NlcXVlbmNlKEpTQ29udGV4dCogY3R4LCBjb25zdCBJdGVyYXRvciYgc3RhcnQsIGNvbnN0IEl0ZXJhdG9yJiBlbmQpIHsKICAgIEpTVmFsdWUgYXJyID0gSlNfTmV3QXJyYXkoY3R4KTsKICAgIHNpemVfdCBpID0gMDsKICAgIGZvcihJdGVyYXRvciBpdCA9IHN0YXJ0OyBpdCAhPSBlbmQ7ICsraXQpIHsKICAgICAgSlNfU2V0UHJvcGVydHlVaW50MzIoY3R4LCBhcnIsIGksIGpzX2NvbG9yX25ldyhjdHgsICppdCkpOwogICAgICArK2k7CiAgICB9CiAgICByZXR1cm4gYXJyOwogIH0KCiAgdGVtcGxhdGU8c2l6ZV90IE4+IHN0YXRpYyBpbnQ2NF90IHRvX2FycmF5KEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgYXJyLCBzdGQ6OmFycmF5PEpTQ29sb3JEYXRhPFQ+LCBOPiYgb3V0KTsKfTsKCnRlbXBsYXRlPGNsYXNzIFQ+CnRlbXBsYXRlPHNpemVfdCBOPgppbnQ2NF90CmpzX2FycmF5PEpTQ29sb3JEYXRhPFQ+Pjo6dG9fYXJyYXkoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCBhcnIsIHN0ZDo6YXJyYXk8SlNDb2xvckRhdGE8VD4sIE4+JiBvdXQpIHsKICB1aW50MzJfdCBpOwogIGlmKCFqc19pc19hcnJheShjdHgsIGFycikpCiAgICByZXR1cm4gLTE7CiAgZm9yKGkgPSAwOyBpIDwgTjsgaSsrKSB7CiAgICBKU1ZhbHVlIHZhbHVlID0gSlNfR2V0UHJvcGVydHlVaW50MzIoY3R4LCBhcnIsIGkpOwogICAganNfY29sb3JfcmVhZChjdHgsIHZhbHVlLCAmb3V0W2ldKTsKICB9CiAgcmV0dXJuIGk7Cn0KCiNpbmNsdWRlICJqc19wb2ludC5ocHAiCgp0ZW1wbGF0ZTxjbGFzcyBUPiBjbGFzcyBqc19hcnJheTxKU1BvaW50RGF0YTxUPj4gewpwdWJsaWM6CiAgc3RhdGljIGludDY0X3QKICB0b192ZWN0b3IoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCBhcnIsIEpTQ29udG91ckRhdGE8VD4mIG91dCkgewogICAgaW50NjRfdCBpLCBuOwogICAgSlNWYWx1ZSBsZW47CiAgICBpZighanNfaXNfYXJyYXkoY3R4LCBhcnIpKQogICAgICByZXR1cm4gLTE7CiAgICBsZW4gPSBKU19HZXRQcm9wZXJ0eVN0cihjdHgsIGFyciwgImxlbmd0aCIpOwogICAgSlNfVG9JbnQ2NChjdHgsICZuLCBsZW4pOwogICAgb3V0LnJlc2VydmUob3V0LnNpemUoKSArIG4pOwogICAgZm9yKGkgPSAwOyBpIDwgbjsgaSsrKSB7CiAgICAgIEpTUG9pbnREYXRhPGRvdWJsZT4gdmFsdWU7CiAgICAgIEpTVmFsdWUgaXRlbSA9IEpTX0dldFByb3BlcnR5VWludDMyKGN0eCwgYXJyLCAodWludDMyX3QpaSk7CiAgICAgIGlmKCFqc19wb2ludF9yZWFkKGN0eCwgaXRlbSwgJnZhbHVlKSkgewogICAgICAgIEpTX0ZyZWVWYWx1ZShjdHgsIGl0ZW0pOwogICAgICAgIG91dC5jbGVhcigpOwogICAgICAgIHJldHVybiAtMTsKICAgICAgfQogICAgICBvdXQucHVzaF9iYWNrKHZhbHVlKTsKICAgICAgSlNfRnJlZVZhbHVlKGN0eCwgaXRlbSk7CiAgICB9CiAgICByZXR1cm4gbjsKICB9CgogIHRlbXBsYXRlPGNsYXNzIEl0ZXJhdG9yPgogIHN0YXRpYyBKU1ZhbHVlCiAgZnJvbV9zZXF1ZW5jZShKU0NvbnRleHQqIGN0eCwgY29uc3QgSXRlcmF0b3ImIHN0YXJ0LCBjb25zdCBJdGVyYXRvciYgZW5kKSB7CiAgICBKU1ZhbHVlIGFyciA9IEpTX05ld0FycmF5KGN0eCk7CiAgICBzaXplX3QgaSA9IDA7CiAgICBmb3IoSXRlcmF0b3IgaXQgPSBzdGFydDsgaXQgIT0gZW5kOyArK2l0KSB7CiAgICAgIEpTX1NldFByb3BlcnR5VWludDMyKGN0eCwgYXJyLCBpLCBqc19wb2ludF93cmFwKGN0eCwgKml0KSk7CiAgICAgICsraTsKICAgIH0KICAgIHJldHVybiBhcnI7CiAgfQoKICB0ZW1wbGF0ZTxzaXplX3QgTj4gc3RhdGljIGludDY0X3QgdG9fYXJyYXkoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCBhcnIsIHN0ZDo6YXJyYXk8Y3Y6Ok1hdCwgTj4mIG91dCk7Cn07Cgp0ZW1wbGF0ZTxjbGFzcyBUPiBjbGFzcyBqc19hcnJheTxKU1JlY3REYXRhPFQ+PiB7CnB1YmxpYzoKICBzdGF0aWMgaW50NjRfdAogIHRvX3ZlY3RvcihKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IGFyciwgc3RkOjp2ZWN0b3I8SlNSZWN0RGF0YTxUPj4mIG91dCkgewogICAgaW50NjRfdCBpLCBuOwogICAgSlNWYWx1ZSBsZW47CiAgICBpZighanNfaXNfYXJyYXkoY3R4LCBhcnIpKQogICAgICByZXR1cm4gLTE7CiAgICBsZW4gPSBKU19HZXRQcm9wZXJ0eVN0cihjdHgsIGFyciwgImxlbmd0aCIpOwogICAgSlNfVG9JbnQ2NChjdHgsICZuLCBsZW4pOwogICAgb3V0LnJlc2VydmUob3V0LnNpemUoKSArIG4pOwogICAgZm9yKGkgPSAwOyBpIDwgbjsgaSsrKSB7CiAgICAgIEpTUmVjdERhdGE8VD4gdmFsdWU7CiAgICAgIEpTVmFsdWUgaXRlbSA9IEpTX0dldFByb3BlcnR5VWludDMyKGN0eCwgYXJyLCAodWludDMyX3QpaSk7CiAgICAgIGlmKCFqc19yZWN0X3JlYWQoY3R4LCBpdGVtLCAmdmFsdWUpKSB7CiAgICAgICAgSlNfRnJlZVZhbHVlKGN0eCwgaXRlbSk7CiAgICAgICAgb3V0LmNsZWFyKCk7CiAgICAgICAgcmV0dXJuIC0xOwogICAgICB9CiAgICAgIG91dC5wdXNoX2JhY2sodmFsdWUpOwogICAgICBKU19GcmVlVmFsdWUoY3R4LCBpdGVtKTsKICAgIH0KICAgIHJldHVybiBuOwogIH0KCiAgdGVtcGxhdGU8Y2xhc3MgSXRlcmF0b3I+CiAgc3RhdGljIEpTVmFsdWUKICBmcm9tX3NlcXVlbmNlKEpTQ29udGV4dCogY3R4LCBjb25zdCBJdGVyYXRvciYgc3RhcnQsIGNvbnN0IEl0ZXJhdG9yJiBlbmQpIHsKICAgIEpTVmFsdWUgYXJyID0gSlNfTmV3QXJyYXkoY3R4KTsKICAgIHNpemVfdCBpID0gMDsKICAgIGZvcihJdGVyYXRvciBpdCA9IHN0YXJ0OyBpdCAhPSBlbmQ7ICsraXQpIHsKICAgICAgSlNfU2V0UHJvcGVydHlVaW50MzIoY3R4LCBhcnIsIGksIGpzX3JlY3Rfd3JhcChjdHgsICppdCkpOwogICAgICArK2k7CiAgICB9CiAgICByZXR1cm4gYXJyOwogIH0KCiAgdGVtcGxhdGU8c2l6ZV90IE4+IHN0YXRpYyBpbnQ2NF90IHRvX2FycmF5KEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgYXJyLCBzdGQ6OmFycmF5PEpTUmVjdERhdGE8VD4sIE4+JiBvdXQpOwp9OwoKdGVtcGxhdGU8PiBjbGFzcyBqc19hcnJheTxkb3VibGU+IHsKcHVibGljOgogIHN0YXRpYyBpbnQ2NF90CiAgdG9fdmVjdG9yKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgYXJyLCBzdGQ6OnZlY3Rvcjxkb3VibGU+JiBvdXQpIHsKICAgIGludDY0X3QgaSwgbjsKICAgIEpTVmFsdWUgbGVuOwogICAgaWYoIWpzX2lzX2FycmF5KGN0eCwgYXJyKSkKICAgICAgcmV0dXJuIC0xOwogICAgbGVuID0gSlNfR2V0UHJvcGVydHlTdHIoY3R4LCBhcnIsICJsZW5ndGgiKTsKICAgIEpTX1RvSW50NjQoY3R4LCAmbiwgbGVuKTsKICAgIG91dC5yZXNlcnZlKG91dC5zaXplKCkgKyBuKTsKICAgIGZvcihpID0gMDsgaSA8IG47IGkrKykgewogICAgICBkb3VibGUgdmFsdWU7CiAgICAgIEpTVmFsdWUgaXRlbSA9IEpTX0dldFByb3BlcnR5VWludDMyKGN0eCwgYXJyLCAodWludDMyX3QpaSk7CiAgICAgIGlmKEpTX1RvRmxvYXQ2NChjdHgsICZ2YWx1ZSwgaXRlbSkpIHsKICAgICAgICBKU19GcmVlVmFsdWUoY3R4LCBpdGVtKTsKICAgICAgICBvdXQuY2xlYXIoKTsKICAgICAgICByZXR1cm4gLTE7CiAgICAgIH0KICAgICAgb3V0LnB1c2hfYmFjayh2YWx1ZSk7CiAgICAgIEpTX0ZyZWVWYWx1ZShjdHgsIGl0ZW0pOwogICAgfQogICAgcmV0dXJuIG47CiAgfQoKICB0ZW1wbGF0ZTxjbGFzcyBJdGVyYXRvcj4KICBzdGF0aWMgSlNWYWx1ZQogIGZyb21fc2VxdWVuY2UoSlNDb250ZXh0KiBjdHgsIGNvbnN0IEl0ZXJhdG9yJiBzdGFydCwgY29uc3QgSXRlcmF0b3ImIGVuZCkgewogICAgSlNWYWx1ZSBhcnIgPSBKU19OZXdBcnJheShjdHgpOwogICAgc2l6ZV90IGkgPSAwOwogICAgZm9yKEl0ZXJhdG9yIGl0ID0gc3RhcnQ7IGl0ICE9IGVuZDsgKytpdCkgewogICAgICBKU1ZhbHVlIGl0ZW0gPSBKU19OZXdGbG9hdDY0KGN0eCwgKml0KTsKICAgICAgSlNfU2V0UHJvcGVydHlVaW50MzIoY3R4LCBhcnIsIGksIGl0ZW0pOwogICAgICArK2k7CiAgICB9CiAgICByZXR1cm4gYXJyOwogIH0KCiAgc3RhdGljIGludDY0X3QKICB0b19zY2FsYXIoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCBhcnIsIGN2OjpTY2FsYXJfPGRvdWJsZT4mIG91dCkgewogICAgc3RkOjp2ZWN0b3I8ZG91YmxlPiB0bXA7CiAgICBzaXplX3QgbjsKICAgIHRvX3ZlY3RvcihjdHgsIGFyciwgdG1wKTsKICAgIG4gPSB0bXAuc2l6ZSgpOwoKICAgIGZvcihzaXplX3QgaSA9IDA7IGkgPCA0OyBpKyspIG91dFtpXSA9IHRtcFtpXTsKICAgIHJldHVybiBuOwogIH0KCiAgdGVtcGxhdGU8c2l6ZV90IE4+CiAgc3RhdGljIGludDY0X3QKICB0b19hcnJheShKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IGFyciwgc3RkOjphcnJheTxkb3VibGUsIE4+JiBvdXQpIHsKICAgIHN0ZDo6dmVjdG9yPGRvdWJsZT4gdG1wOwogICAgdG9fdmVjdG9yKGN0eCwgYXJyLCB0bXApOwoKICAgIGZvcihzaXplX3QgaSA9IDA7IGkgPCBOOyBpKyspIG91dFtpXSA9IHRtcFtpXTsKICAgIHJldHVybiBOOwogIH0KfTsKCnRlbXBsYXRlPD4gY2xhc3MganNfYXJyYXk8Y3Y6Ok1hdD4gewpwdWJsaWM6CiAgc3RhdGljIGludDY0X3QKICB0b192ZWN0b3IoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCBhcnIsIHN0ZDo6dmVjdG9yPGN2OjpNYXQ+JiBvdXQpIHsKICAgIGludDY0X3QgaSwgbjsKICAgIEpTVmFsdWUgbGVuOwogICAgaWYoIWpzX2lzX2FycmF5KGN0eCwgYXJyKSkKICAgICAgcmV0dXJuIC0xOwogICAgbGVuID0gSlNfR2V0UHJvcGVydHlTdHIoY3R4LCBhcnIsICJsZW5ndGgiKTsKICAgIEpTX1RvSW50NjQoY3R4LCAmbiwgbGVuKTsKICAgIG91dC5yZXNlcnZlKG91dC5zaXplKCkgKyBuKTsKICAgIGZvcihpID0gMDsgaSA8IG47IGkrKykgewogICAgICBKU01hdERhdGEqIHZhbHVlOwogICAgICBKU1ZhbHVlIGl0ZW0gPSBKU19HZXRQcm9wZXJ0eVVpbnQzMihjdHgsIGFyciwgKHVpbnQzMl90KWkpOwogICAgICB2YWx1ZSA9IGpzX21hdF9kYXRhKGN0eCwgaXRlbSk7CiAgICAgIGlmKHZhbHVlID09IG51bGxwdHIpIHsKICAgICAgICBKU19GcmVlVmFsdWUoY3R4LCBpdGVtKTsKICAgICAgICBvdXQuY2xlYXIoKTsKICAgICAgICByZXR1cm4gLTE7CiAgICAgIH0KICAgICAgb3V0LnB1c2hfYmFjaygqdmFsdWUpOwogICAgICBKU19GcmVlVmFsdWUoY3R4LCBpdGVtKTsKICAgIH0KICAgIHJldHVybiBuOwogIH0KCiAgdGVtcGxhdGU8c2l6ZV90IE4+IHN0YXRpYyBpbnQ2NF90IHRvX2FycmF5KEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgYXJyLCBzdGQ6OmFycmF5PGN2OjpNYXQsIE4+JiBvdXQpOwp9OwoKdGVtcGxhdGU8Y2xhc3MgVD4gY2xhc3MganNfYXJyYXk8SlNDb250b3VyRGF0YTxUPj4gewpwdWJsaWM6CiAgdHlwZWRlZiBKU0NvbnRvdXJEYXRhPFQ+IGNvbnRvdXJfdHlwZTsKICB0eXBlZGVmIEpTUG9pbnREYXRhPFQ+IHBvaW50X3R5cGU7CgogIHN0YXRpYyBpbnQ2NF90CiAgdG9fdmVjdG9yKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgYXJyLCBzdGQ6OnZlY3Rvcjxjb250b3VyX3R5cGU+JiBvdXQpIHsKICAgIGludDY0X3QgaSwgbjsKICAgIEpTVmFsdWUgbGVuOwogICAgaWYoIWpzX2lzX2FycmF5KGN0eCwgYXJyKSkKICAgICAgcmV0dXJuIC0xOwogICAgbGVuID0gSlNfR2V0UHJvcGVydHlTdHIoY3R4LCBhcnIsICJsZW5ndGgiKTsKICAgIEpTX1RvSW50NjQoY3R4LCAmbiwgbGVuKTsKICAgIG91dC5yZXNlcnZlKG91dC5zaXplKCkgKyBuKTsKICAgIGZvcihpID0gMDsgaSA8IG47IGkrKykgewogICAgICBKU0NvbnRvdXJEYXRhPGRvdWJsZT4qIHB0cjsKICAgICAgY29udG91cl90eXBlIGNvbnRvdXI7CiAgICAgIEpTVmFsdWUgaXRlbSA9IEpTX0dldFByb3BlcnR5VWludDMyKGN0eCwgYXJyLCAodWludDMyX3QpaSk7CiAgICAgIGlmKChwdHIgPSBqc19jb250b3VyX2RhdGEoY3R4LCBpdGVtKSkpIHsKICAgICAgICBmb3IoY29uc3QgYXV0byYgcG9pbnQgOiAqcHRyKSBjb250b3VyLmVtcGxhY2VfYmFjayhwb2ludC54LCBwb2ludC55KTsKICAgICAgfSBlbHNlIHsKICAgICAgICBqc19hcnJheTxKU1BvaW50RGF0YTxUPj46OnRvX3ZlY3RvcihjdHgsIGl0ZW0sIGNvbnRvdXIpOwogICAgICB9CiAgICAgIG91dC5wdXNoX2JhY2soY29udG91cik7CiAgICAgIEpTX0ZyZWVWYWx1ZShjdHgsIGl0ZW0pOwogICAgfQogICAgcmV0dXJuIG47CiAgfQoKICB0ZW1wbGF0ZTxjbGFzcyBJdGVyYXRvcj4KICBzdGF0aWMgSlNWYWx1ZQogIGZyb21fc2VxdWVuY2UoSlNDb250ZXh0KiBjdHgsIGNvbnN0IEl0ZXJhdG9yJiBzdGFydCwgY29uc3QgSXRlcmF0b3ImIGVuZCkgewogICAgSlNWYWx1ZSBhcnIgPSBKU19OZXdBcnJheShjdHgpOwogICAgc2l6ZV90IGkgPSAwOwogICAgZm9yKEl0ZXJhdG9yIGl0ID0gc3RhcnQ7IGl0ICE9IGVuZDsgKytpdCkgewogICAgICBKU1ZhbHVlIGl0ZW0gPSBqc19jb250b3VyX25ldyhjdHgsICppdCk7CiAgICAgIEpTX1NldFByb3BlcnR5VWludDMyKGN0eCwgYXJyLCBpLCBpdGVtKTsKICAgICAgKytpOwogICAgfQogICAgcmV0dXJuIGFycjsKICB9CgogIHRlbXBsYXRlPGNsYXNzIENvbnRhaW5lcj4KICBzdGF0aWMgSlNWYWx1ZQogIGZyb20oSlNDb250ZXh0KiBjdHgsIGNvbnN0IENvbnRhaW5lciYgaW4pIHsKICAgIHJldHVybiBmcm9tX3NlcXVlbmNlPHR5cGVuYW1lIENvbnRhaW5lcjo6Y29uc3RfaXRlcmF0b3I+KGN0eCwgaW4uYmVnaW4oKSwgaW4uZW5kKCkpOwogIH0KfTsKCnRlbXBsYXRlPGNsYXNzIFQ+IGNsYXNzIGpzX2FycmF5PHN0ZDo6dmVjdG9yPFQ+PiB7CnB1YmxpYzoKICBzdGF0aWMgaW50NjRfdAogIHRvX3ZlY3RvcihKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IGFyciwgc3RkOjp2ZWN0b3I8c3RkOjp2ZWN0b3I8VD4+JiBvdXQpIHsKICAgIGludDY0X3QgaSwgbjsKICAgIEpTVmFsdWUgbGVuOwogICAgaWYoIWpzX2lzX2FycmF5KGN0eCwgYXJyKSkKICAgICAgcmV0dXJuIC0xOwogICAgbGVuID0gSlNfR2V0UHJvcGVydHlTdHIoY3R4LCBhcnIsICJsZW5ndGgiKTsKICAgIEpTX1RvSW50NjQoY3R4LCAmbiwgbGVuKTsKICAgIG91dC5yZXNlcnZlKG91dC5zaXplKCkgKyBuKTsKICAgIGZvcihpID0gMDsgaSA8IG47IGkrKykgewogICAgICBzdGQ6OnZlY3RvcjxUPiB2YWx1ZTsKICAgICAgSlNWYWx1ZSBpdGVtID0gSlNfR2V0UHJvcGVydHlVaW50MzIoY3R4LCBhcnIsICh1aW50MzJfdClpKTsKICAgICAgaWYoanNfYXJyYXk8VD46OnRvX3ZlY3RvcihjdHgsIGFyciwgdmFsdWUpID09IC0xKSB7CiAgICAgICAgSlNfRnJlZVZhbHVlKGN0eCwgaXRlbSk7CiAgICAgICAgb3V0LmNsZWFyKCk7CiAgICAgICAgcmV0dXJuIC0xOwogICAgICB9CiAgICAgIG91dC5wdXNoX2JhY2sodmFsdWUpOwogICAgICBKU19GcmVlVmFsdWUoY3R4LCBpdGVtKTsKICAgIH0KICAgIHJldHVybiBuOwogIH0KCiAgdGVtcGxhdGU8Y2xhc3MgSXRlcmF0b3I+CiAgc3RhdGljIEpTVmFsdWUKICBmcm9tX3NlcXVlbmNlKEpTQ29udGV4dCogY3R4LCBjb25zdCBJdGVyYXRvciYgc3RhcnQsIGNvbnN0IEl0ZXJhdG9yJiBlbmQpIHsKICAgIEpTVmFsdWUgYXJyID0gSlNfTmV3QXJyYXkoY3R4KTsKICAgIHNpemVfdCBpID0gMDsKICAgIGZvcihJdGVyYXRvciBpdCA9IHN0YXJ0OyBpdCAhPSBlbmQ7ICsraXQpIHsKICAgICAgSlNWYWx1ZSBpdGVtID0ganNfYXJyYXlfZnJvbShjdHgsICppdCk7CiAgICAgIEpTX1NldFByb3BlcnR5VWludDMyKGN0eCwgYXJyLCBpLCBpdGVtKTsKICAgICAgKytpOwogICAgfQogICAgcmV0dXJuIGFycjsKICB9CgogIHRlbXBsYXRlPHNpemVfdCBOPiBzdGF0aWMgaW50NjRfdCB0b19hcnJheShKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IGFyciwgc3RkOjphcnJheTxzdGQ6OnZlY3RvcjxUPiwgTj4mIG91dCk7Cn07Cgp0ZW1wbGF0ZTxjbGFzcyBUPgpzdGF0aWMgaW5saW5lIGludDY0X3QKanNfYXJyYXlfdG8oSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCBhcnIsIHN0ZDo6dmVjdG9yPFQ+JiBvdXQpIHsKICByZXR1cm4ganNfYXJyYXk8VD46OnRvX3ZlY3RvcihjdHgsIGFyciwgb3V0KTsKfQoKdGVtcGxhdGU8Y2xhc3MgVCwgc2l6ZV90IE4+CnN0YXRpYyBpbmxpbmUgaW50NjRfdApqc19hcnJheV90byhKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IGFyciwgc3RkOjphcnJheTxULCBOPiYgb3V0KSB7CiAgdHlwZWRlZiBqc19hcnJheTxUPiBhcnJheV90eXBlOwogIHJldHVybiBhcnJheV90eXBlOjp0b19hcnJheShjdHgsIGFyciwgb3V0KTsKfQoKdGVtcGxhdGU8Y2xhc3MgVD4Kc3RhdGljIGlubGluZSBpbnQ2NF90CmpzX2FycmF5X3RvKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgYXJyLCBjdjo6U2NhbGFyXzxUPiYgb3V0KSB7CiAgcmV0dXJuIGpzX2FycmF5PFQ+Ojp0b19zY2FsYXIoY3R4LCBhcnIsIG91dCk7Cn0KCnRlbXBsYXRlPGNsYXNzIEl0ZXJhdG9yPgpzdGF0aWMgaW5saW5lIHR5cGVuYW1lIHN0ZDo6ZW5hYmxlX2lmPHN0ZDo6aXNfcG9pbnRlcjxJdGVyYXRvcj46OnZhbHVlLCBKU1ZhbHVlPjo6dHlwZQpqc19hcnJheV9mcm9tKEpTQ29udGV4dCogY3R4LCBjb25zdCBJdGVyYXRvciYgc3RhcnQsIGNvbnN0IEl0ZXJhdG9yJiBlbmQpIHsKICByZXR1cm4ganNfYXJyYXk8dHlwZW5hbWUgc3RkOjpyZW1vdmVfcG9pbnRlcjxJdGVyYXRvcj46OnR5cGU+Ojpmcm9tX3NlcXVlbmNlKGN0eCwgc3RhcnQsIGVuZCk7Cn0KCnRlbXBsYXRlPGNsYXNzIEl0ZXJhdG9yPgpzdGF0aWMgaW5saW5lIHR5cGVuYW1lIHN0ZDo6ZW5hYmxlX2lmPEl0ZXJhdG9yOjp2YWx1ZV90eXBlLCBKU1ZhbHVlPjo6dHlwZQpqc19hcnJheV9mcm9tKEpTQ29udGV4dCogY3R4LCBjb25zdCBJdGVyYXRvciYgc3RhcnQsIGNvbnN0IEl0ZXJhdG9yJiBlbmQpIHsKICByZXR1cm4ganNfYXJyYXk8dHlwZW5hbWUgSXRlcmF0b3I6OnZhbHVlX3R5cGU+Ojpmcm9tX3NlcXVlbmNlKGN0eCwgc3RhcnQsIGVuZCk7Cn0KCnRlbXBsYXRlPGNsYXNzIENvbnRhaW5lcj4Kc3RhdGljIGlubGluZSBKU1ZhbHVlCmpzX2FycmF5X2Zyb20oSlNDb250ZXh0KiBjdHgsIGNvbnN0IENvbnRhaW5lciYgdikgewogIHJldHVybiBqc19hcnJheTx0eXBlbmFtZSBDb250YWluZXI6OnZhbHVlX3R5cGU+Ojpmcm9tX3NlcXVlbmNlKGN0eCwgdi5iZWdpbigpLCB2LmVuZCgpKTsKfQoKY2xhc3MganNfb2JqZWN0IHsKcHVibGljOgogIHRlbXBsYXRlPGNsYXNzIFQ+CiAgc3RhdGljIGludDY0X3QKICB0b19tYXAoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCBvYmosIHN0ZDo6bWFwPHN0ZDo6c3RyaW5nLCBUPiYgb3V0KSB7CiAgICBpbnQ2NF90IGkgPSAwOwogICAgSlNQcm9wZXJ0eUVudW0qIG5hbWVzOwogICAgdWludDMyX3QgcGxlbjsKCiAgICBKU19HZXRPd25Qcm9wZXJ0eU5hbWVzKGN0eCwgJm5hbWVzLCAmcGxlbiwgb2JqLCBKU19HUE5fRU5VTV9PTkxZKTsKCiAgICBmb3IoYXV0byBuYW1lIDogc3RkOjpyYW5nZXM6OnN1YnJhbmdlPEpTUHJvcGVydHlFbnVtPihuYW1lcywgbmFtZXMgKyBwbGVuKSkgewogICAgICBKU1ZhbHVlIHZhbHVlID0gSlNfR2V0UHJvcGVydHkoY3R4LCBvYmosIG5hbWUuYXRvbSk7CiAgICAgIFQgcHJvcDsKICAgICAganNfdmFsdWVfdG8oY3R4LCB2YWx1ZSwgcHJvcCk7CiAgICAgIG91dFtuYW1lXSA9IHByb3A7CiAgICAgICsraTsKICAgIH0KICAgIHJldHVybiBpOwogIH0KCiAgdGVtcGxhdGU8Y2xhc3MgVD4KICBzdGF0aWMgSlNWYWx1ZQogIGZyb21fbWFwKEpTQ29udGV4dCogY3R4LCBjb25zdCBzdGQ6Om1hcDxzdGQ6OnN0cmluZywgVD4mIGluKSB7CiAgICB0eXBlZGVmIHN0ZDo6cGFpcjxzdGQ6OnN0cmluZywgVD4gZW50cnlfdHlwZTsKICAgIEpTVmFsdWUgb2JqID0gSlNfTmV3T2JqZWN0KGN0eCk7CgogICAgZm9yKGVudHJ5X3R5cGUgZW50cnkgOiBpbikgewogICAgICBUIHByb3AgPSBlbnRyeS5zZWNvbmQ7CiAgICAgIEpTX1NldFByb3BlcnR5U3RyKGN0eCwgb2JqLCBlbnRyeS5maXJzdC5jX3N0cigpLCAganNfdmFsdWVfZnJvbShjdHgsICAgcHJvcCkvKiwgSlNfUFJPUF9DX1dfRSovKTsKICAgIH0KCiAgICByZXR1cm4gb2JqOwogIH0KfTsKCiNlbmRpZiAvKiBkZWZpbmVkKEpTX0FSUkFZX0hQUCkgKi8AAAAAAAAAALtEAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAfEQAAAAAAACCRAAAAAAAAAAAAAAAAPC/"
				]
			]
		},
		{
			"file": "js_alloc.hpp",
			"settings":
			{
				"buffer_size": 2472,
				"line_ending": "Unix"
			}
		},
		{
			"file": "js_point_iterator.cpp",
			"settings":
			{
				"buffer_size": 6043,
				"line_ending": "Unix"
			},
			"undo_stack":
			[
				[
					3,
					1,
					"cut",
					null,
					"AQAAAEMXAAAAAAAAQxcAAAAAAABVAAAAZXh0ZXJuICJDIiBWSVNJQkxFIHZvaWQganNfcG9pbnRfaXRlcmF0b3JfZXhwb3J0KEpTQ29udGV4dCogY3R4LCBKU01vZHVsZURlZiogbSkgewp9Cg",
					"AQAAAAAAAAABAAAAQxcAAAAAAACYFwAAAAAAAAAAAAAAAPC/"
				],
				[
					6,
					1,
					"paste",
					null,
					"AQAAABMUAAAAAAAAaBQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAExQAAAAAAAATFAAAAAAAAAAAAAAAAPC/"
				],
				[
					8,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"AQAAABMUAAAAAAAAFBQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAExQAAAAAAAATFAAAAAAAAAAAAAAAAAAA"
				],
				[
					14,
					1,
					"cut",
					null,
					"AQAAAMQVAAAAAAAAxBUAAAAAAAAvAAAAICBKU19BZGRNb2R1bGVFeHBvcnQoY3R4LCBtLCAiUG9pbnRJdGVyYXRvciIpOwo",
					"AQAAAAAAAAABAAAAxBUAAAAAAADzFQAAAAAAAAAAAAAAAPC/"
				],
				[
					18,
					1,
					"paste",
					null,
					"AQAAAGcUAAAAAAAAlhQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAZxQAAAAAAABnFAAAAAAAAAAAAAAAAPC/"
				],
				[
					21,
					1,
					"insert",
					{
						"characters": "\njs_poiint"
					},
					"DQAAAPIVAAAAAAAA8xUAAAAAAAAAAAAA8xUAAAAAAAD3FQAAAAAAAAAAAADzFQAAAAAAAPMVAAAAAAAABAAAACAgICDzFQAAAAAAAPUVAAAAAAAAAAAAAPUVAAAAAAAA9hUAAAAAAAAAAAAA9hUAAAAAAAD3FQAAAAAAAAAAAAD3FQAAAAAAAPgVAAAAAAAAAAAAAPgVAAAAAAAA+RUAAAAAAAAAAAAA+RUAAAAAAAD6FQAAAAAAAAAAAAD6FQAAAAAAAPsVAAAAAAAAAAAAAPsVAAAAAAAA/BUAAAAAAAAAAAAA/BUAAAAAAAD9FQAAAAAAAAAAAAD9FQAAAAAAAP4VAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA8hUAAAAAAADyFQAAAAAAAAAAAAAAAPC/"
				],
				[
					22,
					3,
					"left_delete",
					null,
					"AwAAAP0VAAAAAAAA/RUAAAAAAAABAAAAdPwVAAAAAAAA/BUAAAAAAAABAAAAbvsVAAAAAAAA+xUAAAAAAAABAAAAaQ",
					"AQAAAAAAAAABAAAA/hUAAAAAAAD+FQAAAAAAAAAAAAAAAPC/"
				],
				[
					23,
					1,
					"insert",
					{
						"characters": "nt_iterator_export"
					},
					"EgAAAPsVAAAAAAAA/BUAAAAAAAAAAAAA/BUAAAAAAAD9FQAAAAAAAAAAAAD9FQAAAAAAAP4VAAAAAAAAAAAAAP4VAAAAAAAA/xUAAAAAAAAAAAAA/xUAAAAAAAAAFgAAAAAAAAAAAAAAFgAAAAAAAAEWAAAAAAAAAAAAAAEWAAAAAAAAAhYAAAAAAAAAAAAAAhYAAAAAAAADFgAAAAAAAAAAAAADFgAAAAAAAAQWAAAAAAAAAAAAAAQWAAAAAAAABRYAAAAAAAAAAAAABRYAAAAAAAAGFgAAAAAAAAAAAAAGFgAAAAAAAAcWAAAAAAAAAAAAAAcWAAAAAAAACBYAAAAAAAAAAAAACBYAAAAAAAAJFgAAAAAAAAAAAAAJFgAAAAAAAAoWAAAAAAAAAAAAAAoWAAAAAAAACxYAAAAAAAAAAAAACxYAAAAAAAAMFgAAAAAAAAAAAAAMFgAAAAAAAA0WAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA+xUAAAAAAAD7FQAAAAAAAAAAAAAAAPC/"
				],
				[
					24,
					1,
					"insert_snippet",
					{
						"contents": "($0)"
					},
					"AQAAAA0WAAAAAAAADxYAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAADRYAAAAAAAANFgAAAAAAAAAAAAAAAPC/"
				],
				[
					25,
					1,
					"insert",
					{
						"characters": "ctx,m"
					},
					"BQAAAA4WAAAAAAAADxYAAAAAAAAAAAAADxYAAAAAAAAQFgAAAAAAAAAAAAAQFgAAAAAAABEWAAAAAAAAAAAAABEWAAAAAAAAEhYAAAAAAAAAAAAAEhYAAAAAAAATFgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAADhYAAAAAAAAOFgAAAAAAAAAAAAAAAPC/"
				],
				[
					27,
					1,
					"insert",
					{
						"characters": ";"
					},
					"AQAAABQWAAAAAAAAFRYAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAFBYAAAAAAAAUFgAAAAAAAAAAAAAAAPC/"
				],
				[
					28,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAAC8FwAAI2luY2x1ZGUgImpzYmluZGluZ3MuaHBwIgojaW5jbHVkZSAianMuaHBwIgojaW5jbHVkZSAianNfYWxsb2MuaHBwIgojaW5jbHVkZSAianNfcG9pbnQuaHBwIgojaW5jbHVkZSAianNfcG9pbnRfaXRlcmF0b3IuaHBwIgojaW5jbHVkZSAicXVpY2tqcy9jdXRpbHMuaCIKI2luY2x1ZGUgInF1aWNranMvcXVpY2tqcy5oIgoKI2luY2x1ZGUgPG9wZW5jdjIvY29yZS9jb3JlLmhwcD4KI2luY2x1ZGUgPG9wZW5jdjIvaW1ncHJvYy9pbWdwcm9jLmhwcD4KCmV4dGVybiAiQyIgewoKSlNWYWx1ZSBwb2ludF9pdGVyYXRvcl9wcm90byA9IEpTX1VOREVGSU5FRCwgcG9pbnRfaXRlcmF0b3JfY2xhc3MgPSBKU19VTkRFRklORUQ7ClZJU0lCTEUgSlNDbGFzc0lEIGpzX3BvaW50X2l0ZXJhdG9yX2NsYXNzX2lkID0gMDsKClZJU0lCTEUgSlNWYWx1ZQpqc19wb2ludF9pdGVyYXRvcl9uZXcoSlNDb250ZXh0KiBjdHgsIGNvbnN0IHN0ZDo6cmFuZ2VzOjpzdWJyYW5nZTxKU1BvaW50RGF0YTxkb3VibGU+Kj4mIHJhbmdlLCBpbnQgbWFnaWMpIHsKICBKU1BvaW50SXRlcmF0b3JEYXRhKiBpdDsKICBKU1ZhbHVlIGl0ZXJhdG9yOwoKICBpZihqc19wb2ludF9pdGVyYXRvcl9jbGFzc19pZCA9PSAwKQogICAganNfcG9pbnRfaXRlcmF0b3JfaW5pdChjdHgsIDApOwoKICBhc3NlcnQoanNfcG9pbnRfaXRlcmF0b3JfY2xhc3NfaWQpOwoKICBpdGVyYXRvciA9IEpTX05ld09iamVjdFByb3RvQ2xhc3MoY3R4LCBwb2ludF9pdGVyYXRvcl9wcm90bywganNfcG9pbnRfaXRlcmF0b3JfY2xhc3NfaWQpOwogIGlmKEpTX0lzRXhjZXB0aW9uKGl0ZXJhdG9yKSkKICAgIGdvdG8gZmFpbDsKICBpdCA9IGpzX2FsbG9jYXRlPEpTUG9pbnRJdGVyYXRvckRhdGE+KGN0eCk7CiAgaWYoIWl0KQogICAgZ290byBmYWlsMTsKICBuZXcoaXQpIEpTUG9pbnRJdGVyYXRvckRhdGEoKTsKCiAgaXQtPm1hZ2ljID0gSlNQb2ludEl0ZXJhdG9yTWFnaWMobWFnaWMpOwogIGl0LT5maXJzdCA9IHJhbmdlLmJlZ2luKCk7CiAgaXQtPnNlY29uZCA9IHJhbmdlLmVuZCgpOwoKICBKU19TZXRPcGFxdWUoaXRlcmF0b3IsIGl0KTsKICByZXR1cm4gaXRlcmF0b3I7CmZhaWwxOgogIEpTX0ZyZWVWYWx1ZShjdHgsIGl0ZXJhdG9yKTsKZmFpbDoKICByZXR1cm4gSlNfRVhDRVBUSU9OOwp9Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX3BvaW50X2l0ZXJhdG9yX25leHQoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCogYXJndiwgQk9PTCogcGRvbmUsIGludCBtYWdpYykgewogIEpTUG9pbnRJdGVyYXRvckRhdGEqIGl0OwogIEpTVmFsdWUgcmVzdWx0OwoKICBpZigoaXQgPSBzdGF0aWNfY2FzdDxKU1BvaW50SXRlcmF0b3JEYXRhKj4oSlNfR2V0T3BhcXVlKHRoaXNfdmFsLCBqc19wb2ludF9pdGVyYXRvcl9jbGFzc19pZCkpKSA9PSBudWxscHRyKQogICAgcmV0dXJuIEpTX0VYQ0VQVElPTjsKCiAgLy8gIEpTUG9pbnREYXRhPGRvdWJsZT4qIHB0cjsKICAvLyBwdHIgPSBpdC0+Zmlyc3Q7CiAgc3dpdGNoKGl0LT5tYWdpYykgewogICAgY2FzZSBORVhUX1BPSU5UOiB7CiAgICAgICpwZG9uZSA9IGl0LT5maXJzdCA9PSBudWxscHRyIHx8IGl0LT5zZWNvbmQgPT0gbnVsbHB0ciB8fCAoaXQtPmZpcnN0ID09IGl0LT5zZWNvbmQpOwogICAgICByZXN1bHQgPSAqcGRvbmUgPyBKU19OVUxMIDoganNfcG9pbnRfbmV3KGN0eCwgaXQtPmZpcnN0LT54LCBpdC0+Zmlyc3QtPnkpOwogICAgICBicmVhazsKICAgIH0KICAgIGNhc2UgTkVYVF9MSU5FOiB7CiAgICAgICpwZG9uZSA9IGl0LT5maXJzdCA9PSBudWxscHRyIHx8IGl0LT5zZWNvbmQgPT0gbnVsbHB0ciB8fCAoaXQtPmZpcnN0ICsgMSA+PSBpdC0+c2Vjb25kKTsKICAgICAgcmVzdWx0ID0gKnBkb25lID8gSlNfTlVMTCA6IGpzX2xpbmVfbmV3KGN0eCwgaXQtPmZpcnN0WzBdLngsIGl0LT5maXJzdFswXS55LCBpdC0+Zmlyc3RbMV0ueCwgaXQtPmZpcnN0WzFdLnkpOwogICAgICBicmVhazsKICAgIH0KICB9CiAgaXQtPmZpcnN0Kys7CiAgcmV0dXJuIHJlc3VsdDsKfQoKc3RhdGljIEpTVmFsdWUKanNfcG9pbnRfaXRlcmF0b3JfY29uc3RydWN0b3IoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCBuZXdfdGFyZ2V0LCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2KSB7CiAgSlNQb2ludEl0ZXJhdG9yRGF0YSogczsKICBKU0NvbnRvdXJEYXRhPGRvdWJsZT4qIHY7CiAgSlNWYWx1ZSBvYmogPSBKU19VTkRFRklORUQ7CiAgSlNWYWx1ZSBwcm90bzsKICBhc3NlcnQoMCk7CgogIGlmKGpzX3BvaW50X2l0ZXJhdG9yX2NsYXNzX2lkID09IDApCiAgICBqc19wb2ludF9pdGVyYXRvcl9pbml0KGN0eCwgMCk7CgogIGFzc2VydChqc19wb2ludF9pdGVyYXRvcl9jbGFzc19pZCk7CgogIHMgPSBqc19hbGxvY2F0ZTxKU1BvaW50SXRlcmF0b3JEYXRhPihjdHgpOwogIGlmKCFzKQogICAgcmV0dXJuIEpTX0VYQ0VQVElPTjsKCiAgbmV3KHMpIEpTUG9pbnRJdGVyYXRvckRhdGEoKTsKCiAgdiA9IHN0YXRpY19jYXN0PEpTQ29udG91ckRhdGE8ZG91YmxlPio+KEpTX0dldE9wYXF1ZShhcmd2WzBdLCAwIC8qanNfY29udG91cl9jbGFzc19pZCovKSk7CgogIHMtPmZpcnN0ID0gJigqdilbMF07CiAgcy0+c2Vjb25kID0gcy0+Zmlyc3QgKyB2LT5zaXplKCk7CgogIHByb3RvID0gSlNfR2V0UHJvcGVydHlTdHIoY3R4LCBuZXdfdGFyZ2V0LCAicHJvdG90eXBlIik7CiAgaWYoSlNfSXNFeGNlcHRpb24ocHJvdG8pKQogICAgZ290byBmYWlsOwogIG9iaiA9IEpTX05ld09iamVjdFByb3RvQ2xhc3MoY3R4LCBwcm90bywganNfcG9pbnRfaXRlcmF0b3JfY2xhc3NfaWQpOwogIEpTX0ZyZWVWYWx1ZShjdHgsIHByb3RvKTsKICBpZihKU19Jc0V4Y2VwdGlvbihvYmopKQogICAgZ290byBmYWlsOwogIEpTX1NldE9wYXF1ZShvYmosIHMpOwogIHJldHVybiBvYmo7CmZhaWw6CiAganNfZGVhbGxvY2F0ZShjdHgsIHMpOwogIEpTX0ZyZWVWYWx1ZShjdHgsIG9iaik7CiAgcmV0dXJuIEpTX0VYQ0VQVElPTjsKfQoKc3RhdGljIEpTVmFsdWUKanNfcG9pbnRfaXRlcmF0b3JfZHVwKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QqIGFyZ3YpIHsKICByZXR1cm4gSlNfRHVwVmFsdWUoY3R4LCB0aGlzX3ZhbCk7Cn0Kc3RhdGljIHZvaWQKanNfcG9pbnRfaXRlcmF0b3JfZmluYWxpemVyKEpTUnVudGltZSogcnQsIEpTVmFsdWUgdmFsKSB7CiAgSlNQb2ludEl0ZXJhdG9yRGF0YSogcyA9IHN0YXRpY19jYXN0PEpTUG9pbnRJdGVyYXRvckRhdGEqPihKU19HZXRPcGFxdWUodmFsLCBqc19wb2ludF9pdGVyYXRvcl9jbGFzc19pZCkpOwogIC8qIE5vdGU6ICdzJyBjYW4gYmUgTlVMTCBpbiBjYXNlIEpTX1NldE9wYXF1ZSgpIHdhcyBub3QgY2FsbGVkICovCgogIGlmKHMgIT0gbnVsbHB0cikKICAgIGpzX2RlYWxsb2NhdGUocnQsIHMpOwoKICAvLyBKU19GcmVlVmFsdWVSVChydCwgdmFsKTsKfQpleHRlcm4gIkMiIHsKSlNDbGFzc0RlZiBqc19wb2ludF9pdGVyYXRvcl9jbGFzcyA9IHsKICAgIC5jbGFzc19uYW1lID0gIlBvaW50SXRlcmF0b3IiLAogICAgLmZpbmFsaXplciA9IGpzX3BvaW50X2l0ZXJhdG9yX2ZpbmFsaXplciwKfTsKCmNvbnN0IEpTQ0Z1bmN0aW9uTGlzdEVudHJ5IGpzX3BvaW50X2l0ZXJhdG9yX3Byb3RvX2Z1bmNzW10gPSB7CiAgICBKU19JVEVSQVRPUl9ORVhUX0RFRigibmV4dCIsIDAsIGpzX3BvaW50X2l0ZXJhdG9yX25leHQsIDApLAogICAgSlNfQ0ZVTkNfREVGKCJbU3ltYm9sLml0ZXJhdG9yXSIsIDAsIGpzX3BvaW50X2l0ZXJhdG9yX2R1cCksCiAgICBKU19QUk9QX1NUUklOR19ERUYoIltTeW1ib2wudG9TdHJpbmdUYWddIiwgIlBvaW50SXRlcmF0b3IiLCBKU19QUk9QX0NPTkZJR1VSQUJMRSksCn07CgppbnQKanNfcG9pbnRfaXRlcmF0b3JfaW5pdChKU0NvbnRleHQqIGN0eCwgSlNNb2R1bGVEZWYqIG0pIHsKCiAgaWYoanNfcG9pbnRfaXRlcmF0b3JfY2xhc3NfaWQgPT0gMCkgewogICAgLyogY3JlYXRlIHRoZSBQb2ludEl0ZXJhdG9yIGNsYXNzICovCiAgICBKU19OZXdDbGFzc0lEKCZqc19wb2ludF9pdGVyYXRvcl9jbGFzc19pZCk7CiAgICBKU19OZXdDbGFzcyhKU19HZXRSdW50aW1lKGN0eCksIGpzX3BvaW50X2l0ZXJhdG9yX2NsYXNzX2lkLCAmanNfcG9pbnRfaXRlcmF0b3JfY2xhc3MpOwoKICAgIHBvaW50X2l0ZXJhdG9yX3Byb3RvID0gSlNfTmV3T2JqZWN0KGN0eCk7CiAgICBKU19TZXRQcm9wZXJ0eUZ1bmN0aW9uTGlzdChjdHgsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb2ludF9pdGVyYXRvcl9wcm90bywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGpzX3BvaW50X2l0ZXJhdG9yX3Byb3RvX2Z1bmNzLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY291bnRvZihqc19wb2ludF9pdGVyYXRvcl9wcm90b19mdW5jcykpOwogICAgSlNfU2V0Q2xhc3NQcm90byhjdHgsIGpzX3BvaW50X2l0ZXJhdG9yX2NsYXNzX2lkLCBwb2ludF9pdGVyYXRvcl9wcm90byk7CgogICAgcG9pbnRfaXRlcmF0b3JfY2xhc3MgPSBKU19OZXdDRnVuY3Rpb24yKGN0eCwganNfcG9pbnRfaXRlcmF0b3JfY29uc3RydWN0b3IsICJQb2ludEl0ZXJhdG9yIiwgMiwgSlNfQ0ZVTkNfY29uc3RydWN0b3IsIDApOwogICAgLyogc2V0IHByb3RvLmNvbnN0cnVjdG9yIGFuZCBjdG9yLnByb3RvdHlwZSAqLwoKICAgIEpTX1NldENvbnN0cnVjdG9yKGN0eCwgcG9pbnRfaXRlcmF0b3JfY2xhc3MsIHBvaW50X2l0ZXJhdG9yX3Byb3RvKTsKICAgIC8vIEpTX1NldFByb3BlcnR5RnVuY3Rpb25MaXN0KGN0eCwgcG9pbnRfaXRlcmF0b3JfY2xhc3MsIGpzX3BvaW50X2l0ZXJhdG9yX3N0YXRpY19mdW5jcywKICAgIC8vIGNvdW50b2YoanNfcG9pbnRfaXRlcmF0b3Jfc3RhdGljX2Z1bmNzKSk7CiAgfQoKICBpZihtKQogICAgSlNfU2V0TW9kdWxlRXhwb3J0KGN0eCwgbSwgIlBvaW50SXRlcmF0b3IiLCBwb2ludF9pdGVyYXRvcl9jbGFzcyk7CiAgLyogZWxzZQogICAgIEpTX1NldFByb3BlcnR5U3RyKGN0eCwgKnN0YXRpY19jYXN0PEpTVmFsdWUqPihtKSwgbmFtZSwgcG9pbnRfaXRlcmF0b3JfY2xhc3MpOyovCiAgcmV0dXJuIDA7Cn0KCmV4dGVybiAiQyIgVklTSUJMRSB2b2lkIGpzX3BvaW50X2l0ZXJhdG9yX2V4cG9ydChKU0NvbnRleHQqIGN0eCwgSlNNb2R1bGVEZWYqIG0pIHsKICBKU19BZGRNb2R1bGVFeHBvcnQoY3R4LCBtLCAiUG9pbnRJdGVyYXRvciIpOwp9CgojaWYgZGVmaW5lZChKU19QT0lOVF9JVEVSQVRPUl9NT0RVTEUpCiNkZWZpbmUgSlNfSU5JVF9NT0RVTEUgLypWSVNJQkxFKi8ganNfaW5pdF9tb2R1bGUKI2Vsc2UKI2RlZmluZSBKU19JTklUX01PRFVMRSAvKlZJU0lCTEUqLyBqc19pbml0X21vZHVsZV9wb2ludF9pdGVyYXRvcgojZW5kaWYKCkpTTW9kdWxlRGVmKgpKU19JTklUX01PRFVMRShKU0NvbnRleHQqIGN0eCwgY29uc3QgY2hhciogbW9kdWxlX25hbWUpIHsKICBKU01vZHVsZURlZiogbTsKICBtID0gSlNfTmV3Q01vZHVsZShjdHgsIG1vZHVsZV9uYW1lLCAmanNfcG9pbnRfaXRlcmF0b3JfaW5pdCk7CiAgaWYoIW0pCiAgICByZXR1cm4gTlVMTDsKICBqc19wb2ludF9pdGVyYXRvcl9leHBvcnQoY3R4LG0pOwogIHJldHVybiBtOwp9CgpzdGF0aWMgSlNWYWx1ZQpqc19wb2ludF9pdGVyYXRvcl90b19zdHJpbmcoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCogYXJndikgewogIEpTUG9pbnRJdGVyYXRvckRhdGEqIHMgPSBzdGF0aWNfY2FzdDxKU1BvaW50SXRlcmF0b3JEYXRhKj4oSlNfR2V0T3BhcXVlMihjdHgsIHRoaXNfdmFsLCBqc19wb2ludF9pdGVyYXRvcl9jbGFzc19pZCkpOwogIHN0ZDo6b3N0cmluZ3N0cmVhbSBvczsKICBpZighcykKICAgIHJldHVybiBKU19FWENFUFRJT047CgogIC8vIG9zIDw8ICJ7eDoiIDw8IHMtPnggPDwgIix5OiIgPDwgcy0+eSA8PCAifSIgPDwgc3RkOjplbmRsOwoKICByZXR1cm4gSlNfTmV3U3RyaW5nKGN0eCwgb3Muc3RyKCkuY19zdHIoKSk7Cn0KfQAAAAAAAAAAvRcAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAFRYAAAAAAAAVFgAAAAAAAAAAAAAAAPC/"
				],
				[
					29,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAAC9FwAAI2luY2x1ZGUgImpzYmluZGluZ3MuaHBwIgojaW5jbHVkZSAianMuaHBwIgojaW5jbHVkZSAianNfYWxsb2MuaHBwIgojaW5jbHVkZSAianNfcG9pbnQuaHBwIgojaW5jbHVkZSAianNfcG9pbnRfaXRlcmF0b3IuaHBwIgojaW5jbHVkZSAicXVpY2tqcy9jdXRpbHMuaCIKI2luY2x1ZGUgInF1aWNranMvcXVpY2tqcy5oIgoKI2luY2x1ZGUgPG9wZW5jdjIvY29yZS9jb3JlLmhwcD4KI2luY2x1ZGUgPG9wZW5jdjIvaW1ncHJvYy9pbWdwcm9jLmhwcD4KCmV4dGVybiAiQyIgewoKSlNWYWx1ZSBwb2ludF9pdGVyYXRvcl9wcm90byA9IEpTX1VOREVGSU5FRCwgcG9pbnRfaXRlcmF0b3JfY2xhc3MgPSBKU19VTkRFRklORUQ7ClZJU0lCTEUgSlNDbGFzc0lEIGpzX3BvaW50X2l0ZXJhdG9yX2NsYXNzX2lkID0gMDsKClZJU0lCTEUgSlNWYWx1ZQpqc19wb2ludF9pdGVyYXRvcl9uZXcoSlNDb250ZXh0KiBjdHgsIGNvbnN0IHN0ZDo6cmFuZ2VzOjpzdWJyYW5nZTxKU1BvaW50RGF0YTxkb3VibGU+Kj4mIHJhbmdlLCBpbnQgbWFnaWMpIHsKICBKU1BvaW50SXRlcmF0b3JEYXRhKiBpdDsKICBKU1ZhbHVlIGl0ZXJhdG9yOwoKICBpZihqc19wb2ludF9pdGVyYXRvcl9jbGFzc19pZCA9PSAwKQogICAganNfcG9pbnRfaXRlcmF0b3JfaW5pdChjdHgsIDApOwoKICBhc3NlcnQoanNfcG9pbnRfaXRlcmF0b3JfY2xhc3NfaWQpOwoKICBpdGVyYXRvciA9IEpTX05ld09iamVjdFByb3RvQ2xhc3MoY3R4LCBwb2ludF9pdGVyYXRvcl9wcm90bywganNfcG9pbnRfaXRlcmF0b3JfY2xhc3NfaWQpOwogIGlmKEpTX0lzRXhjZXB0aW9uKGl0ZXJhdG9yKSkKICAgIGdvdG8gZmFpbDsKICBpdCA9IGpzX2FsbG9jYXRlPEpTUG9pbnRJdGVyYXRvckRhdGE+KGN0eCk7CiAgaWYoIWl0KQogICAgZ290byBmYWlsMTsKICBuZXcoaXQpIEpTUG9pbnRJdGVyYXRvckRhdGEoKTsKCiAgaXQtPm1hZ2ljID0gSlNQb2ludEl0ZXJhdG9yTWFnaWMobWFnaWMpOwogIGl0LT5maXJzdCA9IHJhbmdlLmJlZ2luKCk7CiAgaXQtPnNlY29uZCA9IHJhbmdlLmVuZCgpOwoKICBKU19TZXRPcGFxdWUoaXRlcmF0b3IsIGl0KTsKICByZXR1cm4gaXRlcmF0b3I7CmZhaWwxOgogIEpTX0ZyZWVWYWx1ZShjdHgsIGl0ZXJhdG9yKTsKZmFpbDoKICByZXR1cm4gSlNfRVhDRVBUSU9OOwp9Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX3BvaW50X2l0ZXJhdG9yX25leHQoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCogYXJndiwgQk9PTCogcGRvbmUsIGludCBtYWdpYykgewogIEpTUG9pbnRJdGVyYXRvckRhdGEqIGl0OwogIEpTVmFsdWUgcmVzdWx0OwoKICBpZigoaXQgPSBzdGF0aWNfY2FzdDxKU1BvaW50SXRlcmF0b3JEYXRhKj4oSlNfR2V0T3BhcXVlKHRoaXNfdmFsLCBqc19wb2ludF9pdGVyYXRvcl9jbGFzc19pZCkpKSA9PSBudWxscHRyKQogICAgcmV0dXJuIEpTX0VYQ0VQVElPTjsKCiAgLy8gIEpTUG9pbnREYXRhPGRvdWJsZT4qIHB0cjsKICAvLyBwdHIgPSBpdC0+Zmlyc3Q7CiAgc3dpdGNoKGl0LT5tYWdpYykgewogICAgY2FzZSBORVhUX1BPSU5UOiB7CiAgICAgICpwZG9uZSA9IGl0LT5maXJzdCA9PSBudWxscHRyIHx8IGl0LT5zZWNvbmQgPT0gbnVsbHB0ciB8fCAoaXQtPmZpcnN0ID09IGl0LT5zZWNvbmQpOwogICAgICByZXN1bHQgPSAqcGRvbmUgPyBKU19OVUxMIDoganNfcG9pbnRfbmV3KGN0eCwgaXQtPmZpcnN0LT54LCBpdC0+Zmlyc3QtPnkpOwogICAgICBicmVhazsKICAgIH0KICAgIGNhc2UgTkVYVF9MSU5FOiB7CiAgICAgICpwZG9uZSA9IGl0LT5maXJzdCA9PSBudWxscHRyIHx8IGl0LT5zZWNvbmQgPT0gbnVsbHB0ciB8fCAoaXQtPmZpcnN0ICsgMSA+PSBpdC0+c2Vjb25kKTsKICAgICAgcmVzdWx0ID0gKnBkb25lID8gSlNfTlVMTCA6IGpzX2xpbmVfbmV3KGN0eCwgaXQtPmZpcnN0WzBdLngsIGl0LT5maXJzdFswXS55LCBpdC0+Zmlyc3RbMV0ueCwgaXQtPmZpcnN0WzFdLnkpOwogICAgICBicmVhazsKICAgIH0KICB9CiAgaXQtPmZpcnN0Kys7CiAgcmV0dXJuIHJlc3VsdDsKfQoKc3RhdGljIEpTVmFsdWUKanNfcG9pbnRfaXRlcmF0b3JfY29uc3RydWN0b3IoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCBuZXdfdGFyZ2V0LCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2KSB7CiAgSlNQb2ludEl0ZXJhdG9yRGF0YSogczsKICBKU0NvbnRvdXJEYXRhPGRvdWJsZT4qIHY7CiAgSlNWYWx1ZSBvYmogPSBKU19VTkRFRklORUQ7CiAgSlNWYWx1ZSBwcm90bzsKICBhc3NlcnQoMCk7CgogIGlmKGpzX3BvaW50X2l0ZXJhdG9yX2NsYXNzX2lkID09IDApCiAgICBqc19wb2ludF9pdGVyYXRvcl9pbml0KGN0eCwgMCk7CgogIGFzc2VydChqc19wb2ludF9pdGVyYXRvcl9jbGFzc19pZCk7CgogIHMgPSBqc19hbGxvY2F0ZTxKU1BvaW50SXRlcmF0b3JEYXRhPihjdHgpOwogIGlmKCFzKQogICAgcmV0dXJuIEpTX0VYQ0VQVElPTjsKCiAgbmV3KHMpIEpTUG9pbnRJdGVyYXRvckRhdGEoKTsKCiAgdiA9IHN0YXRpY19jYXN0PEpTQ29udG91ckRhdGE8ZG91YmxlPio+KEpTX0dldE9wYXF1ZShhcmd2WzBdLCAwIC8qanNfY29udG91cl9jbGFzc19pZCovKSk7CgogIHMtPmZpcnN0ID0gJigqdilbMF07CiAgcy0+c2Vjb25kID0gcy0+Zmlyc3QgKyB2LT5zaXplKCk7CgogIHByb3RvID0gSlNfR2V0UHJvcGVydHlTdHIoY3R4LCBuZXdfdGFyZ2V0LCAicHJvdG90eXBlIik7CiAgaWYoSlNfSXNFeGNlcHRpb24ocHJvdG8pKQogICAgZ290byBmYWlsOwogIG9iaiA9IEpTX05ld09iamVjdFByb3RvQ2xhc3MoY3R4LCBwcm90bywganNfcG9pbnRfaXRlcmF0b3JfY2xhc3NfaWQpOwogIEpTX0ZyZWVWYWx1ZShjdHgsIHByb3RvKTsKICBpZihKU19Jc0V4Y2VwdGlvbihvYmopKQogICAgZ290byBmYWlsOwogIEpTX1NldE9wYXF1ZShvYmosIHMpOwogIHJldHVybiBvYmo7CmZhaWw6CiAganNfZGVhbGxvY2F0ZShjdHgsIHMpOwogIEpTX0ZyZWVWYWx1ZShjdHgsIG9iaik7CiAgcmV0dXJuIEpTX0VYQ0VQVElPTjsKfQoKc3RhdGljIEpTVmFsdWUKanNfcG9pbnRfaXRlcmF0b3JfZHVwKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QqIGFyZ3YpIHsKICByZXR1cm4gSlNfRHVwVmFsdWUoY3R4LCB0aGlzX3ZhbCk7Cn0Kc3RhdGljIHZvaWQKanNfcG9pbnRfaXRlcmF0b3JfZmluYWxpemVyKEpTUnVudGltZSogcnQsIEpTVmFsdWUgdmFsKSB7CiAgSlNQb2ludEl0ZXJhdG9yRGF0YSogcyA9IHN0YXRpY19jYXN0PEpTUG9pbnRJdGVyYXRvckRhdGEqPihKU19HZXRPcGFxdWUodmFsLCBqc19wb2ludF9pdGVyYXRvcl9jbGFzc19pZCkpOwogIC8qIE5vdGU6ICdzJyBjYW4gYmUgTlVMTCBpbiBjYXNlIEpTX1NldE9wYXF1ZSgpIHdhcyBub3QgY2FsbGVkICovCgogIGlmKHMgIT0gbnVsbHB0cikKICAgIGpzX2RlYWxsb2NhdGUocnQsIHMpOwoKICAvLyBKU19GcmVlVmFsdWVSVChydCwgdmFsKTsKfQpleHRlcm4gIkMiIHsKSlNDbGFzc0RlZiBqc19wb2ludF9pdGVyYXRvcl9jbGFzcyA9IHsKICAgIC5jbGFzc19uYW1lID0gIlBvaW50SXRlcmF0b3IiLAogICAgLmZpbmFsaXplciA9IGpzX3BvaW50X2l0ZXJhdG9yX2ZpbmFsaXplciwKfTsKCmNvbnN0IEpTQ0Z1bmN0aW9uTGlzdEVudHJ5IGpzX3BvaW50X2l0ZXJhdG9yX3Byb3RvX2Z1bmNzW10gPSB7CiAgICBKU19JVEVSQVRPUl9ORVhUX0RFRigibmV4dCIsIDAsIGpzX3BvaW50X2l0ZXJhdG9yX25leHQsIDApLAogICAgSlNfQ0ZVTkNfREVGKCJbU3ltYm9sLml0ZXJhdG9yXSIsIDAsIGpzX3BvaW50X2l0ZXJhdG9yX2R1cCksCiAgICBKU19QUk9QX1NUUklOR19ERUYoIltTeW1ib2wudG9TdHJpbmdUYWddIiwgIlBvaW50SXRlcmF0b3IiLCBKU19QUk9QX0NPTkZJR1VSQUJMRSksCn07CgppbnQKanNfcG9pbnRfaXRlcmF0b3JfaW5pdChKU0NvbnRleHQqIGN0eCwgSlNNb2R1bGVEZWYqIG0pIHsKCiAgaWYoanNfcG9pbnRfaXRlcmF0b3JfY2xhc3NfaWQgPT0gMCkgewogICAgLyogY3JlYXRlIHRoZSBQb2ludEl0ZXJhdG9yIGNsYXNzICovCiAgICBKU19OZXdDbGFzc0lEKCZqc19wb2ludF9pdGVyYXRvcl9jbGFzc19pZCk7CiAgICBKU19OZXdDbGFzcyhKU19HZXRSdW50aW1lKGN0eCksIGpzX3BvaW50X2l0ZXJhdG9yX2NsYXNzX2lkLCAmanNfcG9pbnRfaXRlcmF0b3JfY2xhc3MpOwoKICAgIHBvaW50X2l0ZXJhdG9yX3Byb3RvID0gSlNfTmV3T2JqZWN0KGN0eCk7CiAgICBKU19TZXRQcm9wZXJ0eUZ1bmN0aW9uTGlzdChjdHgsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb2ludF9pdGVyYXRvcl9wcm90bywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGpzX3BvaW50X2l0ZXJhdG9yX3Byb3RvX2Z1bmNzLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY291bnRvZihqc19wb2ludF9pdGVyYXRvcl9wcm90b19mdW5jcykpOwogICAgSlNfU2V0Q2xhc3NQcm90byhjdHgsIGpzX3BvaW50X2l0ZXJhdG9yX2NsYXNzX2lkLCBwb2ludF9pdGVyYXRvcl9wcm90byk7CgogICAgcG9pbnRfaXRlcmF0b3JfY2xhc3MgPSBKU19OZXdDRnVuY3Rpb24yKGN0eCwganNfcG9pbnRfaXRlcmF0b3JfY29uc3RydWN0b3IsICJQb2ludEl0ZXJhdG9yIiwgMiwgSlNfQ0ZVTkNfY29uc3RydWN0b3IsIDApOwogICAgLyogc2V0IHByb3RvLmNvbnN0cnVjdG9yIGFuZCBjdG9yLnByb3RvdHlwZSAqLwoKICAgIEpTX1NldENvbnN0cnVjdG9yKGN0eCwgcG9pbnRfaXRlcmF0b3JfY2xhc3MsIHBvaW50X2l0ZXJhdG9yX3Byb3RvKTsKICAgIC8vIEpTX1NldFByb3BlcnR5RnVuY3Rpb25MaXN0KGN0eCwgcG9pbnRfaXRlcmF0b3JfY2xhc3MsIGpzX3BvaW50X2l0ZXJhdG9yX3N0YXRpY19mdW5jcywKICAgIC8vIGNvdW50b2YoanNfcG9pbnRfaXRlcmF0b3Jfc3RhdGljX2Z1bmNzKSk7CiAgfQoKICBpZihtKQogICAgSlNfU2V0TW9kdWxlRXhwb3J0KGN0eCwgbSwgIlBvaW50SXRlcmF0b3IiLCBwb2ludF9pdGVyYXRvcl9jbGFzcyk7CiAgLyogZWxzZQogICAgIEpTX1NldFByb3BlcnR5U3RyKGN0eCwgKnN0YXRpY19jYXN0PEpTVmFsdWUqPihtKSwgbmFtZSwgcG9pbnRfaXRlcmF0b3JfY2xhc3MpOyovCiAgcmV0dXJuIDA7Cn0KCmV4dGVybiAiQyIgVklTSUJMRSB2b2lkCmpzX3BvaW50X2l0ZXJhdG9yX2V4cG9ydChKU0NvbnRleHQqIGN0eCwgSlNNb2R1bGVEZWYqIG0pIHsKICBKU19BZGRNb2R1bGVFeHBvcnQoY3R4LCBtLCAiUG9pbnRJdGVyYXRvciIpOwp9CgojaWYgZGVmaW5lZChKU19QT0lOVF9JVEVSQVRPUl9NT0RVTEUpCiNkZWZpbmUgSlNfSU5JVF9NT0RVTEUgLypWSVNJQkxFKi8ganNfaW5pdF9tb2R1bGUKI2Vsc2UKI2RlZmluZSBKU19JTklUX01PRFVMRSAvKlZJU0lCTEUqLyBqc19pbml0X21vZHVsZV9wb2ludF9pdGVyYXRvcgojZW5kaWYKCkpTTW9kdWxlRGVmKgpKU19JTklUX01PRFVMRShKU0NvbnRleHQqIGN0eCwgY29uc3QgY2hhciogbW9kdWxlX25hbWUpIHsKICBKU01vZHVsZURlZiogbTsKICBtID0gSlNfTmV3Q01vZHVsZShjdHgsIG1vZHVsZV9uYW1lLCAmanNfcG9pbnRfaXRlcmF0b3JfaW5pdCk7CiAgaWYoIW0pCiAgICByZXR1cm4gTlVMTDsKICBqc19wb2ludF9pdGVyYXRvcl9leHBvcnQoY3R4LCBtKTsKICByZXR1cm4gbTsKfQoKc3RhdGljIEpTVmFsdWUKanNfcG9pbnRfaXRlcmF0b3JfdG9fc3RyaW5nKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QqIGFyZ3YpIHsKICBKU1BvaW50SXRlcmF0b3JEYXRhKiBzID0gc3RhdGljX2Nhc3Q8SlNQb2ludEl0ZXJhdG9yRGF0YSo+KEpTX0dldE9wYXF1ZTIoY3R4LCB0aGlzX3ZhbCwganNfcG9pbnRfaXRlcmF0b3JfY2xhc3NfaWQpKTsKICBzdGQ6Om9zdHJpbmdzdHJlYW0gb3M7CiAgaWYoIXMpCiAgICByZXR1cm4gSlNfRVhDRVBUSU9OOwoKICAvLyBvcyA8PCAie3g6IiA8PCBzLT54IDw8ICIseToiIDw8IHMtPnkgPDwgIn0iIDw8IHN0ZDo6ZW5kbDsKCiAgcmV0dXJuIEpTX05ld1N0cmluZyhjdHgsIG9zLnN0cigpLmNfc3RyKCkpOwp9Cn0AAAAAAAAAAKsXAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAFRYAAAAAAAAVFgAAAAAAAAAAAAAAAPC/"
				],
				[
					30,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAACrFwAAI2luY2x1ZGUgImpzYmluZGluZ3MuaHBwIgojaW5jbHVkZSAianNfYWxsb2MuaHBwIgojaW5jbHVkZSAianNfcG9pbnQuaHBwIgojaW5jbHVkZSAianNfcG9pbnRfaXRlcmF0b3IuaHBwIgojaW5jbHVkZSAicXVpY2tqcy9jdXRpbHMuaCIKI2luY2x1ZGUgInF1aWNranMvcXVpY2tqcy5oIgoKI2luY2x1ZGUgPG9wZW5jdjIvY29yZS9jb3JlLmhwcD4KI2luY2x1ZGUgPG9wZW5jdjIvaW1ncHJvYy9pbWdwcm9jLmhwcD4KCmV4dGVybiAiQyIgewoKSlNWYWx1ZSBwb2ludF9pdGVyYXRvcl9wcm90byA9IEpTX1VOREVGSU5FRCwgcG9pbnRfaXRlcmF0b3JfY2xhc3MgPSBKU19VTkRFRklORUQ7ClZJU0lCTEUgSlNDbGFzc0lEIGpzX3BvaW50X2l0ZXJhdG9yX2NsYXNzX2lkID0gMDsKClZJU0lCTEUgSlNWYWx1ZQpqc19wb2ludF9pdGVyYXRvcl9uZXcoSlNDb250ZXh0KiBjdHgsIGNvbnN0IHN0ZDo6cmFuZ2VzOjpzdWJyYW5nZTxKU1BvaW50RGF0YTxkb3VibGU+Kj4mIHJhbmdlLCBpbnQgbWFnaWMpIHsKICBKU1BvaW50SXRlcmF0b3JEYXRhKiBpdDsKICBKU1ZhbHVlIGl0ZXJhdG9yOwoKICBpZihqc19wb2ludF9pdGVyYXRvcl9jbGFzc19pZCA9PSAwKQogICAganNfcG9pbnRfaXRlcmF0b3JfaW5pdChjdHgsIDApOwoKICBhc3NlcnQoanNfcG9pbnRfaXRlcmF0b3JfY2xhc3NfaWQpOwoKICBpdGVyYXRvciA9IEpTX05ld09iamVjdFByb3RvQ2xhc3MoY3R4LCBwb2ludF9pdGVyYXRvcl9wcm90bywganNfcG9pbnRfaXRlcmF0b3JfY2xhc3NfaWQpOwogIGlmKEpTX0lzRXhjZXB0aW9uKGl0ZXJhdG9yKSkKICAgIGdvdG8gZmFpbDsKICBpdCA9IGpzX2FsbG9jYXRlPEpTUG9pbnRJdGVyYXRvckRhdGE+KGN0eCk7CiAgaWYoIWl0KQogICAgZ290byBmYWlsMTsKICBuZXcoaXQpIEpTUG9pbnRJdGVyYXRvckRhdGEoKTsKCiAgaXQtPm1hZ2ljID0gSlNQb2ludEl0ZXJhdG9yTWFnaWMobWFnaWMpOwogIGl0LT5maXJzdCA9IHJhbmdlLmJlZ2luKCk7CiAgaXQtPnNlY29uZCA9IHJhbmdlLmVuZCgpOwoKICBKU19TZXRPcGFxdWUoaXRlcmF0b3IsIGl0KTsKICByZXR1cm4gaXRlcmF0b3I7CmZhaWwxOgogIEpTX0ZyZWVWYWx1ZShjdHgsIGl0ZXJhdG9yKTsKZmFpbDoKICByZXR1cm4gSlNfRVhDRVBUSU9OOwp9Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX3BvaW50X2l0ZXJhdG9yX25leHQoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCogYXJndiwgQk9PTCogcGRvbmUsIGludCBtYWdpYykgewogIEpTUG9pbnRJdGVyYXRvckRhdGEqIGl0OwogIEpTVmFsdWUgcmVzdWx0OwoKICBpZigoaXQgPSBzdGF0aWNfY2FzdDxKU1BvaW50SXRlcmF0b3JEYXRhKj4oSlNfR2V0T3BhcXVlKHRoaXNfdmFsLCBqc19wb2ludF9pdGVyYXRvcl9jbGFzc19pZCkpKSA9PSBudWxscHRyKQogICAgcmV0dXJuIEpTX0VYQ0VQVElPTjsKCiAgLy8gIEpTUG9pbnREYXRhPGRvdWJsZT4qIHB0cjsKICAvLyBwdHIgPSBpdC0+Zmlyc3Q7CiAgc3dpdGNoKGl0LT5tYWdpYykgewogICAgY2FzZSBORVhUX1BPSU5UOiB7CiAgICAgICpwZG9uZSA9IGl0LT5maXJzdCA9PSBudWxscHRyIHx8IGl0LT5zZWNvbmQgPT0gbnVsbHB0ciB8fCAoaXQtPmZpcnN0ID09IGl0LT5zZWNvbmQpOwogICAgICByZXN1bHQgPSAqcGRvbmUgPyBKU19OVUxMIDoganNfcG9pbnRfbmV3KGN0eCwgaXQtPmZpcnN0LT54LCBpdC0+Zmlyc3QtPnkpOwogICAgICBicmVhazsKICAgIH0KICAgIGNhc2UgTkVYVF9MSU5FOiB7CiAgICAgICpwZG9uZSA9IGl0LT5maXJzdCA9PSBudWxscHRyIHx8IGl0LT5zZWNvbmQgPT0gbnVsbHB0ciB8fCAoaXQtPmZpcnN0ICsgMSA+PSBpdC0+c2Vjb25kKTsKICAgICAgcmVzdWx0ID0gKnBkb25lID8gSlNfTlVMTCA6IGpzX2xpbmVfbmV3KGN0eCwgaXQtPmZpcnN0WzBdLngsIGl0LT5maXJzdFswXS55LCBpdC0+Zmlyc3RbMV0ueCwgaXQtPmZpcnN0WzFdLnkpOwogICAgICBicmVhazsKICAgIH0KICB9CiAgaXQtPmZpcnN0Kys7CiAgcmV0dXJuIHJlc3VsdDsKfQoKc3RhdGljIEpTVmFsdWUKanNfcG9pbnRfaXRlcmF0b3JfY29uc3RydWN0b3IoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCBuZXdfdGFyZ2V0LCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2KSB7CiAgSlNQb2ludEl0ZXJhdG9yRGF0YSogczsKICBKU0NvbnRvdXJEYXRhPGRvdWJsZT4qIHY7CiAgSlNWYWx1ZSBvYmogPSBKU19VTkRFRklORUQ7CiAgSlNWYWx1ZSBwcm90bzsKICBhc3NlcnQoMCk7CgogIGlmKGpzX3BvaW50X2l0ZXJhdG9yX2NsYXNzX2lkID09IDApCiAgICBqc19wb2ludF9pdGVyYXRvcl9pbml0KGN0eCwgMCk7CgogIGFzc2VydChqc19wb2ludF9pdGVyYXRvcl9jbGFzc19pZCk7CgogIHMgPSBqc19hbGxvY2F0ZTxKU1BvaW50SXRlcmF0b3JEYXRhPihjdHgpOwogIGlmKCFzKQogICAgcmV0dXJuIEpTX0VYQ0VQVElPTjsKCiAgbmV3KHMpIEpTUG9pbnRJdGVyYXRvckRhdGEoKTsKCiAgdiA9IHN0YXRpY19jYXN0PEpTQ29udG91ckRhdGE8ZG91YmxlPio+KEpTX0dldE9wYXF1ZShhcmd2WzBdLCAwIC8qanNfY29udG91cl9jbGFzc19pZCovKSk7CgogIHMtPmZpcnN0ID0gJigqdilbMF07CiAgcy0+c2Vjb25kID0gcy0+Zmlyc3QgKyB2LT5zaXplKCk7CgogIHByb3RvID0gSlNfR2V0UHJvcGVydHlTdHIoY3R4LCBuZXdfdGFyZ2V0LCAicHJvdG90eXBlIik7CiAgaWYoSlNfSXNFeGNlcHRpb24ocHJvdG8pKQogICAgZ290byBmYWlsOwogIG9iaiA9IEpTX05ld09iamVjdFByb3RvQ2xhc3MoY3R4LCBwcm90bywganNfcG9pbnRfaXRlcmF0b3JfY2xhc3NfaWQpOwogIEpTX0ZyZWVWYWx1ZShjdHgsIHByb3RvKTsKICBpZihKU19Jc0V4Y2VwdGlvbihvYmopKQogICAgZ290byBmYWlsOwogIEpTX1NldE9wYXF1ZShvYmosIHMpOwogIHJldHVybiBvYmo7CmZhaWw6CiAganNfZGVhbGxvY2F0ZShjdHgsIHMpOwogIEpTX0ZyZWVWYWx1ZShjdHgsIG9iaik7CiAgcmV0dXJuIEpTX0VYQ0VQVElPTjsKfQoKc3RhdGljIEpTVmFsdWUKanNfcG9pbnRfaXRlcmF0b3JfZHVwKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QqIGFyZ3YpIHsKICByZXR1cm4gSlNfRHVwVmFsdWUoY3R4LCB0aGlzX3ZhbCk7Cn0Kc3RhdGljIHZvaWQKanNfcG9pbnRfaXRlcmF0b3JfZmluYWxpemVyKEpTUnVudGltZSogcnQsIEpTVmFsdWUgdmFsKSB7CiAgSlNQb2ludEl0ZXJhdG9yRGF0YSogcyA9IHN0YXRpY19jYXN0PEpTUG9pbnRJdGVyYXRvckRhdGEqPihKU19HZXRPcGFxdWUodmFsLCBqc19wb2ludF9pdGVyYXRvcl9jbGFzc19pZCkpOwogIC8qIE5vdGU6ICdzJyBjYW4gYmUgTlVMTCBpbiBjYXNlIEpTX1NldE9wYXF1ZSgpIHdhcyBub3QgY2FsbGVkICovCgogIGlmKHMgIT0gbnVsbHB0cikKICAgIGpzX2RlYWxsb2NhdGUocnQsIHMpOwoKICAvLyBKU19GcmVlVmFsdWVSVChydCwgdmFsKTsKfQpleHRlcm4gIkMiIHsKSlNDbGFzc0RlZiBqc19wb2ludF9pdGVyYXRvcl9jbGFzcyA9IHsKICAgIC5jbGFzc19uYW1lID0gIlBvaW50SXRlcmF0b3IiLAogICAgLmZpbmFsaXplciA9IGpzX3BvaW50X2l0ZXJhdG9yX2ZpbmFsaXplciwKfTsKCmNvbnN0IEpTQ0Z1bmN0aW9uTGlzdEVudHJ5IGpzX3BvaW50X2l0ZXJhdG9yX3Byb3RvX2Z1bmNzW10gPSB7CiAgICBKU19JVEVSQVRPUl9ORVhUX0RFRigibmV4dCIsIDAsIGpzX3BvaW50X2l0ZXJhdG9yX25leHQsIDApLAogICAgSlNfQ0ZVTkNfREVGKCJbU3ltYm9sLml0ZXJhdG9yXSIsIDAsIGpzX3BvaW50X2l0ZXJhdG9yX2R1cCksCiAgICBKU19QUk9QX1NUUklOR19ERUYoIltTeW1ib2wudG9TdHJpbmdUYWddIiwgIlBvaW50SXRlcmF0b3IiLCBKU19QUk9QX0NPTkZJR1VSQUJMRSksCn07CgppbnQKanNfcG9pbnRfaXRlcmF0b3JfaW5pdChKU0NvbnRleHQqIGN0eCwgSlNNb2R1bGVEZWYqIG0pIHsKCiAgaWYoanNfcG9pbnRfaXRlcmF0b3JfY2xhc3NfaWQgPT0gMCkgewogICAgLyogY3JlYXRlIHRoZSBQb2ludEl0ZXJhdG9yIGNsYXNzICovCiAgICBKU19OZXdDbGFzc0lEKCZqc19wb2ludF9pdGVyYXRvcl9jbGFzc19pZCk7CiAgICBKU19OZXdDbGFzcyhKU19HZXRSdW50aW1lKGN0eCksIGpzX3BvaW50X2l0ZXJhdG9yX2NsYXNzX2lkLCAmanNfcG9pbnRfaXRlcmF0b3JfY2xhc3MpOwoKICAgIHBvaW50X2l0ZXJhdG9yX3Byb3RvID0gSlNfTmV3T2JqZWN0KGN0eCk7CiAgICBKU19TZXRQcm9wZXJ0eUZ1bmN0aW9uTGlzdChjdHgsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb2ludF9pdGVyYXRvcl9wcm90bywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGpzX3BvaW50X2l0ZXJhdG9yX3Byb3RvX2Z1bmNzLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY291bnRvZihqc19wb2ludF9pdGVyYXRvcl9wcm90b19mdW5jcykpOwogICAgSlNfU2V0Q2xhc3NQcm90byhjdHgsIGpzX3BvaW50X2l0ZXJhdG9yX2NsYXNzX2lkLCBwb2ludF9pdGVyYXRvcl9wcm90byk7CgogICAgcG9pbnRfaXRlcmF0b3JfY2xhc3MgPSBKU19OZXdDRnVuY3Rpb24yKGN0eCwganNfcG9pbnRfaXRlcmF0b3JfY29uc3RydWN0b3IsICJQb2ludEl0ZXJhdG9yIiwgMiwgSlNfQ0ZVTkNfY29uc3RydWN0b3IsIDApOwogICAgLyogc2V0IHByb3RvLmNvbnN0cnVjdG9yIGFuZCBjdG9yLnByb3RvdHlwZSAqLwoKICAgIEpTX1NldENvbnN0cnVjdG9yKGN0eCwgcG9pbnRfaXRlcmF0b3JfY2xhc3MsIHBvaW50X2l0ZXJhdG9yX3Byb3RvKTsKICAgIC8vIEpTX1NldFByb3BlcnR5RnVuY3Rpb25MaXN0KGN0eCwgcG9pbnRfaXRlcmF0b3JfY2xhc3MsIGpzX3BvaW50X2l0ZXJhdG9yX3N0YXRpY19mdW5jcywKICAgIC8vIGNvdW50b2YoanNfcG9pbnRfaXRlcmF0b3Jfc3RhdGljX2Z1bmNzKSk7CiAgfQoKICBpZihtKQogICAgSlNfU2V0TW9kdWxlRXhwb3J0KGN0eCwgbSwgIlBvaW50SXRlcmF0b3IiLCBwb2ludF9pdGVyYXRvcl9jbGFzcyk7CiAgLyogZWxzZQogICAgIEpTX1NldFByb3BlcnR5U3RyKGN0eCwgKnN0YXRpY19jYXN0PEpTVmFsdWUqPihtKSwgbmFtZSwgcG9pbnRfaXRlcmF0b3JfY2xhc3MpOyovCiAgcmV0dXJuIDA7Cn0KCmV4dGVybiAiQyIgVklTSUJMRSB2b2lkCmpzX3BvaW50X2l0ZXJhdG9yX2V4cG9ydChKU0NvbnRleHQqIGN0eCwgSlNNb2R1bGVEZWYqIG0pIHsKICBKU19BZGRNb2R1bGVFeHBvcnQoY3R4LCBtLCAiUG9pbnRJdGVyYXRvciIpOwp9CgojaWYgZGVmaW5lZChKU19QT0lOVF9JVEVSQVRPUl9NT0RVTEUpCiNkZWZpbmUgSlNfSU5JVF9NT0RVTEUgLypWSVNJQkxFKi8ganNfaW5pdF9tb2R1bGUKI2Vsc2UKI2RlZmluZSBKU19JTklUX01PRFVMRSAvKlZJU0lCTEUqLyBqc19pbml0X21vZHVsZV9wb2ludF9pdGVyYXRvcgojZW5kaWYKCkpTTW9kdWxlRGVmKgpKU19JTklUX01PRFVMRShKU0NvbnRleHQqIGN0eCwgY29uc3QgY2hhciogbW9kdWxlX25hbWUpIHsKICBKU01vZHVsZURlZiogbTsKICBtID0gSlNfTmV3Q01vZHVsZShjdHgsIG1vZHVsZV9uYW1lLCAmanNfcG9pbnRfaXRlcmF0b3JfaW5pdCk7CiAgaWYoIW0pCiAgICByZXR1cm4gTlVMTDsKICBqc19wb2ludF9pdGVyYXRvcl9leHBvcnQoY3R4LCBtKTsKICByZXR1cm4gbTsKfQoKc3RhdGljIEpTVmFsdWUKanNfcG9pbnRfaXRlcmF0b3JfdG9fc3RyaW5nKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QqIGFyZ3YpIHsKICBKU1BvaW50SXRlcmF0b3JEYXRhKiBzID0gc3RhdGljX2Nhc3Q8SlNQb2ludEl0ZXJhdG9yRGF0YSo+KEpTX0dldE9wYXF1ZTIoY3R4LCB0aGlzX3ZhbCwganNfcG9pbnRfaXRlcmF0b3JfY2xhc3NfaWQpKTsKICBzdGQ6Om9zdHJpbmdzdHJlYW0gb3M7CiAgaWYoIXMpCiAgICByZXR1cm4gSlNfRVhDRVBUSU9OOwoKICAvLyBvcyA8PCAie3g6IiA8PCBzLT54IDw8ICIseToiIDw8IHMtPnkgPDwgIn0iIDw8IHN0ZDo6ZW5kbDsKCiAgcmV0dXJuIEpTX05ld1N0cmluZyhjdHgsIG9zLnN0cigpLmNfc3RyKCkpOwp9Cn0AAAAAAAAAAJsXAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAFRYAAAAAAAAVFgAAAAAAAAAAAAAAAPC/"
				]
			]
		},
		{
			"file": "js_rect.cpp",
			"settings":
			{
				"buffer_size": 18566,
				"encoding": "UTF-8",
				"line_ending": "Unix"
			},
			"undo_stack":
			[
				[
					1,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAADPSAAAI2luY2x1ZGUgImpzYmluZGluZ3MuaHBwIgojaW5jbHVkZSAianNfcmVjdC5ocHAiCiNpbmNsdWRlICJqc19zaXplLmhwcCIKI2luY2x1ZGUgImpzX3BvaW50LmhwcCIKI2luY2x1ZGUgImpzX2FsbG9jLmhwcCIKI2luY2x1ZGUgImpzX2FycmF5LmhwcCIKI2luY2x1ZGUgImpzX3R5cGVkX2FycmF5LmhwcCIKI2luY2x1ZGUgInV0aWwuaHBwIgoKZXh0ZXJuICJDIiB7CkpTVmFsdWUgcmVjdF9wcm90byA9IEpTX1VOREVGSU5FRCwgcmVjdF9jbGFzcyA9IEpTX1VOREVGSU5FRDsKSlNDbGFzc0lEIGpzX3JlY3RfY2xhc3NfaWQgPSAwOwp9CgpleHRlcm4gIkMiIFZJU0lCTEUgSlNWYWx1ZQpqc19yZWN0X25ldyhKU0NvbnRleHQqIGN0eCwgZG91YmxlIHgsIGRvdWJsZSB5LCBkb3VibGUgdywgZG91YmxlIGgpIHsKICBKU1ZhbHVlIHJldDsKICBKU1JlY3REYXRhPGRvdWJsZT4qIHM7CgogIGlmKEpTX0lzVW5kZWZpbmVkKHJlY3RfcHJvdG8pKQogICAganNfcmVjdF9pbml0KGN0eCwgTlVMTCk7CgogIHJldCA9IEpTX05ld09iamVjdFByb3RvQ2xhc3MoY3R4LCByZWN0X3Byb3RvLCBqc19yZWN0X2NsYXNzX2lkKTsKCiAgcyA9IGpzX2FsbG9jYXRlPEpTUmVjdERhdGE8ZG91YmxlPj4oY3R4KTsKCiAgbmV3KHMpIEpTUmVjdERhdGE8ZG91YmxlPigpOwogIHMtPnggPSB4IDw9IERCTF9FUFNJTE9OID8gMCA6IHg7CiAgcy0+eSA9IHkgPD0gREJMX0VQU0lMT04gPyAwIDogeTsKICBzLT53aWR0aCA9IHcgPD0gREJMX0VQU0lMT04gPyAwIDogdzsKICBzLT5oZWlnaHQgPSBoIDw9IERCTF9FUFNJTE9OID8gMCA6IGg7CgogIEpTX1NldE9wYXF1ZShyZXQsIHMpOwogIHJldHVybiByZXQ7Cn0KClZJU0lCTEUgSlNWYWx1ZQpqc19yZWN0X3dyYXAoSlNDb250ZXh0KiBjdHgsIGNvbnN0IEpTUmVjdERhdGE8ZG91YmxlPiYgcmVjdCkgewogIHJldHVybiBqc19yZWN0X25ldyhjdHgsIHJlY3QueCwgcmVjdC55LCByZWN0LndpZHRoLCByZWN0LmhlaWdodCk7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX3JlY3RfY3RvcihKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IG5ld190YXJnZXQsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QqIGFyZ3YpIHsKICBkb3VibGUgeCA9IDAsIHkgPSAwLCB3ID0gMCwgaCA9IDA7CiAgSlNSZWN0RGF0YTxkb3VibGU+IHJlY3QgPSB7MCwgMCwgMCwgMH07CiAgaW50IG9wdGluZCA9IDA7CgogIGlmKGFyZ2MgPiAwKSB7CiAgICBpZighanNfcmVjdF9yZWFkKGN0eCwgYXJndlswXSwgJnJlY3QpKSB7CiAgICAgIEpTUG9pbnREYXRhPGRvdWJsZT4gcG9pbnQsIHBvaW50MjsKICAgICAgSlNTaXplRGF0YTxkb3VibGU+IHNpemU7CiAgICAgIHdoaWxlKG9wdGluZCA8IGFyZ2MpIHsKICAgICAgICBpZihKU19Jc051bWJlcihhcmd2W29wdGluZF0pICYmIEpTX0lzTnVtYmVyKGFyZ3Zbb3B0aW5kICsgMV0pKSB7CiAgICAgICAgICBpZihvcHRpbmQgPT0gMCkgewogICAgICAgICAgICBKU19Ub0Zsb2F0NjQoY3R4LCAmeCwgYXJndltvcHRpbmRdKTsKICAgICAgICAgICAgSlNfVG9GbG9hdDY0KGN0eCwgJnksIGFyZ3Zbb3B0aW5kICsgMV0pOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgSlNfVG9GbG9hdDY0KGN0eCwgJncsIGFyZ3Zbb3B0aW5kXSk7CiAgICAgICAgICAgIEpTX1RvRmxvYXQ2NChjdHgsICZoLCBhcmd2W29wdGluZCArIDFdKTsKICAgICAgICAgIH0KICAgICAgICAgIG9wdGluZCArPSAyOwogICAgICAgIH0gZWxzZSBpZihqc19wb2ludF9yZWFkKGN0eCwgYXJndltvcHRpbmRdLCBvcHRpbmQgPT0gMCA/ICZwb2ludCA6ICZwb2ludDIpKSB7CiAgICAgICAgICBpZihvcHRpbmQgPT0gMCkgewogICAgICAgICAgICB4ID0gcG9pbnQueDsKICAgICAgICAgICAgeSA9IHBvaW50Lnk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB3ID0gcG9pbnQyLnggLSB4OwogICAgICAgICAgICBoID0gcG9pbnQyLnkgLSB5OwogICAgICAgICAgfQogICAgICAgICAgb3B0aW5kKys7CiAgICAgICAgfQoKICAgICAgICBlbHNlIGlmKGpzX3NpemVfcmVhZChjdHgsIGFyZ3Zbb3B0aW5kXSwgJnNpemUpKSB7CiAgICAgICAgICB3ID0gc2l6ZS53aWR0aDsKICAgICAgICAgIGggPSBzaXplLmhlaWdodDsKICAgICAgICAgIG9wdGluZCsrOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBvcHRpbmQrKzsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICB9CgogIHJldHVybiBqc19yZWN0X25ldyhjdHgsIHgsIHksIHcsIGgpOwp9CgpWSVNJQkxFIEpTUmVjdERhdGE8ZG91YmxlPioKanNfcmVjdF9kYXRhKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdmFsKSB7CiAgcmV0dXJuIHN0YXRpY19jYXN0PEpTUmVjdERhdGE8ZG91YmxlPio+KEpTX0dldE9wYXF1ZTIoY3R4LCB2YWwsIGpzX3JlY3RfY2xhc3NfaWQpKTsKfQoKZW51bSB7IFBST1BfWCA9IDAsIFBST1BfWSwgUFJPUF9XSURUSCwgUFJPUF9IRUlHSFQsIFBST1BfWDIsIFBST1BfWTIsIFBST1BfUE9TLCBQUk9QX1NJWkUgfTsKCnN0YXRpYyBKU1ZhbHVlCmpzX3JlY3RfZ2V0KEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBtYWdpYykgewogIEpTVmFsdWUgcmV0ID0gSlNfVU5ERUZJTkVEOwogIEpTUmVjdERhdGE8ZG91YmxlPiogczsKCiAgaWYoKHMgPSBzdGF0aWNfY2FzdDxKU1JlY3REYXRhPGRvdWJsZT4qPihKU19HZXRPcGFxdWUyKGN0eCwgdGhpc192YWwsIGpzX3JlY3RfY2xhc3NfaWQpKSkgPT0gbnVsbHB0cikKICAgIHJldHVybiBKU19FWENFUFRJT047CgogIHN3aXRjaChtYWdpYykgewogICAgY2FzZSBQUk9QX1g6IHsKICAgICAgcmV0ID0gSlNfTmV3RmxvYXQ2NChjdHgsIHMtPngpOwogICAgICBicmVhazsKICAgIH0KICAgIGNhc2UgUFJPUF9ZOiB7CiAgICAgIHJldCA9IEpTX05ld0Zsb2F0NjQoY3R4LCBzLT55KTsKICAgICAgYnJlYWs7CiAgICB9CiAgICBjYXNlIFBST1BfV0lEVEg6IHsKICAgICAgcmV0ID0gSlNfTmV3RmxvYXQ2NChjdHgsIHMtPndpZHRoKTsKICAgICAgYnJlYWs7CiAgICB9CiAgICBjYXNlIFBST1BfSEVJR0hUOiB7CiAgICAgIHJldCA9IEpTX05ld0Zsb2F0NjQoY3R4LCBzLT5oZWlnaHQpOwogICAgICBicmVhazsKICAgIH0KICAgIGNhc2UgUFJPUF9YMjogewogICAgICByZXQgPSBKU19OZXdGbG9hdDY0KGN0eCwgcy0+eCArIHMtPndpZHRoKTsKICAgICAgYnJlYWs7CiAgICB9CiAgICBjYXNlIFBST1BfWTI6IHsKICAgICAgcmV0ID0gSlNfTmV3RmxvYXQ2NChjdHgsIHMtPnkgKyBzLT5oZWlnaHQpOwogICAgICBicmVhazsKICAgIH0KICAgIGNhc2UgUFJPUF9QT1M6IHsKICAgICAgcmV0ID0ganNfcG9pbnRfbmV3KGN0eCwgcy0+eCwgcy0+eSk7CiAgICAgIGJyZWFrOwogICAgfQogICAgY2FzZSBQUk9QX1NJWkU6IHsKICAgICAgcmV0ID0ganNfc2l6ZV9uZXcoY3R4LCBzLT53aWR0aCwgcy0+aGVpZ2h0KTsKICAgICAgYnJlYWs7CiAgICB9CiAgfQogIHJldHVybiByZXQ7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX3JlY3Rfc2V0KEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIEpTVmFsdWVDb25zdCB2YWwsIGludCBtYWdpYykgewogIEpTUmVjdERhdGE8ZG91YmxlPiogczsKICBkb3VibGUgdjsKICBpZigocyA9IHN0YXRpY19jYXN0PEpTUmVjdERhdGE8ZG91YmxlPio+KEpTX0dldE9wYXF1ZTIoY3R4LCB0aGlzX3ZhbCwganNfcmVjdF9jbGFzc19pZCkpKSA9PSBudWxscHRyKQogICAgcmV0dXJuIEpTX0VYQ0VQVElPTjsKCiAgaWYoSlNfVG9GbG9hdDY0KGN0eCwgJnYsIHZhbCkpCiAgICByZXR1cm4gSlNfRVhDRVBUSU9OOwoKICBzd2l0Y2gobWFnaWMpIHsKICAgIGNhc2UgUFJPUF9YOiB7CiAgICAgIHMtPnggPSB2OwogICAgICBicmVhazsKICAgIH0KICAgIGNhc2UgUFJPUF9ZOiB7CiAgICAgIHMtPnkgPSB2OwogICAgICBicmVhazsKICAgIH0KICAgIGNhc2UgUFJPUF9XSURUSDogewogICAgICBzLT53aWR0aCA9IHY7CiAgICAgIGJyZWFrOwogICAgfQogICAgY2FzZSBQUk9QX0hFSUdIVDogewogICAgICBzLT5oZWlnaHQgPSB2OwogICAgICBicmVhazsKICAgIH0KICAgIGNhc2UgUFJPUF9YMjogewogICAgICBzLT53aWR0aCA9IHYgLSBzLT54OwogICAgICBicmVhazsKICAgIH0KICAgIGNhc2UgUFJPUF9ZMjogewogICAgICBzLT5oZWlnaHQgPSB2IC0gcy0+eTsKICAgICAgYnJlYWs7CiAgICB9CiAgICBjYXNlIFBST1BfUE9TOiB7CiAgICAgIEpTUG9pbnREYXRhPGRvdWJsZT4gcG9pbnQ7CiAgICAgIGpzX3BvaW50X3JlYWQoY3R4LCB2YWwsICZwb2ludCk7CiAgICAgIHMtPnggPSBwb2ludC54OwogICAgICBzLT55ID0gcG9pbnQueTsKICAgICAgYnJlYWs7CiAgICB9CiAgICBjYXNlIFBST1BfU0laRTogewogICAgICBKU1NpemVEYXRhPGRvdWJsZT4gc2l6ZTsKICAgICAganNfc2l6ZV9yZWFkKGN0eCwgdmFsLCAmc2l6ZSk7CiAgICAgIHMtPndpZHRoID0gc2l6ZS53aWR0aDsKICAgICAgcy0+aGVpZ2h0ID0gc2l6ZS5oZWlnaHQ7CiAgICAgIGJyZWFrOwogICAgfQogIH0KCiAgcmV0dXJuIEpTX1VOREVGSU5FRDsKfQoKc3RhdGljIEpTVmFsdWUKanNfcmVjdF90b19zdHJpbmcoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCogYXJndikgewogIEpTUmVjdERhdGE8ZG91YmxlPiByZWN0LCAqczsKICBzdGQ6Om9zdHJpbmdzdHJlYW0gb3M7CiAgc3RkOjphcnJheTxjb25zdCBjaGFyKiwgMz4gZGVsaW1zID0gewogICAgICAiLCIsCiAgICAgICLiiKMiIC8q772c4qe44qaB4o6u4oil4oij4ri+4ryB4p2Y4p2Z4p+K4o2/4o644o+Q772c4pSC77+o77iy77ix4p2YfO+9nCovLAogICAgICAiw5ciIC8qIvCdhYPwn4Wn8J2aofCfhafwn4WH8J2YufCdmqHwnZi58J2Qseqtl/CdkJfwnZG/8J2Fg/CdhYN4y6PigpPikrPik43ik6finJXinJjinJfiqIniqK/iqILinJbiqLvipoHii4XiipfiiqDiiJfDl+Kor8OXIiovfTsKCiAgZm9yKHNpemVfdCBpID0gMDsgaSA8IGFyZ2M7IGkrKykgeyBkZWxpbXNbaV0gPSBKU19Ub0NTdHJpbmcoY3R4LCBhcmd2W2ldKTsgfQoKICBpZigocyA9IHN0YXRpY19jYXN0PEpTUmVjdERhdGE8ZG91YmxlPio+KEpTX0dldE9wYXF1ZTIoY3R4LCB0aGlzX3ZhbCwganNfcmVjdF9jbGFzc19pZCkpKSAhPSBudWxscHRyKSB7CiAgICByZWN0ID0gKnM7CiAgfSBlbHNlIHsKICAgIGpzX3JlY3RfcmVhZChjdHgsIHRoaXNfdmFsLCAmcmVjdCk7CiAgfQoKICBvcyA8PCByZWN0LnggPDwgZGVsaW1zWzBdIDw8IHJlY3QueSA8PCBkZWxpbXNbMV0gPDwgcmVjdC53aWR0aCA8PCBkZWxpbXNbMl0gPDwgcmVjdC5oZWlnaHQ7CgogIHJldHVybiBKU19OZXdTdHJpbmcoY3R4LCBvcy5zdHIoKS5jX3N0cigpKTsKfQpzdGF0aWMgSlNWYWx1ZQpqc19yZWN0X3RvX3NvdXJjZShKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2KSB7CiAgSlNSZWN0RGF0YTxkb3VibGU+IHJlY3QsICpzOwogIHN0ZDo6b3N0cmluZ3N0cmVhbSBvczsKCiAgaWYoKHMgPSBzdGF0aWNfY2FzdDxKU1JlY3REYXRhPGRvdWJsZT4qPihKU19HZXRPcGFxdWUyKGN0eCwgdGhpc192YWwsIGpzX3JlY3RfY2xhc3NfaWQpKSkgIT0gbnVsbHB0cikgewogICAgcmVjdCA9ICpzOwogIH0gZWxzZSB7CiAgICBqc19yZWN0X3JlYWQoY3R4LCB0aGlzX3ZhbCwgJnJlY3QpOwogIH0KCiAgb3MgPDwgInt4OiIgPDwgcmVjdC54IDw8ICIseToiIDw8IHJlY3QueSA8PCAiLHdpZHRoOiIgPDwgcmVjdC53aWR0aCA8PCAiLGhlaWdodDoiIDw8IHJlY3QuaGVpZ2h0IDw8ICJ9IjsKCiAgcmV0dXJuIEpTX05ld1N0cmluZyhjdHgsIG9zLnN0cigpLmNfc3RyKCkpOwp9CgplbnVtIHsgRlVOQ19FUVVBTFMgPSAwLCBGVU5DX1JPVU5ELCBGVU5DX1RPT0JKRUNULCBGVU5DX1RPQVJSQVkgfTsKCnN0YXRpYyBKU1ZhbHVlCmpzX3JlY3RfZnVuY3MoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCogYXJndiwgaW50IG1hZ2ljKSB7CiAgSlNSZWN0RGF0YTxkb3VibGU+IHJlY3QsIG90aGVyLCAqcywgKmE7CiAgSlNWYWx1ZSByZXQgPSBKU19FWENFUFRJT047CgogIGlmKChzID0ganNfcmVjdF9kYXRhKGN0eCwgdGhpc192YWwpKSA9PSBudWxscHRyKQogICAgcmV0dXJuIHJldDsKCiAgcmVjdCA9ICpzOwoKICBzd2l0Y2gobWFnaWMpIHsKICAgIGNhc2UgRlVOQ19FUVVBTFM6IHsKICAgICAganNfcmVjdF9yZWFkKGN0eCwgYXJndlswXSwgJm90aGVyKTsKICAgICAgYm9vbCBlcXVhbHMgPSByZWN0LnggPT0gb3RoZXIueCAmJiByZWN0LnkgPT0gb3RoZXIueSAmJiByZWN0LndpZHRoID09IG90aGVyLndpZHRoICYmIHJlY3QuaGVpZ2h0ID09IG90aGVyLmhlaWdodDsKICAgICAgcmV0ID0gSlNfTmV3Qm9vbChjdHgsIGVxdWFscyk7CiAgICAgIGJyZWFrOwogICAgfQogICAgY2FzZSBGVU5DX1JPVU5EOiB7CiAgICAgIGRvdWJsZSB4LCB5LCB3aWR0aCwgaGVpZ2h0LCBmOwogICAgICBpbnQzMl90IHByZWNpc2lvbiA9IDA7CiAgICAgIGlmKGFyZ2MgPiAwKQogICAgICAgIEpTX1RvSW50MzIoY3R4LCAmcHJlY2lzaW9uLCBhcmd2WzBdKTsKICAgICAgZiA9IHN0ZDo6cG93KDEwLCBwcmVjaXNpb24pOwogICAgICB4ID0gc3RkOjpyb3VuZChyZWN0LnggKiBmKSAvIGY7CiAgICAgIHkgPSBzdGQ6OnJvdW5kKHJlY3QueSAqIGYpIC8gZjsKICAgICAgd2lkdGggPSBzdGQ6OnJvdW5kKHJlY3Qud2lkdGggKiBmKSAvIGY7CiAgICAgIGhlaWdodCA9IHN0ZDo6cm91bmQocmVjdC5oZWlnaHQgKiBmKSAvIGY7CiAgICAgIHJldCA9IGpzX3JlY3RfbmV3KGN0eCwgeCwgeSwgd2lkdGgsIGhlaWdodCk7CiAgICAgIGJyZWFrOwogICAgfQogICAgY2FzZSBGVU5DX1RPT0JKRUNUOiB7CiAgICAgIHJldCA9IEpTX05ld09iamVjdChjdHgpOwoKICAgICAgSlNfU2V0UHJvcGVydHlTdHIoY3R4LCByZXQsICJ4IiwgSlNfTmV3RmxvYXQ2NChjdHgsIHJlY3QueCkpOwogICAgICBKU19TZXRQcm9wZXJ0eVN0cihjdHgsIHJldCwgInkiLCBKU19OZXdGbG9hdDY0KGN0eCwgcmVjdC55KSk7CiAgICAgIEpTX1NldFByb3BlcnR5U3RyKGN0eCwgcmV0LCAid2lkdGgiLCBKU19OZXdGbG9hdDY0KGN0eCwgcmVjdC53aWR0aCkpOwogICAgICBKU19TZXRQcm9wZXJ0eVN0cihjdHgsIHJldCwgImhlaWdodCIsIEpTX05ld0Zsb2F0NjQoY3R4LCByZWN0LmhlaWdodCkpOwogICAgICBicmVhazsKICAgIH0KICAgIGNhc2UgRlVOQ19UT0FSUkFZOiB7CiAgICAgIHN0ZDo6YXJyYXk8ZG91YmxlLCA0PiBhcnJheXtyZWN0LngsIHJlY3QueSwgcmVjdC53aWR0aCwgcmVjdC5oZWlnaHR9OwoKICAgICAgcmV0ID0ganNfYXJyYXlfZnJvbShjdHgsIGFycmF5LmNiZWdpbigpLCBhcnJheS5jZW5kKCkpOwogICAgICBicmVhazsKICAgIH0KICB9CgogIHJldHVybiByZXQ7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX3JlY3RfaW5zcGVjdChKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2KSB7CiAgSlNSZWN0RGF0YTxkb3VibGU+KiByID0ganNfcmVjdF9kYXRhKGN0eCwgdGhpc192YWwpOwogIEpTVmFsdWUgb2JqID0gSlNfTmV3T2JqZWN0UHJvdG8oY3R4LCByZWN0X3Byb3RvKTsKCiAgSlNfRGVmaW5lUHJvcGVydHlWYWx1ZVN0cihjdHgsIG9iaiwgIngiLCBKU19OZXdGbG9hdDY0KGN0eCwgci0+eCksIEpTX1BST1BfRU5VTUVSQUJMRSk7CiAgSlNfRGVmaW5lUHJvcGVydHlWYWx1ZVN0cihjdHgsIG9iaiwgInkiLCBKU19OZXdGbG9hdDY0KGN0eCwgci0+eSksIEpTX1BST1BfRU5VTUVSQUJMRSk7CiAgSlNfRGVmaW5lUHJvcGVydHlWYWx1ZVN0cihjdHgsIG9iaiwgIndpZHRoIiwgSlNfTmV3RmxvYXQ2NChjdHgsIHItPndpZHRoKSwgSlNfUFJPUF9FTlVNRVJBQkxFKTsKICBKU19EZWZpbmVQcm9wZXJ0eVZhbHVlU3RyKGN0eCwgb2JqLCAiaGVpZ2h0IiwgSlNfTmV3RmxvYXQ2NChjdHgsIHItPmhlaWdodCksIEpTX1BST1BfRU5VTUVSQUJMRSk7CiAgcmV0dXJuIG9iajsKfQoKZW51bSB7CiAgTUVUSE9EX0NPTlRBSU5TID0gMCwKICBNRVRIT0RfRU1QVFksCiAgTUVUSE9EX0FSRUEsCiAgTUVUSE9EX0JSLAogIE1FVEhPRF9UTCwKICBNRVRIT0RfU0laRSwKICBNRVRIT0RfSU5TRVQsCiAgTUVUSE9EX09VVFNFVCwKICBNRVRIT0RfSFNQTElULAogIE1FVEhPRF9WU1BMSVQKfTsKCnN0YXRpYyBKU1ZhbHVlCmpzX3JlY3RfbWV0aG9kKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgcmVjdCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCogYXJndiwgaW50IG1hZ2ljKSB7CiAgSlNSZWN0RGF0YTxkb3VibGU+KiBzID0gc3RhdGljX2Nhc3Q8SlNSZWN0RGF0YTxkb3VibGU+Kj4oSlNfR2V0T3BhcXVlMihjdHgsIHJlY3QsIGpzX3JlY3RfY2xhc3NfaWQpKTsKICBKU1ZhbHVlIHJldCA9IEpTX1VOREVGSU5FRDsKICBKU1BvaW50RGF0YTxkb3VibGU+IHBvaW50ID0ganNfcG9pbnRfZ2V0KGN0eCwgYXJndlswXSk7CgogIHN3aXRjaChtYWdpYykgewogICAgY2FzZSBNRVRIT0RfQ09OVEFJTlM6IHsKICAgICAgcmV0ID0gSlNfTmV3Qm9vbChjdHgsIHMtPmNvbnRhaW5zKHBvaW50KSk7CiAgICAgIGJyZWFrOwogICAgfQogICAgY2FzZSBNRVRIT0RfRU1QVFk6IHsKICAgICAgcmV0ID0gSlNfTmV3Qm9vbChjdHgsIHMtPmVtcHR5KCkpOwogICAgICBicmVhazsKICAgIH0KICAgIGNhc2UgTUVUSE9EX0FSRUE6IHsKICAgICAgcmV0ID0gSlNfTmV3RmxvYXQ2NChjdHgsIHMtPmFyZWEoKSk7CiAgICAgIGJyZWFrOwogICAgfQogICAgY2FzZSBNRVRIT0RfQlI6CiAgICBjYXNlIE1FVEhPRF9UTDogewogICAgICBKU1BvaW50RGF0YTxkb3VibGU+IHB0ID0gbWFnaWMgPT0gMyA/IHMtPmJyKCkgOiBzLT50bCgpOwoKICAgICAgcmV0ID0ganNfcG9pbnRfbmV3KGN0eCwgcHQueCwgcHQueSk7CiAgICAgIGJyZWFrOwogICAgfQogICAgY2FzZSBNRVRIT0RfU0laRTogewogICAgICBjdjo6U2l6ZTJkIHN6ID0gcy0+c2l6ZSgpOwogICAgICByZXQgPSBqc19zaXplX25ldyhjdHgsIHN6LndpZHRoLCBzei5oZWlnaHQpOwogICAgICBicmVhazsKICAgIH0KICAgIGNhc2UgTUVUSE9EX0lOU0VUOiB7CiAgICAgIEpTUmVjdERhdGE8ZG91YmxlPiByZWN0ID0gKnM7CiAgICAgIGlmKGFyZ2MgPj0gMSkgewogICAgICAgIGRvdWJsZSBuOwogICAgICAgIEpTX1RvRmxvYXQ2NChjdHgsICZuLCBhcmd2WzBdKTsKICAgICAgICByZWN0LnggKz0gbjsKICAgICAgICByZWN0LndpZHRoIC09IG4gKiAyOwogICAgICAgIHJlY3QueSArPSBuOwogICAgICAgIHJlY3QuaGVpZ2h0IC09IG4gKiAyOwoKICAgICAgfSBlbHNlIGlmKGFyZ2MgPj0gMikgewogICAgICAgIGRvdWJsZSBoLCB2OwogICAgICAgIEpTX1RvRmxvYXQ2NChjdHgsICZoLCBhcmd2WzBdKTsKICAgICAgICBKU19Ub0Zsb2F0NjQoY3R4LCAmdiwgYXJndlsxXSk7CiAgICAgICAgcmVjdC54ICs9IGg7CiAgICAgICAgcmVjdC53aWR0aCAtPSBoICogMjsKICAgICAgICByZWN0LnkgKz0gdjsKICAgICAgICByZWN0LmhlaWdodCAtPSB2ICogMjsKCiAgICAgIH0gZWxzZSBpZihhcmdjID49IDQpIHsKICAgICAgICBkb3VibGUgdCwgciwgYiwgbDsKICAgICAgICBKU19Ub0Zsb2F0NjQoY3R4LCAmdCwgYXJndlswXSk7CiAgICAgICAgSlNfVG9GbG9hdDY0KGN0eCwgJnIsIGFyZ3ZbMV0pOwogICAgICAgIEpTX1RvRmxvYXQ2NChjdHgsICZiLCBhcmd2WzJdKTsKICAgICAgICBKU19Ub0Zsb2F0NjQoY3R4LCAmbCwgYXJndlszXSk7CiAgICAgICAgcmVjdC54ICs9IGw7CiAgICAgICAgcmVjdC53aWR0aCAtPSBsICsgcjsKICAgICAgICByZWN0LnkgKz0gdDsKICAgICAgICByZWN0LmhlaWdodCAtPSB0ICsgYjsKICAgICAgfQogICAgICByZXQgPSBqc19yZWN0X3dyYXAoY3R4LCByZWN0KTsKICAgICAgYnJlYWs7CiAgICB9CgogICAgY2FzZSBNRVRIT0RfT1VUU0VUOiB7CiAgICAgIEpTUmVjdERhdGE8ZG91YmxlPiByZWN0ID0gKnM7CiAgICAgIGlmKGFyZ2MgPj0gMSkgewogICAgICAgIGRvdWJsZSBuOwogICAgICAgIEpTX1RvRmxvYXQ2NChjdHgsICZuLCBhcmd2WzBdKTsKICAgICAgICByZWN0LnggLT0gbjsKICAgICAgICByZWN0LndpZHRoICs9IG4gKiAyOwogICAgICAgIHJlY3QueSAtPSBuOwogICAgICAgIHJlY3QuaGVpZ2h0ICs9IG4gKiAyOwoKICAgICAgfSBlbHNlIGlmKGFyZ2MgPj0gMikgewogICAgICAgIGRvdWJsZSBoLCB2OwogICAgICAgIEpTX1RvRmxvYXQ2NChjdHgsICZoLCBhcmd2WzBdKTsKICAgICAgICBKU19Ub0Zsb2F0NjQoY3R4LCAmdiwgYXJndlsxXSk7CiAgICAgICAgcmVjdC54IC09IGg7CiAgICAgICAgcmVjdC53aWR0aCArPSBoICogMjsKICAgICAgICByZWN0LnkgLT0gdjsKICAgICAgICByZWN0LmhlaWdodCArPSB2ICogMjsKCiAgICAgIH0gZWxzZSBpZihhcmdjID49IDQpIHsKICAgICAgICBkb3VibGUgdCwgciwgYiwgbDsKICAgICAgICBKU19Ub0Zsb2F0NjQoY3R4LCAmdCwgYXJndlswXSk7CiAgICAgICAgSlNfVG9GbG9hdDY0KGN0eCwgJnIsIGFyZ3ZbMV0pOwogICAgICAgIEpTX1RvRmxvYXQ2NChjdHgsICZiLCBhcmd2WzJdKTsKICAgICAgICBKU19Ub0Zsb2F0NjQoY3R4LCAmbCwgYXJndlszXSk7CiAgICAgICAgcmVjdC54IC09IGw7CiAgICAgICAgcmVjdC53aWR0aCArPSBsICsgcjsKICAgICAgICByZWN0LnkgLT0gdDsKICAgICAgICByZWN0LmhlaWdodCArPSB0ICsgYjsKICAgICAgfQogICAgICByZXQgPSBqc19yZWN0X3dyYXAoY3R4LCByZWN0KTsKICAgICAgYnJlYWs7CiAgICB9CiAgICBjYXNlIE1FVEhPRF9IU1BMSVQ6IHsKICAgICAgc3RkOjp2ZWN0b3I8SlNSZWN0RGF0YTxkb3VibGU+PiByZWN0czsKICAgICAgZG91YmxlIHgxID0gcy0+eCwgeDIgPSBzLT54ICsgcy0+d2lkdGg7CiAgICAgIGF1dG8gYXJncyA9IGFyZ3VtZW50X3JhbmdlKGFyZ2MsIGFyZ3YpOwogICAgICBKU1JlY3REYXRhPGRvdWJsZT4qIHByZXY7CiAgICAgIHN0ZDo6dmVjdG9yPGRvdWJsZT4gYnJlYWtwb2ludHM7CiAgICAgIGZvcihKU1ZhbHVlQ29uc3QgY29uc3QmIGFyZyA6IGFyZ3MpIHsKICAgICAgICBkb3VibGUgZDsKICAgICAgICBqc192YWx1ZV90byhjdHgsIGFyZywgZCk7CiAgICAgICAgaWYoZCA8IDApCiAgICAgICAgICBkID0gcy0+d2lkdGggKyBkOwogICAgICAgIGlmKGQgPiAwICYmIGQgPCBzLT53aWR0aCkKICAgICAgICAgIGJyZWFrcG9pbnRzLnB1c2hfYmFjayhkKTsKICAgICAgfQogICAgICBzdGQ6OnNvcnQoYnJlYWtwb2ludHMuYmVnaW4oKSwgYnJlYWtwb2ludHMuZW5kKCkpOwogICAgICByZWN0cy5wdXNoX2JhY2soKnMpOwogICAgICBwcmV2ID0gJnJlY3RzLmJhY2soKTsKICAgICAgZm9yKGRvdWJsZSBoIDogYnJlYWtwb2ludHMpIHsKICAgICAgICAvLyBwcmludGYoImhzcGxpdCBoPSVsZlxuIiwgaCk7CiAgICAgICAgcHJldi0+d2lkdGggPSBoIC0gKHByZXYtPnggLSB4MSk7CiAgICAgICAgcmVjdHMucHVzaF9iYWNrKCpzKTsKICAgICAgICByZWN0cy5iYWNrKCkueCA9IHgxICsgaDsKICAgICAgICBwcmV2ID0gJnJlY3RzLmJhY2soKTsKICAgICAgICBwcmV2LT53aWR0aCA9IHMtPndpZHRoIC0gaDsKICAgICAgfQogICAgICByZXQgPSBqc19hcnJheV9mcm9tKGN0eCwgcmVjdHMpOwogICAgICBicmVhazsKICAgIH0KICAgIGNhc2UgTUVUSE9EX1ZTUExJVDogewogICAgICBzdGQ6OnZlY3RvcjxKU1JlY3REYXRhPGRvdWJsZT4+IHJlY3RzOwogICAgICBkb3VibGUgeTEgPSBzLT55LCB5MiA9IHMtPnkgKyBzLT5oZWlnaHQ7CiAgICAgIGF1dG8gYXJncyA9IGFyZ3VtZW50X3JhbmdlKGFyZ2MsIGFyZ3YpOwogICAgICBKU1JlY3REYXRhPGRvdWJsZT4qIHByZXY7CiAgICAgIHN0ZDo6dmVjdG9yPGRvdWJsZT4gYnJlYWtwb2ludHM7CiAgICAgIGZvcihKU1ZhbHVlQ29uc3QgY29uc3QmIGFyZyA6IGFyZ3MpIHsKICAgICAgICBkb3VibGUgZDsKICAgICAgICBqc192YWx1ZV90byhjdHgsIGFyZywgZCk7CiAgICAgICAgaWYoZCA8IDApCiAgICAgICAgICBkID0gcy0+aGVpZ2h0ICsgZDsKICAgICAgICBpZihkID4gMCAmJiBkIDwgcy0+aGVpZ2h0KQogICAgICAgICAgYnJlYWtwb2ludHMucHVzaF9iYWNrKGQpOwogICAgICB9CiAgICAgIHN0ZDo6c29ydChicmVha3BvaW50cy5iZWdpbigpLCBicmVha3BvaW50cy5lbmQoKSk7CiAgICAgIHJlY3RzLnB1c2hfYmFjaygqcyk7CiAgICAgIHByZXYgPSAmcmVjdHMuYmFjaygpOwogICAgICBmb3IoZG91YmxlIHYgOiBicmVha3BvaW50cykgewogICAgICAgIC8vIHByaW50ZigiaHNwbGl0IHY9JWxmXG4iLCB2KTsKICAgICAgICBwcmV2LT5oZWlnaHQgPSB2IC0gKHByZXYtPnkgLSB5MSk7CiAgICAgICAgcmVjdHMucHVzaF9iYWNrKCpzKTsKICAgICAgICByZWN0cy5iYWNrKCkueSA9IHkxICsgdjsKICAgICAgICBwcmV2ID0gJnJlY3RzLmJhY2soKTsKICAgICAgICBwcmV2LT5oZWlnaHQgPSBzLT5oZWlnaHQgLSB2OwogICAgICB9CiAgICAgIHJldCA9IGpzX2FycmF5X2Zyb20oY3R4LCByZWN0cyk7CiAgICAgIGJyZWFrOwogICAgfQogIH0KCiAgcmV0dXJuIHJldDsKfQoKc3RhdGljIEpTVmFsdWUgaXRlcmF0b3Jfc3ltYm9sID0gSlNfVU5ERUZJTkVEOwoKc3RhdGljIEpTVmFsdWUKanNfcmVjdF9zeW1ib2xfaXRlcmF0b3IoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCogYXJndikgewogIEpTVmFsdWUgYXJyLCBpdGVyOwogIGpzcnQganMoY3R4KTsKICBhcnIgPSBqc19yZWN0X2Z1bmNzKGN0eCwgdGhpc192YWwsIGFyZ2MsIGFyZ3YsIDMpOwoKICBpZihKU19Jc1VuZGVmaW5lZChpdGVyYXRvcl9zeW1ib2wpKQogICAgaXRlcmF0b3Jfc3ltYm9sID0ganMuZ2V0X3N5bWJvbCgiaXRlcmF0b3IiKTsKCiAgaWYoIUpTX0lzRnVuY3Rpb24oY3R4LCAoaXRlciA9IGpzLmdldF9wcm9wZXJ0eShhcnIsIGl0ZXJhdG9yX3N5bWJvbCkpKSkKICAgIHJldHVybiBKU19FWENFUFRJT047CiAgcmV0dXJuIEpTX0NhbGwoY3R4LCBpdGVyLCBhcnIsIDAsIGFyZ3YpOwp9CgpzdGF0aWMgSlNWYWx1ZQpqc19yZWN0X2Zyb20oSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCByZWN0LCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2KSB7CiAgc3RkOjphcnJheTxkb3VibGUsIDQ+IGFycmF5OwogIEpTVmFsdWUgcmV0ID0gSlNfRVhDRVBUSU9OOwoKICBpZihKU19Jc1N0cmluZyhhcmd2WzBdKSkgewogICAgY29uc3QgY2hhciogc3RyID0gSlNfVG9DU3RyaW5nKGN0eCwgYXJndlswXSk7CiAgICBjaGFyKiBlbmRwdHIgPSBudWxscHRyOwogICAgZm9yKHNpemVfdCBpID0gMDsgaSA8IDQ7IGkrKykgewogICAgICB3aGlsZSghaXNkaWdpdCgqc3RyKSAmJiAqc3RyICE9ICctJyAmJiAqc3RyICE9ICcrJyAmJiAhKCpzdHIgPT0gJy4nICYmIGlzZGlnaXQoc3RyWzFdKSkpIHN0cisrOwogICAgICBpZigqc3RyID09ICdcMCcpCiAgICAgICAgYnJlYWs7CiAgICAgIGFycmF5W2ldID0gc3RydG9kKHN0ciwgJmVuZHB0cik7CiAgICAgIHN0ciA9IGVuZHB0cjsKICAgIH0KICB9IGVsc2UgaWYoanNfaXNfYXJyYXkoY3R4LCBhcmd2WzBdKSkgewogICAganNfYXJyYXlfdG8oY3R4LCBhcmd2WzBdLCBhcnJheSk7CiAgfQogIGlmKGFycmF5WzJdID4gMCAmJiBhcnJheVszXSA+IDApCiAgICByZXQgPSBqc19yZWN0X25ldyhjdHgsIGFycmF5WzBdLCBhcnJheVsxXSwgYXJyYXlbMl0sIGFycmF5WzNdKTsKICByZXR1cm4gcmV0Owp9Cgp2b2lkCmpzX3JlY3RfZmluYWxpemVyKEpTUnVudGltZSogcnQsIEpTVmFsdWUgdmFsKSB7CiAgSlNSZWN0RGF0YTxkb3VibGU+KiBzID0gc3RhdGljX2Nhc3Q8SlNSZWN0RGF0YTxkb3VibGU+Kj4oSlNfR2V0T3BhcXVlKHZhbCwganNfcmVjdF9jbGFzc19pZCkpOwogIC8qIE5vdGU6ICdzJyBjYW4gYmUgTlVMTCBpbiBjYXNlIEpTX1NldE9wYXF1ZSgpIHdhcyBub3QgY2FsbGVkICovCgogIC8vIHMtPn5KU1JlY3REYXRhPGRvdWJsZT4oKTsKICBpZihzKQogICAganNfZGVhbGxvY2F0ZShydCwgcyk7Cn0KCkpTQ2xhc3NEZWYganNfcmVjdF9jbGFzcyA9IHsKICAgIC5jbGFzc19uYW1lID0gIlJlY3QiLAogICAgLmZpbmFsaXplciA9IGpzX3JlY3RfZmluYWxpemVyLAp9OwoKY29uc3QgSlNDRnVuY3Rpb25MaXN0RW50cnkganNfcmVjdF9wcm90b19mdW5jc1tdID0ge0pTX0NHRVRTRVRfRU5VTUVSQUJMRV9ERUYoIngiLCBqc19yZWN0X2dldCwganNfcmVjdF9zZXQsIFBST1BfWCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBKU19DR0VUU0VUX0VOVU1FUkFCTEVfREVGKCJ5IiwganNfcmVjdF9nZXQsIGpzX3JlY3Rfc2V0LCBQUk9QX1kpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSlNfQ0dFVFNFVF9FTlVNRVJBQkxFX0RFRigid2lkdGgiLCBqc19yZWN0X2dldCwganNfcmVjdF9zZXQsIFBST1BfV0lEVEgpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSlNfQ0dFVFNFVF9FTlVNRVJBQkxFX0RFRigiaGVpZ2h0IiwganNfcmVjdF9nZXQsIGpzX3JlY3Rfc2V0LCBQUk9QX0hFSUdIVCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBKU19DR0VUU0VUX01BR0lDX0RFRigieDIiLCBqc19yZWN0X2dldCwganNfcmVjdF9zZXQsIFBST1BfWDIpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSlNfQ0dFVFNFVF9NQUdJQ19ERUYoInkyIiwganNfcmVjdF9nZXQsIGpzX3JlY3Rfc2V0LCBQUk9QX1kyKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEpTX0NHRVRTRVRfTUFHSUNfREVGKCJwb2ludCIsIGpzX3JlY3RfZ2V0LCBqc19yZWN0X3NldCwgUFJPUF9QT1MpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSlNfQ0dFVFNFVF9NQUdJQ19ERUYoInNpemUiLCBqc19yZWN0X2dldCwganNfcmVjdF9zZXQsIFBST1BfU0laRSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBKU19BTElBU19ERUYoIngxIiwgIngiKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEpTX0FMSUFTX0RFRigieTEiLCAieSIpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJjb250YWlucyIsIDAsIGpzX3JlY3RfbWV0aG9kLCBNRVRIT0RfQ09OVEFJTlMpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJlbXB0eSIsIDAsIGpzX3JlY3RfbWV0aG9kLCBNRVRIT0RfRU1QVFkpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJhcmVhIiwgMCwganNfcmVjdF9tZXRob2QsIE1FVEhPRF9BUkVBKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEpTX0NGVU5DX01BR0lDX0RFRigiYnIiLCAwLCBqc19yZWN0X21ldGhvZCwgTUVUSE9EX0JSKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEpTX0NGVU5DX01BR0lDX0RFRigidGwiLCAwLCBqc19yZWN0X21ldGhvZCwgTUVUSE9EX1RMKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEpTX0NGVU5DX01BR0lDX0RFRigiaW5zZXQiLCAxLCBqc19yZWN0X21ldGhvZCwgTUVUSE9EX0lOU0VUKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEpTX0NGVU5DX01BR0lDX0RFRigib3V0c2V0IiwgMSwganNfcmVjdF9tZXRob2QsIE1FVEhPRF9PVVRTRVQpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJoc3BsaXQiLCAxLCBqc19yZWN0X21ldGhvZCwgTUVUSE9EX0hTUExJVCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBKU19DRlVOQ19NQUdJQ19ERUYoInZzcGxpdCIsIDEsIGpzX3JlY3RfbWV0aG9kLCBNRVRIT0RfVlNQTElUKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEpTX0NGVU5DX0RFRigidG9TdHJpbmciLCAwLCBqc19yZWN0X3RvX3N0cmluZyksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBKU19DRlVOQ19ERUYoInRvU291cmNlIiwgMCwganNfcmVjdF90b19zb3VyY2UpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJlcXVhbHMiLCAxLCBqc19yZWN0X2Z1bmNzLCBGVU5DX0VRVUFMUyksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBKU19DRlVOQ19NQUdJQ19ERUYoInJvdW5kIiwgMCwganNfcmVjdF9mdW5jcywgRlVOQ19ST1VORCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBKU19DRlVOQ19NQUdJQ19ERUYoInRvT2JqZWN0IiwgMCwganNfcmVjdF9mdW5jcywgRlVOQ19UT09CSkVDVCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBKU19DRlVOQ19NQUdJQ19ERUYoInRvQXJyYXkiLCAwLCBqc19yZWN0X2Z1bmNzLCBGVU5DX1RPQVJSQVkpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSlNfUFJPUF9TVFJJTkdfREVGKCJbU3ltYm9sLnRvU3RyaW5nVGFnXSIsICJSZWN0IiwgSlNfUFJPUF9DT05GSUdVUkFCTEUpCgp9Owpjb25zdCBKU0NGdW5jdGlvbkxpc3RFbnRyeSBqc19yZWN0X3N0YXRpY19mdW5jc1tdID0ge0pTX0NGVU5DX0RFRigiZnJvbSIsIDEsIGpzX3JlY3RfZnJvbSl9OwoKaW50CmpzX3JlY3RfaW5pdChKU0NvbnRleHQqIGN0eCwgSlNNb2R1bGVEZWYqIG0pIHsKCiAgaWYoanNfcmVjdF9jbGFzc19pZCA9PSAwKSB7CiAgICAvKiBjcmVhdGUgdGhlIFJlY3QgY2xhc3MgKi8KICAgIEpTX05ld0NsYXNzSUQoJmpzX3JlY3RfY2xhc3NfaWQpOwogICAgSlNfTmV3Q2xhc3MoSlNfR2V0UnVudGltZShjdHgpLCBqc19yZWN0X2NsYXNzX2lkLCAmanNfcmVjdF9jbGFzcyk7CgogICAgcmVjdF9wcm90byA9IEpTX05ld09iamVjdChjdHgpOwogICAgSlNfU2V0UHJvcGVydHlGdW5jdGlvbkxpc3QoY3R4LCByZWN0X3Byb3RvLCBqc19yZWN0X3Byb3RvX2Z1bmNzLCBjb3VudG9mKGpzX3JlY3RfcHJvdG9fZnVuY3MpKTsKICAgIEpTX1NldENsYXNzUHJvdG8oY3R4LCBqc19yZWN0X2NsYXNzX2lkLCByZWN0X3Byb3RvKTsKCiAgICByZWN0X2NsYXNzID0gSlNfTmV3Q0Z1bmN0aW9uMihjdHgsIGpzX3JlY3RfY3RvciwgIlJlY3QiLCAwLCBKU19DRlVOQ19jb25zdHJ1Y3RvciwgMCk7CiAgICAvKiBzZXQgcHJvdG8uY29uc3RydWN0b3IgYW5kIGN0b3IucHJvdG90eXBlICovCiAgICBKU19TZXRDb25zdHJ1Y3RvcihjdHgsIHJlY3RfY2xhc3MsIHJlY3RfcHJvdG8pOwogICAgSlNfU2V0UHJvcGVydHlGdW5jdGlvbkxpc3QoY3R4LCByZWN0X2NsYXNzLCBqc19yZWN0X3N0YXRpY19mdW5jcywgY291bnRvZihqc19yZWN0X3N0YXRpY19mdW5jcykpOwoKICAgIGpzX3NldF9pbnNwZWN0X21ldGhvZChjdHgsIHJlY3RfcHJvdG8sIGpzX3JlY3RfaW5zcGVjdCk7CiAgfQoKICBpZihtKQogICAgSlNfU2V0TW9kdWxlRXhwb3J0KGN0eCwgbSwgIlJlY3QiLCByZWN0X2NsYXNzKTsKCiAgcmV0dXJuIDA7Cn0KCnZvaWQKanNfcmVjdF9jb25zdHJ1Y3RvcihKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZSBwYXJlbnQsIGNvbnN0IGNoYXIqIG5hbWUpIHsKICBpZihKU19Jc1VuZGVmaW5lZChyZWN0X2NsYXNzKSkKICAgIGpzX3JlY3RfaW5pdChjdHgsIDApOwoKICBKU19TZXRQcm9wZXJ0eVN0cihjdHgsIHBhcmVudCwgbmFtZSA/IG5hbWUgOiAiUmVjdCIsIHJlY3RfY2xhc3MpOwp9CgojaWZkZWYgSlNfUkVDVF9NT0RVTEUKI2RlZmluZSBKU19JTklUX01PRFVMRSAvKlZJU0lCTEUqLyBqc19pbml0X21vZHVsZQojZWxzZQojZGVmaW5lIEpTX0lOSVRfTU9EVUxFIC8qVklTSUJMRSovIGpzX2luaXRfbW9kdWxlX3JlY3QKI2VuZGlmCgpleHRlcm4gIkMiIEpTTW9kdWxlRGVmKgpKU19JTklUX01PRFVMRShKU0NvbnRleHQqIGN0eCwgY29uc3QgY2hhciogbW9kdWxlX25hbWUpIHsKICBKU01vZHVsZURlZiogbTsKICBtID0gSlNfTmV3Q01vZHVsZShjdHgsIG1vZHVsZV9uYW1lLCAmanNfcmVjdF9pbml0KTsKICBpZighbSkKICAgIHJldHVybiBOVUxMOwogIEpTX0FkZE1vZHVsZUV4cG9ydChjdHgsIG0sICJSZWN0Iik7CiAgcmV0dXJuIG07Cn0KAAAAAAAAAACdSAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/"
				],
				[
					4,
					1,
					"cut",
					null,
					"AQAAAFFIAAAAAAAAUUgAAAAAAABMAAAACmV4dGVybiAiQyIgVklTSUJMRSB2b2lkIGpzX3JlY3RfZXhwb3J0KEpTQ29udGV4dCogY3R4LCBKU01vZHVsZURlZiogbSkgewp9Cg",
					"AQAAAAAAAAABAAAAUUgAAAAAAACdSAAAAAAAAAAAAAAAAPC/"
				],
				[
					7,
					1,
					"paste",
					null,
					"AQAAAAxGAAAAAAAAWEYAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAADEYAAAAAAAAMRgAAAAAAAAAAAAAAAPC/"
				],
				[
					13,
					1,
					"cut",
					null,
					"AQAAAGpIAAAAAAAAakgAAAAAAAAmAAAAICBKU19BZGRNb2R1bGVFeHBvcnQoY3R4LCBtLCAiUmVjdCIpOwo",
					"AQAAAAAAAAABAAAAakgAAAAAAACQSAAAAAAAAAAAAAAAAPC/"
				],
				[
					18,
					1,
					"paste",
					null,
					"AQAAAFZGAAAAAAAAfEYAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAVkYAAAAAAABWRgAAAAAAAAAAAAAAAPC/"
				],
				[
					21,
					1,
					"insert",
					{
						"characters": "\njs_d"
					},
					"CAAAAI9IAAAAAAAAkEgAAAAAAAAAAAAAkEgAAAAAAACUSAAAAAAAAAAAAACQSAAAAAAAAJBIAAAAAAAABAAAACAgICCQSAAAAAAAAJJIAAAAAAAAAAAAAJJIAAAAAAAAk0gAAAAAAAAAAAAAk0gAAAAAAACUSAAAAAAAAAAAAACUSAAAAAAAAJVIAAAAAAAAAAAAAJVIAAAAAAAAlkgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAj0gAAAAAAACPSAAAAAAAAAAAAAAAAPC/"
				],
				[
					22,
					1,
					"left_delete",
					null,
					"AQAAAJVIAAAAAAAAlUgAAAAAAAABAAAAZA",
					"AQAAAAAAAAABAAAAlkgAAAAAAACWSAAAAAAAAAAAAAAAAPC/"
				],
				[
					23,
					1,
					"insert",
					{
						"characters": "rect_export"
					},
					"CwAAAJVIAAAAAAAAlkgAAAAAAAAAAAAAlkgAAAAAAACXSAAAAAAAAAAAAACXSAAAAAAAAJhIAAAAAAAAAAAAAJhIAAAAAAAAmUgAAAAAAAAAAAAAmUgAAAAAAACaSAAAAAAAAAAAAACaSAAAAAAAAJtIAAAAAAAAAAAAAJtIAAAAAAAAnEgAAAAAAAAAAAAAnEgAAAAAAACdSAAAAAAAAAAAAACdSAAAAAAAAJ5IAAAAAAAAAAAAAJ5IAAAAAAAAn0gAAAAAAAAAAAAAn0gAAAAAAACgSAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAlUgAAAAAAACVSAAAAAAAAAAAAAAAAPC/"
				],
				[
					24,
					1,
					"insert_snippet",
					{
						"contents": "($0)"
					},
					"AQAAAKBIAAAAAAAAokgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAoEgAAAAAAACgSAAAAAAAAAAAAAAAAPC/"
				],
				[
					25,
					1,
					"insert",
					{
						"characters": "ctx,m"
					},
					"BQAAAKFIAAAAAAAAokgAAAAAAAAAAAAAokgAAAAAAACjSAAAAAAAAAAAAACjSAAAAAAAAKRIAAAAAAAAAAAAAKRIAAAAAAAApUgAAAAAAAAAAAAApUgAAAAAAACmSAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAoUgAAAAAAAChSAAAAAAAAAAAAAAAAPC/"
				],
				[
					27,
					1,
					"insert",
					{
						"characters": ";"
					},
					"AQAAAKdIAAAAAAAAqEgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAp0gAAAAAAACnSAAAAAAAAAAAAAAAAPC/"
				],
				[
					28,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAAAzSQAAI2luY2x1ZGUgImpzYmluZGluZ3MuaHBwIgojaW5jbHVkZSAianNfcmVjdC5ocHAiCiNpbmNsdWRlICJqc19zaXplLmhwcCIKI2luY2x1ZGUgImpzX3BvaW50LmhwcCIKI2luY2x1ZGUgImpzX2FsbG9jLmhwcCIKI2luY2x1ZGUgImpzX2FycmF5LmhwcCIKI2luY2x1ZGUgImpzX3R5cGVkX2FycmF5LmhwcCIKI2luY2x1ZGUgInV0aWwuaHBwIgoKZXh0ZXJuICJDIiB7CkpTVmFsdWUgcmVjdF9wcm90byA9IEpTX1VOREVGSU5FRCwgcmVjdF9jbGFzcyA9IEpTX1VOREVGSU5FRDsKSlNDbGFzc0lEIGpzX3JlY3RfY2xhc3NfaWQgPSAwOwp9CgpleHRlcm4gIkMiIFZJU0lCTEUgSlNWYWx1ZQpqc19yZWN0X25ldyhKU0NvbnRleHQqIGN0eCwgZG91YmxlIHgsIGRvdWJsZSB5LCBkb3VibGUgdywgZG91YmxlIGgpIHsKICBKU1ZhbHVlIHJldDsKICBKU1JlY3REYXRhPGRvdWJsZT4qIHM7CgogIGlmKEpTX0lzVW5kZWZpbmVkKHJlY3RfcHJvdG8pKQogICAganNfcmVjdF9pbml0KGN0eCwgTlVMTCk7CgogIHJldCA9IEpTX05ld09iamVjdFByb3RvQ2xhc3MoY3R4LCByZWN0X3Byb3RvLCBqc19yZWN0X2NsYXNzX2lkKTsKCiAgcyA9IGpzX2FsbG9jYXRlPEpTUmVjdERhdGE8ZG91YmxlPj4oY3R4KTsKCiAgbmV3KHMpIEpTUmVjdERhdGE8ZG91YmxlPigpOwogIHMtPnggPSB4IDw9IERCTF9FUFNJTE9OID8gMCA6IHg7CiAgcy0+eSA9IHkgPD0gREJMX0VQU0lMT04gPyAwIDogeTsKICBzLT53aWR0aCA9IHcgPD0gREJMX0VQU0lMT04gPyAwIDogdzsKICBzLT5oZWlnaHQgPSBoIDw9IERCTF9FUFNJTE9OID8gMCA6IGg7CgogIEpTX1NldE9wYXF1ZShyZXQsIHMpOwogIHJldHVybiByZXQ7Cn0KClZJU0lCTEUgSlNWYWx1ZQpqc19yZWN0X3dyYXAoSlNDb250ZXh0KiBjdHgsIGNvbnN0IEpTUmVjdERhdGE8ZG91YmxlPiYgcmVjdCkgewogIHJldHVybiBqc19yZWN0X25ldyhjdHgsIHJlY3QueCwgcmVjdC55LCByZWN0LndpZHRoLCByZWN0LmhlaWdodCk7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX3JlY3RfY3RvcihKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IG5ld190YXJnZXQsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QqIGFyZ3YpIHsKICBkb3VibGUgeCA9IDAsIHkgPSAwLCB3ID0gMCwgaCA9IDA7CiAgSlNSZWN0RGF0YTxkb3VibGU+IHJlY3QgPSB7MCwgMCwgMCwgMH07CiAgaW50IG9wdGluZCA9IDA7CgogIGlmKGFyZ2MgPiAwKSB7CiAgICBpZighanNfcmVjdF9yZWFkKGN0eCwgYXJndlswXSwgJnJlY3QpKSB7CiAgICAgIEpTUG9pbnREYXRhPGRvdWJsZT4gcG9pbnQsIHBvaW50MjsKICAgICAgSlNTaXplRGF0YTxkb3VibGU+IHNpemU7CiAgICAgIHdoaWxlKG9wdGluZCA8IGFyZ2MpIHsKICAgICAgICBpZihKU19Jc051bWJlcihhcmd2W29wdGluZF0pICYmIEpTX0lzTnVtYmVyKGFyZ3Zbb3B0aW5kICsgMV0pKSB7CiAgICAgICAgICBpZihvcHRpbmQgPT0gMCkgewogICAgICAgICAgICBKU19Ub0Zsb2F0NjQoY3R4LCAmeCwgYXJndltvcHRpbmRdKTsKICAgICAgICAgICAgSlNfVG9GbG9hdDY0KGN0eCwgJnksIGFyZ3Zbb3B0aW5kICsgMV0pOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgSlNfVG9GbG9hdDY0KGN0eCwgJncsIGFyZ3Zbb3B0aW5kXSk7CiAgICAgICAgICAgIEpTX1RvRmxvYXQ2NChjdHgsICZoLCBhcmd2W29wdGluZCArIDFdKTsKICAgICAgICAgIH0KICAgICAgICAgIG9wdGluZCArPSAyOwogICAgICAgIH0gZWxzZSBpZihqc19wb2ludF9yZWFkKGN0eCwgYXJndltvcHRpbmRdLCBvcHRpbmQgPT0gMCA/ICZwb2ludCA6ICZwb2ludDIpKSB7CiAgICAgICAgICBpZihvcHRpbmQgPT0gMCkgewogICAgICAgICAgICB4ID0gcG9pbnQueDsKICAgICAgICAgICAgeSA9IHBvaW50Lnk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB3ID0gcG9pbnQyLnggLSB4OwogICAgICAgICAgICBoID0gcG9pbnQyLnkgLSB5OwogICAgICAgICAgfQogICAgICAgICAgb3B0aW5kKys7CiAgICAgICAgfQoKICAgICAgICBlbHNlIGlmKGpzX3NpemVfcmVhZChjdHgsIGFyZ3Zbb3B0aW5kXSwgJnNpemUpKSB7CiAgICAgICAgICB3ID0gc2l6ZS53aWR0aDsKICAgICAgICAgIGggPSBzaXplLmhlaWdodDsKICAgICAgICAgIG9wdGluZCsrOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBvcHRpbmQrKzsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICB9CgogIHJldHVybiBqc19yZWN0X25ldyhjdHgsIHgsIHksIHcsIGgpOwp9CgpWSVNJQkxFIEpTUmVjdERhdGE8ZG91YmxlPioKanNfcmVjdF9kYXRhKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdmFsKSB7CiAgcmV0dXJuIHN0YXRpY19jYXN0PEpTUmVjdERhdGE8ZG91YmxlPio+KEpTX0dldE9wYXF1ZTIoY3R4LCB2YWwsIGpzX3JlY3RfY2xhc3NfaWQpKTsKfQoKZW51bSB7IFBST1BfWCA9IDAsIFBST1BfWSwgUFJPUF9XSURUSCwgUFJPUF9IRUlHSFQsIFBST1BfWDIsIFBST1BfWTIsIFBST1BfUE9TLCBQUk9QX1NJWkUgfTsKCnN0YXRpYyBKU1ZhbHVlCmpzX3JlY3RfZ2V0KEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBtYWdpYykgewogIEpTVmFsdWUgcmV0ID0gSlNfVU5ERUZJTkVEOwogIEpTUmVjdERhdGE8ZG91YmxlPiogczsKCiAgaWYoKHMgPSBzdGF0aWNfY2FzdDxKU1JlY3REYXRhPGRvdWJsZT4qPihKU19HZXRPcGFxdWUyKGN0eCwgdGhpc192YWwsIGpzX3JlY3RfY2xhc3NfaWQpKSkgPT0gbnVsbHB0cikKICAgIHJldHVybiBKU19FWENFUFRJT047CgogIHN3aXRjaChtYWdpYykgewogICAgY2FzZSBQUk9QX1g6IHsKICAgICAgcmV0ID0gSlNfTmV3RmxvYXQ2NChjdHgsIHMtPngpOwogICAgICBicmVhazsKICAgIH0KICAgIGNhc2UgUFJPUF9ZOiB7CiAgICAgIHJldCA9IEpTX05ld0Zsb2F0NjQoY3R4LCBzLT55KTsKICAgICAgYnJlYWs7CiAgICB9CiAgICBjYXNlIFBST1BfV0lEVEg6IHsKICAgICAgcmV0ID0gSlNfTmV3RmxvYXQ2NChjdHgsIHMtPndpZHRoKTsKICAgICAgYnJlYWs7CiAgICB9CiAgICBjYXNlIFBST1BfSEVJR0hUOiB7CiAgICAgIHJldCA9IEpTX05ld0Zsb2F0NjQoY3R4LCBzLT5oZWlnaHQpOwogICAgICBicmVhazsKICAgIH0KICAgIGNhc2UgUFJPUF9YMjogewogICAgICByZXQgPSBKU19OZXdGbG9hdDY0KGN0eCwgcy0+eCArIHMtPndpZHRoKTsKICAgICAgYnJlYWs7CiAgICB9CiAgICBjYXNlIFBST1BfWTI6IHsKICAgICAgcmV0ID0gSlNfTmV3RmxvYXQ2NChjdHgsIHMtPnkgKyBzLT5oZWlnaHQpOwogICAgICBicmVhazsKICAgIH0KICAgIGNhc2UgUFJPUF9QT1M6IHsKICAgICAgcmV0ID0ganNfcG9pbnRfbmV3KGN0eCwgcy0+eCwgcy0+eSk7CiAgICAgIGJyZWFrOwogICAgfQogICAgY2FzZSBQUk9QX1NJWkU6IHsKICAgICAgcmV0ID0ganNfc2l6ZV9uZXcoY3R4LCBzLT53aWR0aCwgcy0+aGVpZ2h0KTsKICAgICAgYnJlYWs7CiAgICB9CiAgfQogIHJldHVybiByZXQ7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX3JlY3Rfc2V0KEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIEpTVmFsdWVDb25zdCB2YWwsIGludCBtYWdpYykgewogIEpTUmVjdERhdGE8ZG91YmxlPiogczsKICBkb3VibGUgdjsKICBpZigocyA9IHN0YXRpY19jYXN0PEpTUmVjdERhdGE8ZG91YmxlPio+KEpTX0dldE9wYXF1ZTIoY3R4LCB0aGlzX3ZhbCwganNfcmVjdF9jbGFzc19pZCkpKSA9PSBudWxscHRyKQogICAgcmV0dXJuIEpTX0VYQ0VQVElPTjsKCiAgaWYoSlNfVG9GbG9hdDY0KGN0eCwgJnYsIHZhbCkpCiAgICByZXR1cm4gSlNfRVhDRVBUSU9OOwoKICBzd2l0Y2gobWFnaWMpIHsKICAgIGNhc2UgUFJPUF9YOiB7CiAgICAgIHMtPnggPSB2OwogICAgICBicmVhazsKICAgIH0KICAgIGNhc2UgUFJPUF9ZOiB7CiAgICAgIHMtPnkgPSB2OwogICAgICBicmVhazsKICAgIH0KICAgIGNhc2UgUFJPUF9XSURUSDogewogICAgICBzLT53aWR0aCA9IHY7CiAgICAgIGJyZWFrOwogICAgfQogICAgY2FzZSBQUk9QX0hFSUdIVDogewogICAgICBzLT5oZWlnaHQgPSB2OwogICAgICBicmVhazsKICAgIH0KICAgIGNhc2UgUFJPUF9YMjogewogICAgICBzLT53aWR0aCA9IHYgLSBzLT54OwogICAgICBicmVhazsKICAgIH0KICAgIGNhc2UgUFJPUF9ZMjogewogICAgICBzLT5oZWlnaHQgPSB2IC0gcy0+eTsKICAgICAgYnJlYWs7CiAgICB9CiAgICBjYXNlIFBST1BfUE9TOiB7CiAgICAgIEpTUG9pbnREYXRhPGRvdWJsZT4gcG9pbnQ7CiAgICAgIGpzX3BvaW50X3JlYWQoY3R4LCB2YWwsICZwb2ludCk7CiAgICAgIHMtPnggPSBwb2ludC54OwogICAgICBzLT55ID0gcG9pbnQueTsKICAgICAgYnJlYWs7CiAgICB9CiAgICBjYXNlIFBST1BfU0laRTogewogICAgICBKU1NpemVEYXRhPGRvdWJsZT4gc2l6ZTsKICAgICAganNfc2l6ZV9yZWFkKGN0eCwgdmFsLCAmc2l6ZSk7CiAgICAgIHMtPndpZHRoID0gc2l6ZS53aWR0aDsKICAgICAgcy0+aGVpZ2h0ID0gc2l6ZS5oZWlnaHQ7CiAgICAgIGJyZWFrOwogICAgfQogIH0KCiAgcmV0dXJuIEpTX1VOREVGSU5FRDsKfQoKc3RhdGljIEpTVmFsdWUKanNfcmVjdF90b19zdHJpbmcoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCogYXJndikgewogIEpTUmVjdERhdGE8ZG91YmxlPiByZWN0LCAqczsKICBzdGQ6Om9zdHJpbmdzdHJlYW0gb3M7CiAgc3RkOjphcnJheTxjb25zdCBjaGFyKiwgMz4gZGVsaW1zID0gewogICAgICAiLCIsCiAgICAgICLiiKMiIC8q772c4qe44qaB4o6u4oil4oij4ri+4ryB4p2Y4p2Z4p+K4o2/4o644o+Q772c4pSC77+o77iy77ix4p2YfO+9nCovLAogICAgICAiw5ciIC8qIvCdhYPwn4Wn8J2aofCfhafwn4WH8J2YufCdmqHwnZi58J2Qseqtl/CdkJfwnZG/8J2Fg/CdhYN4y6PigpPikrPik43ik6finJXinJjinJfiqIniqK/iqILinJbiqLvipoHii4XiipfiiqDiiJfDl+Kor8OXIiovfTsKCiAgZm9yKHNpemVfdCBpID0gMDsgaSA8IGFyZ2M7IGkrKykgeyBkZWxpbXNbaV0gPSBKU19Ub0NTdHJpbmcoY3R4LCBhcmd2W2ldKTsgfQoKICBpZigocyA9IHN0YXRpY19jYXN0PEpTUmVjdERhdGE8ZG91YmxlPio+KEpTX0dldE9wYXF1ZTIoY3R4LCB0aGlzX3ZhbCwganNfcmVjdF9jbGFzc19pZCkpKSAhPSBudWxscHRyKSB7CiAgICByZWN0ID0gKnM7CiAgfSBlbHNlIHsKICAgIGpzX3JlY3RfcmVhZChjdHgsIHRoaXNfdmFsLCAmcmVjdCk7CiAgfQoKICBvcyA8PCByZWN0LnggPDwgZGVsaW1zWzBdIDw8IHJlY3QueSA8PCBkZWxpbXNbMV0gPDwgcmVjdC53aWR0aCA8PCBkZWxpbXNbMl0gPDwgcmVjdC5oZWlnaHQ7CgogIHJldHVybiBKU19OZXdTdHJpbmcoY3R4LCBvcy5zdHIoKS5jX3N0cigpKTsKfQpzdGF0aWMgSlNWYWx1ZQpqc19yZWN0X3RvX3NvdXJjZShKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2KSB7CiAgSlNSZWN0RGF0YTxkb3VibGU+IHJlY3QsICpzOwogIHN0ZDo6b3N0cmluZ3N0cmVhbSBvczsKCiAgaWYoKHMgPSBzdGF0aWNfY2FzdDxKU1JlY3REYXRhPGRvdWJsZT4qPihKU19HZXRPcGFxdWUyKGN0eCwgdGhpc192YWwsIGpzX3JlY3RfY2xhc3NfaWQpKSkgIT0gbnVsbHB0cikgewogICAgcmVjdCA9ICpzOwogIH0gZWxzZSB7CiAgICBqc19yZWN0X3JlYWQoY3R4LCB0aGlzX3ZhbCwgJnJlY3QpOwogIH0KCiAgb3MgPDwgInt4OiIgPDwgcmVjdC54IDw8ICIseToiIDw8IHJlY3QueSA8PCAiLHdpZHRoOiIgPDwgcmVjdC53aWR0aCA8PCAiLGhlaWdodDoiIDw8IHJlY3QuaGVpZ2h0IDw8ICJ9IjsKCiAgcmV0dXJuIEpTX05ld1N0cmluZyhjdHgsIG9zLnN0cigpLmNfc3RyKCkpOwp9CgplbnVtIHsgRlVOQ19FUVVBTFMgPSAwLCBGVU5DX1JPVU5ELCBGVU5DX1RPT0JKRUNULCBGVU5DX1RPQVJSQVkgfTsKCnN0YXRpYyBKU1ZhbHVlCmpzX3JlY3RfZnVuY3MoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCogYXJndiwgaW50IG1hZ2ljKSB7CiAgSlNSZWN0RGF0YTxkb3VibGU+IHJlY3QsIG90aGVyLCAqcywgKmE7CiAgSlNWYWx1ZSByZXQgPSBKU19FWENFUFRJT047CgogIGlmKChzID0ganNfcmVjdF9kYXRhKGN0eCwgdGhpc192YWwpKSA9PSBudWxscHRyKQogICAgcmV0dXJuIHJldDsKCiAgcmVjdCA9ICpzOwoKICBzd2l0Y2gobWFnaWMpIHsKICAgIGNhc2UgRlVOQ19FUVVBTFM6IHsKICAgICAganNfcmVjdF9yZWFkKGN0eCwgYXJndlswXSwgJm90aGVyKTsKICAgICAgYm9vbCBlcXVhbHMgPSByZWN0LnggPT0gb3RoZXIueCAmJiByZWN0LnkgPT0gb3RoZXIueSAmJiByZWN0LndpZHRoID09IG90aGVyLndpZHRoICYmIHJlY3QuaGVpZ2h0ID09IG90aGVyLmhlaWdodDsKICAgICAgcmV0ID0gSlNfTmV3Qm9vbChjdHgsIGVxdWFscyk7CiAgICAgIGJyZWFrOwogICAgfQogICAgY2FzZSBGVU5DX1JPVU5EOiB7CiAgICAgIGRvdWJsZSB4LCB5LCB3aWR0aCwgaGVpZ2h0LCBmOwogICAgICBpbnQzMl90IHByZWNpc2lvbiA9IDA7CiAgICAgIGlmKGFyZ2MgPiAwKQogICAgICAgIEpTX1RvSW50MzIoY3R4LCAmcHJlY2lzaW9uLCBhcmd2WzBdKTsKICAgICAgZiA9IHN0ZDo6cG93KDEwLCBwcmVjaXNpb24pOwogICAgICB4ID0gc3RkOjpyb3VuZChyZWN0LnggKiBmKSAvIGY7CiAgICAgIHkgPSBzdGQ6OnJvdW5kKHJlY3QueSAqIGYpIC8gZjsKICAgICAgd2lkdGggPSBzdGQ6OnJvdW5kKHJlY3Qud2lkdGggKiBmKSAvIGY7CiAgICAgIGhlaWdodCA9IHN0ZDo6cm91bmQocmVjdC5oZWlnaHQgKiBmKSAvIGY7CiAgICAgIHJldCA9IGpzX3JlY3RfbmV3KGN0eCwgeCwgeSwgd2lkdGgsIGhlaWdodCk7CiAgICAgIGJyZWFrOwogICAgfQogICAgY2FzZSBGVU5DX1RPT0JKRUNUOiB7CiAgICAgIHJldCA9IEpTX05ld09iamVjdChjdHgpOwoKICAgICAgSlNfU2V0UHJvcGVydHlTdHIoY3R4LCByZXQsICJ4IiwgSlNfTmV3RmxvYXQ2NChjdHgsIHJlY3QueCkpOwogICAgICBKU19TZXRQcm9wZXJ0eVN0cihjdHgsIHJldCwgInkiLCBKU19OZXdGbG9hdDY0KGN0eCwgcmVjdC55KSk7CiAgICAgIEpTX1NldFByb3BlcnR5U3RyKGN0eCwgcmV0LCAid2lkdGgiLCBKU19OZXdGbG9hdDY0KGN0eCwgcmVjdC53aWR0aCkpOwogICAgICBKU19TZXRQcm9wZXJ0eVN0cihjdHgsIHJldCwgImhlaWdodCIsIEpTX05ld0Zsb2F0NjQoY3R4LCByZWN0LmhlaWdodCkpOwogICAgICBicmVhazsKICAgIH0KICAgIGNhc2UgRlVOQ19UT0FSUkFZOiB7CiAgICAgIHN0ZDo6YXJyYXk8ZG91YmxlLCA0PiBhcnJheXtyZWN0LngsIHJlY3QueSwgcmVjdC53aWR0aCwgcmVjdC5oZWlnaHR9OwoKICAgICAgcmV0ID0ganNfYXJyYXlfZnJvbShjdHgsIGFycmF5LmNiZWdpbigpLCBhcnJheS5jZW5kKCkpOwogICAgICBicmVhazsKICAgIH0KICB9CgogIHJldHVybiByZXQ7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX3JlY3RfaW5zcGVjdChKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2KSB7CiAgSlNSZWN0RGF0YTxkb3VibGU+KiByID0ganNfcmVjdF9kYXRhKGN0eCwgdGhpc192YWwpOwogIEpTVmFsdWUgb2JqID0gSlNfTmV3T2JqZWN0UHJvdG8oY3R4LCByZWN0X3Byb3RvKTsKCiAgSlNfRGVmaW5lUHJvcGVydHlWYWx1ZVN0cihjdHgsIG9iaiwgIngiLCBKU19OZXdGbG9hdDY0KGN0eCwgci0+eCksIEpTX1BST1BfRU5VTUVSQUJMRSk7CiAgSlNfRGVmaW5lUHJvcGVydHlWYWx1ZVN0cihjdHgsIG9iaiwgInkiLCBKU19OZXdGbG9hdDY0KGN0eCwgci0+eSksIEpTX1BST1BfRU5VTUVSQUJMRSk7CiAgSlNfRGVmaW5lUHJvcGVydHlWYWx1ZVN0cihjdHgsIG9iaiwgIndpZHRoIiwgSlNfTmV3RmxvYXQ2NChjdHgsIHItPndpZHRoKSwgSlNfUFJPUF9FTlVNRVJBQkxFKTsKICBKU19EZWZpbmVQcm9wZXJ0eVZhbHVlU3RyKGN0eCwgb2JqLCAiaGVpZ2h0IiwgSlNfTmV3RmxvYXQ2NChjdHgsIHItPmhlaWdodCksIEpTX1BST1BfRU5VTUVSQUJMRSk7CiAgcmV0dXJuIG9iajsKfQoKZW51bSB7CiAgTUVUSE9EX0NPTlRBSU5TID0gMCwKICBNRVRIT0RfRU1QVFksCiAgTUVUSE9EX0FSRUEsCiAgTUVUSE9EX0JSLAogIE1FVEhPRF9UTCwKICBNRVRIT0RfU0laRSwKICBNRVRIT0RfSU5TRVQsCiAgTUVUSE9EX09VVFNFVCwKICBNRVRIT0RfSFNQTElULAogIE1FVEhPRF9WU1BMSVQKfTsKCnN0YXRpYyBKU1ZhbHVlCmpzX3JlY3RfbWV0aG9kKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgcmVjdCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCogYXJndiwgaW50IG1hZ2ljKSB7CiAgSlNSZWN0RGF0YTxkb3VibGU+KiBzID0gc3RhdGljX2Nhc3Q8SlNSZWN0RGF0YTxkb3VibGU+Kj4oSlNfR2V0T3BhcXVlMihjdHgsIHJlY3QsIGpzX3JlY3RfY2xhc3NfaWQpKTsKICBKU1ZhbHVlIHJldCA9IEpTX1VOREVGSU5FRDsKICBKU1BvaW50RGF0YTxkb3VibGU+IHBvaW50ID0ganNfcG9pbnRfZ2V0KGN0eCwgYXJndlswXSk7CgogIHN3aXRjaChtYWdpYykgewogICAgY2FzZSBNRVRIT0RfQ09OVEFJTlM6IHsKICAgICAgcmV0ID0gSlNfTmV3Qm9vbChjdHgsIHMtPmNvbnRhaW5zKHBvaW50KSk7CiAgICAgIGJyZWFrOwogICAgfQogICAgY2FzZSBNRVRIT0RfRU1QVFk6IHsKICAgICAgcmV0ID0gSlNfTmV3Qm9vbChjdHgsIHMtPmVtcHR5KCkpOwogICAgICBicmVhazsKICAgIH0KICAgIGNhc2UgTUVUSE9EX0FSRUE6IHsKICAgICAgcmV0ID0gSlNfTmV3RmxvYXQ2NChjdHgsIHMtPmFyZWEoKSk7CiAgICAgIGJyZWFrOwogICAgfQogICAgY2FzZSBNRVRIT0RfQlI6CiAgICBjYXNlIE1FVEhPRF9UTDogewogICAgICBKU1BvaW50RGF0YTxkb3VibGU+IHB0ID0gbWFnaWMgPT0gMyA/IHMtPmJyKCkgOiBzLT50bCgpOwoKICAgICAgcmV0ID0ganNfcG9pbnRfbmV3KGN0eCwgcHQueCwgcHQueSk7CiAgICAgIGJyZWFrOwogICAgfQogICAgY2FzZSBNRVRIT0RfU0laRTogewogICAgICBjdjo6U2l6ZTJkIHN6ID0gcy0+c2l6ZSgpOwogICAgICByZXQgPSBqc19zaXplX25ldyhjdHgsIHN6LndpZHRoLCBzei5oZWlnaHQpOwogICAgICBicmVhazsKICAgIH0KICAgIGNhc2UgTUVUSE9EX0lOU0VUOiB7CiAgICAgIEpTUmVjdERhdGE8ZG91YmxlPiByZWN0ID0gKnM7CiAgICAgIGlmKGFyZ2MgPj0gMSkgewogICAgICAgIGRvdWJsZSBuOwogICAgICAgIEpTX1RvRmxvYXQ2NChjdHgsICZuLCBhcmd2WzBdKTsKICAgICAgICByZWN0LnggKz0gbjsKICAgICAgICByZWN0LndpZHRoIC09IG4gKiAyOwogICAgICAgIHJlY3QueSArPSBuOwogICAgICAgIHJlY3QuaGVpZ2h0IC09IG4gKiAyOwoKICAgICAgfSBlbHNlIGlmKGFyZ2MgPj0gMikgewogICAgICAgIGRvdWJsZSBoLCB2OwogICAgICAgIEpTX1RvRmxvYXQ2NChjdHgsICZoLCBhcmd2WzBdKTsKICAgICAgICBKU19Ub0Zsb2F0NjQoY3R4LCAmdiwgYXJndlsxXSk7CiAgICAgICAgcmVjdC54ICs9IGg7CiAgICAgICAgcmVjdC53aWR0aCAtPSBoICogMjsKICAgICAgICByZWN0LnkgKz0gdjsKICAgICAgICByZWN0LmhlaWdodCAtPSB2ICogMjsKCiAgICAgIH0gZWxzZSBpZihhcmdjID49IDQpIHsKICAgICAgICBkb3VibGUgdCwgciwgYiwgbDsKICAgICAgICBKU19Ub0Zsb2F0NjQoY3R4LCAmdCwgYXJndlswXSk7CiAgICAgICAgSlNfVG9GbG9hdDY0KGN0eCwgJnIsIGFyZ3ZbMV0pOwogICAgICAgIEpTX1RvRmxvYXQ2NChjdHgsICZiLCBhcmd2WzJdKTsKICAgICAgICBKU19Ub0Zsb2F0NjQoY3R4LCAmbCwgYXJndlszXSk7CiAgICAgICAgcmVjdC54ICs9IGw7CiAgICAgICAgcmVjdC53aWR0aCAtPSBsICsgcjsKICAgICAgICByZWN0LnkgKz0gdDsKICAgICAgICByZWN0LmhlaWdodCAtPSB0ICsgYjsKICAgICAgfQogICAgICByZXQgPSBqc19yZWN0X3dyYXAoY3R4LCByZWN0KTsKICAgICAgYnJlYWs7CiAgICB9CgogICAgY2FzZSBNRVRIT0RfT1VUU0VUOiB7CiAgICAgIEpTUmVjdERhdGE8ZG91YmxlPiByZWN0ID0gKnM7CiAgICAgIGlmKGFyZ2MgPj0gMSkgewogICAgICAgIGRvdWJsZSBuOwogICAgICAgIEpTX1RvRmxvYXQ2NChjdHgsICZuLCBhcmd2WzBdKTsKICAgICAgICByZWN0LnggLT0gbjsKICAgICAgICByZWN0LndpZHRoICs9IG4gKiAyOwogICAgICAgIHJlY3QueSAtPSBuOwogICAgICAgIHJlY3QuaGVpZ2h0ICs9IG4gKiAyOwoKICAgICAgfSBlbHNlIGlmKGFyZ2MgPj0gMikgewogICAgICAgIGRvdWJsZSBoLCB2OwogICAgICAgIEpTX1RvRmxvYXQ2NChjdHgsICZoLCBhcmd2WzBdKTsKICAgICAgICBKU19Ub0Zsb2F0NjQoY3R4LCAmdiwgYXJndlsxXSk7CiAgICAgICAgcmVjdC54IC09IGg7CiAgICAgICAgcmVjdC53aWR0aCArPSBoICogMjsKICAgICAgICByZWN0LnkgLT0gdjsKICAgICAgICByZWN0LmhlaWdodCArPSB2ICogMjsKCiAgICAgIH0gZWxzZSBpZihhcmdjID49IDQpIHsKICAgICAgICBkb3VibGUgdCwgciwgYiwgbDsKICAgICAgICBKU19Ub0Zsb2F0NjQoY3R4LCAmdCwgYXJndlswXSk7CiAgICAgICAgSlNfVG9GbG9hdDY0KGN0eCwgJnIsIGFyZ3ZbMV0pOwogICAgICAgIEpTX1RvRmxvYXQ2NChjdHgsICZiLCBhcmd2WzJdKTsKICAgICAgICBKU19Ub0Zsb2F0NjQoY3R4LCAmbCwgYXJndlszXSk7CiAgICAgICAgcmVjdC54IC09IGw7CiAgICAgICAgcmVjdC53aWR0aCArPSBsICsgcjsKICAgICAgICByZWN0LnkgLT0gdDsKICAgICAgICByZWN0LmhlaWdodCArPSB0ICsgYjsKICAgICAgfQogICAgICByZXQgPSBqc19yZWN0X3dyYXAoY3R4LCByZWN0KTsKICAgICAgYnJlYWs7CiAgICB9CiAgICBjYXNlIE1FVEhPRF9IU1BMSVQ6IHsKICAgICAgc3RkOjp2ZWN0b3I8SlNSZWN0RGF0YTxkb3VibGU+PiByZWN0czsKICAgICAgZG91YmxlIHgxID0gcy0+eCwgeDIgPSBzLT54ICsgcy0+d2lkdGg7CiAgICAgIGF1dG8gYXJncyA9IGFyZ3VtZW50X3JhbmdlKGFyZ2MsIGFyZ3YpOwogICAgICBKU1JlY3REYXRhPGRvdWJsZT4qIHByZXY7CiAgICAgIHN0ZDo6dmVjdG9yPGRvdWJsZT4gYnJlYWtwb2ludHM7CiAgICAgIGZvcihKU1ZhbHVlQ29uc3QgY29uc3QmIGFyZyA6IGFyZ3MpIHsKICAgICAgICBkb3VibGUgZDsKICAgICAgICBqc192YWx1ZV90byhjdHgsIGFyZywgZCk7CiAgICAgICAgaWYoZCA8IDApCiAgICAgICAgICBkID0gcy0+d2lkdGggKyBkOwogICAgICAgIGlmKGQgPiAwICYmIGQgPCBzLT53aWR0aCkKICAgICAgICAgIGJyZWFrcG9pbnRzLnB1c2hfYmFjayhkKTsKICAgICAgfQogICAgICBzdGQ6OnNvcnQoYnJlYWtwb2ludHMuYmVnaW4oKSwgYnJlYWtwb2ludHMuZW5kKCkpOwogICAgICByZWN0cy5wdXNoX2JhY2soKnMpOwogICAgICBwcmV2ID0gJnJlY3RzLmJhY2soKTsKICAgICAgZm9yKGRvdWJsZSBoIDogYnJlYWtwb2ludHMpIHsKICAgICAgICAvLyBwcmludGYoImhzcGxpdCBoPSVsZlxuIiwgaCk7CiAgICAgICAgcHJldi0+d2lkdGggPSBoIC0gKHByZXYtPnggLSB4MSk7CiAgICAgICAgcmVjdHMucHVzaF9iYWNrKCpzKTsKICAgICAgICByZWN0cy5iYWNrKCkueCA9IHgxICsgaDsKICAgICAgICBwcmV2ID0gJnJlY3RzLmJhY2soKTsKICAgICAgICBwcmV2LT53aWR0aCA9IHMtPndpZHRoIC0gaDsKICAgICAgfQogICAgICByZXQgPSBqc19hcnJheV9mcm9tKGN0eCwgcmVjdHMpOwogICAgICBicmVhazsKICAgIH0KICAgIGNhc2UgTUVUSE9EX1ZTUExJVDogewogICAgICBzdGQ6OnZlY3RvcjxKU1JlY3REYXRhPGRvdWJsZT4+IHJlY3RzOwogICAgICBkb3VibGUgeTEgPSBzLT55LCB5MiA9IHMtPnkgKyBzLT5oZWlnaHQ7CiAgICAgIGF1dG8gYXJncyA9IGFyZ3VtZW50X3JhbmdlKGFyZ2MsIGFyZ3YpOwogICAgICBKU1JlY3REYXRhPGRvdWJsZT4qIHByZXY7CiAgICAgIHN0ZDo6dmVjdG9yPGRvdWJsZT4gYnJlYWtwb2ludHM7CiAgICAgIGZvcihKU1ZhbHVlQ29uc3QgY29uc3QmIGFyZyA6IGFyZ3MpIHsKICAgICAgICBkb3VibGUgZDsKICAgICAgICBqc192YWx1ZV90byhjdHgsIGFyZywgZCk7CiAgICAgICAgaWYoZCA8IDApCiAgICAgICAgICBkID0gcy0+aGVpZ2h0ICsgZDsKICAgICAgICBpZihkID4gMCAmJiBkIDwgcy0+aGVpZ2h0KQogICAgICAgICAgYnJlYWtwb2ludHMucHVzaF9iYWNrKGQpOwogICAgICB9CiAgICAgIHN0ZDo6c29ydChicmVha3BvaW50cy5iZWdpbigpLCBicmVha3BvaW50cy5lbmQoKSk7CiAgICAgIHJlY3RzLnB1c2hfYmFjaygqcyk7CiAgICAgIHByZXYgPSAmcmVjdHMuYmFjaygpOwogICAgICBmb3IoZG91YmxlIHYgOiBicmVha3BvaW50cykgewogICAgICAgIC8vIHByaW50ZigiaHNwbGl0IHY9JWxmXG4iLCB2KTsKICAgICAgICBwcmV2LT5oZWlnaHQgPSB2IC0gKHByZXYtPnkgLSB5MSk7CiAgICAgICAgcmVjdHMucHVzaF9iYWNrKCpzKTsKICAgICAgICByZWN0cy5iYWNrKCkueSA9IHkxICsgdjsKICAgICAgICBwcmV2ID0gJnJlY3RzLmJhY2soKTsKICAgICAgICBwcmV2LT5oZWlnaHQgPSBzLT5oZWlnaHQgLSB2OwogICAgICB9CiAgICAgIHJldCA9IGpzX2FycmF5X2Zyb20oY3R4LCByZWN0cyk7CiAgICAgIGJyZWFrOwogICAgfQogIH0KCiAgcmV0dXJuIHJldDsKfQoKc3RhdGljIEpTVmFsdWUgaXRlcmF0b3Jfc3ltYm9sID0gSlNfVU5ERUZJTkVEOwoKc3RhdGljIEpTVmFsdWUKanNfcmVjdF9zeW1ib2xfaXRlcmF0b3IoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCogYXJndikgewogIEpTVmFsdWUgYXJyLCBpdGVyOwogIGpzcnQganMoY3R4KTsKICBhcnIgPSBqc19yZWN0X2Z1bmNzKGN0eCwgdGhpc192YWwsIGFyZ2MsIGFyZ3YsIDMpOwoKICBpZihKU19Jc1VuZGVmaW5lZChpdGVyYXRvcl9zeW1ib2wpKQogICAgaXRlcmF0b3Jfc3ltYm9sID0ganMuZ2V0X3N5bWJvbCgiaXRlcmF0b3IiKTsKCiAgaWYoIUpTX0lzRnVuY3Rpb24oY3R4LCAoaXRlciA9IGpzLmdldF9wcm9wZXJ0eShhcnIsIGl0ZXJhdG9yX3N5bWJvbCkpKSkKICAgIHJldHVybiBKU19FWENFUFRJT047CiAgcmV0dXJuIEpTX0NhbGwoY3R4LCBpdGVyLCBhcnIsIDAsIGFyZ3YpOwp9CgpzdGF0aWMgSlNWYWx1ZQpqc19yZWN0X2Zyb20oSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCByZWN0LCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2KSB7CiAgc3RkOjphcnJheTxkb3VibGUsIDQ+IGFycmF5OwogIEpTVmFsdWUgcmV0ID0gSlNfRVhDRVBUSU9OOwoKICBpZihKU19Jc1N0cmluZyhhcmd2WzBdKSkgewogICAgY29uc3QgY2hhciogc3RyID0gSlNfVG9DU3RyaW5nKGN0eCwgYXJndlswXSk7CiAgICBjaGFyKiBlbmRwdHIgPSBudWxscHRyOwogICAgZm9yKHNpemVfdCBpID0gMDsgaSA8IDQ7IGkrKykgewogICAgICB3aGlsZSghaXNkaWdpdCgqc3RyKSAmJiAqc3RyICE9ICctJyAmJiAqc3RyICE9ICcrJyAmJiAhKCpzdHIgPT0gJy4nICYmIGlzZGlnaXQoc3RyWzFdKSkpIHN0cisrOwogICAgICBpZigqc3RyID09ICdcMCcpCiAgICAgICAgYnJlYWs7CiAgICAgIGFycmF5W2ldID0gc3RydG9kKHN0ciwgJmVuZHB0cik7CiAgICAgIHN0ciA9IGVuZHB0cjsKICAgIH0KICB9IGVsc2UgaWYoanNfaXNfYXJyYXkoY3R4LCBhcmd2WzBdKSkgewogICAganNfYXJyYXlfdG8oY3R4LCBhcmd2WzBdLCBhcnJheSk7CiAgfQogIGlmKGFycmF5WzJdID4gMCAmJiBhcnJheVszXSA+IDApCiAgICByZXQgPSBqc19yZWN0X25ldyhjdHgsIGFycmF5WzBdLCBhcnJheVsxXSwgYXJyYXlbMl0sIGFycmF5WzNdKTsKICByZXR1cm4gcmV0Owp9Cgp2b2lkCmpzX3JlY3RfZmluYWxpemVyKEpTUnVudGltZSogcnQsIEpTVmFsdWUgdmFsKSB7CiAgSlNSZWN0RGF0YTxkb3VibGU+KiBzID0gc3RhdGljX2Nhc3Q8SlNSZWN0RGF0YTxkb3VibGU+Kj4oSlNfR2V0T3BhcXVlKHZhbCwganNfcmVjdF9jbGFzc19pZCkpOwogIC8qIE5vdGU6ICdzJyBjYW4gYmUgTlVMTCBpbiBjYXNlIEpTX1NldE9wYXF1ZSgpIHdhcyBub3QgY2FsbGVkICovCgogIC8vIHMtPn5KU1JlY3REYXRhPGRvdWJsZT4oKTsKICBpZihzKQogICAganNfZGVhbGxvY2F0ZShydCwgcyk7Cn0KCkpTQ2xhc3NEZWYganNfcmVjdF9jbGFzcyA9IHsKICAgIC5jbGFzc19uYW1lID0gIlJlY3QiLAogICAgLmZpbmFsaXplciA9IGpzX3JlY3RfZmluYWxpemVyLAp9OwoKY29uc3QgSlNDRnVuY3Rpb25MaXN0RW50cnkganNfcmVjdF9wcm90b19mdW5jc1tdID0ge0pTX0NHRVRTRVRfRU5VTUVSQUJMRV9ERUYoIngiLCBqc19yZWN0X2dldCwganNfcmVjdF9zZXQsIFBST1BfWCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBKU19DR0VUU0VUX0VOVU1FUkFCTEVfREVGKCJ5IiwganNfcmVjdF9nZXQsIGpzX3JlY3Rfc2V0LCBQUk9QX1kpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSlNfQ0dFVFNFVF9FTlVNRVJBQkxFX0RFRigid2lkdGgiLCBqc19yZWN0X2dldCwganNfcmVjdF9zZXQsIFBST1BfV0lEVEgpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSlNfQ0dFVFNFVF9FTlVNRVJBQkxFX0RFRigiaGVpZ2h0IiwganNfcmVjdF9nZXQsIGpzX3JlY3Rfc2V0LCBQUk9QX0hFSUdIVCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBKU19DR0VUU0VUX01BR0lDX0RFRigieDIiLCBqc19yZWN0X2dldCwganNfcmVjdF9zZXQsIFBST1BfWDIpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSlNfQ0dFVFNFVF9NQUdJQ19ERUYoInkyIiwganNfcmVjdF9nZXQsIGpzX3JlY3Rfc2V0LCBQUk9QX1kyKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEpTX0NHRVRTRVRfTUFHSUNfREVGKCJwb2ludCIsIGpzX3JlY3RfZ2V0LCBqc19yZWN0X3NldCwgUFJPUF9QT1MpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSlNfQ0dFVFNFVF9NQUdJQ19ERUYoInNpemUiLCBqc19yZWN0X2dldCwganNfcmVjdF9zZXQsIFBST1BfU0laRSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBKU19BTElBU19ERUYoIngxIiwgIngiKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEpTX0FMSUFTX0RFRigieTEiLCAieSIpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJjb250YWlucyIsIDAsIGpzX3JlY3RfbWV0aG9kLCBNRVRIT0RfQ09OVEFJTlMpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJlbXB0eSIsIDAsIGpzX3JlY3RfbWV0aG9kLCBNRVRIT0RfRU1QVFkpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJhcmVhIiwgMCwganNfcmVjdF9tZXRob2QsIE1FVEhPRF9BUkVBKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEpTX0NGVU5DX01BR0lDX0RFRigiYnIiLCAwLCBqc19yZWN0X21ldGhvZCwgTUVUSE9EX0JSKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEpTX0NGVU5DX01BR0lDX0RFRigidGwiLCAwLCBqc19yZWN0X21ldGhvZCwgTUVUSE9EX1RMKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEpTX0NGVU5DX01BR0lDX0RFRigiaW5zZXQiLCAxLCBqc19yZWN0X21ldGhvZCwgTUVUSE9EX0lOU0VUKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEpTX0NGVU5DX01BR0lDX0RFRigib3V0c2V0IiwgMSwganNfcmVjdF9tZXRob2QsIE1FVEhPRF9PVVRTRVQpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJoc3BsaXQiLCAxLCBqc19yZWN0X21ldGhvZCwgTUVUSE9EX0hTUExJVCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBKU19DRlVOQ19NQUdJQ19ERUYoInZzcGxpdCIsIDEsIGpzX3JlY3RfbWV0aG9kLCBNRVRIT0RfVlNQTElUKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEpTX0NGVU5DX0RFRigidG9TdHJpbmciLCAwLCBqc19yZWN0X3RvX3N0cmluZyksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBKU19DRlVOQ19ERUYoInRvU291cmNlIiwgMCwganNfcmVjdF90b19zb3VyY2UpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJlcXVhbHMiLCAxLCBqc19yZWN0X2Z1bmNzLCBGVU5DX0VRVUFMUyksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBKU19DRlVOQ19NQUdJQ19ERUYoInJvdW5kIiwgMCwganNfcmVjdF9mdW5jcywgRlVOQ19ST1VORCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBKU19DRlVOQ19NQUdJQ19ERUYoInRvT2JqZWN0IiwgMCwganNfcmVjdF9mdW5jcywgRlVOQ19UT09CSkVDVCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBKU19DRlVOQ19NQUdJQ19ERUYoInRvQXJyYXkiLCAwLCBqc19yZWN0X2Z1bmNzLCBGVU5DX1RPQVJSQVkpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSlNfUFJPUF9TVFJJTkdfREVGKCJbU3ltYm9sLnRvU3RyaW5nVGFnXSIsICJSZWN0IiwgSlNfUFJPUF9DT05GSUdVUkFCTEUpCgp9Owpjb25zdCBKU0NGdW5jdGlvbkxpc3RFbnRyeSBqc19yZWN0X3N0YXRpY19mdW5jc1tdID0ge0pTX0NGVU5DX0RFRigiZnJvbSIsIDEsIGpzX3JlY3RfZnJvbSl9OwoKaW50CmpzX3JlY3RfaW5pdChKU0NvbnRleHQqIGN0eCwgSlNNb2R1bGVEZWYqIG0pIHsKCiAgaWYoanNfcmVjdF9jbGFzc19pZCA9PSAwKSB7CiAgICAvKiBjcmVhdGUgdGhlIFJlY3QgY2xhc3MgKi8KICAgIEpTX05ld0NsYXNzSUQoJmpzX3JlY3RfY2xhc3NfaWQpOwogICAgSlNfTmV3Q2xhc3MoSlNfR2V0UnVudGltZShjdHgpLCBqc19yZWN0X2NsYXNzX2lkLCAmanNfcmVjdF9jbGFzcyk7CgogICAgcmVjdF9wcm90byA9IEpTX05ld09iamVjdChjdHgpOwogICAgSlNfU2V0UHJvcGVydHlGdW5jdGlvbkxpc3QoY3R4LCByZWN0X3Byb3RvLCBqc19yZWN0X3Byb3RvX2Z1bmNzLCBjb3VudG9mKGpzX3JlY3RfcHJvdG9fZnVuY3MpKTsKICAgIEpTX1NldENsYXNzUHJvdG8oY3R4LCBqc19yZWN0X2NsYXNzX2lkLCByZWN0X3Byb3RvKTsKCiAgICByZWN0X2NsYXNzID0gSlNfTmV3Q0Z1bmN0aW9uMihjdHgsIGpzX3JlY3RfY3RvciwgIlJlY3QiLCAwLCBKU19DRlVOQ19jb25zdHJ1Y3RvciwgMCk7CiAgICAvKiBzZXQgcHJvdG8uY29uc3RydWN0b3IgYW5kIGN0b3IucHJvdG90eXBlICovCiAgICBKU19TZXRDb25zdHJ1Y3RvcihjdHgsIHJlY3RfY2xhc3MsIHJlY3RfcHJvdG8pOwogICAgSlNfU2V0UHJvcGVydHlGdW5jdGlvbkxpc3QoY3R4LCByZWN0X2NsYXNzLCBqc19yZWN0X3N0YXRpY19mdW5jcywgY291bnRvZihqc19yZWN0X3N0YXRpY19mdW5jcykpOwoKICAgIGpzX3NldF9pbnNwZWN0X21ldGhvZChjdHgsIHJlY3RfcHJvdG8sIGpzX3JlY3RfaW5zcGVjdCk7CiAgfQoKICBpZihtKQogICAgSlNfU2V0TW9kdWxlRXhwb3J0KGN0eCwgbSwgIlJlY3QiLCByZWN0X2NsYXNzKTsKCiAgcmV0dXJuIDA7Cn0KCmV4dGVybiAiQyIgVklTSUJMRSB2b2lkIGpzX3JlY3RfZXhwb3J0KEpTQ29udGV4dCogY3R4LCBKU01vZHVsZURlZiogbSkgewogIEpTX0FkZE1vZHVsZUV4cG9ydChjdHgsIG0sICJSZWN0Iik7Cn0KCnZvaWQKanNfcmVjdF9jb25zdHJ1Y3RvcihKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZSBwYXJlbnQsIGNvbnN0IGNoYXIqIG5hbWUpIHsKICBpZihKU19Jc1VuZGVmaW5lZChyZWN0X2NsYXNzKSkKICAgIGpzX3JlY3RfaW5pdChjdHgsIDApOwoKICBKU19TZXRQcm9wZXJ0eVN0cihjdHgsIHBhcmVudCwgbmFtZSA/IG5hbWUgOiAiUmVjdCIsIHJlY3RfY2xhc3MpOwp9CgojaWZkZWYgSlNfUkVDVF9NT0RVTEUKI2RlZmluZSBKU19JTklUX01PRFVMRSAvKlZJU0lCTEUqLyBqc19pbml0X21vZHVsZQojZWxzZQojZGVmaW5lIEpTX0lOSVRfTU9EVUxFIC8qVklTSUJMRSovIGpzX2luaXRfbW9kdWxlX3JlY3QKI2VuZGlmCgpleHRlcm4gIkMiIEpTTW9kdWxlRGVmKgpKU19JTklUX01PRFVMRShKU0NvbnRleHQqIGN0eCwgY29uc3QgY2hhciogbW9kdWxlX25hbWUpIHsKICBKU01vZHVsZURlZiogbTsKICBtID0gSlNfTmV3Q01vZHVsZShjdHgsIG1vZHVsZV9uYW1lLCAmanNfcmVjdF9pbml0KTsKICBpZighbSkKICAgIHJldHVybiBOVUxMOwogIGpzX3JlY3RfZXhwb3J0KGN0eCxtKTsKICByZXR1cm4gbTsKfQAAAAAAAAAAt0gAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAqEgAAAAAAACoSAAAAAAAAAAAAAAAAPC/"
				],
				[
					44,
					1,
					"insert",
					{
						"characters": " "
					},
					"AgAAAH0xAAAAAAAAfjEAAAAAAAAAAAAAfjEAAAAAAAB+MQAAAAAAABAAAAAgIGpzcnQganMoY3R4KTsK",
					"AQAAAAAAAAABAAAAfTEAAAAAAACNMQAAAAAAAAAAAAAAAPC/"
				],
				[
					48,
					2,
					"right_delete",
					null,
					"AgAAALkxAAAAAAAAuTEAAAAAAAAOAAAASlNfSXNVbmRlZmluZWS5MQAAAAAAALkxAAAAAAAAAQAAACg",
					"AQAAAAAAAAABAAAAuTEAAAAAAADHMQAAAAAAAAAAAAAAAPC/"
				],
				[
					51,
					1,
					"left_delete",
					null,
					"AQAAAMgxAAAAAAAAyDEAAAAAAAABAAAAKQ",
					"AQAAAAAAAAABAAAAyTEAAAAAAADJMQAAAAAAAAAAAAAAAPC/"
				],
				[
					52,
					1,
					"insert",
					{
						"characters": " =="
					},
					"AwAAAMgxAAAAAAAAyTEAAAAAAAAAAAAAyTEAAAAAAADKMQAAAAAAAAAAAADKMQAAAAAAAMsxAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAyDEAAAAAAADIMQAAAAAAAAAAAAAAAPC/"
				],
				[
					53,
					1,
					"insert",
					{
						"characters": " 0"
					},
					"AgAAAMsxAAAAAAAAzDEAAAAAAAAAAAAAzDEAAAAAAADNMQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAyzEAAAAAAADLMQAAAAAAAAAAAAAAAPC/"
				],
				[
					56,
					1,
					"insert",
					{
						"characters": " "
					},
					"AQAAAOUxAAAAAAAA5jEAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA5TEAAAAAAADlMQAAAAAAAAAAAAAAAPC/"
				],
				[
					58,
					1,
					"paste",
					null,
					"AQAAAOUxAAAAAAAA8zEAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA5TEAAAAAAADlMQAAAAAAAAAAAAAAAPC/"
				],
				[
					61,
					1,
					"insert",
					{
						"characters": " "
					},
					"AgAAAPMxAAAAAAAA9DEAAAAAAAAAAAAA9DEAAAAAAAD0MQAAAAAAAA4AAAAganMuZ2V0X3N5bWJvbA",
					"AQAAAAAAAAABAAAA8zEAAAAAAAABMgAAAAAAAAAAAAAAAPC/"
				],
				[
					64,
					1,
					"insert",
					{
						"characters": "ctx,"
					},
					"BAAAAPUxAAAAAAAA9jEAAAAAAAAAAAAA9jEAAAAAAAD3MQAAAAAAAAAAAAD3MQAAAAAAAPgxAAAAAAAAAAAAAPgxAAAAAAAA+TEAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA9TEAAAAAAAD1MQAAAAAAAAAAAAAAAPC/"
				],
				[
					65,
					1,
					"insert",
					{
						"characters": " "
					},
					"AQAAAPkxAAAAAAAA+jEAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA+TEAAAAAAAD5MQAAAAAAAAAAAAAAAPC/"
				],
				[
					68,
					1,
					"insert",
					{
						"characters": "JS_GetProperty"
					},
					"DwAAACkyAAAAAAAAKjIAAAAAAAAAAAAAKjIAAAAAAAAqMgAAAAAAAA8AAABqcy5nZXRfcHJvcGVydHkqMgAAAAAAACsyAAAAAAAAAAAAACsyAAAAAAAALDIAAAAAAAAAAAAALDIAAAAAAAAtMgAAAAAAAAAAAAAtMgAAAAAAAC4yAAAAAAAAAAAAAC4yAAAAAAAALzIAAAAAAAAAAAAALzIAAAAAAAAwMgAAAAAAAAAAAAAwMgAAAAAAADEyAAAAAAAAAAAAADEyAAAAAAAAMjIAAAAAAAAAAAAAMjIAAAAAAAAzMgAAAAAAAAAAAAAzMgAAAAAAADQyAAAAAAAAAAAAADQyAAAAAAAANTIAAAAAAAAAAAAANTIAAAAAAAA2MgAAAAAAAAAAAAA2MgAAAAAAADcyAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAKTIAAAAAAAA4MgAAAAAAAAAAAAAAAPC/"
				],
				[
					71,
					1,
					"insert",
					{
						"characters": "ctx,"
					},
					"BAAAADgyAAAAAAAAOTIAAAAAAAAAAAAAOTIAAAAAAAA6MgAAAAAAAAAAAAA6MgAAAAAAADsyAAAAAAAAAAAAADsyAAAAAAAAPDIAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAODIAAAAAAAA4MgAAAAAAAAAAAAAAAPC/"
				],
				[
					72,
					1,
					"insert",
					{
						"characters": " "
					},
					"AQAAADwyAAAAAAAAPTIAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAPDIAAAAAAAA8MgAAAAAAAAAAAAAAAPC/"
				],
				[
					81,
					1,
					"insert",
					{
						"characters": "S"
					},
					"AgAAANEwAAAAAAAA0jAAAAAAAAAAAAAA0jAAAAAAAADSMAAAAAAAAAcAAABKU1ZhbHVl",
					"AQAAAAAAAAABAAAA0TAAAAAAAADYMAAAAAAAAAAAAAAAAPC/"
				],
				[
					82,
					1,
					"left_delete",
					null,
					"AQAAANEwAAAAAAAA0TAAAAAAAAABAAAAUw",
					"AQAAAAAAAAABAAAA0jAAAAAAAADSMAAAAAAAAAAAAAAAAPC/"
				],
				[
					83,
					1,
					"insert",
					{
						"characters": "JSAtom"
					},
					"BgAAANEwAAAAAAAA0jAAAAAAAAAAAAAA0jAAAAAAAADTMAAAAAAAAAAAAADTMAAAAAAAANQwAAAAAAAAAAAAANQwAAAAAAAA1TAAAAAAAAAAAAAA1TAAAAAAAADWMAAAAAAAAAAAAADWMAAAAAAAANcwAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA0TAAAAAAAADRMAAAAAAAAAAAAAAAAPC/"
				],
				[
					86,
					15,
					"left_delete",
					null,
					"DwAAAPUwAAAAAAAA9TAAAAAAAAABAAAARPQwAAAAAAAA9DAAAAAAAAABAAAARfMwAAAAAAAA8zAAAAAAAAABAAAATvIwAAAAAAAA8jAAAAAAAAABAAAASfEwAAAAAAAA8TAAAAAAAAABAAAARvAwAAAAAAAA8DAAAAAAAAABAAAARe8wAAAAAAAA7zAAAAAAAAABAAAARO4wAAAAAAAA7jAAAAAAAAABAAAATu0wAAAAAAAA7TAAAAAAAAABAAAAVewwAAAAAAAA7DAAAAAAAAABAAAAX+swAAAAAAAA6zAAAAAAAAABAAAAU+owAAAAAAAA6jAAAAAAAAABAAAASukwAAAAAAAA6TAAAAAAAAABAAAAIOgwAAAAAAAA6DAAAAAAAAABAAAAPecwAAAAAAAA5zAAAAAAAAABAAAAIA",
					"AQAAAAAAAAABAAAA9jAAAAAAAAD2MAAAAAAAAAAAAAAAAPC/"
				],
				[
					87,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAAAVSQAAI2luY2x1ZGUgImpzYmluZGluZ3MuaHBwIgojaW5jbHVkZSAianNfcmVjdC5ocHAiCiNpbmNsdWRlICJqc19zaXplLmhwcCIKI2luY2x1ZGUgImpzX3BvaW50LmhwcCIKI2luY2x1ZGUgImpzX2FsbG9jLmhwcCIKI2luY2x1ZGUgImpzX2FycmF5LmhwcCIKI2luY2x1ZGUgImpzX3R5cGVkX2FycmF5LmhwcCIKI2luY2x1ZGUgInV0aWwuaHBwIgoKZXh0ZXJuICJDIiB7CkpTVmFsdWUgcmVjdF9wcm90byA9IEpTX1VOREVGSU5FRCwgcmVjdF9jbGFzcyA9IEpTX1VOREVGSU5FRDsKSlNDbGFzc0lEIGpzX3JlY3RfY2xhc3NfaWQgPSAwOwp9CgpleHRlcm4gIkMiIFZJU0lCTEUgSlNWYWx1ZQpqc19yZWN0X25ldyhKU0NvbnRleHQqIGN0eCwgZG91YmxlIHgsIGRvdWJsZSB5LCBkb3VibGUgdywgZG91YmxlIGgpIHsKICBKU1ZhbHVlIHJldDsKICBKU1JlY3REYXRhPGRvdWJsZT4qIHM7CgogIGlmKEpTX0lzVW5kZWZpbmVkKHJlY3RfcHJvdG8pKQogICAganNfcmVjdF9pbml0KGN0eCwgTlVMTCk7CgogIHJldCA9IEpTX05ld09iamVjdFByb3RvQ2xhc3MoY3R4LCByZWN0X3Byb3RvLCBqc19yZWN0X2NsYXNzX2lkKTsKCiAgcyA9IGpzX2FsbG9jYXRlPEpTUmVjdERhdGE8ZG91YmxlPj4oY3R4KTsKCiAgbmV3KHMpIEpTUmVjdERhdGE8ZG91YmxlPigpOwogIHMtPnggPSB4IDw9IERCTF9FUFNJTE9OID8gMCA6IHg7CiAgcy0+eSA9IHkgPD0gREJMX0VQU0lMT04gPyAwIDogeTsKICBzLT53aWR0aCA9IHcgPD0gREJMX0VQU0lMT04gPyAwIDogdzsKICBzLT5oZWlnaHQgPSBoIDw9IERCTF9FUFNJTE9OID8gMCA6IGg7CgogIEpTX1NldE9wYXF1ZShyZXQsIHMpOwogIHJldHVybiByZXQ7Cn0KClZJU0lCTEUgSlNWYWx1ZQpqc19yZWN0X3dyYXAoSlNDb250ZXh0KiBjdHgsIGNvbnN0IEpTUmVjdERhdGE8ZG91YmxlPiYgcmVjdCkgewogIHJldHVybiBqc19yZWN0X25ldyhjdHgsIHJlY3QueCwgcmVjdC55LCByZWN0LndpZHRoLCByZWN0LmhlaWdodCk7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX3JlY3RfY3RvcihKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IG5ld190YXJnZXQsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QqIGFyZ3YpIHsKICBkb3VibGUgeCA9IDAsIHkgPSAwLCB3ID0gMCwgaCA9IDA7CiAgSlNSZWN0RGF0YTxkb3VibGU+IHJlY3QgPSB7MCwgMCwgMCwgMH07CiAgaW50IG9wdGluZCA9IDA7CgogIGlmKGFyZ2MgPiAwKSB7CiAgICBpZighanNfcmVjdF9yZWFkKGN0eCwgYXJndlswXSwgJnJlY3QpKSB7CiAgICAgIEpTUG9pbnREYXRhPGRvdWJsZT4gcG9pbnQsIHBvaW50MjsKICAgICAgSlNTaXplRGF0YTxkb3VibGU+IHNpemU7CiAgICAgIHdoaWxlKG9wdGluZCA8IGFyZ2MpIHsKICAgICAgICBpZihKU19Jc051bWJlcihhcmd2W29wdGluZF0pICYmIEpTX0lzTnVtYmVyKGFyZ3Zbb3B0aW5kICsgMV0pKSB7CiAgICAgICAgICBpZihvcHRpbmQgPT0gMCkgewogICAgICAgICAgICBKU19Ub0Zsb2F0NjQoY3R4LCAmeCwgYXJndltvcHRpbmRdKTsKICAgICAgICAgICAgSlNfVG9GbG9hdDY0KGN0eCwgJnksIGFyZ3Zbb3B0aW5kICsgMV0pOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgSlNfVG9GbG9hdDY0KGN0eCwgJncsIGFyZ3Zbb3B0aW5kXSk7CiAgICAgICAgICAgIEpTX1RvRmxvYXQ2NChjdHgsICZoLCBhcmd2W29wdGluZCArIDFdKTsKICAgICAgICAgIH0KICAgICAgICAgIG9wdGluZCArPSAyOwogICAgICAgIH0gZWxzZSBpZihqc19wb2ludF9yZWFkKGN0eCwgYXJndltvcHRpbmRdLCBvcHRpbmQgPT0gMCA/ICZwb2ludCA6ICZwb2ludDIpKSB7CiAgICAgICAgICBpZihvcHRpbmQgPT0gMCkgewogICAgICAgICAgICB4ID0gcG9pbnQueDsKICAgICAgICAgICAgeSA9IHBvaW50Lnk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB3ID0gcG9pbnQyLnggLSB4OwogICAgICAgICAgICBoID0gcG9pbnQyLnkgLSB5OwogICAgICAgICAgfQogICAgICAgICAgb3B0aW5kKys7CiAgICAgICAgfQoKICAgICAgICBlbHNlIGlmKGpzX3NpemVfcmVhZChjdHgsIGFyZ3Zbb3B0aW5kXSwgJnNpemUpKSB7CiAgICAgICAgICB3ID0gc2l6ZS53aWR0aDsKICAgICAgICAgIGggPSBzaXplLmhlaWdodDsKICAgICAgICAgIG9wdGluZCsrOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBvcHRpbmQrKzsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICB9CgogIHJldHVybiBqc19yZWN0X25ldyhjdHgsIHgsIHksIHcsIGgpOwp9CgpWSVNJQkxFIEpTUmVjdERhdGE8ZG91YmxlPioKanNfcmVjdF9kYXRhKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdmFsKSB7CiAgcmV0dXJuIHN0YXRpY19jYXN0PEpTUmVjdERhdGE8ZG91YmxlPio+KEpTX0dldE9wYXF1ZTIoY3R4LCB2YWwsIGpzX3JlY3RfY2xhc3NfaWQpKTsKfQoKZW51bSB7IFBST1BfWCA9IDAsIFBST1BfWSwgUFJPUF9XSURUSCwgUFJPUF9IRUlHSFQsIFBST1BfWDIsIFBST1BfWTIsIFBST1BfUE9TLCBQUk9QX1NJWkUgfTsKCnN0YXRpYyBKU1ZhbHVlCmpzX3JlY3RfZ2V0KEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBtYWdpYykgewogIEpTVmFsdWUgcmV0ID0gSlNfVU5ERUZJTkVEOwogIEpTUmVjdERhdGE8ZG91YmxlPiogczsKCiAgaWYoKHMgPSBzdGF0aWNfY2FzdDxKU1JlY3REYXRhPGRvdWJsZT4qPihKU19HZXRPcGFxdWUyKGN0eCwgdGhpc192YWwsIGpzX3JlY3RfY2xhc3NfaWQpKSkgPT0gbnVsbHB0cikKICAgIHJldHVybiBKU19FWENFUFRJT047CgogIHN3aXRjaChtYWdpYykgewogICAgY2FzZSBQUk9QX1g6IHsKICAgICAgcmV0ID0gSlNfTmV3RmxvYXQ2NChjdHgsIHMtPngpOwogICAgICBicmVhazsKICAgIH0KICAgIGNhc2UgUFJPUF9ZOiB7CiAgICAgIHJldCA9IEpTX05ld0Zsb2F0NjQoY3R4LCBzLT55KTsKICAgICAgYnJlYWs7CiAgICB9CiAgICBjYXNlIFBST1BfV0lEVEg6IHsKICAgICAgcmV0ID0gSlNfTmV3RmxvYXQ2NChjdHgsIHMtPndpZHRoKTsKICAgICAgYnJlYWs7CiAgICB9CiAgICBjYXNlIFBST1BfSEVJR0hUOiB7CiAgICAgIHJldCA9IEpTX05ld0Zsb2F0NjQoY3R4LCBzLT5oZWlnaHQpOwogICAgICBicmVhazsKICAgIH0KICAgIGNhc2UgUFJPUF9YMjogewogICAgICByZXQgPSBKU19OZXdGbG9hdDY0KGN0eCwgcy0+eCArIHMtPndpZHRoKTsKICAgICAgYnJlYWs7CiAgICB9CiAgICBjYXNlIFBST1BfWTI6IHsKICAgICAgcmV0ID0gSlNfTmV3RmxvYXQ2NChjdHgsIHMtPnkgKyBzLT5oZWlnaHQpOwogICAgICBicmVhazsKICAgIH0KICAgIGNhc2UgUFJPUF9QT1M6IHsKICAgICAgcmV0ID0ganNfcG9pbnRfbmV3KGN0eCwgcy0+eCwgcy0+eSk7CiAgICAgIGJyZWFrOwogICAgfQogICAgY2FzZSBQUk9QX1NJWkU6IHsKICAgICAgcmV0ID0ganNfc2l6ZV9uZXcoY3R4LCBzLT53aWR0aCwgcy0+aGVpZ2h0KTsKICAgICAgYnJlYWs7CiAgICB9CiAgfQogIHJldHVybiByZXQ7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX3JlY3Rfc2V0KEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIEpTVmFsdWVDb25zdCB2YWwsIGludCBtYWdpYykgewogIEpTUmVjdERhdGE8ZG91YmxlPiogczsKICBkb3VibGUgdjsKICBpZigocyA9IHN0YXRpY19jYXN0PEpTUmVjdERhdGE8ZG91YmxlPio+KEpTX0dldE9wYXF1ZTIoY3R4LCB0aGlzX3ZhbCwganNfcmVjdF9jbGFzc19pZCkpKSA9PSBudWxscHRyKQogICAgcmV0dXJuIEpTX0VYQ0VQVElPTjsKCiAgaWYoSlNfVG9GbG9hdDY0KGN0eCwgJnYsIHZhbCkpCiAgICByZXR1cm4gSlNfRVhDRVBUSU9OOwoKICBzd2l0Y2gobWFnaWMpIHsKICAgIGNhc2UgUFJPUF9YOiB7CiAgICAgIHMtPnggPSB2OwogICAgICBicmVhazsKICAgIH0KICAgIGNhc2UgUFJPUF9ZOiB7CiAgICAgIHMtPnkgPSB2OwogICAgICBicmVhazsKICAgIH0KICAgIGNhc2UgUFJPUF9XSURUSDogewogICAgICBzLT53aWR0aCA9IHY7CiAgICAgIGJyZWFrOwogICAgfQogICAgY2FzZSBQUk9QX0hFSUdIVDogewogICAgICBzLT5oZWlnaHQgPSB2OwogICAgICBicmVhazsKICAgIH0KICAgIGNhc2UgUFJPUF9YMjogewogICAgICBzLT53aWR0aCA9IHYgLSBzLT54OwogICAgICBicmVhazsKICAgIH0KICAgIGNhc2UgUFJPUF9ZMjogewogICAgICBzLT5oZWlnaHQgPSB2IC0gcy0+eTsKICAgICAgYnJlYWs7CiAgICB9CiAgICBjYXNlIFBST1BfUE9TOiB7CiAgICAgIEpTUG9pbnREYXRhPGRvdWJsZT4gcG9pbnQ7CiAgICAgIGpzX3BvaW50X3JlYWQoY3R4LCB2YWwsICZwb2ludCk7CiAgICAgIHMtPnggPSBwb2ludC54OwogICAgICBzLT55ID0gcG9pbnQueTsKICAgICAgYnJlYWs7CiAgICB9CiAgICBjYXNlIFBST1BfU0laRTogewogICAgICBKU1NpemVEYXRhPGRvdWJsZT4gc2l6ZTsKICAgICAganNfc2l6ZV9yZWFkKGN0eCwgdmFsLCAmc2l6ZSk7CiAgICAgIHMtPndpZHRoID0gc2l6ZS53aWR0aDsKICAgICAgcy0+aGVpZ2h0ID0gc2l6ZS5oZWlnaHQ7CiAgICAgIGJyZWFrOwogICAgfQogIH0KCiAgcmV0dXJuIEpTX1VOREVGSU5FRDsKfQoKc3RhdGljIEpTVmFsdWUKanNfcmVjdF90b19zdHJpbmcoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCogYXJndikgewogIEpTUmVjdERhdGE8ZG91YmxlPiByZWN0LCAqczsKICBzdGQ6Om9zdHJpbmdzdHJlYW0gb3M7CiAgc3RkOjphcnJheTxjb25zdCBjaGFyKiwgMz4gZGVsaW1zID0gewogICAgICAiLCIsCiAgICAgICLiiKMiIC8q772c4qe44qaB4o6u4oil4oij4ri+4ryB4p2Y4p2Z4p+K4o2/4o644o+Q772c4pSC77+o77iy77ix4p2YfO+9nCovLAogICAgICAiw5ciIC8qIvCdhYPwn4Wn8J2aofCfhafwn4WH8J2YufCdmqHwnZi58J2Qseqtl/CdkJfwnZG/8J2Fg/CdhYN4y6PigpPikrPik43ik6finJXinJjinJfiqIniqK/iqILinJbiqLvipoHii4XiipfiiqDiiJfDl+Kor8OXIiovfTsKCiAgZm9yKHNpemVfdCBpID0gMDsgaSA8IGFyZ2M7IGkrKykgeyBkZWxpbXNbaV0gPSBKU19Ub0NTdHJpbmcoY3R4LCBhcmd2W2ldKTsgfQoKICBpZigocyA9IHN0YXRpY19jYXN0PEpTUmVjdERhdGE8ZG91YmxlPio+KEpTX0dldE9wYXF1ZTIoY3R4LCB0aGlzX3ZhbCwganNfcmVjdF9jbGFzc19pZCkpKSAhPSBudWxscHRyKSB7CiAgICByZWN0ID0gKnM7CiAgfSBlbHNlIHsKICAgIGpzX3JlY3RfcmVhZChjdHgsIHRoaXNfdmFsLCAmcmVjdCk7CiAgfQoKICBvcyA8PCByZWN0LnggPDwgZGVsaW1zWzBdIDw8IHJlY3QueSA8PCBkZWxpbXNbMV0gPDwgcmVjdC53aWR0aCA8PCBkZWxpbXNbMl0gPDwgcmVjdC5oZWlnaHQ7CgogIHJldHVybiBKU19OZXdTdHJpbmcoY3R4LCBvcy5zdHIoKS5jX3N0cigpKTsKfQpzdGF0aWMgSlNWYWx1ZQpqc19yZWN0X3RvX3NvdXJjZShKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2KSB7CiAgSlNSZWN0RGF0YTxkb3VibGU+IHJlY3QsICpzOwogIHN0ZDo6b3N0cmluZ3N0cmVhbSBvczsKCiAgaWYoKHMgPSBzdGF0aWNfY2FzdDxKU1JlY3REYXRhPGRvdWJsZT4qPihKU19HZXRPcGFxdWUyKGN0eCwgdGhpc192YWwsIGpzX3JlY3RfY2xhc3NfaWQpKSkgIT0gbnVsbHB0cikgewogICAgcmVjdCA9ICpzOwogIH0gZWxzZSB7CiAgICBqc19yZWN0X3JlYWQoY3R4LCB0aGlzX3ZhbCwgJnJlY3QpOwogIH0KCiAgb3MgPDwgInt4OiIgPDwgcmVjdC54IDw8ICIseToiIDw8IHJlY3QueSA8PCAiLHdpZHRoOiIgPDwgcmVjdC53aWR0aCA8PCAiLGhlaWdodDoiIDw8IHJlY3QuaGVpZ2h0IDw8ICJ9IjsKCiAgcmV0dXJuIEpTX05ld1N0cmluZyhjdHgsIG9zLnN0cigpLmNfc3RyKCkpOwp9CgplbnVtIHsgRlVOQ19FUVVBTFMgPSAwLCBGVU5DX1JPVU5ELCBGVU5DX1RPT0JKRUNULCBGVU5DX1RPQVJSQVkgfTsKCnN0YXRpYyBKU1ZhbHVlCmpzX3JlY3RfZnVuY3MoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCogYXJndiwgaW50IG1hZ2ljKSB7CiAgSlNSZWN0RGF0YTxkb3VibGU+IHJlY3QsIG90aGVyLCAqcywgKmE7CiAgSlNWYWx1ZSByZXQgPSBKU19FWENFUFRJT047CgogIGlmKChzID0ganNfcmVjdF9kYXRhKGN0eCwgdGhpc192YWwpKSA9PSBudWxscHRyKQogICAgcmV0dXJuIHJldDsKCiAgcmVjdCA9ICpzOwoKICBzd2l0Y2gobWFnaWMpIHsKICAgIGNhc2UgRlVOQ19FUVVBTFM6IHsKICAgICAganNfcmVjdF9yZWFkKGN0eCwgYXJndlswXSwgJm90aGVyKTsKICAgICAgYm9vbCBlcXVhbHMgPSByZWN0LnggPT0gb3RoZXIueCAmJiByZWN0LnkgPT0gb3RoZXIueSAmJiByZWN0LndpZHRoID09IG90aGVyLndpZHRoICYmIHJlY3QuaGVpZ2h0ID09IG90aGVyLmhlaWdodDsKICAgICAgcmV0ID0gSlNfTmV3Qm9vbChjdHgsIGVxdWFscyk7CiAgICAgIGJyZWFrOwogICAgfQogICAgY2FzZSBGVU5DX1JPVU5EOiB7CiAgICAgIGRvdWJsZSB4LCB5LCB3aWR0aCwgaGVpZ2h0LCBmOwogICAgICBpbnQzMl90IHByZWNpc2lvbiA9IDA7CiAgICAgIGlmKGFyZ2MgPiAwKQogICAgICAgIEpTX1RvSW50MzIoY3R4LCAmcHJlY2lzaW9uLCBhcmd2WzBdKTsKICAgICAgZiA9IHN0ZDo6cG93KDEwLCBwcmVjaXNpb24pOwogICAgICB4ID0gc3RkOjpyb3VuZChyZWN0LnggKiBmKSAvIGY7CiAgICAgIHkgPSBzdGQ6OnJvdW5kKHJlY3QueSAqIGYpIC8gZjsKICAgICAgd2lkdGggPSBzdGQ6OnJvdW5kKHJlY3Qud2lkdGggKiBmKSAvIGY7CiAgICAgIGhlaWdodCA9IHN0ZDo6cm91bmQocmVjdC5oZWlnaHQgKiBmKSAvIGY7CiAgICAgIHJldCA9IGpzX3JlY3RfbmV3KGN0eCwgeCwgeSwgd2lkdGgsIGhlaWdodCk7CiAgICAgIGJyZWFrOwogICAgfQogICAgY2FzZSBGVU5DX1RPT0JKRUNUOiB7CiAgICAgIHJldCA9IEpTX05ld09iamVjdChjdHgpOwoKICAgICAgSlNfU2V0UHJvcGVydHlTdHIoY3R4LCByZXQsICJ4IiwgSlNfTmV3RmxvYXQ2NChjdHgsIHJlY3QueCkpOwogICAgICBKU19TZXRQcm9wZXJ0eVN0cihjdHgsIHJldCwgInkiLCBKU19OZXdGbG9hdDY0KGN0eCwgcmVjdC55KSk7CiAgICAgIEpTX1NldFByb3BlcnR5U3RyKGN0eCwgcmV0LCAid2lkdGgiLCBKU19OZXdGbG9hdDY0KGN0eCwgcmVjdC53aWR0aCkpOwogICAgICBKU19TZXRQcm9wZXJ0eVN0cihjdHgsIHJldCwgImhlaWdodCIsIEpTX05ld0Zsb2F0NjQoY3R4LCByZWN0LmhlaWdodCkpOwogICAgICBicmVhazsKICAgIH0KICAgIGNhc2UgRlVOQ19UT0FSUkFZOiB7CiAgICAgIHN0ZDo6YXJyYXk8ZG91YmxlLCA0PiBhcnJheXtyZWN0LngsIHJlY3QueSwgcmVjdC53aWR0aCwgcmVjdC5oZWlnaHR9OwoKICAgICAgcmV0ID0ganNfYXJyYXlfZnJvbShjdHgsIGFycmF5LmNiZWdpbigpLCBhcnJheS5jZW5kKCkpOwogICAgICBicmVhazsKICAgIH0KICB9CgogIHJldHVybiByZXQ7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX3JlY3RfaW5zcGVjdChKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2KSB7CiAgSlNSZWN0RGF0YTxkb3VibGU+KiByID0ganNfcmVjdF9kYXRhKGN0eCwgdGhpc192YWwpOwogIEpTVmFsdWUgb2JqID0gSlNfTmV3T2JqZWN0UHJvdG8oY3R4LCByZWN0X3Byb3RvKTsKCiAgSlNfRGVmaW5lUHJvcGVydHlWYWx1ZVN0cihjdHgsIG9iaiwgIngiLCBKU19OZXdGbG9hdDY0KGN0eCwgci0+eCksIEpTX1BST1BfRU5VTUVSQUJMRSk7CiAgSlNfRGVmaW5lUHJvcGVydHlWYWx1ZVN0cihjdHgsIG9iaiwgInkiLCBKU19OZXdGbG9hdDY0KGN0eCwgci0+eSksIEpTX1BST1BfRU5VTUVSQUJMRSk7CiAgSlNfRGVmaW5lUHJvcGVydHlWYWx1ZVN0cihjdHgsIG9iaiwgIndpZHRoIiwgSlNfTmV3RmxvYXQ2NChjdHgsIHItPndpZHRoKSwgSlNfUFJPUF9FTlVNRVJBQkxFKTsKICBKU19EZWZpbmVQcm9wZXJ0eVZhbHVlU3RyKGN0eCwgb2JqLCAiaGVpZ2h0IiwgSlNfTmV3RmxvYXQ2NChjdHgsIHItPmhlaWdodCksIEpTX1BST1BfRU5VTUVSQUJMRSk7CiAgcmV0dXJuIG9iajsKfQoKZW51bSB7CiAgTUVUSE9EX0NPTlRBSU5TID0gMCwKICBNRVRIT0RfRU1QVFksCiAgTUVUSE9EX0FSRUEsCiAgTUVUSE9EX0JSLAogIE1FVEhPRF9UTCwKICBNRVRIT0RfU0laRSwKICBNRVRIT0RfSU5TRVQsCiAgTUVUSE9EX09VVFNFVCwKICBNRVRIT0RfSFNQTElULAogIE1FVEhPRF9WU1BMSVQKfTsKCnN0YXRpYyBKU1ZhbHVlCmpzX3JlY3RfbWV0aG9kKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgcmVjdCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCogYXJndiwgaW50IG1hZ2ljKSB7CiAgSlNSZWN0RGF0YTxkb3VibGU+KiBzID0gc3RhdGljX2Nhc3Q8SlNSZWN0RGF0YTxkb3VibGU+Kj4oSlNfR2V0T3BhcXVlMihjdHgsIHJlY3QsIGpzX3JlY3RfY2xhc3NfaWQpKTsKICBKU1ZhbHVlIHJldCA9IEpTX1VOREVGSU5FRDsKICBKU1BvaW50RGF0YTxkb3VibGU+IHBvaW50ID0ganNfcG9pbnRfZ2V0KGN0eCwgYXJndlswXSk7CgogIHN3aXRjaChtYWdpYykgewogICAgY2FzZSBNRVRIT0RfQ09OVEFJTlM6IHsKICAgICAgcmV0ID0gSlNfTmV3Qm9vbChjdHgsIHMtPmNvbnRhaW5zKHBvaW50KSk7CiAgICAgIGJyZWFrOwogICAgfQogICAgY2FzZSBNRVRIT0RfRU1QVFk6IHsKICAgICAgcmV0ID0gSlNfTmV3Qm9vbChjdHgsIHMtPmVtcHR5KCkpOwogICAgICBicmVhazsKICAgIH0KICAgIGNhc2UgTUVUSE9EX0FSRUE6IHsKICAgICAgcmV0ID0gSlNfTmV3RmxvYXQ2NChjdHgsIHMtPmFyZWEoKSk7CiAgICAgIGJyZWFrOwogICAgfQogICAgY2FzZSBNRVRIT0RfQlI6CiAgICBjYXNlIE1FVEhPRF9UTDogewogICAgICBKU1BvaW50RGF0YTxkb3VibGU+IHB0ID0gbWFnaWMgPT0gMyA/IHMtPmJyKCkgOiBzLT50bCgpOwoKICAgICAgcmV0ID0ganNfcG9pbnRfbmV3KGN0eCwgcHQueCwgcHQueSk7CiAgICAgIGJyZWFrOwogICAgfQogICAgY2FzZSBNRVRIT0RfU0laRTogewogICAgICBjdjo6U2l6ZTJkIHN6ID0gcy0+c2l6ZSgpOwogICAgICByZXQgPSBqc19zaXplX25ldyhjdHgsIHN6LndpZHRoLCBzei5oZWlnaHQpOwogICAgICBicmVhazsKICAgIH0KICAgIGNhc2UgTUVUSE9EX0lOU0VUOiB7CiAgICAgIEpTUmVjdERhdGE8ZG91YmxlPiByZWN0ID0gKnM7CiAgICAgIGlmKGFyZ2MgPj0gMSkgewogICAgICAgIGRvdWJsZSBuOwogICAgICAgIEpTX1RvRmxvYXQ2NChjdHgsICZuLCBhcmd2WzBdKTsKICAgICAgICByZWN0LnggKz0gbjsKICAgICAgICByZWN0LndpZHRoIC09IG4gKiAyOwogICAgICAgIHJlY3QueSArPSBuOwogICAgICAgIHJlY3QuaGVpZ2h0IC09IG4gKiAyOwoKICAgICAgfSBlbHNlIGlmKGFyZ2MgPj0gMikgewogICAgICAgIGRvdWJsZSBoLCB2OwogICAgICAgIEpTX1RvRmxvYXQ2NChjdHgsICZoLCBhcmd2WzBdKTsKICAgICAgICBKU19Ub0Zsb2F0NjQoY3R4LCAmdiwgYXJndlsxXSk7CiAgICAgICAgcmVjdC54ICs9IGg7CiAgICAgICAgcmVjdC53aWR0aCAtPSBoICogMjsKICAgICAgICByZWN0LnkgKz0gdjsKICAgICAgICByZWN0LmhlaWdodCAtPSB2ICogMjsKCiAgICAgIH0gZWxzZSBpZihhcmdjID49IDQpIHsKICAgICAgICBkb3VibGUgdCwgciwgYiwgbDsKICAgICAgICBKU19Ub0Zsb2F0NjQoY3R4LCAmdCwgYXJndlswXSk7CiAgICAgICAgSlNfVG9GbG9hdDY0KGN0eCwgJnIsIGFyZ3ZbMV0pOwogICAgICAgIEpTX1RvRmxvYXQ2NChjdHgsICZiLCBhcmd2WzJdKTsKICAgICAgICBKU19Ub0Zsb2F0NjQoY3R4LCAmbCwgYXJndlszXSk7CiAgICAgICAgcmVjdC54ICs9IGw7CiAgICAgICAgcmVjdC53aWR0aCAtPSBsICsgcjsKICAgICAgICByZWN0LnkgKz0gdDsKICAgICAgICByZWN0LmhlaWdodCAtPSB0ICsgYjsKICAgICAgfQogICAgICByZXQgPSBqc19yZWN0X3dyYXAoY3R4LCByZWN0KTsKICAgICAgYnJlYWs7CiAgICB9CgogICAgY2FzZSBNRVRIT0RfT1VUU0VUOiB7CiAgICAgIEpTUmVjdERhdGE8ZG91YmxlPiByZWN0ID0gKnM7CiAgICAgIGlmKGFyZ2MgPj0gMSkgewogICAgICAgIGRvdWJsZSBuOwogICAgICAgIEpTX1RvRmxvYXQ2NChjdHgsICZuLCBhcmd2WzBdKTsKICAgICAgICByZWN0LnggLT0gbjsKICAgICAgICByZWN0LndpZHRoICs9IG4gKiAyOwogICAgICAgIHJlY3QueSAtPSBuOwogICAgICAgIHJlY3QuaGVpZ2h0ICs9IG4gKiAyOwoKICAgICAgfSBlbHNlIGlmKGFyZ2MgPj0gMikgewogICAgICAgIGRvdWJsZSBoLCB2OwogICAgICAgIEpTX1RvRmxvYXQ2NChjdHgsICZoLCBhcmd2WzBdKTsKICAgICAgICBKU19Ub0Zsb2F0NjQoY3R4LCAmdiwgYXJndlsxXSk7CiAgICAgICAgcmVjdC54IC09IGg7CiAgICAgICAgcmVjdC53aWR0aCArPSBoICogMjsKICAgICAgICByZWN0LnkgLT0gdjsKICAgICAgICByZWN0LmhlaWdodCArPSB2ICogMjsKCiAgICAgIH0gZWxzZSBpZihhcmdjID49IDQpIHsKICAgICAgICBkb3VibGUgdCwgciwgYiwgbDsKICAgICAgICBKU19Ub0Zsb2F0NjQoY3R4LCAmdCwgYXJndlswXSk7CiAgICAgICAgSlNfVG9GbG9hdDY0KGN0eCwgJnIsIGFyZ3ZbMV0pOwogICAgICAgIEpTX1RvRmxvYXQ2NChjdHgsICZiLCBhcmd2WzJdKTsKICAgICAgICBKU19Ub0Zsb2F0NjQoY3R4LCAmbCwgYXJndlszXSk7CiAgICAgICAgcmVjdC54IC09IGw7CiAgICAgICAgcmVjdC53aWR0aCArPSBsICsgcjsKICAgICAgICByZWN0LnkgLT0gdDsKICAgICAgICByZWN0LmhlaWdodCArPSB0ICsgYjsKICAgICAgfQogICAgICByZXQgPSBqc19yZWN0X3dyYXAoY3R4LCByZWN0KTsKICAgICAgYnJlYWs7CiAgICB9CiAgICBjYXNlIE1FVEhPRF9IU1BMSVQ6IHsKICAgICAgc3RkOjp2ZWN0b3I8SlNSZWN0RGF0YTxkb3VibGU+PiByZWN0czsKICAgICAgZG91YmxlIHgxID0gcy0+eCwgeDIgPSBzLT54ICsgcy0+d2lkdGg7CiAgICAgIGF1dG8gYXJncyA9IGFyZ3VtZW50X3JhbmdlKGFyZ2MsIGFyZ3YpOwogICAgICBKU1JlY3REYXRhPGRvdWJsZT4qIHByZXY7CiAgICAgIHN0ZDo6dmVjdG9yPGRvdWJsZT4gYnJlYWtwb2ludHM7CiAgICAgIGZvcihKU1ZhbHVlQ29uc3QgY29uc3QmIGFyZyA6IGFyZ3MpIHsKICAgICAgICBkb3VibGUgZDsKICAgICAgICBqc192YWx1ZV90byhjdHgsIGFyZywgZCk7CiAgICAgICAgaWYoZCA8IDApCiAgICAgICAgICBkID0gcy0+d2lkdGggKyBkOwogICAgICAgIGlmKGQgPiAwICYmIGQgPCBzLT53aWR0aCkKICAgICAgICAgIGJyZWFrcG9pbnRzLnB1c2hfYmFjayhkKTsKICAgICAgfQogICAgICBzdGQ6OnNvcnQoYnJlYWtwb2ludHMuYmVnaW4oKSwgYnJlYWtwb2ludHMuZW5kKCkpOwogICAgICByZWN0cy5wdXNoX2JhY2soKnMpOwogICAgICBwcmV2ID0gJnJlY3RzLmJhY2soKTsKICAgICAgZm9yKGRvdWJsZSBoIDogYnJlYWtwb2ludHMpIHsKICAgICAgICAvLyBwcmludGYoImhzcGxpdCBoPSVsZlxuIiwgaCk7CiAgICAgICAgcHJldi0+d2lkdGggPSBoIC0gKHByZXYtPnggLSB4MSk7CiAgICAgICAgcmVjdHMucHVzaF9iYWNrKCpzKTsKICAgICAgICByZWN0cy5iYWNrKCkueCA9IHgxICsgaDsKICAgICAgICBwcmV2ID0gJnJlY3RzLmJhY2soKTsKICAgICAgICBwcmV2LT53aWR0aCA9IHMtPndpZHRoIC0gaDsKICAgICAgfQogICAgICByZXQgPSBqc19hcnJheV9mcm9tKGN0eCwgcmVjdHMpOwogICAgICBicmVhazsKICAgIH0KICAgIGNhc2UgTUVUSE9EX1ZTUExJVDogewogICAgICBzdGQ6OnZlY3RvcjxKU1JlY3REYXRhPGRvdWJsZT4+IHJlY3RzOwogICAgICBkb3VibGUgeTEgPSBzLT55LCB5MiA9IHMtPnkgKyBzLT5oZWlnaHQ7CiAgICAgIGF1dG8gYXJncyA9IGFyZ3VtZW50X3JhbmdlKGFyZ2MsIGFyZ3YpOwogICAgICBKU1JlY3REYXRhPGRvdWJsZT4qIHByZXY7CiAgICAgIHN0ZDo6dmVjdG9yPGRvdWJsZT4gYnJlYWtwb2ludHM7CiAgICAgIGZvcihKU1ZhbHVlQ29uc3QgY29uc3QmIGFyZyA6IGFyZ3MpIHsKICAgICAgICBkb3VibGUgZDsKICAgICAgICBqc192YWx1ZV90byhjdHgsIGFyZywgZCk7CiAgICAgICAgaWYoZCA8IDApCiAgICAgICAgICBkID0gcy0+aGVpZ2h0ICsgZDsKICAgICAgICBpZihkID4gMCAmJiBkIDwgcy0+aGVpZ2h0KQogICAgICAgICAgYnJlYWtwb2ludHMucHVzaF9iYWNrKGQpOwogICAgICB9CiAgICAgIHN0ZDo6c29ydChicmVha3BvaW50cy5iZWdpbigpLCBicmVha3BvaW50cy5lbmQoKSk7CiAgICAgIHJlY3RzLnB1c2hfYmFjaygqcyk7CiAgICAgIHByZXYgPSAmcmVjdHMuYmFjaygpOwogICAgICBmb3IoZG91YmxlIHYgOiBicmVha3BvaW50cykgewogICAgICAgIC8vIHByaW50ZigiaHNwbGl0IHY9JWxmXG4iLCB2KTsKICAgICAgICBwcmV2LT5oZWlnaHQgPSB2IC0gKHByZXYtPnkgLSB5MSk7CiAgICAgICAgcmVjdHMucHVzaF9iYWNrKCpzKTsKICAgICAgICByZWN0cy5iYWNrKCkueSA9IHkxICsgdjsKICAgICAgICBwcmV2ID0gJnJlY3RzLmJhY2soKTsKICAgICAgICBwcmV2LT5oZWlnaHQgPSBzLT5oZWlnaHQgLSB2OwogICAgICB9CiAgICAgIHJldCA9IGpzX2FycmF5X2Zyb20oY3R4LCByZWN0cyk7CiAgICAgIGJyZWFrOwogICAgfQogIH0KCiAgcmV0dXJuIHJldDsKfQoKc3RhdGljIEpTQXRvbSBpdGVyYXRvcl9zeW1ib2w7CgpzdGF0aWMgSlNWYWx1ZQpqc19yZWN0X3N5bWJvbF9pdGVyYXRvcihKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2KSB7CiAgSlNWYWx1ZSBhcnIsIGl0ZXI7CiAgIGFyciA9IGpzX3JlY3RfZnVuY3MoY3R4LCB0aGlzX3ZhbCwgYXJnYywgYXJndiwgMyk7CgogIGlmKGl0ZXJhdG9yX3N5bWJvbCA9PSAwKQogICAgaXRlcmF0b3Jfc3ltYm9sID0ganNfc3ltYm9sX2F0b20gKGN0eCwgIml0ZXJhdG9yIik7CgogIGlmKCFKU19Jc0Z1bmN0aW9uKGN0eCwgKGl0ZXIgPSBKU19HZXRQcm9wZXJ0eShjdHgsIGFyciwgaXRlcmF0b3Jfc3ltYm9sKSkpKQogICAgcmV0dXJuIEpTX0VYQ0VQVElPTjsKICByZXR1cm4gSlNfQ2FsbChjdHgsIGl0ZXIsIGFyciwgMCwgYXJndik7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX3JlY3RfZnJvbShKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHJlY3QsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QqIGFyZ3YpIHsKICBzdGQ6OmFycmF5PGRvdWJsZSwgND4gYXJyYXk7CiAgSlNWYWx1ZSByZXQgPSBKU19FWENFUFRJT047CgogIGlmKEpTX0lzU3RyaW5nKGFyZ3ZbMF0pKSB7CiAgICBjb25zdCBjaGFyKiBzdHIgPSBKU19Ub0NTdHJpbmcoY3R4LCBhcmd2WzBdKTsKICAgIGNoYXIqIGVuZHB0ciA9IG51bGxwdHI7CiAgICBmb3Ioc2l6ZV90IGkgPSAwOyBpIDwgNDsgaSsrKSB7CiAgICAgIHdoaWxlKCFpc2RpZ2l0KCpzdHIpICYmICpzdHIgIT0gJy0nICYmICpzdHIgIT0gJysnICYmICEoKnN0ciA9PSAnLicgJiYgaXNkaWdpdChzdHJbMV0pKSkgc3RyKys7CiAgICAgIGlmKCpzdHIgPT0gJ1wwJykKICAgICAgICBicmVhazsKICAgICAgYXJyYXlbaV0gPSBzdHJ0b2Qoc3RyLCAmZW5kcHRyKTsKICAgICAgc3RyID0gZW5kcHRyOwogICAgfQogIH0gZWxzZSBpZihqc19pc19hcnJheShjdHgsIGFyZ3ZbMF0pKSB7CiAgICBqc19hcnJheV90byhjdHgsIGFyZ3ZbMF0sIGFycmF5KTsKICB9CiAgaWYoYXJyYXlbMl0gPiAwICYmIGFycmF5WzNdID4gMCkKICAgIHJldCA9IGpzX3JlY3RfbmV3KGN0eCwgYXJyYXlbMF0sIGFycmF5WzFdLCBhcnJheVsyXSwgYXJyYXlbM10pOwogIHJldHVybiByZXQ7Cn0KCnZvaWQKanNfcmVjdF9maW5hbGl6ZXIoSlNSdW50aW1lKiBydCwgSlNWYWx1ZSB2YWwpIHsKICBKU1JlY3REYXRhPGRvdWJsZT4qIHMgPSBzdGF0aWNfY2FzdDxKU1JlY3REYXRhPGRvdWJsZT4qPihKU19HZXRPcGFxdWUodmFsLCBqc19yZWN0X2NsYXNzX2lkKSk7CiAgLyogTm90ZTogJ3MnIGNhbiBiZSBOVUxMIGluIGNhc2UgSlNfU2V0T3BhcXVlKCkgd2FzIG5vdCBjYWxsZWQgKi8KCiAgLy8gcy0+fkpTUmVjdERhdGE8ZG91YmxlPigpOwogIGlmKHMpCiAgICBqc19kZWFsbG9jYXRlKHJ0LCBzKTsKfQoKSlNDbGFzc0RlZiBqc19yZWN0X2NsYXNzID0gewogICAgLmNsYXNzX25hbWUgPSAiUmVjdCIsCiAgICAuZmluYWxpemVyID0ganNfcmVjdF9maW5hbGl6ZXIsCn07Cgpjb25zdCBKU0NGdW5jdGlvbkxpc3RFbnRyeSBqc19yZWN0X3Byb3RvX2Z1bmNzW10gPSB7SlNfQ0dFVFNFVF9FTlVNRVJBQkxFX0RFRigieCIsIGpzX3JlY3RfZ2V0LCBqc19yZWN0X3NldCwgUFJPUF9YKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEpTX0NHRVRTRVRfRU5VTUVSQUJMRV9ERUYoInkiLCBqc19yZWN0X2dldCwganNfcmVjdF9zZXQsIFBST1BfWSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBKU19DR0VUU0VUX0VOVU1FUkFCTEVfREVGKCJ3aWR0aCIsIGpzX3JlY3RfZ2V0LCBqc19yZWN0X3NldCwgUFJPUF9XSURUSCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBKU19DR0VUU0VUX0VOVU1FUkFCTEVfREVGKCJoZWlnaHQiLCBqc19yZWN0X2dldCwganNfcmVjdF9zZXQsIFBST1BfSEVJR0hUKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEpTX0NHRVRTRVRfTUFHSUNfREVGKCJ4MiIsIGpzX3JlY3RfZ2V0LCBqc19yZWN0X3NldCwgUFJPUF9YMiksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBKU19DR0VUU0VUX01BR0lDX0RFRigieTIiLCBqc19yZWN0X2dldCwganNfcmVjdF9zZXQsIFBST1BfWTIpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSlNfQ0dFVFNFVF9NQUdJQ19ERUYoInBvaW50IiwganNfcmVjdF9nZXQsIGpzX3JlY3Rfc2V0LCBQUk9QX1BPUyksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBKU19DR0VUU0VUX01BR0lDX0RFRigic2l6ZSIsIGpzX3JlY3RfZ2V0LCBqc19yZWN0X3NldCwgUFJPUF9TSVpFKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEpTX0FMSUFTX0RFRigieDEiLCAieCIpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSlNfQUxJQVNfREVGKCJ5MSIsICJ5IiksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBKU19DRlVOQ19NQUdJQ19ERUYoImNvbnRhaW5zIiwgMCwganNfcmVjdF9tZXRob2QsIE1FVEhPRF9DT05UQUlOUyksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBKU19DRlVOQ19NQUdJQ19ERUYoImVtcHR5IiwgMCwganNfcmVjdF9tZXRob2QsIE1FVEhPRF9FTVBUWSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBKU19DRlVOQ19NQUdJQ19ERUYoImFyZWEiLCAwLCBqc19yZWN0X21ldGhvZCwgTUVUSE9EX0FSRUEpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJiciIsIDAsIGpzX3JlY3RfbWV0aG9kLCBNRVRIT0RfQlIpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJ0bCIsIDAsIGpzX3JlY3RfbWV0aG9kLCBNRVRIT0RfVEwpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJpbnNldCIsIDEsIGpzX3JlY3RfbWV0aG9kLCBNRVRIT0RfSU5TRVQpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJvdXRzZXQiLCAxLCBqc19yZWN0X21ldGhvZCwgTUVUSE9EX09VVFNFVCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBKU19DRlVOQ19NQUdJQ19ERUYoImhzcGxpdCIsIDEsIGpzX3JlY3RfbWV0aG9kLCBNRVRIT0RfSFNQTElUKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEpTX0NGVU5DX01BR0lDX0RFRigidnNwbGl0IiwgMSwganNfcmVjdF9tZXRob2QsIE1FVEhPRF9WU1BMSVQpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSlNfQ0ZVTkNfREVGKCJ0b1N0cmluZyIsIDAsIGpzX3JlY3RfdG9fc3RyaW5nKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEpTX0NGVU5DX0RFRigidG9Tb3VyY2UiLCAwLCBqc19yZWN0X3RvX3NvdXJjZSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBKU19DRlVOQ19NQUdJQ19ERUYoImVxdWFscyIsIDEsIGpzX3JlY3RfZnVuY3MsIEZVTkNfRVFVQUxTKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEpTX0NGVU5DX01BR0lDX0RFRigicm91bmQiLCAwLCBqc19yZWN0X2Z1bmNzLCBGVU5DX1JPVU5EKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEpTX0NGVU5DX01BR0lDX0RFRigidG9PYmplY3QiLCAwLCBqc19yZWN0X2Z1bmNzLCBGVU5DX1RPT0JKRUNUKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEpTX0NGVU5DX01BR0lDX0RFRigidG9BcnJheSIsIDAsIGpzX3JlY3RfZnVuY3MsIEZVTkNfVE9BUlJBWSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBKU19QUk9QX1NUUklOR19ERUYoIltTeW1ib2wudG9TdHJpbmdUYWddIiwgIlJlY3QiLCBKU19QUk9QX0NPTkZJR1VSQUJMRSkKCn07CmNvbnN0IEpTQ0Z1bmN0aW9uTGlzdEVudHJ5IGpzX3JlY3Rfc3RhdGljX2Z1bmNzW10gPSB7SlNfQ0ZVTkNfREVGKCJmcm9tIiwgMSwganNfcmVjdF9mcm9tKX07CgppbnQKanNfcmVjdF9pbml0KEpTQ29udGV4dCogY3R4LCBKU01vZHVsZURlZiogbSkgewoKICBpZihqc19yZWN0X2NsYXNzX2lkID09IDApIHsKICAgIC8qIGNyZWF0ZSB0aGUgUmVjdCBjbGFzcyAqLwogICAgSlNfTmV3Q2xhc3NJRCgmanNfcmVjdF9jbGFzc19pZCk7CiAgICBKU19OZXdDbGFzcyhKU19HZXRSdW50aW1lKGN0eCksIGpzX3JlY3RfY2xhc3NfaWQsICZqc19yZWN0X2NsYXNzKTsKCiAgICByZWN0X3Byb3RvID0gSlNfTmV3T2JqZWN0KGN0eCk7CiAgICBKU19TZXRQcm9wZXJ0eUZ1bmN0aW9uTGlzdChjdHgsIHJlY3RfcHJvdG8sIGpzX3JlY3RfcHJvdG9fZnVuY3MsIGNvdW50b2YoanNfcmVjdF9wcm90b19mdW5jcykpOwogICAgSlNfU2V0Q2xhc3NQcm90byhjdHgsIGpzX3JlY3RfY2xhc3NfaWQsIHJlY3RfcHJvdG8pOwoKICAgIHJlY3RfY2xhc3MgPSBKU19OZXdDRnVuY3Rpb24yKGN0eCwganNfcmVjdF9jdG9yLCAiUmVjdCIsIDAsIEpTX0NGVU5DX2NvbnN0cnVjdG9yLCAwKTsKICAgIC8qIHNldCBwcm90by5jb25zdHJ1Y3RvciBhbmQgY3Rvci5wcm90b3R5cGUgKi8KICAgIEpTX1NldENvbnN0cnVjdG9yKGN0eCwgcmVjdF9jbGFzcywgcmVjdF9wcm90byk7CiAgICBKU19TZXRQcm9wZXJ0eUZ1bmN0aW9uTGlzdChjdHgsIHJlY3RfY2xhc3MsIGpzX3JlY3Rfc3RhdGljX2Z1bmNzLCBjb3VudG9mKGpzX3JlY3Rfc3RhdGljX2Z1bmNzKSk7CgogICAganNfc2V0X2luc3BlY3RfbWV0aG9kKGN0eCwgcmVjdF9wcm90bywganNfcmVjdF9pbnNwZWN0KTsKICB9CgogIGlmKG0pCiAgICBKU19TZXRNb2R1bGVFeHBvcnQoY3R4LCBtLCAiUmVjdCIsIHJlY3RfY2xhc3MpOwoKICByZXR1cm4gMDsKfQoKZXh0ZXJuICJDIiBWSVNJQkxFIHZvaWQKanNfcmVjdF9leHBvcnQoSlNDb250ZXh0KiBjdHgsIEpTTW9kdWxlRGVmKiBtKSB7CiAgSlNfQWRkTW9kdWxlRXhwb3J0KGN0eCwgbSwgIlJlY3QiKTsKfQoKdm9pZApqc19yZWN0X2NvbnN0cnVjdG9yKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlIHBhcmVudCwgY29uc3QgY2hhciogbmFtZSkgewogIGlmKEpTX0lzVW5kZWZpbmVkKHJlY3RfY2xhc3MpKQogICAganNfcmVjdF9pbml0KGN0eCwgMCk7CgogIEpTX1NldFByb3BlcnR5U3RyKGN0eCwgcGFyZW50LCBuYW1lID8gbmFtZSA6ICJSZWN0IiwgcmVjdF9jbGFzcyk7Cn0KCiNpZmRlZiBKU19SRUNUX01PRFVMRQojZGVmaW5lIEpTX0lOSVRfTU9EVUxFIC8qVklTSUJMRSovIGpzX2luaXRfbW9kdWxlCiNlbHNlCiNkZWZpbmUgSlNfSU5JVF9NT0RVTEUgLypWSVNJQkxFKi8ganNfaW5pdF9tb2R1bGVfcmVjdAojZW5kaWYKCmV4dGVybiAiQyIgSlNNb2R1bGVEZWYqCkpTX0lOSVRfTU9EVUxFKEpTQ29udGV4dCogY3R4LCBjb25zdCBjaGFyKiBtb2R1bGVfbmFtZSkgewogIEpTTW9kdWxlRGVmKiBtOwogIG0gPSBKU19OZXdDTW9kdWxlKGN0eCwgbW9kdWxlX25hbWUsICZqc19yZWN0X2luaXQpOwogIGlmKCFtKQogICAgcmV0dXJuIE5VTEw7CiAganNfcmVjdF9leHBvcnQoY3R4LCBtKTsKICByZXR1cm4gbTsKfQAAAAAAAAAAlkgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA5zAAAAAAAADnMAAAAAAAAAAAAAAAAPC/"
				],
				[
					88,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAAATSQAAI2luY2x1ZGUgImpzYmluZGluZ3MuaHBwIgojaW5jbHVkZSAianNfcmVjdC5ocHAiCiNpbmNsdWRlICJqc19zaXplLmhwcCIKI2luY2x1ZGUgImpzX3BvaW50LmhwcCIKI2luY2x1ZGUgImpzX2FsbG9jLmhwcCIKI2luY2x1ZGUgImpzX2FycmF5LmhwcCIKI2luY2x1ZGUgImpzX3R5cGVkX2FycmF5LmhwcCIKI2luY2x1ZGUgInV0aWwuaHBwIgoKZXh0ZXJuICJDIiB7CkpTVmFsdWUgcmVjdF9wcm90byA9IEpTX1VOREVGSU5FRCwgcmVjdF9jbGFzcyA9IEpTX1VOREVGSU5FRDsKSlNDbGFzc0lEIGpzX3JlY3RfY2xhc3NfaWQgPSAwOwp9CgpleHRlcm4gIkMiIFZJU0lCTEUgSlNWYWx1ZQpqc19yZWN0X25ldyhKU0NvbnRleHQqIGN0eCwgZG91YmxlIHgsIGRvdWJsZSB5LCBkb3VibGUgdywgZG91YmxlIGgpIHsKICBKU1ZhbHVlIHJldDsKICBKU1JlY3REYXRhPGRvdWJsZT4qIHM7CgogIGlmKEpTX0lzVW5kZWZpbmVkKHJlY3RfcHJvdG8pKQogICAganNfcmVjdF9pbml0KGN0eCwgTlVMTCk7CgogIHJldCA9IEpTX05ld09iamVjdFByb3RvQ2xhc3MoY3R4LCByZWN0X3Byb3RvLCBqc19yZWN0X2NsYXNzX2lkKTsKCiAgcyA9IGpzX2FsbG9jYXRlPEpTUmVjdERhdGE8ZG91YmxlPj4oY3R4KTsKCiAgbmV3KHMpIEpTUmVjdERhdGE8ZG91YmxlPigpOwogIHMtPnggPSB4IDw9IERCTF9FUFNJTE9OID8gMCA6IHg7CiAgcy0+eSA9IHkgPD0gREJMX0VQU0lMT04gPyAwIDogeTsKICBzLT53aWR0aCA9IHcgPD0gREJMX0VQU0lMT04gPyAwIDogdzsKICBzLT5oZWlnaHQgPSBoIDw9IERCTF9FUFNJTE9OID8gMCA6IGg7CgogIEpTX1NldE9wYXF1ZShyZXQsIHMpOwogIHJldHVybiByZXQ7Cn0KClZJU0lCTEUgSlNWYWx1ZQpqc19yZWN0X3dyYXAoSlNDb250ZXh0KiBjdHgsIGNvbnN0IEpTUmVjdERhdGE8ZG91YmxlPiYgcmVjdCkgewogIHJldHVybiBqc19yZWN0X25ldyhjdHgsIHJlY3QueCwgcmVjdC55LCByZWN0LndpZHRoLCByZWN0LmhlaWdodCk7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX3JlY3RfY3RvcihKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IG5ld190YXJnZXQsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QqIGFyZ3YpIHsKICBkb3VibGUgeCA9IDAsIHkgPSAwLCB3ID0gMCwgaCA9IDA7CiAgSlNSZWN0RGF0YTxkb3VibGU+IHJlY3QgPSB7MCwgMCwgMCwgMH07CiAgaW50IG9wdGluZCA9IDA7CgogIGlmKGFyZ2MgPiAwKSB7CiAgICBpZighanNfcmVjdF9yZWFkKGN0eCwgYXJndlswXSwgJnJlY3QpKSB7CiAgICAgIEpTUG9pbnREYXRhPGRvdWJsZT4gcG9pbnQsIHBvaW50MjsKICAgICAgSlNTaXplRGF0YTxkb3VibGU+IHNpemU7CiAgICAgIHdoaWxlKG9wdGluZCA8IGFyZ2MpIHsKICAgICAgICBpZihKU19Jc051bWJlcihhcmd2W29wdGluZF0pICYmIEpTX0lzTnVtYmVyKGFyZ3Zbb3B0aW5kICsgMV0pKSB7CiAgICAgICAgICBpZihvcHRpbmQgPT0gMCkgewogICAgICAgICAgICBKU19Ub0Zsb2F0NjQoY3R4LCAmeCwgYXJndltvcHRpbmRdKTsKICAgICAgICAgICAgSlNfVG9GbG9hdDY0KGN0eCwgJnksIGFyZ3Zbb3B0aW5kICsgMV0pOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgSlNfVG9GbG9hdDY0KGN0eCwgJncsIGFyZ3Zbb3B0aW5kXSk7CiAgICAgICAgICAgIEpTX1RvRmxvYXQ2NChjdHgsICZoLCBhcmd2W29wdGluZCArIDFdKTsKICAgICAgICAgIH0KICAgICAgICAgIG9wdGluZCArPSAyOwogICAgICAgIH0gZWxzZSBpZihqc19wb2ludF9yZWFkKGN0eCwgYXJndltvcHRpbmRdLCBvcHRpbmQgPT0gMCA/ICZwb2ludCA6ICZwb2ludDIpKSB7CiAgICAgICAgICBpZihvcHRpbmQgPT0gMCkgewogICAgICAgICAgICB4ID0gcG9pbnQueDsKICAgICAgICAgICAgeSA9IHBvaW50Lnk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB3ID0gcG9pbnQyLnggLSB4OwogICAgICAgICAgICBoID0gcG9pbnQyLnkgLSB5OwogICAgICAgICAgfQogICAgICAgICAgb3B0aW5kKys7CiAgICAgICAgfQoKICAgICAgICBlbHNlIGlmKGpzX3NpemVfcmVhZChjdHgsIGFyZ3Zbb3B0aW5kXSwgJnNpemUpKSB7CiAgICAgICAgICB3ID0gc2l6ZS53aWR0aDsKICAgICAgICAgIGggPSBzaXplLmhlaWdodDsKICAgICAgICAgIG9wdGluZCsrOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBvcHRpbmQrKzsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICB9CgogIHJldHVybiBqc19yZWN0X25ldyhjdHgsIHgsIHksIHcsIGgpOwp9CgpWSVNJQkxFIEpTUmVjdERhdGE8ZG91YmxlPioKanNfcmVjdF9kYXRhKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdmFsKSB7CiAgcmV0dXJuIHN0YXRpY19jYXN0PEpTUmVjdERhdGE8ZG91YmxlPio+KEpTX0dldE9wYXF1ZTIoY3R4LCB2YWwsIGpzX3JlY3RfY2xhc3NfaWQpKTsKfQoKZW51bSB7IFBST1BfWCA9IDAsIFBST1BfWSwgUFJPUF9XSURUSCwgUFJPUF9IRUlHSFQsIFBST1BfWDIsIFBST1BfWTIsIFBST1BfUE9TLCBQUk9QX1NJWkUgfTsKCnN0YXRpYyBKU1ZhbHVlCmpzX3JlY3RfZ2V0KEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBtYWdpYykgewogIEpTVmFsdWUgcmV0ID0gSlNfVU5ERUZJTkVEOwogIEpTUmVjdERhdGE8ZG91YmxlPiogczsKCiAgaWYoKHMgPSBzdGF0aWNfY2FzdDxKU1JlY3REYXRhPGRvdWJsZT4qPihKU19HZXRPcGFxdWUyKGN0eCwgdGhpc192YWwsIGpzX3JlY3RfY2xhc3NfaWQpKSkgPT0gbnVsbHB0cikKICAgIHJldHVybiBKU19FWENFUFRJT047CgogIHN3aXRjaChtYWdpYykgewogICAgY2FzZSBQUk9QX1g6IHsKICAgICAgcmV0ID0gSlNfTmV3RmxvYXQ2NChjdHgsIHMtPngpOwogICAgICBicmVhazsKICAgIH0KICAgIGNhc2UgUFJPUF9ZOiB7CiAgICAgIHJldCA9IEpTX05ld0Zsb2F0NjQoY3R4LCBzLT55KTsKICAgICAgYnJlYWs7CiAgICB9CiAgICBjYXNlIFBST1BfV0lEVEg6IHsKICAgICAgcmV0ID0gSlNfTmV3RmxvYXQ2NChjdHgsIHMtPndpZHRoKTsKICAgICAgYnJlYWs7CiAgICB9CiAgICBjYXNlIFBST1BfSEVJR0hUOiB7CiAgICAgIHJldCA9IEpTX05ld0Zsb2F0NjQoY3R4LCBzLT5oZWlnaHQpOwogICAgICBicmVhazsKICAgIH0KICAgIGNhc2UgUFJPUF9YMjogewogICAgICByZXQgPSBKU19OZXdGbG9hdDY0KGN0eCwgcy0+eCArIHMtPndpZHRoKTsKICAgICAgYnJlYWs7CiAgICB9CiAgICBjYXNlIFBST1BfWTI6IHsKICAgICAgcmV0ID0gSlNfTmV3RmxvYXQ2NChjdHgsIHMtPnkgKyBzLT5oZWlnaHQpOwogICAgICBicmVhazsKICAgIH0KICAgIGNhc2UgUFJPUF9QT1M6IHsKICAgICAgcmV0ID0ganNfcG9pbnRfbmV3KGN0eCwgcy0+eCwgcy0+eSk7CiAgICAgIGJyZWFrOwogICAgfQogICAgY2FzZSBQUk9QX1NJWkU6IHsKICAgICAgcmV0ID0ganNfc2l6ZV9uZXcoY3R4LCBzLT53aWR0aCwgcy0+aGVpZ2h0KTsKICAgICAgYnJlYWs7CiAgICB9CiAgfQogIHJldHVybiByZXQ7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX3JlY3Rfc2V0KEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIEpTVmFsdWVDb25zdCB2YWwsIGludCBtYWdpYykgewogIEpTUmVjdERhdGE8ZG91YmxlPiogczsKICBkb3VibGUgdjsKICBpZigocyA9IHN0YXRpY19jYXN0PEpTUmVjdERhdGE8ZG91YmxlPio+KEpTX0dldE9wYXF1ZTIoY3R4LCB0aGlzX3ZhbCwganNfcmVjdF9jbGFzc19pZCkpKSA9PSBudWxscHRyKQogICAgcmV0dXJuIEpTX0VYQ0VQVElPTjsKCiAgaWYoSlNfVG9GbG9hdDY0KGN0eCwgJnYsIHZhbCkpCiAgICByZXR1cm4gSlNfRVhDRVBUSU9OOwoKICBzd2l0Y2gobWFnaWMpIHsKICAgIGNhc2UgUFJPUF9YOiB7CiAgICAgIHMtPnggPSB2OwogICAgICBicmVhazsKICAgIH0KICAgIGNhc2UgUFJPUF9ZOiB7CiAgICAgIHMtPnkgPSB2OwogICAgICBicmVhazsKICAgIH0KICAgIGNhc2UgUFJPUF9XSURUSDogewogICAgICBzLT53aWR0aCA9IHY7CiAgICAgIGJyZWFrOwogICAgfQogICAgY2FzZSBQUk9QX0hFSUdIVDogewogICAgICBzLT5oZWlnaHQgPSB2OwogICAgICBicmVhazsKICAgIH0KICAgIGNhc2UgUFJPUF9YMjogewogICAgICBzLT53aWR0aCA9IHYgLSBzLT54OwogICAgICBicmVhazsKICAgIH0KICAgIGNhc2UgUFJPUF9ZMjogewogICAgICBzLT5oZWlnaHQgPSB2IC0gcy0+eTsKICAgICAgYnJlYWs7CiAgICB9CiAgICBjYXNlIFBST1BfUE9TOiB7CiAgICAgIEpTUG9pbnREYXRhPGRvdWJsZT4gcG9pbnQ7CiAgICAgIGpzX3BvaW50X3JlYWQoY3R4LCB2YWwsICZwb2ludCk7CiAgICAgIHMtPnggPSBwb2ludC54OwogICAgICBzLT55ID0gcG9pbnQueTsKICAgICAgYnJlYWs7CiAgICB9CiAgICBjYXNlIFBST1BfU0laRTogewogICAgICBKU1NpemVEYXRhPGRvdWJsZT4gc2l6ZTsKICAgICAganNfc2l6ZV9yZWFkKGN0eCwgdmFsLCAmc2l6ZSk7CiAgICAgIHMtPndpZHRoID0gc2l6ZS53aWR0aDsKICAgICAgcy0+aGVpZ2h0ID0gc2l6ZS5oZWlnaHQ7CiAgICAgIGJyZWFrOwogICAgfQogIH0KCiAgcmV0dXJuIEpTX1VOREVGSU5FRDsKfQoKc3RhdGljIEpTVmFsdWUKanNfcmVjdF90b19zdHJpbmcoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCogYXJndikgewogIEpTUmVjdERhdGE8ZG91YmxlPiByZWN0LCAqczsKICBzdGQ6Om9zdHJpbmdzdHJlYW0gb3M7CiAgc3RkOjphcnJheTxjb25zdCBjaGFyKiwgMz4gZGVsaW1zID0gewogICAgICAiLCIsCiAgICAgICLiiKMiIC8q772c4qe44qaB4o6u4oil4oij4ri+4ryB4p2Y4p2Z4p+K4o2/4o644o+Q772c4pSC77+o77iy77ix4p2YfO+9nCovLAogICAgICAiw5ciIC8qIvCdhYPwn4Wn8J2aofCfhafwn4WH8J2YufCdmqHwnZi58J2Qseqtl/CdkJfwnZG/8J2Fg/CdhYN4y6PigpPikrPik43ik6finJXinJjinJfiqIniqK/iqILinJbiqLvipoHii4XiipfiiqDiiJfDl+Kor8OXIiovfTsKCiAgZm9yKHNpemVfdCBpID0gMDsgaSA8IGFyZ2M7IGkrKykgeyBkZWxpbXNbaV0gPSBKU19Ub0NTdHJpbmcoY3R4LCBhcmd2W2ldKTsgfQoKICBpZigocyA9IHN0YXRpY19jYXN0PEpTUmVjdERhdGE8ZG91YmxlPio+KEpTX0dldE9wYXF1ZTIoY3R4LCB0aGlzX3ZhbCwganNfcmVjdF9jbGFzc19pZCkpKSAhPSBudWxscHRyKSB7CiAgICByZWN0ID0gKnM7CiAgfSBlbHNlIHsKICAgIGpzX3JlY3RfcmVhZChjdHgsIHRoaXNfdmFsLCAmcmVjdCk7CiAgfQoKICBvcyA8PCByZWN0LnggPDwgZGVsaW1zWzBdIDw8IHJlY3QueSA8PCBkZWxpbXNbMV0gPDwgcmVjdC53aWR0aCA8PCBkZWxpbXNbMl0gPDwgcmVjdC5oZWlnaHQ7CgogIHJldHVybiBKU19OZXdTdHJpbmcoY3R4LCBvcy5zdHIoKS5jX3N0cigpKTsKfQpzdGF0aWMgSlNWYWx1ZQpqc19yZWN0X3RvX3NvdXJjZShKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2KSB7CiAgSlNSZWN0RGF0YTxkb3VibGU+IHJlY3QsICpzOwogIHN0ZDo6b3N0cmluZ3N0cmVhbSBvczsKCiAgaWYoKHMgPSBzdGF0aWNfY2FzdDxKU1JlY3REYXRhPGRvdWJsZT4qPihKU19HZXRPcGFxdWUyKGN0eCwgdGhpc192YWwsIGpzX3JlY3RfY2xhc3NfaWQpKSkgIT0gbnVsbHB0cikgewogICAgcmVjdCA9ICpzOwogIH0gZWxzZSB7CiAgICBqc19yZWN0X3JlYWQoY3R4LCB0aGlzX3ZhbCwgJnJlY3QpOwogIH0KCiAgb3MgPDwgInt4OiIgPDwgcmVjdC54IDw8ICIseToiIDw8IHJlY3QueSA8PCAiLHdpZHRoOiIgPDwgcmVjdC53aWR0aCA8PCAiLGhlaWdodDoiIDw8IHJlY3QuaGVpZ2h0IDw8ICJ9IjsKCiAgcmV0dXJuIEpTX05ld1N0cmluZyhjdHgsIG9zLnN0cigpLmNfc3RyKCkpOwp9CgplbnVtIHsgRlVOQ19FUVVBTFMgPSAwLCBGVU5DX1JPVU5ELCBGVU5DX1RPT0JKRUNULCBGVU5DX1RPQVJSQVkgfTsKCnN0YXRpYyBKU1ZhbHVlCmpzX3JlY3RfZnVuY3MoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCogYXJndiwgaW50IG1hZ2ljKSB7CiAgSlNSZWN0RGF0YTxkb3VibGU+IHJlY3QsIG90aGVyLCAqcywgKmE7CiAgSlNWYWx1ZSByZXQgPSBKU19FWENFUFRJT047CgogIGlmKChzID0ganNfcmVjdF9kYXRhKGN0eCwgdGhpc192YWwpKSA9PSBudWxscHRyKQogICAgcmV0dXJuIHJldDsKCiAgcmVjdCA9ICpzOwoKICBzd2l0Y2gobWFnaWMpIHsKICAgIGNhc2UgRlVOQ19FUVVBTFM6IHsKICAgICAganNfcmVjdF9yZWFkKGN0eCwgYXJndlswXSwgJm90aGVyKTsKICAgICAgYm9vbCBlcXVhbHMgPSByZWN0LnggPT0gb3RoZXIueCAmJiByZWN0LnkgPT0gb3RoZXIueSAmJiByZWN0LndpZHRoID09IG90aGVyLndpZHRoICYmIHJlY3QuaGVpZ2h0ID09IG90aGVyLmhlaWdodDsKICAgICAgcmV0ID0gSlNfTmV3Qm9vbChjdHgsIGVxdWFscyk7CiAgICAgIGJyZWFrOwogICAgfQogICAgY2FzZSBGVU5DX1JPVU5EOiB7CiAgICAgIGRvdWJsZSB4LCB5LCB3aWR0aCwgaGVpZ2h0LCBmOwogICAgICBpbnQzMl90IHByZWNpc2lvbiA9IDA7CiAgICAgIGlmKGFyZ2MgPiAwKQogICAgICAgIEpTX1RvSW50MzIoY3R4LCAmcHJlY2lzaW9uLCBhcmd2WzBdKTsKICAgICAgZiA9IHN0ZDo6cG93KDEwLCBwcmVjaXNpb24pOwogICAgICB4ID0gc3RkOjpyb3VuZChyZWN0LnggKiBmKSAvIGY7CiAgICAgIHkgPSBzdGQ6OnJvdW5kKHJlY3QueSAqIGYpIC8gZjsKICAgICAgd2lkdGggPSBzdGQ6OnJvdW5kKHJlY3Qud2lkdGggKiBmKSAvIGY7CiAgICAgIGhlaWdodCA9IHN0ZDo6cm91bmQocmVjdC5oZWlnaHQgKiBmKSAvIGY7CiAgICAgIHJldCA9IGpzX3JlY3RfbmV3KGN0eCwgeCwgeSwgd2lkdGgsIGhlaWdodCk7CiAgICAgIGJyZWFrOwogICAgfQogICAgY2FzZSBGVU5DX1RPT0JKRUNUOiB7CiAgICAgIHJldCA9IEpTX05ld09iamVjdChjdHgpOwoKICAgICAgSlNfU2V0UHJvcGVydHlTdHIoY3R4LCByZXQsICJ4IiwgSlNfTmV3RmxvYXQ2NChjdHgsIHJlY3QueCkpOwogICAgICBKU19TZXRQcm9wZXJ0eVN0cihjdHgsIHJldCwgInkiLCBKU19OZXdGbG9hdDY0KGN0eCwgcmVjdC55KSk7CiAgICAgIEpTX1NldFByb3BlcnR5U3RyKGN0eCwgcmV0LCAid2lkdGgiLCBKU19OZXdGbG9hdDY0KGN0eCwgcmVjdC53aWR0aCkpOwogICAgICBKU19TZXRQcm9wZXJ0eVN0cihjdHgsIHJldCwgImhlaWdodCIsIEpTX05ld0Zsb2F0NjQoY3R4LCByZWN0LmhlaWdodCkpOwogICAgICBicmVhazsKICAgIH0KICAgIGNhc2UgRlVOQ19UT0FSUkFZOiB7CiAgICAgIHN0ZDo6YXJyYXk8ZG91YmxlLCA0PiBhcnJheXtyZWN0LngsIHJlY3QueSwgcmVjdC53aWR0aCwgcmVjdC5oZWlnaHR9OwoKICAgICAgcmV0ID0ganNfYXJyYXlfZnJvbShjdHgsIGFycmF5LmNiZWdpbigpLCBhcnJheS5jZW5kKCkpOwogICAgICBicmVhazsKICAgIH0KICB9CgogIHJldHVybiByZXQ7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX3JlY3RfaW5zcGVjdChKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2KSB7CiAgSlNSZWN0RGF0YTxkb3VibGU+KiByID0ganNfcmVjdF9kYXRhKGN0eCwgdGhpc192YWwpOwogIEpTVmFsdWUgb2JqID0gSlNfTmV3T2JqZWN0UHJvdG8oY3R4LCByZWN0X3Byb3RvKTsKCiAgSlNfRGVmaW5lUHJvcGVydHlWYWx1ZVN0cihjdHgsIG9iaiwgIngiLCBKU19OZXdGbG9hdDY0KGN0eCwgci0+eCksIEpTX1BST1BfRU5VTUVSQUJMRSk7CiAgSlNfRGVmaW5lUHJvcGVydHlWYWx1ZVN0cihjdHgsIG9iaiwgInkiLCBKU19OZXdGbG9hdDY0KGN0eCwgci0+eSksIEpTX1BST1BfRU5VTUVSQUJMRSk7CiAgSlNfRGVmaW5lUHJvcGVydHlWYWx1ZVN0cihjdHgsIG9iaiwgIndpZHRoIiwgSlNfTmV3RmxvYXQ2NChjdHgsIHItPndpZHRoKSwgSlNfUFJPUF9FTlVNRVJBQkxFKTsKICBKU19EZWZpbmVQcm9wZXJ0eVZhbHVlU3RyKGN0eCwgb2JqLCAiaGVpZ2h0IiwgSlNfTmV3RmxvYXQ2NChjdHgsIHItPmhlaWdodCksIEpTX1BST1BfRU5VTUVSQUJMRSk7CiAgcmV0dXJuIG9iajsKfQoKZW51bSB7CiAgTUVUSE9EX0NPTlRBSU5TID0gMCwKICBNRVRIT0RfRU1QVFksCiAgTUVUSE9EX0FSRUEsCiAgTUVUSE9EX0JSLAogIE1FVEhPRF9UTCwKICBNRVRIT0RfU0laRSwKICBNRVRIT0RfSU5TRVQsCiAgTUVUSE9EX09VVFNFVCwKICBNRVRIT0RfSFNQTElULAogIE1FVEhPRF9WU1BMSVQKfTsKCnN0YXRpYyBKU1ZhbHVlCmpzX3JlY3RfbWV0aG9kKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgcmVjdCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCogYXJndiwgaW50IG1hZ2ljKSB7CiAgSlNSZWN0RGF0YTxkb3VibGU+KiBzID0gc3RhdGljX2Nhc3Q8SlNSZWN0RGF0YTxkb3VibGU+Kj4oSlNfR2V0T3BhcXVlMihjdHgsIHJlY3QsIGpzX3JlY3RfY2xhc3NfaWQpKTsKICBKU1ZhbHVlIHJldCA9IEpTX1VOREVGSU5FRDsKICBKU1BvaW50RGF0YTxkb3VibGU+IHBvaW50ID0ganNfcG9pbnRfZ2V0KGN0eCwgYXJndlswXSk7CgogIHN3aXRjaChtYWdpYykgewogICAgY2FzZSBNRVRIT0RfQ09OVEFJTlM6IHsKICAgICAgcmV0ID0gSlNfTmV3Qm9vbChjdHgsIHMtPmNvbnRhaW5zKHBvaW50KSk7CiAgICAgIGJyZWFrOwogICAgfQogICAgY2FzZSBNRVRIT0RfRU1QVFk6IHsKICAgICAgcmV0ID0gSlNfTmV3Qm9vbChjdHgsIHMtPmVtcHR5KCkpOwogICAgICBicmVhazsKICAgIH0KICAgIGNhc2UgTUVUSE9EX0FSRUE6IHsKICAgICAgcmV0ID0gSlNfTmV3RmxvYXQ2NChjdHgsIHMtPmFyZWEoKSk7CiAgICAgIGJyZWFrOwogICAgfQogICAgY2FzZSBNRVRIT0RfQlI6CiAgICBjYXNlIE1FVEhPRF9UTDogewogICAgICBKU1BvaW50RGF0YTxkb3VibGU+IHB0ID0gbWFnaWMgPT0gMyA/IHMtPmJyKCkgOiBzLT50bCgpOwoKICAgICAgcmV0ID0ganNfcG9pbnRfbmV3KGN0eCwgcHQueCwgcHQueSk7CiAgICAgIGJyZWFrOwogICAgfQogICAgY2FzZSBNRVRIT0RfU0laRTogewogICAgICBjdjo6U2l6ZTJkIHN6ID0gcy0+c2l6ZSgpOwogICAgICByZXQgPSBqc19zaXplX25ldyhjdHgsIHN6LndpZHRoLCBzei5oZWlnaHQpOwogICAgICBicmVhazsKICAgIH0KICAgIGNhc2UgTUVUSE9EX0lOU0VUOiB7CiAgICAgIEpTUmVjdERhdGE8ZG91YmxlPiByZWN0ID0gKnM7CiAgICAgIGlmKGFyZ2MgPj0gMSkgewogICAgICAgIGRvdWJsZSBuOwogICAgICAgIEpTX1RvRmxvYXQ2NChjdHgsICZuLCBhcmd2WzBdKTsKICAgICAgICByZWN0LnggKz0gbjsKICAgICAgICByZWN0LndpZHRoIC09IG4gKiAyOwogICAgICAgIHJlY3QueSArPSBuOwogICAgICAgIHJlY3QuaGVpZ2h0IC09IG4gKiAyOwoKICAgICAgfSBlbHNlIGlmKGFyZ2MgPj0gMikgewogICAgICAgIGRvdWJsZSBoLCB2OwogICAgICAgIEpTX1RvRmxvYXQ2NChjdHgsICZoLCBhcmd2WzBdKTsKICAgICAgICBKU19Ub0Zsb2F0NjQoY3R4LCAmdiwgYXJndlsxXSk7CiAgICAgICAgcmVjdC54ICs9IGg7CiAgICAgICAgcmVjdC53aWR0aCAtPSBoICogMjsKICAgICAgICByZWN0LnkgKz0gdjsKICAgICAgICByZWN0LmhlaWdodCAtPSB2ICogMjsKCiAgICAgIH0gZWxzZSBpZihhcmdjID49IDQpIHsKICAgICAgICBkb3VibGUgdCwgciwgYiwgbDsKICAgICAgICBKU19Ub0Zsb2F0NjQoY3R4LCAmdCwgYXJndlswXSk7CiAgICAgICAgSlNfVG9GbG9hdDY0KGN0eCwgJnIsIGFyZ3ZbMV0pOwogICAgICAgIEpTX1RvRmxvYXQ2NChjdHgsICZiLCBhcmd2WzJdKTsKICAgICAgICBKU19Ub0Zsb2F0NjQoY3R4LCAmbCwgYXJndlszXSk7CiAgICAgICAgcmVjdC54ICs9IGw7CiAgICAgICAgcmVjdC53aWR0aCAtPSBsICsgcjsKICAgICAgICByZWN0LnkgKz0gdDsKICAgICAgICByZWN0LmhlaWdodCAtPSB0ICsgYjsKICAgICAgfQogICAgICByZXQgPSBqc19yZWN0X3dyYXAoY3R4LCByZWN0KTsKICAgICAgYnJlYWs7CiAgICB9CgogICAgY2FzZSBNRVRIT0RfT1VUU0VUOiB7CiAgICAgIEpTUmVjdERhdGE8ZG91YmxlPiByZWN0ID0gKnM7CiAgICAgIGlmKGFyZ2MgPj0gMSkgewogICAgICAgIGRvdWJsZSBuOwogICAgICAgIEpTX1RvRmxvYXQ2NChjdHgsICZuLCBhcmd2WzBdKTsKICAgICAgICByZWN0LnggLT0gbjsKICAgICAgICByZWN0LndpZHRoICs9IG4gKiAyOwogICAgICAgIHJlY3QueSAtPSBuOwogICAgICAgIHJlY3QuaGVpZ2h0ICs9IG4gKiAyOwoKICAgICAgfSBlbHNlIGlmKGFyZ2MgPj0gMikgewogICAgICAgIGRvdWJsZSBoLCB2OwogICAgICAgIEpTX1RvRmxvYXQ2NChjdHgsICZoLCBhcmd2WzBdKTsKICAgICAgICBKU19Ub0Zsb2F0NjQoY3R4LCAmdiwgYXJndlsxXSk7CiAgICAgICAgcmVjdC54IC09IGg7CiAgICAgICAgcmVjdC53aWR0aCArPSBoICogMjsKICAgICAgICByZWN0LnkgLT0gdjsKICAgICAgICByZWN0LmhlaWdodCArPSB2ICogMjsKCiAgICAgIH0gZWxzZSBpZihhcmdjID49IDQpIHsKICAgICAgICBkb3VibGUgdCwgciwgYiwgbDsKICAgICAgICBKU19Ub0Zsb2F0NjQoY3R4LCAmdCwgYXJndlswXSk7CiAgICAgICAgSlNfVG9GbG9hdDY0KGN0eCwgJnIsIGFyZ3ZbMV0pOwogICAgICAgIEpTX1RvRmxvYXQ2NChjdHgsICZiLCBhcmd2WzJdKTsKICAgICAgICBKU19Ub0Zsb2F0NjQoY3R4LCAmbCwgYXJndlszXSk7CiAgICAgICAgcmVjdC54IC09IGw7CiAgICAgICAgcmVjdC53aWR0aCArPSBsICsgcjsKICAgICAgICByZWN0LnkgLT0gdDsKICAgICAgICByZWN0LmhlaWdodCArPSB0ICsgYjsKICAgICAgfQogICAgICByZXQgPSBqc19yZWN0X3dyYXAoY3R4LCByZWN0KTsKICAgICAgYnJlYWs7CiAgICB9CiAgICBjYXNlIE1FVEhPRF9IU1BMSVQ6IHsKICAgICAgc3RkOjp2ZWN0b3I8SlNSZWN0RGF0YTxkb3VibGU+PiByZWN0czsKICAgICAgZG91YmxlIHgxID0gcy0+eCwgeDIgPSBzLT54ICsgcy0+d2lkdGg7CiAgICAgIGF1dG8gYXJncyA9IGFyZ3VtZW50X3JhbmdlKGFyZ2MsIGFyZ3YpOwogICAgICBKU1JlY3REYXRhPGRvdWJsZT4qIHByZXY7CiAgICAgIHN0ZDo6dmVjdG9yPGRvdWJsZT4gYnJlYWtwb2ludHM7CiAgICAgIGZvcihKU1ZhbHVlQ29uc3QgY29uc3QmIGFyZyA6IGFyZ3MpIHsKICAgICAgICBkb3VibGUgZDsKICAgICAgICBqc192YWx1ZV90byhjdHgsIGFyZywgZCk7CiAgICAgICAgaWYoZCA8IDApCiAgICAgICAgICBkID0gcy0+d2lkdGggKyBkOwogICAgICAgIGlmKGQgPiAwICYmIGQgPCBzLT53aWR0aCkKICAgICAgICAgIGJyZWFrcG9pbnRzLnB1c2hfYmFjayhkKTsKICAgICAgfQogICAgICBzdGQ6OnNvcnQoYnJlYWtwb2ludHMuYmVnaW4oKSwgYnJlYWtwb2ludHMuZW5kKCkpOwogICAgICByZWN0cy5wdXNoX2JhY2soKnMpOwogICAgICBwcmV2ID0gJnJlY3RzLmJhY2soKTsKICAgICAgZm9yKGRvdWJsZSBoIDogYnJlYWtwb2ludHMpIHsKICAgICAgICAvLyBwcmludGYoImhzcGxpdCBoPSVsZlxuIiwgaCk7CiAgICAgICAgcHJldi0+d2lkdGggPSBoIC0gKHByZXYtPnggLSB4MSk7CiAgICAgICAgcmVjdHMucHVzaF9iYWNrKCpzKTsKICAgICAgICByZWN0cy5iYWNrKCkueCA9IHgxICsgaDsKICAgICAgICBwcmV2ID0gJnJlY3RzLmJhY2soKTsKICAgICAgICBwcmV2LT53aWR0aCA9IHMtPndpZHRoIC0gaDsKICAgICAgfQogICAgICByZXQgPSBqc19hcnJheV9mcm9tKGN0eCwgcmVjdHMpOwogICAgICBicmVhazsKICAgIH0KICAgIGNhc2UgTUVUSE9EX1ZTUExJVDogewogICAgICBzdGQ6OnZlY3RvcjxKU1JlY3REYXRhPGRvdWJsZT4+IHJlY3RzOwogICAgICBkb3VibGUgeTEgPSBzLT55LCB5MiA9IHMtPnkgKyBzLT5oZWlnaHQ7CiAgICAgIGF1dG8gYXJncyA9IGFyZ3VtZW50X3JhbmdlKGFyZ2MsIGFyZ3YpOwogICAgICBKU1JlY3REYXRhPGRvdWJsZT4qIHByZXY7CiAgICAgIHN0ZDo6dmVjdG9yPGRvdWJsZT4gYnJlYWtwb2ludHM7CiAgICAgIGZvcihKU1ZhbHVlQ29uc3QgY29uc3QmIGFyZyA6IGFyZ3MpIHsKICAgICAgICBkb3VibGUgZDsKICAgICAgICBqc192YWx1ZV90byhjdHgsIGFyZywgZCk7CiAgICAgICAgaWYoZCA8IDApCiAgICAgICAgICBkID0gcy0+aGVpZ2h0ICsgZDsKICAgICAgICBpZihkID4gMCAmJiBkIDwgcy0+aGVpZ2h0KQogICAgICAgICAgYnJlYWtwb2ludHMucHVzaF9iYWNrKGQpOwogICAgICB9CiAgICAgIHN0ZDo6c29ydChicmVha3BvaW50cy5iZWdpbigpLCBicmVha3BvaW50cy5lbmQoKSk7CiAgICAgIHJlY3RzLnB1c2hfYmFjaygqcyk7CiAgICAgIHByZXYgPSAmcmVjdHMuYmFjaygpOwogICAgICBmb3IoZG91YmxlIHYgOiBicmVha3BvaW50cykgewogICAgICAgIC8vIHByaW50ZigiaHNwbGl0IHY9JWxmXG4iLCB2KTsKICAgICAgICBwcmV2LT5oZWlnaHQgPSB2IC0gKHByZXYtPnkgLSB5MSk7CiAgICAgICAgcmVjdHMucHVzaF9iYWNrKCpzKTsKICAgICAgICByZWN0cy5iYWNrKCkueSA9IHkxICsgdjsKICAgICAgICBwcmV2ID0gJnJlY3RzLmJhY2soKTsKICAgICAgICBwcmV2LT5oZWlnaHQgPSBzLT5oZWlnaHQgLSB2OwogICAgICB9CiAgICAgIHJldCA9IGpzX2FycmF5X2Zyb20oY3R4LCByZWN0cyk7CiAgICAgIGJyZWFrOwogICAgfQogIH0KCiAgcmV0dXJuIHJldDsKfQoKc3RhdGljIEpTQXRvbSBpdGVyYXRvcl9zeW1ib2w7CgpzdGF0aWMgSlNWYWx1ZQpqc19yZWN0X3N5bWJvbF9pdGVyYXRvcihKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2KSB7CiAgSlNWYWx1ZSBhcnIsIGl0ZXI7CiAgYXJyID0ganNfcmVjdF9mdW5jcyhjdHgsIHRoaXNfdmFsLCBhcmdjLCBhcmd2LCAzKTsKCiAgaWYoaXRlcmF0b3Jfc3ltYm9sID09IDApCiAgICBpdGVyYXRvcl9zeW1ib2wgPSBqc19zeW1ib2xfYXRvbShjdHgsICJpdGVyYXRvciIpOwoKICBpZighSlNfSXNGdW5jdGlvbihjdHgsIChpdGVyID0gSlNfR2V0UHJvcGVydHkoY3R4LCBhcnIsIGl0ZXJhdG9yX3N5bWJvbCkpKSkKICAgIHJldHVybiBKU19FWENFUFRJT047CiAgcmV0dXJuIEpTX0NhbGwoY3R4LCBpdGVyLCBhcnIsIDAsIGFyZ3YpOwp9CgpzdGF0aWMgSlNWYWx1ZQpqc19yZWN0X2Zyb20oSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCByZWN0LCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2KSB7CiAgc3RkOjphcnJheTxkb3VibGUsIDQ+IGFycmF5OwogIEpTVmFsdWUgcmV0ID0gSlNfRVhDRVBUSU9OOwoKICBpZihKU19Jc1N0cmluZyhhcmd2WzBdKSkgewogICAgY29uc3QgY2hhciogc3RyID0gSlNfVG9DU3RyaW5nKGN0eCwgYXJndlswXSk7CiAgICBjaGFyKiBlbmRwdHIgPSBudWxscHRyOwogICAgZm9yKHNpemVfdCBpID0gMDsgaSA8IDQ7IGkrKykgewogICAgICB3aGlsZSghaXNkaWdpdCgqc3RyKSAmJiAqc3RyICE9ICctJyAmJiAqc3RyICE9ICcrJyAmJiAhKCpzdHIgPT0gJy4nICYmIGlzZGlnaXQoc3RyWzFdKSkpIHN0cisrOwogICAgICBpZigqc3RyID09ICdcMCcpCiAgICAgICAgYnJlYWs7CiAgICAgIGFycmF5W2ldID0gc3RydG9kKHN0ciwgJmVuZHB0cik7CiAgICAgIHN0ciA9IGVuZHB0cjsKICAgIH0KICB9IGVsc2UgaWYoanNfaXNfYXJyYXkoY3R4LCBhcmd2WzBdKSkgewogICAganNfYXJyYXlfdG8oY3R4LCBhcmd2WzBdLCBhcnJheSk7CiAgfQogIGlmKGFycmF5WzJdID4gMCAmJiBhcnJheVszXSA+IDApCiAgICByZXQgPSBqc19yZWN0X25ldyhjdHgsIGFycmF5WzBdLCBhcnJheVsxXSwgYXJyYXlbMl0sIGFycmF5WzNdKTsKICByZXR1cm4gcmV0Owp9Cgp2b2lkCmpzX3JlY3RfZmluYWxpemVyKEpTUnVudGltZSogcnQsIEpTVmFsdWUgdmFsKSB7CiAgSlNSZWN0RGF0YTxkb3VibGU+KiBzID0gc3RhdGljX2Nhc3Q8SlNSZWN0RGF0YTxkb3VibGU+Kj4oSlNfR2V0T3BhcXVlKHZhbCwganNfcmVjdF9jbGFzc19pZCkpOwogIC8qIE5vdGU6ICdzJyBjYW4gYmUgTlVMTCBpbiBjYXNlIEpTX1NldE9wYXF1ZSgpIHdhcyBub3QgY2FsbGVkICovCgogIC8vIHMtPn5KU1JlY3REYXRhPGRvdWJsZT4oKTsKICBpZihzKQogICAganNfZGVhbGxvY2F0ZShydCwgcyk7Cn0KCkpTQ2xhc3NEZWYganNfcmVjdF9jbGFzcyA9IHsKICAgIC5jbGFzc19uYW1lID0gIlJlY3QiLAogICAgLmZpbmFsaXplciA9IGpzX3JlY3RfZmluYWxpemVyLAp9OwoKY29uc3QgSlNDRnVuY3Rpb25MaXN0RW50cnkganNfcmVjdF9wcm90b19mdW5jc1tdID0ge0pTX0NHRVRTRVRfRU5VTUVSQUJMRV9ERUYoIngiLCBqc19yZWN0X2dldCwganNfcmVjdF9zZXQsIFBST1BfWCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBKU19DR0VUU0VUX0VOVU1FUkFCTEVfREVGKCJ5IiwganNfcmVjdF9nZXQsIGpzX3JlY3Rfc2V0LCBQUk9QX1kpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSlNfQ0dFVFNFVF9FTlVNRVJBQkxFX0RFRigid2lkdGgiLCBqc19yZWN0X2dldCwganNfcmVjdF9zZXQsIFBST1BfV0lEVEgpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSlNfQ0dFVFNFVF9FTlVNRVJBQkxFX0RFRigiaGVpZ2h0IiwganNfcmVjdF9nZXQsIGpzX3JlY3Rfc2V0LCBQUk9QX0hFSUdIVCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBKU19DR0VUU0VUX01BR0lDX0RFRigieDIiLCBqc19yZWN0X2dldCwganNfcmVjdF9zZXQsIFBST1BfWDIpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSlNfQ0dFVFNFVF9NQUdJQ19ERUYoInkyIiwganNfcmVjdF9nZXQsIGpzX3JlY3Rfc2V0LCBQUk9QX1kyKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEpTX0NHRVRTRVRfTUFHSUNfREVGKCJwb2ludCIsIGpzX3JlY3RfZ2V0LCBqc19yZWN0X3NldCwgUFJPUF9QT1MpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSlNfQ0dFVFNFVF9NQUdJQ19ERUYoInNpemUiLCBqc19yZWN0X2dldCwganNfcmVjdF9zZXQsIFBST1BfU0laRSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBKU19BTElBU19ERUYoIngxIiwgIngiKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEpTX0FMSUFTX0RFRigieTEiLCAieSIpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJjb250YWlucyIsIDAsIGpzX3JlY3RfbWV0aG9kLCBNRVRIT0RfQ09OVEFJTlMpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJlbXB0eSIsIDAsIGpzX3JlY3RfbWV0aG9kLCBNRVRIT0RfRU1QVFkpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJhcmVhIiwgMCwganNfcmVjdF9tZXRob2QsIE1FVEhPRF9BUkVBKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEpTX0NGVU5DX01BR0lDX0RFRigiYnIiLCAwLCBqc19yZWN0X21ldGhvZCwgTUVUSE9EX0JSKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEpTX0NGVU5DX01BR0lDX0RFRigidGwiLCAwLCBqc19yZWN0X21ldGhvZCwgTUVUSE9EX1RMKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEpTX0NGVU5DX01BR0lDX0RFRigiaW5zZXQiLCAxLCBqc19yZWN0X21ldGhvZCwgTUVUSE9EX0lOU0VUKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEpTX0NGVU5DX01BR0lDX0RFRigib3V0c2V0IiwgMSwganNfcmVjdF9tZXRob2QsIE1FVEhPRF9PVVRTRVQpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJoc3BsaXQiLCAxLCBqc19yZWN0X21ldGhvZCwgTUVUSE9EX0hTUExJVCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBKU19DRlVOQ19NQUdJQ19ERUYoInZzcGxpdCIsIDEsIGpzX3JlY3RfbWV0aG9kLCBNRVRIT0RfVlNQTElUKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEpTX0NGVU5DX0RFRigidG9TdHJpbmciLCAwLCBqc19yZWN0X3RvX3N0cmluZyksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBKU19DRlVOQ19ERUYoInRvU291cmNlIiwgMCwganNfcmVjdF90b19zb3VyY2UpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJlcXVhbHMiLCAxLCBqc19yZWN0X2Z1bmNzLCBGVU5DX0VRVUFMUyksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBKU19DRlVOQ19NQUdJQ19ERUYoInJvdW5kIiwgMCwganNfcmVjdF9mdW5jcywgRlVOQ19ST1VORCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBKU19DRlVOQ19NQUdJQ19ERUYoInRvT2JqZWN0IiwgMCwganNfcmVjdF9mdW5jcywgRlVOQ19UT09CSkVDVCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBKU19DRlVOQ19NQUdJQ19ERUYoInRvQXJyYXkiLCAwLCBqc19yZWN0X2Z1bmNzLCBGVU5DX1RPQVJSQVkpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSlNfUFJPUF9TVFJJTkdfREVGKCJbU3ltYm9sLnRvU3RyaW5nVGFnXSIsICJSZWN0IiwgSlNfUFJPUF9DT05GSUdVUkFCTEUpCgp9Owpjb25zdCBKU0NGdW5jdGlvbkxpc3RFbnRyeSBqc19yZWN0X3N0YXRpY19mdW5jc1tdID0ge0pTX0NGVU5DX0RFRigiZnJvbSIsIDEsIGpzX3JlY3RfZnJvbSl9OwoKaW50CmpzX3JlY3RfaW5pdChKU0NvbnRleHQqIGN0eCwgSlNNb2R1bGVEZWYqIG0pIHsKCiAgaWYoanNfcmVjdF9jbGFzc19pZCA9PSAwKSB7CiAgICAvKiBjcmVhdGUgdGhlIFJlY3QgY2xhc3MgKi8KICAgIEpTX05ld0NsYXNzSUQoJmpzX3JlY3RfY2xhc3NfaWQpOwogICAgSlNfTmV3Q2xhc3MoSlNfR2V0UnVudGltZShjdHgpLCBqc19yZWN0X2NsYXNzX2lkLCAmanNfcmVjdF9jbGFzcyk7CgogICAgcmVjdF9wcm90byA9IEpTX05ld09iamVjdChjdHgpOwogICAgSlNfU2V0UHJvcGVydHlGdW5jdGlvbkxpc3QoY3R4LCByZWN0X3Byb3RvLCBqc19yZWN0X3Byb3RvX2Z1bmNzLCBjb3VudG9mKGpzX3JlY3RfcHJvdG9fZnVuY3MpKTsKICAgIEpTX1NldENsYXNzUHJvdG8oY3R4LCBqc19yZWN0X2NsYXNzX2lkLCByZWN0X3Byb3RvKTsKCiAgICByZWN0X2NsYXNzID0gSlNfTmV3Q0Z1bmN0aW9uMihjdHgsIGpzX3JlY3RfY3RvciwgIlJlY3QiLCAwLCBKU19DRlVOQ19jb25zdHJ1Y3RvciwgMCk7CiAgICAvKiBzZXQgcHJvdG8uY29uc3RydWN0b3IgYW5kIGN0b3IucHJvdG90eXBlICovCiAgICBKU19TZXRDb25zdHJ1Y3RvcihjdHgsIHJlY3RfY2xhc3MsIHJlY3RfcHJvdG8pOwogICAgSlNfU2V0UHJvcGVydHlGdW5jdGlvbkxpc3QoY3R4LCByZWN0X2NsYXNzLCBqc19yZWN0X3N0YXRpY19mdW5jcywgY291bnRvZihqc19yZWN0X3N0YXRpY19mdW5jcykpOwoKICAgIGpzX3NldF9pbnNwZWN0X21ldGhvZChjdHgsIHJlY3RfcHJvdG8sIGpzX3JlY3RfaW5zcGVjdCk7CiAgfQoKICBpZihtKQogICAgSlNfU2V0TW9kdWxlRXhwb3J0KGN0eCwgbSwgIlJlY3QiLCByZWN0X2NsYXNzKTsKCiAgcmV0dXJuIDA7Cn0KCmV4dGVybiAiQyIgVklTSUJMRSB2b2lkCmpzX3JlY3RfZXhwb3J0KEpTQ29udGV4dCogY3R4LCBKU01vZHVsZURlZiogbSkgewogIEpTX0FkZE1vZHVsZUV4cG9ydChjdHgsIG0sICJSZWN0Iik7Cn0KCnZvaWQKanNfcmVjdF9jb25zdHJ1Y3RvcihKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZSBwYXJlbnQsIGNvbnN0IGNoYXIqIG5hbWUpIHsKICBpZihKU19Jc1VuZGVmaW5lZChyZWN0X2NsYXNzKSkKICAgIGpzX3JlY3RfaW5pdChjdHgsIDApOwoKICBKU19TZXRQcm9wZXJ0eVN0cihjdHgsIHBhcmVudCwgbmFtZSA/IG5hbWUgOiAiUmVjdCIsIHJlY3RfY2xhc3MpOwp9CgojaWZkZWYgSlNfUkVDVF9NT0RVTEUKI2RlZmluZSBKU19JTklUX01PRFVMRSAvKlZJU0lCTEUqLyBqc19pbml0X21vZHVsZQojZWxzZQojZGVmaW5lIEpTX0lOSVRfTU9EVUxFIC8qVklTSUJMRSovIGpzX2luaXRfbW9kdWxlX3JlY3QKI2VuZGlmCgpleHRlcm4gIkMiIEpTTW9kdWxlRGVmKgpKU19JTklUX01PRFVMRShKU0NvbnRleHQqIGN0eCwgY29uc3QgY2hhciogbW9kdWxlX25hbWUpIHsKICBKU01vZHVsZURlZiogbTsKICBtID0gSlNfTmV3Q01vZHVsZShjdHgsIG1vZHVsZV9uYW1lLCAmanNfcmVjdF9pbml0KTsKICBpZighbSkKICAgIHJldHVybiBOVUxMOwogIGpzX3JlY3RfZXhwb3J0KGN0eCwgbSk7CiAgcmV0dXJuIG07Cn0AAAAAAAAAAJZIAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA5zAAAAAAAADnMAAAAAAAAAAAAAAAAPC/"
				],
				[
					89,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAAATSQAAI2luY2x1ZGUgImpzYmluZGluZ3MuaHBwIgojaW5jbHVkZSAianNfcmVjdC5ocHAiCiNpbmNsdWRlICJqc19zaXplLmhwcCIKI2luY2x1ZGUgImpzX3BvaW50LmhwcCIKI2luY2x1ZGUgImpzX2FsbG9jLmhwcCIKI2luY2x1ZGUgImpzX2FycmF5LmhwcCIKI2luY2x1ZGUgImpzX3R5cGVkX2FycmF5LmhwcCIKI2luY2x1ZGUgInV0aWwuaHBwIgoKZXh0ZXJuICJDIiB7CkpTVmFsdWUgcmVjdF9wcm90byA9IEpTX1VOREVGSU5FRCwgcmVjdF9jbGFzcyA9IEpTX1VOREVGSU5FRDsKSlNDbGFzc0lEIGpzX3JlY3RfY2xhc3NfaWQgPSAwOwp9CgpleHRlcm4gIkMiIFZJU0lCTEUgSlNWYWx1ZQpqc19yZWN0X25ldyhKU0NvbnRleHQqIGN0eCwgZG91YmxlIHgsIGRvdWJsZSB5LCBkb3VibGUgdywgZG91YmxlIGgpIHsKICBKU1ZhbHVlIHJldDsKICBKU1JlY3REYXRhPGRvdWJsZT4qIHM7CgogIGlmKEpTX0lzVW5kZWZpbmVkKHJlY3RfcHJvdG8pKQogICAganNfcmVjdF9pbml0KGN0eCwgTlVMTCk7CgogIHJldCA9IEpTX05ld09iamVjdFByb3RvQ2xhc3MoY3R4LCByZWN0X3Byb3RvLCBqc19yZWN0X2NsYXNzX2lkKTsKCiAgcyA9IGpzX2FsbG9jYXRlPEpTUmVjdERhdGE8ZG91YmxlPj4oY3R4KTsKCiAgbmV3KHMpIEpTUmVjdERhdGE8ZG91YmxlPigpOwogIHMtPnggPSB4IDw9IERCTF9FUFNJTE9OID8gMCA6IHg7CiAgcy0+eSA9IHkgPD0gREJMX0VQU0lMT04gPyAwIDogeTsKICBzLT53aWR0aCA9IHcgPD0gREJMX0VQU0lMT04gPyAwIDogdzsKICBzLT5oZWlnaHQgPSBoIDw9IERCTF9FUFNJTE9OID8gMCA6IGg7CgogIEpTX1NldE9wYXF1ZShyZXQsIHMpOwogIHJldHVybiByZXQ7Cn0KClZJU0lCTEUgSlNWYWx1ZQpqc19yZWN0X3dyYXAoSlNDb250ZXh0KiBjdHgsIGNvbnN0IEpTUmVjdERhdGE8ZG91YmxlPiYgcmVjdCkgewogIHJldHVybiBqc19yZWN0X25ldyhjdHgsIHJlY3QueCwgcmVjdC55LCByZWN0LndpZHRoLCByZWN0LmhlaWdodCk7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX3JlY3RfY3RvcihKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IG5ld190YXJnZXQsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QqIGFyZ3YpIHsKICBkb3VibGUgeCA9IDAsIHkgPSAwLCB3ID0gMCwgaCA9IDA7CiAgSlNSZWN0RGF0YTxkb3VibGU+IHJlY3QgPSB7MCwgMCwgMCwgMH07CiAgaW50IG9wdGluZCA9IDA7CgogIGlmKGFyZ2MgPiAwKSB7CiAgICBpZighanNfcmVjdF9yZWFkKGN0eCwgYXJndlswXSwgJnJlY3QpKSB7CiAgICAgIEpTUG9pbnREYXRhPGRvdWJsZT4gcG9pbnQsIHBvaW50MjsKICAgICAgSlNTaXplRGF0YTxkb3VibGU+IHNpemU7CiAgICAgIHdoaWxlKG9wdGluZCA8IGFyZ2MpIHsKICAgICAgICBpZihKU19Jc051bWJlcihhcmd2W29wdGluZF0pICYmIEpTX0lzTnVtYmVyKGFyZ3Zbb3B0aW5kICsgMV0pKSB7CiAgICAgICAgICBpZihvcHRpbmQgPT0gMCkgewogICAgICAgICAgICBKU19Ub0Zsb2F0NjQoY3R4LCAmeCwgYXJndltvcHRpbmRdKTsKICAgICAgICAgICAgSlNfVG9GbG9hdDY0KGN0eCwgJnksIGFyZ3Zbb3B0aW5kICsgMV0pOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgSlNfVG9GbG9hdDY0KGN0eCwgJncsIGFyZ3Zbb3B0aW5kXSk7CiAgICAgICAgICAgIEpTX1RvRmxvYXQ2NChjdHgsICZoLCBhcmd2W29wdGluZCArIDFdKTsKICAgICAgICAgIH0KICAgICAgICAgIG9wdGluZCArPSAyOwogICAgICAgIH0gZWxzZSBpZihqc19wb2ludF9yZWFkKGN0eCwgYXJndltvcHRpbmRdLCBvcHRpbmQgPT0gMCA/ICZwb2ludCA6ICZwb2ludDIpKSB7CiAgICAgICAgICBpZihvcHRpbmQgPT0gMCkgewogICAgICAgICAgICB4ID0gcG9pbnQueDsKICAgICAgICAgICAgeSA9IHBvaW50Lnk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB3ID0gcG9pbnQyLnggLSB4OwogICAgICAgICAgICBoID0gcG9pbnQyLnkgLSB5OwogICAgICAgICAgfQogICAgICAgICAgb3B0aW5kKys7CiAgICAgICAgfQoKICAgICAgICBlbHNlIGlmKGpzX3NpemVfcmVhZChjdHgsIGFyZ3Zbb3B0aW5kXSwgJnNpemUpKSB7CiAgICAgICAgICB3ID0gc2l6ZS53aWR0aDsKICAgICAgICAgIGggPSBzaXplLmhlaWdodDsKICAgICAgICAgIG9wdGluZCsrOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBvcHRpbmQrKzsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICB9CgogIHJldHVybiBqc19yZWN0X25ldyhjdHgsIHgsIHksIHcsIGgpOwp9CgpWSVNJQkxFIEpTUmVjdERhdGE8ZG91YmxlPioKanNfcmVjdF9kYXRhKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdmFsKSB7CiAgcmV0dXJuIHN0YXRpY19jYXN0PEpTUmVjdERhdGE8ZG91YmxlPio+KEpTX0dldE9wYXF1ZTIoY3R4LCB2YWwsIGpzX3JlY3RfY2xhc3NfaWQpKTsKfQoKZW51bSB7IFBST1BfWCA9IDAsIFBST1BfWSwgUFJPUF9XSURUSCwgUFJPUF9IRUlHSFQsIFBST1BfWDIsIFBST1BfWTIsIFBST1BfUE9TLCBQUk9QX1NJWkUgfTsKCnN0YXRpYyBKU1ZhbHVlCmpzX3JlY3RfZ2V0KEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBtYWdpYykgewogIEpTVmFsdWUgcmV0ID0gSlNfVU5ERUZJTkVEOwogIEpTUmVjdERhdGE8ZG91YmxlPiogczsKCiAgaWYoKHMgPSBzdGF0aWNfY2FzdDxKU1JlY3REYXRhPGRvdWJsZT4qPihKU19HZXRPcGFxdWUyKGN0eCwgdGhpc192YWwsIGpzX3JlY3RfY2xhc3NfaWQpKSkgPT0gbnVsbHB0cikKICAgIHJldHVybiBKU19FWENFUFRJT047CgogIHN3aXRjaChtYWdpYykgewogICAgY2FzZSBQUk9QX1g6IHsKICAgICAgcmV0ID0gSlNfTmV3RmxvYXQ2NChjdHgsIHMtPngpOwogICAgICBicmVhazsKICAgIH0KICAgIGNhc2UgUFJPUF9ZOiB7CiAgICAgIHJldCA9IEpTX05ld0Zsb2F0NjQoY3R4LCBzLT55KTsKICAgICAgYnJlYWs7CiAgICB9CiAgICBjYXNlIFBST1BfV0lEVEg6IHsKICAgICAgcmV0ID0gSlNfTmV3RmxvYXQ2NChjdHgsIHMtPndpZHRoKTsKICAgICAgYnJlYWs7CiAgICB9CiAgICBjYXNlIFBST1BfSEVJR0hUOiB7CiAgICAgIHJldCA9IEpTX05ld0Zsb2F0NjQoY3R4LCBzLT5oZWlnaHQpOwogICAgICBicmVhazsKICAgIH0KICAgIGNhc2UgUFJPUF9YMjogewogICAgICByZXQgPSBKU19OZXdGbG9hdDY0KGN0eCwgcy0+eCArIHMtPndpZHRoKTsKICAgICAgYnJlYWs7CiAgICB9CiAgICBjYXNlIFBST1BfWTI6IHsKICAgICAgcmV0ID0gSlNfTmV3RmxvYXQ2NChjdHgsIHMtPnkgKyBzLT5oZWlnaHQpOwogICAgICBicmVhazsKICAgIH0KICAgIGNhc2UgUFJPUF9QT1M6IHsKICAgICAgcmV0ID0ganNfcG9pbnRfbmV3KGN0eCwgcy0+eCwgcy0+eSk7CiAgICAgIGJyZWFrOwogICAgfQogICAgY2FzZSBQUk9QX1NJWkU6IHsKICAgICAgcmV0ID0ganNfc2l6ZV9uZXcoY3R4LCBzLT53aWR0aCwgcy0+aGVpZ2h0KTsKICAgICAgYnJlYWs7CiAgICB9CiAgfQogIHJldHVybiByZXQ7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX3JlY3Rfc2V0KEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIEpTVmFsdWVDb25zdCB2YWwsIGludCBtYWdpYykgewogIEpTUmVjdERhdGE8ZG91YmxlPiogczsKICBkb3VibGUgdjsKICBpZigocyA9IHN0YXRpY19jYXN0PEpTUmVjdERhdGE8ZG91YmxlPio+KEpTX0dldE9wYXF1ZTIoY3R4LCB0aGlzX3ZhbCwganNfcmVjdF9jbGFzc19pZCkpKSA9PSBudWxscHRyKQogICAgcmV0dXJuIEpTX0VYQ0VQVElPTjsKCiAgaWYoSlNfVG9GbG9hdDY0KGN0eCwgJnYsIHZhbCkpCiAgICByZXR1cm4gSlNfRVhDRVBUSU9OOwoKICBzd2l0Y2gobWFnaWMpIHsKICAgIGNhc2UgUFJPUF9YOiB7CiAgICAgIHMtPnggPSB2OwogICAgICBicmVhazsKICAgIH0KICAgIGNhc2UgUFJPUF9ZOiB7CiAgICAgIHMtPnkgPSB2OwogICAgICBicmVhazsKICAgIH0KICAgIGNhc2UgUFJPUF9XSURUSDogewogICAgICBzLT53aWR0aCA9IHY7CiAgICAgIGJyZWFrOwogICAgfQogICAgY2FzZSBQUk9QX0hFSUdIVDogewogICAgICBzLT5oZWlnaHQgPSB2OwogICAgICBicmVhazsKICAgIH0KICAgIGNhc2UgUFJPUF9YMjogewogICAgICBzLT53aWR0aCA9IHYgLSBzLT54OwogICAgICBicmVhazsKICAgIH0KICAgIGNhc2UgUFJPUF9ZMjogewogICAgICBzLT5oZWlnaHQgPSB2IC0gcy0+eTsKICAgICAgYnJlYWs7CiAgICB9CiAgICBjYXNlIFBST1BfUE9TOiB7CiAgICAgIEpTUG9pbnREYXRhPGRvdWJsZT4gcG9pbnQ7CiAgICAgIGpzX3BvaW50X3JlYWQoY3R4LCB2YWwsICZwb2ludCk7CiAgICAgIHMtPnggPSBwb2ludC54OwogICAgICBzLT55ID0gcG9pbnQueTsKICAgICAgYnJlYWs7CiAgICB9CiAgICBjYXNlIFBST1BfU0laRTogewogICAgICBKU1NpemVEYXRhPGRvdWJsZT4gc2l6ZTsKICAgICAganNfc2l6ZV9yZWFkKGN0eCwgdmFsLCAmc2l6ZSk7CiAgICAgIHMtPndpZHRoID0gc2l6ZS53aWR0aDsKICAgICAgcy0+aGVpZ2h0ID0gc2l6ZS5oZWlnaHQ7CiAgICAgIGJyZWFrOwogICAgfQogIH0KCiAgcmV0dXJuIEpTX1VOREVGSU5FRDsKfQoKc3RhdGljIEpTVmFsdWUKanNfcmVjdF90b19zdHJpbmcoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCogYXJndikgewogIEpTUmVjdERhdGE8ZG91YmxlPiByZWN0LCAqczsKICBzdGQ6Om9zdHJpbmdzdHJlYW0gb3M7CiAgc3RkOjphcnJheTxjb25zdCBjaGFyKiwgMz4gZGVsaW1zID0gewogICAgICAiLCIsCiAgICAgICLiiKMiIC8q772c4qe44qaB4o6u4oil4oij4ri+4ryB4p2Y4p2Z4p+K4o2/4o644o+Q772c4pSC77+o77iy77ix4p2YfO+9nCovLAogICAgICAiw5ciIC8qIvCdhYPwn4Wn8J2aofCfhafwn4WH8J2YufCdmqHwnZi58J2Qseqtl/CdkJfwnZG/8J2Fg/CdhYN4y6PigpPikrPik43ik6finJXinJjinJfiqIniqK/iqILinJbiqLvipoHii4XiipfiiqDiiJfDl+Kor8OXIiovfTsKCiAgZm9yKHNpemVfdCBpID0gMDsgaSA8IGFyZ2M7IGkrKykgeyBkZWxpbXNbaV0gPSBKU19Ub0NTdHJpbmcoY3R4LCBhcmd2W2ldKTsgfQoKICBpZigocyA9IHN0YXRpY19jYXN0PEpTUmVjdERhdGE8ZG91YmxlPio+KEpTX0dldE9wYXF1ZTIoY3R4LCB0aGlzX3ZhbCwganNfcmVjdF9jbGFzc19pZCkpKSAhPSBudWxscHRyKSB7CiAgICByZWN0ID0gKnM7CiAgfSBlbHNlIHsKICAgIGpzX3JlY3RfcmVhZChjdHgsIHRoaXNfdmFsLCAmcmVjdCk7CiAgfQoKICBvcyA8PCByZWN0LnggPDwgZGVsaW1zWzBdIDw8IHJlY3QueSA8PCBkZWxpbXNbMV0gPDwgcmVjdC53aWR0aCA8PCBkZWxpbXNbMl0gPDwgcmVjdC5oZWlnaHQ7CgogIHJldHVybiBKU19OZXdTdHJpbmcoY3R4LCBvcy5zdHIoKS5jX3N0cigpKTsKfQpzdGF0aWMgSlNWYWx1ZQpqc19yZWN0X3RvX3NvdXJjZShKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2KSB7CiAgSlNSZWN0RGF0YTxkb3VibGU+IHJlY3QsICpzOwogIHN0ZDo6b3N0cmluZ3N0cmVhbSBvczsKCiAgaWYoKHMgPSBzdGF0aWNfY2FzdDxKU1JlY3REYXRhPGRvdWJsZT4qPihKU19HZXRPcGFxdWUyKGN0eCwgdGhpc192YWwsIGpzX3JlY3RfY2xhc3NfaWQpKSkgIT0gbnVsbHB0cikgewogICAgcmVjdCA9ICpzOwogIH0gZWxzZSB7CiAgICBqc19yZWN0X3JlYWQoY3R4LCB0aGlzX3ZhbCwgJnJlY3QpOwogIH0KCiAgb3MgPDwgInt4OiIgPDwgcmVjdC54IDw8ICIseToiIDw8IHJlY3QueSA8PCAiLHdpZHRoOiIgPDwgcmVjdC53aWR0aCA8PCAiLGhlaWdodDoiIDw8IHJlY3QuaGVpZ2h0IDw8ICJ9IjsKCiAgcmV0dXJuIEpTX05ld1N0cmluZyhjdHgsIG9zLnN0cigpLmNfc3RyKCkpOwp9CgplbnVtIHsgRlVOQ19FUVVBTFMgPSAwLCBGVU5DX1JPVU5ELCBGVU5DX1RPT0JKRUNULCBGVU5DX1RPQVJSQVkgfTsKCnN0YXRpYyBKU1ZhbHVlCmpzX3JlY3RfZnVuY3MoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCogYXJndiwgaW50IG1hZ2ljKSB7CiAgSlNSZWN0RGF0YTxkb3VibGU+IHJlY3QsIG90aGVyLCAqcywgKmE7CiAgSlNWYWx1ZSByZXQgPSBKU19FWENFUFRJT047CgogIGlmKChzID0ganNfcmVjdF9kYXRhKGN0eCwgdGhpc192YWwpKSA9PSBudWxscHRyKQogICAgcmV0dXJuIHJldDsKCiAgcmVjdCA9ICpzOwoKICBzd2l0Y2gobWFnaWMpIHsKICAgIGNhc2UgRlVOQ19FUVVBTFM6IHsKICAgICAganNfcmVjdF9yZWFkKGN0eCwgYXJndlswXSwgJm90aGVyKTsKICAgICAgYm9vbCBlcXVhbHMgPSByZWN0LnggPT0gb3RoZXIueCAmJiByZWN0LnkgPT0gb3RoZXIueSAmJiByZWN0LndpZHRoID09IG90aGVyLndpZHRoICYmIHJlY3QuaGVpZ2h0ID09IG90aGVyLmhlaWdodDsKICAgICAgcmV0ID0gSlNfTmV3Qm9vbChjdHgsIGVxdWFscyk7CiAgICAgIGJyZWFrOwogICAgfQogICAgY2FzZSBGVU5DX1JPVU5EOiB7CiAgICAgIGRvdWJsZSB4LCB5LCB3aWR0aCwgaGVpZ2h0LCBmOwogICAgICBpbnQzMl90IHByZWNpc2lvbiA9IDA7CiAgICAgIGlmKGFyZ2MgPiAwKQogICAgICAgIEpTX1RvSW50MzIoY3R4LCAmcHJlY2lzaW9uLCBhcmd2WzBdKTsKICAgICAgZiA9IHN0ZDo6cG93KDEwLCBwcmVjaXNpb24pOwogICAgICB4ID0gc3RkOjpyb3VuZChyZWN0LnggKiBmKSAvIGY7CiAgICAgIHkgPSBzdGQ6OnJvdW5kKHJlY3QueSAqIGYpIC8gZjsKICAgICAgd2lkdGggPSBzdGQ6OnJvdW5kKHJlY3Qud2lkdGggKiBmKSAvIGY7CiAgICAgIGhlaWdodCA9IHN0ZDo6cm91bmQocmVjdC5oZWlnaHQgKiBmKSAvIGY7CiAgICAgIHJldCA9IGpzX3JlY3RfbmV3KGN0eCwgeCwgeSwgd2lkdGgsIGhlaWdodCk7CiAgICAgIGJyZWFrOwogICAgfQogICAgY2FzZSBGVU5DX1RPT0JKRUNUOiB7CiAgICAgIHJldCA9IEpTX05ld09iamVjdChjdHgpOwoKICAgICAgSlNfU2V0UHJvcGVydHlTdHIoY3R4LCByZXQsICJ4IiwgSlNfTmV3RmxvYXQ2NChjdHgsIHJlY3QueCkpOwogICAgICBKU19TZXRQcm9wZXJ0eVN0cihjdHgsIHJldCwgInkiLCBKU19OZXdGbG9hdDY0KGN0eCwgcmVjdC55KSk7CiAgICAgIEpTX1NldFByb3BlcnR5U3RyKGN0eCwgcmV0LCAid2lkdGgiLCBKU19OZXdGbG9hdDY0KGN0eCwgcmVjdC53aWR0aCkpOwogICAgICBKU19TZXRQcm9wZXJ0eVN0cihjdHgsIHJldCwgImhlaWdodCIsIEpTX05ld0Zsb2F0NjQoY3R4LCByZWN0LmhlaWdodCkpOwogICAgICBicmVhazsKICAgIH0KICAgIGNhc2UgRlVOQ19UT0FSUkFZOiB7CiAgICAgIHN0ZDo6YXJyYXk8ZG91YmxlLCA0PiBhcnJheXtyZWN0LngsIHJlY3QueSwgcmVjdC53aWR0aCwgcmVjdC5oZWlnaHR9OwoKICAgICAgcmV0ID0ganNfYXJyYXlfZnJvbShjdHgsIGFycmF5LmNiZWdpbigpLCBhcnJheS5jZW5kKCkpOwogICAgICBicmVhazsKICAgIH0KICB9CgogIHJldHVybiByZXQ7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX3JlY3RfaW5zcGVjdChKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2KSB7CiAgSlNSZWN0RGF0YTxkb3VibGU+KiByID0ganNfcmVjdF9kYXRhKGN0eCwgdGhpc192YWwpOwogIEpTVmFsdWUgb2JqID0gSlNfTmV3T2JqZWN0UHJvdG8oY3R4LCByZWN0X3Byb3RvKTsKCiAgSlNfRGVmaW5lUHJvcGVydHlWYWx1ZVN0cihjdHgsIG9iaiwgIngiLCBKU19OZXdGbG9hdDY0KGN0eCwgci0+eCksIEpTX1BST1BfRU5VTUVSQUJMRSk7CiAgSlNfRGVmaW5lUHJvcGVydHlWYWx1ZVN0cihjdHgsIG9iaiwgInkiLCBKU19OZXdGbG9hdDY0KGN0eCwgci0+eSksIEpTX1BST1BfRU5VTUVSQUJMRSk7CiAgSlNfRGVmaW5lUHJvcGVydHlWYWx1ZVN0cihjdHgsIG9iaiwgIndpZHRoIiwgSlNfTmV3RmxvYXQ2NChjdHgsIHItPndpZHRoKSwgSlNfUFJPUF9FTlVNRVJBQkxFKTsKICBKU19EZWZpbmVQcm9wZXJ0eVZhbHVlU3RyKGN0eCwgb2JqLCAiaGVpZ2h0IiwgSlNfTmV3RmxvYXQ2NChjdHgsIHItPmhlaWdodCksIEpTX1BST1BfRU5VTUVSQUJMRSk7CiAgcmV0dXJuIG9iajsKfQoKZW51bSB7CiAgTUVUSE9EX0NPTlRBSU5TID0gMCwKICBNRVRIT0RfRU1QVFksCiAgTUVUSE9EX0FSRUEsCiAgTUVUSE9EX0JSLAogIE1FVEhPRF9UTCwKICBNRVRIT0RfU0laRSwKICBNRVRIT0RfSU5TRVQsCiAgTUVUSE9EX09VVFNFVCwKICBNRVRIT0RfSFNQTElULAogIE1FVEhPRF9WU1BMSVQKfTsKCnN0YXRpYyBKU1ZhbHVlCmpzX3JlY3RfbWV0aG9kKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgcmVjdCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCogYXJndiwgaW50IG1hZ2ljKSB7CiAgSlNSZWN0RGF0YTxkb3VibGU+KiBzID0gc3RhdGljX2Nhc3Q8SlNSZWN0RGF0YTxkb3VibGU+Kj4oSlNfR2V0T3BhcXVlMihjdHgsIHJlY3QsIGpzX3JlY3RfY2xhc3NfaWQpKTsKICBKU1ZhbHVlIHJldCA9IEpTX1VOREVGSU5FRDsKICBKU1BvaW50RGF0YTxkb3VibGU+IHBvaW50ID0ganNfcG9pbnRfZ2V0KGN0eCwgYXJndlswXSk7CgogIHN3aXRjaChtYWdpYykgewogICAgY2FzZSBNRVRIT0RfQ09OVEFJTlM6IHsKICAgICAgcmV0ID0gSlNfTmV3Qm9vbChjdHgsIHMtPmNvbnRhaW5zKHBvaW50KSk7CiAgICAgIGJyZWFrOwogICAgfQogICAgY2FzZSBNRVRIT0RfRU1QVFk6IHsKICAgICAgcmV0ID0gSlNfTmV3Qm9vbChjdHgsIHMtPmVtcHR5KCkpOwogICAgICBicmVhazsKICAgIH0KICAgIGNhc2UgTUVUSE9EX0FSRUE6IHsKICAgICAgcmV0ID0gSlNfTmV3RmxvYXQ2NChjdHgsIHMtPmFyZWEoKSk7CiAgICAgIGJyZWFrOwogICAgfQogICAgY2FzZSBNRVRIT0RfQlI6CiAgICBjYXNlIE1FVEhPRF9UTDogewogICAgICBKU1BvaW50RGF0YTxkb3VibGU+IHB0ID0gbWFnaWMgPT0gMyA/IHMtPmJyKCkgOiBzLT50bCgpOwoKICAgICAgcmV0ID0ganNfcG9pbnRfbmV3KGN0eCwgcHQueCwgcHQueSk7CiAgICAgIGJyZWFrOwogICAgfQogICAgY2FzZSBNRVRIT0RfU0laRTogewogICAgICBjdjo6U2l6ZTJkIHN6ID0gcy0+c2l6ZSgpOwogICAgICByZXQgPSBqc19zaXplX25ldyhjdHgsIHN6LndpZHRoLCBzei5oZWlnaHQpOwogICAgICBicmVhazsKICAgIH0KICAgIGNhc2UgTUVUSE9EX0lOU0VUOiB7CiAgICAgIEpTUmVjdERhdGE8ZG91YmxlPiByZWN0ID0gKnM7CiAgICAgIGlmKGFyZ2MgPj0gMSkgewogICAgICAgIGRvdWJsZSBuOwogICAgICAgIEpTX1RvRmxvYXQ2NChjdHgsICZuLCBhcmd2WzBdKTsKICAgICAgICByZWN0LnggKz0gbjsKICAgICAgICByZWN0LndpZHRoIC09IG4gKiAyOwogICAgICAgIHJlY3QueSArPSBuOwogICAgICAgIHJlY3QuaGVpZ2h0IC09IG4gKiAyOwoKICAgICAgfSBlbHNlIGlmKGFyZ2MgPj0gMikgewogICAgICAgIGRvdWJsZSBoLCB2OwogICAgICAgIEpTX1RvRmxvYXQ2NChjdHgsICZoLCBhcmd2WzBdKTsKICAgICAgICBKU19Ub0Zsb2F0NjQoY3R4LCAmdiwgYXJndlsxXSk7CiAgICAgICAgcmVjdC54ICs9IGg7CiAgICAgICAgcmVjdC53aWR0aCAtPSBoICogMjsKICAgICAgICByZWN0LnkgKz0gdjsKICAgICAgICByZWN0LmhlaWdodCAtPSB2ICogMjsKCiAgICAgIH0gZWxzZSBpZihhcmdjID49IDQpIHsKICAgICAgICBkb3VibGUgdCwgciwgYiwgbDsKICAgICAgICBKU19Ub0Zsb2F0NjQoY3R4LCAmdCwgYXJndlswXSk7CiAgICAgICAgSlNfVG9GbG9hdDY0KGN0eCwgJnIsIGFyZ3ZbMV0pOwogICAgICAgIEpTX1RvRmxvYXQ2NChjdHgsICZiLCBhcmd2WzJdKTsKICAgICAgICBKU19Ub0Zsb2F0NjQoY3R4LCAmbCwgYXJndlszXSk7CiAgICAgICAgcmVjdC54ICs9IGw7CiAgICAgICAgcmVjdC53aWR0aCAtPSBsICsgcjsKICAgICAgICByZWN0LnkgKz0gdDsKICAgICAgICByZWN0LmhlaWdodCAtPSB0ICsgYjsKICAgICAgfQogICAgICByZXQgPSBqc19yZWN0X3dyYXAoY3R4LCByZWN0KTsKICAgICAgYnJlYWs7CiAgICB9CgogICAgY2FzZSBNRVRIT0RfT1VUU0VUOiB7CiAgICAgIEpTUmVjdERhdGE8ZG91YmxlPiByZWN0ID0gKnM7CiAgICAgIGlmKGFyZ2MgPj0gMSkgewogICAgICAgIGRvdWJsZSBuOwogICAgICAgIEpTX1RvRmxvYXQ2NChjdHgsICZuLCBhcmd2WzBdKTsKICAgICAgICByZWN0LnggLT0gbjsKICAgICAgICByZWN0LndpZHRoICs9IG4gKiAyOwogICAgICAgIHJlY3QueSAtPSBuOwogICAgICAgIHJlY3QuaGVpZ2h0ICs9IG4gKiAyOwoKICAgICAgfSBlbHNlIGlmKGFyZ2MgPj0gMikgewogICAgICAgIGRvdWJsZSBoLCB2OwogICAgICAgIEpTX1RvRmxvYXQ2NChjdHgsICZoLCBhcmd2WzBdKTsKICAgICAgICBKU19Ub0Zsb2F0NjQoY3R4LCAmdiwgYXJndlsxXSk7CiAgICAgICAgcmVjdC54IC09IGg7CiAgICAgICAgcmVjdC53aWR0aCArPSBoICogMjsKICAgICAgICByZWN0LnkgLT0gdjsKICAgICAgICByZWN0LmhlaWdodCArPSB2ICogMjsKCiAgICAgIH0gZWxzZSBpZihhcmdjID49IDQpIHsKICAgICAgICBkb3VibGUgdCwgciwgYiwgbDsKICAgICAgICBKU19Ub0Zsb2F0NjQoY3R4LCAmdCwgYXJndlswXSk7CiAgICAgICAgSlNfVG9GbG9hdDY0KGN0eCwgJnIsIGFyZ3ZbMV0pOwogICAgICAgIEpTX1RvRmxvYXQ2NChjdHgsICZiLCBhcmd2WzJdKTsKICAgICAgICBKU19Ub0Zsb2F0NjQoY3R4LCAmbCwgYXJndlszXSk7CiAgICAgICAgcmVjdC54IC09IGw7CiAgICAgICAgcmVjdC53aWR0aCArPSBsICsgcjsKICAgICAgICByZWN0LnkgLT0gdDsKICAgICAgICByZWN0LmhlaWdodCArPSB0ICsgYjsKICAgICAgfQogICAgICByZXQgPSBqc19yZWN0X3dyYXAoY3R4LCByZWN0KTsKICAgICAgYnJlYWs7CiAgICB9CiAgICBjYXNlIE1FVEhPRF9IU1BMSVQ6IHsKICAgICAgc3RkOjp2ZWN0b3I8SlNSZWN0RGF0YTxkb3VibGU+PiByZWN0czsKICAgICAgZG91YmxlIHgxID0gcy0+eCwgeDIgPSBzLT54ICsgcy0+d2lkdGg7CiAgICAgIGF1dG8gYXJncyA9IGFyZ3VtZW50X3JhbmdlKGFyZ2MsIGFyZ3YpOwogICAgICBKU1JlY3REYXRhPGRvdWJsZT4qIHByZXY7CiAgICAgIHN0ZDo6dmVjdG9yPGRvdWJsZT4gYnJlYWtwb2ludHM7CiAgICAgIGZvcihKU1ZhbHVlQ29uc3QgY29uc3QmIGFyZyA6IGFyZ3MpIHsKICAgICAgICBkb3VibGUgZDsKICAgICAgICBqc192YWx1ZV90byhjdHgsIGFyZywgZCk7CiAgICAgICAgaWYoZCA8IDApCiAgICAgICAgICBkID0gcy0+d2lkdGggKyBkOwogICAgICAgIGlmKGQgPiAwICYmIGQgPCBzLT53aWR0aCkKICAgICAgICAgIGJyZWFrcG9pbnRzLnB1c2hfYmFjayhkKTsKICAgICAgfQogICAgICBzdGQ6OnNvcnQoYnJlYWtwb2ludHMuYmVnaW4oKSwgYnJlYWtwb2ludHMuZW5kKCkpOwogICAgICByZWN0cy5wdXNoX2JhY2soKnMpOwogICAgICBwcmV2ID0gJnJlY3RzLmJhY2soKTsKICAgICAgZm9yKGRvdWJsZSBoIDogYnJlYWtwb2ludHMpIHsKICAgICAgICAvLyBwcmludGYoImhzcGxpdCBoPSVsZlxuIiwgaCk7CiAgICAgICAgcHJldi0+d2lkdGggPSBoIC0gKHByZXYtPnggLSB4MSk7CiAgICAgICAgcmVjdHMucHVzaF9iYWNrKCpzKTsKICAgICAgICByZWN0cy5iYWNrKCkueCA9IHgxICsgaDsKICAgICAgICBwcmV2ID0gJnJlY3RzLmJhY2soKTsKICAgICAgICBwcmV2LT53aWR0aCA9IHMtPndpZHRoIC0gaDsKICAgICAgfQogICAgICByZXQgPSBqc19hcnJheV9mcm9tKGN0eCwgcmVjdHMpOwogICAgICBicmVhazsKICAgIH0KICAgIGNhc2UgTUVUSE9EX1ZTUExJVDogewogICAgICBzdGQ6OnZlY3RvcjxKU1JlY3REYXRhPGRvdWJsZT4+IHJlY3RzOwogICAgICBkb3VibGUgeTEgPSBzLT55LCB5MiA9IHMtPnkgKyBzLT5oZWlnaHQ7CiAgICAgIGF1dG8gYXJncyA9IGFyZ3VtZW50X3JhbmdlKGFyZ2MsIGFyZ3YpOwogICAgICBKU1JlY3REYXRhPGRvdWJsZT4qIHByZXY7CiAgICAgIHN0ZDo6dmVjdG9yPGRvdWJsZT4gYnJlYWtwb2ludHM7CiAgICAgIGZvcihKU1ZhbHVlQ29uc3QgY29uc3QmIGFyZyA6IGFyZ3MpIHsKICAgICAgICBkb3VibGUgZDsKICAgICAgICBqc192YWx1ZV90byhjdHgsIGFyZywgZCk7CiAgICAgICAgaWYoZCA8IDApCiAgICAgICAgICBkID0gcy0+aGVpZ2h0ICsgZDsKICAgICAgICBpZihkID4gMCAmJiBkIDwgcy0+aGVpZ2h0KQogICAgICAgICAgYnJlYWtwb2ludHMucHVzaF9iYWNrKGQpOwogICAgICB9CiAgICAgIHN0ZDo6c29ydChicmVha3BvaW50cy5iZWdpbigpLCBicmVha3BvaW50cy5lbmQoKSk7CiAgICAgIHJlY3RzLnB1c2hfYmFjaygqcyk7CiAgICAgIHByZXYgPSAmcmVjdHMuYmFjaygpOwogICAgICBmb3IoZG91YmxlIHYgOiBicmVha3BvaW50cykgewogICAgICAgIC8vIHByaW50ZigiaHNwbGl0IHY9JWxmXG4iLCB2KTsKICAgICAgICBwcmV2LT5oZWlnaHQgPSB2IC0gKHByZXYtPnkgLSB5MSk7CiAgICAgICAgcmVjdHMucHVzaF9iYWNrKCpzKTsKICAgICAgICByZWN0cy5iYWNrKCkueSA9IHkxICsgdjsKICAgICAgICBwcmV2ID0gJnJlY3RzLmJhY2soKTsKICAgICAgICBwcmV2LT5oZWlnaHQgPSBzLT5oZWlnaHQgLSB2OwogICAgICB9CiAgICAgIHJldCA9IGpzX2FycmF5X2Zyb20oY3R4LCByZWN0cyk7CiAgICAgIGJyZWFrOwogICAgfQogIH0KCiAgcmV0dXJuIHJldDsKfQoKc3RhdGljIEpTQXRvbSBpdGVyYXRvcl9zeW1ib2w7CgpzdGF0aWMgSlNWYWx1ZQpqc19yZWN0X3N5bWJvbF9pdGVyYXRvcihKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2KSB7CiAgSlNWYWx1ZSBhcnIsIGl0ZXI7CiAgYXJyID0ganNfcmVjdF9mdW5jcyhjdHgsIHRoaXNfdmFsLCBhcmdjLCBhcmd2LCAzKTsKCiAgaWYoaXRlcmF0b3Jfc3ltYm9sID09IDApCiAgICBpdGVyYXRvcl9zeW1ib2wgPSBqc19zeW1ib2xfYXRvbShjdHgsICJpdGVyYXRvciIpOwoKICBpZighSlNfSXNGdW5jdGlvbihjdHgsIChpdGVyID0gSlNfR2V0UHJvcGVydHkoY3R4LCBhcnIsIGl0ZXJhdG9yX3N5bWJvbCkpKSkKICAgIHJldHVybiBKU19FWENFUFRJT047CiAgcmV0dXJuIEpTX0NhbGwoY3R4LCBpdGVyLCBhcnIsIDAsIGFyZ3YpOwp9CgpzdGF0aWMgSlNWYWx1ZQpqc19yZWN0X2Zyb20oSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCByZWN0LCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2KSB7CiAgc3RkOjphcnJheTxkb3VibGUsIDQ+IGFycmF5OwogIEpTVmFsdWUgcmV0ID0gSlNfRVhDRVBUSU9OOwoKICBpZihKU19Jc1N0cmluZyhhcmd2WzBdKSkgewogICAgY29uc3QgY2hhciogc3RyID0gSlNfVG9DU3RyaW5nKGN0eCwgYXJndlswXSk7CiAgICBjaGFyKiBlbmRwdHIgPSBudWxscHRyOwogICAgZm9yKHNpemVfdCBpID0gMDsgaSA8IDQ7IGkrKykgewogICAgICB3aGlsZSghaXNkaWdpdCgqc3RyKSAmJiAqc3RyICE9ICctJyAmJiAqc3RyICE9ICcrJyAmJiAhKCpzdHIgPT0gJy4nICYmIGlzZGlnaXQoc3RyWzFdKSkpIHN0cisrOwogICAgICBpZigqc3RyID09ICdcMCcpCiAgICAgICAgYnJlYWs7CiAgICAgIGFycmF5W2ldID0gc3RydG9kKHN0ciwgJmVuZHB0cik7CiAgICAgIHN0ciA9IGVuZHB0cjsKICAgIH0KICB9IGVsc2UgaWYoanNfaXNfYXJyYXkoY3R4LCBhcmd2WzBdKSkgewogICAganNfYXJyYXlfdG8oY3R4LCBhcmd2WzBdLCBhcnJheSk7CiAgfQogIGlmKGFycmF5WzJdID4gMCAmJiBhcnJheVszXSA+IDApCiAgICByZXQgPSBqc19yZWN0X25ldyhjdHgsIGFycmF5WzBdLCBhcnJheVsxXSwgYXJyYXlbMl0sIGFycmF5WzNdKTsKICByZXR1cm4gcmV0Owp9Cgp2b2lkCmpzX3JlY3RfZmluYWxpemVyKEpTUnVudGltZSogcnQsIEpTVmFsdWUgdmFsKSB7CiAgSlNSZWN0RGF0YTxkb3VibGU+KiBzID0gc3RhdGljX2Nhc3Q8SlNSZWN0RGF0YTxkb3VibGU+Kj4oSlNfR2V0T3BhcXVlKHZhbCwganNfcmVjdF9jbGFzc19pZCkpOwogIC8qIE5vdGU6ICdzJyBjYW4gYmUgTlVMTCBpbiBjYXNlIEpTX1NldE9wYXF1ZSgpIHdhcyBub3QgY2FsbGVkICovCgogIC8vIHMtPn5KU1JlY3REYXRhPGRvdWJsZT4oKTsKICBpZihzKQogICAganNfZGVhbGxvY2F0ZShydCwgcyk7Cn0KCkpTQ2xhc3NEZWYganNfcmVjdF9jbGFzcyA9IHsKICAgIC5jbGFzc19uYW1lID0gIlJlY3QiLAogICAgLmZpbmFsaXplciA9IGpzX3JlY3RfZmluYWxpemVyLAp9OwoKY29uc3QgSlNDRnVuY3Rpb25MaXN0RW50cnkganNfcmVjdF9wcm90b19mdW5jc1tdID0ge0pTX0NHRVRTRVRfRU5VTUVSQUJMRV9ERUYoIngiLCBqc19yZWN0X2dldCwganNfcmVjdF9zZXQsIFBST1BfWCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBKU19DR0VUU0VUX0VOVU1FUkFCTEVfREVGKCJ5IiwganNfcmVjdF9nZXQsIGpzX3JlY3Rfc2V0LCBQUk9QX1kpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSlNfQ0dFVFNFVF9FTlVNRVJBQkxFX0RFRigid2lkdGgiLCBqc19yZWN0X2dldCwganNfcmVjdF9zZXQsIFBST1BfV0lEVEgpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSlNfQ0dFVFNFVF9FTlVNRVJBQkxFX0RFRigiaGVpZ2h0IiwganNfcmVjdF9nZXQsIGpzX3JlY3Rfc2V0LCBQUk9QX0hFSUdIVCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBKU19DR0VUU0VUX01BR0lDX0RFRigieDIiLCBqc19yZWN0X2dldCwganNfcmVjdF9zZXQsIFBST1BfWDIpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSlNfQ0dFVFNFVF9NQUdJQ19ERUYoInkyIiwganNfcmVjdF9nZXQsIGpzX3JlY3Rfc2V0LCBQUk9QX1kyKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEpTX0NHRVRTRVRfTUFHSUNfREVGKCJwb2ludCIsIGpzX3JlY3RfZ2V0LCBqc19yZWN0X3NldCwgUFJPUF9QT1MpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSlNfQ0dFVFNFVF9NQUdJQ19ERUYoInNpemUiLCBqc19yZWN0X2dldCwganNfcmVjdF9zZXQsIFBST1BfU0laRSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBKU19BTElBU19ERUYoIngxIiwgIngiKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEpTX0FMSUFTX0RFRigieTEiLCAieSIpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJjb250YWlucyIsIDAsIGpzX3JlY3RfbWV0aG9kLCBNRVRIT0RfQ09OVEFJTlMpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJlbXB0eSIsIDAsIGpzX3JlY3RfbWV0aG9kLCBNRVRIT0RfRU1QVFkpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJhcmVhIiwgMCwganNfcmVjdF9tZXRob2QsIE1FVEhPRF9BUkVBKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEpTX0NGVU5DX01BR0lDX0RFRigiYnIiLCAwLCBqc19yZWN0X21ldGhvZCwgTUVUSE9EX0JSKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEpTX0NGVU5DX01BR0lDX0RFRigidGwiLCAwLCBqc19yZWN0X21ldGhvZCwgTUVUSE9EX1RMKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEpTX0NGVU5DX01BR0lDX0RFRigiaW5zZXQiLCAxLCBqc19yZWN0X21ldGhvZCwgTUVUSE9EX0lOU0VUKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEpTX0NGVU5DX01BR0lDX0RFRigib3V0c2V0IiwgMSwganNfcmVjdF9tZXRob2QsIE1FVEhPRF9PVVRTRVQpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJoc3BsaXQiLCAxLCBqc19yZWN0X21ldGhvZCwgTUVUSE9EX0hTUExJVCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBKU19DRlVOQ19NQUdJQ19ERUYoInZzcGxpdCIsIDEsIGpzX3JlY3RfbWV0aG9kLCBNRVRIT0RfVlNQTElUKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEpTX0NGVU5DX0RFRigidG9TdHJpbmciLCAwLCBqc19yZWN0X3RvX3N0cmluZyksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBKU19DRlVOQ19ERUYoInRvU291cmNlIiwgMCwganNfcmVjdF90b19zb3VyY2UpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJlcXVhbHMiLCAxLCBqc19yZWN0X2Z1bmNzLCBGVU5DX0VRVUFMUyksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBKU19DRlVOQ19NQUdJQ19ERUYoInJvdW5kIiwgMCwganNfcmVjdF9mdW5jcywgRlVOQ19ST1VORCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBKU19DRlVOQ19NQUdJQ19ERUYoInRvT2JqZWN0IiwgMCwganNfcmVjdF9mdW5jcywgRlVOQ19UT09CSkVDVCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBKU19DRlVOQ19NQUdJQ19ERUYoInRvQXJyYXkiLCAwLCBqc19yZWN0X2Z1bmNzLCBGVU5DX1RPQVJSQVkpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSlNfUFJPUF9TVFJJTkdfREVGKCJbU3ltYm9sLnRvU3RyaW5nVGFnXSIsICJSZWN0IiwgSlNfUFJPUF9DT05GSUdVUkFCTEUpCgp9Owpjb25zdCBKU0NGdW5jdGlvbkxpc3RFbnRyeSBqc19yZWN0X3N0YXRpY19mdW5jc1tdID0ge0pTX0NGVU5DX0RFRigiZnJvbSIsIDEsIGpzX3JlY3RfZnJvbSl9OwoKaW50CmpzX3JlY3RfaW5pdChKU0NvbnRleHQqIGN0eCwgSlNNb2R1bGVEZWYqIG0pIHsKCiAgaWYoanNfcmVjdF9jbGFzc19pZCA9PSAwKSB7CiAgICAvKiBjcmVhdGUgdGhlIFJlY3QgY2xhc3MgKi8KICAgIEpTX05ld0NsYXNzSUQoJmpzX3JlY3RfY2xhc3NfaWQpOwogICAgSlNfTmV3Q2xhc3MoSlNfR2V0UnVudGltZShjdHgpLCBqc19yZWN0X2NsYXNzX2lkLCAmanNfcmVjdF9jbGFzcyk7CgogICAgcmVjdF9wcm90byA9IEpTX05ld09iamVjdChjdHgpOwogICAgSlNfU2V0UHJvcGVydHlGdW5jdGlvbkxpc3QoY3R4LCByZWN0X3Byb3RvLCBqc19yZWN0X3Byb3RvX2Z1bmNzLCBjb3VudG9mKGpzX3JlY3RfcHJvdG9fZnVuY3MpKTsKICAgIEpTX1NldENsYXNzUHJvdG8oY3R4LCBqc19yZWN0X2NsYXNzX2lkLCByZWN0X3Byb3RvKTsKCiAgICByZWN0X2NsYXNzID0gSlNfTmV3Q0Z1bmN0aW9uMihjdHgsIGpzX3JlY3RfY3RvciwgIlJlY3QiLCAwLCBKU19DRlVOQ19jb25zdHJ1Y3RvciwgMCk7CiAgICAvKiBzZXQgcHJvdG8uY29uc3RydWN0b3IgYW5kIGN0b3IucHJvdG90eXBlICovCiAgICBKU19TZXRDb25zdHJ1Y3RvcihjdHgsIHJlY3RfY2xhc3MsIHJlY3RfcHJvdG8pOwogICAgSlNfU2V0UHJvcGVydHlGdW5jdGlvbkxpc3QoY3R4LCByZWN0X2NsYXNzLCBqc19yZWN0X3N0YXRpY19mdW5jcywgY291bnRvZihqc19yZWN0X3N0YXRpY19mdW5jcykpOwoKICAgIGpzX3NldF9pbnNwZWN0X21ldGhvZChjdHgsIHJlY3RfcHJvdG8sIGpzX3JlY3RfaW5zcGVjdCk7CiAgfQoKICBpZihtKQogICAgSlNfU2V0TW9kdWxlRXhwb3J0KGN0eCwgbSwgIlJlY3QiLCByZWN0X2NsYXNzKTsKCiAgcmV0dXJuIDA7Cn0KCmV4dGVybiAiQyIgVklTSUJMRSB2b2lkCmpzX3JlY3RfZXhwb3J0KEpTQ29udGV4dCogY3R4LCBKU01vZHVsZURlZiogbSkgewogIEpTX0FkZE1vZHVsZUV4cG9ydChjdHgsIG0sICJSZWN0Iik7Cn0KCnZvaWQKanNfcmVjdF9jb25zdHJ1Y3RvcihKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZSBwYXJlbnQsIGNvbnN0IGNoYXIqIG5hbWUpIHsKICBpZihKU19Jc1VuZGVmaW5lZChyZWN0X2NsYXNzKSkKICAgIGpzX3JlY3RfaW5pdChjdHgsIDApOwoKICBKU19TZXRQcm9wZXJ0eVN0cihjdHgsIHBhcmVudCwgbmFtZSA/IG5hbWUgOiAiUmVjdCIsIHJlY3RfY2xhc3MpOwp9CgojaWZkZWYgSlNfUkVDVF9NT0RVTEUKI2RlZmluZSBKU19JTklUX01PRFVMRSAvKlZJU0lCTEUqLyBqc19pbml0X21vZHVsZQojZWxzZQojZGVmaW5lIEpTX0lOSVRfTU9EVUxFIC8qVklTSUJMRSovIGpzX2luaXRfbW9kdWxlX3JlY3QKI2VuZGlmCgpleHRlcm4gIkMiIEpTTW9kdWxlRGVmKgpKU19JTklUX01PRFVMRShKU0NvbnRleHQqIGN0eCwgY29uc3QgY2hhciogbW9kdWxlX25hbWUpIHsKICBKU01vZHVsZURlZiogbTsKICBtID0gSlNfTmV3Q01vZHVsZShjdHgsIG1vZHVsZV9uYW1lLCAmanNfcmVjdF9pbml0KTsKICBpZighbSkKICAgIHJldHVybiBOVUxMOwogIGpzX3JlY3RfZXhwb3J0KGN0eCwgbSk7CiAgcmV0dXJuIG07Cn0AAAAAAAAAAIZIAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA5zAAAAAAAADnMAAAAAAAAAAAAAAAAPC/"
				]
			]
		},
		{
			"file": "js_line.hpp",
			"settings":
			{
				"buffer_size": 2825,
				"line_ending": "Unix"
			},
			"undo_stack":
			[
				[
					7,
					1,
					"paste",
					null,
					"AQAAAPgAAAAAAAAANwEAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA+AAAAAAAAAD4AAAAAAAAAAAAAAAAAPC/"
				],
				[
					9,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"AQAAAPgAAAAAAAAA+QAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA+AAAAAAAAAD4AAAAAAAAAAAAAAAAAAAA"
				],
				[
					10,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAAAJCwAAI2lmbmRlZiBKU19MSU5FX0hQUAojZGVmaW5lIEpTX0xJTkVfSFBQCgojaW5jbHVkZSAianNiaW5kaW5ncy5ocHAiCgpleHRlcm4gIkMiIHsKCmV4dGVybiBKU1ZhbHVlIGxpbmVfcHJvdG8sIGxpbmVfY2xhc3M7CmV4dGVybiBKU0NsYXNzSUQganNfbGluZV9jbGFzc19pZDsKClZJU0lCTEUgSlNWYWx1ZSBqc19saW5lX25ldyhKU0NvbnRleHQqIGN0eCwgZG91YmxlIHgxLCBkb3VibGUgeTEsIGRvdWJsZSB4MiwgZG91YmxlIHkyKTsKfQoKZXh0ZXJuICJDIiBWSVNJQkxFIGludCBqc19saW5lX2luaXQoSlNDb250ZXh0KiwgSlNNb2R1bGVEZWYqKTsKCnRlbXBsYXRlPGNsYXNzIFQ+CnN0YXRpYyBpbmxpbmUgaW50CmpzX2xpbmVfcmVhZChKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IGxpbmUsIHN0ZDo6YXJyYXk8VCwgND4mIG91dCkgewogIGludCByZXQgPSAxOwogIEpTVmFsdWUgeDEgPSBKU19VTkRFRklORUQsIHkxID0gSlNfVU5ERUZJTkVELCB4MiA9IEpTX1VOREVGSU5FRCwgeTIgPSBKU19VTkRFRklORUQ7CiAgLyppZihqc19pc19hcnJheV9saWtlKGN0eCwgbGluZSkpIHsKICAgIGpzX2FycmF5X3RvKGN0eCwgbGluZSwgb3V0KTsKICAgIHJldHVybiAxOwogIH0gZWxzZSAqLwogIGlmKGpzX2lzX2l0ZXJhYmxlKGN0eCwgbGluZSkpIHsKICAgIGlmKGpzX2l0ZXJhYmxlX3RvKGN0eCwgbGluZSwgb3V0KSA9PSA0KQogICAgICByZXR1cm4gMTsKICB9CiAgeDEgPSBKU19HZXRQcm9wZXJ0eVN0cihjdHgsIGxpbmUsICJ4MSIpOwogIHkxID0gSlNfR2V0UHJvcGVydHlTdHIoY3R4LCBsaW5lLCAieTEiKTsKICB4MiA9IEpTX0dldFByb3BlcnR5U3RyKGN0eCwgbGluZSwgIngyIik7CiAgeTIgPSBKU19HZXRQcm9wZXJ0eVN0cihjdHgsIGxpbmUsICJ5MiIpOwoKICBpZihKU19Jc051bWJlcih4MSkgJiYgSlNfSXNOdW1iZXIoeTEpICYmIEpTX0lzTnVtYmVyKHgyKSAmJiBKU19Jc051bWJlcih5MikpIHsKICAgIHJldCAmPSBqc19udW1iZXJfcmVhZChjdHgsIHgxLCAmb3V0WzBdKTsKICAgIHJldCAmPSBqc19udW1iZXJfcmVhZChjdHgsIHkxLCAmb3V0WzFdKTsKICAgIHJldCAmPSBqc19udW1iZXJfcmVhZChjdHgsIHgyLCAmb3V0WzJdKTsKICAgIHJldCAmPSBqc19udW1iZXJfcmVhZChjdHgsIHkyLCAmb3V0WzNdKTsKICB9IGVsc2UgewogICAgcmV0ID0gMDsKICB9CiAgaWYoIUpTX0lzVW5kZWZpbmVkKHgxKSkKICAgIEpTX0ZyZWVWYWx1ZShjdHgsIHgxKTsKICBpZighSlNfSXNVbmRlZmluZWQoeTEpKQogICAgSlNfRnJlZVZhbHVlKGN0eCwgeTEpOwogIGlmKCFKU19Jc1VuZGVmaW5lZCh4MikpCiAgICBKU19GcmVlVmFsdWUoY3R4LCB4Mik7CiAgaWYoIUpTX0lzVW5kZWZpbmVkKHkyKSkKICAgIEpTX0ZyZWVWYWx1ZShjdHgsIHkyKTsKICByZXR1cm4gcmV0Owp9Cgp0ZW1wbGF0ZTxjbGFzcyBUPgpzdGF0aWMgaW5saW5lIGludApqc19saW5lX3JlYWQoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCBsaW5lLCBKU0xpbmVEYXRhPFQ+KiBvdXQpIHsKICByZXR1cm4ganNfbGluZV9yZWFkKGN0eCwgbGluZSwgb3V0LT5hcnJheSk7Cn0KCnRlbXBsYXRlPGNsYXNzIFQ+CnN0YXRpYyBzdGQ6OmFycmF5PFQsIDQ+CmpzX2xpbmVfZ2V0KEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgbGluZSkgewogIHN0ZDo6YXJyYXk8VCwgND4gcnswLCAwLCAwLCAwfTsKICBqc19saW5lX3JlYWQoY3R4LCBsaW5lLCByKTsKICByZXR1cm4gcjsKfQoKdGVtcGxhdGU8Y2xhc3MgVD4Kc3RhdGljIGlubGluZSBKU0xpbmVEYXRhPFQ+CmpzX2xpbmVfZnJvbShUIHgxLCBUIHkxLCBUIHgyLCBUIHkyKSB7CiAgc3RkOjphcnJheTxULCA0PiBhcnJ7eDEsIHkxLCB4MiwgeTJ9OwogIHJldHVybiAqcmVpbnRlcnByZXRfY2FzdDxKU0xpbmVEYXRhPFQ+Kj4oJmFycik7Cn0KCnRlbXBsYXRlPGNsYXNzIFQ+CnN0YXRpYyBpbmxpbmUgSlNMaW5lRGF0YTxUPgpqc19saW5lX2Zyb20oY29uc3QgSlNQb2ludERhdGE8VD4mIGEsIGNvbnN0IEpTUG9pbnREYXRhPFQ+JiBiKSB7CiAgc3RkOjphcnJheTxULCA0PiBhcnJ7YS54LCBhLnksIGIueCwgYi55fTsKICByZXR1cm4gKnJlaW50ZXJwcmV0X2Nhc3Q8SlNMaW5lRGF0YTxUPio+KCZhcnIpOwp9CgpzdGF0aWMgaW5saW5lIGludApqc19saW5lX3dyaXRlKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlIG91dCwgSlNMaW5lVHJhaXRzPGRvdWJsZT46OmFycmF5X3R5cGUgbGluZSkgewogIGludCByZXQgPSAwOwogIHJldCArPSBKU19TZXRQcm9wZXJ0eVN0cihjdHgsIG91dCwgIngxIiwgSlNfTmV3RmxvYXQ2NChjdHgsIGxpbmVbMF0pKTsKICByZXQgKz0gSlNfU2V0UHJvcGVydHlTdHIoY3R4LCBvdXQsICJ5MSIsIEpTX05ld0Zsb2F0NjQoY3R4LCBsaW5lWzFdKSk7CiAgcmV0ICs9IEpTX1NldFByb3BlcnR5U3RyKGN0eCwgb3V0LCAieDIiLCBKU19OZXdGbG9hdDY0KGN0eCwgbGluZVsyXSkpOwogIHJldCArPSBKU19TZXRQcm9wZXJ0eVN0cihjdHgsIG91dCwgInkyIiwgSlNfTmV3RmxvYXQ2NChjdHgsIGxpbmVbM10pKTsKICByZXR1cm4gcmV0Owp9Cgp0ZW1wbGF0ZTxjbGFzcyBUPgpzdGF0aWMgSlNMaW5lRGF0YTxUPgpqc19saW5lX3NldChKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZSBvdXQsIFQgeDEsIFQgeTEsIFQgeDIsIFQgeTIpIHsKICBzdGQ6OmFycmF5PFQsIDQ+IHJ7eDEsIHkxLCB4MiwgeTJ9OwogIGpzX2xpbmVfd3JpdGUoY3R4LCBvdXQsIHIpOwogIHJldHVybiByOwp9CgpleHRlcm4gIkMiIGludCBqc19saW5lX2luaXQoSlNDb250ZXh0KiwgSlNNb2R1bGVEZWYqKTsKCiNlbmRpZiAvKiBkZWZpbmVkKEpTX0xJTkVfSFBQKSAqLwoAAAAAAAAAAAkLAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA+QAAAAAAAAD5AAAAAAAAAAAAAAAAAPC/"
				]
			]
		},
		{
			"file": "js_mat.hpp",
			"settings":
			{
				"buffer_size": 797,
				"line_ending": "Unix"
			},
			"undo_stack":
			[
				[
					5,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"AQAAAEEAAAAAAAAAQgAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAQQAAAAAAAABBAAAAAAAAAAAAAAAAAPC/"
				],
				[
					6,
					1,
					"paste",
					null,
					"AQAAAEIAAAAAAAAAgAAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAQgAAAAAAAABCAAAAAAAAAAAAAAAAAPC/"
				],
				[
					7,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"AQAAAIAAAAAAAAAAgQAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAgAAAAAAAAACAAAAAAAAAAAAAAAAAAPC/"
				],
				[
					8,
					1,
					"left_delete",
					null,
					"AQAAAIAAAAAAAAAAgAAAAAAAAAABAAAACg",
					"AQAAAAAAAAABAAAAgQAAAAAAAACBAAAAAAAAAAAAAAAAAPC/"
				],
				[
					9,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAAAdAwAAI2lmbmRlZiBKU19NQVRfSFBQCiNkZWZpbmUgSlNfTUFUX0hQUAoKI2luY2x1ZGUgImpzYmluZGluZ3MuaHBwIgoKZXh0ZXJuICJDIiBWSVNJQkxFIGludCBqc19tYXRfaW5pdChKU0NvbnRleHQqLCBKU01vZHVsZURlZiopOwoKZXh0ZXJuICJDIiB7CmV4dGVybiBKU1ZhbHVlIG1hdF9wcm90bywgbWF0X2NsYXNzOwpleHRlcm4gSlNDbGFzc0lEIGpzX21hdF9jbGFzc19pZDsKClZJU0lCTEUgSlNWYWx1ZSBqc19tYXRfbmV3KEpTQ29udGV4dCosIHVpbnQzMl90LCB1aW50MzJfdCwgaW50KTsKaW50IGpzX21hdF9pbml0KEpTQ29udGV4dCosIEpTTW9kdWxlRGVmKik7CkpTTW9kdWxlRGVmKiBqc19pbml0X21hdF9tb2R1bGUoSlNDb250ZXh0KiBjdHgsIGNvbnN0IGNoYXIqIG1vZHVsZV9uYW1lKTsKdm9pZCBqc19tYXRfY29uc3RydWN0b3IoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWUgcGFyZW50LCBjb25zdCBjaGFyKiBuYW1lKTsKCmlubGluZSBWSVNJQkxFIEpTTWF0RGF0YSoKanNfbWF0X2RhdGEoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB2YWwpIHsKICByZXR1cm4gc3RhdGljX2Nhc3Q8SlNNYXREYXRhKj4oSlNfR2V0T3BhcXVlMihjdHgsIHZhbCwganNfbWF0X2NsYXNzX2lkKSk7Cn0KCnN0YXRpYyBpbmxpbmUgSlNNYXREYXRhKgpqc19tYXRfZGF0YV9ub3Rocm93KEpTVmFsdWVDb25zdCB2YWwpIHsKICByZXR1cm4gc3RhdGljX2Nhc3Q8SlNNYXREYXRhKj4oSlNfR2V0T3BhcXVlKHZhbCwganNfbWF0X2NsYXNzX2lkKSk7Cn0KfQoKI2VuZGlmIC8qIGRlZmluZWQoSlNfTUFUX0hQUCkgKi8AAAAAAAAAAB0DAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAgAAAAAAAAACAAAAAAAAAAAAAAAAAAPC/"
				]
			]
		},
		{
			"file": "js_point.hpp",
			"settings":
			{
				"buffer_size": 2521,
				"line_ending": "Unix"
			},
			"undo_stack":
			[
				[
					3,
					1,
					"paste",
					null,
					"AQAAAEUAAAAAAAAAhQAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAARQAAAAAAAABFAAAAAAAAAAAAAAAAAPC/"
				],
				[
					5,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"AQAAAEUAAAAAAAAARgAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAARQAAAAAAAABFAAAAAAAAAAAAAAAAAAAA"
				],
				[
					6,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAADZCQAAI2lmbmRlZiBKU19QT0lOVF9IUFAKI2RlZmluZSBKU19QT0lOVF9IUFAKCiNpbmNsdWRlICJqc2JpbmRpbmdzLmhwcCIKCmV4dGVybiAiQyIgVklTSUJMRSBpbnQganNfcG9pbnRfaW5pdChKU0NvbnRleHQqLCBKU01vZHVsZURlZiopOwoKZXh0ZXJuICJDIiBKU1ZhbHVlIGpzX3BvaW50X2Nsb25lKEpTQ29udGV4dCogY3R4LCBjb25zdCBKU1BvaW50RGF0YTxkb3VibGU+JiBwb2ludCk7CmV4dGVybiAiQyIgewoKZXh0ZXJuIEpTVmFsdWUgcG9pbnRfcHJvdG8sIHBvaW50X2NsYXNzOwpleHRlcm4gSlNDbGFzc0lEIGpzX3BvaW50X2NsYXNzX2lkOwoKVklTSUJMRSBKU1ZhbHVlIGpzX3BvaW50X25ldyhKU0NvbnRleHQqLCBkb3VibGUgeCwgZG91YmxlIHkpOwpWSVNJQkxFIEpTVmFsdWUganNfcG9pbnRfd3JhcChKU0NvbnRleHQqLCBjb25zdCBKU1BvaW50RGF0YTxkb3VibGU+Jik7ClZJU0lCTEUgSlNQb2ludERhdGE8ZG91YmxlPioganNfcG9pbnRfZGF0YShKU0NvbnRleHQqLCBKU1ZhbHVlQ29uc3QgdmFsKTsKCmludCBqc19wb2ludF9pbml0KEpTQ29udGV4dCosIEpTTW9kdWxlRGVmKiBtKTsKdm9pZCBqc19wb2ludF9jb25zdHJ1Y3RvcihKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZSBwYXJlbnQsIGNvbnN0IGNoYXIqIG5hbWUpOwoKSlNNb2R1bGVEZWYqIGpzX2luaXRfcG9pbnRfbW9kdWxlKEpTQ29udGV4dCosIGNvbnN0IGNoYXIqIG1vZHVsZV9uYW1lKTsKfQoKdGVtcGxhdGU8Y2xhc3MgVD4Kc3RhdGljIGlubGluZSBpbnQKanNfcG9pbnRfcmVhZChKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHBvaW50LCBKU1BvaW50RGF0YTxUPiogb3V0KSB7CiAgaW50IHJldCA9IDE7CiAgSlNWYWx1ZSB4ID0gSlNfVU5ERUZJTkVELCB5ID0gSlNfVU5ERUZJTkVEOwogIGlmKGpzX2lzX2FycmF5X2xpa2UoY3R4LCBwb2ludCkpIHsKICAgIHggPSBKU19HZXRQcm9wZXJ0eVVpbnQzMihjdHgsIHBvaW50LCAwKTsKICAgIHkgPSBKU19HZXRQcm9wZXJ0eVVpbnQzMihjdHgsIHBvaW50LCAxKTsKICB9IGVsc2UgaWYoSlNfSXNPYmplY3QocG9pbnQpKSB7CiAgICB4ID0gSlNfR2V0UHJvcGVydHlTdHIoY3R4LCBwb2ludCwgIngiKTsKICAgIHkgPSBKU19HZXRQcm9wZXJ0eVN0cihjdHgsIHBvaW50LCAieSIpOwogIH0KICBpZihKU19Jc051bWJlcih4KSAmJiBKU19Jc051bWJlcih5KSkgewogICAgcmV0ICY9IGpzX251bWJlcl9yZWFkKGN0eCwgeCwgJm91dC0+eCk7CiAgICByZXQgJj0ganNfbnVtYmVyX3JlYWQoY3R4LCB5LCAmb3V0LT55KTsKICB9IGVsc2UgewogICAgcmV0ID0gMDsKICB9CiAgaWYoIUpTX0lzVW5kZWZpbmVkKHgpKQogICAgSlNfRnJlZVZhbHVlKGN0eCwgeCk7CiAgaWYoIUpTX0lzVW5kZWZpbmVkKHkpKQogICAgSlNfRnJlZVZhbHVlKGN0eCwgeSk7CiAgcmV0dXJuIHJldDsKfQoKdGVtcGxhdGU8Y2xhc3MgVD4Kc3RhdGljIGlubGluZSB2b2lkCmpzX3BvaW50X3dyaXRlKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3Qgb3V0LCBjb25zdCBKU1BvaW50RGF0YTxUPiYgaW4pIHsKICBKU1ZhbHVlIHggPSBqc19udW1iZXJfbmV3PFQ+KGN0eCwgaW4ueCk7CiAgSlNWYWx1ZSB5ID0ganNfbnVtYmVyX25ldzxUPihjdHgsIGluLnkpOwoKICBpZihqc19pc19hcnJheV9saWtlKGN0eCwgb3V0KSkgewogICAgSlNfU2V0UHJvcGVydHlVaW50MzIoY3R4LCBvdXQsIDAsIHgpOwogICAgSlNfU2V0UHJvcGVydHlVaW50MzIoY3R4LCBvdXQsIDEsIHkpOwoKICB9IGVsc2UgaWYoSlNfSXNPYmplY3Qob3V0KSkgewogICAgSlNfU2V0UHJvcGVydHlTdHIoY3R4LCBvdXQsICJ4IiwgeCk7CiAgICBKU19TZXRQcm9wZXJ0eVN0cihjdHgsIG91dCwgInkiLCB5KTsKICB9IGVsc2UgaWYoSlNfSXNGdW5jdGlvbihjdHgsIG91dCkpIHsKICAgIEpTVmFsdWVDb25zdCBhcmdzWzJdOwogICAgYXJnc1swXSA9IHg7CiAgICBhcmdzWzFdID0geTsKICAgIEpTX0NhbGwoY3R4LCBvdXQsIEpTX1VOREVGSU5FRCwgMiwgYXJncyk7CiAgfQogIEpTX0ZyZWVWYWx1ZShjdHgsIHgpOwogIEpTX0ZyZWVWYWx1ZShjdHgsIHkpOwp9CgpzdGF0aWMgaW5saW5lIEpTUG9pbnREYXRhPGRvdWJsZT4KanNfcG9pbnRfZ2V0KEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgcG9pbnQpIHsKICBKU1BvaW50RGF0YTxkb3VibGU+IHI7CiAganNfcG9pbnRfcmVhZChjdHgsIHBvaW50LCAmcik7CiAgcmV0dXJuIHI7Cn0KCnN0YXRpYyBpbmxpbmUgYm9vbApqc19pc19wb2ludChKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHBvaW50KSB7CiAgSlNQb2ludERhdGE8ZG91YmxlPiByOwoKICBpZihqc19wb2ludF9kYXRhKGN0eCwgcG9pbnQpKQogICAgcmV0dXJuIHRydWU7CgogIGlmKGpzX3BvaW50X3JlYWQoY3R4LCBwb2ludCwgJnIpKQogICAgcmV0dXJuIHRydWU7CgogIHJldHVybiBmYWxzZTsKfQoKZXh0ZXJuICJDIiBpbnQganNfcG9pbnRfaW5pdChKU0NvbnRleHQqLCBKU01vZHVsZURlZiopOwoKI2VuZGlmIC8qIGRlZmluZWQoSlNfUE9JTlRfSFBQKSAqLwAAAAAAAAAA2QkAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAARgAAAAAAAABGAAAAAAAAAAAAAAAAAPC/"
				]
			]
		},
		{
			"file": "js_point_iterator.hpp",
			"settings":
			{
				"buffer_size": 791,
				"line_ending": "Unix"
			},
			"undo_stack":
			[
				[
					3,
					1,
					"paste",
					null,
					"AQAAAGkAAAAAAAAAsgAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAaQAAAAAAAABpAAAAAAAAAAAAAAAAAPC/"
				],
				[
					5,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"AQAAAGkAAAAAAAAAagAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAaQAAAAAAAABpAAAAAAAAAAAAAAAAAAAA"
				],
				[
					6,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAAAXAwAAI2lmbmRlZiBKU19QT0lOVF9JVEVSQVRPUl9IUFAKI2RlZmluZSBKU19QT0lOVF9JVEVSQVRPUl9IUFAKCiNpbmNsdWRlICJqc2JpbmRpbmdzLmhwcCIKI2luY2x1ZGUgPHJhbmdlcz4KCmV4dGVybiAiQyIgVklTSUJMRSBpbnQganNfcG9pbnRfaXRlcmF0b3JfaW5pdChKU0NvbnRleHQqLCBKU01vZHVsZURlZiopOwoKZXh0ZXJuICJDIiB7CmVudW0gSlNQb2ludEl0ZXJhdG9yTWFnaWMgeyBORVhUX1BPSU5UID0gMCwgTkVYVF9MSU5FIH07CgpleHRlcm4gSlNWYWx1ZSBwb2ludF9pdGVyYXRvcl9wcm90bywgcG9pbnRfaXRlcmF0b3JfY2xhc3M7CmV4dGVybiBKU0NsYXNzSUQganNfcG9pbnRfaXRlcmF0b3JfY2xhc3NfaWQ7CgpWSVNJQkxFIEpTVmFsdWUganNfcG9pbnRfaXRlcmF0b3JfbmV3KEpTQ29udGV4dCogY3R4LCBjb25zdCBzdGQ6OnJhbmdlczo6c3VicmFuZ2U8SlNQb2ludERhdGE8ZG91YmxlPio+JiByYW5nZSwgaW50IG1hZ2ljKTsKCmludCBqc19wb2ludF9pdGVyYXRvcl9pbml0KEpTQ29udGV4dCosIEpTTW9kdWxlRGVmKiBtKTsKCkpTTW9kdWxlRGVmKiBqc19pbml0X21vZHVsZV9wb2ludF9pdGVyYXRvcihKU0NvbnRleHQqLCBjb25zdCBjaGFyKiBtb2R1bGVfbmFtZSk7Cn0KCnN0cnVjdCBKU1BvaW50SXRlcmF0b3JEYXRhIDogcHVibGljIHN0ZDo6cGFpcjxKU1BvaW50RGF0YTxkb3VibGU+KiwgSlNQb2ludERhdGE8ZG91YmxlPio+IHsKICBKU1BvaW50SXRlcmF0b3JNYWdpYyBtYWdpYzsKfTsKCiNlbmRpZiAvKiBkZWZpbmVkKEpTX1BPSU5UX0lURVJBVE9SX0hQUCkgKi8AAAAAAAAAABcDAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAagAAAAAAAABqAAAAAAAAAAAAAAAAAPC/"
				]
			]
		},
		{
			"file": "js_rect.hpp",
			"settings":
			{
				"buffer_size": 2550,
				"line_ending": "Unix"
			},
			"undo_stack":
			[
				[
					3,
					1,
					"paste",
					null,
					"AQAAAEMAAAAAAAAAggAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAQwAAAAAAAABDAAAAAAAAAAAAAAAAAPC/"
				],
				[
					5,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"AQAAAEMAAAAAAAAARAAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAQwAAAAAAAABDAAAAAAAAAAAAAAAAAAAA"
				],
				[
					6,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAAD2CQAAI2lmbmRlZiBKU19SRUNUX0hQUAojZGVmaW5lIEpTX1JFQ1RfSFBQCgojaW5jbHVkZSAianNiaW5kaW5ncy5ocHAiCgpleHRlcm4gIkMiIFZJU0lCTEUgaW50IGpzX3JlY3RfaW5pdChKU0NvbnRleHQqLCBKU01vZHVsZURlZiopOwoKZXh0ZXJuICJDIiB7CmV4dGVybiBKU1ZhbHVlIHJlY3RfcHJvdG8sIHJlY3RfY2xhc3M7CmV4dGVybiBKU0NsYXNzSUQganNfcmVjdF9jbGFzc19pZDsKClZJU0lCTEUgSlNSZWN0RGF0YTxkb3VibGU+KiBqc19yZWN0X2RhdGEoSlNDb250ZXh0KiwgSlNWYWx1ZUNvbnN0IHZhbCk7ClZJU0lCTEUgSlNWYWx1ZSBqc19yZWN0X3dyYXAoSlNDb250ZXh0KiwgY29uc3QgSlNSZWN0RGF0YTxkb3VibGU+Jik7CmludCBqc19yZWN0X2luaXQoSlNDb250ZXh0KiwgSlNNb2R1bGVEZWYqKTsKSlNNb2R1bGVEZWYqIGpzX2luaXRfcmVjdF9tb2R1bGUoSlNDb250ZXh0KiwgY29uc3QgY2hhciogbW9kdWxlX25hbWUpOwoKdm9pZCBqc19yZWN0X2NvbnN0cnVjdG9yKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlIHBhcmVudCwgY29uc3QgY2hhciogbmFtZSk7Cn0KCnRlbXBsYXRlPGNsYXNzIFQ+CnN0YXRpYyBpbmxpbmUgaW50CmpzX3JlY3RfcmVhZChKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHJlY3QsIEpTUmVjdERhdGE8VD4qIG91dCkgewogIGludCByZXQgPSAxOwogIEpTVmFsdWUgeCA9IEpTX1VOREVGSU5FRCwgeSA9IEpTX1VOREVGSU5FRCwgdyA9IEpTX1VOREVGSU5FRCwgaCA9IEpTX1VOREVGSU5FRDsKICBpZihqc19pc19hcnJheV9saWtlKGN0eCwgcmVjdCkpIHsKICAgIHggPSBKU19HZXRQcm9wZXJ0eVVpbnQzMihjdHgsIHJlY3QsIDApOwogICAgeSA9IEpTX0dldFByb3BlcnR5VWludDMyKGN0eCwgcmVjdCwgMSk7CiAgICB3ID0gSlNfR2V0UHJvcGVydHlVaW50MzIoY3R4LCByZWN0LCAyKTsKICAgIGggPSBKU19HZXRQcm9wZXJ0eVVpbnQzMihjdHgsIHJlY3QsIDMpOwoKICB9IGVsc2UgewogICAgeCA9IEpTX0dldFByb3BlcnR5U3RyKGN0eCwgcmVjdCwgIngiKTsKICAgIHkgPSBKU19HZXRQcm9wZXJ0eVN0cihjdHgsIHJlY3QsICJ5Iik7CiAgICB3ID0gSlNfR2V0UHJvcGVydHlTdHIoY3R4LCByZWN0LCAid2lkdGgiKTsKICAgIGggPSBKU19HZXRQcm9wZXJ0eVN0cihjdHgsIHJlY3QsICJoZWlnaHQiKTsKICB9CiAgaWYoSlNfSXNOdW1iZXIoeCkgJiYgSlNfSXNOdW1iZXIoeSkgJiYgSlNfSXNOdW1iZXIodykgJiYgSlNfSXNOdW1iZXIoaCkpIHsKICAgIHJldCAmPSBqc19udW1iZXJfcmVhZChjdHgsIHgsICZvdXQtPngpOwogICAgcmV0ICY9IGpzX251bWJlcl9yZWFkKGN0eCwgeSwgJm91dC0+eSk7CiAgICByZXQgJj0ganNfbnVtYmVyX3JlYWQoY3R4LCB3LCAmb3V0LT53aWR0aCk7CiAgICByZXQgJj0ganNfbnVtYmVyX3JlYWQoY3R4LCBoLCAmb3V0LT5oZWlnaHQpOwogIH0gZWxzZSB7CiAgICByZXQgPSAwOwogIH0KICBpZighSlNfSXNVbmRlZmluZWQoeCkpCiAgICBKU19GcmVlVmFsdWUoY3R4LCB4KTsKICBpZighSlNfSXNVbmRlZmluZWQoeSkpCiAgICBKU19GcmVlVmFsdWUoY3R4LCB5KTsKICBpZighSlNfSXNVbmRlZmluZWQodykpCiAgICBKU19GcmVlVmFsdWUoY3R4LCB3KTsKICBpZighSlNfSXNVbmRlZmluZWQoaCkpCiAgICBKU19GcmVlVmFsdWUoY3R4LCBoKTsKICByZXR1cm4gcmV0Owp9CgpzdGF0aWMgSlNSZWN0RGF0YTxkb3VibGU+CmpzX3JlY3RfZ2V0KEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgcmVjdCkgewogIEpTUmVjdERhdGE8ZG91YmxlPiByID0gezAsIDAsIDAsIDB9OwogIGpzX3JlY3RfcmVhZChjdHgsIHJlY3QsICZyKTsKICByZXR1cm4gcjsKfQoKc3RhdGljIGlubGluZSBpbnQKanNfcmVjdF93cml0ZShKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZSBvdXQsIEpTUmVjdERhdGE8ZG91YmxlPiByZWN0KSB7CiAgaW50IHJldCA9IDA7CiAgcmV0ICs9IEpTX1NldFByb3BlcnR5U3RyKGN0eCwgb3V0LCAieCIsIEpTX05ld0Zsb2F0NjQoY3R4LCByZWN0LngpKTsKICByZXQgKz0gSlNfU2V0UHJvcGVydHlTdHIoY3R4LCBvdXQsICJ5IiwgSlNfTmV3RmxvYXQ2NChjdHgsIHJlY3QueSkpOwogIHJldCArPSBKU19TZXRQcm9wZXJ0eVN0cihjdHgsIG91dCwgIndpZHRoIiwgSlNfTmV3RmxvYXQ2NChjdHgsIHJlY3Qud2lkdGgpKTsKICByZXQgKz0gSlNfU2V0UHJvcGVydHlTdHIoY3R4LCBvdXQsICJoZWlnaHQiLCBKU19OZXdGbG9hdDY0KGN0eCwgcmVjdC5oZWlnaHQpKTsKICByZXR1cm4gcmV0Owp9CgpzdGF0aWMgSlNSZWN0RGF0YTxkb3VibGU+CmpzX3JlY3Rfc2V0KEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlIG91dCwgZG91YmxlIHgsIGRvdWJsZSB5LCBkb3VibGUgdywgZG91YmxlIGgpIHsKICBjb25zdCBKU1JlY3REYXRhPGRvdWJsZT4gciA9IHt4LCB5LCB3LCBofTsKICBqc19yZWN0X3dyaXRlKGN0eCwgb3V0LCByKTsKICByZXR1cm4gcjsKfQoKZXh0ZXJuICJDIiBpbnQganNfcmVjdF9pbml0KEpTQ29udGV4dCosIEpTTW9kdWxlRGVmKik7CgojZW5kaWYgLyogZGVmaW5lZChKU19SRUNUX0hQUCkgKi8KAAAAAAAAAAD2CQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAARAAAAAAAAABEAAAAAAAAAAAAAAAAAPC/"
				]
			]
		},
		{
			"file": "js_size.hpp",
			"settings":
			{
				"buffer_size": 2335,
				"line_ending": "Unix"
			},
			"undo_stack":
			[
				[
					3,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"AQAAAEIAAAAAAAAAQwAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAQgAAAAAAAABCAAAAAAAAAAAAAAAAAPC/"
				],
				[
					4,
					1,
					"paste",
					null,
					"AQAAAEMAAAAAAAAAggAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAQwAAAAAAAABDAAAAAAAAAAAAAAAAAPC/"
				],
				[
					6,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"AQAAAEMAAAAAAAAARAAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAQwAAAAAAAABDAAAAAAAAAAAAAAAAAAAA"
				],
				[
					7,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAAAfCQAAI2lmbmRlZiBKU19TSVpFX0hQUAojZGVmaW5lIEpTX1NJWkVfSFBQCgojaW5jbHVkZSAianNiaW5kaW5ncy5ocHAiCgpleHRlcm4gIkMiIFZJU0lCTEUgaW50IGpzX3NpemVfaW5pdChKU0NvbnRleHQqLCBKU01vZHVsZURlZiopOwoKZXh0ZXJuICJDIiB7CmV4dGVybiBKU1ZhbHVlIHNpemVfcHJvdG8sIHNpemVfY2xhc3M7CmV4dGVybiBKU0NsYXNzSUQganNfc2l6ZV9jbGFzc19pZDsKClZJU0lCTEUgSlNWYWx1ZSBqc19zaXplX25ldyhKU0NvbnRleHQqIGN0eCwgZG91YmxlIHcsIGRvdWJsZSBoKTsKVklTSUJMRSBKU1ZhbHVlIGpzX3NpemVfd3JhcChKU0NvbnRleHQqIGN0eCwgY29uc3QgSlNTaXplRGF0YTxkb3VibGU+JiBzaXplKTsKVklTSUJMRSBKU1NpemVEYXRhPGRvdWJsZT4qIGpzX3NpemVfZGF0YShKU0NvbnRleHQqLCBKU1ZhbHVlQ29uc3QgdmFsKTsKCmludCBqc19zaXplX2luaXQoSlNDb250ZXh0KiwgSlNNb2R1bGVEZWYqIG0pOwpKU01vZHVsZURlZioganNfaW5pdF9zaXplX21vZHVsZShKU0NvbnRleHQqLCBjb25zdCBjaGFyKiBtb2R1bGVfbmFtZSk7CnZvaWQganNfc2l6ZV9jb25zdHJ1Y3RvcihKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZSBwYXJlbnQsIGNvbnN0IGNoYXIqIG5hbWUpOwp9Cgp0ZW1wbGF0ZTxjbGFzcyBUPgpzdGF0aWMgaW5saW5lIGludApqc19zaXplX3JlYWQoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCBzaXplLCBKU1NpemVEYXRhPFQ+KiBvdXQpIHsKICBpbnQgcmV0ID0gMTsKICBKU1ZhbHVlIHdpZHRoID0gSlNfVU5ERUZJTkVELCBoZWlnaHQgPSBKU19VTkRFRklORUQ7CgogIGlmKGpzX2lzX2FycmF5X2xpa2UoY3R4LCBzaXplKSkgewogICAgd2lkdGggPSBKU19HZXRQcm9wZXJ0eVVpbnQzMihjdHgsIHNpemUsIDApOwogICAgaGVpZ2h0ID0gSlNfR2V0UHJvcGVydHlVaW50MzIoY3R4LCBzaXplLCAxKTsKICB9IGVsc2UgaWYoSlNfSXNPYmplY3Qoc2l6ZSkpIHsKICAgIHdpZHRoID0gSlNfR2V0UHJvcGVydHlTdHIoY3R4LCBzaXplLCAid2lkdGgiKTsKICAgIGhlaWdodCA9IEpTX0dldFByb3BlcnR5U3RyKGN0eCwgc2l6ZSwgImhlaWdodCIpOwogIH0KICBpZihKU19Jc051bWJlcih3aWR0aCkgJiYgSlNfSXNOdW1iZXIoaGVpZ2h0KSkgewogICAgcmV0ICY9IGpzX251bWJlcl9yZWFkKGN0eCwgd2lkdGgsICZvdXQtPndpZHRoKTsKICAgIHJldCAmPSBqc19udW1iZXJfcmVhZChjdHgsIGhlaWdodCwgJm91dC0+aGVpZ2h0KTsKICB9IGVsc2UgewogICAgcmV0ID0gMDsKICB9CiAgaWYoIUpTX0lzVW5kZWZpbmVkKHdpZHRoKSkKICAgIEpTX0ZyZWVWYWx1ZShjdHgsIHdpZHRoKTsKICBpZighSlNfSXNVbmRlZmluZWQoaGVpZ2h0KSkKICAgIEpTX0ZyZWVWYWx1ZShjdHgsIGhlaWdodCk7CiAgcmV0dXJuIHJldDsKfQoKdGVtcGxhdGU8Y2xhc3MgVD4Kc3RhdGljIGlubGluZSB2b2lkCmpzX3NpemVfd3JpdGUoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCBvdXQsIGNvbnN0IEpTU2l6ZURhdGE8VD4mIGluKSB7CiAgSlNWYWx1ZSB3aWR0aCA9IGpzX251bWJlcl9uZXc8VD4oY3R4LCBpbi53aWR0aCk7CiAgSlNWYWx1ZSBoZWlnaHQgPSBqc19udW1iZXJfbmV3PFQ+KGN0eCwgaW4uaGVpZ2h0KTsKICBpZihKU19Jc0FycmF5KGN0eCwgb3V0KSkgewogICAgSlNfU2V0UHJvcGVydHlVaW50MzIoY3R4LCBvdXQsIDAsIHdpZHRoKTsKICAgIEpTX1NldFByb3BlcnR5VWludDMyKGN0eCwgb3V0LCAxLCBoZWlnaHQpOwoKICB9IGVsc2UgaWYoSlNfSXNPYmplY3Qob3V0KSkgewogICAgSlNfU2V0UHJvcGVydHlTdHIoY3R4LCBvdXQsICJ4Iiwgd2lkdGgpOwogICAgSlNfU2V0UHJvcGVydHlTdHIoY3R4LCBvdXQsICJ5IiwgaGVpZ2h0KTsKICB9IGVsc2UgaWYoSlNfSXNGdW5jdGlvbihjdHgsIG91dCkpIHsKICAgIEpTVmFsdWVDb25zdCBhcmdzWzJdOwogICAgYXJnc1swXSA9IHdpZHRoOwogICAgYXJnc1sxXSA9IGhlaWdodDsKICAgIEpTX0NhbGwoY3R4LCBvdXQsIEpTX1VOREVGSU5FRCwgMiwgYXJncyk7CiAgfQogIEpTX0ZyZWVWYWx1ZShjdHgsIHdpZHRoKTsKICBKU19GcmVlVmFsdWUoY3R4LCBoZWlnaHQpOwp9CgpzdGF0aWMgaW5saW5lIEpTU2l6ZURhdGE8ZG91YmxlPgpqc19zaXplX2dldChKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHNpemUpIHsKICBKU1NpemVEYXRhPGRvdWJsZT4gciA9IHswLCAwfTsKICBqc19zaXplX3JlYWQoY3R4LCBzaXplLCAmcik7CiAgcmV0dXJuIHI7Cn0KCmV4dGVybiAiQyIgaW50IGpzX3NpemVfaW5pdChKU0NvbnRleHQqLCBKU01vZHVsZURlZiopOwoKI2VuZGlmIC8qIGRlZmluZWQoSlNfU0laRV9IUFApICovCgAAAAAAAAAAHwkAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAARAAAAAAAAABEAAAAAAAAAAAAAAAAAPC/"
				]
			]
		},
		{
			"file": "js_size.cpp",
			"settings":
			{
				"buffer_size": 14728,
				"encoding": "UTF-8",
				"line_ending": "Unix"
			},
			"undo_stack":
			[
				[
					3,
					1,
					"cut",
					null,
					"AQAAAFM5AAAAAAAAUzkAAAAAAABMAAAACmV4dGVybiAiQyIgVklTSUJMRSB2b2lkIGpzX3NpemVfZXhwb3J0KEpTQ29udGV4dCogY3R4LCBKU01vZHVsZURlZiogbSkgewp9Cg",
					"AQAAAAAAAAABAAAAUzkAAAAAAACfOQAAAAAAAAAAAAAAAPC/"
				],
				[
					6,
					1,
					"paste",
					null,
					"AQAAAA43AAAAAAAAWjcAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAADjcAAAAAAAAONwAAAAAAAAAAAAAAAPC/"
				],
				[
					12,
					1,
					"cut",
					null,
					"AQAAAGw5AAAAAAAAbDkAAAAAAAAmAAAAICBKU19BZGRNb2R1bGVFeHBvcnQoY3R4LCBtLCAiU2l6ZSIpOwo",
					"AQAAAAAAAAABAAAAbDkAAAAAAACSOQAAAAAAAAAAAAAAAPC/"
				],
				[
					15,
					1,
					"paste",
					null,
					"AQAAAFg3AAAAAAAAfjcAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAWDcAAAAAAABYNwAAAAAAAAAAAAAAAPC/"
				],
				[
					18,
					1,
					"insert",
					{
						"characters": "\nks_"
					},
					"BwAAAJE5AAAAAAAAkjkAAAAAAAAAAAAAkjkAAAAAAACWOQAAAAAAAAAAAACSOQAAAAAAAJI5AAAAAAAABAAAACAgICCSOQAAAAAAAJQ5AAAAAAAAAAAAAJQ5AAAAAAAAlTkAAAAAAAAAAAAAlTkAAAAAAACWOQAAAAAAAAAAAACWOQAAAAAAAJc5AAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAkTkAAAAAAACROQAAAAAAAAAAAAAAAPC/"
				],
				[
					19,
					3,
					"left_delete",
					null,
					"AwAAAJY5AAAAAAAAljkAAAAAAAABAAAAX5U5AAAAAAAAlTkAAAAAAAABAAAAc5Q5AAAAAAAAlDkAAAAAAAABAAAAaw",
					"AQAAAAAAAAABAAAAlzkAAAAAAACXOQAAAAAAAAAAAAAAAPC/"
				],
				[
					20,
					1,
					"insert",
					{
						"characters": "ks"
					},
					"AgAAAJQ5AAAAAAAAlTkAAAAAAAAAAAAAlTkAAAAAAACWOQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAlDkAAAAAAACUOQAAAAAAAAAAAAAAAPC/"
				],
				[
					21,
					2,
					"left_delete",
					null,
					"AgAAAJU5AAAAAAAAlTkAAAAAAAABAAAAc5Q5AAAAAAAAlDkAAAAAAAABAAAAaw",
					"AQAAAAAAAAABAAAAljkAAAAAAACWOQAAAAAAAAAAAAAAAPC/"
				],
				[
					22,
					1,
					"insert",
					{
						"characters": "ks"
					},
					"AgAAAJQ5AAAAAAAAlTkAAAAAAAAAAAAAlTkAAAAAAACWOQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAlDkAAAAAAACUOQAAAAAAAAAAAAAAAPC/"
				],
				[
					23,
					2,
					"left_delete",
					null,
					"AgAAAJU5AAAAAAAAlTkAAAAAAAABAAAAc5Q5AAAAAAAAlDkAAAAAAAABAAAAaw",
					"AQAAAAAAAAABAAAAljkAAAAAAACWOQAAAAAAAAAAAAAAAPC/"
				],
				[
					24,
					1,
					"insert",
					{
						"characters": "js_size_export"
					},
					"DgAAAJQ5AAAAAAAAlTkAAAAAAAAAAAAAlTkAAAAAAACWOQAAAAAAAAAAAACWOQAAAAAAAJc5AAAAAAAAAAAAAJc5AAAAAAAAmDkAAAAAAAAAAAAAmDkAAAAAAACZOQAAAAAAAAAAAACZOQAAAAAAAJo5AAAAAAAAAAAAAJo5AAAAAAAAmzkAAAAAAAAAAAAAmzkAAAAAAACcOQAAAAAAAAAAAACcOQAAAAAAAJ05AAAAAAAAAAAAAJ05AAAAAAAAnjkAAAAAAAAAAAAAnjkAAAAAAACfOQAAAAAAAAAAAACfOQAAAAAAAKA5AAAAAAAAAAAAAKA5AAAAAAAAoTkAAAAAAAAAAAAAoTkAAAAAAACiOQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAlDkAAAAAAACUOQAAAAAAAAAAAAAAAPC/"
				],
				[
					25,
					1,
					"insert_snippet",
					{
						"contents": "($0)"
					},
					"AQAAAKI5AAAAAAAApDkAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAojkAAAAAAACiOQAAAAAAAAAAAAAAAPC/"
				],
				[
					26,
					1,
					"insert",
					{
						"characters": "ctx,m9"
					},
					"BgAAAKM5AAAAAAAApDkAAAAAAAAAAAAApDkAAAAAAAClOQAAAAAAAAAAAAClOQAAAAAAAKY5AAAAAAAAAAAAAKY5AAAAAAAApzkAAAAAAAAAAAAApzkAAAAAAACoOQAAAAAAAAAAAACoOQAAAAAAAKk5AAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAozkAAAAAAACjOQAAAAAAAAAAAAAAAPC/"
				],
				[
					27,
					1,
					"left_delete",
					null,
					"AQAAAKg5AAAAAAAAqDkAAAAAAAABAAAAOQ",
					"AQAAAAAAAAABAAAAqTkAAAAAAACpOQAAAAAAAAAAAAAAAPC/"
				],
				[
					29,
					1,
					"insert",
					{
						"characters": ";"
					},
					"AQAAAKk5AAAAAAAAqjkAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAqTkAAAAAAACpOQAAAAAAAAAAAAAAAPC/"
				],
				[
					30,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAAC5OQAAI2luY2x1ZGUgImpzYmluZGluZ3MuaHBwIgojaW5jbHVkZSAianNfc2l6ZS5ocHAiCiNpbmNsdWRlICJqc19hcnJheS5ocHAiCiNpbmNsdWRlICJqc19hbGxvYy5ocHAiCiNpbmNsdWRlICJ1dGlsLmhwcCIKCmVudW0ganNfc2l6ZV9maXRfdCB7IEpTX1NJWkVfRklUX1dJRFRIID0gMSwgSlNfU0laRV9GSVRfSEVJR0hUID0gMiwgSlNfU0laRV9GSVRfSU5TSURFLCBKU19TSVpFX0ZJVF9PVVRTSURFIH07CgpleHRlcm4gIkMiIHsKSlNWYWx1ZSBzaXplX3Byb3RvID0gSlNfVU5ERUZJTkVELCBzaXplX2NsYXNzID0gSlNfVU5ERUZJTkVEOwpKU0NsYXNzSUQganNfc2l6ZV9jbGFzc19pZCA9IDA7Cn0KCnRlbXBsYXRlPGNsYXNzIFQ+CnN0YXRpYyBpbmxpbmUgSlNTaXplRGF0YTxUPgpqc19zaXplX2ZpdChjb25zdCBKU1NpemVEYXRhPFQ+JiBzaXplLCBUIHRvLCBqc19zaXplX2ZpdF90IG1vZGUpIHsKICBKU1NpemVEYXRhPFQ+IHJldDsKICBzd2l0Y2gobW9kZSkgewogICAgY2FzZSBKU19TSVpFX0ZJVF9XSURUSDogewogICAgICByZXQud2lkdGggPSB0bzsKICAgICAgcmV0LmhlaWdodCA9IHNpemUuaGVpZ2h0ICogKHRvIC8gc2l6ZS53aWR0aCk7CiAgICAgIGJyZWFrOwogICAgfQogICAgY2FzZSBKU19TSVpFX0ZJVF9IRUlHSFQ6IHsKICAgICAgcmV0LndpZHRoID0gc2l6ZS53aWR0aCAqICh0byAvIHNpemUuaGVpZ2h0KTsKICAgICAgcmV0LmhlaWdodCA9IHRvOwogICAgICBicmVhazsKICAgIH0KICB9CiAgcmV0dXJuIHJldDsKfQoKdGVtcGxhdGU8Y2xhc3MgVD4Kc3RhdGljIEpTU2l6ZURhdGE8VD4KanNfc2l6ZV9maXQoY29uc3QgSlNTaXplRGF0YTxUPiYgc2l6ZSwgY29uc3QgSlNTaXplRGF0YTxUPiYgdG8sIGpzX3NpemVfZml0X3QgbW9kZSkgewogIEpTU2l6ZURhdGE8VD4gcmV0OwogIHN3aXRjaChtb2RlKSB7CiAgICBjYXNlIEpTX1NJWkVfRklUX0lOU0lERToKICAgIGNhc2UgSlNfU0laRV9GSVRfT1VUU0lERTogewogICAgICByZXQgPSBqc19zaXplX2ZpdChzaXplLCB0bywgSlNfU0laRV9GSVRfV0lEVEgpOwogICAgICBpZihtb2RlID09IEpTX1NJWkVfRklUX0lOU0lERSAmJiByZXQuaGVpZ2h0ID4gdG8uaGVpZ2h0KQogICAgICAgIHJldCA9IGpzX3NpemVfZml0KHNpemUsIHRvLmhlaWdodCwgSlNfU0laRV9GSVRfSEVJR0hUKTsKCiAgICAgIGJyZWFrOwogICAgfQogICAgZGVmYXVsdDogcmV0ID0ganNfc2l6ZV9maXQoc2l6ZSwgbW9kZSA9PSBKU19TSVpFX0ZJVF9XSURUSCA/IHRvLndpZHRoIDogdG8uaGVpZ2h0LCBtb2RlKTsgYnJlYWs7CiAgfQogIHJldHVybiByZXQ7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX3NpemVfY3RvcihKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IG5ld190YXJnZXQsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QqIGFyZ3YpIHsKICBKU1NpemVEYXRhPGRvdWJsZT4gc2l6ZSwgKnM7CiAgSlNWYWx1ZSBvYmogPSBKU19VTkRFRklORUQ7CiAgSlNWYWx1ZSBwcm90bzsKCiAgcyA9IGpzX2FsbG9jYXRlPEpTU2l6ZURhdGE8ZG91YmxlPj4oY3R4KTsKICBpZighcykKICAgIHJldHVybiBKU19FWENFUFRJT047CiAgbmV3KHMpIEpTU2l6ZURhdGE8ZG91YmxlPigpOwoKICBpZihhcmdjID4gMCkgewogICAgaWYoanNfc2l6ZV9yZWFkKGN0eCwgYXJndlswXSwgJnNpemUpKSB7CiAgICAgICpzID0gc2l6ZTsKICAgIH0gZWxzZSB7CiAgICAgIGlmKEpTX1RvRmxvYXQ2NChjdHgsICZzaXplLndpZHRoLCBhcmd2WzBdKSkKICAgICAgICBnb3RvIGZhaWw7CiAgICAgIGlmKGFyZ2MgPCAyIHx8IEpTX1RvRmxvYXQ2NChjdHgsICZzaXplLmhlaWdodCwgYXJndlsxXSkpCiAgICAgICAgZ290byBmYWlsOwoKICAgICAgKnMgPSBzaXplOwogICAgfQogIH0KCiAgLyogdXNpbmcgbmV3X3RhcmdldCB0byBnZXQgdGhlIHByb3RvdHlwZSBpcyBuZWNlc3Nhcnkgd2hlbiB0aGUKICAgICBjbGFzcyBpcyBleHRlbmRlZC4gKi8KICBwcm90byA9IEpTX0dldFByb3BlcnR5U3RyKGN0eCwgbmV3X3RhcmdldCwgInByb3RvdHlwZSIpOwogIGlmKEpTX0lzRXhjZXB0aW9uKHByb3RvKSkKICAgIGdvdG8gZmFpbDsKICBvYmogPSBKU19OZXdPYmplY3RQcm90b0NsYXNzKGN0eCwgcHJvdG8sIGpzX3NpemVfY2xhc3NfaWQpOwogIEpTX0ZyZWVWYWx1ZShjdHgsIHByb3RvKTsKICBpZihKU19Jc0V4Y2VwdGlvbihvYmopKQogICAgZ290byBmYWlsOwogIEpTX1NldE9wYXF1ZShvYmosIHMpOwogIHJldHVybiBvYmo7CmZhaWw6CiAganNfZGVhbGxvY2F0ZShjdHgsIHMpOwogIEpTX0ZyZWVWYWx1ZShjdHgsIG9iaik7CiAgcmV0dXJuIEpTX0VYQ0VQVElPTjsKfQoKVklTSUJMRSBKU1NpemVEYXRhPGRvdWJsZT4qCmpzX3NpemVfZGF0YShKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHZhbCkgewogIHJldHVybiBzdGF0aWNfY2FzdDxKU1NpemVEYXRhPGRvdWJsZT4qPihKU19HZXRPcGFxdWUyKGN0eCwgdmFsLCBqc19zaXplX2NsYXNzX2lkKSk7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX3NpemVfZ2V0KEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBtYWdpYykgewogIEpTU2l6ZURhdGE8ZG91YmxlPiogcyA9IGpzX3NpemVfZGF0YShjdHgsIHRoaXNfdmFsKTsKICBpZighcykKICAgIHJldHVybiBKU19FWENFUFRJT047CiAgaWYobWFnaWMgPT0gMCkKICAgIHJldHVybiBKU19OZXdGbG9hdDY0KGN0eCwgcy0+d2lkdGgpOwogIGVsc2UgaWYobWFnaWMgPT0gMSkKICAgIHJldHVybiBKU19OZXdGbG9hdDY0KGN0eCwgcy0+aGVpZ2h0KTsKICBlbHNlIGlmKG1hZ2ljID09IDIpCiAgICByZXR1cm4gSlNfTmV3RmxvYXQ2NChjdHgsIHMtPmFzcGVjdFJhdGlvKCkpOwogIGVsc2UgaWYobWFnaWMgPT0gMykKICAgIHJldHVybiBKU19OZXdCb29sKGN0eCwgcy0+ZW1wdHkoKSk7CiAgZWxzZSBpZihtYWdpYyA9PSA0KQogICAgcmV0dXJuIEpTX05ld0Zsb2F0NjQoY3R4LCBzLT5hcmVhKCkpOwogIHJldHVybiBKU19VTkRFRklORUQ7Cn0KClZJU0lCTEUgSlNWYWx1ZQpqc19zaXplX25ldyhKU0NvbnRleHQqIGN0eCwgZG91YmxlIHcsIGRvdWJsZSBoKSB7CiAgSlNWYWx1ZSByZXQ7CiAgSlNTaXplRGF0YTxkb3VibGU+KiBzOwoKICBpZihKU19Jc1VuZGVmaW5lZChzaXplX3Byb3RvKSkKICAgIGpzX3NpemVfaW5pdChjdHgsIE5VTEwpOwoKICByZXQgPSBKU19OZXdPYmplY3RQcm90b0NsYXNzKGN0eCwgc2l6ZV9wcm90bywganNfc2l6ZV9jbGFzc19pZCk7CgogIHMgPSBqc19hbGxvY2F0ZTxKU1NpemVEYXRhPGRvdWJsZT4+KGN0eCk7CiAgcy0+d2lkdGggPSB3IDw9IERCTF9FUFNJTE9OID8gMCA6IHc7CiAgcy0+aGVpZ2h0ID0gaCA8PSBEQkxfRVBTSUxPTiA/IDAgOiBoOwoKICBKU19TZXRPcGFxdWUocmV0LCBzKTsKICByZXR1cm4gcmV0Owp9CgpWSVNJQkxFIEpTVmFsdWUKanNfc2l6ZV93cmFwKEpTQ29udGV4dCogY3R4LCBjb25zdCBKU1NpemVEYXRhPGRvdWJsZT4mIHN6KSB7CiAgcmV0dXJuIGpzX3NpemVfbmV3KGN0eCwgc3oud2lkdGgsIHN6LmhlaWdodCk7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX3NpemVfc2V0KEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIEpTVmFsdWVDb25zdCB2YWwsIGludCBtYWdpYykgewogIEpTU2l6ZURhdGE8ZG91YmxlPiogcyA9IGpzX3NpemVfZGF0YShjdHgsIHRoaXNfdmFsKTsKICBkb3VibGUgdjsKICBpZighcykKICAgIHJldHVybiBKU19FWENFUFRJT047CiAgaWYoSlNfVG9GbG9hdDY0KGN0eCwgJnYsIHZhbCkpCiAgICByZXR1cm4gSlNfRVhDRVBUSU9OOwogIGlmKG1hZ2ljID09IDApCiAgICBzLT53aWR0aCA9IHY7CiAgZWxzZQogICAgcy0+aGVpZ2h0ID0gdjsKICByZXR1cm4gSlNfVU5ERUZJTkVEOwp9CgpzdGF0aWMgSlNWYWx1ZQpqc19zaXplX3RvX3N0cmluZyhKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2KSB7CiAgSlNTaXplRGF0YTxkb3VibGU+IHNpemUsICpzOwogIHN0ZDo6b3N0cmluZ3N0cmVhbSBvczsKICBjb25zdCBjaGFyKiBkZWxpbSA9ICLDlyI7CiAgaWYoKHMgPSBqc19zaXplX2RhdGEoY3R4LCB0aGlzX3ZhbCkpID09IG51bGxwdHIpIHsKICAgIGpzX3NpemVfcmVhZChjdHgsIHRoaXNfdmFsLCAmc2l6ZSk7CiAgfSBlbHNlIHsKICAgIHNpemUgPSAqczsKICB9CgogIGlmKGFyZ2MgPiAwKQogICAgZGVsaW0gPSBKU19Ub0NTdHJpbmcoY3R4LCBhcmd2WzBdKTsKCiAgb3MgPDwgc2l6ZS53aWR0aCA8PCBkZWxpbSA8PCBzaXplLmhlaWdodDsKCiAgcmV0dXJuIEpTX05ld1N0cmluZyhjdHgsIG9zLnN0cigpLmNfc3RyKCkpOwp9CnN0YXRpYyBKU1ZhbHVlCmpzX3NpemVfdG9fc291cmNlKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QqIGFyZ3YpIHsKICBKU1NpemVEYXRhPGRvdWJsZT4gc2l6ZSwgKnM7CiAgc3RkOjpvc3RyaW5nc3RyZWFtIG9zOwogIGlmKChzID0ganNfc2l6ZV9kYXRhKGN0eCwgdGhpc192YWwpKSA9PSBudWxscHRyKSB7CiAgICBqc19zaXplX3JlYWQoY3R4LCB0aGlzX3ZhbCwgJnNpemUpOwogIH0gZWxzZSB7CiAgICBzaXplID0gKnM7CiAgfQogIG9zIDw8ICJ7d2lkdGg6IiA8PCBzaXplLndpZHRoIDw8ICIsaGVpZ2h0OiIgPDwgc2l6ZS5oZWlnaHQgPDwgIn0iOwoKICByZXR1cm4gSlNfTmV3U3RyaW5nKGN0eCwgb3Muc3RyKCkuY19zdHIoKSk7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX3NpemVfaW5zcGVjdChKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2KSB7CiAgSlNTaXplRGF0YTxkb3VibGU+KiBzID0ganNfc2l6ZV9kYXRhKGN0eCwgdGhpc192YWwpOwogIEpTVmFsdWUgb2JqID0gSlNfTmV3T2JqZWN0UHJvdG8oY3R4LCBzaXplX3Byb3RvKTsKCiAgSlNfRGVmaW5lUHJvcGVydHlWYWx1ZVN0cihjdHgsIG9iaiwgIndpZHRoIiwgSlNfTmV3RmxvYXQ2NChjdHgsIHMtPndpZHRoKSwgSlNfUFJPUF9FTlVNRVJBQkxFKTsKICBKU19EZWZpbmVQcm9wZXJ0eVZhbHVlU3RyKGN0eCwgb2JqLCAiaGVpZ2h0IiwgSlNfTmV3RmxvYXQ2NChjdHgsIHMtPmhlaWdodCksIEpTX1BST1BfRU5VTUVSQUJMRSk7CiAgcmV0dXJuIG9iajsKfQoKc3RhdGljIEpTVmFsdWUKanNfc2l6ZV9mdW5jcyhKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2LCBpbnQgbWFnaWMpIHsKICBKU1NpemVEYXRhPGRvdWJsZT4gc2l6ZSwgKnMsICphOwogIEpTVmFsdWUgcmV0ID0gSlNfVU5ERUZJTkVEOwogIGlmKChzID0ganNfc2l6ZV9kYXRhKGN0eCwgdGhpc192YWwpKSA9PSBudWxscHRyKQogICAgcmV0dXJuIEpTX0VYQ0VQVElPTjsKCiAgc2l6ZSA9ICpzOwoKICBpZihtYWdpYyA9PSAwKSB7CiAgICBhID0ganNfc2l6ZV9kYXRhKGN0eCwgYXJndlswXSk7CiAgICBib29sIGVxdWFscyA9IHMtPndpZHRoID09IGEtPndpZHRoICYmIHMtPmhlaWdodCA9PSBhLT5oZWlnaHQ7CiAgICByZXQgPSBKU19OZXdCb29sKGN0eCwgZXF1YWxzKTsKICB9IGVsc2UgaWYobWFnaWMgPT0gMSkgewogICAgZG91YmxlIHdpZHRoLCBoZWlnaHQsIGY7CiAgICBpbnQzMl90IHByZWNpc2lvbiA9IDA7CiAgICBpZihhcmdjID4gMCkKICAgICAgSlNfVG9JbnQzMihjdHgsICZwcmVjaXNpb24sIGFyZ3ZbMF0pOwogICAgZiA9IHN0ZDo6cG93KDEwLCBwcmVjaXNpb24pOwogICAgd2lkdGggPSBzdGQ6OnJvdW5kKHNpemUud2lkdGggKiBmKSAvIGY7CiAgICBoZWlnaHQgPSBzdGQ6OnJvdW5kKHNpemUuaGVpZ2h0ICogZikgLyBmOwogICAgcmV0ID0ganNfc2l6ZV9uZXcoY3R4LCB3aWR0aCwgaGVpZ2h0KTsKICB9IGVsc2UgaWYobWFnaWMgPT0gMikgewogICAgcmV0ID0gSlNfTmV3T2JqZWN0KGN0eCk7CgogICAgSlNfU2V0UHJvcGVydHlTdHIoY3R4LCByZXQsICJ3aWR0aCIsIEpTX05ld0Zsb2F0NjQoY3R4LCBzaXplLndpZHRoKSk7CiAgICBKU19TZXRQcm9wZXJ0eVN0cihjdHgsIHJldCwgImhlaWdodCIsIEpTX05ld0Zsb2F0NjQoY3R4LCBzaXplLmhlaWdodCkpOwogIH0gZWxzZSBpZihtYWdpYyA9PSAzKSB7CiAgICByZXQgPSBKU19OZXdBcnJheShjdHgpOwoKICAgIEpTX1NldFByb3BlcnR5VWludDMyKGN0eCwgcmV0LCAwLCBKU19OZXdGbG9hdDY0KGN0eCwgc2l6ZS53aWR0aCkpOwogICAgSlNfU2V0UHJvcGVydHlVaW50MzIoY3R4LCByZXQsIDEsIEpTX05ld0Zsb2F0NjQoY3R4LCBzaXplLmhlaWdodCkpOwogIH0gZWxzZSBpZihtYWdpYyA9PSA0IHx8IG1hZ2ljID09IDUgfHwgbWFnaWMgPT0gNiB8fCBtYWdpYyA9PSA3KSB7CiAgICBKU1NpemVEYXRhPGRvdWJsZT4gb3RoZXIsIHJlc3VsdDsKICAgIGRvdWJsZSBhcmc7CgogICAganNfc2l6ZV9maXRfdCBmaXRfdHlwZSA9IGpzX3NpemVfZml0X3QobWFnaWMgLSAzKTsKICAgIGlmKG1hZ2ljID49IDYpIHt9CgogICAgaWYoanNfc2l6ZV9yZWFkKGN0eCwgYXJndlswXSwgJm90aGVyKSkgewogICAgICByZXN1bHQgPSBqc19zaXplX2ZpdChzaXplLCBvdGhlciwgZml0X3R5cGUpOwoKICAgIH0gZWxzZSBpZihmaXRfdHlwZSA9PSBKU19TSVpFX0ZJVF9XSURUSCB8fCBmaXRfdHlwZSA9PSBKU19TSVpFX0ZJVF9IRUlHSFQpIHsKICAgICAgSlNfVG9GbG9hdDY0KGN0eCwgJmFyZywgYXJndlswXSk7CiAgICAgIHJlc3VsdCA9IGpzX3NpemVfZml0KHNpemUsIGFyZywgZml0X3R5cGUpOwogICAgfQoKICAgIGlmKCFyZXN1bHQuZW1wdHkoKSkKICAgICAgcmV0ID0ganNfc2l6ZV9uZXcoY3R4LCByZXN1bHQud2lkdGgsIHJlc3VsdC5oZWlnaHQpOwogIH0KICByZXR1cm4gcmV0Owp9CgpzdGF0aWMgSlNWYWx1ZQpqc19zaXplX2FkZChKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2KSB7CiAgSlNTaXplRGF0YTxkb3VibGU+KnMsIHNpemU7CgogIGlmKChzID0ganNfc2l6ZV9kYXRhKGN0eCwgdGhpc192YWwpKSA9PSBudWxscHRyKQogICAgcmV0dXJuIEpTX0VYQ0VQVElPTjsKCiAgaWYoanNfc2l6ZV9yZWFkKGN0eCwgYXJndlswXSwgJnNpemUpKSB7CiAgICBzLT53aWR0aCArPSBzaXplLndpZHRoOwogICAgcy0+aGVpZ2h0ICs9IHNpemUuaGVpZ2h0OwogIH0gZWxzZSBpZihhcmdjID49IDIgJiYgSlNfSXNOdW1iZXIoYXJndlswXSkgJiYgSlNfSXNOdW1iZXIoYXJndlsxXSkpIHsKICAgIGRvdWJsZSB3aWR0aCwgaGVpZ2h0OwoKICAgIEpTX1RvRmxvYXQ2NChjdHgsICZ3aWR0aCwgYXJndlswXSk7CiAgICBKU19Ub0Zsb2F0NjQoY3R4LCAmaGVpZ2h0LCBhcmd2WzFdKTsKICAgIHMtPndpZHRoICs9IHdpZHRoOwogICAgcy0+aGVpZ2h0ICs9IGhlaWdodDsKICB9CgogIHJldHVybiBKU19EdXBWYWx1ZShjdHgsIHRoaXNfdmFsKTsKfQoKc3RhdGljIEpTVmFsdWUKanNfc2l6ZV9zdWIoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCogYXJndikgewogIEpTU2l6ZURhdGE8ZG91YmxlPipzLCBzaXplOwoKICBpZigocyA9IGpzX3NpemVfZGF0YShjdHgsIHRoaXNfdmFsKSkgPT0gbnVsbHB0cikKICAgIHJldHVybiBKU19FWENFUFRJT047CgogIGlmKGpzX3NpemVfcmVhZChjdHgsIGFyZ3ZbMF0sICZzaXplKSkgewogICAgcy0+d2lkdGggLT0gc2l6ZS53aWR0aDsKICAgIHMtPmhlaWdodCAtPSBzaXplLmhlaWdodDsKICB9IGVsc2UgaWYoYXJnYyA+PSAyICYmIEpTX0lzTnVtYmVyKGFyZ3ZbMF0pICYmIEpTX0lzTnVtYmVyKGFyZ3ZbMV0pKSB7CiAgICBkb3VibGUgd2lkdGgsIGhlaWdodDsKCiAgICBKU19Ub0Zsb2F0NjQoY3R4LCAmd2lkdGgsIGFyZ3ZbMF0pOwogICAgSlNfVG9GbG9hdDY0KGN0eCwgJmhlaWdodCwgYXJndlsxXSk7CiAgICBzLT53aWR0aCAtPSB3aWR0aDsKICAgIHMtPmhlaWdodCAtPSBoZWlnaHQ7CiAgfQoKICByZXR1cm4gSlNfRHVwVmFsdWUoY3R4LCB0aGlzX3ZhbCk7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX3NpemVfbXVsKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QqIGFyZ3YpIHsKICBKU1NpemVEYXRhPGRvdWJsZT4gc2l6ZSwgKnMgPSBqc19zaXplX2RhdGEoY3R4LCB0aGlzX3ZhbCk7CiAgZG91YmxlIGZhY3RvcjsKICBKU19Ub0Zsb2F0NjQoY3R4LCAmZmFjdG9yLCBhcmd2WzBdKTsKCiAgc2l6ZSA9ICpzOwogIHNpemUud2lkdGggKj0gZmFjdG9yOwogIHNpemUuaGVpZ2h0ICo9IGZhY3RvcjsKCiAgcmV0dXJuIGpzX3NpemVfd3JhcChjdHgsIHNpemUpOwp9CgpzdGF0aWMgSlNWYWx1ZQpqc19zaXplX2RpdihKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2KSB7CiAgSlNTaXplRGF0YTxkb3VibGU+IHNpemUsIG90aGVyLCAqcywgKmEgPSBudWxscHRyOwogIEpTVmFsdWUgcmV0ID0gSlNfRVhDRVBUSU9OOwogIGlmKChzID0ganNfc2l6ZV9kYXRhKGN0eCwgdGhpc192YWwpKSAhPSBudWxscHRyKSB7CiAgICBzaXplID0gKnM7CgogICAgaWYoSlNfSXNOdW1iZXIoYXJndlswXSkpIHsKICAgICAgZG91YmxlIGRpdmlkZXI7CiAgICAgIEpTX1RvRmxvYXQ2NChjdHgsICZkaXZpZGVyLCBhcmd2WzBdKTsKICAgICAgc2l6ZS53aWR0aCAvPSBkaXZpZGVyOwogICAgICBzaXplLmhlaWdodCAvPSBkaXZpZGVyOwogICAgICByZXQgPSBqc19zaXplX3dyYXAoY3R4LCBzaXplKTsKICAgIH0gZWxzZSB7CiAgICAgIGlmKChhID0ganNfc2l6ZV9kYXRhKGN0eCwgYXJndlswXSkpICE9IG51bGxwdHIpCiAgICAgICAgb3RoZXIgPSAqYTsKICAgICAgZWxzZSB7CiAgICAgICAganNfc2l6ZV9yZWFkKGN0eCwgYXJndlswXSwgJm90aGVyKTsKICAgICAgICBhID0gJm90aGVyOwogICAgICB9CiAgICAgIHN0ZDo6YXJyYXk8ZG91YmxlLCAyPiByZXN1bHR7c2l6ZS53aWR0aCAvIG90aGVyLndpZHRoLCBzaXplLmhlaWdodCAvIG90aGVyLmhlaWdodH07CiAgICAgIHJldCA9IEpTX05ld0FycmF5KGN0eCk7CgogICAgICBKU19TZXRQcm9wZXJ0eVVpbnQzMihjdHgsIHJldCwgMCwgSlNfTmV3RmxvYXQ2NChjdHgsIHJlc3VsdFswXSkpOwogICAgICBKU19TZXRQcm9wZXJ0eVVpbnQzMihjdHgsIHJldCwgMSwgSlNfTmV3RmxvYXQ2NChjdHgsIHJlc3VsdFsxXSkpOwogICAgfQogIH0KICByZXR1cm4gcmV0Owp9CgpzdGF0aWMgSlNWYWx1ZSBpdGVyYXRvcl9zeW1ib2wgPSBKU19VTkRFRklORUQ7CgpzdGF0aWMgSlNWYWx1ZQpqc19zaXplX3N5bWJvbF9pdGVyYXRvcihKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2KSB7CiAgSlNWYWx1ZSBhcnIsIGl0ZXI7CiAganNydCBqcyhjdHgpOwogIGFyciA9IGpzX3NpemVfZnVuY3MoY3R4LCB0aGlzX3ZhbCwgYXJnYywgYXJndiwgMyk7CgogIGlmKEpTX0lzVW5kZWZpbmVkKGl0ZXJhdG9yX3N5bWJvbCkpCiAgICBpdGVyYXRvcl9zeW1ib2wgPSBqcy5nZXRfc3ltYm9sKCJpdGVyYXRvciIpOwoKICBpZighSlNfSXNGdW5jdGlvbihjdHgsIChpdGVyID0ganMuZ2V0X3Byb3BlcnR5KGFyciwgaXRlcmF0b3Jfc3ltYm9sKSkpKQogICAgcmV0dXJuIEpTX0VYQ0VQVElPTjsKICByZXR1cm4gSlNfQ2FsbChjdHgsIGl0ZXIsIGFyciwgMCwgYXJndik7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX3NpemVfZnJvbShKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHNpemUsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QqIGFyZ3YpIHsKICBzdGQ6OmFycmF5PGRvdWJsZSwgMj4gYXJyYXk7CiAgSlNWYWx1ZSByZXQgPSBKU19FWENFUFRJT047CgogIGlmKEpTX0lzU3RyaW5nKGFyZ3ZbMF0pKSB7CiAgICBjb25zdCBjaGFyKiBzdHIgPSBKU19Ub0NTdHJpbmcoY3R4LCBhcmd2WzBdKTsKICAgIGNoYXIqIGVuZHB0ciA9IG51bGxwdHI7CiAgICBmb3Ioc2l6ZV90IGkgPSAwOyBpIDwgMjsgaSsrKSB7CiAgICAgIHdoaWxlKCFpc2RpZ2l0KCpzdHIpICYmICpzdHIgIT0gJy0nICYmICpzdHIgIT0gJysnICYmICEoKnN0ciA9PSAnLicgJiYgaXNkaWdpdChzdHJbMV0pKSkgc3RyKys7CiAgICAgIGlmKCpzdHIgPT0gJ1wwJykKICAgICAgICBicmVhazsKICAgICAgYXJyYXlbaV0gPSBzdHJ0b2Qoc3RyLCAmZW5kcHRyKTsKICAgICAgc3RyID0gZW5kcHRyOwogICAgfQogIH0gZWxzZSBpZihqc19pc19hcnJheShjdHgsIGFyZ3ZbMF0pKSB7CiAgICBqc19hcnJheV90bzxkb3VibGUsIDI+KGN0eCwgYXJndlswXSwgYXJyYXkpOwogIH0KICBpZihhcnJheVswXSA+IDAgJiYgYXJyYXlbMV0gPiAwKQogICAgcmV0ID0ganNfc2l6ZV9uZXcoY3R4LCBhcnJheVswXSwgYXJyYXlbMV0pOwogIHJldHVybiByZXQ7Cn0KCnZvaWQKanNfc2l6ZV9maW5hbGl6ZXIoSlNSdW50aW1lKiBydCwgSlNWYWx1ZSB2YWwpIHsKICBKU1NpemVEYXRhPGRvdWJsZT4qIHMgPSBzdGF0aWNfY2FzdDxKU1NpemVEYXRhPGRvdWJsZT4qPihKU19HZXRPcGFxdWUodmFsLCBqc19zaXplX2NsYXNzX2lkKSk7CiAgLyogTm90ZTogJ3MnIGNhbiBiZSBOVUxMIGluIGNhc2UgSlNfU2V0T3BhcXVlKCkgd2FzIG5vdCBjYWxsZWQgKi8KICBpZihzKQogICAganNfZGVhbGxvY2F0ZShydCwgcyk7Cn0KCkpTQ2xhc3NEZWYganNfc2l6ZV9jbGFzcyA9IHsKICAgIC5jbGFzc19uYW1lID0gIlNpemUiLAogICAgLmZpbmFsaXplciA9IGpzX3NpemVfZmluYWxpemVyLAp9OwoKY29uc3QgSlNDRnVuY3Rpb25MaXN0RW50cnkganNfc2l6ZV9wcm90b19mdW5jc1tdID0ge0pTX0NHRVRTRVRfRU5VTUVSQUJMRV9ERUYoIndpZHRoIiwganNfc2l6ZV9nZXQsIGpzX3NpemVfc2V0LCAwKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEpTX0NHRVRTRVRfRU5VTUVSQUJMRV9ERUYoImhlaWdodCIsIGpzX3NpemVfZ2V0LCBqc19zaXplX3NldCwgMSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBKU19DR0VUU0VUX0VOVU1FUkFCTEVfREVGKCJhc3BlY3QiLCBqc19zaXplX2dldCwgMCwgMiksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBKU19DR0VUU0VUX0VOVU1FUkFCTEVfREVGKCJlbXB0eSIsIGpzX3NpemVfZ2V0LCAwLCAzKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEpTX0NHRVRTRVRfRU5VTUVSQUJMRV9ERUYoImFyZWEiLCBqc19zaXplX2dldCwgMCwgNCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBKU19DRlVOQ19NQUdJQ19ERUYoImVxdWFscyIsIDEsIGpzX3NpemVfZnVuY3MsIDApLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJyb3VuZCIsIDAsIGpzX3NpemVfZnVuY3MsIDEpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJ0b09iamVjdCIsIDAsIGpzX3NpemVfZnVuY3MsIDIpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJ0b0FycmF5IiwgMCwganNfc2l6ZV9mdW5jcywgMyksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBKU19DRlVOQ19NQUdJQ19ERUYoImZpdFdpZHRoIiwgMCwganNfc2l6ZV9mdW5jcywgNCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBKU19DRlVOQ19NQUdJQ19ERUYoImZpdEhlaWdodCIsIDAsIGpzX3NpemVfZnVuY3MsIDUpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJmaXRJbnNpZGUiLCAwLCBqc19zaXplX2Z1bmNzLCA2KSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEpTX0NGVU5DX01BR0lDX0RFRigiZml0T3V0c2lkZSIsIDAsIGpzX3NpemVfZnVuY3MsIDcpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSlNfQ0ZVTkNfREVGKCJ0b1N0cmluZyIsIDAsIGpzX3NpemVfdG9fc3RyaW5nKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEpTX0NGVU5DX0RFRigidG9Tb3VyY2UiLCAwLCBqc19zaXplX3RvX3NvdXJjZSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBKU19DRlVOQ19ERUYoImFkZCIsIDEsIGpzX3NpemVfYWRkKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEpTX0NGVU5DX0RFRigic3ViIiwgMSwganNfc2l6ZV9zdWIpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSlNfQ0ZVTkNfREVGKCJtdWwiLCAxLCBqc19zaXplX211bCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBKU19DRlVOQ19ERUYoImRpdiIsIDEsIGpzX3NpemVfZGl2KSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEpTX0FMSUFTX0RFRigidmFsdWVzIiwgInRvQXJyYXkiKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEpTX0NGVU5DX0RFRigiW1N5bWJvbC5pdGVyYXRvcl0iLCAwLCBqc19zaXplX3N5bWJvbF9pdGVyYXRvciksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBKU19QUk9QX1NUUklOR19ERUYoIltTeW1ib2wudG9TdHJpbmdUYWddIiwgIlNpemUiLCBKU19QUk9QX0NPTkZJR1VSQUJMRSl9OwoKY29uc3QgSlNDRnVuY3Rpb25MaXN0RW50cnkganNfc2l6ZV9zdGF0aWNfZnVuY3NbXSA9IHtKU19DRlVOQ19ERUYoImZyb20iLCAxLCBqc19zaXplX2Zyb20pfTsKCmludApqc19zaXplX2luaXQoSlNDb250ZXh0KiBjdHgsIEpTTW9kdWxlRGVmKiBtKSB7CgogIGlmKGpzX3NpemVfY2xhc3NfaWQgPT0gMCkgewogICAgLyogY3JlYXRlIHRoZSBTaXplIGNsYXNzICovCiAgICBKU19OZXdDbGFzc0lEKCZqc19zaXplX2NsYXNzX2lkKTsKICAgIEpTX05ld0NsYXNzKEpTX0dldFJ1bnRpbWUoY3R4KSwganNfc2l6ZV9jbGFzc19pZCwgJmpzX3NpemVfY2xhc3MpOwoKICAgIHNpemVfcHJvdG8gPSBKU19OZXdPYmplY3QoY3R4KTsKICAgIEpTX1NldFByb3BlcnR5RnVuY3Rpb25MaXN0KGN0eCwgc2l6ZV9wcm90bywganNfc2l6ZV9wcm90b19mdW5jcywgY291bnRvZihqc19zaXplX3Byb3RvX2Z1bmNzKSk7CgogICAgSlNfU2V0Q2xhc3NQcm90byhjdHgsIGpzX3NpemVfY2xhc3NfaWQsIHNpemVfcHJvdG8pOwoKICAgIHNpemVfY2xhc3MgPSBKU19OZXdDRnVuY3Rpb24yKGN0eCwganNfc2l6ZV9jdG9yLCAiU2l6ZSIsIDAsIEpTX0NGVU5DX2NvbnN0cnVjdG9yLCAwKTsKICAgIC8qIHNldCBwcm90by5jb25zdHJ1Y3RvciBhbmQgY3Rvci5wcm90b3R5cGUgKi8KICAgIEpTX1NldENvbnN0cnVjdG9yKGN0eCwgc2l6ZV9jbGFzcywgc2l6ZV9wcm90byk7CiAgICBKU19TZXRQcm9wZXJ0eUZ1bmN0aW9uTGlzdChjdHgsIHNpemVfY2xhc3MsIGpzX3NpemVfc3RhdGljX2Z1bmNzLCBjb3VudG9mKGpzX3NpemVfc3RhdGljX2Z1bmNzKSk7CgogICAganNfc2V0X2luc3BlY3RfbWV0aG9kKGN0eCwgc2l6ZV9wcm90bywganNfc2l6ZV9pbnNwZWN0KTsKICB9CgogIGlmKG0pCiAgICBKU19TZXRNb2R1bGVFeHBvcnQoY3R4LCBtLCAiU2l6ZSIsIHNpemVfY2xhc3MpOwogIC8qZWxzZQogICAgSlNfU2V0UHJvcGVydHlTdHIoY3R4LCAqc3RhdGljX2Nhc3Q8SlNWYWx1ZSo+KG0pLCBuYW1lLCBzaXplX2NsYXNzKTsqLwogIHJldHVybiAwOwp9CgpleHRlcm4gIkMiIFZJU0lCTEUgdm9pZCBqc19zaXplX2V4cG9ydChKU0NvbnRleHQqIGN0eCwgSlNNb2R1bGVEZWYqIG0pIHsKICBKU19BZGRNb2R1bGVFeHBvcnQoY3R4LCBtLCAiU2l6ZSIpOwp9Cgp2b2lkCmpzX3NpemVfY29uc3RydWN0b3IoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWUgcGFyZW50LCBjb25zdCBjaGFyKiBuYW1lKSB7CiAgaWYoSlNfSXNVbmRlZmluZWQoc2l6ZV9jbGFzcykpCiAgICBqc19zaXplX2luaXQoY3R4LCAwKTsKCiAgSlNfU2V0UHJvcGVydHlTdHIoY3R4LCBwYXJlbnQsIG5hbWUgPyBuYW1lIDogIlNpemUiLCBzaXplX2NsYXNzKTsKfQoKI2lmZGVmIEpTX1NJWkVfTU9EVUxFCiNkZWZpbmUgSlNfSU5JVF9NT0RVTEUgLypWSVNJQkxFKi8ganNfaW5pdF9tb2R1bGUKI2Vsc2UKI2RlZmluZSBKU19JTklUX01PRFVMRSAvKlZJU0lCTEUqLyBqc19pbml0X21vZHVsZV9zaXplCiNlbmRpZgoKZXh0ZXJuICJDIiBKU01vZHVsZURlZioKSlNfSU5JVF9NT0RVTEUoSlNDb250ZXh0KiBjdHgsIGNvbnN0IGNoYXIqIG1vZHVsZV9uYW1lKSB7CiAgSlNNb2R1bGVEZWYqIG07CiAgbSA9IEpTX05ld0NNb2R1bGUoY3R4LCBtb2R1bGVfbmFtZSwgJmpzX3NpemVfaW5pdCk7CiAgaWYoIW0pCiAgICByZXR1cm4gTlVMTDsKICBqc19zaXplX2V4cG9ydChjdHgsbSk7CiAgcmV0dXJuIG07Cn0AAAAAAAAAALk5AAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAqjkAAAAAAACqOQAAAAAAAAAAAAAAAPC/"
				],
				[
					37,
					4,
					"left_delete",
					null,
					"BAAAAEMkAAAAAAAAQyQAAAAAAAAMAAAASlNfVU5ERUZJTkVEQiQAAAAAAABCJAAAAAAAAAEAAAAgQSQAAAAAAABBJAAAAAAAAAEAAAA9QCQAAAAAAABAJAAAAAAAAAEAAAAg",
					"AQAAAAAAAAABAAAAQyQAAAAAAABPJAAAAAAAAAAAAAAAAPC/"
				],
				[
					43,
					1,
					"insert",
					{
						"characters": "JSAtom"
					},
					"BwAAACkkAAAAAAAAKiQAAAAAAAAAAAAAKiQAAAAAAAAqJAAAAAAAAAcAAABKU1ZhbHVlKiQAAAAAAAArJAAAAAAAAAAAAAArJAAAAAAAACwkAAAAAAAAAAAAACwkAAAAAAAALSQAAAAAAAAAAAAALSQAAAAAAAAuJAAAAAAAAAAAAAAuJAAAAAAAAC8kAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAKSQAAAAAAAAwJAAAAAAAAAAAAAAAAPC/"
				],
				[
					47,
					2,
					"right_delete",
					null,
					"AgAAABAlAAAAAAAAECUAAAAAAAAOAAAASlNfSXNVbmRlZmluZWQQJQAAAAAAABAlAAAAAAAAAQAAACg",
					"AQAAAAAAAAABAAAAECUAAAAAAAAeJQAAAAAAAAAAAAAAAPC/"
				],
				[
					50,
					1,
					"left_delete",
					null,
					"AQAAAB8lAAAAAAAAHyUAAAAAAAABAAAAKQ",
					"AQAAAAAAAAABAAAAICUAAAAAAAAgJQAAAAAAAAAAAAAAAPC/"
				],
				[
					51,
					1,
					"insert",
					{
						"characters": "^=="
					},
					"AwAAAB8lAAAAAAAAICUAAAAAAAAAAAAAICUAAAAAAAAhJQAAAAAAAAAAAAAhJQAAAAAAACIlAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAHyUAAAAAAAAfJQAAAAAAAAAAAAAAAPC/"
				],
				[
					52,
					1,
					"insert",
					{
						"characters": " "
					},
					"AQAAACIlAAAAAAAAIyUAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAIiUAAAAAAAAiJQAAAAAAAAAAAAAAAPC/"
				],
				[
					53,
					4,
					"left_delete",
					null,
					"BAAAACIlAAAAAAAAIiUAAAAAAAABAAAAICElAAAAAAAAISUAAAAAAAABAAAAPSAlAAAAAAAAICUAAAAAAAABAAAAPR8lAAAAAAAAHyUAAAAAAAABAAAAXg",
					"AQAAAAAAAAABAAAAIyUAAAAAAAAjJQAAAAAAAAAAAAAAAPC/"
				],
				[
					54,
					1,
					"insert",
					{
						"characters": "=="
					},
					"AgAAAB8lAAAAAAAAICUAAAAAAAAAAAAAICUAAAAAAAAhJQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAHyUAAAAAAAAfJQAAAAAAAAAAAAAAAPC/"
				],
				[
					55,
					1,
					"insert",
					{
						"characters": " "
					},
					"AQAAACElAAAAAAAAIiUAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAISUAAAAAAAAhJQAAAAAAAAAAAAAAAPC/"
				],
				[
					56,
					1,
					"insert_snippet",
					{
						"contents": "'$0'"
					},
					"AQAAACIlAAAAAAAAJCUAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAIiUAAAAAAAAiJQAAAAAAAAAAAAAAAPC/"
				],
				[
					57,
					1,
					"insert",
					{
						"characters": "0"
					},
					"AQAAACMlAAAAAAAAJCUAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAIyUAAAAAAAAjJQAAAAAAAAAAAAAAAPC/"
				],
				[
					58,
					1,
					"left_delete",
					null,
					"AQAAACMlAAAAAAAAIyUAAAAAAAABAAAAMA",
					"AQAAAAAAAAABAAAAJCUAAAAAAAAkJQAAAAAAAAAAAAAAAPC/"
				],
				[
					59,
					1,
					"run_macro_file",
					{
						"file": "res://Packages/Default/Delete Left Right.sublime-macro"
					},
					"AgAAACIlAAAAAAAAIiUAAAAAAAABAAAAJyIlAAAAAAAAIiUAAAAAAAABAAAAJw",
					"AQAAAAAAAAABAAAAIyUAAAAAAAAjJQAAAAAAAAAAAAAAAPC/"
				],
				[
					60,
					1,
					"insert",
					{
						"characters": "0"
					},
					"AQAAACIlAAAAAAAAIyUAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAIiUAAAAAAAAiJQAAAAAAAAAAAAAAAPC/"
				],
				[
					64,
					4,
					"left_delete",
					null,
					"BAAAAD4lAAAAAAAAPiUAAAAAAAAKAAAAZ2V0X3N5bWJvbD0lAAAAAAAAPSUAAAAAAAABAAAALjwlAAAAAAAAPCUAAAAAAAABAAAAczslAAAAAAAAOyUAAAAAAAABAAAAag",
					"AQAAAAAAAAABAAAAPiUAAAAAAABIJQAAAAAAAAAAAAAAAPC/"
				],
				[
					65,
					1,
					"paste",
					null,
					"AQAAADslAAAAAAAASSUAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAOyUAAAAAAAA7JQAAAAAAAAAAAAAAAPC/"
				],
				[
					67,
					1,
					"insert",
					{
						"characters": "ctx,"
					},
					"BAAAAEolAAAAAAAASyUAAAAAAAAAAAAASyUAAAAAAABMJQAAAAAAAAAAAABMJQAAAAAAAE0lAAAAAAAAAAAAAE0lAAAAAAAATiUAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAASiUAAAAAAABKJQAAAAAAAAAAAAAAAPC/"
				],
				[
					68,
					1,
					"insert",
					{
						"characters": " "
					},
					"AQAAAE4lAAAAAAAATyUAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAATiUAAAAAAABOJQAAAAAAAAAAAAAAAPC/"
				],
				[
					72,
					4,
					"left_delete",
					null,
					"BAAAAIElAAAAAAAAgSUAAAAAAAAMAAAAZ2V0X3Byb3BlcnR5gCUAAAAAAACAJQAAAAAAAAEAAAAufyUAAAAAAAB/JQAAAAAAAAEAAABzfiUAAAAAAAB+JQAAAAAAAAEAAABq",
					"AQAAAAAAAAABAAAAgSUAAAAAAACNJQAAAAAAAAAAAAAAAPC/"
				],
				[
					73,
					1,
					"insert",
					{
						"characters": "JS_GetProperty"
					},
					"DgAAAH4lAAAAAAAAfyUAAAAAAAAAAAAAfyUAAAAAAACAJQAAAAAAAAAAAACAJQAAAAAAAIElAAAAAAAAAAAAAIElAAAAAAAAgiUAAAAAAAAAAAAAgiUAAAAAAACDJQAAAAAAAAAAAACDJQAAAAAAAIQlAAAAAAAAAAAAAIQlAAAAAAAAhSUAAAAAAAAAAAAAhSUAAAAAAACGJQAAAAAAAAAAAACGJQAAAAAAAIclAAAAAAAAAAAAAIclAAAAAAAAiCUAAAAAAAAAAAAAiCUAAAAAAACJJQAAAAAAAAAAAACJJQAAAAAAAIolAAAAAAAAAAAAAIolAAAAAAAAiyUAAAAAAAAAAAAAiyUAAAAAAACMJQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAfiUAAAAAAAB+JQAAAAAAAAAAAAAAAPC/"
				],
				[
					75,
					1,
					"insert",
					{
						"characters": "ctx,"
					},
					"BAAAAI0lAAAAAAAAjiUAAAAAAAAAAAAAjiUAAAAAAACPJQAAAAAAAAAAAACPJQAAAAAAAJAlAAAAAAAAAAAAAJAlAAAAAAAAkSUAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAjSUAAAAAAACNJQAAAAAAAAAAAAAAAPC/"
				],
				[
					76,
					1,
					"insert",
					{
						"characters": " "
					},
					"AQAAAJElAAAAAAAAkiUAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAkSUAAAAAAACRJQAAAAAAAAAAAAAAAPC/"
				],
				[
					84,
					1,
					"insert",
					{
						"characters": " "
					},
					"AgAAAMUkAAAAAAAAxiQAAAAAAAAAAAAAxiQAAAAAAADGJAAAAAAAABAAAAAgIGpzcnQganMoY3R4KTsK",
					"AQAAAAAAAAABAAAAxSQAAAAAAADVJAAAAAAAAAAAAAAAAPC/"
				],
				[
					85,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAACZOQAAI2luY2x1ZGUgImpzYmluZGluZ3MuaHBwIgojaW5jbHVkZSAianNfc2l6ZS5ocHAiCiNpbmNsdWRlICJqc19hcnJheS5ocHAiCiNpbmNsdWRlICJqc19hbGxvYy5ocHAiCiNpbmNsdWRlICJ1dGlsLmhwcCIKCmVudW0ganNfc2l6ZV9maXRfdCB7IEpTX1NJWkVfRklUX1dJRFRIID0gMSwgSlNfU0laRV9GSVRfSEVJR0hUID0gMiwgSlNfU0laRV9GSVRfSU5TSURFLCBKU19TSVpFX0ZJVF9PVVRTSURFIH07CgpleHRlcm4gIkMiIHsKSlNWYWx1ZSBzaXplX3Byb3RvID0gSlNfVU5ERUZJTkVELCBzaXplX2NsYXNzID0gSlNfVU5ERUZJTkVEOwpKU0NsYXNzSUQganNfc2l6ZV9jbGFzc19pZCA9IDA7Cn0KCnRlbXBsYXRlPGNsYXNzIFQ+CnN0YXRpYyBpbmxpbmUgSlNTaXplRGF0YTxUPgpqc19zaXplX2ZpdChjb25zdCBKU1NpemVEYXRhPFQ+JiBzaXplLCBUIHRvLCBqc19zaXplX2ZpdF90IG1vZGUpIHsKICBKU1NpemVEYXRhPFQ+IHJldDsKICBzd2l0Y2gobW9kZSkgewogICAgY2FzZSBKU19TSVpFX0ZJVF9XSURUSDogewogICAgICByZXQud2lkdGggPSB0bzsKICAgICAgcmV0LmhlaWdodCA9IHNpemUuaGVpZ2h0ICogKHRvIC8gc2l6ZS53aWR0aCk7CiAgICAgIGJyZWFrOwogICAgfQogICAgY2FzZSBKU19TSVpFX0ZJVF9IRUlHSFQ6IHsKICAgICAgcmV0LndpZHRoID0gc2l6ZS53aWR0aCAqICh0byAvIHNpemUuaGVpZ2h0KTsKICAgICAgcmV0LmhlaWdodCA9IHRvOwogICAgICBicmVhazsKICAgIH0KICB9CiAgcmV0dXJuIHJldDsKfQoKdGVtcGxhdGU8Y2xhc3MgVD4Kc3RhdGljIEpTU2l6ZURhdGE8VD4KanNfc2l6ZV9maXQoY29uc3QgSlNTaXplRGF0YTxUPiYgc2l6ZSwgY29uc3QgSlNTaXplRGF0YTxUPiYgdG8sIGpzX3NpemVfZml0X3QgbW9kZSkgewogIEpTU2l6ZURhdGE8VD4gcmV0OwogIHN3aXRjaChtb2RlKSB7CiAgICBjYXNlIEpTX1NJWkVfRklUX0lOU0lERToKICAgIGNhc2UgSlNfU0laRV9GSVRfT1VUU0lERTogewogICAgICByZXQgPSBqc19zaXplX2ZpdChzaXplLCB0bywgSlNfU0laRV9GSVRfV0lEVEgpOwogICAgICBpZihtb2RlID09IEpTX1NJWkVfRklUX0lOU0lERSAmJiByZXQuaGVpZ2h0ID4gdG8uaGVpZ2h0KQogICAgICAgIHJldCA9IGpzX3NpemVfZml0KHNpemUsIHRvLmhlaWdodCwgSlNfU0laRV9GSVRfSEVJR0hUKTsKCiAgICAgIGJyZWFrOwogICAgfQogICAgZGVmYXVsdDogcmV0ID0ganNfc2l6ZV9maXQoc2l6ZSwgbW9kZSA9PSBKU19TSVpFX0ZJVF9XSURUSCA/IHRvLndpZHRoIDogdG8uaGVpZ2h0LCBtb2RlKTsgYnJlYWs7CiAgfQogIHJldHVybiByZXQ7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX3NpemVfY3RvcihKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IG5ld190YXJnZXQsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QqIGFyZ3YpIHsKICBKU1NpemVEYXRhPGRvdWJsZT4gc2l6ZSwgKnM7CiAgSlNWYWx1ZSBvYmogPSBKU19VTkRFRklORUQ7CiAgSlNWYWx1ZSBwcm90bzsKCiAgcyA9IGpzX2FsbG9jYXRlPEpTU2l6ZURhdGE8ZG91YmxlPj4oY3R4KTsKICBpZighcykKICAgIHJldHVybiBKU19FWENFUFRJT047CiAgbmV3KHMpIEpTU2l6ZURhdGE8ZG91YmxlPigpOwoKICBpZihhcmdjID4gMCkgewogICAgaWYoanNfc2l6ZV9yZWFkKGN0eCwgYXJndlswXSwgJnNpemUpKSB7CiAgICAgICpzID0gc2l6ZTsKICAgIH0gZWxzZSB7CiAgICAgIGlmKEpTX1RvRmxvYXQ2NChjdHgsICZzaXplLndpZHRoLCBhcmd2WzBdKSkKICAgICAgICBnb3RvIGZhaWw7CiAgICAgIGlmKGFyZ2MgPCAyIHx8IEpTX1RvRmxvYXQ2NChjdHgsICZzaXplLmhlaWdodCwgYXJndlsxXSkpCiAgICAgICAgZ290byBmYWlsOwoKICAgICAgKnMgPSBzaXplOwogICAgfQogIH0KCiAgLyogdXNpbmcgbmV3X3RhcmdldCB0byBnZXQgdGhlIHByb3RvdHlwZSBpcyBuZWNlc3Nhcnkgd2hlbiB0aGUKICAgICBjbGFzcyBpcyBleHRlbmRlZC4gKi8KICBwcm90byA9IEpTX0dldFByb3BlcnR5U3RyKGN0eCwgbmV3X3RhcmdldCwgInByb3RvdHlwZSIpOwogIGlmKEpTX0lzRXhjZXB0aW9uKHByb3RvKSkKICAgIGdvdG8gZmFpbDsKICBvYmogPSBKU19OZXdPYmplY3RQcm90b0NsYXNzKGN0eCwgcHJvdG8sIGpzX3NpemVfY2xhc3NfaWQpOwogIEpTX0ZyZWVWYWx1ZShjdHgsIHByb3RvKTsKICBpZihKU19Jc0V4Y2VwdGlvbihvYmopKQogICAgZ290byBmYWlsOwogIEpTX1NldE9wYXF1ZShvYmosIHMpOwogIHJldHVybiBvYmo7CmZhaWw6CiAganNfZGVhbGxvY2F0ZShjdHgsIHMpOwogIEpTX0ZyZWVWYWx1ZShjdHgsIG9iaik7CiAgcmV0dXJuIEpTX0VYQ0VQVElPTjsKfQoKVklTSUJMRSBKU1NpemVEYXRhPGRvdWJsZT4qCmpzX3NpemVfZGF0YShKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHZhbCkgewogIHJldHVybiBzdGF0aWNfY2FzdDxKU1NpemVEYXRhPGRvdWJsZT4qPihKU19HZXRPcGFxdWUyKGN0eCwgdmFsLCBqc19zaXplX2NsYXNzX2lkKSk7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX3NpemVfZ2V0KEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBtYWdpYykgewogIEpTU2l6ZURhdGE8ZG91YmxlPiogcyA9IGpzX3NpemVfZGF0YShjdHgsIHRoaXNfdmFsKTsKICBpZighcykKICAgIHJldHVybiBKU19FWENFUFRJT047CiAgaWYobWFnaWMgPT0gMCkKICAgIHJldHVybiBKU19OZXdGbG9hdDY0KGN0eCwgcy0+d2lkdGgpOwogIGVsc2UgaWYobWFnaWMgPT0gMSkKICAgIHJldHVybiBKU19OZXdGbG9hdDY0KGN0eCwgcy0+aGVpZ2h0KTsKICBlbHNlIGlmKG1hZ2ljID09IDIpCiAgICByZXR1cm4gSlNfTmV3RmxvYXQ2NChjdHgsIHMtPmFzcGVjdFJhdGlvKCkpOwogIGVsc2UgaWYobWFnaWMgPT0gMykKICAgIHJldHVybiBKU19OZXdCb29sKGN0eCwgcy0+ZW1wdHkoKSk7CiAgZWxzZSBpZihtYWdpYyA9PSA0KQogICAgcmV0dXJuIEpTX05ld0Zsb2F0NjQoY3R4LCBzLT5hcmVhKCkpOwogIHJldHVybiBKU19VTkRFRklORUQ7Cn0KClZJU0lCTEUgSlNWYWx1ZQpqc19zaXplX25ldyhKU0NvbnRleHQqIGN0eCwgZG91YmxlIHcsIGRvdWJsZSBoKSB7CiAgSlNWYWx1ZSByZXQ7CiAgSlNTaXplRGF0YTxkb3VibGU+KiBzOwoKICBpZihKU19Jc1VuZGVmaW5lZChzaXplX3Byb3RvKSkKICAgIGpzX3NpemVfaW5pdChjdHgsIE5VTEwpOwoKICByZXQgPSBKU19OZXdPYmplY3RQcm90b0NsYXNzKGN0eCwgc2l6ZV9wcm90bywganNfc2l6ZV9jbGFzc19pZCk7CgogIHMgPSBqc19hbGxvY2F0ZTxKU1NpemVEYXRhPGRvdWJsZT4+KGN0eCk7CiAgcy0+d2lkdGggPSB3IDw9IERCTF9FUFNJTE9OID8gMCA6IHc7CiAgcy0+aGVpZ2h0ID0gaCA8PSBEQkxfRVBTSUxPTiA/IDAgOiBoOwoKICBKU19TZXRPcGFxdWUocmV0LCBzKTsKICByZXR1cm4gcmV0Owp9CgpWSVNJQkxFIEpTVmFsdWUKanNfc2l6ZV93cmFwKEpTQ29udGV4dCogY3R4LCBjb25zdCBKU1NpemVEYXRhPGRvdWJsZT4mIHN6KSB7CiAgcmV0dXJuIGpzX3NpemVfbmV3KGN0eCwgc3oud2lkdGgsIHN6LmhlaWdodCk7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX3NpemVfc2V0KEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIEpTVmFsdWVDb25zdCB2YWwsIGludCBtYWdpYykgewogIEpTU2l6ZURhdGE8ZG91YmxlPiogcyA9IGpzX3NpemVfZGF0YShjdHgsIHRoaXNfdmFsKTsKICBkb3VibGUgdjsKICBpZighcykKICAgIHJldHVybiBKU19FWENFUFRJT047CiAgaWYoSlNfVG9GbG9hdDY0KGN0eCwgJnYsIHZhbCkpCiAgICByZXR1cm4gSlNfRVhDRVBUSU9OOwogIGlmKG1hZ2ljID09IDApCiAgICBzLT53aWR0aCA9IHY7CiAgZWxzZQogICAgcy0+aGVpZ2h0ID0gdjsKICByZXR1cm4gSlNfVU5ERUZJTkVEOwp9CgpzdGF0aWMgSlNWYWx1ZQpqc19zaXplX3RvX3N0cmluZyhKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2KSB7CiAgSlNTaXplRGF0YTxkb3VibGU+IHNpemUsICpzOwogIHN0ZDo6b3N0cmluZ3N0cmVhbSBvczsKICBjb25zdCBjaGFyKiBkZWxpbSA9ICLDlyI7CiAgaWYoKHMgPSBqc19zaXplX2RhdGEoY3R4LCB0aGlzX3ZhbCkpID09IG51bGxwdHIpIHsKICAgIGpzX3NpemVfcmVhZChjdHgsIHRoaXNfdmFsLCAmc2l6ZSk7CiAgfSBlbHNlIHsKICAgIHNpemUgPSAqczsKICB9CgogIGlmKGFyZ2MgPiAwKQogICAgZGVsaW0gPSBKU19Ub0NTdHJpbmcoY3R4LCBhcmd2WzBdKTsKCiAgb3MgPDwgc2l6ZS53aWR0aCA8PCBkZWxpbSA8PCBzaXplLmhlaWdodDsKCiAgcmV0dXJuIEpTX05ld1N0cmluZyhjdHgsIG9zLnN0cigpLmNfc3RyKCkpOwp9CnN0YXRpYyBKU1ZhbHVlCmpzX3NpemVfdG9fc291cmNlKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QqIGFyZ3YpIHsKICBKU1NpemVEYXRhPGRvdWJsZT4gc2l6ZSwgKnM7CiAgc3RkOjpvc3RyaW5nc3RyZWFtIG9zOwogIGlmKChzID0ganNfc2l6ZV9kYXRhKGN0eCwgdGhpc192YWwpKSA9PSBudWxscHRyKSB7CiAgICBqc19zaXplX3JlYWQoY3R4LCB0aGlzX3ZhbCwgJnNpemUpOwogIH0gZWxzZSB7CiAgICBzaXplID0gKnM7CiAgfQogIG9zIDw8ICJ7d2lkdGg6IiA8PCBzaXplLndpZHRoIDw8ICIsaGVpZ2h0OiIgPDwgc2l6ZS5oZWlnaHQgPDwgIn0iOwoKICByZXR1cm4gSlNfTmV3U3RyaW5nKGN0eCwgb3Muc3RyKCkuY19zdHIoKSk7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX3NpemVfaW5zcGVjdChKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2KSB7CiAgSlNTaXplRGF0YTxkb3VibGU+KiBzID0ganNfc2l6ZV9kYXRhKGN0eCwgdGhpc192YWwpOwogIEpTVmFsdWUgb2JqID0gSlNfTmV3T2JqZWN0UHJvdG8oY3R4LCBzaXplX3Byb3RvKTsKCiAgSlNfRGVmaW5lUHJvcGVydHlWYWx1ZVN0cihjdHgsIG9iaiwgIndpZHRoIiwgSlNfTmV3RmxvYXQ2NChjdHgsIHMtPndpZHRoKSwgSlNfUFJPUF9FTlVNRVJBQkxFKTsKICBKU19EZWZpbmVQcm9wZXJ0eVZhbHVlU3RyKGN0eCwgb2JqLCAiaGVpZ2h0IiwgSlNfTmV3RmxvYXQ2NChjdHgsIHMtPmhlaWdodCksIEpTX1BST1BfRU5VTUVSQUJMRSk7CiAgcmV0dXJuIG9iajsKfQoKc3RhdGljIEpTVmFsdWUKanNfc2l6ZV9mdW5jcyhKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2LCBpbnQgbWFnaWMpIHsKICBKU1NpemVEYXRhPGRvdWJsZT4gc2l6ZSwgKnMsICphOwogIEpTVmFsdWUgcmV0ID0gSlNfVU5ERUZJTkVEOwogIGlmKChzID0ganNfc2l6ZV9kYXRhKGN0eCwgdGhpc192YWwpKSA9PSBudWxscHRyKQogICAgcmV0dXJuIEpTX0VYQ0VQVElPTjsKCiAgc2l6ZSA9ICpzOwoKICBpZihtYWdpYyA9PSAwKSB7CiAgICBhID0ganNfc2l6ZV9kYXRhKGN0eCwgYXJndlswXSk7CiAgICBib29sIGVxdWFscyA9IHMtPndpZHRoID09IGEtPndpZHRoICYmIHMtPmhlaWdodCA9PSBhLT5oZWlnaHQ7CiAgICByZXQgPSBKU19OZXdCb29sKGN0eCwgZXF1YWxzKTsKICB9IGVsc2UgaWYobWFnaWMgPT0gMSkgewogICAgZG91YmxlIHdpZHRoLCBoZWlnaHQsIGY7CiAgICBpbnQzMl90IHByZWNpc2lvbiA9IDA7CiAgICBpZihhcmdjID4gMCkKICAgICAgSlNfVG9JbnQzMihjdHgsICZwcmVjaXNpb24sIGFyZ3ZbMF0pOwogICAgZiA9IHN0ZDo6cG93KDEwLCBwcmVjaXNpb24pOwogICAgd2lkdGggPSBzdGQ6OnJvdW5kKHNpemUud2lkdGggKiBmKSAvIGY7CiAgICBoZWlnaHQgPSBzdGQ6OnJvdW5kKHNpemUuaGVpZ2h0ICogZikgLyBmOwogICAgcmV0ID0ganNfc2l6ZV9uZXcoY3R4LCB3aWR0aCwgaGVpZ2h0KTsKICB9IGVsc2UgaWYobWFnaWMgPT0gMikgewogICAgcmV0ID0gSlNfTmV3T2JqZWN0KGN0eCk7CgogICAgSlNfU2V0UHJvcGVydHlTdHIoY3R4LCByZXQsICJ3aWR0aCIsIEpTX05ld0Zsb2F0NjQoY3R4LCBzaXplLndpZHRoKSk7CiAgICBKU19TZXRQcm9wZXJ0eVN0cihjdHgsIHJldCwgImhlaWdodCIsIEpTX05ld0Zsb2F0NjQoY3R4LCBzaXplLmhlaWdodCkpOwogIH0gZWxzZSBpZihtYWdpYyA9PSAzKSB7CiAgICByZXQgPSBKU19OZXdBcnJheShjdHgpOwoKICAgIEpTX1NldFByb3BlcnR5VWludDMyKGN0eCwgcmV0LCAwLCBKU19OZXdGbG9hdDY0KGN0eCwgc2l6ZS53aWR0aCkpOwogICAgSlNfU2V0UHJvcGVydHlVaW50MzIoY3R4LCByZXQsIDEsIEpTX05ld0Zsb2F0NjQoY3R4LCBzaXplLmhlaWdodCkpOwogIH0gZWxzZSBpZihtYWdpYyA9PSA0IHx8IG1hZ2ljID09IDUgfHwgbWFnaWMgPT0gNiB8fCBtYWdpYyA9PSA3KSB7CiAgICBKU1NpemVEYXRhPGRvdWJsZT4gb3RoZXIsIHJlc3VsdDsKICAgIGRvdWJsZSBhcmc7CgogICAganNfc2l6ZV9maXRfdCBmaXRfdHlwZSA9IGpzX3NpemVfZml0X3QobWFnaWMgLSAzKTsKICAgIGlmKG1hZ2ljID49IDYpIHt9CgogICAgaWYoanNfc2l6ZV9yZWFkKGN0eCwgYXJndlswXSwgJm90aGVyKSkgewogICAgICByZXN1bHQgPSBqc19zaXplX2ZpdChzaXplLCBvdGhlciwgZml0X3R5cGUpOwoKICAgIH0gZWxzZSBpZihmaXRfdHlwZSA9PSBKU19TSVpFX0ZJVF9XSURUSCB8fCBmaXRfdHlwZSA9PSBKU19TSVpFX0ZJVF9IRUlHSFQpIHsKICAgICAgSlNfVG9GbG9hdDY0KGN0eCwgJmFyZywgYXJndlswXSk7CiAgICAgIHJlc3VsdCA9IGpzX3NpemVfZml0KHNpemUsIGFyZywgZml0X3R5cGUpOwogICAgfQoKICAgIGlmKCFyZXN1bHQuZW1wdHkoKSkKICAgICAgcmV0ID0ganNfc2l6ZV9uZXcoY3R4LCByZXN1bHQud2lkdGgsIHJlc3VsdC5oZWlnaHQpOwogIH0KICByZXR1cm4gcmV0Owp9CgpzdGF0aWMgSlNWYWx1ZQpqc19zaXplX2FkZChKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2KSB7CiAgSlNTaXplRGF0YTxkb3VibGU+KnMsIHNpemU7CgogIGlmKChzID0ganNfc2l6ZV9kYXRhKGN0eCwgdGhpc192YWwpKSA9PSBudWxscHRyKQogICAgcmV0dXJuIEpTX0VYQ0VQVElPTjsKCiAgaWYoanNfc2l6ZV9yZWFkKGN0eCwgYXJndlswXSwgJnNpemUpKSB7CiAgICBzLT53aWR0aCArPSBzaXplLndpZHRoOwogICAgcy0+aGVpZ2h0ICs9IHNpemUuaGVpZ2h0OwogIH0gZWxzZSBpZihhcmdjID49IDIgJiYgSlNfSXNOdW1iZXIoYXJndlswXSkgJiYgSlNfSXNOdW1iZXIoYXJndlsxXSkpIHsKICAgIGRvdWJsZSB3aWR0aCwgaGVpZ2h0OwoKICAgIEpTX1RvRmxvYXQ2NChjdHgsICZ3aWR0aCwgYXJndlswXSk7CiAgICBKU19Ub0Zsb2F0NjQoY3R4LCAmaGVpZ2h0LCBhcmd2WzFdKTsKICAgIHMtPndpZHRoICs9IHdpZHRoOwogICAgcy0+aGVpZ2h0ICs9IGhlaWdodDsKICB9CgogIHJldHVybiBKU19EdXBWYWx1ZShjdHgsIHRoaXNfdmFsKTsKfQoKc3RhdGljIEpTVmFsdWUKanNfc2l6ZV9zdWIoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCogYXJndikgewogIEpTU2l6ZURhdGE8ZG91YmxlPipzLCBzaXplOwoKICBpZigocyA9IGpzX3NpemVfZGF0YShjdHgsIHRoaXNfdmFsKSkgPT0gbnVsbHB0cikKICAgIHJldHVybiBKU19FWENFUFRJT047CgogIGlmKGpzX3NpemVfcmVhZChjdHgsIGFyZ3ZbMF0sICZzaXplKSkgewogICAgcy0+d2lkdGggLT0gc2l6ZS53aWR0aDsKICAgIHMtPmhlaWdodCAtPSBzaXplLmhlaWdodDsKICB9IGVsc2UgaWYoYXJnYyA+PSAyICYmIEpTX0lzTnVtYmVyKGFyZ3ZbMF0pICYmIEpTX0lzTnVtYmVyKGFyZ3ZbMV0pKSB7CiAgICBkb3VibGUgd2lkdGgsIGhlaWdodDsKCiAgICBKU19Ub0Zsb2F0NjQoY3R4LCAmd2lkdGgsIGFyZ3ZbMF0pOwogICAgSlNfVG9GbG9hdDY0KGN0eCwgJmhlaWdodCwgYXJndlsxXSk7CiAgICBzLT53aWR0aCAtPSB3aWR0aDsKICAgIHMtPmhlaWdodCAtPSBoZWlnaHQ7CiAgfQoKICByZXR1cm4gSlNfRHVwVmFsdWUoY3R4LCB0aGlzX3ZhbCk7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX3NpemVfbXVsKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QqIGFyZ3YpIHsKICBKU1NpemVEYXRhPGRvdWJsZT4gc2l6ZSwgKnMgPSBqc19zaXplX2RhdGEoY3R4LCB0aGlzX3ZhbCk7CiAgZG91YmxlIGZhY3RvcjsKICBKU19Ub0Zsb2F0NjQoY3R4LCAmZmFjdG9yLCBhcmd2WzBdKTsKCiAgc2l6ZSA9ICpzOwogIHNpemUud2lkdGggKj0gZmFjdG9yOwogIHNpemUuaGVpZ2h0ICo9IGZhY3RvcjsKCiAgcmV0dXJuIGpzX3NpemVfd3JhcChjdHgsIHNpemUpOwp9CgpzdGF0aWMgSlNWYWx1ZQpqc19zaXplX2RpdihKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2KSB7CiAgSlNTaXplRGF0YTxkb3VibGU+IHNpemUsIG90aGVyLCAqcywgKmEgPSBudWxscHRyOwogIEpTVmFsdWUgcmV0ID0gSlNfRVhDRVBUSU9OOwogIGlmKChzID0ganNfc2l6ZV9kYXRhKGN0eCwgdGhpc192YWwpKSAhPSBudWxscHRyKSB7CiAgICBzaXplID0gKnM7CgogICAgaWYoSlNfSXNOdW1iZXIoYXJndlswXSkpIHsKICAgICAgZG91YmxlIGRpdmlkZXI7CiAgICAgIEpTX1RvRmxvYXQ2NChjdHgsICZkaXZpZGVyLCBhcmd2WzBdKTsKICAgICAgc2l6ZS53aWR0aCAvPSBkaXZpZGVyOwogICAgICBzaXplLmhlaWdodCAvPSBkaXZpZGVyOwogICAgICByZXQgPSBqc19zaXplX3dyYXAoY3R4LCBzaXplKTsKICAgIH0gZWxzZSB7CiAgICAgIGlmKChhID0ganNfc2l6ZV9kYXRhKGN0eCwgYXJndlswXSkpICE9IG51bGxwdHIpCiAgICAgICAgb3RoZXIgPSAqYTsKICAgICAgZWxzZSB7CiAgICAgICAganNfc2l6ZV9yZWFkKGN0eCwgYXJndlswXSwgJm90aGVyKTsKICAgICAgICBhID0gJm90aGVyOwogICAgICB9CiAgICAgIHN0ZDo6YXJyYXk8ZG91YmxlLCAyPiByZXN1bHR7c2l6ZS53aWR0aCAvIG90aGVyLndpZHRoLCBzaXplLmhlaWdodCAvIG90aGVyLmhlaWdodH07CiAgICAgIHJldCA9IEpTX05ld0FycmF5KGN0eCk7CgogICAgICBKU19TZXRQcm9wZXJ0eVVpbnQzMihjdHgsIHJldCwgMCwgSlNfTmV3RmxvYXQ2NChjdHgsIHJlc3VsdFswXSkpOwogICAgICBKU19TZXRQcm9wZXJ0eVVpbnQzMihjdHgsIHJldCwgMSwgSlNfTmV3RmxvYXQ2NChjdHgsIHJlc3VsdFsxXSkpOwogICAgfQogIH0KICByZXR1cm4gcmV0Owp9CgpzdGF0aWMgSlNBdG9tIGl0ZXJhdG9yX3N5bWJvbDsKCnN0YXRpYyBKU1ZhbHVlCmpzX3NpemVfc3ltYm9sX2l0ZXJhdG9yKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QqIGFyZ3YpIHsKICBKU1ZhbHVlIGFyciwgaXRlcjsKICAgYXJyID0ganNfc2l6ZV9mdW5jcyhjdHgsIHRoaXNfdmFsLCBhcmdjLCBhcmd2LCAzKTsKCiAgaWYoaXRlcmF0b3Jfc3ltYm9sPT0gMCkKICAgIGl0ZXJhdG9yX3N5bWJvbCA9IGpzX3N5bWJvbF9hdG9tKGN0eCwgIml0ZXJhdG9yIik7CgogIGlmKCFKU19Jc0Z1bmN0aW9uKGN0eCwgKGl0ZXIgPSBKU19HZXRQcm9wZXJ0eShjdHgsIGFyciwgaXRlcmF0b3Jfc3ltYm9sKSkpKQogICAgcmV0dXJuIEpTX0VYQ0VQVElPTjsKICByZXR1cm4gSlNfQ2FsbChjdHgsIGl0ZXIsIGFyciwgMCwgYXJndik7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX3NpemVfZnJvbShKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHNpemUsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QqIGFyZ3YpIHsKICBzdGQ6OmFycmF5PGRvdWJsZSwgMj4gYXJyYXk7CiAgSlNWYWx1ZSByZXQgPSBKU19FWENFUFRJT047CgogIGlmKEpTX0lzU3RyaW5nKGFyZ3ZbMF0pKSB7CiAgICBjb25zdCBjaGFyKiBzdHIgPSBKU19Ub0NTdHJpbmcoY3R4LCBhcmd2WzBdKTsKICAgIGNoYXIqIGVuZHB0ciA9IG51bGxwdHI7CiAgICBmb3Ioc2l6ZV90IGkgPSAwOyBpIDwgMjsgaSsrKSB7CiAgICAgIHdoaWxlKCFpc2RpZ2l0KCpzdHIpICYmICpzdHIgIT0gJy0nICYmICpzdHIgIT0gJysnICYmICEoKnN0ciA9PSAnLicgJiYgaXNkaWdpdChzdHJbMV0pKSkgc3RyKys7CiAgICAgIGlmKCpzdHIgPT0gJ1wwJykKICAgICAgICBicmVhazsKICAgICAgYXJyYXlbaV0gPSBzdHJ0b2Qoc3RyLCAmZW5kcHRyKTsKICAgICAgc3RyID0gZW5kcHRyOwogICAgfQogIH0gZWxzZSBpZihqc19pc19hcnJheShjdHgsIGFyZ3ZbMF0pKSB7CiAgICBqc19hcnJheV90bzxkb3VibGUsIDI+KGN0eCwgYXJndlswXSwgYXJyYXkpOwogIH0KICBpZihhcnJheVswXSA+IDAgJiYgYXJyYXlbMV0gPiAwKQogICAgcmV0ID0ganNfc2l6ZV9uZXcoY3R4LCBhcnJheVswXSwgYXJyYXlbMV0pOwogIHJldHVybiByZXQ7Cn0KCnZvaWQKanNfc2l6ZV9maW5hbGl6ZXIoSlNSdW50aW1lKiBydCwgSlNWYWx1ZSB2YWwpIHsKICBKU1NpemVEYXRhPGRvdWJsZT4qIHMgPSBzdGF0aWNfY2FzdDxKU1NpemVEYXRhPGRvdWJsZT4qPihKU19HZXRPcGFxdWUodmFsLCBqc19zaXplX2NsYXNzX2lkKSk7CiAgLyogTm90ZTogJ3MnIGNhbiBiZSBOVUxMIGluIGNhc2UgSlNfU2V0T3BhcXVlKCkgd2FzIG5vdCBjYWxsZWQgKi8KICBpZihzKQogICAganNfZGVhbGxvY2F0ZShydCwgcyk7Cn0KCkpTQ2xhc3NEZWYganNfc2l6ZV9jbGFzcyA9IHsKICAgIC5jbGFzc19uYW1lID0gIlNpemUiLAogICAgLmZpbmFsaXplciA9IGpzX3NpemVfZmluYWxpemVyLAp9OwoKY29uc3QgSlNDRnVuY3Rpb25MaXN0RW50cnkganNfc2l6ZV9wcm90b19mdW5jc1tdID0ge0pTX0NHRVRTRVRfRU5VTUVSQUJMRV9ERUYoIndpZHRoIiwganNfc2l6ZV9nZXQsIGpzX3NpemVfc2V0LCAwKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEpTX0NHRVRTRVRfRU5VTUVSQUJMRV9ERUYoImhlaWdodCIsIGpzX3NpemVfZ2V0LCBqc19zaXplX3NldCwgMSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBKU19DR0VUU0VUX0VOVU1FUkFCTEVfREVGKCJhc3BlY3QiLCBqc19zaXplX2dldCwgMCwgMiksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBKU19DR0VUU0VUX0VOVU1FUkFCTEVfREVGKCJlbXB0eSIsIGpzX3NpemVfZ2V0LCAwLCAzKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEpTX0NHRVRTRVRfRU5VTUVSQUJMRV9ERUYoImFyZWEiLCBqc19zaXplX2dldCwgMCwgNCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBKU19DRlVOQ19NQUdJQ19ERUYoImVxdWFscyIsIDEsIGpzX3NpemVfZnVuY3MsIDApLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJyb3VuZCIsIDAsIGpzX3NpemVfZnVuY3MsIDEpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJ0b09iamVjdCIsIDAsIGpzX3NpemVfZnVuY3MsIDIpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJ0b0FycmF5IiwgMCwganNfc2l6ZV9mdW5jcywgMyksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBKU19DRlVOQ19NQUdJQ19ERUYoImZpdFdpZHRoIiwgMCwganNfc2l6ZV9mdW5jcywgNCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBKU19DRlVOQ19NQUdJQ19ERUYoImZpdEhlaWdodCIsIDAsIGpzX3NpemVfZnVuY3MsIDUpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJmaXRJbnNpZGUiLCAwLCBqc19zaXplX2Z1bmNzLCA2KSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEpTX0NGVU5DX01BR0lDX0RFRigiZml0T3V0c2lkZSIsIDAsIGpzX3NpemVfZnVuY3MsIDcpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSlNfQ0ZVTkNfREVGKCJ0b1N0cmluZyIsIDAsIGpzX3NpemVfdG9fc3RyaW5nKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEpTX0NGVU5DX0RFRigidG9Tb3VyY2UiLCAwLCBqc19zaXplX3RvX3NvdXJjZSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBKU19DRlVOQ19ERUYoImFkZCIsIDEsIGpzX3NpemVfYWRkKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEpTX0NGVU5DX0RFRigic3ViIiwgMSwganNfc2l6ZV9zdWIpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSlNfQ0ZVTkNfREVGKCJtdWwiLCAxLCBqc19zaXplX211bCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBKU19DRlVOQ19ERUYoImRpdiIsIDEsIGpzX3NpemVfZGl2KSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEpTX0FMSUFTX0RFRigidmFsdWVzIiwgInRvQXJyYXkiKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEpTX0NGVU5DX0RFRigiW1N5bWJvbC5pdGVyYXRvcl0iLCAwLCBqc19zaXplX3N5bWJvbF9pdGVyYXRvciksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBKU19QUk9QX1NUUklOR19ERUYoIltTeW1ib2wudG9TdHJpbmdUYWddIiwgIlNpemUiLCBKU19QUk9QX0NPTkZJR1VSQUJMRSl9OwoKY29uc3QgSlNDRnVuY3Rpb25MaXN0RW50cnkganNfc2l6ZV9zdGF0aWNfZnVuY3NbXSA9IHtKU19DRlVOQ19ERUYoImZyb20iLCAxLCBqc19zaXplX2Zyb20pfTsKCmludApqc19zaXplX2luaXQoSlNDb250ZXh0KiBjdHgsIEpTTW9kdWxlRGVmKiBtKSB7CgogIGlmKGpzX3NpemVfY2xhc3NfaWQgPT0gMCkgewogICAgLyogY3JlYXRlIHRoZSBTaXplIGNsYXNzICovCiAgICBKU19OZXdDbGFzc0lEKCZqc19zaXplX2NsYXNzX2lkKTsKICAgIEpTX05ld0NsYXNzKEpTX0dldFJ1bnRpbWUoY3R4KSwganNfc2l6ZV9jbGFzc19pZCwgJmpzX3NpemVfY2xhc3MpOwoKICAgIHNpemVfcHJvdG8gPSBKU19OZXdPYmplY3QoY3R4KTsKICAgIEpTX1NldFByb3BlcnR5RnVuY3Rpb25MaXN0KGN0eCwgc2l6ZV9wcm90bywganNfc2l6ZV9wcm90b19mdW5jcywgY291bnRvZihqc19zaXplX3Byb3RvX2Z1bmNzKSk7CgogICAgSlNfU2V0Q2xhc3NQcm90byhjdHgsIGpzX3NpemVfY2xhc3NfaWQsIHNpemVfcHJvdG8pOwoKICAgIHNpemVfY2xhc3MgPSBKU19OZXdDRnVuY3Rpb24yKGN0eCwganNfc2l6ZV9jdG9yLCAiU2l6ZSIsIDAsIEpTX0NGVU5DX2NvbnN0cnVjdG9yLCAwKTsKICAgIC8qIHNldCBwcm90by5jb25zdHJ1Y3RvciBhbmQgY3Rvci5wcm90b3R5cGUgKi8KICAgIEpTX1NldENvbnN0cnVjdG9yKGN0eCwgc2l6ZV9jbGFzcywgc2l6ZV9wcm90byk7CiAgICBKU19TZXRQcm9wZXJ0eUZ1bmN0aW9uTGlzdChjdHgsIHNpemVfY2xhc3MsIGpzX3NpemVfc3RhdGljX2Z1bmNzLCBjb3VudG9mKGpzX3NpemVfc3RhdGljX2Z1bmNzKSk7CgogICAganNfc2V0X2luc3BlY3RfbWV0aG9kKGN0eCwgc2l6ZV9wcm90bywganNfc2l6ZV9pbnNwZWN0KTsKICB9CgogIGlmKG0pCiAgICBKU19TZXRNb2R1bGVFeHBvcnQoY3R4LCBtLCAiU2l6ZSIsIHNpemVfY2xhc3MpOwogIC8qZWxzZQogICAgSlNfU2V0UHJvcGVydHlTdHIoY3R4LCAqc3RhdGljX2Nhc3Q8SlNWYWx1ZSo+KG0pLCBuYW1lLCBzaXplX2NsYXNzKTsqLwogIHJldHVybiAwOwp9CgpleHRlcm4gIkMiIFZJU0lCTEUgdm9pZApqc19zaXplX2V4cG9ydChKU0NvbnRleHQqIGN0eCwgSlNNb2R1bGVEZWYqIG0pIHsKICBKU19BZGRNb2R1bGVFeHBvcnQoY3R4LCBtLCAiU2l6ZSIpOwp9Cgp2b2lkCmpzX3NpemVfY29uc3RydWN0b3IoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWUgcGFyZW50LCBjb25zdCBjaGFyKiBuYW1lKSB7CiAgaWYoSlNfSXNVbmRlZmluZWQoc2l6ZV9jbGFzcykpCiAgICBqc19zaXplX2luaXQoY3R4LCAwKTsKCiAgSlNfU2V0UHJvcGVydHlTdHIoY3R4LCBwYXJlbnQsIG5hbWUgPyBuYW1lIDogIlNpemUiLCBzaXplX2NsYXNzKTsKfQoKI2lmZGVmIEpTX1NJWkVfTU9EVUxFCiNkZWZpbmUgSlNfSU5JVF9NT0RVTEUgLypWSVNJQkxFKi8ganNfaW5pdF9tb2R1bGUKI2Vsc2UKI2RlZmluZSBKU19JTklUX01PRFVMRSAvKlZJU0lCTEUqLyBqc19pbml0X21vZHVsZV9zaXplCiNlbmRpZgoKZXh0ZXJuICJDIiBKU01vZHVsZURlZioKSlNfSU5JVF9NT0RVTEUoSlNDb250ZXh0KiBjdHgsIGNvbnN0IGNoYXIqIG1vZHVsZV9uYW1lKSB7CiAgSlNNb2R1bGVEZWYqIG07CiAgbSA9IEpTX05ld0NNb2R1bGUoY3R4LCBtb2R1bGVfbmFtZSwgJmpzX3NpemVfaW5pdCk7CiAgaWYoIW0pCiAgICByZXR1cm4gTlVMTDsKICBqc19zaXplX2V4cG9ydChjdHgsIG0pOwogIHJldHVybiBtOwp9AAAAAAAAAACYOQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAxiQAAAAAAADGJAAAAAAAAAAAAAAAAPC/"
				],
				[
					86,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAACZOQAAI2luY2x1ZGUgImpzYmluZGluZ3MuaHBwIgojaW5jbHVkZSAianNfc2l6ZS5ocHAiCiNpbmNsdWRlICJqc19hcnJheS5ocHAiCiNpbmNsdWRlICJqc19hbGxvYy5ocHAiCiNpbmNsdWRlICJ1dGlsLmhwcCIKCmVudW0ganNfc2l6ZV9maXRfdCB7IEpTX1NJWkVfRklUX1dJRFRIID0gMSwgSlNfU0laRV9GSVRfSEVJR0hUID0gMiwgSlNfU0laRV9GSVRfSU5TSURFLCBKU19TSVpFX0ZJVF9PVVRTSURFIH07CgpleHRlcm4gIkMiIHsKSlNWYWx1ZSBzaXplX3Byb3RvID0gSlNfVU5ERUZJTkVELCBzaXplX2NsYXNzID0gSlNfVU5ERUZJTkVEOwpKU0NsYXNzSUQganNfc2l6ZV9jbGFzc19pZCA9IDA7Cn0KCnRlbXBsYXRlPGNsYXNzIFQ+CnN0YXRpYyBpbmxpbmUgSlNTaXplRGF0YTxUPgpqc19zaXplX2ZpdChjb25zdCBKU1NpemVEYXRhPFQ+JiBzaXplLCBUIHRvLCBqc19zaXplX2ZpdF90IG1vZGUpIHsKICBKU1NpemVEYXRhPFQ+IHJldDsKICBzd2l0Y2gobW9kZSkgewogICAgY2FzZSBKU19TSVpFX0ZJVF9XSURUSDogewogICAgICByZXQud2lkdGggPSB0bzsKICAgICAgcmV0LmhlaWdodCA9IHNpemUuaGVpZ2h0ICogKHRvIC8gc2l6ZS53aWR0aCk7CiAgICAgIGJyZWFrOwogICAgfQogICAgY2FzZSBKU19TSVpFX0ZJVF9IRUlHSFQ6IHsKICAgICAgcmV0LndpZHRoID0gc2l6ZS53aWR0aCAqICh0byAvIHNpemUuaGVpZ2h0KTsKICAgICAgcmV0LmhlaWdodCA9IHRvOwogICAgICBicmVhazsKICAgIH0KICB9CiAgcmV0dXJuIHJldDsKfQoKdGVtcGxhdGU8Y2xhc3MgVD4Kc3RhdGljIEpTU2l6ZURhdGE8VD4KanNfc2l6ZV9maXQoY29uc3QgSlNTaXplRGF0YTxUPiYgc2l6ZSwgY29uc3QgSlNTaXplRGF0YTxUPiYgdG8sIGpzX3NpemVfZml0X3QgbW9kZSkgewogIEpTU2l6ZURhdGE8VD4gcmV0OwogIHN3aXRjaChtb2RlKSB7CiAgICBjYXNlIEpTX1NJWkVfRklUX0lOU0lERToKICAgIGNhc2UgSlNfU0laRV9GSVRfT1VUU0lERTogewogICAgICByZXQgPSBqc19zaXplX2ZpdChzaXplLCB0bywgSlNfU0laRV9GSVRfV0lEVEgpOwogICAgICBpZihtb2RlID09IEpTX1NJWkVfRklUX0lOU0lERSAmJiByZXQuaGVpZ2h0ID4gdG8uaGVpZ2h0KQogICAgICAgIHJldCA9IGpzX3NpemVfZml0KHNpemUsIHRvLmhlaWdodCwgSlNfU0laRV9GSVRfSEVJR0hUKTsKCiAgICAgIGJyZWFrOwogICAgfQogICAgZGVmYXVsdDogcmV0ID0ganNfc2l6ZV9maXQoc2l6ZSwgbW9kZSA9PSBKU19TSVpFX0ZJVF9XSURUSCA/IHRvLndpZHRoIDogdG8uaGVpZ2h0LCBtb2RlKTsgYnJlYWs7CiAgfQogIHJldHVybiByZXQ7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX3NpemVfY3RvcihKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IG5ld190YXJnZXQsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QqIGFyZ3YpIHsKICBKU1NpemVEYXRhPGRvdWJsZT4gc2l6ZSwgKnM7CiAgSlNWYWx1ZSBvYmogPSBKU19VTkRFRklORUQ7CiAgSlNWYWx1ZSBwcm90bzsKCiAgcyA9IGpzX2FsbG9jYXRlPEpTU2l6ZURhdGE8ZG91YmxlPj4oY3R4KTsKICBpZighcykKICAgIHJldHVybiBKU19FWENFUFRJT047CiAgbmV3KHMpIEpTU2l6ZURhdGE8ZG91YmxlPigpOwoKICBpZihhcmdjID4gMCkgewogICAgaWYoanNfc2l6ZV9yZWFkKGN0eCwgYXJndlswXSwgJnNpemUpKSB7CiAgICAgICpzID0gc2l6ZTsKICAgIH0gZWxzZSB7CiAgICAgIGlmKEpTX1RvRmxvYXQ2NChjdHgsICZzaXplLndpZHRoLCBhcmd2WzBdKSkKICAgICAgICBnb3RvIGZhaWw7CiAgICAgIGlmKGFyZ2MgPCAyIHx8IEpTX1RvRmxvYXQ2NChjdHgsICZzaXplLmhlaWdodCwgYXJndlsxXSkpCiAgICAgICAgZ290byBmYWlsOwoKICAgICAgKnMgPSBzaXplOwogICAgfQogIH0KCiAgLyogdXNpbmcgbmV3X3RhcmdldCB0byBnZXQgdGhlIHByb3RvdHlwZSBpcyBuZWNlc3Nhcnkgd2hlbiB0aGUKICAgICBjbGFzcyBpcyBleHRlbmRlZC4gKi8KICBwcm90byA9IEpTX0dldFByb3BlcnR5U3RyKGN0eCwgbmV3X3RhcmdldCwgInByb3RvdHlwZSIpOwogIGlmKEpTX0lzRXhjZXB0aW9uKHByb3RvKSkKICAgIGdvdG8gZmFpbDsKICBvYmogPSBKU19OZXdPYmplY3RQcm90b0NsYXNzKGN0eCwgcHJvdG8sIGpzX3NpemVfY2xhc3NfaWQpOwogIEpTX0ZyZWVWYWx1ZShjdHgsIHByb3RvKTsKICBpZihKU19Jc0V4Y2VwdGlvbihvYmopKQogICAgZ290byBmYWlsOwogIEpTX1NldE9wYXF1ZShvYmosIHMpOwogIHJldHVybiBvYmo7CmZhaWw6CiAganNfZGVhbGxvY2F0ZShjdHgsIHMpOwogIEpTX0ZyZWVWYWx1ZShjdHgsIG9iaik7CiAgcmV0dXJuIEpTX0VYQ0VQVElPTjsKfQoKVklTSUJMRSBKU1NpemVEYXRhPGRvdWJsZT4qCmpzX3NpemVfZGF0YShKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHZhbCkgewogIHJldHVybiBzdGF0aWNfY2FzdDxKU1NpemVEYXRhPGRvdWJsZT4qPihKU19HZXRPcGFxdWUyKGN0eCwgdmFsLCBqc19zaXplX2NsYXNzX2lkKSk7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX3NpemVfZ2V0KEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBtYWdpYykgewogIEpTU2l6ZURhdGE8ZG91YmxlPiogcyA9IGpzX3NpemVfZGF0YShjdHgsIHRoaXNfdmFsKTsKICBpZighcykKICAgIHJldHVybiBKU19FWENFUFRJT047CiAgaWYobWFnaWMgPT0gMCkKICAgIHJldHVybiBKU19OZXdGbG9hdDY0KGN0eCwgcy0+d2lkdGgpOwogIGVsc2UgaWYobWFnaWMgPT0gMSkKICAgIHJldHVybiBKU19OZXdGbG9hdDY0KGN0eCwgcy0+aGVpZ2h0KTsKICBlbHNlIGlmKG1hZ2ljID09IDIpCiAgICByZXR1cm4gSlNfTmV3RmxvYXQ2NChjdHgsIHMtPmFzcGVjdFJhdGlvKCkpOwogIGVsc2UgaWYobWFnaWMgPT0gMykKICAgIHJldHVybiBKU19OZXdCb29sKGN0eCwgcy0+ZW1wdHkoKSk7CiAgZWxzZSBpZihtYWdpYyA9PSA0KQogICAgcmV0dXJuIEpTX05ld0Zsb2F0NjQoY3R4LCBzLT5hcmVhKCkpOwogIHJldHVybiBKU19VTkRFRklORUQ7Cn0KClZJU0lCTEUgSlNWYWx1ZQpqc19zaXplX25ldyhKU0NvbnRleHQqIGN0eCwgZG91YmxlIHcsIGRvdWJsZSBoKSB7CiAgSlNWYWx1ZSByZXQ7CiAgSlNTaXplRGF0YTxkb3VibGU+KiBzOwoKICBpZihKU19Jc1VuZGVmaW5lZChzaXplX3Byb3RvKSkKICAgIGpzX3NpemVfaW5pdChjdHgsIE5VTEwpOwoKICByZXQgPSBKU19OZXdPYmplY3RQcm90b0NsYXNzKGN0eCwgc2l6ZV9wcm90bywganNfc2l6ZV9jbGFzc19pZCk7CgogIHMgPSBqc19hbGxvY2F0ZTxKU1NpemVEYXRhPGRvdWJsZT4+KGN0eCk7CiAgcy0+d2lkdGggPSB3IDw9IERCTF9FUFNJTE9OID8gMCA6IHc7CiAgcy0+aGVpZ2h0ID0gaCA8PSBEQkxfRVBTSUxPTiA/IDAgOiBoOwoKICBKU19TZXRPcGFxdWUocmV0LCBzKTsKICByZXR1cm4gcmV0Owp9CgpWSVNJQkxFIEpTVmFsdWUKanNfc2l6ZV93cmFwKEpTQ29udGV4dCogY3R4LCBjb25zdCBKU1NpemVEYXRhPGRvdWJsZT4mIHN6KSB7CiAgcmV0dXJuIGpzX3NpemVfbmV3KGN0eCwgc3oud2lkdGgsIHN6LmhlaWdodCk7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX3NpemVfc2V0KEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIEpTVmFsdWVDb25zdCB2YWwsIGludCBtYWdpYykgewogIEpTU2l6ZURhdGE8ZG91YmxlPiogcyA9IGpzX3NpemVfZGF0YShjdHgsIHRoaXNfdmFsKTsKICBkb3VibGUgdjsKICBpZighcykKICAgIHJldHVybiBKU19FWENFUFRJT047CiAgaWYoSlNfVG9GbG9hdDY0KGN0eCwgJnYsIHZhbCkpCiAgICByZXR1cm4gSlNfRVhDRVBUSU9OOwogIGlmKG1hZ2ljID09IDApCiAgICBzLT53aWR0aCA9IHY7CiAgZWxzZQogICAgcy0+aGVpZ2h0ID0gdjsKICByZXR1cm4gSlNfVU5ERUZJTkVEOwp9CgpzdGF0aWMgSlNWYWx1ZQpqc19zaXplX3RvX3N0cmluZyhKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2KSB7CiAgSlNTaXplRGF0YTxkb3VibGU+IHNpemUsICpzOwogIHN0ZDo6b3N0cmluZ3N0cmVhbSBvczsKICBjb25zdCBjaGFyKiBkZWxpbSA9ICLDlyI7CiAgaWYoKHMgPSBqc19zaXplX2RhdGEoY3R4LCB0aGlzX3ZhbCkpID09IG51bGxwdHIpIHsKICAgIGpzX3NpemVfcmVhZChjdHgsIHRoaXNfdmFsLCAmc2l6ZSk7CiAgfSBlbHNlIHsKICAgIHNpemUgPSAqczsKICB9CgogIGlmKGFyZ2MgPiAwKQogICAgZGVsaW0gPSBKU19Ub0NTdHJpbmcoY3R4LCBhcmd2WzBdKTsKCiAgb3MgPDwgc2l6ZS53aWR0aCA8PCBkZWxpbSA8PCBzaXplLmhlaWdodDsKCiAgcmV0dXJuIEpTX05ld1N0cmluZyhjdHgsIG9zLnN0cigpLmNfc3RyKCkpOwp9CnN0YXRpYyBKU1ZhbHVlCmpzX3NpemVfdG9fc291cmNlKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QqIGFyZ3YpIHsKICBKU1NpemVEYXRhPGRvdWJsZT4gc2l6ZSwgKnM7CiAgc3RkOjpvc3RyaW5nc3RyZWFtIG9zOwogIGlmKChzID0ganNfc2l6ZV9kYXRhKGN0eCwgdGhpc192YWwpKSA9PSBudWxscHRyKSB7CiAgICBqc19zaXplX3JlYWQoY3R4LCB0aGlzX3ZhbCwgJnNpemUpOwogIH0gZWxzZSB7CiAgICBzaXplID0gKnM7CiAgfQogIG9zIDw8ICJ7d2lkdGg6IiA8PCBzaXplLndpZHRoIDw8ICIsaGVpZ2h0OiIgPDwgc2l6ZS5oZWlnaHQgPDwgIn0iOwoKICByZXR1cm4gSlNfTmV3U3RyaW5nKGN0eCwgb3Muc3RyKCkuY19zdHIoKSk7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX3NpemVfaW5zcGVjdChKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2KSB7CiAgSlNTaXplRGF0YTxkb3VibGU+KiBzID0ganNfc2l6ZV9kYXRhKGN0eCwgdGhpc192YWwpOwogIEpTVmFsdWUgb2JqID0gSlNfTmV3T2JqZWN0UHJvdG8oY3R4LCBzaXplX3Byb3RvKTsKCiAgSlNfRGVmaW5lUHJvcGVydHlWYWx1ZVN0cihjdHgsIG9iaiwgIndpZHRoIiwgSlNfTmV3RmxvYXQ2NChjdHgsIHMtPndpZHRoKSwgSlNfUFJPUF9FTlVNRVJBQkxFKTsKICBKU19EZWZpbmVQcm9wZXJ0eVZhbHVlU3RyKGN0eCwgb2JqLCAiaGVpZ2h0IiwgSlNfTmV3RmxvYXQ2NChjdHgsIHMtPmhlaWdodCksIEpTX1BST1BfRU5VTUVSQUJMRSk7CiAgcmV0dXJuIG9iajsKfQoKc3RhdGljIEpTVmFsdWUKanNfc2l6ZV9mdW5jcyhKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2LCBpbnQgbWFnaWMpIHsKICBKU1NpemVEYXRhPGRvdWJsZT4gc2l6ZSwgKnMsICphOwogIEpTVmFsdWUgcmV0ID0gSlNfVU5ERUZJTkVEOwogIGlmKChzID0ganNfc2l6ZV9kYXRhKGN0eCwgdGhpc192YWwpKSA9PSBudWxscHRyKQogICAgcmV0dXJuIEpTX0VYQ0VQVElPTjsKCiAgc2l6ZSA9ICpzOwoKICBpZihtYWdpYyA9PSAwKSB7CiAgICBhID0ganNfc2l6ZV9kYXRhKGN0eCwgYXJndlswXSk7CiAgICBib29sIGVxdWFscyA9IHMtPndpZHRoID09IGEtPndpZHRoICYmIHMtPmhlaWdodCA9PSBhLT5oZWlnaHQ7CiAgICByZXQgPSBKU19OZXdCb29sKGN0eCwgZXF1YWxzKTsKICB9IGVsc2UgaWYobWFnaWMgPT0gMSkgewogICAgZG91YmxlIHdpZHRoLCBoZWlnaHQsIGY7CiAgICBpbnQzMl90IHByZWNpc2lvbiA9IDA7CiAgICBpZihhcmdjID4gMCkKICAgICAgSlNfVG9JbnQzMihjdHgsICZwcmVjaXNpb24sIGFyZ3ZbMF0pOwogICAgZiA9IHN0ZDo6cG93KDEwLCBwcmVjaXNpb24pOwogICAgd2lkdGggPSBzdGQ6OnJvdW5kKHNpemUud2lkdGggKiBmKSAvIGY7CiAgICBoZWlnaHQgPSBzdGQ6OnJvdW5kKHNpemUuaGVpZ2h0ICogZikgLyBmOwogICAgcmV0ID0ganNfc2l6ZV9uZXcoY3R4LCB3aWR0aCwgaGVpZ2h0KTsKICB9IGVsc2UgaWYobWFnaWMgPT0gMikgewogICAgcmV0ID0gSlNfTmV3T2JqZWN0KGN0eCk7CgogICAgSlNfU2V0UHJvcGVydHlTdHIoY3R4LCByZXQsICJ3aWR0aCIsIEpTX05ld0Zsb2F0NjQoY3R4LCBzaXplLndpZHRoKSk7CiAgICBKU19TZXRQcm9wZXJ0eVN0cihjdHgsIHJldCwgImhlaWdodCIsIEpTX05ld0Zsb2F0NjQoY3R4LCBzaXplLmhlaWdodCkpOwogIH0gZWxzZSBpZihtYWdpYyA9PSAzKSB7CiAgICByZXQgPSBKU19OZXdBcnJheShjdHgpOwoKICAgIEpTX1NldFByb3BlcnR5VWludDMyKGN0eCwgcmV0LCAwLCBKU19OZXdGbG9hdDY0KGN0eCwgc2l6ZS53aWR0aCkpOwogICAgSlNfU2V0UHJvcGVydHlVaW50MzIoY3R4LCByZXQsIDEsIEpTX05ld0Zsb2F0NjQoY3R4LCBzaXplLmhlaWdodCkpOwogIH0gZWxzZSBpZihtYWdpYyA9PSA0IHx8IG1hZ2ljID09IDUgfHwgbWFnaWMgPT0gNiB8fCBtYWdpYyA9PSA3KSB7CiAgICBKU1NpemVEYXRhPGRvdWJsZT4gb3RoZXIsIHJlc3VsdDsKICAgIGRvdWJsZSBhcmc7CgogICAganNfc2l6ZV9maXRfdCBmaXRfdHlwZSA9IGpzX3NpemVfZml0X3QobWFnaWMgLSAzKTsKICAgIGlmKG1hZ2ljID49IDYpIHt9CgogICAgaWYoanNfc2l6ZV9yZWFkKGN0eCwgYXJndlswXSwgJm90aGVyKSkgewogICAgICByZXN1bHQgPSBqc19zaXplX2ZpdChzaXplLCBvdGhlciwgZml0X3R5cGUpOwoKICAgIH0gZWxzZSBpZihmaXRfdHlwZSA9PSBKU19TSVpFX0ZJVF9XSURUSCB8fCBmaXRfdHlwZSA9PSBKU19TSVpFX0ZJVF9IRUlHSFQpIHsKICAgICAgSlNfVG9GbG9hdDY0KGN0eCwgJmFyZywgYXJndlswXSk7CiAgICAgIHJlc3VsdCA9IGpzX3NpemVfZml0KHNpemUsIGFyZywgZml0X3R5cGUpOwogICAgfQoKICAgIGlmKCFyZXN1bHQuZW1wdHkoKSkKICAgICAgcmV0ID0ganNfc2l6ZV9uZXcoY3R4LCByZXN1bHQud2lkdGgsIHJlc3VsdC5oZWlnaHQpOwogIH0KICByZXR1cm4gcmV0Owp9CgpzdGF0aWMgSlNWYWx1ZQpqc19zaXplX2FkZChKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2KSB7CiAgSlNTaXplRGF0YTxkb3VibGU+KnMsIHNpemU7CgogIGlmKChzID0ganNfc2l6ZV9kYXRhKGN0eCwgdGhpc192YWwpKSA9PSBudWxscHRyKQogICAgcmV0dXJuIEpTX0VYQ0VQVElPTjsKCiAgaWYoanNfc2l6ZV9yZWFkKGN0eCwgYXJndlswXSwgJnNpemUpKSB7CiAgICBzLT53aWR0aCArPSBzaXplLndpZHRoOwogICAgcy0+aGVpZ2h0ICs9IHNpemUuaGVpZ2h0OwogIH0gZWxzZSBpZihhcmdjID49IDIgJiYgSlNfSXNOdW1iZXIoYXJndlswXSkgJiYgSlNfSXNOdW1iZXIoYXJndlsxXSkpIHsKICAgIGRvdWJsZSB3aWR0aCwgaGVpZ2h0OwoKICAgIEpTX1RvRmxvYXQ2NChjdHgsICZ3aWR0aCwgYXJndlswXSk7CiAgICBKU19Ub0Zsb2F0NjQoY3R4LCAmaGVpZ2h0LCBhcmd2WzFdKTsKICAgIHMtPndpZHRoICs9IHdpZHRoOwogICAgcy0+aGVpZ2h0ICs9IGhlaWdodDsKICB9CgogIHJldHVybiBKU19EdXBWYWx1ZShjdHgsIHRoaXNfdmFsKTsKfQoKc3RhdGljIEpTVmFsdWUKanNfc2l6ZV9zdWIoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCogYXJndikgewogIEpTU2l6ZURhdGE8ZG91YmxlPipzLCBzaXplOwoKICBpZigocyA9IGpzX3NpemVfZGF0YShjdHgsIHRoaXNfdmFsKSkgPT0gbnVsbHB0cikKICAgIHJldHVybiBKU19FWENFUFRJT047CgogIGlmKGpzX3NpemVfcmVhZChjdHgsIGFyZ3ZbMF0sICZzaXplKSkgewogICAgcy0+d2lkdGggLT0gc2l6ZS53aWR0aDsKICAgIHMtPmhlaWdodCAtPSBzaXplLmhlaWdodDsKICB9IGVsc2UgaWYoYXJnYyA+PSAyICYmIEpTX0lzTnVtYmVyKGFyZ3ZbMF0pICYmIEpTX0lzTnVtYmVyKGFyZ3ZbMV0pKSB7CiAgICBkb3VibGUgd2lkdGgsIGhlaWdodDsKCiAgICBKU19Ub0Zsb2F0NjQoY3R4LCAmd2lkdGgsIGFyZ3ZbMF0pOwogICAgSlNfVG9GbG9hdDY0KGN0eCwgJmhlaWdodCwgYXJndlsxXSk7CiAgICBzLT53aWR0aCAtPSB3aWR0aDsKICAgIHMtPmhlaWdodCAtPSBoZWlnaHQ7CiAgfQoKICByZXR1cm4gSlNfRHVwVmFsdWUoY3R4LCB0aGlzX3ZhbCk7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX3NpemVfbXVsKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QqIGFyZ3YpIHsKICBKU1NpemVEYXRhPGRvdWJsZT4gc2l6ZSwgKnMgPSBqc19zaXplX2RhdGEoY3R4LCB0aGlzX3ZhbCk7CiAgZG91YmxlIGZhY3RvcjsKICBKU19Ub0Zsb2F0NjQoY3R4LCAmZmFjdG9yLCBhcmd2WzBdKTsKCiAgc2l6ZSA9ICpzOwogIHNpemUud2lkdGggKj0gZmFjdG9yOwogIHNpemUuaGVpZ2h0ICo9IGZhY3RvcjsKCiAgcmV0dXJuIGpzX3NpemVfd3JhcChjdHgsIHNpemUpOwp9CgpzdGF0aWMgSlNWYWx1ZQpqc19zaXplX2RpdihKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2KSB7CiAgSlNTaXplRGF0YTxkb3VibGU+IHNpemUsIG90aGVyLCAqcywgKmEgPSBudWxscHRyOwogIEpTVmFsdWUgcmV0ID0gSlNfRVhDRVBUSU9OOwogIGlmKChzID0ganNfc2l6ZV9kYXRhKGN0eCwgdGhpc192YWwpKSAhPSBudWxscHRyKSB7CiAgICBzaXplID0gKnM7CgogICAgaWYoSlNfSXNOdW1iZXIoYXJndlswXSkpIHsKICAgICAgZG91YmxlIGRpdmlkZXI7CiAgICAgIEpTX1RvRmxvYXQ2NChjdHgsICZkaXZpZGVyLCBhcmd2WzBdKTsKICAgICAgc2l6ZS53aWR0aCAvPSBkaXZpZGVyOwogICAgICBzaXplLmhlaWdodCAvPSBkaXZpZGVyOwogICAgICByZXQgPSBqc19zaXplX3dyYXAoY3R4LCBzaXplKTsKICAgIH0gZWxzZSB7CiAgICAgIGlmKChhID0ganNfc2l6ZV9kYXRhKGN0eCwgYXJndlswXSkpICE9IG51bGxwdHIpCiAgICAgICAgb3RoZXIgPSAqYTsKICAgICAgZWxzZSB7CiAgICAgICAganNfc2l6ZV9yZWFkKGN0eCwgYXJndlswXSwgJm90aGVyKTsKICAgICAgICBhID0gJm90aGVyOwogICAgICB9CiAgICAgIHN0ZDo6YXJyYXk8ZG91YmxlLCAyPiByZXN1bHR7c2l6ZS53aWR0aCAvIG90aGVyLndpZHRoLCBzaXplLmhlaWdodCAvIG90aGVyLmhlaWdodH07CiAgICAgIHJldCA9IEpTX05ld0FycmF5KGN0eCk7CgogICAgICBKU19TZXRQcm9wZXJ0eVVpbnQzMihjdHgsIHJldCwgMCwgSlNfTmV3RmxvYXQ2NChjdHgsIHJlc3VsdFswXSkpOwogICAgICBKU19TZXRQcm9wZXJ0eVVpbnQzMihjdHgsIHJldCwgMSwgSlNfTmV3RmxvYXQ2NChjdHgsIHJlc3VsdFsxXSkpOwogICAgfQogIH0KICByZXR1cm4gcmV0Owp9CgpzdGF0aWMgSlNBdG9tIGl0ZXJhdG9yX3N5bWJvbDsKCnN0YXRpYyBKU1ZhbHVlCmpzX3NpemVfc3ltYm9sX2l0ZXJhdG9yKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QqIGFyZ3YpIHsKICBKU1ZhbHVlIGFyciwgaXRlcjsKICBhcnIgPSBqc19zaXplX2Z1bmNzKGN0eCwgdGhpc192YWwsIGFyZ2MsIGFyZ3YsIDMpOwoKICBpZihpdGVyYXRvcl9zeW1ib2wgPT0gMCkKICAgIGl0ZXJhdG9yX3N5bWJvbCA9IGpzX3N5bWJvbF9hdG9tKGN0eCwgIml0ZXJhdG9yIik7CgogIGlmKCFKU19Jc0Z1bmN0aW9uKGN0eCwgKGl0ZXIgPSBKU19HZXRQcm9wZXJ0eShjdHgsIGFyciwgaXRlcmF0b3Jfc3ltYm9sKSkpKQogICAgcmV0dXJuIEpTX0VYQ0VQVElPTjsKICByZXR1cm4gSlNfQ2FsbChjdHgsIGl0ZXIsIGFyciwgMCwgYXJndik7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX3NpemVfZnJvbShKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHNpemUsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QqIGFyZ3YpIHsKICBzdGQ6OmFycmF5PGRvdWJsZSwgMj4gYXJyYXk7CiAgSlNWYWx1ZSByZXQgPSBKU19FWENFUFRJT047CgogIGlmKEpTX0lzU3RyaW5nKGFyZ3ZbMF0pKSB7CiAgICBjb25zdCBjaGFyKiBzdHIgPSBKU19Ub0NTdHJpbmcoY3R4LCBhcmd2WzBdKTsKICAgIGNoYXIqIGVuZHB0ciA9IG51bGxwdHI7CiAgICBmb3Ioc2l6ZV90IGkgPSAwOyBpIDwgMjsgaSsrKSB7CiAgICAgIHdoaWxlKCFpc2RpZ2l0KCpzdHIpICYmICpzdHIgIT0gJy0nICYmICpzdHIgIT0gJysnICYmICEoKnN0ciA9PSAnLicgJiYgaXNkaWdpdChzdHJbMV0pKSkgc3RyKys7CiAgICAgIGlmKCpzdHIgPT0gJ1wwJykKICAgICAgICBicmVhazsKICAgICAgYXJyYXlbaV0gPSBzdHJ0b2Qoc3RyLCAmZW5kcHRyKTsKICAgICAgc3RyID0gZW5kcHRyOwogICAgfQogIH0gZWxzZSBpZihqc19pc19hcnJheShjdHgsIGFyZ3ZbMF0pKSB7CiAgICBqc19hcnJheV90bzxkb3VibGUsIDI+KGN0eCwgYXJndlswXSwgYXJyYXkpOwogIH0KICBpZihhcnJheVswXSA+IDAgJiYgYXJyYXlbMV0gPiAwKQogICAgcmV0ID0ganNfc2l6ZV9uZXcoY3R4LCBhcnJheVswXSwgYXJyYXlbMV0pOwogIHJldHVybiByZXQ7Cn0KCnZvaWQKanNfc2l6ZV9maW5hbGl6ZXIoSlNSdW50aW1lKiBydCwgSlNWYWx1ZSB2YWwpIHsKICBKU1NpemVEYXRhPGRvdWJsZT4qIHMgPSBzdGF0aWNfY2FzdDxKU1NpemVEYXRhPGRvdWJsZT4qPihKU19HZXRPcGFxdWUodmFsLCBqc19zaXplX2NsYXNzX2lkKSk7CiAgLyogTm90ZTogJ3MnIGNhbiBiZSBOVUxMIGluIGNhc2UgSlNfU2V0T3BhcXVlKCkgd2FzIG5vdCBjYWxsZWQgKi8KICBpZihzKQogICAganNfZGVhbGxvY2F0ZShydCwgcyk7Cn0KCkpTQ2xhc3NEZWYganNfc2l6ZV9jbGFzcyA9IHsKICAgIC5jbGFzc19uYW1lID0gIlNpemUiLAogICAgLmZpbmFsaXplciA9IGpzX3NpemVfZmluYWxpemVyLAp9OwoKY29uc3QgSlNDRnVuY3Rpb25MaXN0RW50cnkganNfc2l6ZV9wcm90b19mdW5jc1tdID0ge0pTX0NHRVRTRVRfRU5VTUVSQUJMRV9ERUYoIndpZHRoIiwganNfc2l6ZV9nZXQsIGpzX3NpemVfc2V0LCAwKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEpTX0NHRVRTRVRfRU5VTUVSQUJMRV9ERUYoImhlaWdodCIsIGpzX3NpemVfZ2V0LCBqc19zaXplX3NldCwgMSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBKU19DR0VUU0VUX0VOVU1FUkFCTEVfREVGKCJhc3BlY3QiLCBqc19zaXplX2dldCwgMCwgMiksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBKU19DR0VUU0VUX0VOVU1FUkFCTEVfREVGKCJlbXB0eSIsIGpzX3NpemVfZ2V0LCAwLCAzKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEpTX0NHRVRTRVRfRU5VTUVSQUJMRV9ERUYoImFyZWEiLCBqc19zaXplX2dldCwgMCwgNCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBKU19DRlVOQ19NQUdJQ19ERUYoImVxdWFscyIsIDEsIGpzX3NpemVfZnVuY3MsIDApLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJyb3VuZCIsIDAsIGpzX3NpemVfZnVuY3MsIDEpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJ0b09iamVjdCIsIDAsIGpzX3NpemVfZnVuY3MsIDIpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJ0b0FycmF5IiwgMCwganNfc2l6ZV9mdW5jcywgMyksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBKU19DRlVOQ19NQUdJQ19ERUYoImZpdFdpZHRoIiwgMCwganNfc2l6ZV9mdW5jcywgNCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBKU19DRlVOQ19NQUdJQ19ERUYoImZpdEhlaWdodCIsIDAsIGpzX3NpemVfZnVuY3MsIDUpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJmaXRJbnNpZGUiLCAwLCBqc19zaXplX2Z1bmNzLCA2KSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEpTX0NGVU5DX01BR0lDX0RFRigiZml0T3V0c2lkZSIsIDAsIGpzX3NpemVfZnVuY3MsIDcpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSlNfQ0ZVTkNfREVGKCJ0b1N0cmluZyIsIDAsIGpzX3NpemVfdG9fc3RyaW5nKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEpTX0NGVU5DX0RFRigidG9Tb3VyY2UiLCAwLCBqc19zaXplX3RvX3NvdXJjZSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBKU19DRlVOQ19ERUYoImFkZCIsIDEsIGpzX3NpemVfYWRkKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEpTX0NGVU5DX0RFRigic3ViIiwgMSwganNfc2l6ZV9zdWIpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSlNfQ0ZVTkNfREVGKCJtdWwiLCAxLCBqc19zaXplX211bCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBKU19DRlVOQ19ERUYoImRpdiIsIDEsIGpzX3NpemVfZGl2KSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEpTX0FMSUFTX0RFRigidmFsdWVzIiwgInRvQXJyYXkiKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEpTX0NGVU5DX0RFRigiW1N5bWJvbC5pdGVyYXRvcl0iLCAwLCBqc19zaXplX3N5bWJvbF9pdGVyYXRvciksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBKU19QUk9QX1NUUklOR19ERUYoIltTeW1ib2wudG9TdHJpbmdUYWddIiwgIlNpemUiLCBKU19QUk9QX0NPTkZJR1VSQUJMRSl9OwoKY29uc3QgSlNDRnVuY3Rpb25MaXN0RW50cnkganNfc2l6ZV9zdGF0aWNfZnVuY3NbXSA9IHtKU19DRlVOQ19ERUYoImZyb20iLCAxLCBqc19zaXplX2Zyb20pfTsKCmludApqc19zaXplX2luaXQoSlNDb250ZXh0KiBjdHgsIEpTTW9kdWxlRGVmKiBtKSB7CgogIGlmKGpzX3NpemVfY2xhc3NfaWQgPT0gMCkgewogICAgLyogY3JlYXRlIHRoZSBTaXplIGNsYXNzICovCiAgICBKU19OZXdDbGFzc0lEKCZqc19zaXplX2NsYXNzX2lkKTsKICAgIEpTX05ld0NsYXNzKEpTX0dldFJ1bnRpbWUoY3R4KSwganNfc2l6ZV9jbGFzc19pZCwgJmpzX3NpemVfY2xhc3MpOwoKICAgIHNpemVfcHJvdG8gPSBKU19OZXdPYmplY3QoY3R4KTsKICAgIEpTX1NldFByb3BlcnR5RnVuY3Rpb25MaXN0KGN0eCwgc2l6ZV9wcm90bywganNfc2l6ZV9wcm90b19mdW5jcywgY291bnRvZihqc19zaXplX3Byb3RvX2Z1bmNzKSk7CgogICAgSlNfU2V0Q2xhc3NQcm90byhjdHgsIGpzX3NpemVfY2xhc3NfaWQsIHNpemVfcHJvdG8pOwoKICAgIHNpemVfY2xhc3MgPSBKU19OZXdDRnVuY3Rpb24yKGN0eCwganNfc2l6ZV9jdG9yLCAiU2l6ZSIsIDAsIEpTX0NGVU5DX2NvbnN0cnVjdG9yLCAwKTsKICAgIC8qIHNldCBwcm90by5jb25zdHJ1Y3RvciBhbmQgY3Rvci5wcm90b3R5cGUgKi8KICAgIEpTX1NldENvbnN0cnVjdG9yKGN0eCwgc2l6ZV9jbGFzcywgc2l6ZV9wcm90byk7CiAgICBKU19TZXRQcm9wZXJ0eUZ1bmN0aW9uTGlzdChjdHgsIHNpemVfY2xhc3MsIGpzX3NpemVfc3RhdGljX2Z1bmNzLCBjb3VudG9mKGpzX3NpemVfc3RhdGljX2Z1bmNzKSk7CgogICAganNfc2V0X2luc3BlY3RfbWV0aG9kKGN0eCwgc2l6ZV9wcm90bywganNfc2l6ZV9pbnNwZWN0KTsKICB9CgogIGlmKG0pCiAgICBKU19TZXRNb2R1bGVFeHBvcnQoY3R4LCBtLCAiU2l6ZSIsIHNpemVfY2xhc3MpOwogIC8qZWxzZQogICAgSlNfU2V0UHJvcGVydHlTdHIoY3R4LCAqc3RhdGljX2Nhc3Q8SlNWYWx1ZSo+KG0pLCBuYW1lLCBzaXplX2NsYXNzKTsqLwogIHJldHVybiAwOwp9CgpleHRlcm4gIkMiIFZJU0lCTEUgdm9pZApqc19zaXplX2V4cG9ydChKU0NvbnRleHQqIGN0eCwgSlNNb2R1bGVEZWYqIG0pIHsKICBKU19BZGRNb2R1bGVFeHBvcnQoY3R4LCBtLCAiU2l6ZSIpOwp9Cgp2b2lkCmpzX3NpemVfY29uc3RydWN0b3IoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWUgcGFyZW50LCBjb25zdCBjaGFyKiBuYW1lKSB7CiAgaWYoSlNfSXNVbmRlZmluZWQoc2l6ZV9jbGFzcykpCiAgICBqc19zaXplX2luaXQoY3R4LCAwKTsKCiAgSlNfU2V0UHJvcGVydHlTdHIoY3R4LCBwYXJlbnQsIG5hbWUgPyBuYW1lIDogIlNpemUiLCBzaXplX2NsYXNzKTsKfQoKI2lmZGVmIEpTX1NJWkVfTU9EVUxFCiNkZWZpbmUgSlNfSU5JVF9NT0RVTEUgLypWSVNJQkxFKi8ganNfaW5pdF9tb2R1bGUKI2Vsc2UKI2RlZmluZSBKU19JTklUX01PRFVMRSAvKlZJU0lCTEUqLyBqc19pbml0X21vZHVsZV9zaXplCiNlbmRpZgoKZXh0ZXJuICJDIiBKU01vZHVsZURlZioKSlNfSU5JVF9NT0RVTEUoSlNDb250ZXh0KiBjdHgsIGNvbnN0IGNoYXIqIG1vZHVsZV9uYW1lKSB7CiAgSlNNb2R1bGVEZWYqIG07CiAgbSA9IEpTX05ld0NNb2R1bGUoY3R4LCBtb2R1bGVfbmFtZSwgJmpzX3NpemVfaW5pdCk7CiAgaWYoIW0pCiAgICByZXR1cm4gTlVMTDsKICBqc19zaXplX2V4cG9ydChjdHgsIG0pOwogIHJldHVybiBtOwp9AAAAAAAAAACYOQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAxiQAAAAAAADGJAAAAAAAAAAAAAAAAPC/"
				],
				[
					105,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAACZOQAAI2luY2x1ZGUgImpzYmluZGluZ3MuaHBwIgojaW5jbHVkZSAianNfc2l6ZS5ocHAiCiNpbmNsdWRlICJqc19hcnJheS5ocHAiCiNpbmNsdWRlICJqc19hbGxvYy5ocHAiCiNpbmNsdWRlICJ1dGlsLmhwcCIKCmVudW0ganNfc2l6ZV9maXRfdCB7IEpTX1NJWkVfRklUX1dJRFRIID0gMSwgSlNfU0laRV9GSVRfSEVJR0hUID0gMiwgSlNfU0laRV9GSVRfSU5TSURFLCBKU19TSVpFX0ZJVF9PVVRTSURFIH07CgpleHRlcm4gIkMiIHsKSlNWYWx1ZSBzaXplX3Byb3RvID0gSlNfVU5ERUZJTkVELCBzaXplX2NsYXNzID0gSlNfVU5ERUZJTkVEOwpKU0NsYXNzSUQganNfc2l6ZV9jbGFzc19pZCA9IDA7Cn0KCnRlbXBsYXRlPGNsYXNzIFQ+CnN0YXRpYyBpbmxpbmUgSlNTaXplRGF0YTxUPgpqc19zaXplX2ZpdChjb25zdCBKU1NpemVEYXRhPFQ+JiBzaXplLCBUIHRvLCBqc19zaXplX2ZpdF90IG1vZGUpIHsKICBKU1NpemVEYXRhPFQ+IHJldDsKICBzd2l0Y2gobW9kZSkgewogICAgY2FzZSBKU19TSVpFX0ZJVF9XSURUSDogewogICAgICByZXQud2lkdGggPSB0bzsKICAgICAgcmV0LmhlaWdodCA9IHNpemUuaGVpZ2h0ICogKHRvIC8gc2l6ZS53aWR0aCk7CiAgICAgIGJyZWFrOwogICAgfQogICAgY2FzZSBKU19TSVpFX0ZJVF9IRUlHSFQ6IHsKICAgICAgcmV0LndpZHRoID0gc2l6ZS53aWR0aCAqICh0byAvIHNpemUuaGVpZ2h0KTsKICAgICAgcmV0LmhlaWdodCA9IHRvOwogICAgICBicmVhazsKICAgIH0KICB9CiAgcmV0dXJuIHJldDsKfQoKdGVtcGxhdGU8Y2xhc3MgVD4Kc3RhdGljIEpTU2l6ZURhdGE8VD4KanNfc2l6ZV9maXQoY29uc3QgSlNTaXplRGF0YTxUPiYgc2l6ZSwgY29uc3QgSlNTaXplRGF0YTxUPiYgdG8sIGpzX3NpemVfZml0X3QgbW9kZSkgewogIEpTU2l6ZURhdGE8VD4gcmV0OwogIHN3aXRjaChtb2RlKSB7CiAgICBjYXNlIEpTX1NJWkVfRklUX0lOU0lERToKICAgIGNhc2UgSlNfU0laRV9GSVRfT1VUU0lERTogewogICAgICByZXQgPSBqc19zaXplX2ZpdChzaXplLCB0bywgSlNfU0laRV9GSVRfV0lEVEgpOwogICAgICBpZihtb2RlID09IEpTX1NJWkVfRklUX0lOU0lERSAmJiByZXQuaGVpZ2h0ID4gdG8uaGVpZ2h0KQogICAgICAgIHJldCA9IGpzX3NpemVfZml0KHNpemUsIHRvLmhlaWdodCwgSlNfU0laRV9GSVRfSEVJR0hUKTsKCiAgICAgIGJyZWFrOwogICAgfQogICAgZGVmYXVsdDogcmV0ID0ganNfc2l6ZV9maXQoc2l6ZSwgbW9kZSA9PSBKU19TSVpFX0ZJVF9XSURUSCA/IHRvLndpZHRoIDogdG8uaGVpZ2h0LCBtb2RlKTsgYnJlYWs7CiAgfQogIHJldHVybiByZXQ7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX3NpemVfY3RvcihKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IG5ld190YXJnZXQsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QqIGFyZ3YpIHsKICBKU1NpemVEYXRhPGRvdWJsZT4gc2l6ZSwgKnM7CiAgSlNWYWx1ZSBvYmogPSBKU19VTkRFRklORUQ7CiAgSlNWYWx1ZSBwcm90bzsKCiAgcyA9IGpzX2FsbG9jYXRlPEpTU2l6ZURhdGE8ZG91YmxlPj4oY3R4KTsKICBpZighcykKICAgIHJldHVybiBKU19FWENFUFRJT047CiAgbmV3KHMpIEpTU2l6ZURhdGE8ZG91YmxlPigpOwoKICBpZihhcmdjID4gMCkgewogICAgaWYoanNfc2l6ZV9yZWFkKGN0eCwgYXJndlswXSwgJnNpemUpKSB7CiAgICAgICpzID0gc2l6ZTsKICAgIH0gZWxzZSB7CiAgICAgIGlmKEpTX1RvRmxvYXQ2NChjdHgsICZzaXplLndpZHRoLCBhcmd2WzBdKSkKICAgICAgICBnb3RvIGZhaWw7CiAgICAgIGlmKGFyZ2MgPCAyIHx8IEpTX1RvRmxvYXQ2NChjdHgsICZzaXplLmhlaWdodCwgYXJndlsxXSkpCiAgICAgICAgZ290byBmYWlsOwoKICAgICAgKnMgPSBzaXplOwogICAgfQogIH0KCiAgLyogdXNpbmcgbmV3X3RhcmdldCB0byBnZXQgdGhlIHByb3RvdHlwZSBpcyBuZWNlc3Nhcnkgd2hlbiB0aGUKICAgICBjbGFzcyBpcyBleHRlbmRlZC4gKi8KICBwcm90byA9IEpTX0dldFByb3BlcnR5U3RyKGN0eCwgbmV3X3RhcmdldCwgInByb3RvdHlwZSIpOwogIGlmKEpTX0lzRXhjZXB0aW9uKHByb3RvKSkKICAgIGdvdG8gZmFpbDsKICBvYmogPSBKU19OZXdPYmplY3RQcm90b0NsYXNzKGN0eCwgcHJvdG8sIGpzX3NpemVfY2xhc3NfaWQpOwogIEpTX0ZyZWVWYWx1ZShjdHgsIHByb3RvKTsKICBpZihKU19Jc0V4Y2VwdGlvbihvYmopKQogICAgZ290byBmYWlsOwogIEpTX1NldE9wYXF1ZShvYmosIHMpOwogIHJldHVybiBvYmo7CmZhaWw6CiAganNfZGVhbGxvY2F0ZShjdHgsIHMpOwogIEpTX0ZyZWVWYWx1ZShjdHgsIG9iaik7CiAgcmV0dXJuIEpTX0VYQ0VQVElPTjsKfQoKVklTSUJMRSBKU1NpemVEYXRhPGRvdWJsZT4qCmpzX3NpemVfZGF0YShKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHZhbCkgewogIHJldHVybiBzdGF0aWNfY2FzdDxKU1NpemVEYXRhPGRvdWJsZT4qPihKU19HZXRPcGFxdWUyKGN0eCwgdmFsLCBqc19zaXplX2NsYXNzX2lkKSk7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX3NpemVfZ2V0KEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBtYWdpYykgewogIEpTU2l6ZURhdGE8ZG91YmxlPiogcyA9IGpzX3NpemVfZGF0YShjdHgsIHRoaXNfdmFsKTsKICBpZighcykKICAgIHJldHVybiBKU19FWENFUFRJT047CiAgaWYobWFnaWMgPT0gMCkKICAgIHJldHVybiBKU19OZXdGbG9hdDY0KGN0eCwgcy0+d2lkdGgpOwogIGVsc2UgaWYobWFnaWMgPT0gMSkKICAgIHJldHVybiBKU19OZXdGbG9hdDY0KGN0eCwgcy0+aGVpZ2h0KTsKICBlbHNlIGlmKG1hZ2ljID09IDIpCiAgICByZXR1cm4gSlNfTmV3RmxvYXQ2NChjdHgsIHMtPmFzcGVjdFJhdGlvKCkpOwogIGVsc2UgaWYobWFnaWMgPT0gMykKICAgIHJldHVybiBKU19OZXdCb29sKGN0eCwgcy0+ZW1wdHkoKSk7CiAgZWxzZSBpZihtYWdpYyA9PSA0KQogICAgcmV0dXJuIEpTX05ld0Zsb2F0NjQoY3R4LCBzLT5hcmVhKCkpOwogIHJldHVybiBKU19VTkRFRklORUQ7Cn0KClZJU0lCTEUgSlNWYWx1ZQpqc19zaXplX25ldyhKU0NvbnRleHQqIGN0eCwgZG91YmxlIHcsIGRvdWJsZSBoKSB7CiAgSlNWYWx1ZSByZXQ7CiAgSlNTaXplRGF0YTxkb3VibGU+KiBzOwoKICBpZihKU19Jc1VuZGVmaW5lZChzaXplX3Byb3RvKSkKICAgIGpzX3NpemVfaW5pdChjdHgsIE5VTEwpOwoKICByZXQgPSBKU19OZXdPYmplY3RQcm90b0NsYXNzKGN0eCwgc2l6ZV9wcm90bywganNfc2l6ZV9jbGFzc19pZCk7CgogIHMgPSBqc19hbGxvY2F0ZTxKU1NpemVEYXRhPGRvdWJsZT4+KGN0eCk7CiAgcy0+d2lkdGggPSB3IDw9IERCTF9FUFNJTE9OID8gMCA6IHc7CiAgcy0+aGVpZ2h0ID0gaCA8PSBEQkxfRVBTSUxPTiA/IDAgOiBoOwoKICBKU19TZXRPcGFxdWUocmV0LCBzKTsKICByZXR1cm4gcmV0Owp9CgpWSVNJQkxFIEpTVmFsdWUKanNfc2l6ZV93cmFwKEpTQ29udGV4dCogY3R4LCBjb25zdCBKU1NpemVEYXRhPGRvdWJsZT4mIHN6KSB7CiAgcmV0dXJuIGpzX3NpemVfbmV3KGN0eCwgc3oud2lkdGgsIHN6LmhlaWdodCk7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX3NpemVfc2V0KEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIEpTVmFsdWVDb25zdCB2YWwsIGludCBtYWdpYykgewogIEpTU2l6ZURhdGE8ZG91YmxlPiogcyA9IGpzX3NpemVfZGF0YShjdHgsIHRoaXNfdmFsKTsKICBkb3VibGUgdjsKICBpZighcykKICAgIHJldHVybiBKU19FWENFUFRJT047CiAgaWYoSlNfVG9GbG9hdDY0KGN0eCwgJnYsIHZhbCkpCiAgICByZXR1cm4gSlNfRVhDRVBUSU9OOwogIGlmKG1hZ2ljID09IDApCiAgICBzLT53aWR0aCA9IHY7CiAgZWxzZQogICAgcy0+aGVpZ2h0ID0gdjsKICByZXR1cm4gSlNfVU5ERUZJTkVEOwp9CgpzdGF0aWMgSlNWYWx1ZQpqc19zaXplX3RvX3N0cmluZyhKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2KSB7CiAgSlNTaXplRGF0YTxkb3VibGU+IHNpemUsICpzOwogIHN0ZDo6b3N0cmluZ3N0cmVhbSBvczsKICBjb25zdCBjaGFyKiBkZWxpbSA9ICLDlyI7CiAgaWYoKHMgPSBqc19zaXplX2RhdGEoY3R4LCB0aGlzX3ZhbCkpID09IG51bGxwdHIpIHsKICAgIGpzX3NpemVfcmVhZChjdHgsIHRoaXNfdmFsLCAmc2l6ZSk7CiAgfSBlbHNlIHsKICAgIHNpemUgPSAqczsKICB9CgogIGlmKGFyZ2MgPiAwKQogICAgZGVsaW0gPSBKU19Ub0NTdHJpbmcoY3R4LCBhcmd2WzBdKTsKCiAgb3MgPDwgc2l6ZS53aWR0aCA8PCBkZWxpbSA8PCBzaXplLmhlaWdodDsKCiAgcmV0dXJuIEpTX05ld1N0cmluZyhjdHgsIG9zLnN0cigpLmNfc3RyKCkpOwp9CnN0YXRpYyBKU1ZhbHVlCmpzX3NpemVfdG9fc291cmNlKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QqIGFyZ3YpIHsKICBKU1NpemVEYXRhPGRvdWJsZT4gc2l6ZSwgKnM7CiAgc3RkOjpvc3RyaW5nc3RyZWFtIG9zOwogIGlmKChzID0ganNfc2l6ZV9kYXRhKGN0eCwgdGhpc192YWwpKSA9PSBudWxscHRyKSB7CiAgICBqc19zaXplX3JlYWQoY3R4LCB0aGlzX3ZhbCwgJnNpemUpOwogIH0gZWxzZSB7CiAgICBzaXplID0gKnM7CiAgfQogIG9zIDw8ICJ7d2lkdGg6IiA8PCBzaXplLndpZHRoIDw8ICIsaGVpZ2h0OiIgPDwgc2l6ZS5oZWlnaHQgPDwgIn0iOwoKICByZXR1cm4gSlNfTmV3U3RyaW5nKGN0eCwgb3Muc3RyKCkuY19zdHIoKSk7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX3NpemVfaW5zcGVjdChKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2KSB7CiAgSlNTaXplRGF0YTxkb3VibGU+KiBzID0ganNfc2l6ZV9kYXRhKGN0eCwgdGhpc192YWwpOwogIEpTVmFsdWUgb2JqID0gSlNfTmV3T2JqZWN0UHJvdG8oY3R4LCBzaXplX3Byb3RvKTsKCiAgSlNfRGVmaW5lUHJvcGVydHlWYWx1ZVN0cihjdHgsIG9iaiwgIndpZHRoIiwgSlNfTmV3RmxvYXQ2NChjdHgsIHMtPndpZHRoKSwgSlNfUFJPUF9FTlVNRVJBQkxFKTsKICBKU19EZWZpbmVQcm9wZXJ0eVZhbHVlU3RyKGN0eCwgb2JqLCAiaGVpZ2h0IiwgSlNfTmV3RmxvYXQ2NChjdHgsIHMtPmhlaWdodCksIEpTX1BST1BfRU5VTUVSQUJMRSk7CiAgcmV0dXJuIG9iajsKfQoKc3RhdGljIEpTVmFsdWUKanNfc2l6ZV9mdW5jcyhKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2LCBpbnQgbWFnaWMpIHsKICBKU1NpemVEYXRhPGRvdWJsZT4gc2l6ZSwgKnMsICphOwogIEpTVmFsdWUgcmV0ID0gSlNfVU5ERUZJTkVEOwogIGlmKChzID0ganNfc2l6ZV9kYXRhKGN0eCwgdGhpc192YWwpKSA9PSBudWxscHRyKQogICAgcmV0dXJuIEpTX0VYQ0VQVElPTjsKCiAgc2l6ZSA9ICpzOwoKICBpZihtYWdpYyA9PSAwKSB7CiAgICBhID0ganNfc2l6ZV9kYXRhKGN0eCwgYXJndlswXSk7CiAgICBib29sIGVxdWFscyA9IHMtPndpZHRoID09IGEtPndpZHRoICYmIHMtPmhlaWdodCA9PSBhLT5oZWlnaHQ7CiAgICByZXQgPSBKU19OZXdCb29sKGN0eCwgZXF1YWxzKTsKICB9IGVsc2UgaWYobWFnaWMgPT0gMSkgewogICAgZG91YmxlIHdpZHRoLCBoZWlnaHQsIGY7CiAgICBpbnQzMl90IHByZWNpc2lvbiA9IDA7CiAgICBpZihhcmdjID4gMCkKICAgICAgSlNfVG9JbnQzMihjdHgsICZwcmVjaXNpb24sIGFyZ3ZbMF0pOwogICAgZiA9IHN0ZDo6cG93KDEwLCBwcmVjaXNpb24pOwogICAgd2lkdGggPSBzdGQ6OnJvdW5kKHNpemUud2lkdGggKiBmKSAvIGY7CiAgICBoZWlnaHQgPSBzdGQ6OnJvdW5kKHNpemUuaGVpZ2h0ICogZikgLyBmOwogICAgcmV0ID0ganNfc2l6ZV9uZXcoY3R4LCB3aWR0aCwgaGVpZ2h0KTsKICB9IGVsc2UgaWYobWFnaWMgPT0gMikgewogICAgcmV0ID0gSlNfTmV3T2JqZWN0KGN0eCk7CgogICAgSlNfU2V0UHJvcGVydHlTdHIoY3R4LCByZXQsICJ3aWR0aCIsIEpTX05ld0Zsb2F0NjQoY3R4LCBzaXplLndpZHRoKSk7CiAgICBKU19TZXRQcm9wZXJ0eVN0cihjdHgsIHJldCwgImhlaWdodCIsIEpTX05ld0Zsb2F0NjQoY3R4LCBzaXplLmhlaWdodCkpOwogIH0gZWxzZSBpZihtYWdpYyA9PSAzKSB7CiAgICByZXQgPSBKU19OZXdBcnJheShjdHgpOwoKICAgIEpTX1NldFByb3BlcnR5VWludDMyKGN0eCwgcmV0LCAwLCBKU19OZXdGbG9hdDY0KGN0eCwgc2l6ZS53aWR0aCkpOwogICAgSlNfU2V0UHJvcGVydHlVaW50MzIoY3R4LCByZXQsIDEsIEpTX05ld0Zsb2F0NjQoY3R4LCBzaXplLmhlaWdodCkpOwogIH0gZWxzZSBpZihtYWdpYyA9PSA0IHx8IG1hZ2ljID09IDUgfHwgbWFnaWMgPT0gNiB8fCBtYWdpYyA9PSA3KSB7CiAgICBKU1NpemVEYXRhPGRvdWJsZT4gb3RoZXIsIHJlc3VsdDsKICAgIGRvdWJsZSBhcmc7CgogICAganNfc2l6ZV9maXRfdCBmaXRfdHlwZSA9IGpzX3NpemVfZml0X3QobWFnaWMgLSAzKTsKICAgIGlmKG1hZ2ljID49IDYpIHt9CgogICAgaWYoanNfc2l6ZV9yZWFkKGN0eCwgYXJndlswXSwgJm90aGVyKSkgewogICAgICByZXN1bHQgPSBqc19zaXplX2ZpdChzaXplLCBvdGhlciwgZml0X3R5cGUpOwoKICAgIH0gZWxzZSBpZihmaXRfdHlwZSA9PSBKU19TSVpFX0ZJVF9XSURUSCB8fCBmaXRfdHlwZSA9PSBKU19TSVpFX0ZJVF9IRUlHSFQpIHsKICAgICAgSlNfVG9GbG9hdDY0KGN0eCwgJmFyZywgYXJndlswXSk7CiAgICAgIHJlc3VsdCA9IGpzX3NpemVfZml0KHNpemUsIGFyZywgZml0X3R5cGUpOwogICAgfQoKICAgIGlmKCFyZXN1bHQuZW1wdHkoKSkKICAgICAgcmV0ID0ganNfc2l6ZV9uZXcoY3R4LCByZXN1bHQud2lkdGgsIHJlc3VsdC5oZWlnaHQpOwogIH0KICByZXR1cm4gcmV0Owp9CgpzdGF0aWMgSlNWYWx1ZQpqc19zaXplX2FkZChKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2KSB7CiAgSlNTaXplRGF0YTxkb3VibGU+KnMsIHNpemU7CgogIGlmKChzID0ganNfc2l6ZV9kYXRhKGN0eCwgdGhpc192YWwpKSA9PSBudWxscHRyKQogICAgcmV0dXJuIEpTX0VYQ0VQVElPTjsKCiAgaWYoanNfc2l6ZV9yZWFkKGN0eCwgYXJndlswXSwgJnNpemUpKSB7CiAgICBzLT53aWR0aCArPSBzaXplLndpZHRoOwogICAgcy0+aGVpZ2h0ICs9IHNpemUuaGVpZ2h0OwogIH0gZWxzZSBpZihhcmdjID49IDIgJiYgSlNfSXNOdW1iZXIoYXJndlswXSkgJiYgSlNfSXNOdW1iZXIoYXJndlsxXSkpIHsKICAgIGRvdWJsZSB3aWR0aCwgaGVpZ2h0OwoKICAgIEpTX1RvRmxvYXQ2NChjdHgsICZ3aWR0aCwgYXJndlswXSk7CiAgICBKU19Ub0Zsb2F0NjQoY3R4LCAmaGVpZ2h0LCBhcmd2WzFdKTsKICAgIHMtPndpZHRoICs9IHdpZHRoOwogICAgcy0+aGVpZ2h0ICs9IGhlaWdodDsKICB9CgogIHJldHVybiBKU19EdXBWYWx1ZShjdHgsIHRoaXNfdmFsKTsKfQoKc3RhdGljIEpTVmFsdWUKanNfc2l6ZV9zdWIoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCogYXJndikgewogIEpTU2l6ZURhdGE8ZG91YmxlPipzLCBzaXplOwoKICBpZigocyA9IGpzX3NpemVfZGF0YShjdHgsIHRoaXNfdmFsKSkgPT0gbnVsbHB0cikKICAgIHJldHVybiBKU19FWENFUFRJT047CgogIGlmKGpzX3NpemVfcmVhZChjdHgsIGFyZ3ZbMF0sICZzaXplKSkgewogICAgcy0+d2lkdGggLT0gc2l6ZS53aWR0aDsKICAgIHMtPmhlaWdodCAtPSBzaXplLmhlaWdodDsKICB9IGVsc2UgaWYoYXJnYyA+PSAyICYmIEpTX0lzTnVtYmVyKGFyZ3ZbMF0pICYmIEpTX0lzTnVtYmVyKGFyZ3ZbMV0pKSB7CiAgICBkb3VibGUgd2lkdGgsIGhlaWdodDsKCiAgICBKU19Ub0Zsb2F0NjQoY3R4LCAmd2lkdGgsIGFyZ3ZbMF0pOwogICAgSlNfVG9GbG9hdDY0KGN0eCwgJmhlaWdodCwgYXJndlsxXSk7CiAgICBzLT53aWR0aCAtPSB3aWR0aDsKICAgIHMtPmhlaWdodCAtPSBoZWlnaHQ7CiAgfQoKICByZXR1cm4gSlNfRHVwVmFsdWUoY3R4LCB0aGlzX3ZhbCk7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX3NpemVfbXVsKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QqIGFyZ3YpIHsKICBKU1NpemVEYXRhPGRvdWJsZT4gc2l6ZSwgKnMgPSBqc19zaXplX2RhdGEoY3R4LCB0aGlzX3ZhbCk7CiAgZG91YmxlIGZhY3RvcjsKICBKU19Ub0Zsb2F0NjQoY3R4LCAmZmFjdG9yLCBhcmd2WzBdKTsKCiAgc2l6ZSA9ICpzOwogIHNpemUud2lkdGggKj0gZmFjdG9yOwogIHNpemUuaGVpZ2h0ICo9IGZhY3RvcjsKCiAgcmV0dXJuIGpzX3NpemVfd3JhcChjdHgsIHNpemUpOwp9CgpzdGF0aWMgSlNWYWx1ZQpqc19zaXplX2RpdihKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2KSB7CiAgSlNTaXplRGF0YTxkb3VibGU+IHNpemUsIG90aGVyLCAqcywgKmEgPSBudWxscHRyOwogIEpTVmFsdWUgcmV0ID0gSlNfRVhDRVBUSU9OOwogIGlmKChzID0ganNfc2l6ZV9kYXRhKGN0eCwgdGhpc192YWwpKSAhPSBudWxscHRyKSB7CiAgICBzaXplID0gKnM7CgogICAgaWYoSlNfSXNOdW1iZXIoYXJndlswXSkpIHsKICAgICAgZG91YmxlIGRpdmlkZXI7CiAgICAgIEpTX1RvRmxvYXQ2NChjdHgsICZkaXZpZGVyLCBhcmd2WzBdKTsKICAgICAgc2l6ZS53aWR0aCAvPSBkaXZpZGVyOwogICAgICBzaXplLmhlaWdodCAvPSBkaXZpZGVyOwogICAgICByZXQgPSBqc19zaXplX3dyYXAoY3R4LCBzaXplKTsKICAgIH0gZWxzZSB7CiAgICAgIGlmKChhID0ganNfc2l6ZV9kYXRhKGN0eCwgYXJndlswXSkpICE9IG51bGxwdHIpCiAgICAgICAgb3RoZXIgPSAqYTsKICAgICAgZWxzZSB7CiAgICAgICAganNfc2l6ZV9yZWFkKGN0eCwgYXJndlswXSwgJm90aGVyKTsKICAgICAgICBhID0gJm90aGVyOwogICAgICB9CiAgICAgIHN0ZDo6YXJyYXk8ZG91YmxlLCAyPiByZXN1bHR7c2l6ZS53aWR0aCAvIG90aGVyLndpZHRoLCBzaXplLmhlaWdodCAvIG90aGVyLmhlaWdodH07CiAgICAgIHJldCA9IEpTX05ld0FycmF5KGN0eCk7CgogICAgICBKU19TZXRQcm9wZXJ0eVVpbnQzMihjdHgsIHJldCwgMCwgSlNfTmV3RmxvYXQ2NChjdHgsIHJlc3VsdFswXSkpOwogICAgICBKU19TZXRQcm9wZXJ0eVVpbnQzMihjdHgsIHJldCwgMSwgSlNfTmV3RmxvYXQ2NChjdHgsIHJlc3VsdFsxXSkpOwogICAgfQogIH0KICByZXR1cm4gcmV0Owp9CgpzdGF0aWMgSlNBdG9tIGl0ZXJhdG9yX3N5bWJvbDsKCnN0YXRpYyBKU1ZhbHVlCmpzX3NpemVfc3ltYm9sX2l0ZXJhdG9yKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QqIGFyZ3YpIHsKICBKU1ZhbHVlIGFyciwgaXRlcjsKICBhcnIgPSBqc19zaXplX2Z1bmNzKGN0eCwgdGhpc192YWwsIGFyZ2MsIGFyZ3YsIDMpOwoKICBpZihpdGVyYXRvcl9zeW1ib2wgPT0gMCkKICAgIGl0ZXJhdG9yX3N5bWJvbCA9IGpzX3N5bWJvbF9hdG9tKGN0eCwgIml0ZXJhdG9yIik7CgogIGlmKCFKU19Jc0Z1bmN0aW9uKGN0eCwgKGl0ZXIgPSBKU19HZXRQcm9wZXJ0eShjdHgsIGFyciwgaXRlcmF0b3Jfc3ltYm9sKSkpKQogICAgcmV0dXJuIEpTX0VYQ0VQVElPTjsKICByZXR1cm4gSlNfQ2FsbChjdHgsIGl0ZXIsIGFyciwgMCwgYXJndik7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX3NpemVfZnJvbShKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHNpemUsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QqIGFyZ3YpIHsKICBzdGQ6OmFycmF5PGRvdWJsZSwgMj4gYXJyYXk7CiAgSlNWYWx1ZSByZXQgPSBKU19FWENFUFRJT047CgogIGlmKEpTX0lzU3RyaW5nKGFyZ3ZbMF0pKSB7CiAgICBjb25zdCBjaGFyKiBzdHIgPSBKU19Ub0NTdHJpbmcoY3R4LCBhcmd2WzBdKTsKICAgIGNoYXIqIGVuZHB0ciA9IG51bGxwdHI7CiAgICBmb3Ioc2l6ZV90IGkgPSAwOyBpIDwgMjsgaSsrKSB7CiAgICAgIHdoaWxlKCFpc2RpZ2l0KCpzdHIpICYmICpzdHIgIT0gJy0nICYmICpzdHIgIT0gJysnICYmICEoKnN0ciA9PSAnLicgJiYgaXNkaWdpdChzdHJbMV0pKSkgc3RyKys7CiAgICAgIGlmKCpzdHIgPT0gJ1wwJykKICAgICAgICBicmVhazsKICAgICAgYXJyYXlbaV0gPSBzdHJ0b2Qoc3RyLCAmZW5kcHRyKTsKICAgICAgc3RyID0gZW5kcHRyOwogICAgfQogIH0gZWxzZSBpZihqc19pc19hcnJheShjdHgsIGFyZ3ZbMF0pKSB7CiAgICBqc19hcnJheV90bzxkb3VibGUsIDI+KGN0eCwgYXJndlswXSwgYXJyYXkpOwogIH0KICBpZihhcnJheVswXSA+IDAgJiYgYXJyYXlbMV0gPiAwKQogICAgcmV0ID0ganNfc2l6ZV9uZXcoY3R4LCBhcnJheVswXSwgYXJyYXlbMV0pOwogIHJldHVybiByZXQ7Cn0KCnZvaWQKanNfc2l6ZV9maW5hbGl6ZXIoSlNSdW50aW1lKiBydCwgSlNWYWx1ZSB2YWwpIHsKICBKU1NpemVEYXRhPGRvdWJsZT4qIHMgPSBzdGF0aWNfY2FzdDxKU1NpemVEYXRhPGRvdWJsZT4qPihKU19HZXRPcGFxdWUodmFsLCBqc19zaXplX2NsYXNzX2lkKSk7CiAgLyogTm90ZTogJ3MnIGNhbiBiZSBOVUxMIGluIGNhc2UgSlNfU2V0T3BhcXVlKCkgd2FzIG5vdCBjYWxsZWQgKi8KICBpZihzKQogICAganNfZGVhbGxvY2F0ZShydCwgcyk7Cn0KCkpTQ2xhc3NEZWYganNfc2l6ZV9jbGFzcyA9IHsKICAgIC5jbGFzc19uYW1lID0gIlNpemUiLAogICAgLmZpbmFsaXplciA9IGpzX3NpemVfZmluYWxpemVyLAp9OwoKY29uc3QgSlNDRnVuY3Rpb25MaXN0RW50cnkganNfc2l6ZV9wcm90b19mdW5jc1tdID0ge0pTX0NHRVRTRVRfRU5VTUVSQUJMRV9ERUYoIndpZHRoIiwganNfc2l6ZV9nZXQsIGpzX3NpemVfc2V0LCAwKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEpTX0NHRVRTRVRfRU5VTUVSQUJMRV9ERUYoImhlaWdodCIsIGpzX3NpemVfZ2V0LCBqc19zaXplX3NldCwgMSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBKU19DR0VUU0VUX0VOVU1FUkFCTEVfREVGKCJhc3BlY3QiLCBqc19zaXplX2dldCwgMCwgMiksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBKU19DR0VUU0VUX0VOVU1FUkFCTEVfREVGKCJlbXB0eSIsIGpzX3NpemVfZ2V0LCAwLCAzKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEpTX0NHRVRTRVRfRU5VTUVSQUJMRV9ERUYoImFyZWEiLCBqc19zaXplX2dldCwgMCwgNCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBKU19DRlVOQ19NQUdJQ19ERUYoImVxdWFscyIsIDEsIGpzX3NpemVfZnVuY3MsIDApLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJyb3VuZCIsIDAsIGpzX3NpemVfZnVuY3MsIDEpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJ0b09iamVjdCIsIDAsIGpzX3NpemVfZnVuY3MsIDIpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJ0b0FycmF5IiwgMCwganNfc2l6ZV9mdW5jcywgMyksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBKU19DRlVOQ19NQUdJQ19ERUYoImZpdFdpZHRoIiwgMCwganNfc2l6ZV9mdW5jcywgNCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBKU19DRlVOQ19NQUdJQ19ERUYoImZpdEhlaWdodCIsIDAsIGpzX3NpemVfZnVuY3MsIDUpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJmaXRJbnNpZGUiLCAwLCBqc19zaXplX2Z1bmNzLCA2KSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEpTX0NGVU5DX01BR0lDX0RFRigiZml0T3V0c2lkZSIsIDAsIGpzX3NpemVfZnVuY3MsIDcpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSlNfQ0ZVTkNfREVGKCJ0b1N0cmluZyIsIDAsIGpzX3NpemVfdG9fc3RyaW5nKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEpTX0NGVU5DX0RFRigidG9Tb3VyY2UiLCAwLCBqc19zaXplX3RvX3NvdXJjZSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBKU19DRlVOQ19ERUYoImFkZCIsIDEsIGpzX3NpemVfYWRkKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEpTX0NGVU5DX0RFRigic3ViIiwgMSwganNfc2l6ZV9zdWIpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSlNfQ0ZVTkNfREVGKCJtdWwiLCAxLCBqc19zaXplX211bCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBKU19DRlVOQ19ERUYoImRpdiIsIDEsIGpzX3NpemVfZGl2KSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEpTX0FMSUFTX0RFRigidmFsdWVzIiwgInRvQXJyYXkiKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEpTX0NGVU5DX0RFRigiW1N5bWJvbC5pdGVyYXRvcl0iLCAwLCBqc19zaXplX3N5bWJvbF9pdGVyYXRvciksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBKU19QUk9QX1NUUklOR19ERUYoIltTeW1ib2wudG9TdHJpbmdUYWddIiwgIlNpemUiLCBKU19QUk9QX0NPTkZJR1VSQUJMRSl9OwoKY29uc3QgSlNDRnVuY3Rpb25MaXN0RW50cnkganNfc2l6ZV9zdGF0aWNfZnVuY3NbXSA9IHtKU19DRlVOQ19ERUYoImZyb20iLCAxLCBqc19zaXplX2Zyb20pfTsKCmludApqc19zaXplX2luaXQoSlNDb250ZXh0KiBjdHgsIEpTTW9kdWxlRGVmKiBtKSB7CgogIGlmKGpzX3NpemVfY2xhc3NfaWQgPT0gMCkgewogICAgLyogY3JlYXRlIHRoZSBTaXplIGNsYXNzICovCiAgICBKU19OZXdDbGFzc0lEKCZqc19zaXplX2NsYXNzX2lkKTsKICAgIEpTX05ld0NsYXNzKEpTX0dldFJ1bnRpbWUoY3R4KSwganNfc2l6ZV9jbGFzc19pZCwgJmpzX3NpemVfY2xhc3MpOwoKICAgIHNpemVfcHJvdG8gPSBKU19OZXdPYmplY3QoY3R4KTsKICAgIEpTX1NldFByb3BlcnR5RnVuY3Rpb25MaXN0KGN0eCwgc2l6ZV9wcm90bywganNfc2l6ZV9wcm90b19mdW5jcywgY291bnRvZihqc19zaXplX3Byb3RvX2Z1bmNzKSk7CgogICAgSlNfU2V0Q2xhc3NQcm90byhjdHgsIGpzX3NpemVfY2xhc3NfaWQsIHNpemVfcHJvdG8pOwoKICAgIHNpemVfY2xhc3MgPSBKU19OZXdDRnVuY3Rpb24yKGN0eCwganNfc2l6ZV9jdG9yLCAiU2l6ZSIsIDAsIEpTX0NGVU5DX2NvbnN0cnVjdG9yLCAwKTsKICAgIC8qIHNldCBwcm90by5jb25zdHJ1Y3RvciBhbmQgY3Rvci5wcm90b3R5cGUgKi8KICAgIEpTX1NldENvbnN0cnVjdG9yKGN0eCwgc2l6ZV9jbGFzcywgc2l6ZV9wcm90byk7CiAgICBKU19TZXRQcm9wZXJ0eUZ1bmN0aW9uTGlzdChjdHgsIHNpemVfY2xhc3MsIGpzX3NpemVfc3RhdGljX2Z1bmNzLCBjb3VudG9mKGpzX3NpemVfc3RhdGljX2Z1bmNzKSk7CgogICAganNfc2V0X2luc3BlY3RfbWV0aG9kKGN0eCwgc2l6ZV9wcm90bywganNfc2l6ZV9pbnNwZWN0KTsKICB9CgogIGlmKG0pCiAgICBKU19TZXRNb2R1bGVFeHBvcnQoY3R4LCBtLCAiU2l6ZSIsIHNpemVfY2xhc3MpOwogIC8qZWxzZQogICAgSlNfU2V0UHJvcGVydHlTdHIoY3R4LCAqc3RhdGljX2Nhc3Q8SlNWYWx1ZSo+KG0pLCBuYW1lLCBzaXplX2NsYXNzKTsqLwogIHJldHVybiAwOwp9CgpleHRlcm4gIkMiIFZJU0lCTEUgdm9pZApqc19zaXplX2V4cG9ydChKU0NvbnRleHQqIGN0eCwgSlNNb2R1bGVEZWYqIG0pIHsKICBKU19BZGRNb2R1bGVFeHBvcnQoY3R4LCBtLCAiU2l6ZSIpOwp9Cgp2b2lkCmpzX3NpemVfY29uc3RydWN0b3IoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWUgcGFyZW50LCBjb25zdCBjaGFyKiBuYW1lKSB7CiAgaWYoSlNfSXNVbmRlZmluZWQoc2l6ZV9jbGFzcykpCiAgICBqc19zaXplX2luaXQoY3R4LCAwKTsKCiAgSlNfU2V0UHJvcGVydHlTdHIoY3R4LCBwYXJlbnQsIG5hbWUgPyBuYW1lIDogIlNpemUiLCBzaXplX2NsYXNzKTsKfQoKI2lmZGVmIEpTX1NJWkVfTU9EVUxFCiNkZWZpbmUgSlNfSU5JVF9NT0RVTEUgLypWSVNJQkxFKi8ganNfaW5pdF9tb2R1bGUKI2Vsc2UKI2RlZmluZSBKU19JTklUX01PRFVMRSAvKlZJU0lCTEUqLyBqc19pbml0X21vZHVsZV9zaXplCiNlbmRpZgoKZXh0ZXJuICJDIiBKU01vZHVsZURlZioKSlNfSU5JVF9NT0RVTEUoSlNDb250ZXh0KiBjdHgsIGNvbnN0IGNoYXIqIG1vZHVsZV9uYW1lKSB7CiAgSlNNb2R1bGVEZWYqIG07CiAgbSA9IEpTX05ld0NNb2R1bGUoY3R4LCBtb2R1bGVfbmFtZSwgJmpzX3NpemVfaW5pdCk7CiAgaWYoIW0pCiAgICByZXR1cm4gTlVMTDsKICBqc19zaXplX2V4cG9ydChjdHgsIG0pOwogIHJldHVybiBtOwp9AAAAAAAAAACIOQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAATjgAAAAAAABcOAAAAAAAAAAAAAAAAPC/"
				]
			]
		},
		{
			"file": "js_slice_iterator.cpp",
			"settings":
			{
				"buffer_size": 6447,
				"line_ending": "Unix"
			},
			"undo_stack":
			[
				[
					3,
					1,
					"cut",
					null,
					"AQAAAMUYAAAAAAAAxRgAAAAAAABVAAAAZXh0ZXJuICJDIiBWSVNJQkxFIHZvaWQganNfc2xpY2VfaXRlcmF0b3JfZXhwb3J0KEpTQ29udGV4dCogY3R4LCBKU01vZHVsZURlZiogbSkgewp9Cg",
					"AQAAAAAAAAABAAAAxRgAAAAAAAAaGQAAAAAAAAAAAAAAAPC/"
				],
				[
					6,
					1,
					"paste",
					null,
					"AQAAAJUVAAAAAAAA6hUAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAlRUAAAAAAACVFQAAAAAAAAAAAAAAAPC/"
				],
				[
					13,
					1,
					"cut",
					null,
					"AQAAAEUXAAAAAAAARRcAAAAAAAAvAAAAICBKU19BZGRNb2R1bGVFeHBvcnQoY3R4LCBtLCAiU2xpY2VJdGVyYXRvciIpOwo",
					"AQAAAAAAAAABAAAARRcAAAAAAAB0FwAAAAAAAAAAAAAAAPC/"
				],
				[
					16,
					1,
					"paste",
					null,
					"AQAAAOgVAAAAAAAAFxYAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA6BUAAAAAAADoFQAAAAAAAAAAAAAAAPC/"
				],
				[
					25,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"BAAAAHMXAAAAAAAAdBcAAAAAAAAAAAAAdBcAAAAAAAB4FwAAAAAAAAAAAAB0FwAAAAAAAHQXAAAAAAAABAAAACAgICB0FwAAAAAAAHYXAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAcxcAAAAAAABzFwAAAAAAAAAAAAAAAPC/"
				],
				[
					26,
					1,
					"paste",
					null,
					"AQAAAHYXAAAAAAAAjhcAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAdhcAAAAAAAB2FwAAAAAAAAAAAAAAAPC/"
				],
				[
					27,
					1,
					"insert_snippet",
					{
						"contents": "($0)"
					},
					"AQAAAI4XAAAAAAAAkBcAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAjhcAAAAAAACOFwAAAAAAAAAAAAAAAPC/"
				],
				[
					28,
					1,
					"insert",
					{
						"characters": "ctx."
					},
					"BAAAAI8XAAAAAAAAkBcAAAAAAAAAAAAAkBcAAAAAAACRFwAAAAAAAAAAAACRFwAAAAAAAJIXAAAAAAAAAAAAAJIXAAAAAAAAkxcAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAjxcAAAAAAACPFwAAAAAAAAAAAAAAAPC/"
				],
				[
					29,
					1,
					"left_delete",
					null,
					"AQAAAJIXAAAAAAAAkhcAAAAAAAABAAAALg",
					"AQAAAAAAAAABAAAAkxcAAAAAAACTFwAAAAAAAAAAAAAAAPC/"
				],
				[
					30,
					1,
					"insert",
					{
						"characters": ",m"
					},
					"AgAAAJIXAAAAAAAAkxcAAAAAAAAAAAAAkxcAAAAAAACUFwAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAkhcAAAAAAACSFwAAAAAAAAAAAAAAAPC/"
				],
				[
					32,
					1,
					"insert",
					{
						"characters": ";"
					},
					"AQAAAJUXAAAAAAAAlhcAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAlRcAAAAAAACVFwAAAAAAAAAAAAAAAPC/"
				],
				[
					35,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"AQAAAJQVAAAAAAAAlRUAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAlBUAAAAAAACUFQAAAAAAAAAAAAAAAPC/"
				],
				[
					36,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAAA+GQAAI2luY2x1ZGUgImpzYmluZGluZ3MuaHBwIgojaW5jbHVkZSAianNfYWxsb2MuaHBwIgojaW5jbHVkZSAianNfc2xpY2VfaXRlcmF0b3IuaHBwIgoKZXh0ZXJuICJDIiB7CgpKU1ZhbHVlIHNsaWNlX2l0ZXJhdG9yX3Byb3RvID0gSlNfVU5ERUZJTkVELCBzbGljZV9pdGVyYXRvcl9jbGFzcyA9IEpTX1VOREVGSU5FRDsKVklTSUJMRSBKU0NsYXNzSUQganNfc2xpY2VfaXRlcmF0b3JfY2xhc3NfaWQgPSAwOwoKVklTSUJMRSBKU1NsaWNlSXRlcmF0b3JEYXRhKgpqc19zbGljZV9pdGVyYXRvcl9jcmVhdGUoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCBidWZmZXIsIGNvbnN0IFR5cGVkQXJyYXlUeXBlJiB0eXBlLCBpbnQgbnVtX2VsZW1zKSB7CiAgSlNTbGljZUl0ZXJhdG9yRGF0YSogaXQ7CgogIGlmKChpdCA9IGpzX2FsbG9jYXRlPEpTU2xpY2VJdGVyYXRvckRhdGE+KGN0eCkpKSB7CgogICAgaXQtPmJ1ZmZlciA9IEpTX0R1cFZhbHVlKGN0eCwgYnVmZmVyKTsKICAgIGl0LT50eXBlID0gdHlwZTsKICAgIGl0LT5yYW5nZSA9IGpzX2FycmF5YnVmZmVyX3JhbmdlKGN0eCwgYnVmZmVyKTsKICAgIGl0LT5wdHIgPSBpdC0+cmFuZ2UuYmVnaW4oKTsKICAgIGl0LT5jdG9yID0ganNfZ2xvYmFsX2dldChjdHgsIHR5cGUuY29uc3RydWN0b3JfbmFtZSgpLmNfc3RyKCkpOwogICAgaXQtPm51bV9lbGVtcyA9IG51bV9lbGVtczsKICAgIGl0LT5pbmNyZW1lbnQgPSBpdC0+dHlwZS5ieXRlX3NpemUgKiBudW1fZWxlbXM7CiAgfQogIHJldHVybiBpdDsKfQoKVklTSUJMRSBKU1ZhbHVlCmpzX3NsaWNlX2l0ZXJhdG9yX25ldyhKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IGJ1ZmZlciwgY29uc3QgVHlwZWRBcnJheVR5cGUmIHR5cGUsIGludCBudW1fZWxlbXMpIHsKICBKU1NsaWNlSXRlcmF0b3JEYXRhKiBpdDsKICBKU1ZhbHVlIGl0ZXJhdG9yOwoKICBpZihqc19zbGljZV9pdGVyYXRvcl9jbGFzc19pZCA9PSAwKQogICAganNfc2xpY2VfaXRlcmF0b3JfaW5pdChjdHgsIDApOwoKICBhc3NlcnQoanNfc2xpY2VfaXRlcmF0b3JfY2xhc3NfaWQpOwoKICBpdGVyYXRvciA9IEpTX05ld09iamVjdFByb3RvQ2xhc3MoY3R4LCBzbGljZV9pdGVyYXRvcl9wcm90bywganNfc2xpY2VfaXRlcmF0b3JfY2xhc3NfaWQpOwogIGlmKEpTX0lzRXhjZXB0aW9uKGl0ZXJhdG9yKSkKICAgIGdvdG8gZmFpbDsKICBpZighKGl0ID0ganNfc2xpY2VfaXRlcmF0b3JfY3JlYXRlKGN0eCwgYnVmZmVyLCB0eXBlLCBudW1fZWxlbXMpKSkKICAgIGdvdG8gZmFpbDE7CgogIEpTX1NldE9wYXF1ZShpdGVyYXRvciwgaXQpOwogIHJldHVybiBpdGVyYXRvcjsKZmFpbDE6CiAgSlNfRnJlZVZhbHVlKGN0eCwgaXRlcmF0b3IpOwpmYWlsOgogIHJldHVybiBKU19FWENFUFRJT047Cn0KfQoKc3RhdGljIEpTVmFsdWUKanNfc2xpY2VfaXRlcmF0b3JfbmV4dChKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2LCBCT09MKiBwZG9uZSwgaW50IG1hZ2ljKSB7CiAgSlNTbGljZUl0ZXJhdG9yRGF0YSogaXQ7CiAgSlNWYWx1ZSByZXN1bHQgPSBKU19VTkRFRklORUQ7CgogIGlmKChpdCA9IHN0YXRpY19jYXN0PEpTU2xpY2VJdGVyYXRvckRhdGEqPihKU19HZXRPcGFxdWUodGhpc192YWwsIGpzX3NsaWNlX2l0ZXJhdG9yX2NsYXNzX2lkKSkpID09IG51bGxwdHIpCiAgICByZXR1cm4gSlNfRVhDRVBUSU9OOwoKICBpZighKCpwZG9uZSA9IGl0LT5wdHIgPj0gaXQtPnJhbmdlLmVuZCgpKSkgewoKICAgIC8vIHByaW50ZigiYnl0ZV9wb3MgPSAlenUsIGJ5dGVfc2l6ZSA9ICV6dSwgbnVtX2VsZW1zID0gJWksIGluY3JlbWVudCA9ICV6dVxuIiwgc2l6ZV90KGl0LT5wdHIgLQogICAgLy8gaXQtPnJhbmdlLmJlZ2luKCkpLCBpdC0+cmFuZ2Uuc2l6ZSgpLCBpdC0+bnVtX2VsZW1zLCBpdC0+aW5jcmVtZW50KTsKCiAgICByZXN1bHQgPSBqc190eXBlZGFycmF5X25ldyhjdHgsIGl0LT5idWZmZXIsIGl0LT5wdHIgLSBpdC0+cmFuZ2UuYmVnaW4oKSwgaXQtPm51bV9lbGVtcywgaXQtPmN0b3IpOwogICAgaXQtPnB0ciArPSBpdC0+aW5jcmVtZW50OwogIH0KCiAgcmV0dXJuIHJlc3VsdDsKfQoKc3RhdGljIEpTVmFsdWUKanNfc2xpY2VfaXRlcmF0b3JfY29uc3RydWN0b3IoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCBuZXdfdGFyZ2V0LCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2KSB7CiAgSlNTbGljZUl0ZXJhdG9yRGF0YSogczsKICBKU0NvbnRvdXJEYXRhPGRvdWJsZT4qIHY7CiAgSlNWYWx1ZSBvYmogPSBKU19VTkRFRklORUQ7CiAgSlNWYWx1ZSBwcm90bzsKICBpbnQzMl90IG51bV9lbGVtcyA9IDE7CiAgYXNzZXJ0KDApOwoKICBpZihqc19zbGljZV9pdGVyYXRvcl9jbGFzc19pZCA9PSAwKQogICAganNfc2xpY2VfaXRlcmF0b3JfaW5pdChjdHgsIDApOwoKICBhc3NlcnQoanNfc2xpY2VfaXRlcmF0b3JfY2xhc3NfaWQpOwoKICBpZighKHMgPSBqc19hbGxvY2F0ZTxKU1NsaWNlSXRlcmF0b3JEYXRhPihjdHgpKSkKICAgIHJldHVybiBKU19FWENFUFRJT047CgogIHMtPmJ1ZmZlciA9IEpTX0R1cFZhbHVlKGN0eCwgYXJndlswXSk7CiAgcy0+dHlwZSA9IGpzX3R5cGVkYXJyYXlfdHlwZShjdHgsIGFyZ3ZbMV0pOwogIHMtPnJhbmdlID0ganNfYXJyYXlidWZmZXJfcmFuZ2UoY3R4LCBzLT5idWZmZXIpOwogIHMtPnB0ciA9IHMtPnJhbmdlLmJlZ2luKCk7CiAgcy0+Y3RvciA9IEpTX0lzRnVuY3Rpb24oY3R4LCBhcmd2WzFdKSA/IEpTX0R1cFZhbHVlKGN0eCwgYXJndlsxXSkgOiBqc19nbG9iYWxfZ2V0KGN0eCwgcy0+dHlwZS5jb25zdHJ1Y3Rvcl9uYW1lKCkuY19zdHIoKSk7CgogIGlmKGFyZ2MgPiAyKQogICAganNfdmFsdWVfdG8oY3R4LCBhcmd2WzJdLCBudW1fZWxlbXMpOwoKICBzLT5udW1fZWxlbXMgPSBudW1fZWxlbXM7CiAgcy0+aW5jcmVtZW50ID0gcy0+dHlwZS5ieXRlX3NpemUgKiBudW1fZWxlbXM7CgogIHByb3RvID0gSlNfR2V0UHJvcGVydHlTdHIoY3R4LCBuZXdfdGFyZ2V0LCAicHJvdG90eXBlIik7CiAgaWYoSlNfSXNFeGNlcHRpb24ocHJvdG8pKQogICAgZ290byBmYWlsOwogIG9iaiA9IEpTX05ld09iamVjdFByb3RvQ2xhc3MoY3R4LCBwcm90bywganNfc2xpY2VfaXRlcmF0b3JfY2xhc3NfaWQpOwogIEpTX0ZyZWVWYWx1ZShjdHgsIHByb3RvKTsKICBpZihKU19Jc0V4Y2VwdGlvbihvYmopKQogICAgZ290byBmYWlsOwogIEpTX1NldE9wYXF1ZShvYmosIHMpOwogIHJldHVybiBvYmo7CmZhaWw6CiAganNfZGVhbGxvY2F0ZShjdHgsIHMpOwogIEpTX0ZyZWVWYWx1ZShjdHgsIG9iaik7CiAgcmV0dXJuIEpTX0VYQ0VQVElPTjsKfQoKc3RhdGljIEpTVmFsdWUKanNfc2xpY2VfaXRlcmF0b3JfZHVwKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QqIGFyZ3YpIHsKICByZXR1cm4gSlNfRHVwVmFsdWUoY3R4LCB0aGlzX3ZhbCk7Cn0KCnN0YXRpYyB2b2lkCmpzX3NsaWNlX2l0ZXJhdG9yX2ZpbmFsaXplcihKU1J1bnRpbWUqIHJ0LCBKU1ZhbHVlIHZhbCkgewogIEpTU2xpY2VJdGVyYXRvckRhdGEqIHM7CiAgLyogTm90ZTogJ3MnIGNhbiBiZSBOVUxMIGluIGNhc2UgSlNfU2V0T3BhcXVlKCkgd2FzIG5vdCBjYWxsZWQgKi8KICBpZigocyA9IHN0YXRpY19jYXN0PEpTU2xpY2VJdGVyYXRvckRhdGEqPihKU19HZXRPcGFxdWUodmFsLCBqc19zbGljZV9pdGVyYXRvcl9jbGFzc19pZCkpKSkgewogICAgSlNfRnJlZVZhbHVlUlQocnQsIHMtPmJ1ZmZlcik7CiAgICBKU19GcmVlVmFsdWVSVChydCwgcy0+Y3Rvcik7CiAgICBqc19kZWFsbG9jYXRlKHJ0LCBzKTsKICB9CiAgLy8gSlNfRnJlZVZhbHVlUlQocnQsIHZhbCk7Cn0KCmV4dGVybiAiQyIgewpKU0NsYXNzRGVmIGpzX3NsaWNlX2l0ZXJhdG9yX2NsYXNzID0gewogICAgLmNsYXNzX25hbWUgPSAiU2xpY2VJdGVyYXRvciIsCiAgICAuZmluYWxpemVyID0ganNfc2xpY2VfaXRlcmF0b3JfZmluYWxpemVyLAp9OwoKY29uc3QgSlNDRnVuY3Rpb25MaXN0RW50cnkganNfc2xpY2VfaXRlcmF0b3JfcHJvdG9fZnVuY3NbXSA9IHsKICAgIEpTX0lURVJBVE9SX05FWFRfREVGKCJuZXh0IiwgMCwganNfc2xpY2VfaXRlcmF0b3JfbmV4dCwgMCksCiAgICBKU19DRlVOQ19ERUYoIltTeW1ib2wuaXRlcmF0b3JdIiwgMCwganNfc2xpY2VfaXRlcmF0b3JfZHVwKSwKICAgIEpTX1BST1BfU1RSSU5HX0RFRigiW1N5bWJvbC50b1N0cmluZ1RhZ10iLCAiU2xpY2VJdGVyYXRvciIsIEpTX1BST1BfQ09ORklHVVJBQkxFKSwKfTsKCmludApqc19zbGljZV9pdGVyYXRvcl9pbml0KEpTQ29udGV4dCogY3R4LCBKU01vZHVsZURlZiogbSkgewoKICBpZihqc19zbGljZV9pdGVyYXRvcl9jbGFzc19pZCA9PSAwKSB7CiAgICAvKiBjcmVhdGUgdGhlIFNsaWNlSXRlcmF0b3IgY2xhc3MgKi8KICAgIEpTX05ld0NsYXNzSUQoJmpzX3NsaWNlX2l0ZXJhdG9yX2NsYXNzX2lkKTsKICAgIEpTX05ld0NsYXNzKEpTX0dldFJ1bnRpbWUoY3R4KSwganNfc2xpY2VfaXRlcmF0b3JfY2xhc3NfaWQsICZqc19zbGljZV9pdGVyYXRvcl9jbGFzcyk7CgogICAgc2xpY2VfaXRlcmF0b3JfcHJvdG8gPSBKU19OZXdPYmplY3QoY3R4KTsKICAgIEpTX1NldFByb3BlcnR5RnVuY3Rpb25MaXN0KGN0eCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNsaWNlX2l0ZXJhdG9yX3Byb3RvLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAganNfc2xpY2VfaXRlcmF0b3JfcHJvdG9fZnVuY3MsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb3VudG9mKGpzX3NsaWNlX2l0ZXJhdG9yX3Byb3RvX2Z1bmNzKSk7CiAgICBKU19TZXRDbGFzc1Byb3RvKGN0eCwganNfc2xpY2VfaXRlcmF0b3JfY2xhc3NfaWQsIHNsaWNlX2l0ZXJhdG9yX3Byb3RvKTsKCiAgICBzbGljZV9pdGVyYXRvcl9jbGFzcyA9IEpTX05ld0NGdW5jdGlvbjIoY3R4LCBqc19zbGljZV9pdGVyYXRvcl9jb25zdHJ1Y3RvciwgIlNsaWNlSXRlcmF0b3IiLCAyLCBKU19DRlVOQ19jb25zdHJ1Y3RvciwgMCk7CiAgICAvKiBzZXQgcHJvdG8uY29uc3RydWN0b3IgYW5kIGN0b3IucHJvdG90eXBlICovCgogICAgSlNfU2V0Q29uc3RydWN0b3IoY3R4LCBzbGljZV9pdGVyYXRvcl9jbGFzcywgc2xpY2VfaXRlcmF0b3JfcHJvdG8pOwogICAgLy8gSlNfU2V0UHJvcGVydHlGdW5jdGlvbkxpc3QoY3R4LCBzbGljZV9pdGVyYXRvcl9jbGFzcywganNfc2xpY2VfaXRlcmF0b3Jfc3RhdGljX2Z1bmNzLAogICAgLy8gY291bnRvZihqc19zbGljZV9pdGVyYXRvcl9zdGF0aWNfZnVuY3MpKTsKICB9CgogIGlmKG0pCiAgICBKU19TZXRNb2R1bGVFeHBvcnQoY3R4LCBtLCAiU2xpY2VJdGVyYXRvciIsIHNsaWNlX2l0ZXJhdG9yX2NsYXNzKTsKICAvKiBlbHNlCiAgICAgSlNfU2V0UHJvcGVydHlTdHIoY3R4LCAqc3RhdGljX2Nhc3Q8SlNWYWx1ZSo+KG0pLCBuYW1lLCBzbGljZV9pdGVyYXRvcl9jbGFzcyk7Ki8KICByZXR1cm4gMDsKfQoKZXh0ZXJuICJDIiBWSVNJQkxFIHZvaWQganNfc2xpY2VfaXRlcmF0b3JfZXhwb3J0KEpTQ29udGV4dCogY3R4LCBKU01vZHVsZURlZiogbSkgewogIEpTX0FkZE1vZHVsZUV4cG9ydChjdHgsIG0sICJTbGljZUl0ZXJhdG9yIik7Cn0KCiNpZiBkZWZpbmVkKEpTX1NMSUNFX0lURVJBVE9SX01PRFVMRSkKI2RlZmluZSBKU19JTklUX01PRFVMRSAvKlZJU0lCTEUqLyBqc19pbml0X21vZHVsZQojZWxzZQojZGVmaW5lIEpTX0lOSVRfTU9EVUxFIC8qVklTSUJMRSovIGpzX2luaXRfbW9kdWxlX3NsaWNlX2l0ZXJhdG9yCiNlbmRpZgoKSlNNb2R1bGVEZWYqCkpTX0lOSVRfTU9EVUxFKEpTQ29udGV4dCogY3R4LCBjb25zdCBjaGFyKiBtb2R1bGVfbmFtZSkgewogIEpTTW9kdWxlRGVmKiBtOwogIG0gPSBKU19OZXdDTW9kdWxlKGN0eCwgbW9kdWxlX25hbWUsICZqc19zbGljZV9pdGVyYXRvcl9pbml0KTsKICBpZighbSkKICAgIHJldHVybiBOVUxMOwogIGpzX3NsaWNlX2l0ZXJhdG9yX2V4cG9ydChjdHgsbSk7CiAgcmV0dXJuIG07Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX3NsaWNlX2l0ZXJhdG9yX3RvX3N0cmluZyhKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2KSB7CiAgSlNTbGljZUl0ZXJhdG9yRGF0YSogcyA9IHN0YXRpY19jYXN0PEpTU2xpY2VJdGVyYXRvckRhdGEqPihKU19HZXRPcGFxdWUyKGN0eCwgdGhpc192YWwsIGpzX3NsaWNlX2l0ZXJhdG9yX2NsYXNzX2lkKSk7CiAgc3RkOjpvc3RyaW5nc3RyZWFtIG9zOwogIGlmKCFzKQogICAgcmV0dXJuIEpTX0VYQ0VQVElPTjsKCiAgLy8gb3MgPDwgInt4OiIgPDwgcy0+eCA8PCAiLHk6IiA8PCBzLT55IDw8ICJ9IiA8PCBzdGQ6OmVuZGw7CgogIHJldHVybiBKU19OZXdTdHJpbmcoY3R4LCBvcy5zdHIoKS5jX3N0cigpKTsKfQp9AAAAAAAAAAA/GQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAlRUAAAAAAACVFQAAAAAAAAAAAAAAAPC/"
				],
				[
					37,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAAA/GQAAI2luY2x1ZGUgImpzYmluZGluZ3MuaHBwIgojaW5jbHVkZSAianNfYWxsb2MuaHBwIgojaW5jbHVkZSAianNfc2xpY2VfaXRlcmF0b3IuaHBwIgoKZXh0ZXJuICJDIiB7CgpKU1ZhbHVlIHNsaWNlX2l0ZXJhdG9yX3Byb3RvID0gSlNfVU5ERUZJTkVELCBzbGljZV9pdGVyYXRvcl9jbGFzcyA9IEpTX1VOREVGSU5FRDsKVklTSUJMRSBKU0NsYXNzSUQganNfc2xpY2VfaXRlcmF0b3JfY2xhc3NfaWQgPSAwOwoKVklTSUJMRSBKU1NsaWNlSXRlcmF0b3JEYXRhKgpqc19zbGljZV9pdGVyYXRvcl9jcmVhdGUoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCBidWZmZXIsIGNvbnN0IFR5cGVkQXJyYXlUeXBlJiB0eXBlLCBpbnQgbnVtX2VsZW1zKSB7CiAgSlNTbGljZUl0ZXJhdG9yRGF0YSogaXQ7CgogIGlmKChpdCA9IGpzX2FsbG9jYXRlPEpTU2xpY2VJdGVyYXRvckRhdGE+KGN0eCkpKSB7CgogICAgaXQtPmJ1ZmZlciA9IEpTX0R1cFZhbHVlKGN0eCwgYnVmZmVyKTsKICAgIGl0LT50eXBlID0gdHlwZTsKICAgIGl0LT5yYW5nZSA9IGpzX2FycmF5YnVmZmVyX3JhbmdlKGN0eCwgYnVmZmVyKTsKICAgIGl0LT5wdHIgPSBpdC0+cmFuZ2UuYmVnaW4oKTsKICAgIGl0LT5jdG9yID0ganNfZ2xvYmFsX2dldChjdHgsIHR5cGUuY29uc3RydWN0b3JfbmFtZSgpLmNfc3RyKCkpOwogICAgaXQtPm51bV9lbGVtcyA9IG51bV9lbGVtczsKICAgIGl0LT5pbmNyZW1lbnQgPSBpdC0+dHlwZS5ieXRlX3NpemUgKiBudW1fZWxlbXM7CiAgfQogIHJldHVybiBpdDsKfQoKVklTSUJMRSBKU1ZhbHVlCmpzX3NsaWNlX2l0ZXJhdG9yX25ldyhKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IGJ1ZmZlciwgY29uc3QgVHlwZWRBcnJheVR5cGUmIHR5cGUsIGludCBudW1fZWxlbXMpIHsKICBKU1NsaWNlSXRlcmF0b3JEYXRhKiBpdDsKICBKU1ZhbHVlIGl0ZXJhdG9yOwoKICBpZihqc19zbGljZV9pdGVyYXRvcl9jbGFzc19pZCA9PSAwKQogICAganNfc2xpY2VfaXRlcmF0b3JfaW5pdChjdHgsIDApOwoKICBhc3NlcnQoanNfc2xpY2VfaXRlcmF0b3JfY2xhc3NfaWQpOwoKICBpdGVyYXRvciA9IEpTX05ld09iamVjdFByb3RvQ2xhc3MoY3R4LCBzbGljZV9pdGVyYXRvcl9wcm90bywganNfc2xpY2VfaXRlcmF0b3JfY2xhc3NfaWQpOwogIGlmKEpTX0lzRXhjZXB0aW9uKGl0ZXJhdG9yKSkKICAgIGdvdG8gZmFpbDsKICBpZighKGl0ID0ganNfc2xpY2VfaXRlcmF0b3JfY3JlYXRlKGN0eCwgYnVmZmVyLCB0eXBlLCBudW1fZWxlbXMpKSkKICAgIGdvdG8gZmFpbDE7CgogIEpTX1NldE9wYXF1ZShpdGVyYXRvciwgaXQpOwogIHJldHVybiBpdGVyYXRvcjsKZmFpbDE6CiAgSlNfRnJlZVZhbHVlKGN0eCwgaXRlcmF0b3IpOwpmYWlsOgogIHJldHVybiBKU19FWENFUFRJT047Cn0KfQoKc3RhdGljIEpTVmFsdWUKanNfc2xpY2VfaXRlcmF0b3JfbmV4dChKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2LCBCT09MKiBwZG9uZSwgaW50IG1hZ2ljKSB7CiAgSlNTbGljZUl0ZXJhdG9yRGF0YSogaXQ7CiAgSlNWYWx1ZSByZXN1bHQgPSBKU19VTkRFRklORUQ7CgogIGlmKChpdCA9IHN0YXRpY19jYXN0PEpTU2xpY2VJdGVyYXRvckRhdGEqPihKU19HZXRPcGFxdWUodGhpc192YWwsIGpzX3NsaWNlX2l0ZXJhdG9yX2NsYXNzX2lkKSkpID09IG51bGxwdHIpCiAgICByZXR1cm4gSlNfRVhDRVBUSU9OOwoKICBpZighKCpwZG9uZSA9IGl0LT5wdHIgPj0gaXQtPnJhbmdlLmVuZCgpKSkgewoKICAgIC8vIHByaW50ZigiYnl0ZV9wb3MgPSAlenUsIGJ5dGVfc2l6ZSA9ICV6dSwgbnVtX2VsZW1zID0gJWksIGluY3JlbWVudCA9ICV6dVxuIiwgc2l6ZV90KGl0LT5wdHIgLQogICAgLy8gaXQtPnJhbmdlLmJlZ2luKCkpLCBpdC0+cmFuZ2Uuc2l6ZSgpLCBpdC0+bnVtX2VsZW1zLCBpdC0+aW5jcmVtZW50KTsKCiAgICByZXN1bHQgPSBqc190eXBlZGFycmF5X25ldyhjdHgsIGl0LT5idWZmZXIsIGl0LT5wdHIgLSBpdC0+cmFuZ2UuYmVnaW4oKSwgaXQtPm51bV9lbGVtcywgaXQtPmN0b3IpOwogICAgaXQtPnB0ciArPSBpdC0+aW5jcmVtZW50OwogIH0KCiAgcmV0dXJuIHJlc3VsdDsKfQoKc3RhdGljIEpTVmFsdWUKanNfc2xpY2VfaXRlcmF0b3JfY29uc3RydWN0b3IoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCBuZXdfdGFyZ2V0LCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2KSB7CiAgSlNTbGljZUl0ZXJhdG9yRGF0YSogczsKICBKU0NvbnRvdXJEYXRhPGRvdWJsZT4qIHY7CiAgSlNWYWx1ZSBvYmogPSBKU19VTkRFRklORUQ7CiAgSlNWYWx1ZSBwcm90bzsKICBpbnQzMl90IG51bV9lbGVtcyA9IDE7CiAgYXNzZXJ0KDApOwoKICBpZihqc19zbGljZV9pdGVyYXRvcl9jbGFzc19pZCA9PSAwKQogICAganNfc2xpY2VfaXRlcmF0b3JfaW5pdChjdHgsIDApOwoKICBhc3NlcnQoanNfc2xpY2VfaXRlcmF0b3JfY2xhc3NfaWQpOwoKICBpZighKHMgPSBqc19hbGxvY2F0ZTxKU1NsaWNlSXRlcmF0b3JEYXRhPihjdHgpKSkKICAgIHJldHVybiBKU19FWENFUFRJT047CgogIHMtPmJ1ZmZlciA9IEpTX0R1cFZhbHVlKGN0eCwgYXJndlswXSk7CiAgcy0+dHlwZSA9IGpzX3R5cGVkYXJyYXlfdHlwZShjdHgsIGFyZ3ZbMV0pOwogIHMtPnJhbmdlID0ganNfYXJyYXlidWZmZXJfcmFuZ2UoY3R4LCBzLT5idWZmZXIpOwogIHMtPnB0ciA9IHMtPnJhbmdlLmJlZ2luKCk7CiAgcy0+Y3RvciA9IEpTX0lzRnVuY3Rpb24oY3R4LCBhcmd2WzFdKSA/IEpTX0R1cFZhbHVlKGN0eCwgYXJndlsxXSkgOiBqc19nbG9iYWxfZ2V0KGN0eCwgcy0+dHlwZS5jb25zdHJ1Y3Rvcl9uYW1lKCkuY19zdHIoKSk7CgogIGlmKGFyZ2MgPiAyKQogICAganNfdmFsdWVfdG8oY3R4LCBhcmd2WzJdLCBudW1fZWxlbXMpOwoKICBzLT5udW1fZWxlbXMgPSBudW1fZWxlbXM7CiAgcy0+aW5jcmVtZW50ID0gcy0+dHlwZS5ieXRlX3NpemUgKiBudW1fZWxlbXM7CgogIHByb3RvID0gSlNfR2V0UHJvcGVydHlTdHIoY3R4LCBuZXdfdGFyZ2V0LCAicHJvdG90eXBlIik7CiAgaWYoSlNfSXNFeGNlcHRpb24ocHJvdG8pKQogICAgZ290byBmYWlsOwogIG9iaiA9IEpTX05ld09iamVjdFByb3RvQ2xhc3MoY3R4LCBwcm90bywganNfc2xpY2VfaXRlcmF0b3JfY2xhc3NfaWQpOwogIEpTX0ZyZWVWYWx1ZShjdHgsIHByb3RvKTsKICBpZihKU19Jc0V4Y2VwdGlvbihvYmopKQogICAgZ290byBmYWlsOwogIEpTX1NldE9wYXF1ZShvYmosIHMpOwogIHJldHVybiBvYmo7CmZhaWw6CiAganNfZGVhbGxvY2F0ZShjdHgsIHMpOwogIEpTX0ZyZWVWYWx1ZShjdHgsIG9iaik7CiAgcmV0dXJuIEpTX0VYQ0VQVElPTjsKfQoKc3RhdGljIEpTVmFsdWUKanNfc2xpY2VfaXRlcmF0b3JfZHVwKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QqIGFyZ3YpIHsKICByZXR1cm4gSlNfRHVwVmFsdWUoY3R4LCB0aGlzX3ZhbCk7Cn0KCnN0YXRpYyB2b2lkCmpzX3NsaWNlX2l0ZXJhdG9yX2ZpbmFsaXplcihKU1J1bnRpbWUqIHJ0LCBKU1ZhbHVlIHZhbCkgewogIEpTU2xpY2VJdGVyYXRvckRhdGEqIHM7CiAgLyogTm90ZTogJ3MnIGNhbiBiZSBOVUxMIGluIGNhc2UgSlNfU2V0T3BhcXVlKCkgd2FzIG5vdCBjYWxsZWQgKi8KICBpZigocyA9IHN0YXRpY19jYXN0PEpTU2xpY2VJdGVyYXRvckRhdGEqPihKU19HZXRPcGFxdWUodmFsLCBqc19zbGljZV9pdGVyYXRvcl9jbGFzc19pZCkpKSkgewogICAgSlNfRnJlZVZhbHVlUlQocnQsIHMtPmJ1ZmZlcik7CiAgICBKU19GcmVlVmFsdWVSVChydCwgcy0+Y3Rvcik7CiAgICBqc19kZWFsbG9jYXRlKHJ0LCBzKTsKICB9CiAgLy8gSlNfRnJlZVZhbHVlUlQocnQsIHZhbCk7Cn0KCmV4dGVybiAiQyIgewpKU0NsYXNzRGVmIGpzX3NsaWNlX2l0ZXJhdG9yX2NsYXNzID0gewogICAgLmNsYXNzX25hbWUgPSAiU2xpY2VJdGVyYXRvciIsCiAgICAuZmluYWxpemVyID0ganNfc2xpY2VfaXRlcmF0b3JfZmluYWxpemVyLAp9OwoKY29uc3QgSlNDRnVuY3Rpb25MaXN0RW50cnkganNfc2xpY2VfaXRlcmF0b3JfcHJvdG9fZnVuY3NbXSA9IHsKICAgIEpTX0lURVJBVE9SX05FWFRfREVGKCJuZXh0IiwgMCwganNfc2xpY2VfaXRlcmF0b3JfbmV4dCwgMCksCiAgICBKU19DRlVOQ19ERUYoIltTeW1ib2wuaXRlcmF0b3JdIiwgMCwganNfc2xpY2VfaXRlcmF0b3JfZHVwKSwKICAgIEpTX1BST1BfU1RSSU5HX0RFRigiW1N5bWJvbC50b1N0cmluZ1RhZ10iLCAiU2xpY2VJdGVyYXRvciIsIEpTX1BST1BfQ09ORklHVVJBQkxFKSwKfTsKCmludApqc19zbGljZV9pdGVyYXRvcl9pbml0KEpTQ29udGV4dCogY3R4LCBKU01vZHVsZURlZiogbSkgewoKICBpZihqc19zbGljZV9pdGVyYXRvcl9jbGFzc19pZCA9PSAwKSB7CiAgICAvKiBjcmVhdGUgdGhlIFNsaWNlSXRlcmF0b3IgY2xhc3MgKi8KICAgIEpTX05ld0NsYXNzSUQoJmpzX3NsaWNlX2l0ZXJhdG9yX2NsYXNzX2lkKTsKICAgIEpTX05ld0NsYXNzKEpTX0dldFJ1bnRpbWUoY3R4KSwganNfc2xpY2VfaXRlcmF0b3JfY2xhc3NfaWQsICZqc19zbGljZV9pdGVyYXRvcl9jbGFzcyk7CgogICAgc2xpY2VfaXRlcmF0b3JfcHJvdG8gPSBKU19OZXdPYmplY3QoY3R4KTsKICAgIEpTX1NldFByb3BlcnR5RnVuY3Rpb25MaXN0KGN0eCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNsaWNlX2l0ZXJhdG9yX3Byb3RvLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAganNfc2xpY2VfaXRlcmF0b3JfcHJvdG9fZnVuY3MsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb3VudG9mKGpzX3NsaWNlX2l0ZXJhdG9yX3Byb3RvX2Z1bmNzKSk7CiAgICBKU19TZXRDbGFzc1Byb3RvKGN0eCwganNfc2xpY2VfaXRlcmF0b3JfY2xhc3NfaWQsIHNsaWNlX2l0ZXJhdG9yX3Byb3RvKTsKCiAgICBzbGljZV9pdGVyYXRvcl9jbGFzcyA9IEpTX05ld0NGdW5jdGlvbjIoY3R4LCBqc19zbGljZV9pdGVyYXRvcl9jb25zdHJ1Y3RvciwgIlNsaWNlSXRlcmF0b3IiLCAyLCBKU19DRlVOQ19jb25zdHJ1Y3RvciwgMCk7CiAgICAvKiBzZXQgcHJvdG8uY29uc3RydWN0b3IgYW5kIGN0b3IucHJvdG90eXBlICovCgogICAgSlNfU2V0Q29uc3RydWN0b3IoY3R4LCBzbGljZV9pdGVyYXRvcl9jbGFzcywgc2xpY2VfaXRlcmF0b3JfcHJvdG8pOwogICAgLy8gSlNfU2V0UHJvcGVydHlGdW5jdGlvbkxpc3QoY3R4LCBzbGljZV9pdGVyYXRvcl9jbGFzcywganNfc2xpY2VfaXRlcmF0b3Jfc3RhdGljX2Z1bmNzLAogICAgLy8gY291bnRvZihqc19zbGljZV9pdGVyYXRvcl9zdGF0aWNfZnVuY3MpKTsKICB9CgogIGlmKG0pCiAgICBKU19TZXRNb2R1bGVFeHBvcnQoY3R4LCBtLCAiU2xpY2VJdGVyYXRvciIsIHNsaWNlX2l0ZXJhdG9yX2NsYXNzKTsKICAvKiBlbHNlCiAgICAgSlNfU2V0UHJvcGVydHlTdHIoY3R4LCAqc3RhdGljX2Nhc3Q8SlNWYWx1ZSo+KG0pLCBuYW1lLCBzbGljZV9pdGVyYXRvcl9jbGFzcyk7Ki8KICByZXR1cm4gMDsKfQoKZXh0ZXJuICJDIiBWSVNJQkxFIHZvaWQKanNfc2xpY2VfaXRlcmF0b3JfZXhwb3J0KEpTQ29udGV4dCogY3R4LCBKU01vZHVsZURlZiogbSkgewogIEpTX0FkZE1vZHVsZUV4cG9ydChjdHgsIG0sICJTbGljZUl0ZXJhdG9yIik7Cn0KCiNpZiBkZWZpbmVkKEpTX1NMSUNFX0lURVJBVE9SX01PRFVMRSkKI2RlZmluZSBKU19JTklUX01PRFVMRSAvKlZJU0lCTEUqLyBqc19pbml0X21vZHVsZQojZWxzZQojZGVmaW5lIEpTX0lOSVRfTU9EVUxFIC8qVklTSUJMRSovIGpzX2luaXRfbW9kdWxlX3NsaWNlX2l0ZXJhdG9yCiNlbmRpZgoKSlNNb2R1bGVEZWYqCkpTX0lOSVRfTU9EVUxFKEpTQ29udGV4dCogY3R4LCBjb25zdCBjaGFyKiBtb2R1bGVfbmFtZSkgewogIEpTTW9kdWxlRGVmKiBtOwogIG0gPSBKU19OZXdDTW9kdWxlKGN0eCwgbW9kdWxlX25hbWUsICZqc19zbGljZV9pdGVyYXRvcl9pbml0KTsKICBpZighbSkKICAgIHJldHVybiBOVUxMOwogIGpzX3NsaWNlX2l0ZXJhdG9yX2V4cG9ydChjdHgsIG0pOwogIHJldHVybiBtOwp9CgpzdGF0aWMgSlNWYWx1ZQpqc19zbGljZV9pdGVyYXRvcl90b19zdHJpbmcoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCogYXJndikgewogIEpTU2xpY2VJdGVyYXRvckRhdGEqIHMgPSBzdGF0aWNfY2FzdDxKU1NsaWNlSXRlcmF0b3JEYXRhKj4oSlNfR2V0T3BhcXVlMihjdHgsIHRoaXNfdmFsLCBqc19zbGljZV9pdGVyYXRvcl9jbGFzc19pZCkpOwogIHN0ZDo6b3N0cmluZ3N0cmVhbSBvczsKICBpZighcykKICAgIHJldHVybiBKU19FWENFUFRJT047CgogIC8vIG9zIDw8ICJ7eDoiIDw8IHMtPnggPDwgIix5OiIgPDwgcy0+eSA8PCAifSIgPDwgc3RkOjplbmRsOwoKICByZXR1cm4gSlNfTmV3U3RyaW5nKGN0eCwgb3Muc3RyKCkuY19zdHIoKSk7Cn0KfQAAAAAAAAAAPxkAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAlRUAAAAAAACVFQAAAAAAAAAAAAAAAPC/"
				],
				[
					38,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAAA/GQAAI2luY2x1ZGUgImpzYmluZGluZ3MuaHBwIgojaW5jbHVkZSAianNfYWxsb2MuaHBwIgojaW5jbHVkZSAianNfc2xpY2VfaXRlcmF0b3IuaHBwIgoKZXh0ZXJuICJDIiB7CgpKU1ZhbHVlIHNsaWNlX2l0ZXJhdG9yX3Byb3RvID0gSlNfVU5ERUZJTkVELCBzbGljZV9pdGVyYXRvcl9jbGFzcyA9IEpTX1VOREVGSU5FRDsKVklTSUJMRSBKU0NsYXNzSUQganNfc2xpY2VfaXRlcmF0b3JfY2xhc3NfaWQgPSAwOwoKVklTSUJMRSBKU1NsaWNlSXRlcmF0b3JEYXRhKgpqc19zbGljZV9pdGVyYXRvcl9jcmVhdGUoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCBidWZmZXIsIGNvbnN0IFR5cGVkQXJyYXlUeXBlJiB0eXBlLCBpbnQgbnVtX2VsZW1zKSB7CiAgSlNTbGljZUl0ZXJhdG9yRGF0YSogaXQ7CgogIGlmKChpdCA9IGpzX2FsbG9jYXRlPEpTU2xpY2VJdGVyYXRvckRhdGE+KGN0eCkpKSB7CgogICAgaXQtPmJ1ZmZlciA9IEpTX0R1cFZhbHVlKGN0eCwgYnVmZmVyKTsKICAgIGl0LT50eXBlID0gdHlwZTsKICAgIGl0LT5yYW5nZSA9IGpzX2FycmF5YnVmZmVyX3JhbmdlKGN0eCwgYnVmZmVyKTsKICAgIGl0LT5wdHIgPSBpdC0+cmFuZ2UuYmVnaW4oKTsKICAgIGl0LT5jdG9yID0ganNfZ2xvYmFsX2dldChjdHgsIHR5cGUuY29uc3RydWN0b3JfbmFtZSgpLmNfc3RyKCkpOwogICAgaXQtPm51bV9lbGVtcyA9IG51bV9lbGVtczsKICAgIGl0LT5pbmNyZW1lbnQgPSBpdC0+dHlwZS5ieXRlX3NpemUgKiBudW1fZWxlbXM7CiAgfQogIHJldHVybiBpdDsKfQoKVklTSUJMRSBKU1ZhbHVlCmpzX3NsaWNlX2l0ZXJhdG9yX25ldyhKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IGJ1ZmZlciwgY29uc3QgVHlwZWRBcnJheVR5cGUmIHR5cGUsIGludCBudW1fZWxlbXMpIHsKICBKU1NsaWNlSXRlcmF0b3JEYXRhKiBpdDsKICBKU1ZhbHVlIGl0ZXJhdG9yOwoKICBpZihqc19zbGljZV9pdGVyYXRvcl9jbGFzc19pZCA9PSAwKQogICAganNfc2xpY2VfaXRlcmF0b3JfaW5pdChjdHgsIDApOwoKICBhc3NlcnQoanNfc2xpY2VfaXRlcmF0b3JfY2xhc3NfaWQpOwoKICBpdGVyYXRvciA9IEpTX05ld09iamVjdFByb3RvQ2xhc3MoY3R4LCBzbGljZV9pdGVyYXRvcl9wcm90bywganNfc2xpY2VfaXRlcmF0b3JfY2xhc3NfaWQpOwogIGlmKEpTX0lzRXhjZXB0aW9uKGl0ZXJhdG9yKSkKICAgIGdvdG8gZmFpbDsKICBpZighKGl0ID0ganNfc2xpY2VfaXRlcmF0b3JfY3JlYXRlKGN0eCwgYnVmZmVyLCB0eXBlLCBudW1fZWxlbXMpKSkKICAgIGdvdG8gZmFpbDE7CgogIEpTX1NldE9wYXF1ZShpdGVyYXRvciwgaXQpOwogIHJldHVybiBpdGVyYXRvcjsKZmFpbDE6CiAgSlNfRnJlZVZhbHVlKGN0eCwgaXRlcmF0b3IpOwpmYWlsOgogIHJldHVybiBKU19FWENFUFRJT047Cn0KfQoKc3RhdGljIEpTVmFsdWUKanNfc2xpY2VfaXRlcmF0b3JfbmV4dChKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2LCBCT09MKiBwZG9uZSwgaW50IG1hZ2ljKSB7CiAgSlNTbGljZUl0ZXJhdG9yRGF0YSogaXQ7CiAgSlNWYWx1ZSByZXN1bHQgPSBKU19VTkRFRklORUQ7CgogIGlmKChpdCA9IHN0YXRpY19jYXN0PEpTU2xpY2VJdGVyYXRvckRhdGEqPihKU19HZXRPcGFxdWUodGhpc192YWwsIGpzX3NsaWNlX2l0ZXJhdG9yX2NsYXNzX2lkKSkpID09IG51bGxwdHIpCiAgICByZXR1cm4gSlNfRVhDRVBUSU9OOwoKICBpZighKCpwZG9uZSA9IGl0LT5wdHIgPj0gaXQtPnJhbmdlLmVuZCgpKSkgewoKICAgIC8vIHByaW50ZigiYnl0ZV9wb3MgPSAlenUsIGJ5dGVfc2l6ZSA9ICV6dSwgbnVtX2VsZW1zID0gJWksIGluY3JlbWVudCA9ICV6dVxuIiwgc2l6ZV90KGl0LT5wdHIgLQogICAgLy8gaXQtPnJhbmdlLmJlZ2luKCkpLCBpdC0+cmFuZ2Uuc2l6ZSgpLCBpdC0+bnVtX2VsZW1zLCBpdC0+aW5jcmVtZW50KTsKCiAgICByZXN1bHQgPSBqc190eXBlZGFycmF5X25ldyhjdHgsIGl0LT5idWZmZXIsIGl0LT5wdHIgLSBpdC0+cmFuZ2UuYmVnaW4oKSwgaXQtPm51bV9lbGVtcywgaXQtPmN0b3IpOwogICAgaXQtPnB0ciArPSBpdC0+aW5jcmVtZW50OwogIH0KCiAgcmV0dXJuIHJlc3VsdDsKfQoKc3RhdGljIEpTVmFsdWUKanNfc2xpY2VfaXRlcmF0b3JfY29uc3RydWN0b3IoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCBuZXdfdGFyZ2V0LCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2KSB7CiAgSlNTbGljZUl0ZXJhdG9yRGF0YSogczsKICBKU0NvbnRvdXJEYXRhPGRvdWJsZT4qIHY7CiAgSlNWYWx1ZSBvYmogPSBKU19VTkRFRklORUQ7CiAgSlNWYWx1ZSBwcm90bzsKICBpbnQzMl90IG51bV9lbGVtcyA9IDE7CiAgYXNzZXJ0KDApOwoKICBpZihqc19zbGljZV9pdGVyYXRvcl9jbGFzc19pZCA9PSAwKQogICAganNfc2xpY2VfaXRlcmF0b3JfaW5pdChjdHgsIDApOwoKICBhc3NlcnQoanNfc2xpY2VfaXRlcmF0b3JfY2xhc3NfaWQpOwoKICBpZighKHMgPSBqc19hbGxvY2F0ZTxKU1NsaWNlSXRlcmF0b3JEYXRhPihjdHgpKSkKICAgIHJldHVybiBKU19FWENFUFRJT047CgogIHMtPmJ1ZmZlciA9IEpTX0R1cFZhbHVlKGN0eCwgYXJndlswXSk7CiAgcy0+dHlwZSA9IGpzX3R5cGVkYXJyYXlfdHlwZShjdHgsIGFyZ3ZbMV0pOwogIHMtPnJhbmdlID0ganNfYXJyYXlidWZmZXJfcmFuZ2UoY3R4LCBzLT5idWZmZXIpOwogIHMtPnB0ciA9IHMtPnJhbmdlLmJlZ2luKCk7CiAgcy0+Y3RvciA9IEpTX0lzRnVuY3Rpb24oY3R4LCBhcmd2WzFdKSA/IEpTX0R1cFZhbHVlKGN0eCwgYXJndlsxXSkgOiBqc19nbG9iYWxfZ2V0KGN0eCwgcy0+dHlwZS5jb25zdHJ1Y3Rvcl9uYW1lKCkuY19zdHIoKSk7CgogIGlmKGFyZ2MgPiAyKQogICAganNfdmFsdWVfdG8oY3R4LCBhcmd2WzJdLCBudW1fZWxlbXMpOwoKICBzLT5udW1fZWxlbXMgPSBudW1fZWxlbXM7CiAgcy0+aW5jcmVtZW50ID0gcy0+dHlwZS5ieXRlX3NpemUgKiBudW1fZWxlbXM7CgogIHByb3RvID0gSlNfR2V0UHJvcGVydHlTdHIoY3R4LCBuZXdfdGFyZ2V0LCAicHJvdG90eXBlIik7CiAgaWYoSlNfSXNFeGNlcHRpb24ocHJvdG8pKQogICAgZ290byBmYWlsOwogIG9iaiA9IEpTX05ld09iamVjdFByb3RvQ2xhc3MoY3R4LCBwcm90bywganNfc2xpY2VfaXRlcmF0b3JfY2xhc3NfaWQpOwogIEpTX0ZyZWVWYWx1ZShjdHgsIHByb3RvKTsKICBpZihKU19Jc0V4Y2VwdGlvbihvYmopKQogICAgZ290byBmYWlsOwogIEpTX1NldE9wYXF1ZShvYmosIHMpOwogIHJldHVybiBvYmo7CmZhaWw6CiAganNfZGVhbGxvY2F0ZShjdHgsIHMpOwogIEpTX0ZyZWVWYWx1ZShjdHgsIG9iaik7CiAgcmV0dXJuIEpTX0VYQ0VQVElPTjsKfQoKc3RhdGljIEpTVmFsdWUKanNfc2xpY2VfaXRlcmF0b3JfZHVwKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QqIGFyZ3YpIHsKICByZXR1cm4gSlNfRHVwVmFsdWUoY3R4LCB0aGlzX3ZhbCk7Cn0KCnN0YXRpYyB2b2lkCmpzX3NsaWNlX2l0ZXJhdG9yX2ZpbmFsaXplcihKU1J1bnRpbWUqIHJ0LCBKU1ZhbHVlIHZhbCkgewogIEpTU2xpY2VJdGVyYXRvckRhdGEqIHM7CiAgLyogTm90ZTogJ3MnIGNhbiBiZSBOVUxMIGluIGNhc2UgSlNfU2V0T3BhcXVlKCkgd2FzIG5vdCBjYWxsZWQgKi8KICBpZigocyA9IHN0YXRpY19jYXN0PEpTU2xpY2VJdGVyYXRvckRhdGEqPihKU19HZXRPcGFxdWUodmFsLCBqc19zbGljZV9pdGVyYXRvcl9jbGFzc19pZCkpKSkgewogICAgSlNfRnJlZVZhbHVlUlQocnQsIHMtPmJ1ZmZlcik7CiAgICBKU19GcmVlVmFsdWVSVChydCwgcy0+Y3Rvcik7CiAgICBqc19kZWFsbG9jYXRlKHJ0LCBzKTsKICB9CiAgLy8gSlNfRnJlZVZhbHVlUlQocnQsIHZhbCk7Cn0KCmV4dGVybiAiQyIgewpKU0NsYXNzRGVmIGpzX3NsaWNlX2l0ZXJhdG9yX2NsYXNzID0gewogICAgLmNsYXNzX25hbWUgPSAiU2xpY2VJdGVyYXRvciIsCiAgICAuZmluYWxpemVyID0ganNfc2xpY2VfaXRlcmF0b3JfZmluYWxpemVyLAp9OwoKY29uc3QgSlNDRnVuY3Rpb25MaXN0RW50cnkganNfc2xpY2VfaXRlcmF0b3JfcHJvdG9fZnVuY3NbXSA9IHsKICAgIEpTX0lURVJBVE9SX05FWFRfREVGKCJuZXh0IiwgMCwganNfc2xpY2VfaXRlcmF0b3JfbmV4dCwgMCksCiAgICBKU19DRlVOQ19ERUYoIltTeW1ib2wuaXRlcmF0b3JdIiwgMCwganNfc2xpY2VfaXRlcmF0b3JfZHVwKSwKICAgIEpTX1BST1BfU1RSSU5HX0RFRigiW1N5bWJvbC50b1N0cmluZ1RhZ10iLCAiU2xpY2VJdGVyYXRvciIsIEpTX1BST1BfQ09ORklHVVJBQkxFKSwKfTsKCmludApqc19zbGljZV9pdGVyYXRvcl9pbml0KEpTQ29udGV4dCogY3R4LCBKU01vZHVsZURlZiogbSkgewoKICBpZihqc19zbGljZV9pdGVyYXRvcl9jbGFzc19pZCA9PSAwKSB7CiAgICAvKiBjcmVhdGUgdGhlIFNsaWNlSXRlcmF0b3IgY2xhc3MgKi8KICAgIEpTX05ld0NsYXNzSUQoJmpzX3NsaWNlX2l0ZXJhdG9yX2NsYXNzX2lkKTsKICAgIEpTX05ld0NsYXNzKEpTX0dldFJ1bnRpbWUoY3R4KSwganNfc2xpY2VfaXRlcmF0b3JfY2xhc3NfaWQsICZqc19zbGljZV9pdGVyYXRvcl9jbGFzcyk7CgogICAgc2xpY2VfaXRlcmF0b3JfcHJvdG8gPSBKU19OZXdPYmplY3QoY3R4KTsKICAgIEpTX1NldFByb3BlcnR5RnVuY3Rpb25MaXN0KGN0eCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNsaWNlX2l0ZXJhdG9yX3Byb3RvLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAganNfc2xpY2VfaXRlcmF0b3JfcHJvdG9fZnVuY3MsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb3VudG9mKGpzX3NsaWNlX2l0ZXJhdG9yX3Byb3RvX2Z1bmNzKSk7CiAgICBKU19TZXRDbGFzc1Byb3RvKGN0eCwganNfc2xpY2VfaXRlcmF0b3JfY2xhc3NfaWQsIHNsaWNlX2l0ZXJhdG9yX3Byb3RvKTsKCiAgICBzbGljZV9pdGVyYXRvcl9jbGFzcyA9IEpTX05ld0NGdW5jdGlvbjIoY3R4LCBqc19zbGljZV9pdGVyYXRvcl9jb25zdHJ1Y3RvciwgIlNsaWNlSXRlcmF0b3IiLCAyLCBKU19DRlVOQ19jb25zdHJ1Y3RvciwgMCk7CiAgICAvKiBzZXQgcHJvdG8uY29uc3RydWN0b3IgYW5kIGN0b3IucHJvdG90eXBlICovCgogICAgSlNfU2V0Q29uc3RydWN0b3IoY3R4LCBzbGljZV9pdGVyYXRvcl9jbGFzcywgc2xpY2VfaXRlcmF0b3JfcHJvdG8pOwogICAgLy8gSlNfU2V0UHJvcGVydHlGdW5jdGlvbkxpc3QoY3R4LCBzbGljZV9pdGVyYXRvcl9jbGFzcywganNfc2xpY2VfaXRlcmF0b3Jfc3RhdGljX2Z1bmNzLAogICAgLy8gY291bnRvZihqc19zbGljZV9pdGVyYXRvcl9zdGF0aWNfZnVuY3MpKTsKICB9CgogIGlmKG0pCiAgICBKU19TZXRNb2R1bGVFeHBvcnQoY3R4LCBtLCAiU2xpY2VJdGVyYXRvciIsIHNsaWNlX2l0ZXJhdG9yX2NsYXNzKTsKICAvKiBlbHNlCiAgICAgSlNfU2V0UHJvcGVydHlTdHIoY3R4LCAqc3RhdGljX2Nhc3Q8SlNWYWx1ZSo+KG0pLCBuYW1lLCBzbGljZV9pdGVyYXRvcl9jbGFzcyk7Ki8KICByZXR1cm4gMDsKfQoKZXh0ZXJuICJDIiBWSVNJQkxFIHZvaWQKanNfc2xpY2VfaXRlcmF0b3JfZXhwb3J0KEpTQ29udGV4dCogY3R4LCBKU01vZHVsZURlZiogbSkgewogIEpTX0FkZE1vZHVsZUV4cG9ydChjdHgsIG0sICJTbGljZUl0ZXJhdG9yIik7Cn0KCiNpZiBkZWZpbmVkKEpTX1NMSUNFX0lURVJBVE9SX01PRFVMRSkKI2RlZmluZSBKU19JTklUX01PRFVMRSAvKlZJU0lCTEUqLyBqc19pbml0X21vZHVsZQojZWxzZQojZGVmaW5lIEpTX0lOSVRfTU9EVUxFIC8qVklTSUJMRSovIGpzX2luaXRfbW9kdWxlX3NsaWNlX2l0ZXJhdG9yCiNlbmRpZgoKSlNNb2R1bGVEZWYqCkpTX0lOSVRfTU9EVUxFKEpTQ29udGV4dCogY3R4LCBjb25zdCBjaGFyKiBtb2R1bGVfbmFtZSkgewogIEpTTW9kdWxlRGVmKiBtOwogIG0gPSBKU19OZXdDTW9kdWxlKGN0eCwgbW9kdWxlX25hbWUsICZqc19zbGljZV9pdGVyYXRvcl9pbml0KTsKICBpZighbSkKICAgIHJldHVybiBOVUxMOwogIGpzX3NsaWNlX2l0ZXJhdG9yX2V4cG9ydChjdHgsIG0pOwogIHJldHVybiBtOwp9CgpzdGF0aWMgSlNWYWx1ZQpqc19zbGljZV9pdGVyYXRvcl90b19zdHJpbmcoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCogYXJndikgewogIEpTU2xpY2VJdGVyYXRvckRhdGEqIHMgPSBzdGF0aWNfY2FzdDxKU1NsaWNlSXRlcmF0b3JEYXRhKj4oSlNfR2V0T3BhcXVlMihjdHgsIHRoaXNfdmFsLCBqc19zbGljZV9pdGVyYXRvcl9jbGFzc19pZCkpOwogIHN0ZDo6b3N0cmluZ3N0cmVhbSBvczsKICBpZighcykKICAgIHJldHVybiBKU19FWENFUFRJT047CgogIC8vIG9zIDw8ICJ7eDoiIDw8IHMtPnggPDwgIix5OiIgPDwgcy0+eSA8PCAifSIgPDwgc3RkOjplbmRsOwoKICByZXR1cm4gSlNfTmV3U3RyaW5nKGN0eCwgb3Muc3RyKCkuY19zdHIoKSk7Cn0KfQAAAAAAAAAALxkAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAlRUAAAAAAACVFQAAAAAAAAAAAAAAAPC/"
				]
			]
		},
		{
			"file": "js_slice_iterator.hpp",
			"settings":
			{
				"buffer_size": 807,
				"line_ending": "Unix"
			},
			"undo_stack":
			[
				[
					3,
					1,
					"paste",
					null,
					"AQAAAIcAAAAAAAAA0AAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAhwAAAAAAAACHAAAAAAAAAAAAAAAAAPC/"
				],
				[
					6,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"AQAAANAAAAAAAAAA0QAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA0AAAAAAAAADQAAAAAAAAAAAAAAAAAAAA"
				],
				[
					7,
					1,
					"left_delete",
					null,
					"AQAAANAAAAAAAAAA0AAAAAAAAAABAAAACg",
					"AQAAAAAAAAABAAAA0QAAAAAAAADRAAAAAAAAAAAAAAAAAPC/"
				],
				[
					9,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"AQAAAIcAAAAAAAAAiAAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAhwAAAAAAAACHAAAAAAAAAAAAAAAAAAAA"
				],
				[
					10,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAAAnAwAAI2lmbmRlZiBKU19TTElDRV9JVEVSQVRPUl9IUFAKI2RlZmluZSBKU19TTElDRV9JVEVSQVRPUl9IUFAKCiNpbmNsdWRlICJqc2JpbmRpbmdzLmhwcCIKI2luY2x1ZGUgImpzX3R5cGVkX2FycmF5LmhwcCIKI2luY2x1ZGUgPHJhbmdlcz4KCmV4dGVybiAiQyIgVklTSUJMRSBpbnQganNfc2xpY2VfaXRlcmF0b3JfaW5pdChKU0NvbnRleHQqLCBKU01vZHVsZURlZiopOwoKZXh0ZXJuICJDIiB7CgpleHRlcm4gSlNWYWx1ZSBzbGljZV9pdGVyYXRvcl9wcm90bywgc2xpY2VfaXRlcmF0b3JfY2xhc3M7CmV4dGVybiBKU0NsYXNzSUQganNfc2xpY2VfaXRlcmF0b3JfY2xhc3NfaWQ7CgpWSVNJQkxFIEpTVmFsdWUganNfc2xpY2VfaXRlcmF0b3JfbmV3KEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgYnVmZmVyLCBjb25zdCBUeXBlZEFycmF5VHlwZSYgdHlwZSwgaW50IG51bV9lbGVtcyk7CgppbnQganNfc2xpY2VfaXRlcmF0b3JfaW5pdChKU0NvbnRleHQqLCBKU01vZHVsZURlZiogbSk7CgpKU01vZHVsZURlZioganNfaW5pdF9tb2R1bGVfc2xpY2VfaXRlcmF0b3IoSlNDb250ZXh0KiwgY29uc3QgY2hhciogbW9kdWxlX25hbWUpOwp9CgpzdHJ1Y3QgSlNTbGljZUl0ZXJhdG9yRGF0YSB7CiAgdWludDhfdCogcHRyOwogIHN0ZDo6cmFuZ2VzOjpzdWJyYW5nZTx1aW50OF90Kj4gcmFuZ2U7CiAgaW50IG51bV9lbGVtczsKICBzaXplX3QgaW5jcmVtZW50OwogIFR5cGVkQXJyYXlUeXBlIHR5cGU7CiAgSlNWYWx1ZSBidWZmZXIsIGN0b3I7Cn07CgojZW5kaWYgLyogZGVmaW5lZChKU19TTElDRV9JVEVSQVRPUl9IUFApICovAAAAAAAAAAAnAwAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAiAAAAAAAAACIAAAAAAAAAAAAAAAAAPC/"
				]
			]
		},
		{
			"file": "js_subdiv2d.cpp",
			"settings":
			{
				"buffer_size": 10862,
				"line_ending": "Unix"
			},
			"undo_stack":
			[
				[
					3,
					1,
					"paste",
					null,
					"AQAAAJkAAAAAAAAA3AAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAmQAAAAAAAACZAAAAAAAAAAAAAAAAAPC/"
				],
				[
					5,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"AQAAAJkAAAAAAAAAmgAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAmQAAAAAAAACZAAAAAAAAAAAAAAAAAAAA"
				],
				[
					6,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAAARKgAAI2luY2x1ZGUgImpzYmluZGluZ3MuaHBwIgojaW5jbHVkZSAianNfcmVjdC5ocHAiCiNpbmNsdWRlICJqc19wb2ludC5ocHAiCiNpbmNsdWRlICJqc19hbGxvYy5ocHAiCiNpbmNsdWRlICJqc19hcnJheS5ocHAiCgojaW5jbHVkZSA8b3BlbmN2Mi9pbWdwcm9jLmhwcD4KCmV4dGVybiAiQyIgVklTSUJMRSBpbnQganNfc3ViZGl2MmRfaW5pdChKU0NvbnRleHQqLCBKU01vZHVsZURlZiopOwoKZXh0ZXJuICJDIiB7CkpTVmFsdWUgc3ViZGl2MmRfcHJvdG8gPSBKU19VTkRFRklORUQsIHN1YmRpdjJkX2NsYXNzID0gSlNfVU5ERUZJTkVEOwpKU0NsYXNzSUQganNfc3ViZGl2MmRfY2xhc3NfaWQgPSAwOwp9CgpKU1ZhbHVlCmpzX3N1YmRpdjJkX25ldyhKU0NvbnRleHQqIGN0eCwgSlNSZWN0RGF0YTxpbnQ+KiByZWN0ID0gbnVsbHB0cikgewogIEpTVmFsdWUgcmV0OwogIGN2OjpTdWJkaXYyRCogczsKICByZXQgPSBKU19OZXdPYmplY3RQcm90b0NsYXNzKGN0eCwgc3ViZGl2MmRfcHJvdG8sIGpzX3N1YmRpdjJkX2NsYXNzX2lkKTsKICBzID0ganNfYWxsb2NhdGU8Y3Y6OlN1YmRpdjJEPihjdHgpOwoKICBpZihyZWN0KQogICAgbmV3KHMpIGN2OjpTdWJkaXYyRCgqcmVjdCk7CiAgZWxzZQogICAgbmV3KHMpIGN2OjpTdWJkaXYyRCgpOwoKICBKU19TZXRPcGFxdWUocmV0LCBzKTsKCiAgcmV0dXJuIHJldDsKfQoKc3RhdGljIEpTVmFsdWUKanNfc3ViZGl2MmRfY3RvcihKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IG5ld190YXJnZXQsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QqIGFyZ3YpIHsKICBKU1JlY3REYXRhPGludD4gcmVjdDsKCiAgaWYoYXJnYyA+IDApCiAgICBpZighanNfcmVjdF9yZWFkKGN0eCwgYXJndlswXSwgJnJlY3QpKQogICAgICByZXR1cm4gSlNfRVhDRVBUSU9OOwoKICByZXR1cm4ganNfc3ViZGl2MmRfbmV3KGN0eCwgYXJnYyA+IDAgPyAmcmVjdCA6IG51bGxwdHIpOwp9Cgpjdjo6U3ViZGl2MkQqCmpzX3N1YmRpdjJkX2RhdGEoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB2YWwpIHsKICByZXR1cm4gc3RhdGljX2Nhc3Q8Y3Y6OlN1YmRpdjJEKj4oSlNfR2V0T3BhcXVlMihjdHgsIHZhbCwganNfc3ViZGl2MmRfY2xhc3NfaWQpKTsKfQoKdm9pZApqc19zdWJkaXYyZF9maW5hbGl6ZXIoSlNSdW50aW1lKiBydCwgSlNWYWx1ZSB2YWwpIHsKICBjdjo6U3ViZGl2MkQqIHMgPSBzdGF0aWNfY2FzdDxjdjo6U3ViZGl2MkQqPihKU19HZXRPcGFxdWUodmFsLCBqc19zdWJkaXYyZF9jbGFzc19pZCkpOwoKICBzLT5+U3ViZGl2MkQoKTsKICBqc19kZWFsbG9jYXRlKHJ0LCBzKTsKfQoKc3RhdGljIEpTVmFsdWUKanNfc3ViZGl2MmRfbWV0aG9kKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QqIGFyZ3YsIGludCBtYWdpYykgewogIGN2OjpTdWJkaXYyRCogczsKICBKU1ZhbHVlIHJldCA9IEpTX1VOREVGSU5FRDsKCiAgaWYoKHMgPSBqc19zdWJkaXYyZF9kYXRhKGN0eCwgdGhpc192YWwpKSA9PSBudWxscHRyKQogICAgcmV0dXJuIEpTX0VYQ0VQVElPTjsKCiAgc3dpdGNoKG1hZ2ljKSB7CiAgICAvLyBpbnQgU3ViZGl2MkQ6OmVkZ2VEc3QoaW50IGVkZ2UsIFBvaW50MmYgKmRzdHB0ID0gMCkgY29uc3QKICAgIGNhc2UgMDogewogICAgICBpbnQzMl90IGVkZ2U7CiAgICAgIEpTUG9pbnREYXRhPGZsb2F0PiBkc3RwdDsKICAgICAgSlNfVG9JbnQzMihjdHgsICZlZGdlLCBhcmd2WzBdKTsKICAgICAgaWYoYXJnYyA+IDEpCiAgICAgICAganNfcG9pbnRfcmVhZChjdHgsIGFyZ3ZbMV0sICZkc3RwdCk7CiAgICAgIHJldCA9IEpTX05ld0ludDMyKGN0eCwgcy0+ZWRnZURzdChlZGdlLCBhcmdjID4gMSA/ICZkc3RwdCA6IG51bGxwdHIpKTsKICAgICAgYnJlYWs7CiAgICB9CiAgICAvLyBpbnQgU3ViZGl2MkQ6OmVkZ2VPcmcoaW50IGVkZ2UsIFBvaW50MmYgKm9yZ3B0ID0gMCkgY29uc3QKICAgIGNhc2UgMTogewogICAgICBpbnQzMl90IGVkZ2U7CiAgICAgIEpTUG9pbnREYXRhPGZsb2F0PiBvcmdwdDsKICAgICAgaWYoYXJnYyA+IDEpCiAgICAgICAganNfcG9pbnRfcmVhZChjdHgsIGFyZ3ZbMV0sICZvcmdwdCk7CiAgICAgIHJldCA9IEpTX05ld0ludDMyKGN0eCwgcy0+ZWRnZU9yZyhlZGdlLCBhcmdjID4gMSA/ICZvcmdwdCA6IG51bGxwdHIpKTsKICAgICAgYnJlYWs7CiAgICB9CiAgICAvLyBpbnQgU3ViZGl2MkQ6OmZpbmROZWFyZXN0KFBvaW50MmYgcHQsIFBvaW50MmYgKm5lYXJlc3RQdCA9IDApCiAgICBjYXNlIDI6IHsKICAgICAgSlNQb2ludERhdGE8ZmxvYXQ+IHB0LCBuZWFyZXN0UHQ7CiAgICAgIGpzX3BvaW50X3JlYWQoY3R4LCBhcmd2WzBdLCAmcHQpOwogICAgICBpZihhcmdjID4gMSkKICAgICAgICBqc19wb2ludF9yZWFkKGN0eCwgYXJndlsxXSwgJm5lYXJlc3RQdCk7CiAgICAgIHJldCA9IEpTX05ld0ludDMyKGN0eCwgcy0+ZmluZE5lYXJlc3QocHQsIGFyZ2MgPiAxID8gJm5lYXJlc3RQdCA6IG51bGxwdHIpKTsKICAgICAgYnJlYWs7CiAgICB9CiAgICAvLyBpbnQgU3ViZGl2MkQ6OmdldEVkZ2UoaW50IGVkZ2UsIGludCBuZXh0RWRnZVR5cGUpIGNvbnN0CiAgICBjYXNlIDM6IHsKICAgICAgaW50MzJfdCBlZGdlLCBuZXh0RWRnZVR5cGU7CiAgICAgIEpTX1RvSW50MzIoY3R4LCAmZWRnZSwgYXJndlswXSk7CiAgICAgIEpTX1RvSW50MzIoY3R4LCAmbmV4dEVkZ2VUeXBlLCBhcmd2WzFdKTsKICAgICAgcmV0ID0gSlNfTmV3SW50MzIoY3R4LCBzLT5nZXRFZGdlKGVkZ2UsIG5leHRFZGdlVHlwZSkpOwogICAgICBicmVhazsKICAgIH0KICAgIC8vIHZvaWQgU3ViZGl2MkQ6OmdldEVkZ2VMaXN0KHN0ZDo6dmVjdG9yPFZlYzRmPiAmZWRnZUxpc3QpIGNvbnN0CiAgICBjYXNlIDQ6IHsKICAgICAgc3RkOjp2ZWN0b3I8Y3Y6OlZlYzRmPiBlZGdlTGlzdDsKICAgICAganNfYXJyYXlfdG8oY3R4LCBhcmd2WzBdLCBlZGdlTGlzdCk7CiAgICAgIHMtPmdldEVkZ2VMaXN0KGVkZ2VMaXN0KTsKICAgICAgYnJlYWs7CiAgICB9CiAgICAvLyB2b2lkIFN1YmRpdjJEOjpnZXRMZWFkaW5nRWRnZUxpc3Qoc3RkOjp2ZWN0b3I8aW50PiAmbGVhZGluZ0VkZ2VMaXN0KSBjb25zdAogICAgY2FzZSA1OiB7CiAgICAgIHN0ZDo6dmVjdG9yPGludD4gbGVhZGluZ0VkZ2VMaXN0OwogICAgICBqc19hcnJheV90byhjdHgsIGFyZ3ZbMF0sIGxlYWRpbmdFZGdlTGlzdCk7CiAgICAgIHMtPmdldExlYWRpbmdFZGdlTGlzdChsZWFkaW5nRWRnZUxpc3QpOwogICAgICBicmVhazsKICAgIH0KICAgIC8vIHZvaWQgU3ViZGl2MkQ6OmdldFRyaWFuZ2xlTGlzdChzdGQ6OnZlY3RvcjxWZWM2Zj4gJnRyaWFuZ2xlTGlzdCkgY29uc3QKICAgIGNhc2UgNjogewogICAgICBzdGQ6OnZlY3Rvcjxjdjo6VmVjNmY+IHRyaWFuZ2xlTGlzdDsKICAgICAganNfYXJyYXlfdG8oY3R4LCBhcmd2WzBdLCB0cmlhbmdsZUxpc3QpOwogICAgICBzLT5nZXRUcmlhbmdsZUxpc3QodHJpYW5nbGVMaXN0KTsKICAgICAgYnJlYWs7CiAgICAgIGJyZWFrOwogICAgfQogICAgLy8gUG9pbnQyZiBTdWJkaXYyRDo6Z2V0VmVydGV4KGludCB2ZXJ0ZXgsIGludCAqZmlyc3RFZGdlID0gMCkgY29uc3QKICAgIGNhc2UgNzogewogICAgICBpbnQzMl90IHZlcnRleCwgZmlyc3RFZGdlID0gMDsKICAgICAgSlNfVG9JbnQzMihjdHgsICZ2ZXJ0ZXgsIGFyZ3ZbMF0pOwoKICAgICAgcmV0ID0ganNfcG9pbnRfd3JhcChjdHgsIHMtPmdldFZlcnRleCh2ZXJ0ZXgsICZmaXJzdEVkZ2UpKTsKCiAgICAgIGlmKGFyZ2MgPiAxKSB7CiAgICAgICAgSlNWYWx1ZSB2YWwgPSBKU19OZXdJbnQzMihjdHgsIGZpcnN0RWRnZSk7CiAgICAgICAganNfcmVmKGN0eCwgImZpcnN0RWRnZSIsIGFyZ3ZbMV0sIHZhbCk7CiAgICAgICAgSlNfRnJlZVZhbHVlKGN0eCwgdmFsKTsKICAgICAgfQogICAgICBicmVhazsKICAgIH0KICAgIC8vIHZvaWQgU3ViZGl2MkQ6OmdldFZvcm9ub2lGYWNldExpc3QoY29uc3Qgc3RkOjp2ZWN0b3I8aW50PiAmaWR4LAogICAgLy8gc3RkOjp2ZWN0b3I8c3RkOjp2ZWN0b3I8UG9pbnQyZj4+ICZmYWNldExpc3QsIHN0ZDo6dmVjdG9yPFBvaW50MmY+ICZmYWNldENlbnRlcnMpCiAgICBjYXNlIDg6IHsKICAgICAgc3RkOjp2ZWN0b3I8aW50PiBpZHg7CiAgICAgIEpTQ29udG91cnNEYXRhPGZsb2F0PiBmYWNldExpc3Q7CiAgICAgIHN0ZDo6dmVjdG9yPEpTUG9pbnREYXRhPGZsb2F0Pj4gZmFjZXRDZW50ZXJzOwogICAgICBqc19hcnJheV90byhjdHgsIGFyZ3ZbMF0sIGlkeCk7CiAgICAgIGpzX2FycmF5X3RvKGN0eCwgYXJndlsxXSwgZmFjZXRMaXN0KTsKICAgICAganNfYXJyYXlfdG8oY3R4LCBhcmd2WzJdLCBmYWNldENlbnRlcnMpOwogICAgICBzLT5nZXRWb3Jvbm9pRmFjZXRMaXN0KGlkeCwgZmFjZXRMaXN0LCBmYWNldENlbnRlcnMpOwogICAgICBicmVhazsKICAgIH0KICAgIC8vIHZvaWQgU3ViZGl2MkQ6OmluaXREZWxhdW5heShSZWN0IHJlY3QpCiAgICBjYXNlIDk6IHsKICAgICAgSlNSZWN0RGF0YTxpbnQ+IHJlY3Q7CiAgICAgIGpzX3JlY3RfcmVhZChjdHgsIGFyZ3ZbMF0sICZyZWN0KTsKICAgICAgcy0+aW5pdERlbGF1bmF5KHJlY3QpOwogICAgICBicmVhazsKICAgIH0KICAgICAgLy8gaW50IFN1YmRpdjJEOjppbnNlcnQoUG9pbnQyZiBwdCkKICAgICAgLy8gdm9pZCBTdWJkaXYyRDo6aW5zZXJ0KGNvbnN0IHN0ZDo6dmVjdG9yPFBvaW50MmY+ICZwdHZlYykKICAgIGNhc2UgMTA6IHsKICAgICAgSlNQb2ludERhdGE8ZmxvYXQ+IHB0OwogICAgICBpZighanNfcG9pbnRfcmVhZChjdHgsIGFyZ3ZbMF0sICZwdCkpIHsKICAgICAgICBzdGQ6OnZlY3RvcjxKU1BvaW50RGF0YTxmbG9hdD4+IHB0dmVjOwogICAgICAgIGpzX2FycmF5X3RvKGN0eCwgYXJndlswXSwgcHR2ZWMpOwogICAgICAgIHMtPmluc2VydChwdHZlYyk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcy0+aW5zZXJ0KHB0KTsKICAgICAgfQogICAgICBicmVhazsKICAgIH0KCiAgICAvLyBpbnQgU3ViZGl2MkQ6OmxvY2F0ZShQb2ludDJmIHB0LCBpbnQgJmVkZ2UsIGludCAmdmVydGV4KQogICAgY2FzZSAxMTogewogICAgICBKU1BvaW50RGF0YTxmbG9hdD4gcHQ7CiAgICAgIGpzX3BvaW50X3JlYWQoY3R4LCBhcmd2WzBdLCAmcHQpOwogICAgICBpbnQzMl90IGVkZ2UgPSAwLCB2ZXJ0ZXggPSAwOwogICAgICByZXQgPSBKU19OZXdJbnQzMihjdHgsIHMtPmxvY2F0ZShwdCwgZWRnZSwgdmVydGV4KSk7CiAgICAgIGlmKGFyZ2MgPiAxKSB7CiAgICAgICAgSlNWYWx1ZSB2YWwgPSBKU19OZXdJbnQzMihjdHgsIGVkZ2UpOwogICAgICAgIGpzX3JlZihjdHgsICJlZGdlIiwgYXJndlsxXSwgdmFsKTsKICAgICAgICBKU19GcmVlVmFsdWUoY3R4LCB2YWwpOwogICAgICB9CiAgICAgIGlmKGFyZ2MgPiAyKSB7CiAgICAgICAgSlNWYWx1ZSB2YWwgPSBKU19OZXdJbnQzMihjdHgsIHZlcnRleCk7CiAgICAgICAganNfcmVmKGN0eCwgInZlcnRleCIsIGFyZ3ZbMV0sIHZhbCk7CiAgICAgICAgSlNfRnJlZVZhbHVlKGN0eCwgdmFsKTsKICAgICAgfQogICAgICBicmVhazsKICAgIH0KICAgIC8vIGludCBTdWJkaXYyRDo6bmV4dEVkZ2UoaW50IGVkZ2UpIGNvbnN0CiAgICBjYXNlIDEyOiB7CiAgICAgIGludDMyX3QgZWRnZTsKICAgICAgSlNfVG9JbnQzMihjdHgsICZlZGdlLCBhcmd2WzBdKTsKICAgICAgcmV0ID0gSlNfTmV3SW50MzIoY3R4LCBzLT5uZXh0RWRnZShlZGdlKSk7CiAgICAgIGJyZWFrOwogICAgfQogICAgLy8gaW50IFN1YmRpdjJEOjpyb3RhdGVFZGdlKGludCBlZGdlLCBpbnQgcm90YXRlKSBjb25zdAogICAgY2FzZSAxMzogewogICAgICBpbnQzMl90IGVkZ2UsIHJvdGF0ZTsKICAgICAgSlNfVG9JbnQzMihjdHgsICZlZGdlLCBhcmd2WzBdKTsKICAgICAgSlNfVG9JbnQzMihjdHgsICZyb3RhdGUsIGFyZ3ZbMV0pOwogICAgICByZXQgPSBKU19OZXdJbnQzMihjdHgsIHMtPnJvdGF0ZUVkZ2UoZWRnZSwgcm90YXRlKSk7CiAgICAgIGJyZWFrOwogICAgfQogICAgLy8gaW50IFN1YmRpdjJEOjpzeW1FZGdlKGludCBlZGdlKSBjb25zdAogICAgY2FzZSAxNDogewogICAgICBpbnQzMl90IGVkZ2U7CiAgICAgIEpTX1RvSW50MzIoY3R4LCAmZWRnZSwgYXJndlswXSk7CiAgICAgIHJldCA9IEpTX05ld0ludDMyKGN0eCwgcy0+c3ltRWRnZShlZGdlKSk7CiAgICAgIGJyZWFrOwogICAgfQogIH0KICByZXR1cm4gcmV0Owp9CgpKU0NsYXNzRGVmIGpzX3N1YmRpdjJkX2NsYXNzID0gewogICAgLmNsYXNzX25hbWUgPSAiU3ViZGl2MkQiLAogICAgLmZpbmFsaXplciA9IGpzX3N1YmRpdjJkX2ZpbmFsaXplciwKfTsKCmNvbnN0IEpTQ0Z1bmN0aW9uTGlzdEVudHJ5IGpzX3N1YmRpdjJkX3Byb3RvX2Z1bmNzW10gPSB7SlNfQ0ZVTkNfTUFHSUNfREVGKCJlZGdlRHN0IiwgMSwganNfc3ViZGl2MmRfbWV0aG9kLCAwKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBKU19DRlVOQ19NQUdJQ19ERUYoImVkZ2VPcmciLCAxLCBqc19zdWJkaXYyZF9tZXRob2QsIDEpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEpTX0NGVU5DX01BR0lDX0RFRigiZmluZE5lYXJlc3QiLCAxLCBqc19zdWJkaXYyZF9tZXRob2QsIDIpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEpTX0NGVU5DX01BR0lDX0RFRigiZ2V0RWRnZSIsIDIsIGpzX3N1YmRpdjJkX21ldGhvZCwgMyksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJnZXRFZGdlTGlzdCIsIDEsIGpzX3N1YmRpdjJkX21ldGhvZCwgNCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJnZXRMZWFkaW5nRWRnZUxpc3QiLCAxLCBqc19zdWJkaXYyZF9tZXRob2QsIDUpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEpTX0NGVU5DX01BR0lDX0RFRigiZ2V0VHJpYW5nbGVMaXN0IiwgMSwganNfc3ViZGl2MmRfbWV0aG9kLCA2KSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBKU19DRlVOQ19NQUdJQ19ERUYoImdldFZlcnRleCIsIDEsIGpzX3N1YmRpdjJkX21ldGhvZCwgNyksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJnZXRWb3Jvbm9pRmFjZXRMaXN0IiwgMywganNfc3ViZGl2MmRfbWV0aG9kLCA4KSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBKU19DRlVOQ19NQUdJQ19ERUYoImluaXREZWxhdW5heSIsIDEsIGpzX3N1YmRpdjJkX21ldGhvZCwgOSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJpbnNlcnQiLCAxLCBqc19zdWJkaXYyZF9tZXRob2QsIDEwKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBKU19DRlVOQ19NQUdJQ19ERUYoImxvY2F0ZSIsIDMsIGpzX3N1YmRpdjJkX21ldGhvZCwgMTEpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEpTX0NGVU5DX01BR0lDX0RFRigibmV4dEVkZ2UiLCAxLCBqc19zdWJkaXYyZF9tZXRob2QsIDEyKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBKU19DRlVOQ19NQUdJQ19ERUYoInJvdGF0ZUVkZ2UiLCAyLCBqc19zdWJkaXYyZF9tZXRob2QsIDEzKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBKU19DRlVOQ19NQUdJQ19ERUYoInN5bUVkZ2UiLCAxLCBqc19zdWJkaXYyZF9tZXRob2QsIDE0KSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBKU19QUk9QX1NUUklOR19ERUYoIltTeW1ib2wudG9TdHJpbmdUYWddIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIlN1YmRpdjJEIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSlNfUFJPUF9DT05GSUdVUkFCTEUpfTsKCmNvbnN0IEpTQ0Z1bmN0aW9uTGlzdEVudHJ5IGpzX3N1YmRpdjJkX3N0YXRpY19mdW5jc1tdID0gewogICAgSlNfUFJPUF9JTlQzMl9ERUYoIlBUTE9DX0VSUk9SIiwgY3Y6OlN1YmRpdjJEOjpQVExPQ19FUlJPUiwgMCksCiAgICBKU19QUk9QX0lOVDMyX0RFRigiUFRMT0NfT1VUU0lERV9SRUNUIiwgY3Y6OlN1YmRpdjJEOjpQVExPQ19PVVRTSURFX1JFQ1QsIDApLAogICAgSlNfUFJPUF9JTlQzMl9ERUYoIlBUTE9DX0lOU0lERSIsIGN2OjpTdWJkaXYyRDo6UFRMT0NfSU5TSURFLCAwKSwKICAgIEpTX1BST1BfSU5UMzJfREVGKCJQVExPQ19WRVJURVgiLCBjdjo6U3ViZGl2MkQ6OlBUTE9DX1ZFUlRFWCwgMCksCgogICAgSlNfUFJPUF9JTlQzMl9ERUYoIk5FWFRfQVJPVU5EX09SRyIsIGN2OjpTdWJkaXYyRDo6TkVYVF9BUk9VTkRfT1JHLCAwKSwKICAgIEpTX1BST1BfSU5UMzJfREVGKCJORVhUX0FST1VORF9EU1QiLCBjdjo6U3ViZGl2MkQ6Ok5FWFRfQVJPVU5EX0RTVCwgMCksCiAgICBKU19QUk9QX0lOVDMyX0RFRigiUFJFVl9BUk9VTkRfT1JHIiwgY3Y6OlN1YmRpdjJEOjpQUkVWX0FST1VORF9PUkcsIDApLAogICAgSlNfUFJPUF9JTlQzMl9ERUYoIlBSRVZfQVJPVU5EX0RTVCIsIGN2OjpTdWJkaXYyRDo6UFJFVl9BUk9VTkRfRFNULCAwKSwKICAgIEpTX1BST1BfSU5UMzJfREVGKCJORVhUX0FST1VORF9MRUZUIiwgY3Y6OlN1YmRpdjJEOjpORVhUX0FST1VORF9MRUZULCAwKSwKICAgIEpTX1BST1BfSU5UMzJfREVGKCJORVhUX0FST1VORF9SSUdIVCIsIGN2OjpTdWJkaXYyRDo6TkVYVF9BUk9VTkRfUklHSFQsIDApLAogICAgSlNfUFJPUF9JTlQzMl9ERUYoIlBSRVZfQVJPVU5EX0xFRlQiLCBjdjo6U3ViZGl2MkQ6OlBSRVZfQVJPVU5EX0xFRlQsIDApfTsKCmV4dGVybiAiQyIgaW50CmpzX3N1YmRpdjJkX2luaXQoSlNDb250ZXh0KiBjdHgsIEpTTW9kdWxlRGVmKiBtKSB7CgogIGlmKGpzX3N1YmRpdjJkX2NsYXNzX2lkID09IDApIHsKICAgIC8qIGNyZWF0ZSB0aGUgU3ViZGl2MkQgY2xhc3MgKi8KICAgIEpTX05ld0NsYXNzSUQoJmpzX3N1YmRpdjJkX2NsYXNzX2lkKTsKICAgIEpTX05ld0NsYXNzKEpTX0dldFJ1bnRpbWUoY3R4KSwganNfc3ViZGl2MmRfY2xhc3NfaWQsICZqc19zdWJkaXYyZF9jbGFzcyk7CgogICAgc3ViZGl2MmRfcHJvdG8gPSBKU19OZXdPYmplY3QoY3R4KTsKICAgIEpTX1NldFByb3BlcnR5RnVuY3Rpb25MaXN0KGN0eCwgc3ViZGl2MmRfcHJvdG8sIGpzX3N1YmRpdjJkX3Byb3RvX2Z1bmNzLCBjb3VudG9mKGpzX3N1YmRpdjJkX3Byb3RvX2Z1bmNzKSk7CiAgICBKU19TZXRDbGFzc1Byb3RvKGN0eCwganNfc3ViZGl2MmRfY2xhc3NfaWQsIHN1YmRpdjJkX3Byb3RvKTsKCiAgICBzdWJkaXYyZF9jbGFzcyA9IEpTX05ld0NGdW5jdGlvbjIoY3R4LCBqc19zdWJkaXYyZF9jdG9yLCAiU3ViZGl2MkQiLCAyLCBKU19DRlVOQ19jb25zdHJ1Y3RvciwgMCk7CiAgICAvKiBzZXQgcHJvdG8uY29uc3RydWN0b3IgYW5kIGN0b3IucHJvdG90eXBlICovCiAgICBKU19TZXRDb25zdHJ1Y3RvcihjdHgsIHN1YmRpdjJkX2NsYXNzLCBzdWJkaXYyZF9wcm90byk7CiAgICBKU19TZXRQcm9wZXJ0eUZ1bmN0aW9uTGlzdChjdHgsIHN1YmRpdjJkX2NsYXNzLCBqc19zdWJkaXYyZF9zdGF0aWNfZnVuY3MsIGNvdW50b2YoanNfc3ViZGl2MmRfc3RhdGljX2Z1bmNzKSk7CiAgfQoKICBpZihtKQogICAgSlNfU2V0TW9kdWxlRXhwb3J0KGN0eCwgbSwgIlN1YmRpdjJEIiwgc3ViZGl2MmRfY2xhc3MpOwoKICByZXR1cm4gMDsKfQoKdm9pZApqc19zdWJkaXYyZF9jb25zdHJ1Y3RvcihKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZSBwYXJlbnQsIGNvbnN0IGNoYXIqIG5hbWUpIHsKICBpZihKU19Jc1VuZGVmaW5lZChzdWJkaXYyZF9jbGFzcykpCiAgICBqc19zdWJkaXYyZF9pbml0KGN0eCwgMCk7CgogIEpTX1NldFByb3BlcnR5U3RyKGN0eCwgcGFyZW50LCBuYW1lID8gbmFtZSA6ICJTdWJkaXYyRCIsIHN1YmRpdjJkX2NsYXNzKTsKfQoKI2lmIGRlZmluZWQoSlNfU1VCRElWMkRfTU9EVUxFKQojZGVmaW5lIEpTX0lOSVRfTU9EVUxFIC8qVklTSUJMRSovIGpzX2luaXRfbW9kdWxlCiNlbHNlCiNkZWZpbmUgSlNfSU5JVF9NT0RVTEUgLypWSVNJQkxFKi8ganNfaW5pdF9tb2R1bGVfc3ViZGl2MmQKI2VuZGlmCgpleHRlcm4gIkMiIEpTTW9kdWxlRGVmKgpKU19JTklUX01PRFVMRShKU0NvbnRleHQqIGN0eCwgY29uc3QgY2hhciogbW9kdWxlX25hbWUpIHsKICBKU01vZHVsZURlZiogbTsKICBtID0gSlNfTmV3Q01vZHVsZShjdHgsIG1vZHVsZV9uYW1lLCAmanNfc3ViZGl2MmRfaW5pdCk7CiAgaWYoIW0pCiAgICByZXR1cm4gTlVMTDsKICBKU19BZGRNb2R1bGVFeHBvcnQoY3R4LCBtLCAiU3ViZGl2MkQiKTsKICByZXR1cm4gbTsKfQoAAAAAAAAAAGAqAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAmgAAAAAAAACaAAAAAAAAAAAAAAAAAPC/"
				],
				[
					9,
					1,
					"cut",
					null,
					"AQAAABAqAAAAAAAAECoAAAAAAABQAAAACmV4dGVybiAiQyIgVklTSUJMRSB2b2lkIGpzX3N1YmRpdjJkX2V4cG9ydChKU0NvbnRleHQqIGN0eCwgSlNNb2R1bGVEZWYqIG0pIHsKfQo",
					"AQAAAAAAAAABAAAAECoAAAAAAABgKgAAAAAAAAAAAAAAAPC/"
				],
				[
					14,
					1,
					"paste",
					null,
					"AQAAAKEnAAAAAAAA8ScAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAoScAAAAAAAChJwAAAAAAAAAAAAAAAPC/"
				],
				[
					22,
					1,
					"cut",
					null,
					"AQAAACkqAAAAAAAAKSoAAAAAAAAqAAAAICBKU19BZGRNb2R1bGVFeHBvcnQoY3R4LCBtLCAiU3ViZGl2MkQiKTsK",
					"AQAAAAAAAAABAAAAKSoAAAAAAABTKgAAAAAAAAAAAAAAAPC/"
				],
				[
					25,
					1,
					"paste",
					null,
					"AQAAAO8nAAAAAAAAGSgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA7ycAAAAAAADvJwAAAAAAAAAAAAAAAPC/"
				],
				[
					32,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"BAAAAFIqAAAAAAAAUyoAAAAAAAAAAAAAUyoAAAAAAABXKgAAAAAAAAAAAABTKgAAAAAAAFMqAAAAAAAABAAAACAgICBTKgAAAAAAAFUqAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAUioAAAAAAABSKgAAAAAAAAAAAAAAAPC/"
				],
				[
					33,
					1,
					"paste",
					null,
					"AQAAAFUqAAAAAAAAZyoAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAVSoAAAAAAABVKgAAAAAAAAAAAAAAAPC/"
				],
				[
					34,
					1,
					"insert_snippet",
					{
						"contents": "($0)"
					},
					"AQAAAGcqAAAAAAAAaSoAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAZyoAAAAAAABnKgAAAAAAAAAAAAAAAPC/"
				],
				[
					35,
					1,
					"insert",
					{
						"characters": "ctx,m"
					},
					"BQAAAGgqAAAAAAAAaSoAAAAAAAAAAAAAaSoAAAAAAABqKgAAAAAAAAAAAABqKgAAAAAAAGsqAAAAAAAAAAAAAGsqAAAAAAAAbCoAAAAAAAAAAAAAbCoAAAAAAABtKgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAaCoAAAAAAABoKgAAAAAAAAAAAAAAAPC/"
				],
				[
					37,
					1,
					"insert",
					{
						"characters": ";"
					},
					"AQAAAG4qAAAAAAAAbyoAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAbioAAAAAAABuKgAAAAAAAAAAAAAAAPC/"
				],
				[
					38,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAAB9KgAAI2luY2x1ZGUgImpzYmluZGluZ3MuaHBwIgojaW5jbHVkZSAianNfcmVjdC5ocHAiCiNpbmNsdWRlICJqc19wb2ludC5ocHAiCiNpbmNsdWRlICJqc19hbGxvYy5ocHAiCiNpbmNsdWRlICJqc19hcnJheS5ocHAiCgojaW5jbHVkZSA8b3BlbmN2Mi9pbWdwcm9jLmhwcD4KCmV4dGVybiAiQyIgVklTSUJMRSBpbnQganNfc3ViZGl2MmRfaW5pdChKU0NvbnRleHQqLCBKU01vZHVsZURlZiopOwoKZXh0ZXJuICJDIiB7CkpTVmFsdWUgc3ViZGl2MmRfcHJvdG8gPSBKU19VTkRFRklORUQsIHN1YmRpdjJkX2NsYXNzID0gSlNfVU5ERUZJTkVEOwpKU0NsYXNzSUQganNfc3ViZGl2MmRfY2xhc3NfaWQgPSAwOwp9CgpKU1ZhbHVlCmpzX3N1YmRpdjJkX25ldyhKU0NvbnRleHQqIGN0eCwgSlNSZWN0RGF0YTxpbnQ+KiByZWN0ID0gbnVsbHB0cikgewogIEpTVmFsdWUgcmV0OwogIGN2OjpTdWJkaXYyRCogczsKICByZXQgPSBKU19OZXdPYmplY3RQcm90b0NsYXNzKGN0eCwgc3ViZGl2MmRfcHJvdG8sIGpzX3N1YmRpdjJkX2NsYXNzX2lkKTsKICBzID0ganNfYWxsb2NhdGU8Y3Y6OlN1YmRpdjJEPihjdHgpOwoKICBpZihyZWN0KQogICAgbmV3KHMpIGN2OjpTdWJkaXYyRCgqcmVjdCk7CiAgZWxzZQogICAgbmV3KHMpIGN2OjpTdWJkaXYyRCgpOwoKICBKU19TZXRPcGFxdWUocmV0LCBzKTsKCiAgcmV0dXJuIHJldDsKfQoKc3RhdGljIEpTVmFsdWUKanNfc3ViZGl2MmRfY3RvcihKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IG5ld190YXJnZXQsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QqIGFyZ3YpIHsKICBKU1JlY3REYXRhPGludD4gcmVjdDsKCiAgaWYoYXJnYyA+IDApCiAgICBpZighanNfcmVjdF9yZWFkKGN0eCwgYXJndlswXSwgJnJlY3QpKQogICAgICByZXR1cm4gSlNfRVhDRVBUSU9OOwoKICByZXR1cm4ganNfc3ViZGl2MmRfbmV3KGN0eCwgYXJnYyA+IDAgPyAmcmVjdCA6IG51bGxwdHIpOwp9Cgpjdjo6U3ViZGl2MkQqCmpzX3N1YmRpdjJkX2RhdGEoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB2YWwpIHsKICByZXR1cm4gc3RhdGljX2Nhc3Q8Y3Y6OlN1YmRpdjJEKj4oSlNfR2V0T3BhcXVlMihjdHgsIHZhbCwganNfc3ViZGl2MmRfY2xhc3NfaWQpKTsKfQoKdm9pZApqc19zdWJkaXYyZF9maW5hbGl6ZXIoSlNSdW50aW1lKiBydCwgSlNWYWx1ZSB2YWwpIHsKICBjdjo6U3ViZGl2MkQqIHMgPSBzdGF0aWNfY2FzdDxjdjo6U3ViZGl2MkQqPihKU19HZXRPcGFxdWUodmFsLCBqc19zdWJkaXYyZF9jbGFzc19pZCkpOwoKICBzLT5+U3ViZGl2MkQoKTsKICBqc19kZWFsbG9jYXRlKHJ0LCBzKTsKfQoKc3RhdGljIEpTVmFsdWUKanNfc3ViZGl2MmRfbWV0aG9kKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QqIGFyZ3YsIGludCBtYWdpYykgewogIGN2OjpTdWJkaXYyRCogczsKICBKU1ZhbHVlIHJldCA9IEpTX1VOREVGSU5FRDsKCiAgaWYoKHMgPSBqc19zdWJkaXYyZF9kYXRhKGN0eCwgdGhpc192YWwpKSA9PSBudWxscHRyKQogICAgcmV0dXJuIEpTX0VYQ0VQVElPTjsKCiAgc3dpdGNoKG1hZ2ljKSB7CiAgICAvLyBpbnQgU3ViZGl2MkQ6OmVkZ2VEc3QoaW50IGVkZ2UsIFBvaW50MmYgKmRzdHB0ID0gMCkgY29uc3QKICAgIGNhc2UgMDogewogICAgICBpbnQzMl90IGVkZ2U7CiAgICAgIEpTUG9pbnREYXRhPGZsb2F0PiBkc3RwdDsKICAgICAgSlNfVG9JbnQzMihjdHgsICZlZGdlLCBhcmd2WzBdKTsKICAgICAgaWYoYXJnYyA+IDEpCiAgICAgICAganNfcG9pbnRfcmVhZChjdHgsIGFyZ3ZbMV0sICZkc3RwdCk7CiAgICAgIHJldCA9IEpTX05ld0ludDMyKGN0eCwgcy0+ZWRnZURzdChlZGdlLCBhcmdjID4gMSA/ICZkc3RwdCA6IG51bGxwdHIpKTsKICAgICAgYnJlYWs7CiAgICB9CiAgICAvLyBpbnQgU3ViZGl2MkQ6OmVkZ2VPcmcoaW50IGVkZ2UsIFBvaW50MmYgKm9yZ3B0ID0gMCkgY29uc3QKICAgIGNhc2UgMTogewogICAgICBpbnQzMl90IGVkZ2U7CiAgICAgIEpTUG9pbnREYXRhPGZsb2F0PiBvcmdwdDsKICAgICAgaWYoYXJnYyA+IDEpCiAgICAgICAganNfcG9pbnRfcmVhZChjdHgsIGFyZ3ZbMV0sICZvcmdwdCk7CiAgICAgIHJldCA9IEpTX05ld0ludDMyKGN0eCwgcy0+ZWRnZU9yZyhlZGdlLCBhcmdjID4gMSA/ICZvcmdwdCA6IG51bGxwdHIpKTsKICAgICAgYnJlYWs7CiAgICB9CiAgICAvLyBpbnQgU3ViZGl2MkQ6OmZpbmROZWFyZXN0KFBvaW50MmYgcHQsIFBvaW50MmYgKm5lYXJlc3RQdCA9IDApCiAgICBjYXNlIDI6IHsKICAgICAgSlNQb2ludERhdGE8ZmxvYXQ+IHB0LCBuZWFyZXN0UHQ7CiAgICAgIGpzX3BvaW50X3JlYWQoY3R4LCBhcmd2WzBdLCAmcHQpOwogICAgICBpZihhcmdjID4gMSkKICAgICAgICBqc19wb2ludF9yZWFkKGN0eCwgYXJndlsxXSwgJm5lYXJlc3RQdCk7CiAgICAgIHJldCA9IEpTX05ld0ludDMyKGN0eCwgcy0+ZmluZE5lYXJlc3QocHQsIGFyZ2MgPiAxID8gJm5lYXJlc3RQdCA6IG51bGxwdHIpKTsKICAgICAgYnJlYWs7CiAgICB9CiAgICAvLyBpbnQgU3ViZGl2MkQ6OmdldEVkZ2UoaW50IGVkZ2UsIGludCBuZXh0RWRnZVR5cGUpIGNvbnN0CiAgICBjYXNlIDM6IHsKICAgICAgaW50MzJfdCBlZGdlLCBuZXh0RWRnZVR5cGU7CiAgICAgIEpTX1RvSW50MzIoY3R4LCAmZWRnZSwgYXJndlswXSk7CiAgICAgIEpTX1RvSW50MzIoY3R4LCAmbmV4dEVkZ2VUeXBlLCBhcmd2WzFdKTsKICAgICAgcmV0ID0gSlNfTmV3SW50MzIoY3R4LCBzLT5nZXRFZGdlKGVkZ2UsIG5leHRFZGdlVHlwZSkpOwogICAgICBicmVhazsKICAgIH0KICAgIC8vIHZvaWQgU3ViZGl2MkQ6OmdldEVkZ2VMaXN0KHN0ZDo6dmVjdG9yPFZlYzRmPiAmZWRnZUxpc3QpIGNvbnN0CiAgICBjYXNlIDQ6IHsKICAgICAgc3RkOjp2ZWN0b3I8Y3Y6OlZlYzRmPiBlZGdlTGlzdDsKICAgICAganNfYXJyYXlfdG8oY3R4LCBhcmd2WzBdLCBlZGdlTGlzdCk7CiAgICAgIHMtPmdldEVkZ2VMaXN0KGVkZ2VMaXN0KTsKICAgICAgYnJlYWs7CiAgICB9CiAgICAvLyB2b2lkIFN1YmRpdjJEOjpnZXRMZWFkaW5nRWRnZUxpc3Qoc3RkOjp2ZWN0b3I8aW50PiAmbGVhZGluZ0VkZ2VMaXN0KSBjb25zdAogICAgY2FzZSA1OiB7CiAgICAgIHN0ZDo6dmVjdG9yPGludD4gbGVhZGluZ0VkZ2VMaXN0OwogICAgICBqc19hcnJheV90byhjdHgsIGFyZ3ZbMF0sIGxlYWRpbmdFZGdlTGlzdCk7CiAgICAgIHMtPmdldExlYWRpbmdFZGdlTGlzdChsZWFkaW5nRWRnZUxpc3QpOwogICAgICBicmVhazsKICAgIH0KICAgIC8vIHZvaWQgU3ViZGl2MkQ6OmdldFRyaWFuZ2xlTGlzdChzdGQ6OnZlY3RvcjxWZWM2Zj4gJnRyaWFuZ2xlTGlzdCkgY29uc3QKICAgIGNhc2UgNjogewogICAgICBzdGQ6OnZlY3Rvcjxjdjo6VmVjNmY+IHRyaWFuZ2xlTGlzdDsKICAgICAganNfYXJyYXlfdG8oY3R4LCBhcmd2WzBdLCB0cmlhbmdsZUxpc3QpOwogICAgICBzLT5nZXRUcmlhbmdsZUxpc3QodHJpYW5nbGVMaXN0KTsKICAgICAgYnJlYWs7CiAgICAgIGJyZWFrOwogICAgfQogICAgLy8gUG9pbnQyZiBTdWJkaXYyRDo6Z2V0VmVydGV4KGludCB2ZXJ0ZXgsIGludCAqZmlyc3RFZGdlID0gMCkgY29uc3QKICAgIGNhc2UgNzogewogICAgICBpbnQzMl90IHZlcnRleCwgZmlyc3RFZGdlID0gMDsKICAgICAgSlNfVG9JbnQzMihjdHgsICZ2ZXJ0ZXgsIGFyZ3ZbMF0pOwoKICAgICAgcmV0ID0ganNfcG9pbnRfd3JhcChjdHgsIHMtPmdldFZlcnRleCh2ZXJ0ZXgsICZmaXJzdEVkZ2UpKTsKCiAgICAgIGlmKGFyZ2MgPiAxKSB7CiAgICAgICAgSlNWYWx1ZSB2YWwgPSBKU19OZXdJbnQzMihjdHgsIGZpcnN0RWRnZSk7CiAgICAgICAganNfcmVmKGN0eCwgImZpcnN0RWRnZSIsIGFyZ3ZbMV0sIHZhbCk7CiAgICAgICAgSlNfRnJlZVZhbHVlKGN0eCwgdmFsKTsKICAgICAgfQogICAgICBicmVhazsKICAgIH0KICAgIC8vIHZvaWQgU3ViZGl2MkQ6OmdldFZvcm9ub2lGYWNldExpc3QoY29uc3Qgc3RkOjp2ZWN0b3I8aW50PiAmaWR4LAogICAgLy8gc3RkOjp2ZWN0b3I8c3RkOjp2ZWN0b3I8UG9pbnQyZj4+ICZmYWNldExpc3QsIHN0ZDo6dmVjdG9yPFBvaW50MmY+ICZmYWNldENlbnRlcnMpCiAgICBjYXNlIDg6IHsKICAgICAgc3RkOjp2ZWN0b3I8aW50PiBpZHg7CiAgICAgIEpTQ29udG91cnNEYXRhPGZsb2F0PiBmYWNldExpc3Q7CiAgICAgIHN0ZDo6dmVjdG9yPEpTUG9pbnREYXRhPGZsb2F0Pj4gZmFjZXRDZW50ZXJzOwogICAgICBqc19hcnJheV90byhjdHgsIGFyZ3ZbMF0sIGlkeCk7CiAgICAgIGpzX2FycmF5X3RvKGN0eCwgYXJndlsxXSwgZmFjZXRMaXN0KTsKICAgICAganNfYXJyYXlfdG8oY3R4LCBhcmd2WzJdLCBmYWNldENlbnRlcnMpOwogICAgICBzLT5nZXRWb3Jvbm9pRmFjZXRMaXN0KGlkeCwgZmFjZXRMaXN0LCBmYWNldENlbnRlcnMpOwogICAgICBicmVhazsKICAgIH0KICAgIC8vIHZvaWQgU3ViZGl2MkQ6OmluaXREZWxhdW5heShSZWN0IHJlY3QpCiAgICBjYXNlIDk6IHsKICAgICAgSlNSZWN0RGF0YTxpbnQ+IHJlY3Q7CiAgICAgIGpzX3JlY3RfcmVhZChjdHgsIGFyZ3ZbMF0sICZyZWN0KTsKICAgICAgcy0+aW5pdERlbGF1bmF5KHJlY3QpOwogICAgICBicmVhazsKICAgIH0KICAgICAgLy8gaW50IFN1YmRpdjJEOjppbnNlcnQoUG9pbnQyZiBwdCkKICAgICAgLy8gdm9pZCBTdWJkaXYyRDo6aW5zZXJ0KGNvbnN0IHN0ZDo6dmVjdG9yPFBvaW50MmY+ICZwdHZlYykKICAgIGNhc2UgMTA6IHsKICAgICAgSlNQb2ludERhdGE8ZmxvYXQ+IHB0OwogICAgICBpZighanNfcG9pbnRfcmVhZChjdHgsIGFyZ3ZbMF0sICZwdCkpIHsKICAgICAgICBzdGQ6OnZlY3RvcjxKU1BvaW50RGF0YTxmbG9hdD4+IHB0dmVjOwogICAgICAgIGpzX2FycmF5X3RvKGN0eCwgYXJndlswXSwgcHR2ZWMpOwogICAgICAgIHMtPmluc2VydChwdHZlYyk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcy0+aW5zZXJ0KHB0KTsKICAgICAgfQogICAgICBicmVhazsKICAgIH0KCiAgICAvLyBpbnQgU3ViZGl2MkQ6OmxvY2F0ZShQb2ludDJmIHB0LCBpbnQgJmVkZ2UsIGludCAmdmVydGV4KQogICAgY2FzZSAxMTogewogICAgICBKU1BvaW50RGF0YTxmbG9hdD4gcHQ7CiAgICAgIGpzX3BvaW50X3JlYWQoY3R4LCBhcmd2WzBdLCAmcHQpOwogICAgICBpbnQzMl90IGVkZ2UgPSAwLCB2ZXJ0ZXggPSAwOwogICAgICByZXQgPSBKU19OZXdJbnQzMihjdHgsIHMtPmxvY2F0ZShwdCwgZWRnZSwgdmVydGV4KSk7CiAgICAgIGlmKGFyZ2MgPiAxKSB7CiAgICAgICAgSlNWYWx1ZSB2YWwgPSBKU19OZXdJbnQzMihjdHgsIGVkZ2UpOwogICAgICAgIGpzX3JlZihjdHgsICJlZGdlIiwgYXJndlsxXSwgdmFsKTsKICAgICAgICBKU19GcmVlVmFsdWUoY3R4LCB2YWwpOwogICAgICB9CiAgICAgIGlmKGFyZ2MgPiAyKSB7CiAgICAgICAgSlNWYWx1ZSB2YWwgPSBKU19OZXdJbnQzMihjdHgsIHZlcnRleCk7CiAgICAgICAganNfcmVmKGN0eCwgInZlcnRleCIsIGFyZ3ZbMV0sIHZhbCk7CiAgICAgICAgSlNfRnJlZVZhbHVlKGN0eCwgdmFsKTsKICAgICAgfQogICAgICBicmVhazsKICAgIH0KICAgIC8vIGludCBTdWJkaXYyRDo6bmV4dEVkZ2UoaW50IGVkZ2UpIGNvbnN0CiAgICBjYXNlIDEyOiB7CiAgICAgIGludDMyX3QgZWRnZTsKICAgICAgSlNfVG9JbnQzMihjdHgsICZlZGdlLCBhcmd2WzBdKTsKICAgICAgcmV0ID0gSlNfTmV3SW50MzIoY3R4LCBzLT5uZXh0RWRnZShlZGdlKSk7CiAgICAgIGJyZWFrOwogICAgfQogICAgLy8gaW50IFN1YmRpdjJEOjpyb3RhdGVFZGdlKGludCBlZGdlLCBpbnQgcm90YXRlKSBjb25zdAogICAgY2FzZSAxMzogewogICAgICBpbnQzMl90IGVkZ2UsIHJvdGF0ZTsKICAgICAgSlNfVG9JbnQzMihjdHgsICZlZGdlLCBhcmd2WzBdKTsKICAgICAgSlNfVG9JbnQzMihjdHgsICZyb3RhdGUsIGFyZ3ZbMV0pOwogICAgICByZXQgPSBKU19OZXdJbnQzMihjdHgsIHMtPnJvdGF0ZUVkZ2UoZWRnZSwgcm90YXRlKSk7CiAgICAgIGJyZWFrOwogICAgfQogICAgLy8gaW50IFN1YmRpdjJEOjpzeW1FZGdlKGludCBlZGdlKSBjb25zdAogICAgY2FzZSAxNDogewogICAgICBpbnQzMl90IGVkZ2U7CiAgICAgIEpTX1RvSW50MzIoY3R4LCAmZWRnZSwgYXJndlswXSk7CiAgICAgIHJldCA9IEpTX05ld0ludDMyKGN0eCwgcy0+c3ltRWRnZShlZGdlKSk7CiAgICAgIGJyZWFrOwogICAgfQogIH0KICByZXR1cm4gcmV0Owp9CgpKU0NsYXNzRGVmIGpzX3N1YmRpdjJkX2NsYXNzID0gewogICAgLmNsYXNzX25hbWUgPSAiU3ViZGl2MkQiLAogICAgLmZpbmFsaXplciA9IGpzX3N1YmRpdjJkX2ZpbmFsaXplciwKfTsKCmNvbnN0IEpTQ0Z1bmN0aW9uTGlzdEVudHJ5IGpzX3N1YmRpdjJkX3Byb3RvX2Z1bmNzW10gPSB7SlNfQ0ZVTkNfTUFHSUNfREVGKCJlZGdlRHN0IiwgMSwganNfc3ViZGl2MmRfbWV0aG9kLCAwKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBKU19DRlVOQ19NQUdJQ19ERUYoImVkZ2VPcmciLCAxLCBqc19zdWJkaXYyZF9tZXRob2QsIDEpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEpTX0NGVU5DX01BR0lDX0RFRigiZmluZE5lYXJlc3QiLCAxLCBqc19zdWJkaXYyZF9tZXRob2QsIDIpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEpTX0NGVU5DX01BR0lDX0RFRigiZ2V0RWRnZSIsIDIsIGpzX3N1YmRpdjJkX21ldGhvZCwgMyksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJnZXRFZGdlTGlzdCIsIDEsIGpzX3N1YmRpdjJkX21ldGhvZCwgNCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJnZXRMZWFkaW5nRWRnZUxpc3QiLCAxLCBqc19zdWJkaXYyZF9tZXRob2QsIDUpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEpTX0NGVU5DX01BR0lDX0RFRigiZ2V0VHJpYW5nbGVMaXN0IiwgMSwganNfc3ViZGl2MmRfbWV0aG9kLCA2KSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBKU19DRlVOQ19NQUdJQ19ERUYoImdldFZlcnRleCIsIDEsIGpzX3N1YmRpdjJkX21ldGhvZCwgNyksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJnZXRWb3Jvbm9pRmFjZXRMaXN0IiwgMywganNfc3ViZGl2MmRfbWV0aG9kLCA4KSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBKU19DRlVOQ19NQUdJQ19ERUYoImluaXREZWxhdW5heSIsIDEsIGpzX3N1YmRpdjJkX21ldGhvZCwgOSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJpbnNlcnQiLCAxLCBqc19zdWJkaXYyZF9tZXRob2QsIDEwKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBKU19DRlVOQ19NQUdJQ19ERUYoImxvY2F0ZSIsIDMsIGpzX3N1YmRpdjJkX21ldGhvZCwgMTEpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEpTX0NGVU5DX01BR0lDX0RFRigibmV4dEVkZ2UiLCAxLCBqc19zdWJkaXYyZF9tZXRob2QsIDEyKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBKU19DRlVOQ19NQUdJQ19ERUYoInJvdGF0ZUVkZ2UiLCAyLCBqc19zdWJkaXYyZF9tZXRob2QsIDEzKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBKU19DRlVOQ19NQUdJQ19ERUYoInN5bUVkZ2UiLCAxLCBqc19zdWJkaXYyZF9tZXRob2QsIDE0KSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBKU19QUk9QX1NUUklOR19ERUYoIltTeW1ib2wudG9TdHJpbmdUYWddIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIlN1YmRpdjJEIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSlNfUFJPUF9DT05GSUdVUkFCTEUpfTsKCmNvbnN0IEpTQ0Z1bmN0aW9uTGlzdEVudHJ5IGpzX3N1YmRpdjJkX3N0YXRpY19mdW5jc1tdID0gewogICAgSlNfUFJPUF9JTlQzMl9ERUYoIlBUTE9DX0VSUk9SIiwgY3Y6OlN1YmRpdjJEOjpQVExPQ19FUlJPUiwgMCksCiAgICBKU19QUk9QX0lOVDMyX0RFRigiUFRMT0NfT1VUU0lERV9SRUNUIiwgY3Y6OlN1YmRpdjJEOjpQVExPQ19PVVRTSURFX1JFQ1QsIDApLAogICAgSlNfUFJPUF9JTlQzMl9ERUYoIlBUTE9DX0lOU0lERSIsIGN2OjpTdWJkaXYyRDo6UFRMT0NfSU5TSURFLCAwKSwKICAgIEpTX1BST1BfSU5UMzJfREVGKCJQVExPQ19WRVJURVgiLCBjdjo6U3ViZGl2MkQ6OlBUTE9DX1ZFUlRFWCwgMCksCgogICAgSlNfUFJPUF9JTlQzMl9ERUYoIk5FWFRfQVJPVU5EX09SRyIsIGN2OjpTdWJkaXYyRDo6TkVYVF9BUk9VTkRfT1JHLCAwKSwKICAgIEpTX1BST1BfSU5UMzJfREVGKCJORVhUX0FST1VORF9EU1QiLCBjdjo6U3ViZGl2MkQ6Ok5FWFRfQVJPVU5EX0RTVCwgMCksCiAgICBKU19QUk9QX0lOVDMyX0RFRigiUFJFVl9BUk9VTkRfT1JHIiwgY3Y6OlN1YmRpdjJEOjpQUkVWX0FST1VORF9PUkcsIDApLAogICAgSlNfUFJPUF9JTlQzMl9ERUYoIlBSRVZfQVJPVU5EX0RTVCIsIGN2OjpTdWJkaXYyRDo6UFJFVl9BUk9VTkRfRFNULCAwKSwKICAgIEpTX1BST1BfSU5UMzJfREVGKCJORVhUX0FST1VORF9MRUZUIiwgY3Y6OlN1YmRpdjJEOjpORVhUX0FST1VORF9MRUZULCAwKSwKICAgIEpTX1BST1BfSU5UMzJfREVGKCJORVhUX0FST1VORF9SSUdIVCIsIGN2OjpTdWJkaXYyRDo6TkVYVF9BUk9VTkRfUklHSFQsIDApLAogICAgSlNfUFJPUF9JTlQzMl9ERUYoIlBSRVZfQVJPVU5EX0xFRlQiLCBjdjo6U3ViZGl2MkQ6OlBSRVZfQVJPVU5EX0xFRlQsIDApfTsKCmV4dGVybiAiQyIgaW50CmpzX3N1YmRpdjJkX2luaXQoSlNDb250ZXh0KiBjdHgsIEpTTW9kdWxlRGVmKiBtKSB7CgogIGlmKGpzX3N1YmRpdjJkX2NsYXNzX2lkID09IDApIHsKICAgIC8qIGNyZWF0ZSB0aGUgU3ViZGl2MkQgY2xhc3MgKi8KICAgIEpTX05ld0NsYXNzSUQoJmpzX3N1YmRpdjJkX2NsYXNzX2lkKTsKICAgIEpTX05ld0NsYXNzKEpTX0dldFJ1bnRpbWUoY3R4KSwganNfc3ViZGl2MmRfY2xhc3NfaWQsICZqc19zdWJkaXYyZF9jbGFzcyk7CgogICAgc3ViZGl2MmRfcHJvdG8gPSBKU19OZXdPYmplY3QoY3R4KTsKICAgIEpTX1NldFByb3BlcnR5RnVuY3Rpb25MaXN0KGN0eCwgc3ViZGl2MmRfcHJvdG8sIGpzX3N1YmRpdjJkX3Byb3RvX2Z1bmNzLCBjb3VudG9mKGpzX3N1YmRpdjJkX3Byb3RvX2Z1bmNzKSk7CiAgICBKU19TZXRDbGFzc1Byb3RvKGN0eCwganNfc3ViZGl2MmRfY2xhc3NfaWQsIHN1YmRpdjJkX3Byb3RvKTsKCiAgICBzdWJkaXYyZF9jbGFzcyA9IEpTX05ld0NGdW5jdGlvbjIoY3R4LCBqc19zdWJkaXYyZF9jdG9yLCAiU3ViZGl2MkQiLCAyLCBKU19DRlVOQ19jb25zdHJ1Y3RvciwgMCk7CiAgICAvKiBzZXQgcHJvdG8uY29uc3RydWN0b3IgYW5kIGN0b3IucHJvdG90eXBlICovCiAgICBKU19TZXRDb25zdHJ1Y3RvcihjdHgsIHN1YmRpdjJkX2NsYXNzLCBzdWJkaXYyZF9wcm90byk7CiAgICBKU19TZXRQcm9wZXJ0eUZ1bmN0aW9uTGlzdChjdHgsIHN1YmRpdjJkX2NsYXNzLCBqc19zdWJkaXYyZF9zdGF0aWNfZnVuY3MsIGNvdW50b2YoanNfc3ViZGl2MmRfc3RhdGljX2Z1bmNzKSk7CiAgfQoKICBpZihtKQogICAgSlNfU2V0TW9kdWxlRXhwb3J0KGN0eCwgbSwgIlN1YmRpdjJEIiwgc3ViZGl2MmRfY2xhc3MpOwoKICByZXR1cm4gMDsKfQoKZXh0ZXJuICJDIiBWSVNJQkxFIHZvaWQganNfc3ViZGl2MmRfZXhwb3J0KEpTQ29udGV4dCogY3R4LCBKU01vZHVsZURlZiogbSkgewogIEpTX0FkZE1vZHVsZUV4cG9ydChjdHgsIG0sICJTdWJkaXYyRCIpOwp9Cgp2b2lkCmpzX3N1YmRpdjJkX2NvbnN0cnVjdG9yKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlIHBhcmVudCwgY29uc3QgY2hhciogbmFtZSkgewogIGlmKEpTX0lzVW5kZWZpbmVkKHN1YmRpdjJkX2NsYXNzKSkKICAgIGpzX3N1YmRpdjJkX2luaXQoY3R4LCAwKTsKCiAgSlNfU2V0UHJvcGVydHlTdHIoY3R4LCBwYXJlbnQsIG5hbWUgPyBuYW1lIDogIlN1YmRpdjJEIiwgc3ViZGl2MmRfY2xhc3MpOwp9CgojaWYgZGVmaW5lZChKU19TVUJESVYyRF9NT0RVTEUpCiNkZWZpbmUgSlNfSU5JVF9NT0RVTEUgLypWSVNJQkxFKi8ganNfaW5pdF9tb2R1bGUKI2Vsc2UKI2RlZmluZSBKU19JTklUX01PRFVMRSAvKlZJU0lCTEUqLyBqc19pbml0X21vZHVsZV9zdWJkaXYyZAojZW5kaWYKCmV4dGVybiAiQyIgSlNNb2R1bGVEZWYqCkpTX0lOSVRfTU9EVUxFKEpTQ29udGV4dCogY3R4LCBjb25zdCBjaGFyKiBtb2R1bGVfbmFtZSkgewogIEpTTW9kdWxlRGVmKiBtOwogIG0gPSBKU19OZXdDTW9kdWxlKGN0eCwgbW9kdWxlX25hbWUsICZqc19zdWJkaXYyZF9pbml0KTsKICBpZighbSkKICAgIHJldHVybiBOVUxMOwogIGpzX3N1YmRpdjJkX2V4cG9ydChjdHgsbSk7CiAgcmV0dXJuIG07Cn0AAAAAAAAAAH4qAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAbyoAAAAAAABvKgAAAAAAAAAAAAAAAPC/"
				],
				[
					39,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAAB+KgAAI2luY2x1ZGUgImpzYmluZGluZ3MuaHBwIgojaW5jbHVkZSAianNfcmVjdC5ocHAiCiNpbmNsdWRlICJqc19wb2ludC5ocHAiCiNpbmNsdWRlICJqc19hbGxvYy5ocHAiCiNpbmNsdWRlICJqc19hcnJheS5ocHAiCgojaW5jbHVkZSA8b3BlbmN2Mi9pbWdwcm9jLmhwcD4KCmV4dGVybiAiQyIgVklTSUJMRSBpbnQganNfc3ViZGl2MmRfaW5pdChKU0NvbnRleHQqLCBKU01vZHVsZURlZiopOwoKZXh0ZXJuICJDIiB7CkpTVmFsdWUgc3ViZGl2MmRfcHJvdG8gPSBKU19VTkRFRklORUQsIHN1YmRpdjJkX2NsYXNzID0gSlNfVU5ERUZJTkVEOwpKU0NsYXNzSUQganNfc3ViZGl2MmRfY2xhc3NfaWQgPSAwOwp9CgpKU1ZhbHVlCmpzX3N1YmRpdjJkX25ldyhKU0NvbnRleHQqIGN0eCwgSlNSZWN0RGF0YTxpbnQ+KiByZWN0ID0gbnVsbHB0cikgewogIEpTVmFsdWUgcmV0OwogIGN2OjpTdWJkaXYyRCogczsKICByZXQgPSBKU19OZXdPYmplY3RQcm90b0NsYXNzKGN0eCwgc3ViZGl2MmRfcHJvdG8sIGpzX3N1YmRpdjJkX2NsYXNzX2lkKTsKICBzID0ganNfYWxsb2NhdGU8Y3Y6OlN1YmRpdjJEPihjdHgpOwoKICBpZihyZWN0KQogICAgbmV3KHMpIGN2OjpTdWJkaXYyRCgqcmVjdCk7CiAgZWxzZQogICAgbmV3KHMpIGN2OjpTdWJkaXYyRCgpOwoKICBKU19TZXRPcGFxdWUocmV0LCBzKTsKCiAgcmV0dXJuIHJldDsKfQoKc3RhdGljIEpTVmFsdWUKanNfc3ViZGl2MmRfY3RvcihKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IG5ld190YXJnZXQsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QqIGFyZ3YpIHsKICBKU1JlY3REYXRhPGludD4gcmVjdDsKCiAgaWYoYXJnYyA+IDApCiAgICBpZighanNfcmVjdF9yZWFkKGN0eCwgYXJndlswXSwgJnJlY3QpKQogICAgICByZXR1cm4gSlNfRVhDRVBUSU9OOwoKICByZXR1cm4ganNfc3ViZGl2MmRfbmV3KGN0eCwgYXJnYyA+IDAgPyAmcmVjdCA6IG51bGxwdHIpOwp9Cgpjdjo6U3ViZGl2MkQqCmpzX3N1YmRpdjJkX2RhdGEoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB2YWwpIHsKICByZXR1cm4gc3RhdGljX2Nhc3Q8Y3Y6OlN1YmRpdjJEKj4oSlNfR2V0T3BhcXVlMihjdHgsIHZhbCwganNfc3ViZGl2MmRfY2xhc3NfaWQpKTsKfQoKdm9pZApqc19zdWJkaXYyZF9maW5hbGl6ZXIoSlNSdW50aW1lKiBydCwgSlNWYWx1ZSB2YWwpIHsKICBjdjo6U3ViZGl2MkQqIHMgPSBzdGF0aWNfY2FzdDxjdjo6U3ViZGl2MkQqPihKU19HZXRPcGFxdWUodmFsLCBqc19zdWJkaXYyZF9jbGFzc19pZCkpOwoKICBzLT5+U3ViZGl2MkQoKTsKICBqc19kZWFsbG9jYXRlKHJ0LCBzKTsKfQoKc3RhdGljIEpTVmFsdWUKanNfc3ViZGl2MmRfbWV0aG9kKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QqIGFyZ3YsIGludCBtYWdpYykgewogIGN2OjpTdWJkaXYyRCogczsKICBKU1ZhbHVlIHJldCA9IEpTX1VOREVGSU5FRDsKCiAgaWYoKHMgPSBqc19zdWJkaXYyZF9kYXRhKGN0eCwgdGhpc192YWwpKSA9PSBudWxscHRyKQogICAgcmV0dXJuIEpTX0VYQ0VQVElPTjsKCiAgc3dpdGNoKG1hZ2ljKSB7CiAgICAvLyBpbnQgU3ViZGl2MkQ6OmVkZ2VEc3QoaW50IGVkZ2UsIFBvaW50MmYgKmRzdHB0ID0gMCkgY29uc3QKICAgIGNhc2UgMDogewogICAgICBpbnQzMl90IGVkZ2U7CiAgICAgIEpTUG9pbnREYXRhPGZsb2F0PiBkc3RwdDsKICAgICAgSlNfVG9JbnQzMihjdHgsICZlZGdlLCBhcmd2WzBdKTsKICAgICAgaWYoYXJnYyA+IDEpCiAgICAgICAganNfcG9pbnRfcmVhZChjdHgsIGFyZ3ZbMV0sICZkc3RwdCk7CiAgICAgIHJldCA9IEpTX05ld0ludDMyKGN0eCwgcy0+ZWRnZURzdChlZGdlLCBhcmdjID4gMSA/ICZkc3RwdCA6IG51bGxwdHIpKTsKICAgICAgYnJlYWs7CiAgICB9CiAgICAvLyBpbnQgU3ViZGl2MkQ6OmVkZ2VPcmcoaW50IGVkZ2UsIFBvaW50MmYgKm9yZ3B0ID0gMCkgY29uc3QKICAgIGNhc2UgMTogewogICAgICBpbnQzMl90IGVkZ2U7CiAgICAgIEpTUG9pbnREYXRhPGZsb2F0PiBvcmdwdDsKICAgICAgaWYoYXJnYyA+IDEpCiAgICAgICAganNfcG9pbnRfcmVhZChjdHgsIGFyZ3ZbMV0sICZvcmdwdCk7CiAgICAgIHJldCA9IEpTX05ld0ludDMyKGN0eCwgcy0+ZWRnZU9yZyhlZGdlLCBhcmdjID4gMSA/ICZvcmdwdCA6IG51bGxwdHIpKTsKICAgICAgYnJlYWs7CiAgICB9CiAgICAvLyBpbnQgU3ViZGl2MkQ6OmZpbmROZWFyZXN0KFBvaW50MmYgcHQsIFBvaW50MmYgKm5lYXJlc3RQdCA9IDApCiAgICBjYXNlIDI6IHsKICAgICAgSlNQb2ludERhdGE8ZmxvYXQ+IHB0LCBuZWFyZXN0UHQ7CiAgICAgIGpzX3BvaW50X3JlYWQoY3R4LCBhcmd2WzBdLCAmcHQpOwogICAgICBpZihhcmdjID4gMSkKICAgICAgICBqc19wb2ludF9yZWFkKGN0eCwgYXJndlsxXSwgJm5lYXJlc3RQdCk7CiAgICAgIHJldCA9IEpTX05ld0ludDMyKGN0eCwgcy0+ZmluZE5lYXJlc3QocHQsIGFyZ2MgPiAxID8gJm5lYXJlc3RQdCA6IG51bGxwdHIpKTsKICAgICAgYnJlYWs7CiAgICB9CiAgICAvLyBpbnQgU3ViZGl2MkQ6OmdldEVkZ2UoaW50IGVkZ2UsIGludCBuZXh0RWRnZVR5cGUpIGNvbnN0CiAgICBjYXNlIDM6IHsKICAgICAgaW50MzJfdCBlZGdlLCBuZXh0RWRnZVR5cGU7CiAgICAgIEpTX1RvSW50MzIoY3R4LCAmZWRnZSwgYXJndlswXSk7CiAgICAgIEpTX1RvSW50MzIoY3R4LCAmbmV4dEVkZ2VUeXBlLCBhcmd2WzFdKTsKICAgICAgcmV0ID0gSlNfTmV3SW50MzIoY3R4LCBzLT5nZXRFZGdlKGVkZ2UsIG5leHRFZGdlVHlwZSkpOwogICAgICBicmVhazsKICAgIH0KICAgIC8vIHZvaWQgU3ViZGl2MkQ6OmdldEVkZ2VMaXN0KHN0ZDo6dmVjdG9yPFZlYzRmPiAmZWRnZUxpc3QpIGNvbnN0CiAgICBjYXNlIDQ6IHsKICAgICAgc3RkOjp2ZWN0b3I8Y3Y6OlZlYzRmPiBlZGdlTGlzdDsKICAgICAganNfYXJyYXlfdG8oY3R4LCBhcmd2WzBdLCBlZGdlTGlzdCk7CiAgICAgIHMtPmdldEVkZ2VMaXN0KGVkZ2VMaXN0KTsKICAgICAgYnJlYWs7CiAgICB9CiAgICAvLyB2b2lkIFN1YmRpdjJEOjpnZXRMZWFkaW5nRWRnZUxpc3Qoc3RkOjp2ZWN0b3I8aW50PiAmbGVhZGluZ0VkZ2VMaXN0KSBjb25zdAogICAgY2FzZSA1OiB7CiAgICAgIHN0ZDo6dmVjdG9yPGludD4gbGVhZGluZ0VkZ2VMaXN0OwogICAgICBqc19hcnJheV90byhjdHgsIGFyZ3ZbMF0sIGxlYWRpbmdFZGdlTGlzdCk7CiAgICAgIHMtPmdldExlYWRpbmdFZGdlTGlzdChsZWFkaW5nRWRnZUxpc3QpOwogICAgICBicmVhazsKICAgIH0KICAgIC8vIHZvaWQgU3ViZGl2MkQ6OmdldFRyaWFuZ2xlTGlzdChzdGQ6OnZlY3RvcjxWZWM2Zj4gJnRyaWFuZ2xlTGlzdCkgY29uc3QKICAgIGNhc2UgNjogewogICAgICBzdGQ6OnZlY3Rvcjxjdjo6VmVjNmY+IHRyaWFuZ2xlTGlzdDsKICAgICAganNfYXJyYXlfdG8oY3R4LCBhcmd2WzBdLCB0cmlhbmdsZUxpc3QpOwogICAgICBzLT5nZXRUcmlhbmdsZUxpc3QodHJpYW5nbGVMaXN0KTsKICAgICAgYnJlYWs7CiAgICAgIGJyZWFrOwogICAgfQogICAgLy8gUG9pbnQyZiBTdWJkaXYyRDo6Z2V0VmVydGV4KGludCB2ZXJ0ZXgsIGludCAqZmlyc3RFZGdlID0gMCkgY29uc3QKICAgIGNhc2UgNzogewogICAgICBpbnQzMl90IHZlcnRleCwgZmlyc3RFZGdlID0gMDsKICAgICAgSlNfVG9JbnQzMihjdHgsICZ2ZXJ0ZXgsIGFyZ3ZbMF0pOwoKICAgICAgcmV0ID0ganNfcG9pbnRfd3JhcChjdHgsIHMtPmdldFZlcnRleCh2ZXJ0ZXgsICZmaXJzdEVkZ2UpKTsKCiAgICAgIGlmKGFyZ2MgPiAxKSB7CiAgICAgICAgSlNWYWx1ZSB2YWwgPSBKU19OZXdJbnQzMihjdHgsIGZpcnN0RWRnZSk7CiAgICAgICAganNfcmVmKGN0eCwgImZpcnN0RWRnZSIsIGFyZ3ZbMV0sIHZhbCk7CiAgICAgICAgSlNfRnJlZVZhbHVlKGN0eCwgdmFsKTsKICAgICAgfQogICAgICBicmVhazsKICAgIH0KICAgIC8vIHZvaWQgU3ViZGl2MkQ6OmdldFZvcm9ub2lGYWNldExpc3QoY29uc3Qgc3RkOjp2ZWN0b3I8aW50PiAmaWR4LAogICAgLy8gc3RkOjp2ZWN0b3I8c3RkOjp2ZWN0b3I8UG9pbnQyZj4+ICZmYWNldExpc3QsIHN0ZDo6dmVjdG9yPFBvaW50MmY+ICZmYWNldENlbnRlcnMpCiAgICBjYXNlIDg6IHsKICAgICAgc3RkOjp2ZWN0b3I8aW50PiBpZHg7CiAgICAgIEpTQ29udG91cnNEYXRhPGZsb2F0PiBmYWNldExpc3Q7CiAgICAgIHN0ZDo6dmVjdG9yPEpTUG9pbnREYXRhPGZsb2F0Pj4gZmFjZXRDZW50ZXJzOwogICAgICBqc19hcnJheV90byhjdHgsIGFyZ3ZbMF0sIGlkeCk7CiAgICAgIGpzX2FycmF5X3RvKGN0eCwgYXJndlsxXSwgZmFjZXRMaXN0KTsKICAgICAganNfYXJyYXlfdG8oY3R4LCBhcmd2WzJdLCBmYWNldENlbnRlcnMpOwogICAgICBzLT5nZXRWb3Jvbm9pRmFjZXRMaXN0KGlkeCwgZmFjZXRMaXN0LCBmYWNldENlbnRlcnMpOwogICAgICBicmVhazsKICAgIH0KICAgIC8vIHZvaWQgU3ViZGl2MkQ6OmluaXREZWxhdW5heShSZWN0IHJlY3QpCiAgICBjYXNlIDk6IHsKICAgICAgSlNSZWN0RGF0YTxpbnQ+IHJlY3Q7CiAgICAgIGpzX3JlY3RfcmVhZChjdHgsIGFyZ3ZbMF0sICZyZWN0KTsKICAgICAgcy0+aW5pdERlbGF1bmF5KHJlY3QpOwogICAgICBicmVhazsKICAgIH0KICAgICAgLy8gaW50IFN1YmRpdjJEOjppbnNlcnQoUG9pbnQyZiBwdCkKICAgICAgLy8gdm9pZCBTdWJkaXYyRDo6aW5zZXJ0KGNvbnN0IHN0ZDo6dmVjdG9yPFBvaW50MmY+ICZwdHZlYykKICAgIGNhc2UgMTA6IHsKICAgICAgSlNQb2ludERhdGE8ZmxvYXQ+IHB0OwogICAgICBpZighanNfcG9pbnRfcmVhZChjdHgsIGFyZ3ZbMF0sICZwdCkpIHsKICAgICAgICBzdGQ6OnZlY3RvcjxKU1BvaW50RGF0YTxmbG9hdD4+IHB0dmVjOwogICAgICAgIGpzX2FycmF5X3RvKGN0eCwgYXJndlswXSwgcHR2ZWMpOwogICAgICAgIHMtPmluc2VydChwdHZlYyk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcy0+aW5zZXJ0KHB0KTsKICAgICAgfQogICAgICBicmVhazsKICAgIH0KCiAgICAvLyBpbnQgU3ViZGl2MkQ6OmxvY2F0ZShQb2ludDJmIHB0LCBpbnQgJmVkZ2UsIGludCAmdmVydGV4KQogICAgY2FzZSAxMTogewogICAgICBKU1BvaW50RGF0YTxmbG9hdD4gcHQ7CiAgICAgIGpzX3BvaW50X3JlYWQoY3R4LCBhcmd2WzBdLCAmcHQpOwogICAgICBpbnQzMl90IGVkZ2UgPSAwLCB2ZXJ0ZXggPSAwOwogICAgICByZXQgPSBKU19OZXdJbnQzMihjdHgsIHMtPmxvY2F0ZShwdCwgZWRnZSwgdmVydGV4KSk7CiAgICAgIGlmKGFyZ2MgPiAxKSB7CiAgICAgICAgSlNWYWx1ZSB2YWwgPSBKU19OZXdJbnQzMihjdHgsIGVkZ2UpOwogICAgICAgIGpzX3JlZihjdHgsICJlZGdlIiwgYXJndlsxXSwgdmFsKTsKICAgICAgICBKU19GcmVlVmFsdWUoY3R4LCB2YWwpOwogICAgICB9CiAgICAgIGlmKGFyZ2MgPiAyKSB7CiAgICAgICAgSlNWYWx1ZSB2YWwgPSBKU19OZXdJbnQzMihjdHgsIHZlcnRleCk7CiAgICAgICAganNfcmVmKGN0eCwgInZlcnRleCIsIGFyZ3ZbMV0sIHZhbCk7CiAgICAgICAgSlNfRnJlZVZhbHVlKGN0eCwgdmFsKTsKICAgICAgfQogICAgICBicmVhazsKICAgIH0KICAgIC8vIGludCBTdWJkaXYyRDo6bmV4dEVkZ2UoaW50IGVkZ2UpIGNvbnN0CiAgICBjYXNlIDEyOiB7CiAgICAgIGludDMyX3QgZWRnZTsKICAgICAgSlNfVG9JbnQzMihjdHgsICZlZGdlLCBhcmd2WzBdKTsKICAgICAgcmV0ID0gSlNfTmV3SW50MzIoY3R4LCBzLT5uZXh0RWRnZShlZGdlKSk7CiAgICAgIGJyZWFrOwogICAgfQogICAgLy8gaW50IFN1YmRpdjJEOjpyb3RhdGVFZGdlKGludCBlZGdlLCBpbnQgcm90YXRlKSBjb25zdAogICAgY2FzZSAxMzogewogICAgICBpbnQzMl90IGVkZ2UsIHJvdGF0ZTsKICAgICAgSlNfVG9JbnQzMihjdHgsICZlZGdlLCBhcmd2WzBdKTsKICAgICAgSlNfVG9JbnQzMihjdHgsICZyb3RhdGUsIGFyZ3ZbMV0pOwogICAgICByZXQgPSBKU19OZXdJbnQzMihjdHgsIHMtPnJvdGF0ZUVkZ2UoZWRnZSwgcm90YXRlKSk7CiAgICAgIGJyZWFrOwogICAgfQogICAgLy8gaW50IFN1YmRpdjJEOjpzeW1FZGdlKGludCBlZGdlKSBjb25zdAogICAgY2FzZSAxNDogewogICAgICBpbnQzMl90IGVkZ2U7CiAgICAgIEpTX1RvSW50MzIoY3R4LCAmZWRnZSwgYXJndlswXSk7CiAgICAgIHJldCA9IEpTX05ld0ludDMyKGN0eCwgcy0+c3ltRWRnZShlZGdlKSk7CiAgICAgIGJyZWFrOwogICAgfQogIH0KICByZXR1cm4gcmV0Owp9CgpKU0NsYXNzRGVmIGpzX3N1YmRpdjJkX2NsYXNzID0gewogICAgLmNsYXNzX25hbWUgPSAiU3ViZGl2MkQiLAogICAgLmZpbmFsaXplciA9IGpzX3N1YmRpdjJkX2ZpbmFsaXplciwKfTsKCmNvbnN0IEpTQ0Z1bmN0aW9uTGlzdEVudHJ5IGpzX3N1YmRpdjJkX3Byb3RvX2Z1bmNzW10gPSB7SlNfQ0ZVTkNfTUFHSUNfREVGKCJlZGdlRHN0IiwgMSwganNfc3ViZGl2MmRfbWV0aG9kLCAwKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBKU19DRlVOQ19NQUdJQ19ERUYoImVkZ2VPcmciLCAxLCBqc19zdWJkaXYyZF9tZXRob2QsIDEpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEpTX0NGVU5DX01BR0lDX0RFRigiZmluZE5lYXJlc3QiLCAxLCBqc19zdWJkaXYyZF9tZXRob2QsIDIpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEpTX0NGVU5DX01BR0lDX0RFRigiZ2V0RWRnZSIsIDIsIGpzX3N1YmRpdjJkX21ldGhvZCwgMyksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJnZXRFZGdlTGlzdCIsIDEsIGpzX3N1YmRpdjJkX21ldGhvZCwgNCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJnZXRMZWFkaW5nRWRnZUxpc3QiLCAxLCBqc19zdWJkaXYyZF9tZXRob2QsIDUpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEpTX0NGVU5DX01BR0lDX0RFRigiZ2V0VHJpYW5nbGVMaXN0IiwgMSwganNfc3ViZGl2MmRfbWV0aG9kLCA2KSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBKU19DRlVOQ19NQUdJQ19ERUYoImdldFZlcnRleCIsIDEsIGpzX3N1YmRpdjJkX21ldGhvZCwgNyksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJnZXRWb3Jvbm9pRmFjZXRMaXN0IiwgMywganNfc3ViZGl2MmRfbWV0aG9kLCA4KSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBKU19DRlVOQ19NQUdJQ19ERUYoImluaXREZWxhdW5heSIsIDEsIGpzX3N1YmRpdjJkX21ldGhvZCwgOSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJpbnNlcnQiLCAxLCBqc19zdWJkaXYyZF9tZXRob2QsIDEwKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBKU19DRlVOQ19NQUdJQ19ERUYoImxvY2F0ZSIsIDMsIGpzX3N1YmRpdjJkX21ldGhvZCwgMTEpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEpTX0NGVU5DX01BR0lDX0RFRigibmV4dEVkZ2UiLCAxLCBqc19zdWJkaXYyZF9tZXRob2QsIDEyKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBKU19DRlVOQ19NQUdJQ19ERUYoInJvdGF0ZUVkZ2UiLCAyLCBqc19zdWJkaXYyZF9tZXRob2QsIDEzKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBKU19DRlVOQ19NQUdJQ19ERUYoInN5bUVkZ2UiLCAxLCBqc19zdWJkaXYyZF9tZXRob2QsIDE0KSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBKU19QUk9QX1NUUklOR19ERUYoIltTeW1ib2wudG9TdHJpbmdUYWddIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIlN1YmRpdjJEIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSlNfUFJPUF9DT05GSUdVUkFCTEUpfTsKCmNvbnN0IEpTQ0Z1bmN0aW9uTGlzdEVudHJ5IGpzX3N1YmRpdjJkX3N0YXRpY19mdW5jc1tdID0gewogICAgSlNfUFJPUF9JTlQzMl9ERUYoIlBUTE9DX0VSUk9SIiwgY3Y6OlN1YmRpdjJEOjpQVExPQ19FUlJPUiwgMCksCiAgICBKU19QUk9QX0lOVDMyX0RFRigiUFRMT0NfT1VUU0lERV9SRUNUIiwgY3Y6OlN1YmRpdjJEOjpQVExPQ19PVVRTSURFX1JFQ1QsIDApLAogICAgSlNfUFJPUF9JTlQzMl9ERUYoIlBUTE9DX0lOU0lERSIsIGN2OjpTdWJkaXYyRDo6UFRMT0NfSU5TSURFLCAwKSwKICAgIEpTX1BST1BfSU5UMzJfREVGKCJQVExPQ19WRVJURVgiLCBjdjo6U3ViZGl2MkQ6OlBUTE9DX1ZFUlRFWCwgMCksCgogICAgSlNfUFJPUF9JTlQzMl9ERUYoIk5FWFRfQVJPVU5EX09SRyIsIGN2OjpTdWJkaXYyRDo6TkVYVF9BUk9VTkRfT1JHLCAwKSwKICAgIEpTX1BST1BfSU5UMzJfREVGKCJORVhUX0FST1VORF9EU1QiLCBjdjo6U3ViZGl2MkQ6Ok5FWFRfQVJPVU5EX0RTVCwgMCksCiAgICBKU19QUk9QX0lOVDMyX0RFRigiUFJFVl9BUk9VTkRfT1JHIiwgY3Y6OlN1YmRpdjJEOjpQUkVWX0FST1VORF9PUkcsIDApLAogICAgSlNfUFJPUF9JTlQzMl9ERUYoIlBSRVZfQVJPVU5EX0RTVCIsIGN2OjpTdWJkaXYyRDo6UFJFVl9BUk9VTkRfRFNULCAwKSwKICAgIEpTX1BST1BfSU5UMzJfREVGKCJORVhUX0FST1VORF9MRUZUIiwgY3Y6OlN1YmRpdjJEOjpORVhUX0FST1VORF9MRUZULCAwKSwKICAgIEpTX1BST1BfSU5UMzJfREVGKCJORVhUX0FST1VORF9SSUdIVCIsIGN2OjpTdWJkaXYyRDo6TkVYVF9BUk9VTkRfUklHSFQsIDApLAogICAgSlNfUFJPUF9JTlQzMl9ERUYoIlBSRVZfQVJPVU5EX0xFRlQiLCBjdjo6U3ViZGl2MkQ6OlBSRVZfQVJPVU5EX0xFRlQsIDApfTsKCmV4dGVybiAiQyIgaW50CmpzX3N1YmRpdjJkX2luaXQoSlNDb250ZXh0KiBjdHgsIEpTTW9kdWxlRGVmKiBtKSB7CgogIGlmKGpzX3N1YmRpdjJkX2NsYXNzX2lkID09IDApIHsKICAgIC8qIGNyZWF0ZSB0aGUgU3ViZGl2MkQgY2xhc3MgKi8KICAgIEpTX05ld0NsYXNzSUQoJmpzX3N1YmRpdjJkX2NsYXNzX2lkKTsKICAgIEpTX05ld0NsYXNzKEpTX0dldFJ1bnRpbWUoY3R4KSwganNfc3ViZGl2MmRfY2xhc3NfaWQsICZqc19zdWJkaXYyZF9jbGFzcyk7CgogICAgc3ViZGl2MmRfcHJvdG8gPSBKU19OZXdPYmplY3QoY3R4KTsKICAgIEpTX1NldFByb3BlcnR5RnVuY3Rpb25MaXN0KGN0eCwgc3ViZGl2MmRfcHJvdG8sIGpzX3N1YmRpdjJkX3Byb3RvX2Z1bmNzLCBjb3VudG9mKGpzX3N1YmRpdjJkX3Byb3RvX2Z1bmNzKSk7CiAgICBKU19TZXRDbGFzc1Byb3RvKGN0eCwganNfc3ViZGl2MmRfY2xhc3NfaWQsIHN1YmRpdjJkX3Byb3RvKTsKCiAgICBzdWJkaXYyZF9jbGFzcyA9IEpTX05ld0NGdW5jdGlvbjIoY3R4LCBqc19zdWJkaXYyZF9jdG9yLCAiU3ViZGl2MkQiLCAyLCBKU19DRlVOQ19jb25zdHJ1Y3RvciwgMCk7CiAgICAvKiBzZXQgcHJvdG8uY29uc3RydWN0b3IgYW5kIGN0b3IucHJvdG90eXBlICovCiAgICBKU19TZXRDb25zdHJ1Y3RvcihjdHgsIHN1YmRpdjJkX2NsYXNzLCBzdWJkaXYyZF9wcm90byk7CiAgICBKU19TZXRQcm9wZXJ0eUZ1bmN0aW9uTGlzdChjdHgsIHN1YmRpdjJkX2NsYXNzLCBqc19zdWJkaXYyZF9zdGF0aWNfZnVuY3MsIGNvdW50b2YoanNfc3ViZGl2MmRfc3RhdGljX2Z1bmNzKSk7CiAgfQoKICBpZihtKQogICAgSlNfU2V0TW9kdWxlRXhwb3J0KGN0eCwgbSwgIlN1YmRpdjJEIiwgc3ViZGl2MmRfY2xhc3MpOwoKICByZXR1cm4gMDsKfQoKZXh0ZXJuICJDIiBWSVNJQkxFIHZvaWQKanNfc3ViZGl2MmRfZXhwb3J0KEpTQ29udGV4dCogY3R4LCBKU01vZHVsZURlZiogbSkgewogIEpTX0FkZE1vZHVsZUV4cG9ydChjdHgsIG0sICJTdWJkaXYyRCIpOwp9Cgp2b2lkCmpzX3N1YmRpdjJkX2NvbnN0cnVjdG9yKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlIHBhcmVudCwgY29uc3QgY2hhciogbmFtZSkgewogIGlmKEpTX0lzVW5kZWZpbmVkKHN1YmRpdjJkX2NsYXNzKSkKICAgIGpzX3N1YmRpdjJkX2luaXQoY3R4LCAwKTsKCiAgSlNfU2V0UHJvcGVydHlTdHIoY3R4LCBwYXJlbnQsIG5hbWUgPyBuYW1lIDogIlN1YmRpdjJEIiwgc3ViZGl2MmRfY2xhc3MpOwp9CgojaWYgZGVmaW5lZChKU19TVUJESVYyRF9NT0RVTEUpCiNkZWZpbmUgSlNfSU5JVF9NT0RVTEUgLypWSVNJQkxFKi8ganNfaW5pdF9tb2R1bGUKI2Vsc2UKI2RlZmluZSBKU19JTklUX01PRFVMRSAvKlZJU0lCTEUqLyBqc19pbml0X21vZHVsZV9zdWJkaXYyZAojZW5kaWYKCmV4dGVybiAiQyIgSlNNb2R1bGVEZWYqCkpTX0lOSVRfTU9EVUxFKEpTQ29udGV4dCogY3R4LCBjb25zdCBjaGFyKiBtb2R1bGVfbmFtZSkgewogIEpTTW9kdWxlRGVmKiBtOwogIG0gPSBKU19OZXdDTW9kdWxlKGN0eCwgbW9kdWxlX25hbWUsICZqc19zdWJkaXYyZF9pbml0KTsKICBpZighbSkKICAgIHJldHVybiBOVUxMOwogIGpzX3N1YmRpdjJkX2V4cG9ydChjdHgsIG0pOwogIHJldHVybiBtOwp9AAAAAAAAAAB+KgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAbyoAAAAAAABvKgAAAAAAAAAAAAAAAPC/"
				],
				[
					40,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAAB+KgAAI2luY2x1ZGUgImpzYmluZGluZ3MuaHBwIgojaW5jbHVkZSAianNfcmVjdC5ocHAiCiNpbmNsdWRlICJqc19wb2ludC5ocHAiCiNpbmNsdWRlICJqc19hbGxvYy5ocHAiCiNpbmNsdWRlICJqc19hcnJheS5ocHAiCgojaW5jbHVkZSA8b3BlbmN2Mi9pbWdwcm9jLmhwcD4KCmV4dGVybiAiQyIgVklTSUJMRSBpbnQganNfc3ViZGl2MmRfaW5pdChKU0NvbnRleHQqLCBKU01vZHVsZURlZiopOwoKZXh0ZXJuICJDIiB7CkpTVmFsdWUgc3ViZGl2MmRfcHJvdG8gPSBKU19VTkRFRklORUQsIHN1YmRpdjJkX2NsYXNzID0gSlNfVU5ERUZJTkVEOwpKU0NsYXNzSUQganNfc3ViZGl2MmRfY2xhc3NfaWQgPSAwOwp9CgpKU1ZhbHVlCmpzX3N1YmRpdjJkX25ldyhKU0NvbnRleHQqIGN0eCwgSlNSZWN0RGF0YTxpbnQ+KiByZWN0ID0gbnVsbHB0cikgewogIEpTVmFsdWUgcmV0OwogIGN2OjpTdWJkaXYyRCogczsKICByZXQgPSBKU19OZXdPYmplY3RQcm90b0NsYXNzKGN0eCwgc3ViZGl2MmRfcHJvdG8sIGpzX3N1YmRpdjJkX2NsYXNzX2lkKTsKICBzID0ganNfYWxsb2NhdGU8Y3Y6OlN1YmRpdjJEPihjdHgpOwoKICBpZihyZWN0KQogICAgbmV3KHMpIGN2OjpTdWJkaXYyRCgqcmVjdCk7CiAgZWxzZQogICAgbmV3KHMpIGN2OjpTdWJkaXYyRCgpOwoKICBKU19TZXRPcGFxdWUocmV0LCBzKTsKCiAgcmV0dXJuIHJldDsKfQoKc3RhdGljIEpTVmFsdWUKanNfc3ViZGl2MmRfY3RvcihKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IG5ld190YXJnZXQsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QqIGFyZ3YpIHsKICBKU1JlY3REYXRhPGludD4gcmVjdDsKCiAgaWYoYXJnYyA+IDApCiAgICBpZighanNfcmVjdF9yZWFkKGN0eCwgYXJndlswXSwgJnJlY3QpKQogICAgICByZXR1cm4gSlNfRVhDRVBUSU9OOwoKICByZXR1cm4ganNfc3ViZGl2MmRfbmV3KGN0eCwgYXJnYyA+IDAgPyAmcmVjdCA6IG51bGxwdHIpOwp9Cgpjdjo6U3ViZGl2MkQqCmpzX3N1YmRpdjJkX2RhdGEoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB2YWwpIHsKICByZXR1cm4gc3RhdGljX2Nhc3Q8Y3Y6OlN1YmRpdjJEKj4oSlNfR2V0T3BhcXVlMihjdHgsIHZhbCwganNfc3ViZGl2MmRfY2xhc3NfaWQpKTsKfQoKdm9pZApqc19zdWJkaXYyZF9maW5hbGl6ZXIoSlNSdW50aW1lKiBydCwgSlNWYWx1ZSB2YWwpIHsKICBjdjo6U3ViZGl2MkQqIHMgPSBzdGF0aWNfY2FzdDxjdjo6U3ViZGl2MkQqPihKU19HZXRPcGFxdWUodmFsLCBqc19zdWJkaXYyZF9jbGFzc19pZCkpOwoKICBzLT5+U3ViZGl2MkQoKTsKICBqc19kZWFsbG9jYXRlKHJ0LCBzKTsKfQoKc3RhdGljIEpTVmFsdWUKanNfc3ViZGl2MmRfbWV0aG9kKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QqIGFyZ3YsIGludCBtYWdpYykgewogIGN2OjpTdWJkaXYyRCogczsKICBKU1ZhbHVlIHJldCA9IEpTX1VOREVGSU5FRDsKCiAgaWYoKHMgPSBqc19zdWJkaXYyZF9kYXRhKGN0eCwgdGhpc192YWwpKSA9PSBudWxscHRyKQogICAgcmV0dXJuIEpTX0VYQ0VQVElPTjsKCiAgc3dpdGNoKG1hZ2ljKSB7CiAgICAvLyBpbnQgU3ViZGl2MkQ6OmVkZ2VEc3QoaW50IGVkZ2UsIFBvaW50MmYgKmRzdHB0ID0gMCkgY29uc3QKICAgIGNhc2UgMDogewogICAgICBpbnQzMl90IGVkZ2U7CiAgICAgIEpTUG9pbnREYXRhPGZsb2F0PiBkc3RwdDsKICAgICAgSlNfVG9JbnQzMihjdHgsICZlZGdlLCBhcmd2WzBdKTsKICAgICAgaWYoYXJnYyA+IDEpCiAgICAgICAganNfcG9pbnRfcmVhZChjdHgsIGFyZ3ZbMV0sICZkc3RwdCk7CiAgICAgIHJldCA9IEpTX05ld0ludDMyKGN0eCwgcy0+ZWRnZURzdChlZGdlLCBhcmdjID4gMSA/ICZkc3RwdCA6IG51bGxwdHIpKTsKICAgICAgYnJlYWs7CiAgICB9CiAgICAvLyBpbnQgU3ViZGl2MkQ6OmVkZ2VPcmcoaW50IGVkZ2UsIFBvaW50MmYgKm9yZ3B0ID0gMCkgY29uc3QKICAgIGNhc2UgMTogewogICAgICBpbnQzMl90IGVkZ2U7CiAgICAgIEpTUG9pbnREYXRhPGZsb2F0PiBvcmdwdDsKICAgICAgaWYoYXJnYyA+IDEpCiAgICAgICAganNfcG9pbnRfcmVhZChjdHgsIGFyZ3ZbMV0sICZvcmdwdCk7CiAgICAgIHJldCA9IEpTX05ld0ludDMyKGN0eCwgcy0+ZWRnZU9yZyhlZGdlLCBhcmdjID4gMSA/ICZvcmdwdCA6IG51bGxwdHIpKTsKICAgICAgYnJlYWs7CiAgICB9CiAgICAvLyBpbnQgU3ViZGl2MkQ6OmZpbmROZWFyZXN0KFBvaW50MmYgcHQsIFBvaW50MmYgKm5lYXJlc3RQdCA9IDApCiAgICBjYXNlIDI6IHsKICAgICAgSlNQb2ludERhdGE8ZmxvYXQ+IHB0LCBuZWFyZXN0UHQ7CiAgICAgIGpzX3BvaW50X3JlYWQoY3R4LCBhcmd2WzBdLCAmcHQpOwogICAgICBpZihhcmdjID4gMSkKICAgICAgICBqc19wb2ludF9yZWFkKGN0eCwgYXJndlsxXSwgJm5lYXJlc3RQdCk7CiAgICAgIHJldCA9IEpTX05ld0ludDMyKGN0eCwgcy0+ZmluZE5lYXJlc3QocHQsIGFyZ2MgPiAxID8gJm5lYXJlc3RQdCA6IG51bGxwdHIpKTsKICAgICAgYnJlYWs7CiAgICB9CiAgICAvLyBpbnQgU3ViZGl2MkQ6OmdldEVkZ2UoaW50IGVkZ2UsIGludCBuZXh0RWRnZVR5cGUpIGNvbnN0CiAgICBjYXNlIDM6IHsKICAgICAgaW50MzJfdCBlZGdlLCBuZXh0RWRnZVR5cGU7CiAgICAgIEpTX1RvSW50MzIoY3R4LCAmZWRnZSwgYXJndlswXSk7CiAgICAgIEpTX1RvSW50MzIoY3R4LCAmbmV4dEVkZ2VUeXBlLCBhcmd2WzFdKTsKICAgICAgcmV0ID0gSlNfTmV3SW50MzIoY3R4LCBzLT5nZXRFZGdlKGVkZ2UsIG5leHRFZGdlVHlwZSkpOwogICAgICBicmVhazsKICAgIH0KICAgIC8vIHZvaWQgU3ViZGl2MkQ6OmdldEVkZ2VMaXN0KHN0ZDo6dmVjdG9yPFZlYzRmPiAmZWRnZUxpc3QpIGNvbnN0CiAgICBjYXNlIDQ6IHsKICAgICAgc3RkOjp2ZWN0b3I8Y3Y6OlZlYzRmPiBlZGdlTGlzdDsKICAgICAganNfYXJyYXlfdG8oY3R4LCBhcmd2WzBdLCBlZGdlTGlzdCk7CiAgICAgIHMtPmdldEVkZ2VMaXN0KGVkZ2VMaXN0KTsKICAgICAgYnJlYWs7CiAgICB9CiAgICAvLyB2b2lkIFN1YmRpdjJEOjpnZXRMZWFkaW5nRWRnZUxpc3Qoc3RkOjp2ZWN0b3I8aW50PiAmbGVhZGluZ0VkZ2VMaXN0KSBjb25zdAogICAgY2FzZSA1OiB7CiAgICAgIHN0ZDo6dmVjdG9yPGludD4gbGVhZGluZ0VkZ2VMaXN0OwogICAgICBqc19hcnJheV90byhjdHgsIGFyZ3ZbMF0sIGxlYWRpbmdFZGdlTGlzdCk7CiAgICAgIHMtPmdldExlYWRpbmdFZGdlTGlzdChsZWFkaW5nRWRnZUxpc3QpOwogICAgICBicmVhazsKICAgIH0KICAgIC8vIHZvaWQgU3ViZGl2MkQ6OmdldFRyaWFuZ2xlTGlzdChzdGQ6OnZlY3RvcjxWZWM2Zj4gJnRyaWFuZ2xlTGlzdCkgY29uc3QKICAgIGNhc2UgNjogewogICAgICBzdGQ6OnZlY3Rvcjxjdjo6VmVjNmY+IHRyaWFuZ2xlTGlzdDsKICAgICAganNfYXJyYXlfdG8oY3R4LCBhcmd2WzBdLCB0cmlhbmdsZUxpc3QpOwogICAgICBzLT5nZXRUcmlhbmdsZUxpc3QodHJpYW5nbGVMaXN0KTsKICAgICAgYnJlYWs7CiAgICAgIGJyZWFrOwogICAgfQogICAgLy8gUG9pbnQyZiBTdWJkaXYyRDo6Z2V0VmVydGV4KGludCB2ZXJ0ZXgsIGludCAqZmlyc3RFZGdlID0gMCkgY29uc3QKICAgIGNhc2UgNzogewogICAgICBpbnQzMl90IHZlcnRleCwgZmlyc3RFZGdlID0gMDsKICAgICAgSlNfVG9JbnQzMihjdHgsICZ2ZXJ0ZXgsIGFyZ3ZbMF0pOwoKICAgICAgcmV0ID0ganNfcG9pbnRfd3JhcChjdHgsIHMtPmdldFZlcnRleCh2ZXJ0ZXgsICZmaXJzdEVkZ2UpKTsKCiAgICAgIGlmKGFyZ2MgPiAxKSB7CiAgICAgICAgSlNWYWx1ZSB2YWwgPSBKU19OZXdJbnQzMihjdHgsIGZpcnN0RWRnZSk7CiAgICAgICAganNfcmVmKGN0eCwgImZpcnN0RWRnZSIsIGFyZ3ZbMV0sIHZhbCk7CiAgICAgICAgSlNfRnJlZVZhbHVlKGN0eCwgdmFsKTsKICAgICAgfQogICAgICBicmVhazsKICAgIH0KICAgIC8vIHZvaWQgU3ViZGl2MkQ6OmdldFZvcm9ub2lGYWNldExpc3QoY29uc3Qgc3RkOjp2ZWN0b3I8aW50PiAmaWR4LAogICAgLy8gc3RkOjp2ZWN0b3I8c3RkOjp2ZWN0b3I8UG9pbnQyZj4+ICZmYWNldExpc3QsIHN0ZDo6dmVjdG9yPFBvaW50MmY+ICZmYWNldENlbnRlcnMpCiAgICBjYXNlIDg6IHsKICAgICAgc3RkOjp2ZWN0b3I8aW50PiBpZHg7CiAgICAgIEpTQ29udG91cnNEYXRhPGZsb2F0PiBmYWNldExpc3Q7CiAgICAgIHN0ZDo6dmVjdG9yPEpTUG9pbnREYXRhPGZsb2F0Pj4gZmFjZXRDZW50ZXJzOwogICAgICBqc19hcnJheV90byhjdHgsIGFyZ3ZbMF0sIGlkeCk7CiAgICAgIGpzX2FycmF5X3RvKGN0eCwgYXJndlsxXSwgZmFjZXRMaXN0KTsKICAgICAganNfYXJyYXlfdG8oY3R4LCBhcmd2WzJdLCBmYWNldENlbnRlcnMpOwogICAgICBzLT5nZXRWb3Jvbm9pRmFjZXRMaXN0KGlkeCwgZmFjZXRMaXN0LCBmYWNldENlbnRlcnMpOwogICAgICBicmVhazsKICAgIH0KICAgIC8vIHZvaWQgU3ViZGl2MkQ6OmluaXREZWxhdW5heShSZWN0IHJlY3QpCiAgICBjYXNlIDk6IHsKICAgICAgSlNSZWN0RGF0YTxpbnQ+IHJlY3Q7CiAgICAgIGpzX3JlY3RfcmVhZChjdHgsIGFyZ3ZbMF0sICZyZWN0KTsKICAgICAgcy0+aW5pdERlbGF1bmF5KHJlY3QpOwogICAgICBicmVhazsKICAgIH0KICAgICAgLy8gaW50IFN1YmRpdjJEOjppbnNlcnQoUG9pbnQyZiBwdCkKICAgICAgLy8gdm9pZCBTdWJkaXYyRDo6aW5zZXJ0KGNvbnN0IHN0ZDo6dmVjdG9yPFBvaW50MmY+ICZwdHZlYykKICAgIGNhc2UgMTA6IHsKICAgICAgSlNQb2ludERhdGE8ZmxvYXQ+IHB0OwogICAgICBpZighanNfcG9pbnRfcmVhZChjdHgsIGFyZ3ZbMF0sICZwdCkpIHsKICAgICAgICBzdGQ6OnZlY3RvcjxKU1BvaW50RGF0YTxmbG9hdD4+IHB0dmVjOwogICAgICAgIGpzX2FycmF5X3RvKGN0eCwgYXJndlswXSwgcHR2ZWMpOwogICAgICAgIHMtPmluc2VydChwdHZlYyk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcy0+aW5zZXJ0KHB0KTsKICAgICAgfQogICAgICBicmVhazsKICAgIH0KCiAgICAvLyBpbnQgU3ViZGl2MkQ6OmxvY2F0ZShQb2ludDJmIHB0LCBpbnQgJmVkZ2UsIGludCAmdmVydGV4KQogICAgY2FzZSAxMTogewogICAgICBKU1BvaW50RGF0YTxmbG9hdD4gcHQ7CiAgICAgIGpzX3BvaW50X3JlYWQoY3R4LCBhcmd2WzBdLCAmcHQpOwogICAgICBpbnQzMl90IGVkZ2UgPSAwLCB2ZXJ0ZXggPSAwOwogICAgICByZXQgPSBKU19OZXdJbnQzMihjdHgsIHMtPmxvY2F0ZShwdCwgZWRnZSwgdmVydGV4KSk7CiAgICAgIGlmKGFyZ2MgPiAxKSB7CiAgICAgICAgSlNWYWx1ZSB2YWwgPSBKU19OZXdJbnQzMihjdHgsIGVkZ2UpOwogICAgICAgIGpzX3JlZihjdHgsICJlZGdlIiwgYXJndlsxXSwgdmFsKTsKICAgICAgICBKU19GcmVlVmFsdWUoY3R4LCB2YWwpOwogICAgICB9CiAgICAgIGlmKGFyZ2MgPiAyKSB7CiAgICAgICAgSlNWYWx1ZSB2YWwgPSBKU19OZXdJbnQzMihjdHgsIHZlcnRleCk7CiAgICAgICAganNfcmVmKGN0eCwgInZlcnRleCIsIGFyZ3ZbMV0sIHZhbCk7CiAgICAgICAgSlNfRnJlZVZhbHVlKGN0eCwgdmFsKTsKICAgICAgfQogICAgICBicmVhazsKICAgIH0KICAgIC8vIGludCBTdWJkaXYyRDo6bmV4dEVkZ2UoaW50IGVkZ2UpIGNvbnN0CiAgICBjYXNlIDEyOiB7CiAgICAgIGludDMyX3QgZWRnZTsKICAgICAgSlNfVG9JbnQzMihjdHgsICZlZGdlLCBhcmd2WzBdKTsKICAgICAgcmV0ID0gSlNfTmV3SW50MzIoY3R4LCBzLT5uZXh0RWRnZShlZGdlKSk7CiAgICAgIGJyZWFrOwogICAgfQogICAgLy8gaW50IFN1YmRpdjJEOjpyb3RhdGVFZGdlKGludCBlZGdlLCBpbnQgcm90YXRlKSBjb25zdAogICAgY2FzZSAxMzogewogICAgICBpbnQzMl90IGVkZ2UsIHJvdGF0ZTsKICAgICAgSlNfVG9JbnQzMihjdHgsICZlZGdlLCBhcmd2WzBdKTsKICAgICAgSlNfVG9JbnQzMihjdHgsICZyb3RhdGUsIGFyZ3ZbMV0pOwogICAgICByZXQgPSBKU19OZXdJbnQzMihjdHgsIHMtPnJvdGF0ZUVkZ2UoZWRnZSwgcm90YXRlKSk7CiAgICAgIGJyZWFrOwogICAgfQogICAgLy8gaW50IFN1YmRpdjJEOjpzeW1FZGdlKGludCBlZGdlKSBjb25zdAogICAgY2FzZSAxNDogewogICAgICBpbnQzMl90IGVkZ2U7CiAgICAgIEpTX1RvSW50MzIoY3R4LCAmZWRnZSwgYXJndlswXSk7CiAgICAgIHJldCA9IEpTX05ld0ludDMyKGN0eCwgcy0+c3ltRWRnZShlZGdlKSk7CiAgICAgIGJyZWFrOwogICAgfQogIH0KICByZXR1cm4gcmV0Owp9CgpKU0NsYXNzRGVmIGpzX3N1YmRpdjJkX2NsYXNzID0gewogICAgLmNsYXNzX25hbWUgPSAiU3ViZGl2MkQiLAogICAgLmZpbmFsaXplciA9IGpzX3N1YmRpdjJkX2ZpbmFsaXplciwKfTsKCmNvbnN0IEpTQ0Z1bmN0aW9uTGlzdEVudHJ5IGpzX3N1YmRpdjJkX3Byb3RvX2Z1bmNzW10gPSB7SlNfQ0ZVTkNfTUFHSUNfREVGKCJlZGdlRHN0IiwgMSwganNfc3ViZGl2MmRfbWV0aG9kLCAwKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBKU19DRlVOQ19NQUdJQ19ERUYoImVkZ2VPcmciLCAxLCBqc19zdWJkaXYyZF9tZXRob2QsIDEpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEpTX0NGVU5DX01BR0lDX0RFRigiZmluZE5lYXJlc3QiLCAxLCBqc19zdWJkaXYyZF9tZXRob2QsIDIpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEpTX0NGVU5DX01BR0lDX0RFRigiZ2V0RWRnZSIsIDIsIGpzX3N1YmRpdjJkX21ldGhvZCwgMyksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJnZXRFZGdlTGlzdCIsIDEsIGpzX3N1YmRpdjJkX21ldGhvZCwgNCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJnZXRMZWFkaW5nRWRnZUxpc3QiLCAxLCBqc19zdWJkaXYyZF9tZXRob2QsIDUpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEpTX0NGVU5DX01BR0lDX0RFRigiZ2V0VHJpYW5nbGVMaXN0IiwgMSwganNfc3ViZGl2MmRfbWV0aG9kLCA2KSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBKU19DRlVOQ19NQUdJQ19ERUYoImdldFZlcnRleCIsIDEsIGpzX3N1YmRpdjJkX21ldGhvZCwgNyksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJnZXRWb3Jvbm9pRmFjZXRMaXN0IiwgMywganNfc3ViZGl2MmRfbWV0aG9kLCA4KSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBKU19DRlVOQ19NQUdJQ19ERUYoImluaXREZWxhdW5heSIsIDEsIGpzX3N1YmRpdjJkX21ldGhvZCwgOSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJpbnNlcnQiLCAxLCBqc19zdWJkaXYyZF9tZXRob2QsIDEwKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBKU19DRlVOQ19NQUdJQ19ERUYoImxvY2F0ZSIsIDMsIGpzX3N1YmRpdjJkX21ldGhvZCwgMTEpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEpTX0NGVU5DX01BR0lDX0RFRigibmV4dEVkZ2UiLCAxLCBqc19zdWJkaXYyZF9tZXRob2QsIDEyKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBKU19DRlVOQ19NQUdJQ19ERUYoInJvdGF0ZUVkZ2UiLCAyLCBqc19zdWJkaXYyZF9tZXRob2QsIDEzKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBKU19DRlVOQ19NQUdJQ19ERUYoInN5bUVkZ2UiLCAxLCBqc19zdWJkaXYyZF9tZXRob2QsIDE0KSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBKU19QUk9QX1NUUklOR19ERUYoIltTeW1ib2wudG9TdHJpbmdUYWddIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIlN1YmRpdjJEIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSlNfUFJPUF9DT05GSUdVUkFCTEUpfTsKCmNvbnN0IEpTQ0Z1bmN0aW9uTGlzdEVudHJ5IGpzX3N1YmRpdjJkX3N0YXRpY19mdW5jc1tdID0gewogICAgSlNfUFJPUF9JTlQzMl9ERUYoIlBUTE9DX0VSUk9SIiwgY3Y6OlN1YmRpdjJEOjpQVExPQ19FUlJPUiwgMCksCiAgICBKU19QUk9QX0lOVDMyX0RFRigiUFRMT0NfT1VUU0lERV9SRUNUIiwgY3Y6OlN1YmRpdjJEOjpQVExPQ19PVVRTSURFX1JFQ1QsIDApLAogICAgSlNfUFJPUF9JTlQzMl9ERUYoIlBUTE9DX0lOU0lERSIsIGN2OjpTdWJkaXYyRDo6UFRMT0NfSU5TSURFLCAwKSwKICAgIEpTX1BST1BfSU5UMzJfREVGKCJQVExPQ19WRVJURVgiLCBjdjo6U3ViZGl2MkQ6OlBUTE9DX1ZFUlRFWCwgMCksCgogICAgSlNfUFJPUF9JTlQzMl9ERUYoIk5FWFRfQVJPVU5EX09SRyIsIGN2OjpTdWJkaXYyRDo6TkVYVF9BUk9VTkRfT1JHLCAwKSwKICAgIEpTX1BST1BfSU5UMzJfREVGKCJORVhUX0FST1VORF9EU1QiLCBjdjo6U3ViZGl2MkQ6Ok5FWFRfQVJPVU5EX0RTVCwgMCksCiAgICBKU19QUk9QX0lOVDMyX0RFRigiUFJFVl9BUk9VTkRfT1JHIiwgY3Y6OlN1YmRpdjJEOjpQUkVWX0FST1VORF9PUkcsIDApLAogICAgSlNfUFJPUF9JTlQzMl9ERUYoIlBSRVZfQVJPVU5EX0RTVCIsIGN2OjpTdWJkaXYyRDo6UFJFVl9BUk9VTkRfRFNULCAwKSwKICAgIEpTX1BST1BfSU5UMzJfREVGKCJORVhUX0FST1VORF9MRUZUIiwgY3Y6OlN1YmRpdjJEOjpORVhUX0FST1VORF9MRUZULCAwKSwKICAgIEpTX1BST1BfSU5UMzJfREVGKCJORVhUX0FST1VORF9SSUdIVCIsIGN2OjpTdWJkaXYyRDo6TkVYVF9BUk9VTkRfUklHSFQsIDApLAogICAgSlNfUFJPUF9JTlQzMl9ERUYoIlBSRVZfQVJPVU5EX0xFRlQiLCBjdjo6U3ViZGl2MkQ6OlBSRVZfQVJPVU5EX0xFRlQsIDApfTsKCmV4dGVybiAiQyIgaW50CmpzX3N1YmRpdjJkX2luaXQoSlNDb250ZXh0KiBjdHgsIEpTTW9kdWxlRGVmKiBtKSB7CgogIGlmKGpzX3N1YmRpdjJkX2NsYXNzX2lkID09IDApIHsKICAgIC8qIGNyZWF0ZSB0aGUgU3ViZGl2MkQgY2xhc3MgKi8KICAgIEpTX05ld0NsYXNzSUQoJmpzX3N1YmRpdjJkX2NsYXNzX2lkKTsKICAgIEpTX05ld0NsYXNzKEpTX0dldFJ1bnRpbWUoY3R4KSwganNfc3ViZGl2MmRfY2xhc3NfaWQsICZqc19zdWJkaXYyZF9jbGFzcyk7CgogICAgc3ViZGl2MmRfcHJvdG8gPSBKU19OZXdPYmplY3QoY3R4KTsKICAgIEpTX1NldFByb3BlcnR5RnVuY3Rpb25MaXN0KGN0eCwgc3ViZGl2MmRfcHJvdG8sIGpzX3N1YmRpdjJkX3Byb3RvX2Z1bmNzLCBjb3VudG9mKGpzX3N1YmRpdjJkX3Byb3RvX2Z1bmNzKSk7CiAgICBKU19TZXRDbGFzc1Byb3RvKGN0eCwganNfc3ViZGl2MmRfY2xhc3NfaWQsIHN1YmRpdjJkX3Byb3RvKTsKCiAgICBzdWJkaXYyZF9jbGFzcyA9IEpTX05ld0NGdW5jdGlvbjIoY3R4LCBqc19zdWJkaXYyZF9jdG9yLCAiU3ViZGl2MkQiLCAyLCBKU19DRlVOQ19jb25zdHJ1Y3RvciwgMCk7CiAgICAvKiBzZXQgcHJvdG8uY29uc3RydWN0b3IgYW5kIGN0b3IucHJvdG90eXBlICovCiAgICBKU19TZXRDb25zdHJ1Y3RvcihjdHgsIHN1YmRpdjJkX2NsYXNzLCBzdWJkaXYyZF9wcm90byk7CiAgICBKU19TZXRQcm9wZXJ0eUZ1bmN0aW9uTGlzdChjdHgsIHN1YmRpdjJkX2NsYXNzLCBqc19zdWJkaXYyZF9zdGF0aWNfZnVuY3MsIGNvdW50b2YoanNfc3ViZGl2MmRfc3RhdGljX2Z1bmNzKSk7CiAgfQoKICBpZihtKQogICAgSlNfU2V0TW9kdWxlRXhwb3J0KGN0eCwgbSwgIlN1YmRpdjJEIiwgc3ViZGl2MmRfY2xhc3MpOwoKICByZXR1cm4gMDsKfQoKZXh0ZXJuICJDIiBWSVNJQkxFIHZvaWQKanNfc3ViZGl2MmRfZXhwb3J0KEpTQ29udGV4dCogY3R4LCBKU01vZHVsZURlZiogbSkgewogIEpTX0FkZE1vZHVsZUV4cG9ydChjdHgsIG0sICJTdWJkaXYyRCIpOwp9Cgp2b2lkCmpzX3N1YmRpdjJkX2NvbnN0cnVjdG9yKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlIHBhcmVudCwgY29uc3QgY2hhciogbmFtZSkgewogIGlmKEpTX0lzVW5kZWZpbmVkKHN1YmRpdjJkX2NsYXNzKSkKICAgIGpzX3N1YmRpdjJkX2luaXQoY3R4LCAwKTsKCiAgSlNfU2V0UHJvcGVydHlTdHIoY3R4LCBwYXJlbnQsIG5hbWUgPyBuYW1lIDogIlN1YmRpdjJEIiwgc3ViZGl2MmRfY2xhc3MpOwp9CgojaWYgZGVmaW5lZChKU19TVUJESVYyRF9NT0RVTEUpCiNkZWZpbmUgSlNfSU5JVF9NT0RVTEUgLypWSVNJQkxFKi8ganNfaW5pdF9tb2R1bGUKI2Vsc2UKI2RlZmluZSBKU19JTklUX01PRFVMRSAvKlZJU0lCTEUqLyBqc19pbml0X21vZHVsZV9zdWJkaXYyZAojZW5kaWYKCmV4dGVybiAiQyIgSlNNb2R1bGVEZWYqCkpTX0lOSVRfTU9EVUxFKEpTQ29udGV4dCogY3R4LCBjb25zdCBjaGFyKiBtb2R1bGVfbmFtZSkgewogIEpTTW9kdWxlRGVmKiBtOwogIG0gPSBKU19OZXdDTW9kdWxlKGN0eCwgbW9kdWxlX25hbWUsICZqc19zdWJkaXYyZF9pbml0KTsKICBpZighbSkKICAgIHJldHVybiBOVUxMOwogIGpzX3N1YmRpdjJkX2V4cG9ydChjdHgsIG0pOwogIHJldHVybiBtOwp9AAAAAAAAAABuKgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAbyoAAAAAAABvKgAAAAAAAAAAAAAAAPC/"
				]
			]
		},
		{
			"file": "js_umat.cpp",
			"settings":
			{
				"buffer_size": 29746,
				"line_ending": "Unix"
			},
			"undo_stack":
			[
				[
					3,
					1,
					"cut",
					null,
					"AQAAAORzAAAAAAAA5HMAAAAAAABLAAAAZXh0ZXJuICJDIiBWSVNJQkxFIHZvaWQganNfdW1hdF9leHBvcnQoSlNDb250ZXh0KiBjdHgsIEpTTW9kdWxlRGVmKiBtKSB7Cn0K",
					"AQAAAAAAAAABAAAA5HMAAAAAAAAvdAAAAAAAAAAAAAAAAPC/"
				],
				[
					6,
					1,
					"paste",
					null,
					"AQAAAGFyAAAAAAAArHIAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAYXIAAAAAAABhcgAAAAAAAAAAAAAAAPC/"
				],
				[
					8,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"AQAAAGFyAAAAAAAAYnIAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAYXIAAAAAAABhcgAAAAAAAAAAAAAAAAAA"
				],
				[
					14,
					1,
					"cut",
					null,
					"AQAAAP1zAAAAAAAA/XMAAAAAAAAmAAAAICBKU19BZGRNb2R1bGVFeHBvcnQoY3R4LCBtLCAiVU1hdCIpOwo",
					"AQAAAAAAAAABAAAA/XMAAAAAAAAjdAAAAAAAAAAAAAAAAPC/"
				],
				[
					19,
					1,
					"paste",
					null,
					"AQAAAKtyAAAAAAAA0XIAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAq3IAAAAAAACrcgAAAAAAAAAAAAAAAPC/"
				],
				[
					26,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"BAAAACJ0AAAAAAAAI3QAAAAAAAAAAAAAI3QAAAAAAAAndAAAAAAAAAAAAAAjdAAAAAAAACN0AAAAAAAABAAAACAgICAjdAAAAAAAACV0AAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAInQAAAAAAAAidAAAAAAAAAAAAAAAAPC/"
				],
				[
					27,
					1,
					"paste",
					null,
					"AQAAACV0AAAAAAAAM3QAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAJXQAAAAAAAAldAAAAAAAAAAAAAAAAPC/"
				],
				[
					28,
					1,
					"insert_snippet",
					{
						"contents": "($0)"
					},
					"AQAAADN0AAAAAAAANXQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAM3QAAAAAAAAzdAAAAAAAAAAAAAAAAPC/"
				],
				[
					29,
					1,
					"insert",
					{
						"characters": "ctx,m"
					},
					"BQAAADR0AAAAAAAANXQAAAAAAAAAAAAANXQAAAAAAAA2dAAAAAAAAAAAAAA2dAAAAAAAADd0AAAAAAAAAAAAADd0AAAAAAAAOHQAAAAAAAAAAAAAOHQAAAAAAAA5dAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAANHQAAAAAAAA0dAAAAAAAAAAAAAAAAPC/"
				],
				[
					31,
					1,
					"insert",
					{
						"characters": ";"
					},
					"AQAAADp0AAAAAAAAO3QAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAOnQAAAAAAAA6dAAAAAAAAAAAAAAAAPC/"
				],
				[
					32,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAABJdAAAI2luY2x1ZGUgImpzYmluZGluZ3MuaHBwIgojaW5jbHVkZSAianNfdW1hdC5ocHAiCiNpbmNsdWRlICJqc19zaXplLmhwcCIKI2luY2x1ZGUgImpzX3BvaW50LmhwcCIKI2luY2x1ZGUgImpzX3JlY3QuaHBwIgojaW5jbHVkZSAianNfYXJyYXkuaHBwIgojaW5jbHVkZSAianNfdHlwZWRfYXJyYXkuaHBwIgojaW5jbHVkZSAianNfYWxsb2MuaHBwIgojaW5jbHVkZSAiZ2VvbWV0cnkuaHBwIgojaW5jbHVkZSAidXRpbC5ocHAiCiNpbmNsdWRlICIuLi9xdWlja2pzL2N1dGlscy5oIgojaW5jbHVkZSA8bGlzdD4KI2luY2x1ZGUgPG1hcD4KI2luY2x1ZGUgPGZzdHJlYW0+CgplbnVtIHsKICBQUk9QX0NPTFMgPSAwLAogIFBST1BfUk9XUywKICBQUk9QX0NIQU5ORUxTLAogIFBST1BfVFlQRSwKICBQUk9QX0RFUFRILAogIFBST1BfRU1QVFksCiAgUFJPUF9UT1RBTCwKICBQUk9QX1NJWkUsCiAgUFJPUF9DT05USU5VT1VTLAogIFBST1BfU1VCTUFUUklYLAogIFBST1BfU1RFUCwKICBQUk9QX0VMRU1TSVpFLAogIFBST1BfRUxFTVNJWkUxCn07CgplbnVtIHsKICBNRVRIT0RfQ09MID0gMCwKICBNRVRIT0RfUk9XLAogIE1FVEhPRF9DT0xfUkFOR0UsCiAgTUVUSE9EX1JPV19SQU5HRSwKICBNRVRIT0RfQ0xPTkUsCiAgTUVUSE9EX1JPSSwKICBNRVRIT0RfUkVMRUFTRSwKICBNRVRIT0RfRFVQLAogIE1FVEhPRF9DTEVBUiwKICBNRVRIT0RfUkVTRVQsCiAgTUVUSE9EX1NURVAxLAogIE1FVEhPRF9MT0NBVEVfUk9JLAogIE1FVEhPRF9aRVJPLAogIE1FVEhPRF9PTkUsCiAgTUVUSE9EX1pFUk9TLAogIE1FVEhPRF9PTkVTCn07CgplbnVtIHsgVU1BVF9FWFBSX0FORCA9IDAsIFVNQVRfRVhQUl9PUiwgVU1BVF9FWFBSX1hPUiwgVU1BVF9FWFBSX01VTCB9OwplbnVtIHsgVU1BVF9JVEVSQVRPUl9LRVlTLCBVTUFUX0lURVJBVE9SX1ZBTFVFUywgVU1BVF9JVEVSQVRPUl9FTlRSSUVTIH07CmV4dGVybiAiQyIgewoKc3RhdGljIHZvaWQKanNfdW1hdF9mcmVlX2Z1bmMoSlNSdW50aW1lKiBydCwgdm9pZCogb3BhcXVlLCB2b2lkKiBwdHIpIHsKICBzdGF0aWNfY2FzdDxKU1VNYXREYXRhKj4ob3BhcXVlKS0+cmVsZWFzZSgpOwp9Cn0KCnR5cGVkZWYgc3RydWN0IEpTVU1hdEl0ZXJhdG9yRGF0YSB7CiAgSlNWYWx1ZSBvYmosIGJ1ZjsKICB1aW50MzJfdCByb3csIGNvbDsKICBpbnQgbWFnaWM7Cn0gSlNVTWF0SXRlcmF0b3JEYXRhOwoKVklTSUJMRSBKU1VNYXREYXRhKgpqc191bWF0X2RhdGEoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB2YWwpIHsKICByZXR1cm4gc3RhdGljX2Nhc3Q8SlNVTWF0RGF0YSo+KEpTX0dldE9wYXF1ZTIoY3R4LCB2YWwsIGpzX3VtYXRfY2xhc3NfaWQpKTsKfQoKc3RhdGljIGlubGluZSBzdGQ6OnZlY3RvcjxpbnQ+CmpzX3VtYXRfc2l6ZXMoY29uc3QgSlNVTWF0RGF0YSYgdW1hdCkgewogIGNvbnN0IGN2OjpNYXRTaXplIHNpemUodW1hdC5zaXplKTsKICBzdGQ6OnZlY3RvcjxpbnQ+IHNpemVzOwogIGlmKHVtYXQuZGltcyA9PSAyKSB7CiAgICBzaXplcy5wdXNoX2JhY2sodW1hdC5yb3dzKTsKICAgIHNpemVzLnB1c2hfYmFjayh1bWF0LmNvbHMpOwogIH0gZWxzZSB7CiAgICBzdGQ6OmNvcHkoJnNpemVbMF0sICZzaXplW3NpemUuZGltcygpXSwgc3RkOjpiYWNrX2luc2VydGVyKHNpemVzKSk7CiAgfQogIHJldHVybiBzaXplczsKfQoKc3RhdGljIGlubGluZSBzdGQ6OnZlY3RvcjxzdGQ6OnN0cmluZz4KanNfdW1hdF9kaW1lbnNpb25zKGNvbnN0IEpTVU1hdERhdGEmIHVtYXQpIHsKICBzdGQ6OnZlY3RvcjxpbnQ+IHNpemVzID0ganNfdW1hdF9zaXplcyh1bWF0KTsKICBzdGQ6OnZlY3RvcjxzdGQ6OnN0cmluZz4gZGltZW5zaW9uczsKCiAgc3RkOjp0cmFuc2Zvcm0oc2l6ZXMuY2JlZ2luKCksCiAgICAgICAgICAgICAgICAgc2l6ZXMuY2VuZCgpLAogICAgICAgICAgICAgICAgIHN0ZDo6YmFja19pbnNlcnRlcihkaW1lbnNpb25zKSwKICAgICAgICAgICAgICAgICBzdGF0aWNfY2FzdDxzdGQ6OnN0cmluZyAoKikoaW50KT4oJnN0ZDo6dG9fc3RyaW5nKSk7CiAgcmV0dXJuIGRpbWVuc2lvbnM7Cn0KCiNpZmRlZiBERUJVR19VTUFUCnN0YXRpYyBpbmxpbmUgc3RkOjptYXA8dm9pZCosIHN0ZDo6dmVjdG9yPEpTVU1hdERhdGEqPj4KanNfdW1hdF9kYXRhKHZvaWQqIGRhdGEgPSBudWxscHRyKSB7CiAgc3RkOjptYXA8dm9pZCosIHN0ZDo6dmVjdG9yPEpTVU1hdERhdGEqPj4gcmV0OwogIGZvcihhdXRvIHVtYXQgOiB1bWF0X2xpc3QpIHsKICAgIGNvbnN0IGF1dG8gdSA9IHVtYXQtPnU7CiAgICBpZih1ICE9IG51bGxwdHIgJiYgKGRhdGEgPT0gbnVsbHB0ciB8fCB1ID09IGRhdGEpKSB7CiAgICAgIHZvaWQqIGRhdGEgPSB1OwogICAgICBpZihyZXQuZmluZChkYXRhKSA9PSByZXQuZW5kKCkpIHsKICAgICAgICBzdGQ6OnZlY3RvcjxKU1VNYXREYXRhKj4gdnt1bWF0fTsKICAgICAgICByZXQuaW5zZXJ0KHtkYXRhLCB2fSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0W2RhdGFdLnB1c2hfYmFjayh1bWF0KTsKICAgICAgfQogICAgfQogIH0KICByZXR1cm4gcmV0Owp9CgpzdGF0aWMgaW5saW5lIHZvaWQKanNfdW1hdF9wcmludF9kYXRhKGNvbnN0IHN0ZDo6bWFwPHZvaWQqLCBzdGQ6OnZlY3RvcjxKU1VNYXREYXRhKj4+JiBkYXRhLCBzaXplX3QgbWluU2l6ZSA9IDEpIHsKCiAgZm9yKGNvbnN0IGF1dG8mIFtrZXksIHZhbHVlXSA6IGRhdGEpIHsKCiAgICBpZih2YWx1ZS5zaXplKCkgPj0gbWluU2l6ZSkgewogICAgICBzdGQ6OmNlcnIgPDwgImRhdGEgQCIgPDwga2V5IDw8ICIgPSI7CgogICAgICBmb3IoY29uc3QgYXV0byYgcHRyIDogdmFsdWUpIHsKICAgICAgICBzaXplX3QgcmVmY291bnQgPSBwdHItPnUgPyBwdHItPnUtPnJlZmNvdW50IDogMDsKICAgICAgICBzdGQ6OmNlcnIgPDwgIiBVTWF0IEAiIDw8IHN0YXRpY19jYXN0PHZvaWQqPihwdHIpOwogICAgICAgIGlmKHJlZmNvdW50ID4gMSkKICAgICAgICAgIHN0ZDo6Y2VyciA8PCAiIChyZWZjb3VudD0iIDw8IHJlZmNvdW50IDw8ICIpIjsKICAgICAgfQogICAgICBzdGQ6OmNlcnIgPDwgc3RkOjplbmRsOwogICAgfQogIH0KfQoKc3RhdGljIGlubGluZSB2b2lkCmpzX3VtYXRfZHVtcChKU1VNYXREYXRhKiBjb25zdCBzKSB7CiAgYXV0byBwb3NMaXN0ID0gc3RkOjpmaW5kKHVtYXRfbGlzdC5jYmVnaW4oKSwgdW1hdF9saXN0LmNlbmQoKSwgcyk7CiAgYm9vbCBpbkxpc3QgPSBwb3NMaXN0ICE9IHVtYXRfbGlzdC5jZW5kKCk7CiAgYm9vbCBpbkZyZWVkID0gc3RkOjpmaW5kKHVtYXRfZnJlZWQuY2JlZ2luKCksIHVtYXRfZnJlZWQuY2VuZCgpLCBzKSAhPSB1bWF0X2ZyZWVkLmNlbmQoKTsKICBjb25zdCBhdXRvIHUgPSBzLT51OwogIHN0ZDo6Y2VyciA8PCAiIFVNYXQiCiAgICAgICAgICAgIDw8ICJbIiA8PCAocG9zTGlzdCAtIHVtYXRfbGlzdC5jYmVnaW4oKSkgPDwgIl09IiA8PCBzdGF0aWNfY2FzdDx2b2lkKj4ocyk7CgogIGlmKGluTGlzdCkKICAgIHN0ZDo6Y2VyciA8PCAiLCBpbkxpc3Q9IiA8PCAoaW5MaXN0ID8gInRydWUiIDogImZhbHNlIik7CiAgaWYoaW5GcmVlZCkKICAgIHN0ZDo6Y2VyciA8PCAiLCBpbkZyZWVkPSIgPDwgKGluRnJlZWQgPyAidHJ1ZSIgOiAiZmFsc2UiKTsKCiAgaWYocy0+cm93cyB8fCBzLT5jb2xzIHx8IHMtPmNoYW5uZWxzKCkgPiAxIHx8IHMtPmRlcHRoKCkgPiAwKSB7CiAgICBzdGQ6OmNlcnIgPDwgIiwgcm93cz0iIDw8IHMtPnJvd3M7CiAgICBzdGQ6OmNlcnIgPDwgIiwgY29scz0iIDw8IHMtPmNvbHM7CiAgICBzdGQ6OmNlcnIgPDwgIiwgY2hhbm5lbHM9IiA8PCBzLT5jaGFubmVscygpOwogICAgc3RkOjpjZXJyIDw8ICIsIGRlcHRoPSIgPDwgcy0+ZGVwdGgoKTsKICB9CgogIGlmKHUgIT0gbnVsbHB0cikgewoKICAgIC8vIGlmKHUtPnJlZmNvdW50KQogICAgc3RkOjpjZXJyIDw8ICIsIHJlZmNvdW50PSIgPDwgdS0+cmVmY291bnQ7CiAgICBpZih1LT5kYXRhKQogICAgICBzdGQ6OmNlcnIgPDwgIiwgZGF0YT0iIDw8IHN0YXRpY19jYXN0PHZvaWQqPih1LT5kYXRhKTsKICAgIGlmKHUtPnNpemUpCiAgICAgIHN0ZDo6Y2VyciA8PCAiLCBzaXplPSIgPDwgdS0+c2l6ZTsKICB9Cn0KI2VuZGlmCgpWSVNJQkxFIEpTVmFsdWUKanNfdW1hdF9uZXcoSlNDb250ZXh0KiBjdHgsIHVpbnQzMl90IHJvd3MsIHVpbnQzMl90IGNvbHMsIGludCB0eXBlKSB7CiAgSlNWYWx1ZSByZXQ7CiAgSlNVTWF0RGF0YSogdW07CgogIGlmKEpTX0lzVW5kZWZpbmVkKHVtYXRfcHJvdG8pKQogICAganNfdW1hdF9pbml0KGN0eCwgTlVMTCk7CgogIHJldCA9IEpTX05ld09iamVjdFByb3RvQ2xhc3MoY3R4LCB1bWF0X3Byb3RvLCBqc191bWF0X2NsYXNzX2lkKTsKCiAgdW0gPSBqc19hbGxvY2F0ZTxjdjo6VU1hdD4oY3R4KTsKCiAgaWYoY29scyB8fCByb3dzIHx8IHR5cGUpIHsKICAgIG5ldyh1bSkgY3Y6OlVNYXQocm93cywgY29scywgdHlwZSk7CiAgfSBlbHNlIHsKICAgIG5ldyh1bSkgY3Y6OlVNYXQoKTsKICB9CgogIC8vIHVtLT5hZGRyZWYoKTsKI2lmZGVmIERFQlVHX1VNQVQKICBzdGQ6OmNlcnIgPDwgKChjb2xzID4gMCB8fCByb3dzID4gMCkgPyAianNfdW1hdF9uZXcgKGgsdykiIDogImpzX3VtYXRfbmV3ICAgICAgIik7CiAganNfdW1hdF9kdW1wKHVtKTsKICBzdGQ6OmNlcnIgPDwgc3RkOjplbmRsOwojZW5kaWYKCiAgSlNfU2V0T3BhcXVlKHJldCwgdW0pOwogIHJldHVybiByZXQ7Cn0KCnN0YXRpYyBzdGQ6OnBhaXI8SlNTaXplRGF0YTx1aW50MzJfdD4sIGludD4KanNfdW1hdF9wYXJhbXMoSlNDb250ZXh0KiBjdHgsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QqIGFyZ3YpIHsKICBKU1NpemVEYXRhPHVpbnQzMl90PiBzaXplOwogIGludDMyX3QgdHlwZSA9IDA7CiAgaWYoYXJnYyA+IDApIHsKICAgIGlmKGpzX3NpemVfcmVhZChjdHgsIGFyZ3ZbMF0sICZzaXplKSkgewogICAgICBhcmd2Kys7CiAgICAgIGFyZ2MtLTsKICAgIH0gZWxzZSB7CiAgICAgIEpTX1RvVWludDMyKGN0eCwgJnNpemUuaGVpZ2h0LCBhcmd2WzBdKTsKICAgICAgSlNfVG9VaW50MzIoY3R4LCAmc2l6ZS53aWR0aCwgYXJndlsxXSk7CiAgICAgIGFyZ3YgKz0gMjsKICAgICAgYXJnYyAtPSAyOwogICAgfQogICAgaWYoYXJnYyA+IDApIHsKICAgICAgaWYoIUpTX1RvSW50MzIoY3R4LCAmdHlwZSwgYXJndlswXSkpIHsKICAgICAgICBhcmd2Kys7CiAgICAgICAgYXJnYy0tOwogICAgICB9CiAgICB9CiAgfQogIHJldHVybiBzdGQ6Om1ha2VfcGFpcihzaXplLCB0eXBlKTsKfQoKc3RhdGljIEpTVmFsdWUKanNfdW1hdF9jdG9yKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgbmV3X3RhcmdldCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCogYXJndikgewoKICBjb25zdCBhdXRvJiBbc2l6ZSwgdHlwZV0gPSBqc191bWF0X3BhcmFtcyhjdHgsIGFyZ2MsIGFyZ3YpOwoKICByZXR1cm4ganNfdW1hdF9uZXcoY3R4LCBzaXplLmhlaWdodCwgc2l6ZS53aWR0aCwgdHlwZSk7Cn0KCnZvaWQKanNfdW1hdF9maW5hbGl6ZXIoSlNSdW50aW1lKiBydCwgSlNWYWx1ZSB2YWwpIHsKICBKU1VNYXREYXRhKiB1bTsKCiAgaWYoKHVtID0gc3RhdGljX2Nhc3Q8SlNVTWF0RGF0YSo+KEpTX0dldE9wYXF1ZSh2YWwsIGpzX3VtYXRfY2xhc3NfaWQpKSkpIHsKICAgIHVtLT5yZWxlYXNlKCk7CiAgICBqc19kZWFsbG9jYXRlKHJ0LCB1bSk7CiAgfQogIC8vIEpTX0ZyZWVWYWx1ZVJUKHJ0LCB2YWwpOwp9CgpzdGF0aWMgSlNWYWx1ZQpqc191bWF0X2Z1bmNzKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QqIGFyZ3YsIGludCBtYWdpYykgewogIEpTVmFsdWUgcmV0ID0gSlNfVU5ERUZJTkVEOwogIGludDY0X3QgaSA9IC0xLCBpMiA9IC0xOwogIEpTUG9pbnREYXRhPGRvdWJsZT4gcHQ7CiAgSlNVTWF0RGF0YSogdW0gPSBqc191bWF0X2RhdGEoY3R4LCB0aGlzX3ZhbCk7CgogIGlmKGFyZ2MgPiAwKSB7CiAgICBKU19Ub0ludDY0KGN0eCwgJmksIGFyZ3ZbMF0pOwogICAgcHQgPSBqc19wb2ludF9nZXQoY3R4LCBhcmd2WzBdKTsKICAgIGlmKGFyZ2MgPiAxKSB7CiAgICAgIEpTX1RvSW50NjQoY3R4LCAmaTIsIGFyZ3ZbMV0pOwogICAgfQogIH0KICBzd2l0Y2gobWFnaWMpIHsKICAgIGNhc2UgTUVUSE9EX0NPTDogewogICAgICByZXQgPSBqc191bWF0X3dyYXAoY3R4LCB1bS0+Y29sKGkpKTsKICAgICAgYnJlYWs7CiAgICB9CiAgICBjYXNlIE1FVEhPRF9ST1c6IHsKICAgICAgcmV0ID0ganNfdW1hdF93cmFwKGN0eCwgdW0tPnJvdyhpKSk7CiAgICAgIGJyZWFrOwogICAgfQogICAgY2FzZSBNRVRIT0RfQ09MX1JBTkdFOiB7CiAgICAgIHJldCA9IGpzX3VtYXRfd3JhcChjdHgsIHVtLT5jb2xSYW5nZShpLCBpMikpOwogICAgICBicmVhazsKICAgIH0KICAgIGNhc2UgTUVUSE9EX1JPV19SQU5HRTogewogICAgICByZXQgPSBqc191bWF0X3dyYXAoY3R4LCB1bS0+cm93UmFuZ2UoaSwgaTIpKTsKICAgICAgYnJlYWs7CiAgICB9CiAgICBjYXNlIE1FVEhPRF9DTE9ORTogewogICAgICByZXQgPSBqc191bWF0X3dyYXAoY3R4LCB1bS0+Y2xvbmUoKSk7CiAgICAgIGJyZWFrOwogICAgfQogICAgY2FzZSBNRVRIT0RfUk9JOiB7CiAgICAgIEpTUmVjdERhdGE8ZG91YmxlPiByZWN0ID0gezAsIDAsIDAsIDB9OwoKICAgICAgaWYoYXJnYyA+IDApCiAgICAgICAgcmVjdCA9IGpzX3JlY3RfZ2V0KGN0eCwgYXJndlswXSk7CgogICAgICByZXQgPSBqc191bWF0X3dyYXAoY3R4LCAoKnVtKShyZWN0KSk7CiAgICAgIGJyZWFrOwogICAgfQogICAgY2FzZSBNRVRIT0RfUkVMRUFTRTogewogICAgICB1bS0+cmVsZWFzZSgpOwogICAgICBicmVhazsKICAgIH0KICAgIGNhc2UgTUVUSE9EX0RVUDogewogICAgICByZXQgPSBqc191bWF0X3dyYXAoY3R4LCAqdW0pOwogICAgICBicmVhazsKICAgIH0KICAgIGNhc2UgTUVUSE9EX0NMRUFSOiB7CiAgICAgICp1bSA9IGN2OjpVTWF0Ojp6ZXJvcyh1bS0+cm93cywgdW0tPmNvbHMsIHVtLT50eXBlKCkpOwogICAgICBicmVhazsKICAgIH0KICAgIGNhc2UgTUVUSE9EX1JFU0VUOiB7CiAgICAgICp1bSA9IGN2OjpVTWF0KCk7CiAgICAgIGJyZWFrOwogICAgfQogICAgY2FzZSBNRVRIT0RfU1RFUDE6IHsKICAgICAgaW50MzJfdCBpID0gMDsKCiAgICAgIEpTX1RvSW50MzIoY3R4LCAmaSwgYXJndlswXSk7CiAgICAgIHJldCA9IEpTX05ld0ludDY0KGN0eCwgdW0tPnN0ZXAxKGkpKTsKICAgICAgYnJlYWs7CiAgICB9CiAgICBjYXNlIE1FVEhPRF9MT0NBVEVfUk9JOiB7CiAgICAgIGN2OjpTaXplIHdob2xlU2l6ZTsKICAgICAgY3Y6OlBvaW50IG9mczsKICAgICAgdW0tPmxvY2F0ZVJPSSh3aG9sZVNpemUsIG9mcyk7CiAgICAgIGpzX3NpemVfd3JpdGUoY3R4LCBhcmd2WzBdLCB3aG9sZVNpemUpOwogICAgICBqc19wb2ludF93cml0ZShjdHgsIGFyZ3ZbMF0sIG9mcyk7CiAgICAgIGJyZWFrOwogICAgfQoKICAgIGRlZmF1bHQ6IHsKICAgICAgcmV0ID0gSlNfRVhDRVBUSU9OOwogICAgICBicmVhazsKICAgIH0KICB9CgogIHJldHVybiByZXQ7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX3VtYXRfaW5pdChKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2LCBpbnQgbWFnaWMpIHsKICBKU1ZhbHVlIHJldCA9IEpTX1VOREVGSU5FRDsKICBKU1VNYXREYXRhKiB1bTsKCiAgYXV0byBbc2l6ZSwgdHlwZV0gPSBqc191bWF0X3BhcmFtcyhjdHgsIGFyZ2MsIGFyZ3YpOwoKICBpZigodW0gPSBqc191bWF0X2RhdGEoY3R4LCB0aGlzX3ZhbCkpKSB7CiAgICBpZihzaXplLndpZHRoID09IDAgfHwgc2l6ZS5oZWlnaHQgPT0gMCkgewogICAgICBpZih1bS0+cm93cyAmJiB1bS0+Y29scykgewogICAgICAgIHNpemUud2lkdGggPSB1bS0+Y29sczsKICAgICAgICBzaXplLmhlaWdodCA9IHVtLT5yb3dzOwogICAgICAgIHR5cGUgPSB1bS0+dHlwZSgpOwogICAgICB9CiAgICB9CiAgICByZXQgPSBKU19EdXBWYWx1ZShjdHgsIHRoaXNfdmFsKTsKICB9IGVsc2UgaWYoc2l6ZS53aWR0aCA+IDAgJiYgc2l6ZS5oZWlnaHQgPiAwKSB7CiAgICByZXQgPSBqc191bWF0X25ldyhjdHgsIHNpemUuaGVpZ2h0LCBzaXplLndpZHRoLCB0eXBlKTsKCiAgICB1bSA9IGpzX3VtYXRfZGF0YShjdHgsIHJldCk7CiAgfSBlbHNlIHsKICAgIHJldHVybiBKU19FWENFUFRJT047CiAgfQoKICBjdjo6VU1hdCYgdW1hdCA9ICp1bTsKCiAgc3dpdGNoKG1hZ2ljKSB7CiAgICBjYXNlIDA6IHsKICAgICAgdW1hdCA9IGN2OjpVTWF0Ojp6ZXJvcyhzaXplLCB0eXBlKTsKICAgICAgYnJlYWs7CiAgICB9CiAgICBjYXNlIDE6IHsKICAgICAgdW1hdCA9IGN2OjpVTWF0OjpvbmVzKHNpemUsIHR5cGUpOwogICAgICBicmVhazsKICAgIH0KICB9CgogIHJldHVybiByZXQ7Cn0KCnRlbXBsYXRlPGNsYXNzIFQ+CnZvaWQKanNfdW1hdF9nZXQoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgdWludDMyX3Qgcm93LCB1aW50MzJfdCBjb2wsIFQmIHZhbHVlKSB7CiAgY3Y6OlVNYXQqIHVtID0ganNfdW1hdF9kYXRhKGN0eCwgdGhpc192YWwpOwoKICBpZih1bSkKICAgIHZhbHVlID0gbWF0X2F0PFQ+KCp1bSwgcm93LCBjb2wpOwogIGVsc2UKICAgIHZhbHVlID0gVCgpOwp9CgpzdGF0aWMgSlNWYWx1ZQpqc191bWF0X2dldChKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCB1aW50MzJfdCByb3csIHVpbnQzMl90IGNvbCkgewogIEpTVmFsdWUgcmV0ID0gSlNfRVhDRVBUSU9OOwogIGN2OjpVTWF0KiB1bSA9IGpzX3VtYXRfZGF0YShjdHgsIHRoaXNfdmFsKTsKCiAgaWYodW0pIHsKICAgIHVpbnQzMl90IGJ5dGVzID0gKDEgPDwgdW0tPmRlcHRoKCkpICogdW0tPmNoYW5uZWxzKCk7CiAgICBzaXplX3QgY2hhbm5lbHMgPSBtYXRfY2hhbm5lbHMoKnVtKTsKCiAgICBpZihjaGFubmVscyA9PSAxKSB7CiAgICAgIHN3aXRjaCh1bS0+dHlwZSgpKSB7CgogICAgICAgIGNhc2UgQ1ZfOFVDMTogewogICAgICAgICAgdWludDhfdCB2YWx1ZTsKICAgICAgICAgIGpzX3VtYXRfZ2V0KGN0eCwgdGhpc192YWwsIHJvdywgY29sLCB2YWx1ZSk7CiAgICAgICAgICByZXQgPSBKU19OZXdVaW50MzIoY3R4LCB2YWx1ZSk7CiAgICAgICAgICBicmVhazsKICAgICAgICB9CgogICAgICAgIGNhc2UgQ1ZfMTZVQzE6IHsKICAgICAgICAgIHVpbnQxNl90IHZhbHVlOwogICAgICAgICAganNfdW1hdF9nZXQoY3R4LCB0aGlzX3ZhbCwgcm93LCBjb2wsIHZhbHVlKTsKICAgICAgICAgIHJldCA9IEpTX05ld1VpbnQzMihjdHgsIHZhbHVlKTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KICAgICAgICBjYXNlIENWXzMyU0MxOiB7CiAgICAgICAgICBpbnQzMl90IHZhbHVlOwogICAgICAgICAganNfdW1hdF9nZXQoY3R4LCB0aGlzX3ZhbCwgcm93LCBjb2wsIHZhbHVlKTsKICAgICAgICAgIHJldCA9IEpTX05ld0ludDMyKGN0eCwgdmFsdWUpOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQogICAgICAgIGNhc2UgQ1ZfMzJGQzE6IHsKICAgICAgICAgIGZsb2F0IHZhbHVlOwogICAgICAgICAganNfdW1hdF9nZXQoY3R4LCB0aGlzX3ZhbCwgcm93LCBjb2wsIHZhbHVlKTsKICAgICAgICAgIHJldCA9IEpTX05ld0Zsb2F0NjQoY3R4LCB2YWx1ZSk7CiAgICAgICAgICBicmVhazsKICAgICAgICB9CiAgICAgICAgY2FzZSBDVl82NEZDMTogewogICAgICAgICAgZG91YmxlIHZhbHVlOwogICAgICAgICAganNfdW1hdF9nZXQoY3R4LCB0aGlzX3ZhbCwgcm93LCBjb2wsIHZhbHVlKTsKICAgICAgICAgIHJldCA9IEpTX05ld0Zsb2F0NjQoY3R4LCB2YWx1ZSk7CiAgICAgICAgICBicmVhazsKICAgICAgICB9CiAgICAgICAgZGVmYXVsdDogewogICAgICAgICAgcmV0ID0gSlNfVGhyb3dUeXBlRXJyb3IoY3R4LCAiSW52YWxpZCBVTWF0IHR5cGUgJXUiLCB1bS0+dHlwZSgpKTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KICAgICAgfQoKICAgICAgcmV0dXJuIHJldDsKICAgIH0KICB9CiAgcmV0dXJuIEpTX1VOREVGSU5FRDsKfQoKc3RhdGljIGludApqc191bWF0X2dldF93aChKU0NvbnRleHQqIGN0eCwgSlNNYXREaW1lbnNpb25zKiBzaXplLCBKU1ZhbHVlQ29uc3Qgb2JqKSB7CiAgY3Y6OlVNYXQqIHVtID0ganNfdW1hdF9kYXRhKGN0eCwgb2JqKTsKCiAgaWYodW0pIHsKICAgIHNpemUtPnJvd3MgPSB1bS0+cm93czsKICAgIHNpemUtPmNvbHMgPSB1bS0+Y29sczsKICAgIHJldHVybiAxOwogIH0KICByZXR1cm4gMDsKfQoKc3RhdGljIEpTVmFsdWUKanNfdW1hdF9hdChKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2KSB7CiAgSlNVTWF0RGF0YSogdW0gPSBqc191bWF0X2RhdGEoY3R4LCB0aGlzX3ZhbCk7CiAgaWYoIXVtKQogICAgcmV0dXJuIEpTX0VYQ0VQVElPTjsKICBKU1BvaW50RGF0YTxkb3VibGU+IHB0OwogIEpTVmFsdWUgcmV0OwogIHVpbnQzMl90IHJvdyA9IDAsIGNvbCA9IDA7CiAgaWYoanNfcG9pbnRfcmVhZChjdHgsIGFyZ3ZbMF0sICZwdCkpIHsKICAgIGNvbCA9IHB0Lng7CiAgICByb3cgPSBwdC55OwogIH0gZWxzZSBpZihhcmdjID49IDIgJiYgSlNfSXNOdW1iZXIoYXJndlswXSkgJiYgSlNfSXNOdW1iZXIoYXJndlsxXSkpIHsKICAgIEpTX1RvVWludDMyKGN0eCwgJnJvdywgYXJndlswXSk7CiAgICBKU19Ub1VpbnQzMihjdHgsICZjb2wsIGFyZ3ZbMV0pOwogICAgYXJnYyAtPSAyOwogICAgYXJndiArPSAyOwogIH0gZWxzZSBpZihhcmdjID49IDEgJiYgSlNfSXNOdW1iZXIoYXJndlswXSkpIHsKICAgIEpTTWF0RGltZW5zaW9ucyBkaW0gPSB7c3RhdGljX2Nhc3Q8dWludDMyX3Q+KHVtLT5yb3dzKSwgc3RhdGljX2Nhc3Q8dWludDMyX3Q+KHVtLT5jb2xzKX07CiAgICB1aW50MzJfdCBpZHg7CgogICAgSlNfVG9VaW50MzIoY3R4LCAmaWR4LCBhcmd2WzBdKTsKICAgIHJvdyA9IGlkeCAvIGRpbS5jb2xzOwogICAgY29sID0gaWR4ICUgZGltLmNvbHM7CiAgfQoKICByZXR1cm4ganNfdW1hdF9nZXQoY3R4LCB0aGlzX3ZhbCwgcm93LCBjb2wpOwp9CgpzdGF0aWMgSlNWYWx1ZQpqc191bWF0X3NldChKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2KSB7CiAgY3Y6OlVNYXQqIHVtID0ganNfdW1hdF9kYXRhKGN0eCwgdGhpc192YWwpOwogIHVpbnQzMl90IGJ5dGVzOwogIGlmKCF1bSkKICAgIHJldHVybiBKU19FWENFUFRJT047CgogIEpTUG9pbnREYXRhPGRvdWJsZT4gcHQ7CiAgSlNWYWx1ZSByZXQ7CiAgaW50MzJfdCBjb2wgPSAtMSwgcm93ID0gLTE7CgogIGlmKGpzX3BvaW50X3JlYWQoY3R4LCBhcmd2WzBdLCAmcHQpKSB7CiAgICBjb2wgPSBwdC54OwogICAgcm93ID0gcHQueTsKICAgIGFyZ2MtLTsKICAgIGFyZ3YrKzsKICB9IGVsc2UgewogICAgaWYoYXJnYyA+PSAxKSB7CiAgICAgIEpTX1RvSW50MzIoY3R4LCAmcm93LCBhcmd2WzBdKTsKICAgICAgYXJnYy0tOwogICAgICBhcmd2Kys7CiAgICB9CiAgICBpZihhcmdjID49IDEpIHsKICAgICAgSlNfVG9JbnQzMihjdHgsICZjb2wsIGFyZ3ZbMF0pOwogICAgICBhcmdjLS07CiAgICAgIGFyZ3YrKzsKICAgIH0KICB9CiAgYnl0ZXMgPSAoMSA8PCB1bS0+ZGVwdGgoKSkgKiB1bS0+Y2hhbm5lbHMoKTsKICBpZih1bS0+dHlwZSgpID09IENWXzMyRkMxKSB7CiAgICBkb3VibGUgZGF0YTsKICAgIGlmKEpTX1RvRmxvYXQ2NChjdHgsICZkYXRhLCBhcmd2WzBdKSkKICAgICAgcmV0dXJuIEpTX0VYQ0VQVElPTjsKICAgIG1hdF9hdDxmbG9hdD4oKnVtLCByb3csIGNvbCkgPSAoZmxvYXQpZGF0YTsKICB9IGVsc2UgaWYoYnl0ZXMgPD0gc2l6ZW9mKHVpbnQpKSB7CiAgICB1aW50MzJfdCBtYXNrID0gKDFMVSA8PCAoYnl0ZXMgKiA4KSkgLSAxOwogICAgdWludDMyX3QgZGF0YTsKICAgIGlmKEpTX1RvVWludDMyKGN0eCwgJmRhdGEsIGFyZ3ZbMF0pKQogICAgICByZXR1cm4gSlNfRVhDRVBUSU9OOwoKICAgIGlmKGJ5dGVzIDw9IDEpIHsKICAgICAgdWludDhfdCogcCA9ICZtYXRfYXQ8dWludDhfdD4oKnVtLCByb3csIGNvbCk7CiAgICAgICpwID0gKHVpbnQ4X3QpZGF0YSAmIG1hc2s7CiAgICB9IGVsc2UgaWYoYnl0ZXMgPD0gMikgewogICAgICB1aW50MTZfdCogcCA9ICZtYXRfYXQ8dWludDE2X3Q+KCp1bSwgcm93LCBjb2wpOwogICAgICAqcCA9ICh1aW50MTZfdClkYXRhICYgbWFzazsKCiAgICB9IGVsc2UgaWYoYnl0ZXMgPD0gNCkgewogICAgICB1aW50KiBwID0gJm1hdF9hdDx1aW50PigqdW0sIHJvdywgY29sKTsKICAgICAgKnAgPSAodWludClkYXRhICYgbWFzazsKICAgIH0KCiAgfSBlbHNlCiAgICByZXR1cm4gSlNfVU5ERUZJTkVEOwogIHJldHVybiBKU19VTkRFRklORUQ7Cn0KCnRlbXBsYXRlPGNsYXNzIFQ+CnR5cGVuYW1lIHN0ZDo6ZW5hYmxlX2lmPHN0ZDo6aXNfaW50ZWdyYWw8VD46OnZhbHVlLCB2b2lkPjo6dHlwZQpqc191bWF0X3ZlY3Rvcl9nZXQoSlNDb250ZXh0KiBjdHgsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QqIGFyZ3YsIHN0ZDo6dmVjdG9yPFQ+JiBvdXRwdXQsIHN0ZDo6dmVjdG9yPGJvb2w+JiBkZWZpbmVkKSB7CiAgb3V0cHV0LnJlc2l6ZShzdGF0aWNfY2FzdDxzaXplX3Q+KGFyZ2MpKTsKICBkZWZpbmVkLnJlc2l6ZShzdGF0aWNfY2FzdDxzaXplX3Q+KGFyZ2MpKTsKICBmb3IoaW50IGkgPSAwOyBpIDwgYXJnYzsgaSsrKSB7CiAgICB1aW50MzJfdCB2YWwgPSAwOwogICAgYm9vbCBpc0RlZiA9IEpTX0lzTnVtYmVyKGFyZ3ZbaV0pICYmICFKU19Ub1VpbnQzMihjdHgsICZ2YWwsIGFyZ3ZbaV0pOwoKICAgIG91dHB1dFtpXSA9IHZhbDsKICAgIGRlZmluZWRbaV0gPSBpc0RlZjsKICB9Cn0KCnRlbXBsYXRlPGNsYXNzIFQ+CnR5cGVuYW1lIHN0ZDo6ZW5hYmxlX2lmPHN0ZDo6aXNfZmxvYXRpbmdfcG9pbnQ8VD46OnZhbHVlLCB2b2lkPjo6dHlwZQpqc191bWF0X3ZlY3Rvcl9nZXQoSlNDb250ZXh0KiBjdHgsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QqIGFyZ3YsIHN0ZDo6dmVjdG9yPFQ+JiBvdXRwdXQsIHN0ZDo6dmVjdG9yPGJvb2w+JiBkZWZpbmVkKSB7CiAgb3V0cHV0LnJlc2l6ZShzdGF0aWNfY2FzdDxzaXplX3Q+KGFyZ2MpKTsKICBkZWZpbmVkLnJlc2l6ZShzdGF0aWNfY2FzdDxzaXplX3Q+KGFyZ2MpKTsKICBmb3IoaW50IGkgPSAwOyBpIDwgYXJnYzsgaSsrKSB7CiAgICBkb3VibGUgdmFsID0gMDsKICAgIGJvb2wgaXNEZWYgPSBKU19Jc051bWJlcihhcmd2W2ldKSAmJiAhSlNfVG9GbG9hdDY0KGN0eCwgJnZhbCwgYXJndltpXSk7CgogICAgb3V0cHV0W2ldID0gdmFsOwogICAgZGVmaW5lZFtpXSA9IGlzRGVmOwogIH0KfQoKdGVtcGxhdGU8Y2xhc3MgVD4KdHlwZW5hbWUgc3RkOjplbmFibGVfaWY8c3RkOjppc19pbnRlZ3JhbDx0eXBlbmFtZSBUOjp2YWx1ZV90eXBlPjo6dmFsdWUsIHZvaWQ+Ojp0eXBlCmpzX3VtYXRfdmVjdG9yX2dldChKU0NvbnRleHQqIGN0eCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCogYXJndiwgc3RkOjp2ZWN0b3I8VD4mIG91dHB1dCwgc3RkOjp2ZWN0b3I8Ym9vbD4mIGRlZmluZWQpIHsKICBjb25zdCBzaXplX3QgYml0cyA9IChzaXplb2YodHlwZW5hbWUgVDo6dmFsdWVfdHlwZSkgKiA4KTsKICBjb25zdCBzaXplX3QgbiA9IFQ6OmNoYW5uZWxzOwogIG91dHB1dC5yZXNpemUoc3RhdGljX2Nhc3Q8c2l6ZV90PihhcmdjKSk7CiAgZGVmaW5lZC5yZXNpemUoc3RhdGljX2Nhc3Q8c2l6ZV90PihhcmdjKSk7CiAgZm9yKGludCBpID0gMDsgaSA8IGFyZ2M7IGkrKykgewogICAgZG91YmxlIHZhbCA9IDA7CiAgICBib29sIGlzRGVmID0gSlNfSXNOdW1iZXIoYXJndltpXSkgJiYgIUpTX1RvRmxvYXQ2NChjdHgsICZ2YWwsIGFyZ3ZbaV0pOwogICAgaWYoaXNEZWYpIHsKICAgICAgY29uc3QgdWludDY0X3QgbWFzayA9ICgxVSA8PCBiaXRzKSAtIDE7CiAgICAgIHVpbnQ2NF90IGl2YWwgPSB2YWw7CiAgICAgIGZvcihpbnQgaiA9IDA7IGogPCBuOyBqKyspIHsKICAgICAgICBvdXRwdXRbaV1bal0gPSBpdmFsICYgbWFzazsKICAgICAgICBpdmFsID4+PSBiaXRzOwogICAgICB9CiAgICB9CiAgICBkZWZpbmVkW2ldID0gaXNEZWY7CiAgfQp9OwoKdGVtcGxhdGU8Y2xhc3MgVD4Kc3RhdGljIHN0ZDo6dmVjdG9yPFQ+CmpzX3VtYXRfc2V0X3ZlY3RvcihKU0NvbnRleHQqIGN0eCwgSlNVTWF0RGF0YSogdW0sIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QqIGFyZ3YpIHsKICBKU01hdERpbWVuc2lvbnMgZGltID0ge3N0YXRpY19jYXN0PHVpbnQzMl90Pih1bS0+cm93cyksIHN0YXRpY19jYXN0PHVpbnQzMl90Pih1bS0+Y29scyl9OwogIHVpbnQzMl90IGlkeDsKICBzdGQ6OnZlY3Rvcjxib29sPiBkZWZpbmVkOwogIHN0ZDo6dmVjdG9yPFQ+IHY7CiAganNfdW1hdF92ZWN0b3JfZ2V0KGN0eCwgYXJnYywgYXJndiwgdiwgZGVmaW5lZCk7CgogIGZvcihpZHggPSAwOyBpZHggPCB2LnNpemUoKTsgaWR4KyspCiAgICBpZihkZWZpbmVkW2lkeF0pCiAgICAgIG1hdF9hdDxUPigqdW0sIGlkeCAvIGRpbS5jb2xzLCBpZHggJSBkaW0uY29scykgPSB2W2lkeF07CiAgcmV0dXJuIHY7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX3VtYXRfc2V0X3RvKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QqIGFyZ3YpIHsKICBKU1VNYXREYXRhKiBtID0ganNfdW1hdF9kYXRhKGN0eCwgdGhpc192YWwpOwogIHVpbnQzMl90IGJ5dGVzOwogIHN0ZDo6dmVjdG9yPGJvb2w+IGRlZmluZWQ7CgogIGlmKCFtKQogICAgcmV0dXJuIEpTX0VYQ0VQVElPTjsKCiAgaWYobS0+Y2hhbm5lbHMoKSA9PSAxKSB7CiAgICBkb3VibGUgdmFsdWU7CiAgICBqc192YWx1ZV90byhjdHgsIGFyZ3ZbMF0sIHZhbHVlKTsKICAgIG0tPnNldFRvKGN2OjpTY2FsYXIodmFsdWUpKTsKCiAgfSBlbHNlIGlmKGpzX2lzX2FycmF5KGN0eCwgYXJndlswXSkpIHsKICAgIGN2OjpTY2FsYXIgczsKICAgIHNpemVfdCBuID0ganNfYXJyYXlfdG8oY3R4LCBhcmd2WzBdLCBzKTsKICAgIGlmKG4gPj0gbS0+Y2hhbm5lbHMoKSkgewogICAgICBtLT5zZXRUbyhzKTsKICAgICAgcmV0dXJuIEpTX1VOREVGSU5FRDsKICAgIH0KICB9CgogIGJ5dGVzID0gbS0+ZWxlbVNpemUoKTsKCiAgcmV0dXJuIEpTX1VOREVGSU5FRDsKfQoKc3RhdGljIEpTVmFsdWUKanNfdW1hdF9nZXRfcHJvcHMoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgaW50IG1hZ2ljKSB7CiAgY3Y6OlVNYXQqIHVtID0ganNfdW1hdF9kYXRhKGN0eCwgdGhpc192YWwpOwogIGlmKCF1bSkKICAgIHJldHVybiBKU19FWENFUFRJT047CgogIHN3aXRjaChtYWdpYykgewogICAgY2FzZSBQUk9QX0NPTFM6IHJldHVybiBKU19OZXdVaW50MzIoY3R4LCB1bS0+Y29scyk7CiAgICBjYXNlIFBST1BfUk9XUzogcmV0dXJuIEpTX05ld1VpbnQzMihjdHgsIHVtLT5yb3dzKTsKICAgIGNhc2UgUFJPUF9DSEFOTkVMUzogcmV0dXJuIEpTX05ld1VpbnQzMihjdHgsIHVtLT5jaGFubmVscygpKTsKICAgIGNhc2UgUFJPUF9UWVBFOiByZXR1cm4gSlNfTmV3VWludDMyKGN0eCwgdW0tPnR5cGUoKSk7CiAgICBjYXNlIFBST1BfREVQVEg6IHJldHVybiBKU19OZXdVaW50MzIoY3R4LCB1bS0+ZGVwdGgoKSk7CiAgICBjYXNlIFBST1BfRU1QVFk6IHJldHVybiBKU19OZXdCb29sKGN0eCwgdW0tPmVtcHR5KCkpOwogICAgY2FzZSBQUk9QX1RPVEFMOiByZXR1cm4gSlNfTmV3RmxvYXQ2NChjdHgsIHVtLT50b3RhbCgpKTsKICAgIGNhc2UgUFJPUF9TSVpFOiByZXR1cm4ganNfc2l6ZV9uZXcoY3R4LCB1bS0+Y29scywgdW0tPnJvd3MpOwogICAgY2FzZSBQUk9QX0NPTlRJTlVPVVM6IHJldHVybiBKU19OZXdCb29sKGN0eCwgdW0tPmlzQ29udGludW91cygpKTsKICAgIGNhc2UgUFJPUF9TVUJNQVRSSVg6IHJldHVybiBKU19OZXdCb29sKGN0eCwgdW0tPmlzU3VibWF0cml4KCkpOwogICAgY2FzZSBQUk9QX1NURVA6IHJldHVybiBKU19OZXdVaW50MzIoY3R4LCB1bS0+c3RlcCk7CiAgICBjYXNlIFBST1BfRUxFTVNJWkU6IHJldHVybiBKU19OZXdVaW50MzIoY3R4LCB1bS0+ZWxlbVNpemUoKSk7CiAgICBjYXNlIFBST1BfRUxFTVNJWkUxOiByZXR1cm4gSlNfTmV3VWludDMyKGN0eCwgdW0tPmVsZW1TaXplMSgpKTsKICB9CgogIHJldHVybiBKU19VTkRFRklORUQ7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX3VtYXRfdG9zdHJpbmcoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCogYXJndikgewogIGN2OjpVTWF0KiB1bSA9IGpzX3VtYXRfZGF0YShjdHgsIHRoaXNfdmFsKTsKICBpbnQgeCwgeTsKCiAgc3RkOjpvc3RyaW5nc3RyZWFtIG9zOwogIHN0ZDo6c3RyaW5nIHN0cjsKICBpbnQgaSA9IDA7CiAgaWYoIXVtKQogICAgcmV0dXJuIEpTX0VYQ0VQVElPTjsKCiAgb3MgPDwgIlVNYXQoIjsKCiAgaWYoZmFsc2UgJiYgKHVtLT5yb3dzID4gMCAmJiB1bS0+Y29scyA+IDApICYmIHVtLT5kaW1zID09IDIpIHsKICAgIG9zIDw8IHVtLT5yb3dzIDw8ICIsICIgPDwgdW0tPmNvbHM7CiAgfSBlbHNlIHsKICAgIHN0ZDo6dmVjdG9yPHN0ZDo6c3RyaW5nPiBzaXplU3RycyA9IGpzX3VtYXRfZGltZW5zaW9ucygqdW0pOwogICAgb3MgPDwgIlsiIDw8IGpvaW4oc2l6ZVN0cnMuY2JlZ2luKCksIHNpemVTdHJzLmNlbmQoKSwgIiwgIikgPDwgIl0iOwogIH0KCiAgaWYodW0tPmRlcHRoKCkgPT0gQ1ZfOFUgfHwgdW0tPmNoYW5uZWxzKCkgPiAxKSB7CiAgICBvcyA8PCAiLCAiOwogICAgY29uc3QgY2hhciogdHN0cjsKICAgIHN3aXRjaCh1bS0+ZGVwdGgoKSAmIDcpIHsKICAgICAgY2FzZSBDVl84VTogdHN0ciA9ICJDVl84VSI7IGJyZWFrOwogICAgICBjYXNlIENWXzhTOiB0c3RyID0gIkNWXzhTIjsgYnJlYWs7CiAgICAgIGNhc2UgQ1ZfMTZVOiB0c3RyID0gIkNWXzE2VSI7IGJyZWFrOwogICAgICBjYXNlIENWXzE2UzogdHN0ciA9ICJDVl8xNlMiOyBicmVhazsKICAgICAgY2FzZSBDVl8zMlM6IHRzdHIgPSAiQ1ZfMzJTIjsgYnJlYWs7CiAgICAgIGNhc2UgQ1ZfMzJGOiB0c3RyID0gIkNWXzMyRiI7IGJyZWFrOwogICAgICBjYXNlIENWXzY0RjogdHN0ciA9ICJDVl82NEYiOyBicmVhazsKICAgIH0KICAgIG9zIDw8IHRzdHIgPDwgJ0MnIDw8IHVtLT5jaGFubmVscygpIDw8ICIpIiAvKjw8IHN0ZDo6ZW5kbCovOwogIH0gZWxzZSB7CiAgICBvcyA8PCAiVU1hdFsiOwogICAgZm9yKHkgPSAwOyB5IDwgdW0tPnJvd3M7IHkrKykgewogICAgICBvcyA8PCAiXG4gICI7CgogICAgICBmb3IoeCA9IDA7IHggPCB1bS0+Y29sczsgeCsrKSB7CiAgICAgICAgaWYoeCA+IDApCiAgICAgICAgICBvcyA8PCAnLCc7CiAgICAgICAgaWYodW0tPnR5cGUoKSA9PSBDVl8zMkZDMSkKICAgICAgICAgIG9zIDw8IG1hdF9hdDxmbG9hdD4oKnVtLCB5LCB4KTsKICAgICAgICBlbHNlCiAgICAgICAgICBvcyA8PCBzdGQ6OnNldGZpbGwoJzAnKSA8PCBzdGQ6OnNldGJhc2UoMTYpIDw8IHN0ZDo6c2V0dyh1bS0+dHlwZSgpID09IENWXzhVQzQgPyA4IDogdW0tPnR5cGUoKSA9PSBDVl84VUMxID8gMiA6IDYpCiAgICAgICAgICAgICA8PCBtYXRfYXQ8dWludDMyX3Q+KCp1bSwgeSwgeCk7CiAgICAgIH0KICAgIH0KCiAgICBvcyA8PCAnXScgLyo8PCBzdGQ6OmVuZGwqLzsKICB9CiAgb3MgPDwgJyAnOwogIG9zIDw8ICh2b2lkKil1bS0+ZWxlbVNpemUoKTsKICBvcyA8PCAieCI7CiAgb3MgPDwgKHZvaWQqKXVtLT50b3RhbCgpOwogIG9zIDw8ICIgQCI7CiAgb3MgPDwgKHZvaWQqKW1hdF9wdHIoKnVtKTsKCiAgc3RyID0gb3Muc3RyKCk7CgogIHJldHVybiBKU19OZXdTdHJpbmdMZW4oY3R4LCBzdHIuZGF0YSgpLCBzdHIuc2l6ZSgpKTsKfQoKc3RhdGljIEpTVmFsdWUKanNfdW1hdF9pbnNwZWN0KEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QqIGFyZ3YpIHsKICBjdjo6VU1hdCogdW0gPSBqc191bWF0X2RhdGEoY3R4LCB0aGlzX3ZhbCk7CiAgaW50IHgsIHk7CgogIHN0ZDo6b3N0cmluZ3N0cmVhbSBvczsKICBzdGQ6OnN0cmluZyBzdHI7CiAgaW50IGkgPSAwOwogIGlmKCF1bSkKICAgIHJldHVybiBKU19FWENFUFRJT047CgogIGludCBieXRlcyA9IDEgPDwgKCh1bS0+dHlwZSgpICYgMHg3KSA+PiAxKTsKICBjaGFyIHNpZ24gPSAodW0tPnR5cGUoKSAmIDB4NykgPj0gNSA/ICdGJyA6ICh1bS0+dHlwZSgpICYgMSkgPyAnUycgOiAnVSc7CgogIHN0ZDo6dmVjdG9yPHN0ZDo6c3RyaW5nPiBzaXplU3RycyA9IGpzX3VtYXRfZGltZW5zaW9ucygqdW0pOwogIDsKCiAgb3MgPDwgIlVNYXQgIgogICAgIC8qICAgICA8PCAiQCAiCiAgICAgICAgICA8PCByZWludGVycHJldF9jYXN0PHZvaWQqPihyZWludGVycHJldF9jYXN0PGNoYXIqPih1bSkgICkqLwogICAgIDw8ICIgWyAiOwogIGlmKHNpemVTdHJzLnNpemUoKSB8fCB1bS0+dHlwZSgpKSB7CiAgICBvcyA8PCAic2l6ZTogIiBDT0xPUl9ZRUxMT1cgIiIgPDwgam9pbihzaXplU3Rycy5jYmVnaW4oKSwgc2l6ZVN0cnMuY2VuZCgpLCAiIiBDT0xPUl9OT05FICIqIiBDT0xPUl9ZRUxMT1cgIiIpCiAgICAgICA8PCAiIiBDT0xPUl9OT05FICIsICI7CiAgICBvcyA8PCAidHlwZTogIiBDT0xPUl9ZRUxMT1cgIkNWXyIgPDwgKGJ5dGVzICogOCkgPDwgc2lnbiA8PCAnQycgPDwgdW0tPmNoYW5uZWxzKCkgPDwgIiIgQ09MT1JfTk9ORSAiLCAiOwogICAgb3MgPDwgImVsZW1TaXplOiAiIENPTE9SX1lFTExPVyAiIiA8PCB1bS0+ZWxlbVNpemUoKSA8PCAiIiBDT0xPUl9OT05FICIsICI7CiAgICBvcyA8PCAiZWxlbVNpemUxOiAiIENPTE9SX1lFTExPVyAiIiA8PCB1bS0+ZWxlbVNpemUxKCkgPDwgIiIgQ09MT1JfTk9ORSAiLCAiOwogICAgb3MgPDwgInRvdGFsOiAiIENPTE9SX1lFTExPVyAiIiA8PCB1bS0+dG90YWwoKSA8PCAiIiBDT0xPUl9OT05FICIsICI7CiAgICBvcyA8PCAiZGltczogIiBDT0xPUl9ZRUxMT1cgIiIgPDwgdW0tPmRpbXMgPDwgIiIgQ09MT1JfTk9ORSAiIjsKICB9IGVsc2UgewogICAgb3MgPDwgImVtcHR5IjsKICB9CiAgaWYodW0tPnUpCiAgICBvcyA8PCAiLCByZWZjb3VudDogIiBDT0xPUl9ZRUxMT1cgIiIgPDwgdW0tPnUtPnJlZmNvdW50OwogIG9zIDw8ICIiIENPTE9SX05PTkUgIiBdIjsKICBzdHIgPSBvcy5zdHIoKTsKICByZXR1cm4gSlNfTmV3U3RyaW5nTGVuKGN0eCwgc3RyLmRhdGEoKSwgc3RyLnNpemUoKSk7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX3VtYXRfY29udmVydF90byhKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2KSB7CiAgSlNVTWF0RGF0YSAqdW0sICpvdXRwdXQ7CiAgaW50MzJfdCBydHlwZTsKICBkb3VibGUgYWxwaGEgPSAxLCBiZXRhID0gMDsKCiAgdW0gPSBqc191bWF0X2RhdGEoY3R4LCB0aGlzX3ZhbCk7CiAgb3V0cHV0ID0ganNfdW1hdF9kYXRhKGN0eCwgYXJndlswXSk7CgogIGlmKHVtID09IG51bGxwdHIgfHwgb3V0cHV0ID09IG51bGxwdHIpCiAgICByZXR1cm4gSlNfRVhDRVBUSU9OOwoKICBKU19Ub0ludDMyKGN0eCwgJnJ0eXBlLCBhcmd2WzFdKTsKCiAgaWYoYXJnYyA+PSAzKQogICAgSlNfVG9GbG9hdDY0KGN0eCwgJmFscGhhLCBhcmd2WzJdKTsKCiAgaWYoYXJnYyA+PSA0KQogICAgSlNfVG9GbG9hdDY0KGN0eCwgJmJldGEsIGFyZ3ZbM10pOwoKICB1bS0+Y29udmVydFRvKCpvdXRwdXQsIHJ0eXBlLCBhbHBoYSwgYmV0YSk7CgogIHJldHVybiBKU19VTkRFRklORUQ7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX3VtYXRfY29weV90byhKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2KSB7CiAgSlNVTWF0RGF0YSAqdW0gPSBudWxscHRyLCAqb3V0cHV0ID0gbnVsbHB0ciwgKm1hc2sgPSBudWxscHRyOwoKICB1bSA9IGpzX3VtYXRfZGF0YShjdHgsIHRoaXNfdmFsKTsKICBvdXRwdXQgPSBqc191bWF0X2RhdGEoY3R4LCBhcmd2WzBdKTsKCiAgaWYoYXJnYyA+IDEpCiAgICBtYXNrID0ganNfdW1hdF9kYXRhKGN0eCwgYXJndlsxXSk7CgogIGlmKHVtID09IG51bGxwdHIgfHwgb3V0cHV0ID09IG51bGxwdHIpCiAgICByZXR1cm4gSlNfRVhDRVBUSU9OOwoKICBpZihtYXNrKQogICAgdW0tPmNvcHlUbygqb3V0cHV0LCAqbWFzayk7CiAgZWxzZQogICAgdW0tPmNvcHlUbygqb3V0cHV0KTsKICAvKmlmKG1hc2spCiAgICB1bS0+Y29weVRvKCpvdXRwdXQsICptYXNrKTsKICBlbHNlCiAgICAqb3V0cHV0ID0gKnVtOyovCgogIHJldHVybiBKU19VTkRFRklORUQ7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX3VtYXRfcmVzaGFwZShKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2KSB7CiAgSlNVTWF0RGF0YSAqdW0sIHVtYXQ7CiAgaW50MzJfdCBjbiwgcm93cyA9IDA7CiAgSlNWYWx1ZSByZXQgPSBKU19FWENFUFRJT047CgogIHVtID0ganNfdW1hdF9kYXRhKGN0eCwgdGhpc192YWwpOwoKICBpZih1bSA9PSBudWxscHRyIHx8IGFyZ2MgPCAxKQogICAgcmV0dXJuIHJldDsKCiAgaWYoYXJnYyA+PSAxICYmIEpTX0lzTnVtYmVyKGFyZ3ZbMF0pKSB7CiAgICBKU19Ub0ludDMyKGN0eCwgJmNuLCBhcmd2WzBdKTsKICAgIGFyZ3YrKzsKICAgIGFyZ2MtLTsKICB9IGVsc2UgewogICAgY24gPSB1bS0+Y2hhbm5lbHMoKTsKICB9CgogIGlmKGFyZ2MgPj0gMSkgewogICAgc3RkOjp2ZWN0b3I8aW50PiBuZXdzaGFwZTsKICAgIGlmKGpzX2lzX2FycmF5KGN0eCwgYXJndlswXSkpIHsKICAgICAganNfYXJyYXlfdG8oY3R4LCBhcmd2WzBdLCBuZXdzaGFwZSk7CiAgICAgIGlmKGFyZ2MgPj0gMiAmJiBKU19Jc051bWJlcihhcmd2WzFdKSkgewogICAgICAgIHVpbnQzMl90IG5kaW1zOwogICAgICAgIEpTX1RvVWludDMyKGN0eCwgJm5kaW1zLCBhcmd2WzFdKTsKICAgICAgICBpZihuZGltcyA+IG5ld3NoYXBlLnNpemUoKSkKICAgICAgICAgIHJldHVybiBKU19FWENFUFRJT047CiAgICAgICAgdW1hdCA9IHVtLT5yZXNoYXBlKGNuLCBuZGltcywgJm5ld3NoYXBlWzBdKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB1bWF0ID0gdW0tPnJlc2hhcGUoY24sIG5ld3NoYXBlLnNpemUoKSwgJm5ld3NoYXBlWzBdKTsKICAgICAgfQogICAgfSBlbHNlIGlmKEpTX0lzTnVtYmVyKGFyZ3ZbMF0pKSB7CiAgICAgIEpTX1RvSW50MzIoY3R4LCAmcm93cywgYXJndlswXSk7CiAgICAgIHVtYXQgPSB1bS0+cmVzaGFwZShjbiwgcm93cyk7CiAgICB9CiAgICByZXQgPSBqc191bWF0X3dyYXAoY3R4LCB1bWF0KTsKICB9CgogIHJldHVybiByZXQ7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX3VtYXRfZ2V0bWF0KEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QqIGFyZ3YpIHsKICBKU1VNYXREYXRhKiB1bTsKICBKU01hdERhdGEgbWF0OwogIGludDMyX3QgYWNjZXNzRmxhZ3M7CiAgSlNWYWx1ZSByZXQgPSBKU19FWENFUFRJT047CgogIHVtID0ganNfdW1hdF9kYXRhKGN0eCwgdGhpc192YWwpOwoKICBpZih1bSA9PSBudWxscHRyIHx8IGFyZ2MgPCAxKQogICAgcmV0dXJuIHJldDsKCiAgaWYoanNfdW1hdF9jbGFzc19pZCA9PSAwKQogICAgcmV0dXJuIEpTX05VTEw7CgogIEpTX1RvSW50MzIoY3R4LCAmYWNjZXNzRmxhZ3MsIGFyZ3ZbMF0pOwoKICBtYXQgPSB1bS0+Z2V0TWF0KGN2OjpBY2Nlc3NGbGFnKGFjY2Vzc0ZsYWdzKSk7CgogIHJldHVybiBqc19tYXRfd3JhcChjdHgsIG1hdCk7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX3VtYXRfZmlsbChKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2LCBpbnQgbWFnaWMpIHsKICBKU1VNYXREYXRhKiB1bTsKCiAgdW0gPSBqc191bWF0X2RhdGEoY3R4LCB0aGlzX3ZhbCk7CgogIGlmKHVtID09IG51bGxwdHIpCiAgICByZXR1cm4gSlNfRVhDRVBUSU9OOwoKICBpZih1bS0+ZW1wdHkoKSB8fCB1bS0+cm93cyA9PSAwIHx8IHVtLT5jb2xzID09IDApCiAgICByZXR1cm4gSlNfRVhDRVBUSU9OOwoKICBjdjo6VU1hdCYgdW1hdCA9ICp1bTsKCiAgc3dpdGNoKG1hZ2ljKSB7CiAgICBjYXNlIDA6IHsKICAgICAgdW1hdCA9IGN2OjpVTWF0Ojp6ZXJvcyh1bWF0LnJvd3MsIHVtYXQuY29scywgdW1hdC50eXBlKCkpOwogICAgICBicmVhazsKICAgIH0KICAgIGNhc2UgMTogewogICAgICB1bWF0ID0gY3Y6OlVNYXQ6Om9uZXModW1hdC5yb3dzLCB1bWF0LmNvbHMsIHVtYXQudHlwZSgpKTsKICAgICAgYnJlYWs7CiAgICB9CiAgfQoKICByZXR1cm4gSlNfRHVwVmFsdWUoY3R4LCB0aGlzX3ZhbCk7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX3VtYXRfY2xhc3NfY3JlYXRlKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QqIGFyZ3YsIGludCBtYWdpYykgewogIEpTVmFsdWUgcmV0ID0gSlNfVU5ERUZJTkVEOwoKICBjb25zdCBhdXRvJiBbc2l6ZSwgdHlwZV0gPSBqc191bWF0X3BhcmFtcyhjdHgsIGFyZ2MsIGFyZ3YpOwoKICBpZihzaXplLndpZHRoID09IDAgfHwgc2l6ZS5oZWlnaHQgPT0gMCkKICAgIHJldHVybiBKU19FWENFUFRJT047CgogIHJldCA9IGpzX3VtYXRfbmV3KGN0eCwgdWludDMyX3QoMCksIHVpbnQzMl90KDApLCBpbnQoMCkpOwogIEpTVU1hdERhdGEmIHVtYXQgPSAqanNfdW1hdF9kYXRhKGN0eCwgcmV0KTsKCiAgc3dpdGNoKG1hZ2ljKSB7CiAgICBjYXNlIDA6IHsKICAgICAgdW1hdCA9IGN2OjpTY2FsYXI6OmFsbCgwKTsKICAgICAgYnJlYWs7CiAgICB9CiAgICBjYXNlIDE6IHsKICAgICAgdW1hdCA9IGN2OjpTY2FsYXI6OmFsbCgxKTsKICAgICAgYnJlYWs7CiAgICB9CiAgfQoKICByZXR1cm4gcmV0Owp9CgovKnN0YXRpYyBKU1ZhbHVlCmpzX3VtYXRfY3JlYXRlX3ZlYyhKU0NvbnRleHQqIGN0eCwgaW50IGxlbiwgSlNWYWx1ZSogdmVjKSB7CiAgSlNWYWx1ZSBvYmogPSBKU19FWENFUFRJT047CiAgaW50IGk7CgogIG9iaiA9IEpTX05ld0FycmF5KGN0eCk7CiAgaWYoIUpTX0lzRXhjZXB0aW9uKG9iaikpIHsKCiAgICBmb3IoaSA9IDA7IGkgPCBsZW47IGkrKykgewoKICAgICAgaWYoSlNfU2V0UHJvcGVydHlVaW50MzIoY3R4LCBvYmosIGksIHZlY1tpXSkgPCAwKSB7CiAgICAgICAgSlNfRnJlZVZhbHVlKGN0eCwgb2JqKTsKICAgICAgICByZXR1cm4gSlNfRVhDRVBUSU9OOwogICAgICB9CiAgICB9CiAgfQogIHJldHVybiBvYmo7Cn0qLwoKc3RhdGljIEpTVmFsdWUKanNfdW1hdF9idWZmZXIoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCkgewogIEpTVU1hdERhdGEqIHVtOwogIGN2OjpVTWF0RGF0YSogZGF0YTsKICBzaXplX3Qgc2l6ZTsKICB1aW50OF90KiBwdHI7CgogIGlmKCh1bSA9IGpzX3VtYXRfZGF0YShjdHgsIHRoaXNfdmFsKSkgPT0gbnVsbHB0cikKICAgIHJldHVybiBKU19FWENFUFRJT047CgogIGRhdGEgPSB1bS0+dTsKICBwdHIgPSBkYXRhID8gZGF0YS0+ZGF0YSA6IG51bGxwdHI7CiAgc2l6ZSA9IGRhdGEgPyBkYXRhLT5zaXplIDogMDsKCiAgaWYocHRyID09IG51bGxwdHIpCiAgICByZXR1cm4gSlNfTlVMTDsKCiAgdW0tPmFkZHJlZigpOwogIC8vIHVtLT5hZGRyZWYoKTsKCiAgcmV0dXJuIEpTX05ld0FycmF5QnVmZmVyKGN0eCwgcHRyLCBzaXplLCAmanNfdW1hdF9mcmVlX2Z1bmMsIHVtLCBGQUxTRSAvKlRSVUUqLyk7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX3VtYXRfYXJyYXkoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCkgewogIEpTVU1hdERhdGEqIHVtOwogIEpTVmFsdWVDb25zdCBnbG9iYWwsIHR5cGVkX2FycmF5LCBidWZmZXI7CiAgaW50IGVsZW1fc2l6ZTsKICBjb25zdCBjaGFyKiBjdG9yOwoKICBpZigodW0gPSBqc191bWF0X2RhdGEoY3R4LCB0aGlzX3ZhbCkpID09IG51bGxwdHIpCiAgICByZXR1cm4gSlNfRVhDRVBUSU9OOwoKICBlbGVtX3NpemUgPSB1bS0+ZWxlbVNpemUoKTsKCiAgZ2xvYmFsID0gSlNfR2V0R2xvYmFsT2JqZWN0KGN0eCk7CgogIHByaW50ZigidW0tPnR5cGUoKT0leCB1bS0+Y2hhbm5lbHMoKT0leFxuIiwgdW0tPnR5cGUoKSwgdW0tPmNoYW5uZWxzKCkpOwogIHN3aXRjaCh1bS0+dHlwZSgpKSB7CiAgICBjYXNlIENWXzhVOgogICAgY2FzZSBDVl84UzogY3RvciA9ICJVaW50OEFycmF5IjsgYnJlYWs7CiAgICBjYXNlIENWXzE2VToKICAgIGNhc2UgQ1ZfMTZTOiBjdG9yID0gIlVpbnQxNkFycmF5IjsgYnJlYWs7CiAgICBjYXNlIENWXzMyUzogY3RvciA9ICJJbnQzMkFycmF5IjsgYnJlYWs7CiAgICBjYXNlIENWXzMyRjogY3RvciA9ICJGbG9hdDMyQXJyYXkiOyBicmVhazsKICAgIGNhc2UgQ1ZfNjRGOiBjdG9yID0gIkZsb2F0NjRBcnJheSI7IGJyZWFrOwogICAgZGVmYXVsdDogSlNfVGhyb3dUeXBlRXJyb3IoY3R4LCAiY3Y6VU1hdCB0eXBlPSUwMnggY2hhbm5lbHM9JTAyeCIsIHVtLT50eXBlKCksIHVtLT5jaGFubmVscygpKTsgcmV0dXJuIEpTX0VYQ0VQVElPTjsKICB9CiAgdHlwZWRfYXJyYXkgPSBKU19HZXRQcm9wZXJ0eVN0cihjdHgsIGdsb2JhbCwgY3Rvcik7CiAgYnVmZmVyID0ganNfdW1hdF9nZXRfcHJvcHMoY3R4LCB0aGlzX3ZhbCwgOSk7CgogIHJldHVybiBKU19DYWxsQ29uc3RydWN0b3IoY3R4LCB0eXBlZF9hcnJheSwgMSwgJmJ1ZmZlcik7Cn0KCkpTVmFsdWUKanNfdW1hdF9jYWxsKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgZnVuY19vYmosIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCogYXJndiwgaW50IGZsYWdzKSB7CiAgY3Y6OlJlY3QgcmVjdCA9IHswLCAwLCAwLCAwfTsKICBKU1VNYXREYXRhKiBzcmM7CgogIGlmKChzcmMgPSBqc191bWF0X2RhdGEoY3R4LCBmdW5jX29iaikpID09IG51bGxwdHIpCiAgICByZXR1cm4gSlNfRVhDRVBUSU9OOwoKICBpZighanNfcmVjdF9yZWFkKGN0eCwgYXJndlswXSwgJnJlY3QpKQogICAgcmV0dXJuIEpTX1Rocm93VHlwZUVycm9yKGN0eCwgImFyZ3VtZW50IDEgZXhwZWN0aW5nIFJlY3QiKTsKICAvLyBwcmludGYoImpzX21hdF9jYWxsICV1LCV1ICV1eCV1XG4iLCByZWN0LngsIHJlY3QueSwgcmVjdC53aWR0aCwgcmVjdC5oZWlnaHQpOwoKICBjdjo6VU1hdCB1bWF0ID0gc3JjLT5vcGVyYXRvcigpKHJlY3QpOwogIHJldHVybiBqc191bWF0X3dyYXAoY3R4LCB1bWF0KTsKfQoKSlNDbGFzc0RlZiBqc191bWF0X2NsYXNzID0gewogICAgLmNsYXNzX25hbWUgPSAiVU1hdCIsCiAgICAuZmluYWxpemVyID0ganNfdW1hdF9maW5hbGl6ZXIsCiAgICAuY2FsbCA9IGpzX3VtYXRfY2FsbCwKfTsKCmNvbnN0IEpTQ0Z1bmN0aW9uTGlzdEVudHJ5IGpzX3VtYXRfcHJvdG9fZnVuY3NbXSA9IHsKICAgIEpTX0NHRVRTRVRfTUFHSUNfREVGKCJjb2xzIiwganNfdW1hdF9nZXRfcHJvcHMsIE5VTEwsIFBST1BfQ09MUyksCiAgICBKU19DR0VUU0VUX01BR0lDX0RFRigicm93cyIsIGpzX3VtYXRfZ2V0X3Byb3BzLCBOVUxMLCBQUk9QX1JPV1MpLAogICAgSlNfQ0dFVFNFVF9NQUdJQ19ERUYoImNoYW5uZWxzIiwganNfdW1hdF9nZXRfcHJvcHMsIE5VTEwsIFBST1BfQ0hBTk5FTFMpLAogICAgSlNfQ0dFVFNFVF9NQUdJQ19ERUYoInR5cGUiLCBqc191bWF0X2dldF9wcm9wcywgTlVMTCwgUFJPUF9UWVBFKSwKICAgIEpTX0NHRVRTRVRfTUFHSUNfREVGKCJkZXB0aCIsIGpzX3VtYXRfZ2V0X3Byb3BzLCBOVUxMLCBQUk9QX0RFUFRIKSwKICAgIEpTX0NHRVRTRVRfTUFHSUNfREVGKCJlbXB0eSIsIGpzX3VtYXRfZ2V0X3Byb3BzLCBOVUxMLCBQUk9QX0VNUFRZKSwKICAgIEpTX0NHRVRTRVRfTUFHSUNfREVGKCJ0b3RhbCIsIGpzX3VtYXRfZ2V0X3Byb3BzLCBOVUxMLCBQUk9QX1RPVEFMKSwKICAgIEpTX0NHRVRTRVRfTUFHSUNfREVGKCJzaXplIiwganNfdW1hdF9nZXRfcHJvcHMsIE5VTEwsIFBST1BfU0laRSksCiAgICBKU19DR0VUU0VUX01BR0lDX0RFRigiY29udGludW91cyIsIGpzX3VtYXRfZ2V0X3Byb3BzLCBOVUxMLCBQUk9QX0NPTlRJTlVPVVMpLAogICAgSlNfQ0dFVFNFVF9NQUdJQ19ERUYoInN1Ym1hdHJpeCIsIGpzX3VtYXRfZ2V0X3Byb3BzLCBOVUxMLCBQUk9QX1NVQk1BVFJJWCksCiAgICBKU19DR0VUU0VUX01BR0lDX0RFRigic3RlcCIsIGpzX3VtYXRfZ2V0X3Byb3BzLCBOVUxMLCBQUk9QX1NURVApLAogICAgSlNfQ0dFVFNFVF9NQUdJQ19ERUYoImVsZW1TaXplIiwganNfdW1hdF9nZXRfcHJvcHMsIE5VTEwsIFBST1BfRUxFTVNJWkUpLAogICAgSlNfQ0dFVFNFVF9NQUdJQ19ERUYoImVsZW1TaXplMSIsIGpzX3VtYXRfZ2V0X3Byb3BzLCBOVUxMLCBQUk9QX0VMRU1TSVpFMSksCiAgICBKU19DR0VUU0VUX0RFRigiYnVmZmVyIiwganNfdW1hdF9idWZmZXIsIE5VTEwpLAogICAgSlNfQ0dFVFNFVF9ERUYoImFycmF5IiwganNfdW1hdF9hcnJheSwgTlVMTCksCiAgICBKU19DRlVOQ19NQUdJQ19ERUYoImNvbCIsIDEsIGpzX3VtYXRfZnVuY3MsIE1FVEhPRF9DT0wpLAogICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJyb3ciLCAxLCBqc191bWF0X2Z1bmNzLCBNRVRIT0RfUk9XKSwKICAgIEpTX0NGVU5DX01BR0lDX0RFRigiY29sUmFuZ2UiLCAyLCBqc191bWF0X2Z1bmNzLCBNRVRIT0RfQ09MX1JBTkdFKSwKICAgIEpTX0NGVU5DX01BR0lDX0RFRigicm93UmFuZ2UiLCAyLCBqc191bWF0X2Z1bmNzLCBNRVRIT0RfUk9XX1JBTkdFKSwKICAgIEpTX0NGVU5DX01BR0lDX0RFRigiY2xvbmUiLCAwLCBqc191bWF0X2Z1bmNzLCBNRVRIT0RfQ0xPTkUpLAogICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJyb2kiLCAwLCBqc191bWF0X2Z1bmNzLCBNRVRIT0RfUk9JKSwKICAgIEpTX0NGVU5DX01BR0lDX0RFRigicmVsZWFzZSIsIDAsIGpzX3VtYXRfZnVuY3MsIE1FVEhPRF9SRUxFQVNFKSwKICAgIEpTX0NGVU5DX01BR0lDX0RFRigiZHVwIiwgMCwganNfdW1hdF9mdW5jcywgTUVUSE9EX0RVUCksCiAgICBKU19DRlVOQ19NQUdJQ19ERUYoImNsZWFyIiwgMCwganNfdW1hdF9mdW5jcywgTUVUSE9EX0NMRUFSKSwKICAgIEpTX0NGVU5DX01BR0lDX0RFRigicmVzZXQiLCAwLCBqc191bWF0X2Z1bmNzLCBNRVRIT0RfUkVTRVQpLAogICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJzdGVwMSIsIDAsIGpzX3VtYXRfZnVuY3MsIE1FVEhPRF9TVEVQMSksCiAgICBKU19DRlVOQ19NQUdJQ19ERUYoImxvY2F0ZVJPSSIsIDAsIGpzX3VtYXRfZnVuY3MsIE1FVEhPRF9MT0NBVEVfUk9JKSwKCiAgICBKU19DRlVOQ19NQUdJQ19ERUYoInplcm8iLCAyLCBqc191bWF0X2ZpbGwsIDApLAogICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJvbmUiLCAyLCBqc191bWF0X2ZpbGwsIDEpLAoKICAgIEpTX0NGVU5DX0RFRigidG9TdHJpbmciLCAwLCBqc191bWF0X3Rvc3RyaW5nKSwKICAgIEpTX0NGVU5DX0RFRigiaW5zcGVjdCIsIDAsIGpzX3VtYXRfaW5zcGVjdCksCiAgICBKU19DRlVOQ19ERUYoImF0IiwgMSwganNfdW1hdF9hdCksCiAgICBKU19DRlVOQ19ERUYoInNldCIsIDIsIGpzX3VtYXRfc2V0KSwKICAgIEpTX0NGVU5DX0RFRigic2V0VG8iLCAwLCBqc191bWF0X3NldF90byksCiAgICBKU19DRlVOQ19ERUYoImNvbnZlcnRUbyIsIDIsIGpzX3VtYXRfY29udmVydF90byksCiAgICBKU19DRlVOQ19ERUYoImNvcHlUbyIsIDEsIGpzX3VtYXRfY29weV90byksCiAgICBKU19DRlVOQ19ERUYoInJlc2hhcGUiLCAxLCBqc191bWF0X3Jlc2hhcGUpLAogICAgSlNfQ0ZVTkNfREVGKCJnZXRNYXQiLCAxLCBqc191bWF0X2dldG1hdCksCiAgICBKU19BTElBU19ERUYoIltTeW1ib2wudG9QcmltaXRpdmVdIiwgInRvU3RyaW5nIiksCgogICAgSlNfUFJPUF9TVFJJTkdfREVGKCJbU3ltYm9sLnRvU3RyaW5nVGFnXSIsICJVTWF0IiwgSlNfUFJPUF9DT05GSUdVUkFCTEUpCgp9OwoKY29uc3QgSlNDRnVuY3Rpb25MaXN0RW50cnkganNfdW1hdF9zdGF0aWNfZnVuY3NbXSA9IHsKICAgIEpTX0NGVU5DX01BR0lDX0RFRigiemVyb3MiLCAxLCBqc191bWF0X2NsYXNzX2NyZWF0ZSwgMCksCiAgICBKU19DRlVOQ19NQUdJQ19ERUYoIm9uZXMiLCAxLCBqc191bWF0X2NsYXNzX2NyZWF0ZSwgMSksCiAgICBKU19QUk9QX0lOVDMyX0RFRigiQ1ZfOFUiLCBDVl9NQUtFVFlQRShDVl84VSwgMSksIEpTX1BST1BfRU5VTUVSQUJMRSksCn07CgppbnQKanNfdW1hdF9pbml0KEpTQ29udGV4dCogY3R4LCBKU01vZHVsZURlZiogbSkgewogIGlmKGpzX3VtYXRfY2xhc3NfaWQgPT0gMCkgewogICAgLyogY3JlYXRlIHRoZSBVTWF0IGNsYXNzICovCiAgICBKU19OZXdDbGFzc0lEKCZqc191bWF0X2NsYXNzX2lkKTsKICAgIEpTX05ld0NsYXNzKEpTX0dldFJ1bnRpbWUoY3R4KSwganNfdW1hdF9jbGFzc19pZCwgJmpzX3VtYXRfY2xhc3MpOwoKICAgIHVtYXRfcHJvdG8gPSBKU19OZXdPYmplY3QoY3R4KTsKICAgIEpTX1NldFByb3BlcnR5RnVuY3Rpb25MaXN0KGN0eCwgdW1hdF9wcm90bywganNfdW1hdF9wcm90b19mdW5jcywgY291bnRvZihqc191bWF0X3Byb3RvX2Z1bmNzKSk7CiAgICBKU19TZXRDbGFzc1Byb3RvKGN0eCwganNfdW1hdF9jbGFzc19pZCwgdW1hdF9wcm90byk7CgogICAgdW1hdF9jbGFzcyA9IEpTX05ld0NGdW5jdGlvbjIoY3R4LCBqc191bWF0X2N0b3IsICJVTWF0IiwgMiwgSlNfQ0ZVTkNfY29uc3RydWN0b3IsIDApOwogICAgLyogc2V0IHByb3RvLmNvbnN0cnVjdG9yIGFuZCBjdG9yLnByb3RvdHlwZSAqLwogICAgSlNfU2V0Q29uc3RydWN0b3IoY3R4LCB1bWF0X2NsYXNzLCB1bWF0X3Byb3RvKTsKCiAgICBKU19TZXRQcm9wZXJ0eUZ1bmN0aW9uTGlzdChjdHgsIHVtYXRfY2xhc3MsIGpzX3VtYXRfc3RhdGljX2Z1bmNzLCBjb3VudG9mKGpzX3VtYXRfc3RhdGljX2Z1bmNzKSk7CgogICAgLyogIEpTVmFsdWUgZyA9IEpTX0dldEdsb2JhbE9iamVjdChjdHgpOwogICAgICBpbnQzMmFycmF5X2N0b3IgPSBKU19HZXRQcm9wZXJ0eShjdHgsIGcsIEpTX0FUT01fSW50MzJBcnJheSk7CiAgICAgIGludDMyYXJyYXlfcHJvdG8gPSBKU19HZXRQcm90b3R5cGUoY3R4LCBpbnQzMmFycmF5X2N0b3IpOwoKICAgICAgSlNfRnJlZVZhbHVlKGN0eCwgZyk7Ki8KICB9CgogIGlmKG0pCiAgICBKU19TZXRNb2R1bGVFeHBvcnQoY3R4LCBtLCAiVU1hdCIsIHVtYXRfY2xhc3MpOwogIHJldHVybiAwOwp9CgpleHRlcm4gIkMiIFZJU0lCTEUgdm9pZCBqc191bWF0X2V4cG9ydChKU0NvbnRleHQqIGN0eCwgSlNNb2R1bGVEZWYqIG0pIHsKICBKU19BZGRNb2R1bGVFeHBvcnQoY3R4LCBtLCAiVU1hdCIpOwp9CgojaWYgZGVmaW5lZChKU19VTUFUX01PRFVMRSkKI2RlZmluZSBKU19JTklUX01PRFVMRSAvKlZJU0lCTEUqLyBqc19pbml0X21vZHVsZQojZWxzZQojZGVmaW5lIEpTX0lOSVRfTU9EVUxFIC8qVklTSUJMRSovIGpzX2luaXRfbW9kdWxlX3VtYXQKI2VuZGlmCgpleHRlcm4gIkMiIFZJU0lCTEUgSlNNb2R1bGVEZWYqCkpTX0lOSVRfTU9EVUxFKEpTQ29udGV4dCogY3R4LCBjb25zdCBjaGFyKiBtb2R1bGVfbmFtZSkgewogIEpTTW9kdWxlRGVmKiBtOwogIG0gPSBKU19OZXdDTW9kdWxlKGN0eCwgbW9kdWxlX25hbWUsICZqc191bWF0X2luaXQpOwogIGlmKCFtKQogICAgcmV0dXJuIE5VTEw7CiAganNfdW1hdF9leHBvcnQoY3R4LG0pOwogIHJldHVybiBtOwp9AAAAAAAAAABKdAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAO3QAAAAAAAA7dAAAAAAAAAAAAAAAAPC/"
				],
				[
					33,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAABKdAAAI2luY2x1ZGUgImpzYmluZGluZ3MuaHBwIgojaW5jbHVkZSAianNfdW1hdC5ocHAiCiNpbmNsdWRlICJqc19zaXplLmhwcCIKI2luY2x1ZGUgImpzX3BvaW50LmhwcCIKI2luY2x1ZGUgImpzX3JlY3QuaHBwIgojaW5jbHVkZSAianNfYXJyYXkuaHBwIgojaW5jbHVkZSAianNfdHlwZWRfYXJyYXkuaHBwIgojaW5jbHVkZSAianNfYWxsb2MuaHBwIgojaW5jbHVkZSAiZ2VvbWV0cnkuaHBwIgojaW5jbHVkZSAidXRpbC5ocHAiCiNpbmNsdWRlICIuLi9xdWlja2pzL2N1dGlscy5oIgojaW5jbHVkZSA8bGlzdD4KI2luY2x1ZGUgPG1hcD4KI2luY2x1ZGUgPGZzdHJlYW0+CgplbnVtIHsKICBQUk9QX0NPTFMgPSAwLAogIFBST1BfUk9XUywKICBQUk9QX0NIQU5ORUxTLAogIFBST1BfVFlQRSwKICBQUk9QX0RFUFRILAogIFBST1BfRU1QVFksCiAgUFJPUF9UT1RBTCwKICBQUk9QX1NJWkUsCiAgUFJPUF9DT05USU5VT1VTLAogIFBST1BfU1VCTUFUUklYLAogIFBST1BfU1RFUCwKICBQUk9QX0VMRU1TSVpFLAogIFBST1BfRUxFTVNJWkUxCn07CgplbnVtIHsKICBNRVRIT0RfQ09MID0gMCwKICBNRVRIT0RfUk9XLAogIE1FVEhPRF9DT0xfUkFOR0UsCiAgTUVUSE9EX1JPV19SQU5HRSwKICBNRVRIT0RfQ0xPTkUsCiAgTUVUSE9EX1JPSSwKICBNRVRIT0RfUkVMRUFTRSwKICBNRVRIT0RfRFVQLAogIE1FVEhPRF9DTEVBUiwKICBNRVRIT0RfUkVTRVQsCiAgTUVUSE9EX1NURVAxLAogIE1FVEhPRF9MT0NBVEVfUk9JLAogIE1FVEhPRF9aRVJPLAogIE1FVEhPRF9PTkUsCiAgTUVUSE9EX1pFUk9TLAogIE1FVEhPRF9PTkVTCn07CgplbnVtIHsgVU1BVF9FWFBSX0FORCA9IDAsIFVNQVRfRVhQUl9PUiwgVU1BVF9FWFBSX1hPUiwgVU1BVF9FWFBSX01VTCB9OwplbnVtIHsgVU1BVF9JVEVSQVRPUl9LRVlTLCBVTUFUX0lURVJBVE9SX1ZBTFVFUywgVU1BVF9JVEVSQVRPUl9FTlRSSUVTIH07CmV4dGVybiAiQyIgewoKc3RhdGljIHZvaWQKanNfdW1hdF9mcmVlX2Z1bmMoSlNSdW50aW1lKiBydCwgdm9pZCogb3BhcXVlLCB2b2lkKiBwdHIpIHsKICBzdGF0aWNfY2FzdDxKU1VNYXREYXRhKj4ob3BhcXVlKS0+cmVsZWFzZSgpOwp9Cn0KCnR5cGVkZWYgc3RydWN0IEpTVU1hdEl0ZXJhdG9yRGF0YSB7CiAgSlNWYWx1ZSBvYmosIGJ1ZjsKICB1aW50MzJfdCByb3csIGNvbDsKICBpbnQgbWFnaWM7Cn0gSlNVTWF0SXRlcmF0b3JEYXRhOwoKVklTSUJMRSBKU1VNYXREYXRhKgpqc191bWF0X2RhdGEoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB2YWwpIHsKICByZXR1cm4gc3RhdGljX2Nhc3Q8SlNVTWF0RGF0YSo+KEpTX0dldE9wYXF1ZTIoY3R4LCB2YWwsIGpzX3VtYXRfY2xhc3NfaWQpKTsKfQoKc3RhdGljIGlubGluZSBzdGQ6OnZlY3RvcjxpbnQ+CmpzX3VtYXRfc2l6ZXMoY29uc3QgSlNVTWF0RGF0YSYgdW1hdCkgewogIGNvbnN0IGN2OjpNYXRTaXplIHNpemUodW1hdC5zaXplKTsKICBzdGQ6OnZlY3RvcjxpbnQ+IHNpemVzOwogIGlmKHVtYXQuZGltcyA9PSAyKSB7CiAgICBzaXplcy5wdXNoX2JhY2sodW1hdC5yb3dzKTsKICAgIHNpemVzLnB1c2hfYmFjayh1bWF0LmNvbHMpOwogIH0gZWxzZSB7CiAgICBzdGQ6OmNvcHkoJnNpemVbMF0sICZzaXplW3NpemUuZGltcygpXSwgc3RkOjpiYWNrX2luc2VydGVyKHNpemVzKSk7CiAgfQogIHJldHVybiBzaXplczsKfQoKc3RhdGljIGlubGluZSBzdGQ6OnZlY3RvcjxzdGQ6OnN0cmluZz4KanNfdW1hdF9kaW1lbnNpb25zKGNvbnN0IEpTVU1hdERhdGEmIHVtYXQpIHsKICBzdGQ6OnZlY3RvcjxpbnQ+IHNpemVzID0ganNfdW1hdF9zaXplcyh1bWF0KTsKICBzdGQ6OnZlY3RvcjxzdGQ6OnN0cmluZz4gZGltZW5zaW9uczsKCiAgc3RkOjp0cmFuc2Zvcm0oc2l6ZXMuY2JlZ2luKCksCiAgICAgICAgICAgICAgICAgc2l6ZXMuY2VuZCgpLAogICAgICAgICAgICAgICAgIHN0ZDo6YmFja19pbnNlcnRlcihkaW1lbnNpb25zKSwKICAgICAgICAgICAgICAgICBzdGF0aWNfY2FzdDxzdGQ6OnN0cmluZyAoKikoaW50KT4oJnN0ZDo6dG9fc3RyaW5nKSk7CiAgcmV0dXJuIGRpbWVuc2lvbnM7Cn0KCiNpZmRlZiBERUJVR19VTUFUCnN0YXRpYyBpbmxpbmUgc3RkOjptYXA8dm9pZCosIHN0ZDo6dmVjdG9yPEpTVU1hdERhdGEqPj4KanNfdW1hdF9kYXRhKHZvaWQqIGRhdGEgPSBudWxscHRyKSB7CiAgc3RkOjptYXA8dm9pZCosIHN0ZDo6dmVjdG9yPEpTVU1hdERhdGEqPj4gcmV0OwogIGZvcihhdXRvIHVtYXQgOiB1bWF0X2xpc3QpIHsKICAgIGNvbnN0IGF1dG8gdSA9IHVtYXQtPnU7CiAgICBpZih1ICE9IG51bGxwdHIgJiYgKGRhdGEgPT0gbnVsbHB0ciB8fCB1ID09IGRhdGEpKSB7CiAgICAgIHZvaWQqIGRhdGEgPSB1OwogICAgICBpZihyZXQuZmluZChkYXRhKSA9PSByZXQuZW5kKCkpIHsKICAgICAgICBzdGQ6OnZlY3RvcjxKU1VNYXREYXRhKj4gdnt1bWF0fTsKICAgICAgICByZXQuaW5zZXJ0KHtkYXRhLCB2fSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0W2RhdGFdLnB1c2hfYmFjayh1bWF0KTsKICAgICAgfQogICAgfQogIH0KICByZXR1cm4gcmV0Owp9CgpzdGF0aWMgaW5saW5lIHZvaWQKanNfdW1hdF9wcmludF9kYXRhKGNvbnN0IHN0ZDo6bWFwPHZvaWQqLCBzdGQ6OnZlY3RvcjxKU1VNYXREYXRhKj4+JiBkYXRhLCBzaXplX3QgbWluU2l6ZSA9IDEpIHsKCiAgZm9yKGNvbnN0IGF1dG8mIFtrZXksIHZhbHVlXSA6IGRhdGEpIHsKCiAgICBpZih2YWx1ZS5zaXplKCkgPj0gbWluU2l6ZSkgewogICAgICBzdGQ6OmNlcnIgPDwgImRhdGEgQCIgPDwga2V5IDw8ICIgPSI7CgogICAgICBmb3IoY29uc3QgYXV0byYgcHRyIDogdmFsdWUpIHsKICAgICAgICBzaXplX3QgcmVmY291bnQgPSBwdHItPnUgPyBwdHItPnUtPnJlZmNvdW50IDogMDsKICAgICAgICBzdGQ6OmNlcnIgPDwgIiBVTWF0IEAiIDw8IHN0YXRpY19jYXN0PHZvaWQqPihwdHIpOwogICAgICAgIGlmKHJlZmNvdW50ID4gMSkKICAgICAgICAgIHN0ZDo6Y2VyciA8PCAiIChyZWZjb3VudD0iIDw8IHJlZmNvdW50IDw8ICIpIjsKICAgICAgfQogICAgICBzdGQ6OmNlcnIgPDwgc3RkOjplbmRsOwogICAgfQogIH0KfQoKc3RhdGljIGlubGluZSB2b2lkCmpzX3VtYXRfZHVtcChKU1VNYXREYXRhKiBjb25zdCBzKSB7CiAgYXV0byBwb3NMaXN0ID0gc3RkOjpmaW5kKHVtYXRfbGlzdC5jYmVnaW4oKSwgdW1hdF9saXN0LmNlbmQoKSwgcyk7CiAgYm9vbCBpbkxpc3QgPSBwb3NMaXN0ICE9IHVtYXRfbGlzdC5jZW5kKCk7CiAgYm9vbCBpbkZyZWVkID0gc3RkOjpmaW5kKHVtYXRfZnJlZWQuY2JlZ2luKCksIHVtYXRfZnJlZWQuY2VuZCgpLCBzKSAhPSB1bWF0X2ZyZWVkLmNlbmQoKTsKICBjb25zdCBhdXRvIHUgPSBzLT51OwogIHN0ZDo6Y2VyciA8PCAiIFVNYXQiCiAgICAgICAgICAgIDw8ICJbIiA8PCAocG9zTGlzdCAtIHVtYXRfbGlzdC5jYmVnaW4oKSkgPDwgIl09IiA8PCBzdGF0aWNfY2FzdDx2b2lkKj4ocyk7CgogIGlmKGluTGlzdCkKICAgIHN0ZDo6Y2VyciA8PCAiLCBpbkxpc3Q9IiA8PCAoaW5MaXN0ID8gInRydWUiIDogImZhbHNlIik7CiAgaWYoaW5GcmVlZCkKICAgIHN0ZDo6Y2VyciA8PCAiLCBpbkZyZWVkPSIgPDwgKGluRnJlZWQgPyAidHJ1ZSIgOiAiZmFsc2UiKTsKCiAgaWYocy0+cm93cyB8fCBzLT5jb2xzIHx8IHMtPmNoYW5uZWxzKCkgPiAxIHx8IHMtPmRlcHRoKCkgPiAwKSB7CiAgICBzdGQ6OmNlcnIgPDwgIiwgcm93cz0iIDw8IHMtPnJvd3M7CiAgICBzdGQ6OmNlcnIgPDwgIiwgY29scz0iIDw8IHMtPmNvbHM7CiAgICBzdGQ6OmNlcnIgPDwgIiwgY2hhbm5lbHM9IiA8PCBzLT5jaGFubmVscygpOwogICAgc3RkOjpjZXJyIDw8ICIsIGRlcHRoPSIgPDwgcy0+ZGVwdGgoKTsKICB9CgogIGlmKHUgIT0gbnVsbHB0cikgewoKICAgIC8vIGlmKHUtPnJlZmNvdW50KQogICAgc3RkOjpjZXJyIDw8ICIsIHJlZmNvdW50PSIgPDwgdS0+cmVmY291bnQ7CiAgICBpZih1LT5kYXRhKQogICAgICBzdGQ6OmNlcnIgPDwgIiwgZGF0YT0iIDw8IHN0YXRpY19jYXN0PHZvaWQqPih1LT5kYXRhKTsKICAgIGlmKHUtPnNpemUpCiAgICAgIHN0ZDo6Y2VyciA8PCAiLCBzaXplPSIgPDwgdS0+c2l6ZTsKICB9Cn0KI2VuZGlmCgpWSVNJQkxFIEpTVmFsdWUKanNfdW1hdF9uZXcoSlNDb250ZXh0KiBjdHgsIHVpbnQzMl90IHJvd3MsIHVpbnQzMl90IGNvbHMsIGludCB0eXBlKSB7CiAgSlNWYWx1ZSByZXQ7CiAgSlNVTWF0RGF0YSogdW07CgogIGlmKEpTX0lzVW5kZWZpbmVkKHVtYXRfcHJvdG8pKQogICAganNfdW1hdF9pbml0KGN0eCwgTlVMTCk7CgogIHJldCA9IEpTX05ld09iamVjdFByb3RvQ2xhc3MoY3R4LCB1bWF0X3Byb3RvLCBqc191bWF0X2NsYXNzX2lkKTsKCiAgdW0gPSBqc19hbGxvY2F0ZTxjdjo6VU1hdD4oY3R4KTsKCiAgaWYoY29scyB8fCByb3dzIHx8IHR5cGUpIHsKICAgIG5ldyh1bSkgY3Y6OlVNYXQocm93cywgY29scywgdHlwZSk7CiAgfSBlbHNlIHsKICAgIG5ldyh1bSkgY3Y6OlVNYXQoKTsKICB9CgogIC8vIHVtLT5hZGRyZWYoKTsKI2lmZGVmIERFQlVHX1VNQVQKICBzdGQ6OmNlcnIgPDwgKChjb2xzID4gMCB8fCByb3dzID4gMCkgPyAianNfdW1hdF9uZXcgKGgsdykiIDogImpzX3VtYXRfbmV3ICAgICAgIik7CiAganNfdW1hdF9kdW1wKHVtKTsKICBzdGQ6OmNlcnIgPDwgc3RkOjplbmRsOwojZW5kaWYKCiAgSlNfU2V0T3BhcXVlKHJldCwgdW0pOwogIHJldHVybiByZXQ7Cn0KCnN0YXRpYyBzdGQ6OnBhaXI8SlNTaXplRGF0YTx1aW50MzJfdD4sIGludD4KanNfdW1hdF9wYXJhbXMoSlNDb250ZXh0KiBjdHgsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QqIGFyZ3YpIHsKICBKU1NpemVEYXRhPHVpbnQzMl90PiBzaXplOwogIGludDMyX3QgdHlwZSA9IDA7CiAgaWYoYXJnYyA+IDApIHsKICAgIGlmKGpzX3NpemVfcmVhZChjdHgsIGFyZ3ZbMF0sICZzaXplKSkgewogICAgICBhcmd2Kys7CiAgICAgIGFyZ2MtLTsKICAgIH0gZWxzZSB7CiAgICAgIEpTX1RvVWludDMyKGN0eCwgJnNpemUuaGVpZ2h0LCBhcmd2WzBdKTsKICAgICAgSlNfVG9VaW50MzIoY3R4LCAmc2l6ZS53aWR0aCwgYXJndlsxXSk7CiAgICAgIGFyZ3YgKz0gMjsKICAgICAgYXJnYyAtPSAyOwogICAgfQogICAgaWYoYXJnYyA+IDApIHsKICAgICAgaWYoIUpTX1RvSW50MzIoY3R4LCAmdHlwZSwgYXJndlswXSkpIHsKICAgICAgICBhcmd2Kys7CiAgICAgICAgYXJnYy0tOwogICAgICB9CiAgICB9CiAgfQogIHJldHVybiBzdGQ6Om1ha2VfcGFpcihzaXplLCB0eXBlKTsKfQoKc3RhdGljIEpTVmFsdWUKanNfdW1hdF9jdG9yKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgbmV3X3RhcmdldCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCogYXJndikgewoKICBjb25zdCBhdXRvJiBbc2l6ZSwgdHlwZV0gPSBqc191bWF0X3BhcmFtcyhjdHgsIGFyZ2MsIGFyZ3YpOwoKICByZXR1cm4ganNfdW1hdF9uZXcoY3R4LCBzaXplLmhlaWdodCwgc2l6ZS53aWR0aCwgdHlwZSk7Cn0KCnZvaWQKanNfdW1hdF9maW5hbGl6ZXIoSlNSdW50aW1lKiBydCwgSlNWYWx1ZSB2YWwpIHsKICBKU1VNYXREYXRhKiB1bTsKCiAgaWYoKHVtID0gc3RhdGljX2Nhc3Q8SlNVTWF0RGF0YSo+KEpTX0dldE9wYXF1ZSh2YWwsIGpzX3VtYXRfY2xhc3NfaWQpKSkpIHsKICAgIHVtLT5yZWxlYXNlKCk7CiAgICBqc19kZWFsbG9jYXRlKHJ0LCB1bSk7CiAgfQogIC8vIEpTX0ZyZWVWYWx1ZVJUKHJ0LCB2YWwpOwp9CgpzdGF0aWMgSlNWYWx1ZQpqc191bWF0X2Z1bmNzKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QqIGFyZ3YsIGludCBtYWdpYykgewogIEpTVmFsdWUgcmV0ID0gSlNfVU5ERUZJTkVEOwogIGludDY0X3QgaSA9IC0xLCBpMiA9IC0xOwogIEpTUG9pbnREYXRhPGRvdWJsZT4gcHQ7CiAgSlNVTWF0RGF0YSogdW0gPSBqc191bWF0X2RhdGEoY3R4LCB0aGlzX3ZhbCk7CgogIGlmKGFyZ2MgPiAwKSB7CiAgICBKU19Ub0ludDY0KGN0eCwgJmksIGFyZ3ZbMF0pOwogICAgcHQgPSBqc19wb2ludF9nZXQoY3R4LCBhcmd2WzBdKTsKICAgIGlmKGFyZ2MgPiAxKSB7CiAgICAgIEpTX1RvSW50NjQoY3R4LCAmaTIsIGFyZ3ZbMV0pOwogICAgfQogIH0KICBzd2l0Y2gobWFnaWMpIHsKICAgIGNhc2UgTUVUSE9EX0NPTDogewogICAgICByZXQgPSBqc191bWF0X3dyYXAoY3R4LCB1bS0+Y29sKGkpKTsKICAgICAgYnJlYWs7CiAgICB9CiAgICBjYXNlIE1FVEhPRF9ST1c6IHsKICAgICAgcmV0ID0ganNfdW1hdF93cmFwKGN0eCwgdW0tPnJvdyhpKSk7CiAgICAgIGJyZWFrOwogICAgfQogICAgY2FzZSBNRVRIT0RfQ09MX1JBTkdFOiB7CiAgICAgIHJldCA9IGpzX3VtYXRfd3JhcChjdHgsIHVtLT5jb2xSYW5nZShpLCBpMikpOwogICAgICBicmVhazsKICAgIH0KICAgIGNhc2UgTUVUSE9EX1JPV19SQU5HRTogewogICAgICByZXQgPSBqc191bWF0X3dyYXAoY3R4LCB1bS0+cm93UmFuZ2UoaSwgaTIpKTsKICAgICAgYnJlYWs7CiAgICB9CiAgICBjYXNlIE1FVEhPRF9DTE9ORTogewogICAgICByZXQgPSBqc191bWF0X3dyYXAoY3R4LCB1bS0+Y2xvbmUoKSk7CiAgICAgIGJyZWFrOwogICAgfQogICAgY2FzZSBNRVRIT0RfUk9JOiB7CiAgICAgIEpTUmVjdERhdGE8ZG91YmxlPiByZWN0ID0gezAsIDAsIDAsIDB9OwoKICAgICAgaWYoYXJnYyA+IDApCiAgICAgICAgcmVjdCA9IGpzX3JlY3RfZ2V0KGN0eCwgYXJndlswXSk7CgogICAgICByZXQgPSBqc191bWF0X3dyYXAoY3R4LCAoKnVtKShyZWN0KSk7CiAgICAgIGJyZWFrOwogICAgfQogICAgY2FzZSBNRVRIT0RfUkVMRUFTRTogewogICAgICB1bS0+cmVsZWFzZSgpOwogICAgICBicmVhazsKICAgIH0KICAgIGNhc2UgTUVUSE9EX0RVUDogewogICAgICByZXQgPSBqc191bWF0X3dyYXAoY3R4LCAqdW0pOwogICAgICBicmVhazsKICAgIH0KICAgIGNhc2UgTUVUSE9EX0NMRUFSOiB7CiAgICAgICp1bSA9IGN2OjpVTWF0Ojp6ZXJvcyh1bS0+cm93cywgdW0tPmNvbHMsIHVtLT50eXBlKCkpOwogICAgICBicmVhazsKICAgIH0KICAgIGNhc2UgTUVUSE9EX1JFU0VUOiB7CiAgICAgICp1bSA9IGN2OjpVTWF0KCk7CiAgICAgIGJyZWFrOwogICAgfQogICAgY2FzZSBNRVRIT0RfU1RFUDE6IHsKICAgICAgaW50MzJfdCBpID0gMDsKCiAgICAgIEpTX1RvSW50MzIoY3R4LCAmaSwgYXJndlswXSk7CiAgICAgIHJldCA9IEpTX05ld0ludDY0KGN0eCwgdW0tPnN0ZXAxKGkpKTsKICAgICAgYnJlYWs7CiAgICB9CiAgICBjYXNlIE1FVEhPRF9MT0NBVEVfUk9JOiB7CiAgICAgIGN2OjpTaXplIHdob2xlU2l6ZTsKICAgICAgY3Y6OlBvaW50IG9mczsKICAgICAgdW0tPmxvY2F0ZVJPSSh3aG9sZVNpemUsIG9mcyk7CiAgICAgIGpzX3NpemVfd3JpdGUoY3R4LCBhcmd2WzBdLCB3aG9sZVNpemUpOwogICAgICBqc19wb2ludF93cml0ZShjdHgsIGFyZ3ZbMF0sIG9mcyk7CiAgICAgIGJyZWFrOwogICAgfQoKICAgIGRlZmF1bHQ6IHsKICAgICAgcmV0ID0gSlNfRVhDRVBUSU9OOwogICAgICBicmVhazsKICAgIH0KICB9CgogIHJldHVybiByZXQ7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX3VtYXRfaW5pdChKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2LCBpbnQgbWFnaWMpIHsKICBKU1ZhbHVlIHJldCA9IEpTX1VOREVGSU5FRDsKICBKU1VNYXREYXRhKiB1bTsKCiAgYXV0byBbc2l6ZSwgdHlwZV0gPSBqc191bWF0X3BhcmFtcyhjdHgsIGFyZ2MsIGFyZ3YpOwoKICBpZigodW0gPSBqc191bWF0X2RhdGEoY3R4LCB0aGlzX3ZhbCkpKSB7CiAgICBpZihzaXplLndpZHRoID09IDAgfHwgc2l6ZS5oZWlnaHQgPT0gMCkgewogICAgICBpZih1bS0+cm93cyAmJiB1bS0+Y29scykgewogICAgICAgIHNpemUud2lkdGggPSB1bS0+Y29sczsKICAgICAgICBzaXplLmhlaWdodCA9IHVtLT5yb3dzOwogICAgICAgIHR5cGUgPSB1bS0+dHlwZSgpOwogICAgICB9CiAgICB9CiAgICByZXQgPSBKU19EdXBWYWx1ZShjdHgsIHRoaXNfdmFsKTsKICB9IGVsc2UgaWYoc2l6ZS53aWR0aCA+IDAgJiYgc2l6ZS5oZWlnaHQgPiAwKSB7CiAgICByZXQgPSBqc191bWF0X25ldyhjdHgsIHNpemUuaGVpZ2h0LCBzaXplLndpZHRoLCB0eXBlKTsKCiAgICB1bSA9IGpzX3VtYXRfZGF0YShjdHgsIHJldCk7CiAgfSBlbHNlIHsKICAgIHJldHVybiBKU19FWENFUFRJT047CiAgfQoKICBjdjo6VU1hdCYgdW1hdCA9ICp1bTsKCiAgc3dpdGNoKG1hZ2ljKSB7CiAgICBjYXNlIDA6IHsKICAgICAgdW1hdCA9IGN2OjpVTWF0Ojp6ZXJvcyhzaXplLCB0eXBlKTsKICAgICAgYnJlYWs7CiAgICB9CiAgICBjYXNlIDE6IHsKICAgICAgdW1hdCA9IGN2OjpVTWF0OjpvbmVzKHNpemUsIHR5cGUpOwogICAgICBicmVhazsKICAgIH0KICB9CgogIHJldHVybiByZXQ7Cn0KCnRlbXBsYXRlPGNsYXNzIFQ+CnZvaWQKanNfdW1hdF9nZXQoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgdWludDMyX3Qgcm93LCB1aW50MzJfdCBjb2wsIFQmIHZhbHVlKSB7CiAgY3Y6OlVNYXQqIHVtID0ganNfdW1hdF9kYXRhKGN0eCwgdGhpc192YWwpOwoKICBpZih1bSkKICAgIHZhbHVlID0gbWF0X2F0PFQ+KCp1bSwgcm93LCBjb2wpOwogIGVsc2UKICAgIHZhbHVlID0gVCgpOwp9CgpzdGF0aWMgSlNWYWx1ZQpqc191bWF0X2dldChKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCB1aW50MzJfdCByb3csIHVpbnQzMl90IGNvbCkgewogIEpTVmFsdWUgcmV0ID0gSlNfRVhDRVBUSU9OOwogIGN2OjpVTWF0KiB1bSA9IGpzX3VtYXRfZGF0YShjdHgsIHRoaXNfdmFsKTsKCiAgaWYodW0pIHsKICAgIHVpbnQzMl90IGJ5dGVzID0gKDEgPDwgdW0tPmRlcHRoKCkpICogdW0tPmNoYW5uZWxzKCk7CiAgICBzaXplX3QgY2hhbm5lbHMgPSBtYXRfY2hhbm5lbHMoKnVtKTsKCiAgICBpZihjaGFubmVscyA9PSAxKSB7CiAgICAgIHN3aXRjaCh1bS0+dHlwZSgpKSB7CgogICAgICAgIGNhc2UgQ1ZfOFVDMTogewogICAgICAgICAgdWludDhfdCB2YWx1ZTsKICAgICAgICAgIGpzX3VtYXRfZ2V0KGN0eCwgdGhpc192YWwsIHJvdywgY29sLCB2YWx1ZSk7CiAgICAgICAgICByZXQgPSBKU19OZXdVaW50MzIoY3R4LCB2YWx1ZSk7CiAgICAgICAgICBicmVhazsKICAgICAgICB9CgogICAgICAgIGNhc2UgQ1ZfMTZVQzE6IHsKICAgICAgICAgIHVpbnQxNl90IHZhbHVlOwogICAgICAgICAganNfdW1hdF9nZXQoY3R4LCB0aGlzX3ZhbCwgcm93LCBjb2wsIHZhbHVlKTsKICAgICAgICAgIHJldCA9IEpTX05ld1VpbnQzMihjdHgsIHZhbHVlKTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KICAgICAgICBjYXNlIENWXzMyU0MxOiB7CiAgICAgICAgICBpbnQzMl90IHZhbHVlOwogICAgICAgICAganNfdW1hdF9nZXQoY3R4LCB0aGlzX3ZhbCwgcm93LCBjb2wsIHZhbHVlKTsKICAgICAgICAgIHJldCA9IEpTX05ld0ludDMyKGN0eCwgdmFsdWUpOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQogICAgICAgIGNhc2UgQ1ZfMzJGQzE6IHsKICAgICAgICAgIGZsb2F0IHZhbHVlOwogICAgICAgICAganNfdW1hdF9nZXQoY3R4LCB0aGlzX3ZhbCwgcm93LCBjb2wsIHZhbHVlKTsKICAgICAgICAgIHJldCA9IEpTX05ld0Zsb2F0NjQoY3R4LCB2YWx1ZSk7CiAgICAgICAgICBicmVhazsKICAgICAgICB9CiAgICAgICAgY2FzZSBDVl82NEZDMTogewogICAgICAgICAgZG91YmxlIHZhbHVlOwogICAgICAgICAganNfdW1hdF9nZXQoY3R4LCB0aGlzX3ZhbCwgcm93LCBjb2wsIHZhbHVlKTsKICAgICAgICAgIHJldCA9IEpTX05ld0Zsb2F0NjQoY3R4LCB2YWx1ZSk7CiAgICAgICAgICBicmVhazsKICAgICAgICB9CiAgICAgICAgZGVmYXVsdDogewogICAgICAgICAgcmV0ID0gSlNfVGhyb3dUeXBlRXJyb3IoY3R4LCAiSW52YWxpZCBVTWF0IHR5cGUgJXUiLCB1bS0+dHlwZSgpKTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KICAgICAgfQoKICAgICAgcmV0dXJuIHJldDsKICAgIH0KICB9CiAgcmV0dXJuIEpTX1VOREVGSU5FRDsKfQoKc3RhdGljIGludApqc191bWF0X2dldF93aChKU0NvbnRleHQqIGN0eCwgSlNNYXREaW1lbnNpb25zKiBzaXplLCBKU1ZhbHVlQ29uc3Qgb2JqKSB7CiAgY3Y6OlVNYXQqIHVtID0ganNfdW1hdF9kYXRhKGN0eCwgb2JqKTsKCiAgaWYodW0pIHsKICAgIHNpemUtPnJvd3MgPSB1bS0+cm93czsKICAgIHNpemUtPmNvbHMgPSB1bS0+Y29sczsKICAgIHJldHVybiAxOwogIH0KICByZXR1cm4gMDsKfQoKc3RhdGljIEpTVmFsdWUKanNfdW1hdF9hdChKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2KSB7CiAgSlNVTWF0RGF0YSogdW0gPSBqc191bWF0X2RhdGEoY3R4LCB0aGlzX3ZhbCk7CiAgaWYoIXVtKQogICAgcmV0dXJuIEpTX0VYQ0VQVElPTjsKICBKU1BvaW50RGF0YTxkb3VibGU+IHB0OwogIEpTVmFsdWUgcmV0OwogIHVpbnQzMl90IHJvdyA9IDAsIGNvbCA9IDA7CiAgaWYoanNfcG9pbnRfcmVhZChjdHgsIGFyZ3ZbMF0sICZwdCkpIHsKICAgIGNvbCA9IHB0Lng7CiAgICByb3cgPSBwdC55OwogIH0gZWxzZSBpZihhcmdjID49IDIgJiYgSlNfSXNOdW1iZXIoYXJndlswXSkgJiYgSlNfSXNOdW1iZXIoYXJndlsxXSkpIHsKICAgIEpTX1RvVWludDMyKGN0eCwgJnJvdywgYXJndlswXSk7CiAgICBKU19Ub1VpbnQzMihjdHgsICZjb2wsIGFyZ3ZbMV0pOwogICAgYXJnYyAtPSAyOwogICAgYXJndiArPSAyOwogIH0gZWxzZSBpZihhcmdjID49IDEgJiYgSlNfSXNOdW1iZXIoYXJndlswXSkpIHsKICAgIEpTTWF0RGltZW5zaW9ucyBkaW0gPSB7c3RhdGljX2Nhc3Q8dWludDMyX3Q+KHVtLT5yb3dzKSwgc3RhdGljX2Nhc3Q8dWludDMyX3Q+KHVtLT5jb2xzKX07CiAgICB1aW50MzJfdCBpZHg7CgogICAgSlNfVG9VaW50MzIoY3R4LCAmaWR4LCBhcmd2WzBdKTsKICAgIHJvdyA9IGlkeCAvIGRpbS5jb2xzOwogICAgY29sID0gaWR4ICUgZGltLmNvbHM7CiAgfQoKICByZXR1cm4ganNfdW1hdF9nZXQoY3R4LCB0aGlzX3ZhbCwgcm93LCBjb2wpOwp9CgpzdGF0aWMgSlNWYWx1ZQpqc191bWF0X3NldChKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2KSB7CiAgY3Y6OlVNYXQqIHVtID0ganNfdW1hdF9kYXRhKGN0eCwgdGhpc192YWwpOwogIHVpbnQzMl90IGJ5dGVzOwogIGlmKCF1bSkKICAgIHJldHVybiBKU19FWENFUFRJT047CgogIEpTUG9pbnREYXRhPGRvdWJsZT4gcHQ7CiAgSlNWYWx1ZSByZXQ7CiAgaW50MzJfdCBjb2wgPSAtMSwgcm93ID0gLTE7CgogIGlmKGpzX3BvaW50X3JlYWQoY3R4LCBhcmd2WzBdLCAmcHQpKSB7CiAgICBjb2wgPSBwdC54OwogICAgcm93ID0gcHQueTsKICAgIGFyZ2MtLTsKICAgIGFyZ3YrKzsKICB9IGVsc2UgewogICAgaWYoYXJnYyA+PSAxKSB7CiAgICAgIEpTX1RvSW50MzIoY3R4LCAmcm93LCBhcmd2WzBdKTsKICAgICAgYXJnYy0tOwogICAgICBhcmd2Kys7CiAgICB9CiAgICBpZihhcmdjID49IDEpIHsKICAgICAgSlNfVG9JbnQzMihjdHgsICZjb2wsIGFyZ3ZbMF0pOwogICAgICBhcmdjLS07CiAgICAgIGFyZ3YrKzsKICAgIH0KICB9CiAgYnl0ZXMgPSAoMSA8PCB1bS0+ZGVwdGgoKSkgKiB1bS0+Y2hhbm5lbHMoKTsKICBpZih1bS0+dHlwZSgpID09IENWXzMyRkMxKSB7CiAgICBkb3VibGUgZGF0YTsKICAgIGlmKEpTX1RvRmxvYXQ2NChjdHgsICZkYXRhLCBhcmd2WzBdKSkKICAgICAgcmV0dXJuIEpTX0VYQ0VQVElPTjsKICAgIG1hdF9hdDxmbG9hdD4oKnVtLCByb3csIGNvbCkgPSAoZmxvYXQpZGF0YTsKICB9IGVsc2UgaWYoYnl0ZXMgPD0gc2l6ZW9mKHVpbnQpKSB7CiAgICB1aW50MzJfdCBtYXNrID0gKDFMVSA8PCAoYnl0ZXMgKiA4KSkgLSAxOwogICAgdWludDMyX3QgZGF0YTsKICAgIGlmKEpTX1RvVWludDMyKGN0eCwgJmRhdGEsIGFyZ3ZbMF0pKQogICAgICByZXR1cm4gSlNfRVhDRVBUSU9OOwoKICAgIGlmKGJ5dGVzIDw9IDEpIHsKICAgICAgdWludDhfdCogcCA9ICZtYXRfYXQ8dWludDhfdD4oKnVtLCByb3csIGNvbCk7CiAgICAgICpwID0gKHVpbnQ4X3QpZGF0YSAmIG1hc2s7CiAgICB9IGVsc2UgaWYoYnl0ZXMgPD0gMikgewogICAgICB1aW50MTZfdCogcCA9ICZtYXRfYXQ8dWludDE2X3Q+KCp1bSwgcm93LCBjb2wpOwogICAgICAqcCA9ICh1aW50MTZfdClkYXRhICYgbWFzazsKCiAgICB9IGVsc2UgaWYoYnl0ZXMgPD0gNCkgewogICAgICB1aW50KiBwID0gJm1hdF9hdDx1aW50PigqdW0sIHJvdywgY29sKTsKICAgICAgKnAgPSAodWludClkYXRhICYgbWFzazsKICAgIH0KCiAgfSBlbHNlCiAgICByZXR1cm4gSlNfVU5ERUZJTkVEOwogIHJldHVybiBKU19VTkRFRklORUQ7Cn0KCnRlbXBsYXRlPGNsYXNzIFQ+CnR5cGVuYW1lIHN0ZDo6ZW5hYmxlX2lmPHN0ZDo6aXNfaW50ZWdyYWw8VD46OnZhbHVlLCB2b2lkPjo6dHlwZQpqc191bWF0X3ZlY3Rvcl9nZXQoSlNDb250ZXh0KiBjdHgsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QqIGFyZ3YsIHN0ZDo6dmVjdG9yPFQ+JiBvdXRwdXQsIHN0ZDo6dmVjdG9yPGJvb2w+JiBkZWZpbmVkKSB7CiAgb3V0cHV0LnJlc2l6ZShzdGF0aWNfY2FzdDxzaXplX3Q+KGFyZ2MpKTsKICBkZWZpbmVkLnJlc2l6ZShzdGF0aWNfY2FzdDxzaXplX3Q+KGFyZ2MpKTsKICBmb3IoaW50IGkgPSAwOyBpIDwgYXJnYzsgaSsrKSB7CiAgICB1aW50MzJfdCB2YWwgPSAwOwogICAgYm9vbCBpc0RlZiA9IEpTX0lzTnVtYmVyKGFyZ3ZbaV0pICYmICFKU19Ub1VpbnQzMihjdHgsICZ2YWwsIGFyZ3ZbaV0pOwoKICAgIG91dHB1dFtpXSA9IHZhbDsKICAgIGRlZmluZWRbaV0gPSBpc0RlZjsKICB9Cn0KCnRlbXBsYXRlPGNsYXNzIFQ+CnR5cGVuYW1lIHN0ZDo6ZW5hYmxlX2lmPHN0ZDo6aXNfZmxvYXRpbmdfcG9pbnQ8VD46OnZhbHVlLCB2b2lkPjo6dHlwZQpqc191bWF0X3ZlY3Rvcl9nZXQoSlNDb250ZXh0KiBjdHgsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QqIGFyZ3YsIHN0ZDo6dmVjdG9yPFQ+JiBvdXRwdXQsIHN0ZDo6dmVjdG9yPGJvb2w+JiBkZWZpbmVkKSB7CiAgb3V0cHV0LnJlc2l6ZShzdGF0aWNfY2FzdDxzaXplX3Q+KGFyZ2MpKTsKICBkZWZpbmVkLnJlc2l6ZShzdGF0aWNfY2FzdDxzaXplX3Q+KGFyZ2MpKTsKICBmb3IoaW50IGkgPSAwOyBpIDwgYXJnYzsgaSsrKSB7CiAgICBkb3VibGUgdmFsID0gMDsKICAgIGJvb2wgaXNEZWYgPSBKU19Jc051bWJlcihhcmd2W2ldKSAmJiAhSlNfVG9GbG9hdDY0KGN0eCwgJnZhbCwgYXJndltpXSk7CgogICAgb3V0cHV0W2ldID0gdmFsOwogICAgZGVmaW5lZFtpXSA9IGlzRGVmOwogIH0KfQoKdGVtcGxhdGU8Y2xhc3MgVD4KdHlwZW5hbWUgc3RkOjplbmFibGVfaWY8c3RkOjppc19pbnRlZ3JhbDx0eXBlbmFtZSBUOjp2YWx1ZV90eXBlPjo6dmFsdWUsIHZvaWQ+Ojp0eXBlCmpzX3VtYXRfdmVjdG9yX2dldChKU0NvbnRleHQqIGN0eCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCogYXJndiwgc3RkOjp2ZWN0b3I8VD4mIG91dHB1dCwgc3RkOjp2ZWN0b3I8Ym9vbD4mIGRlZmluZWQpIHsKICBjb25zdCBzaXplX3QgYml0cyA9IChzaXplb2YodHlwZW5hbWUgVDo6dmFsdWVfdHlwZSkgKiA4KTsKICBjb25zdCBzaXplX3QgbiA9IFQ6OmNoYW5uZWxzOwogIG91dHB1dC5yZXNpemUoc3RhdGljX2Nhc3Q8c2l6ZV90PihhcmdjKSk7CiAgZGVmaW5lZC5yZXNpemUoc3RhdGljX2Nhc3Q8c2l6ZV90PihhcmdjKSk7CiAgZm9yKGludCBpID0gMDsgaSA8IGFyZ2M7IGkrKykgewogICAgZG91YmxlIHZhbCA9IDA7CiAgICBib29sIGlzRGVmID0gSlNfSXNOdW1iZXIoYXJndltpXSkgJiYgIUpTX1RvRmxvYXQ2NChjdHgsICZ2YWwsIGFyZ3ZbaV0pOwogICAgaWYoaXNEZWYpIHsKICAgICAgY29uc3QgdWludDY0X3QgbWFzayA9ICgxVSA8PCBiaXRzKSAtIDE7CiAgICAgIHVpbnQ2NF90IGl2YWwgPSB2YWw7CiAgICAgIGZvcihpbnQgaiA9IDA7IGogPCBuOyBqKyspIHsKICAgICAgICBvdXRwdXRbaV1bal0gPSBpdmFsICYgbWFzazsKICAgICAgICBpdmFsID4+PSBiaXRzOwogICAgICB9CiAgICB9CiAgICBkZWZpbmVkW2ldID0gaXNEZWY7CiAgfQp9OwoKdGVtcGxhdGU8Y2xhc3MgVD4Kc3RhdGljIHN0ZDo6dmVjdG9yPFQ+CmpzX3VtYXRfc2V0X3ZlY3RvcihKU0NvbnRleHQqIGN0eCwgSlNVTWF0RGF0YSogdW0sIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QqIGFyZ3YpIHsKICBKU01hdERpbWVuc2lvbnMgZGltID0ge3N0YXRpY19jYXN0PHVpbnQzMl90Pih1bS0+cm93cyksIHN0YXRpY19jYXN0PHVpbnQzMl90Pih1bS0+Y29scyl9OwogIHVpbnQzMl90IGlkeDsKICBzdGQ6OnZlY3Rvcjxib29sPiBkZWZpbmVkOwogIHN0ZDo6dmVjdG9yPFQ+IHY7CiAganNfdW1hdF92ZWN0b3JfZ2V0KGN0eCwgYXJnYywgYXJndiwgdiwgZGVmaW5lZCk7CgogIGZvcihpZHggPSAwOyBpZHggPCB2LnNpemUoKTsgaWR4KyspCiAgICBpZihkZWZpbmVkW2lkeF0pCiAgICAgIG1hdF9hdDxUPigqdW0sIGlkeCAvIGRpbS5jb2xzLCBpZHggJSBkaW0uY29scykgPSB2W2lkeF07CiAgcmV0dXJuIHY7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX3VtYXRfc2V0X3RvKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QqIGFyZ3YpIHsKICBKU1VNYXREYXRhKiBtID0ganNfdW1hdF9kYXRhKGN0eCwgdGhpc192YWwpOwogIHVpbnQzMl90IGJ5dGVzOwogIHN0ZDo6dmVjdG9yPGJvb2w+IGRlZmluZWQ7CgogIGlmKCFtKQogICAgcmV0dXJuIEpTX0VYQ0VQVElPTjsKCiAgaWYobS0+Y2hhbm5lbHMoKSA9PSAxKSB7CiAgICBkb3VibGUgdmFsdWU7CiAgICBqc192YWx1ZV90byhjdHgsIGFyZ3ZbMF0sIHZhbHVlKTsKICAgIG0tPnNldFRvKGN2OjpTY2FsYXIodmFsdWUpKTsKCiAgfSBlbHNlIGlmKGpzX2lzX2FycmF5KGN0eCwgYXJndlswXSkpIHsKICAgIGN2OjpTY2FsYXIgczsKICAgIHNpemVfdCBuID0ganNfYXJyYXlfdG8oY3R4LCBhcmd2WzBdLCBzKTsKICAgIGlmKG4gPj0gbS0+Y2hhbm5lbHMoKSkgewogICAgICBtLT5zZXRUbyhzKTsKICAgICAgcmV0dXJuIEpTX1VOREVGSU5FRDsKICAgIH0KICB9CgogIGJ5dGVzID0gbS0+ZWxlbVNpemUoKTsKCiAgcmV0dXJuIEpTX1VOREVGSU5FRDsKfQoKc3RhdGljIEpTVmFsdWUKanNfdW1hdF9nZXRfcHJvcHMoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgaW50IG1hZ2ljKSB7CiAgY3Y6OlVNYXQqIHVtID0ganNfdW1hdF9kYXRhKGN0eCwgdGhpc192YWwpOwogIGlmKCF1bSkKICAgIHJldHVybiBKU19FWENFUFRJT047CgogIHN3aXRjaChtYWdpYykgewogICAgY2FzZSBQUk9QX0NPTFM6IHJldHVybiBKU19OZXdVaW50MzIoY3R4LCB1bS0+Y29scyk7CiAgICBjYXNlIFBST1BfUk9XUzogcmV0dXJuIEpTX05ld1VpbnQzMihjdHgsIHVtLT5yb3dzKTsKICAgIGNhc2UgUFJPUF9DSEFOTkVMUzogcmV0dXJuIEpTX05ld1VpbnQzMihjdHgsIHVtLT5jaGFubmVscygpKTsKICAgIGNhc2UgUFJPUF9UWVBFOiByZXR1cm4gSlNfTmV3VWludDMyKGN0eCwgdW0tPnR5cGUoKSk7CiAgICBjYXNlIFBST1BfREVQVEg6IHJldHVybiBKU19OZXdVaW50MzIoY3R4LCB1bS0+ZGVwdGgoKSk7CiAgICBjYXNlIFBST1BfRU1QVFk6IHJldHVybiBKU19OZXdCb29sKGN0eCwgdW0tPmVtcHR5KCkpOwogICAgY2FzZSBQUk9QX1RPVEFMOiByZXR1cm4gSlNfTmV3RmxvYXQ2NChjdHgsIHVtLT50b3RhbCgpKTsKICAgIGNhc2UgUFJPUF9TSVpFOiByZXR1cm4ganNfc2l6ZV9uZXcoY3R4LCB1bS0+Y29scywgdW0tPnJvd3MpOwogICAgY2FzZSBQUk9QX0NPTlRJTlVPVVM6IHJldHVybiBKU19OZXdCb29sKGN0eCwgdW0tPmlzQ29udGludW91cygpKTsKICAgIGNhc2UgUFJPUF9TVUJNQVRSSVg6IHJldHVybiBKU19OZXdCb29sKGN0eCwgdW0tPmlzU3VibWF0cml4KCkpOwogICAgY2FzZSBQUk9QX1NURVA6IHJldHVybiBKU19OZXdVaW50MzIoY3R4LCB1bS0+c3RlcCk7CiAgICBjYXNlIFBST1BfRUxFTVNJWkU6IHJldHVybiBKU19OZXdVaW50MzIoY3R4LCB1bS0+ZWxlbVNpemUoKSk7CiAgICBjYXNlIFBST1BfRUxFTVNJWkUxOiByZXR1cm4gSlNfTmV3VWludDMyKGN0eCwgdW0tPmVsZW1TaXplMSgpKTsKICB9CgogIHJldHVybiBKU19VTkRFRklORUQ7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX3VtYXRfdG9zdHJpbmcoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCogYXJndikgewogIGN2OjpVTWF0KiB1bSA9IGpzX3VtYXRfZGF0YShjdHgsIHRoaXNfdmFsKTsKICBpbnQgeCwgeTsKCiAgc3RkOjpvc3RyaW5nc3RyZWFtIG9zOwogIHN0ZDo6c3RyaW5nIHN0cjsKICBpbnQgaSA9IDA7CiAgaWYoIXVtKQogICAgcmV0dXJuIEpTX0VYQ0VQVElPTjsKCiAgb3MgPDwgIlVNYXQoIjsKCiAgaWYoZmFsc2UgJiYgKHVtLT5yb3dzID4gMCAmJiB1bS0+Y29scyA+IDApICYmIHVtLT5kaW1zID09IDIpIHsKICAgIG9zIDw8IHVtLT5yb3dzIDw8ICIsICIgPDwgdW0tPmNvbHM7CiAgfSBlbHNlIHsKICAgIHN0ZDo6dmVjdG9yPHN0ZDo6c3RyaW5nPiBzaXplU3RycyA9IGpzX3VtYXRfZGltZW5zaW9ucygqdW0pOwogICAgb3MgPDwgIlsiIDw8IGpvaW4oc2l6ZVN0cnMuY2JlZ2luKCksIHNpemVTdHJzLmNlbmQoKSwgIiwgIikgPDwgIl0iOwogIH0KCiAgaWYodW0tPmRlcHRoKCkgPT0gQ1ZfOFUgfHwgdW0tPmNoYW5uZWxzKCkgPiAxKSB7CiAgICBvcyA8PCAiLCAiOwogICAgY29uc3QgY2hhciogdHN0cjsKICAgIHN3aXRjaCh1bS0+ZGVwdGgoKSAmIDcpIHsKICAgICAgY2FzZSBDVl84VTogdHN0ciA9ICJDVl84VSI7IGJyZWFrOwogICAgICBjYXNlIENWXzhTOiB0c3RyID0gIkNWXzhTIjsgYnJlYWs7CiAgICAgIGNhc2UgQ1ZfMTZVOiB0c3RyID0gIkNWXzE2VSI7IGJyZWFrOwogICAgICBjYXNlIENWXzE2UzogdHN0ciA9ICJDVl8xNlMiOyBicmVhazsKICAgICAgY2FzZSBDVl8zMlM6IHRzdHIgPSAiQ1ZfMzJTIjsgYnJlYWs7CiAgICAgIGNhc2UgQ1ZfMzJGOiB0c3RyID0gIkNWXzMyRiI7IGJyZWFrOwogICAgICBjYXNlIENWXzY0RjogdHN0ciA9ICJDVl82NEYiOyBicmVhazsKICAgIH0KICAgIG9zIDw8IHRzdHIgPDwgJ0MnIDw8IHVtLT5jaGFubmVscygpIDw8ICIpIiAvKjw8IHN0ZDo6ZW5kbCovOwogIH0gZWxzZSB7CiAgICBvcyA8PCAiVU1hdFsiOwogICAgZm9yKHkgPSAwOyB5IDwgdW0tPnJvd3M7IHkrKykgewogICAgICBvcyA8PCAiXG4gICI7CgogICAgICBmb3IoeCA9IDA7IHggPCB1bS0+Y29sczsgeCsrKSB7CiAgICAgICAgaWYoeCA+IDApCiAgICAgICAgICBvcyA8PCAnLCc7CiAgICAgICAgaWYodW0tPnR5cGUoKSA9PSBDVl8zMkZDMSkKICAgICAgICAgIG9zIDw8IG1hdF9hdDxmbG9hdD4oKnVtLCB5LCB4KTsKICAgICAgICBlbHNlCiAgICAgICAgICBvcyA8PCBzdGQ6OnNldGZpbGwoJzAnKSA8PCBzdGQ6OnNldGJhc2UoMTYpIDw8IHN0ZDo6c2V0dyh1bS0+dHlwZSgpID09IENWXzhVQzQgPyA4IDogdW0tPnR5cGUoKSA9PSBDVl84VUMxID8gMiA6IDYpCiAgICAgICAgICAgICA8PCBtYXRfYXQ8dWludDMyX3Q+KCp1bSwgeSwgeCk7CiAgICAgIH0KICAgIH0KCiAgICBvcyA8PCAnXScgLyo8PCBzdGQ6OmVuZGwqLzsKICB9CiAgb3MgPDwgJyAnOwogIG9zIDw8ICh2b2lkKil1bS0+ZWxlbVNpemUoKTsKICBvcyA8PCAieCI7CiAgb3MgPDwgKHZvaWQqKXVtLT50b3RhbCgpOwogIG9zIDw8ICIgQCI7CiAgb3MgPDwgKHZvaWQqKW1hdF9wdHIoKnVtKTsKCiAgc3RyID0gb3Muc3RyKCk7CgogIHJldHVybiBKU19OZXdTdHJpbmdMZW4oY3R4LCBzdHIuZGF0YSgpLCBzdHIuc2l6ZSgpKTsKfQoKc3RhdGljIEpTVmFsdWUKanNfdW1hdF9pbnNwZWN0KEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QqIGFyZ3YpIHsKICBjdjo6VU1hdCogdW0gPSBqc191bWF0X2RhdGEoY3R4LCB0aGlzX3ZhbCk7CiAgaW50IHgsIHk7CgogIHN0ZDo6b3N0cmluZ3N0cmVhbSBvczsKICBzdGQ6OnN0cmluZyBzdHI7CiAgaW50IGkgPSAwOwogIGlmKCF1bSkKICAgIHJldHVybiBKU19FWENFUFRJT047CgogIGludCBieXRlcyA9IDEgPDwgKCh1bS0+dHlwZSgpICYgMHg3KSA+PiAxKTsKICBjaGFyIHNpZ24gPSAodW0tPnR5cGUoKSAmIDB4NykgPj0gNSA/ICdGJyA6ICh1bS0+dHlwZSgpICYgMSkgPyAnUycgOiAnVSc7CgogIHN0ZDo6dmVjdG9yPHN0ZDo6c3RyaW5nPiBzaXplU3RycyA9IGpzX3VtYXRfZGltZW5zaW9ucygqdW0pOwogIDsKCiAgb3MgPDwgIlVNYXQgIgogICAgIC8qICAgICA8PCAiQCAiCiAgICAgICAgICA8PCByZWludGVycHJldF9jYXN0PHZvaWQqPihyZWludGVycHJldF9jYXN0PGNoYXIqPih1bSkgICkqLwogICAgIDw8ICIgWyAiOwogIGlmKHNpemVTdHJzLnNpemUoKSB8fCB1bS0+dHlwZSgpKSB7CiAgICBvcyA8PCAic2l6ZTogIiBDT0xPUl9ZRUxMT1cgIiIgPDwgam9pbihzaXplU3Rycy5jYmVnaW4oKSwgc2l6ZVN0cnMuY2VuZCgpLCAiIiBDT0xPUl9OT05FICIqIiBDT0xPUl9ZRUxMT1cgIiIpCiAgICAgICA8PCAiIiBDT0xPUl9OT05FICIsICI7CiAgICBvcyA8PCAidHlwZTogIiBDT0xPUl9ZRUxMT1cgIkNWXyIgPDwgKGJ5dGVzICogOCkgPDwgc2lnbiA8PCAnQycgPDwgdW0tPmNoYW5uZWxzKCkgPDwgIiIgQ09MT1JfTk9ORSAiLCAiOwogICAgb3MgPDwgImVsZW1TaXplOiAiIENPTE9SX1lFTExPVyAiIiA8PCB1bS0+ZWxlbVNpemUoKSA8PCAiIiBDT0xPUl9OT05FICIsICI7CiAgICBvcyA8PCAiZWxlbVNpemUxOiAiIENPTE9SX1lFTExPVyAiIiA8PCB1bS0+ZWxlbVNpemUxKCkgPDwgIiIgQ09MT1JfTk9ORSAiLCAiOwogICAgb3MgPDwgInRvdGFsOiAiIENPTE9SX1lFTExPVyAiIiA8PCB1bS0+dG90YWwoKSA8PCAiIiBDT0xPUl9OT05FICIsICI7CiAgICBvcyA8PCAiZGltczogIiBDT0xPUl9ZRUxMT1cgIiIgPDwgdW0tPmRpbXMgPDwgIiIgQ09MT1JfTk9ORSAiIjsKICB9IGVsc2UgewogICAgb3MgPDwgImVtcHR5IjsKICB9CiAgaWYodW0tPnUpCiAgICBvcyA8PCAiLCByZWZjb3VudDogIiBDT0xPUl9ZRUxMT1cgIiIgPDwgdW0tPnUtPnJlZmNvdW50OwogIG9zIDw8ICIiIENPTE9SX05PTkUgIiBdIjsKICBzdHIgPSBvcy5zdHIoKTsKICByZXR1cm4gSlNfTmV3U3RyaW5nTGVuKGN0eCwgc3RyLmRhdGEoKSwgc3RyLnNpemUoKSk7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX3VtYXRfY29udmVydF90byhKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2KSB7CiAgSlNVTWF0RGF0YSAqdW0sICpvdXRwdXQ7CiAgaW50MzJfdCBydHlwZTsKICBkb3VibGUgYWxwaGEgPSAxLCBiZXRhID0gMDsKCiAgdW0gPSBqc191bWF0X2RhdGEoY3R4LCB0aGlzX3ZhbCk7CiAgb3V0cHV0ID0ganNfdW1hdF9kYXRhKGN0eCwgYXJndlswXSk7CgogIGlmKHVtID09IG51bGxwdHIgfHwgb3V0cHV0ID09IG51bGxwdHIpCiAgICByZXR1cm4gSlNfRVhDRVBUSU9OOwoKICBKU19Ub0ludDMyKGN0eCwgJnJ0eXBlLCBhcmd2WzFdKTsKCiAgaWYoYXJnYyA+PSAzKQogICAgSlNfVG9GbG9hdDY0KGN0eCwgJmFscGhhLCBhcmd2WzJdKTsKCiAgaWYoYXJnYyA+PSA0KQogICAgSlNfVG9GbG9hdDY0KGN0eCwgJmJldGEsIGFyZ3ZbM10pOwoKICB1bS0+Y29udmVydFRvKCpvdXRwdXQsIHJ0eXBlLCBhbHBoYSwgYmV0YSk7CgogIHJldHVybiBKU19VTkRFRklORUQ7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX3VtYXRfY29weV90byhKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2KSB7CiAgSlNVTWF0RGF0YSAqdW0gPSBudWxscHRyLCAqb3V0cHV0ID0gbnVsbHB0ciwgKm1hc2sgPSBudWxscHRyOwoKICB1bSA9IGpzX3VtYXRfZGF0YShjdHgsIHRoaXNfdmFsKTsKICBvdXRwdXQgPSBqc191bWF0X2RhdGEoY3R4LCBhcmd2WzBdKTsKCiAgaWYoYXJnYyA+IDEpCiAgICBtYXNrID0ganNfdW1hdF9kYXRhKGN0eCwgYXJndlsxXSk7CgogIGlmKHVtID09IG51bGxwdHIgfHwgb3V0cHV0ID09IG51bGxwdHIpCiAgICByZXR1cm4gSlNfRVhDRVBUSU9OOwoKICBpZihtYXNrKQogICAgdW0tPmNvcHlUbygqb3V0cHV0LCAqbWFzayk7CiAgZWxzZQogICAgdW0tPmNvcHlUbygqb3V0cHV0KTsKICAvKmlmKG1hc2spCiAgICB1bS0+Y29weVRvKCpvdXRwdXQsICptYXNrKTsKICBlbHNlCiAgICAqb3V0cHV0ID0gKnVtOyovCgogIHJldHVybiBKU19VTkRFRklORUQ7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX3VtYXRfcmVzaGFwZShKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2KSB7CiAgSlNVTWF0RGF0YSAqdW0sIHVtYXQ7CiAgaW50MzJfdCBjbiwgcm93cyA9IDA7CiAgSlNWYWx1ZSByZXQgPSBKU19FWENFUFRJT047CgogIHVtID0ganNfdW1hdF9kYXRhKGN0eCwgdGhpc192YWwpOwoKICBpZih1bSA9PSBudWxscHRyIHx8IGFyZ2MgPCAxKQogICAgcmV0dXJuIHJldDsKCiAgaWYoYXJnYyA+PSAxICYmIEpTX0lzTnVtYmVyKGFyZ3ZbMF0pKSB7CiAgICBKU19Ub0ludDMyKGN0eCwgJmNuLCBhcmd2WzBdKTsKICAgIGFyZ3YrKzsKICAgIGFyZ2MtLTsKICB9IGVsc2UgewogICAgY24gPSB1bS0+Y2hhbm5lbHMoKTsKICB9CgogIGlmKGFyZ2MgPj0gMSkgewogICAgc3RkOjp2ZWN0b3I8aW50PiBuZXdzaGFwZTsKICAgIGlmKGpzX2lzX2FycmF5KGN0eCwgYXJndlswXSkpIHsKICAgICAganNfYXJyYXlfdG8oY3R4LCBhcmd2WzBdLCBuZXdzaGFwZSk7CiAgICAgIGlmKGFyZ2MgPj0gMiAmJiBKU19Jc051bWJlcihhcmd2WzFdKSkgewogICAgICAgIHVpbnQzMl90IG5kaW1zOwogICAgICAgIEpTX1RvVWludDMyKGN0eCwgJm5kaW1zLCBhcmd2WzFdKTsKICAgICAgICBpZihuZGltcyA+IG5ld3NoYXBlLnNpemUoKSkKICAgICAgICAgIHJldHVybiBKU19FWENFUFRJT047CiAgICAgICAgdW1hdCA9IHVtLT5yZXNoYXBlKGNuLCBuZGltcywgJm5ld3NoYXBlWzBdKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB1bWF0ID0gdW0tPnJlc2hhcGUoY24sIG5ld3NoYXBlLnNpemUoKSwgJm5ld3NoYXBlWzBdKTsKICAgICAgfQogICAgfSBlbHNlIGlmKEpTX0lzTnVtYmVyKGFyZ3ZbMF0pKSB7CiAgICAgIEpTX1RvSW50MzIoY3R4LCAmcm93cywgYXJndlswXSk7CiAgICAgIHVtYXQgPSB1bS0+cmVzaGFwZShjbiwgcm93cyk7CiAgICB9CiAgICByZXQgPSBqc191bWF0X3dyYXAoY3R4LCB1bWF0KTsKICB9CgogIHJldHVybiByZXQ7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX3VtYXRfZ2V0bWF0KEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QqIGFyZ3YpIHsKICBKU1VNYXREYXRhKiB1bTsKICBKU01hdERhdGEgbWF0OwogIGludDMyX3QgYWNjZXNzRmxhZ3M7CiAgSlNWYWx1ZSByZXQgPSBKU19FWENFUFRJT047CgogIHVtID0ganNfdW1hdF9kYXRhKGN0eCwgdGhpc192YWwpOwoKICBpZih1bSA9PSBudWxscHRyIHx8IGFyZ2MgPCAxKQogICAgcmV0dXJuIHJldDsKCiAgaWYoanNfdW1hdF9jbGFzc19pZCA9PSAwKQogICAgcmV0dXJuIEpTX05VTEw7CgogIEpTX1RvSW50MzIoY3R4LCAmYWNjZXNzRmxhZ3MsIGFyZ3ZbMF0pOwoKICBtYXQgPSB1bS0+Z2V0TWF0KGN2OjpBY2Nlc3NGbGFnKGFjY2Vzc0ZsYWdzKSk7CgogIHJldHVybiBqc19tYXRfd3JhcChjdHgsIG1hdCk7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX3VtYXRfZmlsbChKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2LCBpbnQgbWFnaWMpIHsKICBKU1VNYXREYXRhKiB1bTsKCiAgdW0gPSBqc191bWF0X2RhdGEoY3R4LCB0aGlzX3ZhbCk7CgogIGlmKHVtID09IG51bGxwdHIpCiAgICByZXR1cm4gSlNfRVhDRVBUSU9OOwoKICBpZih1bS0+ZW1wdHkoKSB8fCB1bS0+cm93cyA9PSAwIHx8IHVtLT5jb2xzID09IDApCiAgICByZXR1cm4gSlNfRVhDRVBUSU9OOwoKICBjdjo6VU1hdCYgdW1hdCA9ICp1bTsKCiAgc3dpdGNoKG1hZ2ljKSB7CiAgICBjYXNlIDA6IHsKICAgICAgdW1hdCA9IGN2OjpVTWF0Ojp6ZXJvcyh1bWF0LnJvd3MsIHVtYXQuY29scywgdW1hdC50eXBlKCkpOwogICAgICBicmVhazsKICAgIH0KICAgIGNhc2UgMTogewogICAgICB1bWF0ID0gY3Y6OlVNYXQ6Om9uZXModW1hdC5yb3dzLCB1bWF0LmNvbHMsIHVtYXQudHlwZSgpKTsKICAgICAgYnJlYWs7CiAgICB9CiAgfQoKICByZXR1cm4gSlNfRHVwVmFsdWUoY3R4LCB0aGlzX3ZhbCk7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX3VtYXRfY2xhc3NfY3JlYXRlKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QqIGFyZ3YsIGludCBtYWdpYykgewogIEpTVmFsdWUgcmV0ID0gSlNfVU5ERUZJTkVEOwoKICBjb25zdCBhdXRvJiBbc2l6ZSwgdHlwZV0gPSBqc191bWF0X3BhcmFtcyhjdHgsIGFyZ2MsIGFyZ3YpOwoKICBpZihzaXplLndpZHRoID09IDAgfHwgc2l6ZS5oZWlnaHQgPT0gMCkKICAgIHJldHVybiBKU19FWENFUFRJT047CgogIHJldCA9IGpzX3VtYXRfbmV3KGN0eCwgdWludDMyX3QoMCksIHVpbnQzMl90KDApLCBpbnQoMCkpOwogIEpTVU1hdERhdGEmIHVtYXQgPSAqanNfdW1hdF9kYXRhKGN0eCwgcmV0KTsKCiAgc3dpdGNoKG1hZ2ljKSB7CiAgICBjYXNlIDA6IHsKICAgICAgdW1hdCA9IGN2OjpTY2FsYXI6OmFsbCgwKTsKICAgICAgYnJlYWs7CiAgICB9CiAgICBjYXNlIDE6IHsKICAgICAgdW1hdCA9IGN2OjpTY2FsYXI6OmFsbCgxKTsKICAgICAgYnJlYWs7CiAgICB9CiAgfQoKICByZXR1cm4gcmV0Owp9CgovKnN0YXRpYyBKU1ZhbHVlCmpzX3VtYXRfY3JlYXRlX3ZlYyhKU0NvbnRleHQqIGN0eCwgaW50IGxlbiwgSlNWYWx1ZSogdmVjKSB7CiAgSlNWYWx1ZSBvYmogPSBKU19FWENFUFRJT047CiAgaW50IGk7CgogIG9iaiA9IEpTX05ld0FycmF5KGN0eCk7CiAgaWYoIUpTX0lzRXhjZXB0aW9uKG9iaikpIHsKCiAgICBmb3IoaSA9IDA7IGkgPCBsZW47IGkrKykgewoKICAgICAgaWYoSlNfU2V0UHJvcGVydHlVaW50MzIoY3R4LCBvYmosIGksIHZlY1tpXSkgPCAwKSB7CiAgICAgICAgSlNfRnJlZVZhbHVlKGN0eCwgb2JqKTsKICAgICAgICByZXR1cm4gSlNfRVhDRVBUSU9OOwogICAgICB9CiAgICB9CiAgfQogIHJldHVybiBvYmo7Cn0qLwoKc3RhdGljIEpTVmFsdWUKanNfdW1hdF9idWZmZXIoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCkgewogIEpTVU1hdERhdGEqIHVtOwogIGN2OjpVTWF0RGF0YSogZGF0YTsKICBzaXplX3Qgc2l6ZTsKICB1aW50OF90KiBwdHI7CgogIGlmKCh1bSA9IGpzX3VtYXRfZGF0YShjdHgsIHRoaXNfdmFsKSkgPT0gbnVsbHB0cikKICAgIHJldHVybiBKU19FWENFUFRJT047CgogIGRhdGEgPSB1bS0+dTsKICBwdHIgPSBkYXRhID8gZGF0YS0+ZGF0YSA6IG51bGxwdHI7CiAgc2l6ZSA9IGRhdGEgPyBkYXRhLT5zaXplIDogMDsKCiAgaWYocHRyID09IG51bGxwdHIpCiAgICByZXR1cm4gSlNfTlVMTDsKCiAgdW0tPmFkZHJlZigpOwogIC8vIHVtLT5hZGRyZWYoKTsKCiAgcmV0dXJuIEpTX05ld0FycmF5QnVmZmVyKGN0eCwgcHRyLCBzaXplLCAmanNfdW1hdF9mcmVlX2Z1bmMsIHVtLCBGQUxTRSAvKlRSVUUqLyk7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX3VtYXRfYXJyYXkoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCkgewogIEpTVU1hdERhdGEqIHVtOwogIEpTVmFsdWVDb25zdCBnbG9iYWwsIHR5cGVkX2FycmF5LCBidWZmZXI7CiAgaW50IGVsZW1fc2l6ZTsKICBjb25zdCBjaGFyKiBjdG9yOwoKICBpZigodW0gPSBqc191bWF0X2RhdGEoY3R4LCB0aGlzX3ZhbCkpID09IG51bGxwdHIpCiAgICByZXR1cm4gSlNfRVhDRVBUSU9OOwoKICBlbGVtX3NpemUgPSB1bS0+ZWxlbVNpemUoKTsKCiAgZ2xvYmFsID0gSlNfR2V0R2xvYmFsT2JqZWN0KGN0eCk7CgogIHByaW50ZigidW0tPnR5cGUoKT0leCB1bS0+Y2hhbm5lbHMoKT0leFxuIiwgdW0tPnR5cGUoKSwgdW0tPmNoYW5uZWxzKCkpOwogIHN3aXRjaCh1bS0+dHlwZSgpKSB7CiAgICBjYXNlIENWXzhVOgogICAgY2FzZSBDVl84UzogY3RvciA9ICJVaW50OEFycmF5IjsgYnJlYWs7CiAgICBjYXNlIENWXzE2VToKICAgIGNhc2UgQ1ZfMTZTOiBjdG9yID0gIlVpbnQxNkFycmF5IjsgYnJlYWs7CiAgICBjYXNlIENWXzMyUzogY3RvciA9ICJJbnQzMkFycmF5IjsgYnJlYWs7CiAgICBjYXNlIENWXzMyRjogY3RvciA9ICJGbG9hdDMyQXJyYXkiOyBicmVhazsKICAgIGNhc2UgQ1ZfNjRGOiBjdG9yID0gIkZsb2F0NjRBcnJheSI7IGJyZWFrOwogICAgZGVmYXVsdDogSlNfVGhyb3dUeXBlRXJyb3IoY3R4LCAiY3Y6VU1hdCB0eXBlPSUwMnggY2hhbm5lbHM9JTAyeCIsIHVtLT50eXBlKCksIHVtLT5jaGFubmVscygpKTsgcmV0dXJuIEpTX0VYQ0VQVElPTjsKICB9CiAgdHlwZWRfYXJyYXkgPSBKU19HZXRQcm9wZXJ0eVN0cihjdHgsIGdsb2JhbCwgY3Rvcik7CiAgYnVmZmVyID0ganNfdW1hdF9nZXRfcHJvcHMoY3R4LCB0aGlzX3ZhbCwgOSk7CgogIHJldHVybiBKU19DYWxsQ29uc3RydWN0b3IoY3R4LCB0eXBlZF9hcnJheSwgMSwgJmJ1ZmZlcik7Cn0KCkpTVmFsdWUKanNfdW1hdF9jYWxsKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgZnVuY19vYmosIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCogYXJndiwgaW50IGZsYWdzKSB7CiAgY3Y6OlJlY3QgcmVjdCA9IHswLCAwLCAwLCAwfTsKICBKU1VNYXREYXRhKiBzcmM7CgogIGlmKChzcmMgPSBqc191bWF0X2RhdGEoY3R4LCBmdW5jX29iaikpID09IG51bGxwdHIpCiAgICByZXR1cm4gSlNfRVhDRVBUSU9OOwoKICBpZighanNfcmVjdF9yZWFkKGN0eCwgYXJndlswXSwgJnJlY3QpKQogICAgcmV0dXJuIEpTX1Rocm93VHlwZUVycm9yKGN0eCwgImFyZ3VtZW50IDEgZXhwZWN0aW5nIFJlY3QiKTsKICAvLyBwcmludGYoImpzX21hdF9jYWxsICV1LCV1ICV1eCV1XG4iLCByZWN0LngsIHJlY3QueSwgcmVjdC53aWR0aCwgcmVjdC5oZWlnaHQpOwoKICBjdjo6VU1hdCB1bWF0ID0gc3JjLT5vcGVyYXRvcigpKHJlY3QpOwogIHJldHVybiBqc191bWF0X3dyYXAoY3R4LCB1bWF0KTsKfQoKSlNDbGFzc0RlZiBqc191bWF0X2NsYXNzID0gewogICAgLmNsYXNzX25hbWUgPSAiVU1hdCIsCiAgICAuZmluYWxpemVyID0ganNfdW1hdF9maW5hbGl6ZXIsCiAgICAuY2FsbCA9IGpzX3VtYXRfY2FsbCwKfTsKCmNvbnN0IEpTQ0Z1bmN0aW9uTGlzdEVudHJ5IGpzX3VtYXRfcHJvdG9fZnVuY3NbXSA9IHsKICAgIEpTX0NHRVRTRVRfTUFHSUNfREVGKCJjb2xzIiwganNfdW1hdF9nZXRfcHJvcHMsIE5VTEwsIFBST1BfQ09MUyksCiAgICBKU19DR0VUU0VUX01BR0lDX0RFRigicm93cyIsIGpzX3VtYXRfZ2V0X3Byb3BzLCBOVUxMLCBQUk9QX1JPV1MpLAogICAgSlNfQ0dFVFNFVF9NQUdJQ19ERUYoImNoYW5uZWxzIiwganNfdW1hdF9nZXRfcHJvcHMsIE5VTEwsIFBST1BfQ0hBTk5FTFMpLAogICAgSlNfQ0dFVFNFVF9NQUdJQ19ERUYoInR5cGUiLCBqc191bWF0X2dldF9wcm9wcywgTlVMTCwgUFJPUF9UWVBFKSwKICAgIEpTX0NHRVRTRVRfTUFHSUNfREVGKCJkZXB0aCIsIGpzX3VtYXRfZ2V0X3Byb3BzLCBOVUxMLCBQUk9QX0RFUFRIKSwKICAgIEpTX0NHRVRTRVRfTUFHSUNfREVGKCJlbXB0eSIsIGpzX3VtYXRfZ2V0X3Byb3BzLCBOVUxMLCBQUk9QX0VNUFRZKSwKICAgIEpTX0NHRVRTRVRfTUFHSUNfREVGKCJ0b3RhbCIsIGpzX3VtYXRfZ2V0X3Byb3BzLCBOVUxMLCBQUk9QX1RPVEFMKSwKICAgIEpTX0NHRVRTRVRfTUFHSUNfREVGKCJzaXplIiwganNfdW1hdF9nZXRfcHJvcHMsIE5VTEwsIFBST1BfU0laRSksCiAgICBKU19DR0VUU0VUX01BR0lDX0RFRigiY29udGludW91cyIsIGpzX3VtYXRfZ2V0X3Byb3BzLCBOVUxMLCBQUk9QX0NPTlRJTlVPVVMpLAogICAgSlNfQ0dFVFNFVF9NQUdJQ19ERUYoInN1Ym1hdHJpeCIsIGpzX3VtYXRfZ2V0X3Byb3BzLCBOVUxMLCBQUk9QX1NVQk1BVFJJWCksCiAgICBKU19DR0VUU0VUX01BR0lDX0RFRigic3RlcCIsIGpzX3VtYXRfZ2V0X3Byb3BzLCBOVUxMLCBQUk9QX1NURVApLAogICAgSlNfQ0dFVFNFVF9NQUdJQ19ERUYoImVsZW1TaXplIiwganNfdW1hdF9nZXRfcHJvcHMsIE5VTEwsIFBST1BfRUxFTVNJWkUpLAogICAgSlNfQ0dFVFNFVF9NQUdJQ19ERUYoImVsZW1TaXplMSIsIGpzX3VtYXRfZ2V0X3Byb3BzLCBOVUxMLCBQUk9QX0VMRU1TSVpFMSksCiAgICBKU19DR0VUU0VUX0RFRigiYnVmZmVyIiwganNfdW1hdF9idWZmZXIsIE5VTEwpLAogICAgSlNfQ0dFVFNFVF9ERUYoImFycmF5IiwganNfdW1hdF9hcnJheSwgTlVMTCksCiAgICBKU19DRlVOQ19NQUdJQ19ERUYoImNvbCIsIDEsIGpzX3VtYXRfZnVuY3MsIE1FVEhPRF9DT0wpLAogICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJyb3ciLCAxLCBqc191bWF0X2Z1bmNzLCBNRVRIT0RfUk9XKSwKICAgIEpTX0NGVU5DX01BR0lDX0RFRigiY29sUmFuZ2UiLCAyLCBqc191bWF0X2Z1bmNzLCBNRVRIT0RfQ09MX1JBTkdFKSwKICAgIEpTX0NGVU5DX01BR0lDX0RFRigicm93UmFuZ2UiLCAyLCBqc191bWF0X2Z1bmNzLCBNRVRIT0RfUk9XX1JBTkdFKSwKICAgIEpTX0NGVU5DX01BR0lDX0RFRigiY2xvbmUiLCAwLCBqc191bWF0X2Z1bmNzLCBNRVRIT0RfQ0xPTkUpLAogICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJyb2kiLCAwLCBqc191bWF0X2Z1bmNzLCBNRVRIT0RfUk9JKSwKICAgIEpTX0NGVU5DX01BR0lDX0RFRigicmVsZWFzZSIsIDAsIGpzX3VtYXRfZnVuY3MsIE1FVEhPRF9SRUxFQVNFKSwKICAgIEpTX0NGVU5DX01BR0lDX0RFRigiZHVwIiwgMCwganNfdW1hdF9mdW5jcywgTUVUSE9EX0RVUCksCiAgICBKU19DRlVOQ19NQUdJQ19ERUYoImNsZWFyIiwgMCwganNfdW1hdF9mdW5jcywgTUVUSE9EX0NMRUFSKSwKICAgIEpTX0NGVU5DX01BR0lDX0RFRigicmVzZXQiLCAwLCBqc191bWF0X2Z1bmNzLCBNRVRIT0RfUkVTRVQpLAogICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJzdGVwMSIsIDAsIGpzX3VtYXRfZnVuY3MsIE1FVEhPRF9TVEVQMSksCiAgICBKU19DRlVOQ19NQUdJQ19ERUYoImxvY2F0ZVJPSSIsIDAsIGpzX3VtYXRfZnVuY3MsIE1FVEhPRF9MT0NBVEVfUk9JKSwKCiAgICBKU19DRlVOQ19NQUdJQ19ERUYoInplcm8iLCAyLCBqc191bWF0X2ZpbGwsIDApLAogICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJvbmUiLCAyLCBqc191bWF0X2ZpbGwsIDEpLAoKICAgIEpTX0NGVU5DX0RFRigidG9TdHJpbmciLCAwLCBqc191bWF0X3Rvc3RyaW5nKSwKICAgIEpTX0NGVU5DX0RFRigiaW5zcGVjdCIsIDAsIGpzX3VtYXRfaW5zcGVjdCksCiAgICBKU19DRlVOQ19ERUYoImF0IiwgMSwganNfdW1hdF9hdCksCiAgICBKU19DRlVOQ19ERUYoInNldCIsIDIsIGpzX3VtYXRfc2V0KSwKICAgIEpTX0NGVU5DX0RFRigic2V0VG8iLCAwLCBqc191bWF0X3NldF90byksCiAgICBKU19DRlVOQ19ERUYoImNvbnZlcnRUbyIsIDIsIGpzX3VtYXRfY29udmVydF90byksCiAgICBKU19DRlVOQ19ERUYoImNvcHlUbyIsIDEsIGpzX3VtYXRfY29weV90byksCiAgICBKU19DRlVOQ19ERUYoInJlc2hhcGUiLCAxLCBqc191bWF0X3Jlc2hhcGUpLAogICAgSlNfQ0ZVTkNfREVGKCJnZXRNYXQiLCAxLCBqc191bWF0X2dldG1hdCksCiAgICBKU19BTElBU19ERUYoIltTeW1ib2wudG9QcmltaXRpdmVdIiwgInRvU3RyaW5nIiksCgogICAgSlNfUFJPUF9TVFJJTkdfREVGKCJbU3ltYm9sLnRvU3RyaW5nVGFnXSIsICJVTWF0IiwgSlNfUFJPUF9DT05GSUdVUkFCTEUpCgp9OwoKY29uc3QgSlNDRnVuY3Rpb25MaXN0RW50cnkganNfdW1hdF9zdGF0aWNfZnVuY3NbXSA9IHsKICAgIEpTX0NGVU5DX01BR0lDX0RFRigiemVyb3MiLCAxLCBqc191bWF0X2NsYXNzX2NyZWF0ZSwgMCksCiAgICBKU19DRlVOQ19NQUdJQ19ERUYoIm9uZXMiLCAxLCBqc191bWF0X2NsYXNzX2NyZWF0ZSwgMSksCiAgICBKU19QUk9QX0lOVDMyX0RFRigiQ1ZfOFUiLCBDVl9NQUtFVFlQRShDVl84VSwgMSksIEpTX1BST1BfRU5VTUVSQUJMRSksCn07CgppbnQKanNfdW1hdF9pbml0KEpTQ29udGV4dCogY3R4LCBKU01vZHVsZURlZiogbSkgewogIGlmKGpzX3VtYXRfY2xhc3NfaWQgPT0gMCkgewogICAgLyogY3JlYXRlIHRoZSBVTWF0IGNsYXNzICovCiAgICBKU19OZXdDbGFzc0lEKCZqc191bWF0X2NsYXNzX2lkKTsKICAgIEpTX05ld0NsYXNzKEpTX0dldFJ1bnRpbWUoY3R4KSwganNfdW1hdF9jbGFzc19pZCwgJmpzX3VtYXRfY2xhc3MpOwoKICAgIHVtYXRfcHJvdG8gPSBKU19OZXdPYmplY3QoY3R4KTsKICAgIEpTX1NldFByb3BlcnR5RnVuY3Rpb25MaXN0KGN0eCwgdW1hdF9wcm90bywganNfdW1hdF9wcm90b19mdW5jcywgY291bnRvZihqc191bWF0X3Byb3RvX2Z1bmNzKSk7CiAgICBKU19TZXRDbGFzc1Byb3RvKGN0eCwganNfdW1hdF9jbGFzc19pZCwgdW1hdF9wcm90byk7CgogICAgdW1hdF9jbGFzcyA9IEpTX05ld0NGdW5jdGlvbjIoY3R4LCBqc191bWF0X2N0b3IsICJVTWF0IiwgMiwgSlNfQ0ZVTkNfY29uc3RydWN0b3IsIDApOwogICAgLyogc2V0IHByb3RvLmNvbnN0cnVjdG9yIGFuZCBjdG9yLnByb3RvdHlwZSAqLwogICAgSlNfU2V0Q29uc3RydWN0b3IoY3R4LCB1bWF0X2NsYXNzLCB1bWF0X3Byb3RvKTsKCiAgICBKU19TZXRQcm9wZXJ0eUZ1bmN0aW9uTGlzdChjdHgsIHVtYXRfY2xhc3MsIGpzX3VtYXRfc3RhdGljX2Z1bmNzLCBjb3VudG9mKGpzX3VtYXRfc3RhdGljX2Z1bmNzKSk7CgogICAgLyogIEpTVmFsdWUgZyA9IEpTX0dldEdsb2JhbE9iamVjdChjdHgpOwogICAgICBpbnQzMmFycmF5X2N0b3IgPSBKU19HZXRQcm9wZXJ0eShjdHgsIGcsIEpTX0FUT01fSW50MzJBcnJheSk7CiAgICAgIGludDMyYXJyYXlfcHJvdG8gPSBKU19HZXRQcm90b3R5cGUoY3R4LCBpbnQzMmFycmF5X2N0b3IpOwoKICAgICAgSlNfRnJlZVZhbHVlKGN0eCwgZyk7Ki8KICB9CgogIGlmKG0pCiAgICBKU19TZXRNb2R1bGVFeHBvcnQoY3R4LCBtLCAiVU1hdCIsIHVtYXRfY2xhc3MpOwogIHJldHVybiAwOwp9CgpleHRlcm4gIkMiIFZJU0lCTEUgdm9pZApqc191bWF0X2V4cG9ydChKU0NvbnRleHQqIGN0eCwgSlNNb2R1bGVEZWYqIG0pIHsKICBKU19BZGRNb2R1bGVFeHBvcnQoY3R4LCBtLCAiVU1hdCIpOwp9CgojaWYgZGVmaW5lZChKU19VTUFUX01PRFVMRSkKI2RlZmluZSBKU19JTklUX01PRFVMRSAvKlZJU0lCTEUqLyBqc19pbml0X21vZHVsZQojZWxzZQojZGVmaW5lIEpTX0lOSVRfTU9EVUxFIC8qVklTSUJMRSovIGpzX2luaXRfbW9kdWxlX3VtYXQKI2VuZGlmCgpleHRlcm4gIkMiIFZJU0lCTEUgSlNNb2R1bGVEZWYqCkpTX0lOSVRfTU9EVUxFKEpTQ29udGV4dCogY3R4LCBjb25zdCBjaGFyKiBtb2R1bGVfbmFtZSkgewogIEpTTW9kdWxlRGVmKiBtOwogIG0gPSBKU19OZXdDTW9kdWxlKGN0eCwgbW9kdWxlX25hbWUsICZqc191bWF0X2luaXQpOwogIGlmKCFtKQogICAgcmV0dXJuIE5VTEw7CiAganNfdW1hdF9leHBvcnQoY3R4LCBtKTsKICByZXR1cm4gbTsKfQAAAAAAAAAASnQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAO3QAAAAAAAA7dAAAAAAAAAAAAAAAAPC/"
				],
				[
					41,
					1,
					"insert",
					{
						"characters": " "
					},
					"AgAAAHJzAAAAAAAAc3MAAAAAAAAAAAAAc3MAAAAAAABzcwAAAAAAAAcAAABWSVNJQkxF",
					"AQAAAAAAAAABAAAAcnMAAAAAAAB5cwAAAAAAAAAAAAAAAPC/"
				],
				[
					44,
					2,
					"left_delete",
					null,
					"AgAAAAhzAAAAAAAACHMAAAAAAAABAAAAKgdzAAAAAAAAB3MAAAAAAAABAAAALw",
					"AQAAAAAAAAABAAAACXMAAAAAAAAJcwAAAAAAAAAAAAAAAPC/"
				],
				[
					46,
					2,
					"left_delete",
					null,
					"AgAAAA9zAAAAAAAAD3MAAAAAAAABAAAALw5zAAAAAAAADnMAAAAAAAABAAAAKg",
					"AQAAAAAAAAABAAAAEHMAAAAAAAAQcwAAAAAAAAAAAAAAAPC/"
				],
				[
					50,
					1,
					"insert",
					{
						"characters": " "
					},
					"AgAAADpzAAAAAAAAO3MAAAAAAAAAAAAAO3MAAAAAAAA7cwAAAAAAAA0AAAAgLypWSVNJQkxFKi8g",
					"AQAAAAAAAAABAAAAOnMAAAAAAABHcwAAAAAAAAAAAAAAAPC/"
				],
				[
					51,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAAA0dAAAI2luY2x1ZGUgImpzYmluZGluZ3MuaHBwIgojaW5jbHVkZSAianNfdW1hdC5ocHAiCiNpbmNsdWRlICJqc19zaXplLmhwcCIKI2luY2x1ZGUgImpzX3BvaW50LmhwcCIKI2luY2x1ZGUgImpzX3JlY3QuaHBwIgojaW5jbHVkZSAianNfYXJyYXkuaHBwIgojaW5jbHVkZSAianNfdHlwZWRfYXJyYXkuaHBwIgojaW5jbHVkZSAianNfYWxsb2MuaHBwIgojaW5jbHVkZSAiZ2VvbWV0cnkuaHBwIgojaW5jbHVkZSAidXRpbC5ocHAiCiNpbmNsdWRlICIuLi9xdWlja2pzL2N1dGlscy5oIgojaW5jbHVkZSA8bGlzdD4KI2luY2x1ZGUgPG1hcD4KI2luY2x1ZGUgPGZzdHJlYW0+CgplbnVtIHsKICBQUk9QX0NPTFMgPSAwLAogIFBST1BfUk9XUywKICBQUk9QX0NIQU5ORUxTLAogIFBST1BfVFlQRSwKICBQUk9QX0RFUFRILAogIFBST1BfRU1QVFksCiAgUFJPUF9UT1RBTCwKICBQUk9QX1NJWkUsCiAgUFJPUF9DT05USU5VT1VTLAogIFBST1BfU1VCTUFUUklYLAogIFBST1BfU1RFUCwKICBQUk9QX0VMRU1TSVpFLAogIFBST1BfRUxFTVNJWkUxCn07CgplbnVtIHsKICBNRVRIT0RfQ09MID0gMCwKICBNRVRIT0RfUk9XLAogIE1FVEhPRF9DT0xfUkFOR0UsCiAgTUVUSE9EX1JPV19SQU5HRSwKICBNRVRIT0RfQ0xPTkUsCiAgTUVUSE9EX1JPSSwKICBNRVRIT0RfUkVMRUFTRSwKICBNRVRIT0RfRFVQLAogIE1FVEhPRF9DTEVBUiwKICBNRVRIT0RfUkVTRVQsCiAgTUVUSE9EX1NURVAxLAogIE1FVEhPRF9MT0NBVEVfUk9JLAogIE1FVEhPRF9aRVJPLAogIE1FVEhPRF9PTkUsCiAgTUVUSE9EX1pFUk9TLAogIE1FVEhPRF9PTkVTCn07CgplbnVtIHsgVU1BVF9FWFBSX0FORCA9IDAsIFVNQVRfRVhQUl9PUiwgVU1BVF9FWFBSX1hPUiwgVU1BVF9FWFBSX01VTCB9OwplbnVtIHsgVU1BVF9JVEVSQVRPUl9LRVlTLCBVTUFUX0lURVJBVE9SX1ZBTFVFUywgVU1BVF9JVEVSQVRPUl9FTlRSSUVTIH07CmV4dGVybiAiQyIgewoKc3RhdGljIHZvaWQKanNfdW1hdF9mcmVlX2Z1bmMoSlNSdW50aW1lKiBydCwgdm9pZCogb3BhcXVlLCB2b2lkKiBwdHIpIHsKICBzdGF0aWNfY2FzdDxKU1VNYXREYXRhKj4ob3BhcXVlKS0+cmVsZWFzZSgpOwp9Cn0KCnR5cGVkZWYgc3RydWN0IEpTVU1hdEl0ZXJhdG9yRGF0YSB7CiAgSlNWYWx1ZSBvYmosIGJ1ZjsKICB1aW50MzJfdCByb3csIGNvbDsKICBpbnQgbWFnaWM7Cn0gSlNVTWF0SXRlcmF0b3JEYXRhOwoKVklTSUJMRSBKU1VNYXREYXRhKgpqc191bWF0X2RhdGEoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB2YWwpIHsKICByZXR1cm4gc3RhdGljX2Nhc3Q8SlNVTWF0RGF0YSo+KEpTX0dldE9wYXF1ZTIoY3R4LCB2YWwsIGpzX3VtYXRfY2xhc3NfaWQpKTsKfQoKc3RhdGljIGlubGluZSBzdGQ6OnZlY3RvcjxpbnQ+CmpzX3VtYXRfc2l6ZXMoY29uc3QgSlNVTWF0RGF0YSYgdW1hdCkgewogIGNvbnN0IGN2OjpNYXRTaXplIHNpemUodW1hdC5zaXplKTsKICBzdGQ6OnZlY3RvcjxpbnQ+IHNpemVzOwogIGlmKHVtYXQuZGltcyA9PSAyKSB7CiAgICBzaXplcy5wdXNoX2JhY2sodW1hdC5yb3dzKTsKICAgIHNpemVzLnB1c2hfYmFjayh1bWF0LmNvbHMpOwogIH0gZWxzZSB7CiAgICBzdGQ6OmNvcHkoJnNpemVbMF0sICZzaXplW3NpemUuZGltcygpXSwgc3RkOjpiYWNrX2luc2VydGVyKHNpemVzKSk7CiAgfQogIHJldHVybiBzaXplczsKfQoKc3RhdGljIGlubGluZSBzdGQ6OnZlY3RvcjxzdGQ6OnN0cmluZz4KanNfdW1hdF9kaW1lbnNpb25zKGNvbnN0IEpTVU1hdERhdGEmIHVtYXQpIHsKICBzdGQ6OnZlY3RvcjxpbnQ+IHNpemVzID0ganNfdW1hdF9zaXplcyh1bWF0KTsKICBzdGQ6OnZlY3RvcjxzdGQ6OnN0cmluZz4gZGltZW5zaW9uczsKCiAgc3RkOjp0cmFuc2Zvcm0oc2l6ZXMuY2JlZ2luKCksCiAgICAgICAgICAgICAgICAgc2l6ZXMuY2VuZCgpLAogICAgICAgICAgICAgICAgIHN0ZDo6YmFja19pbnNlcnRlcihkaW1lbnNpb25zKSwKICAgICAgICAgICAgICAgICBzdGF0aWNfY2FzdDxzdGQ6OnN0cmluZyAoKikoaW50KT4oJnN0ZDo6dG9fc3RyaW5nKSk7CiAgcmV0dXJuIGRpbWVuc2lvbnM7Cn0KCiNpZmRlZiBERUJVR19VTUFUCnN0YXRpYyBpbmxpbmUgc3RkOjptYXA8dm9pZCosIHN0ZDo6dmVjdG9yPEpTVU1hdERhdGEqPj4KanNfdW1hdF9kYXRhKHZvaWQqIGRhdGEgPSBudWxscHRyKSB7CiAgc3RkOjptYXA8dm9pZCosIHN0ZDo6dmVjdG9yPEpTVU1hdERhdGEqPj4gcmV0OwogIGZvcihhdXRvIHVtYXQgOiB1bWF0X2xpc3QpIHsKICAgIGNvbnN0IGF1dG8gdSA9IHVtYXQtPnU7CiAgICBpZih1ICE9IG51bGxwdHIgJiYgKGRhdGEgPT0gbnVsbHB0ciB8fCB1ID09IGRhdGEpKSB7CiAgICAgIHZvaWQqIGRhdGEgPSB1OwogICAgICBpZihyZXQuZmluZChkYXRhKSA9PSByZXQuZW5kKCkpIHsKICAgICAgICBzdGQ6OnZlY3RvcjxKU1VNYXREYXRhKj4gdnt1bWF0fTsKICAgICAgICByZXQuaW5zZXJ0KHtkYXRhLCB2fSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0W2RhdGFdLnB1c2hfYmFjayh1bWF0KTsKICAgICAgfQogICAgfQogIH0KICByZXR1cm4gcmV0Owp9CgpzdGF0aWMgaW5saW5lIHZvaWQKanNfdW1hdF9wcmludF9kYXRhKGNvbnN0IHN0ZDo6bWFwPHZvaWQqLCBzdGQ6OnZlY3RvcjxKU1VNYXREYXRhKj4+JiBkYXRhLCBzaXplX3QgbWluU2l6ZSA9IDEpIHsKCiAgZm9yKGNvbnN0IGF1dG8mIFtrZXksIHZhbHVlXSA6IGRhdGEpIHsKCiAgICBpZih2YWx1ZS5zaXplKCkgPj0gbWluU2l6ZSkgewogICAgICBzdGQ6OmNlcnIgPDwgImRhdGEgQCIgPDwga2V5IDw8ICIgPSI7CgogICAgICBmb3IoY29uc3QgYXV0byYgcHRyIDogdmFsdWUpIHsKICAgICAgICBzaXplX3QgcmVmY291bnQgPSBwdHItPnUgPyBwdHItPnUtPnJlZmNvdW50IDogMDsKICAgICAgICBzdGQ6OmNlcnIgPDwgIiBVTWF0IEAiIDw8IHN0YXRpY19jYXN0PHZvaWQqPihwdHIpOwogICAgICAgIGlmKHJlZmNvdW50ID4gMSkKICAgICAgICAgIHN0ZDo6Y2VyciA8PCAiIChyZWZjb3VudD0iIDw8IHJlZmNvdW50IDw8ICIpIjsKICAgICAgfQogICAgICBzdGQ6OmNlcnIgPDwgc3RkOjplbmRsOwogICAgfQogIH0KfQoKc3RhdGljIGlubGluZSB2b2lkCmpzX3VtYXRfZHVtcChKU1VNYXREYXRhKiBjb25zdCBzKSB7CiAgYXV0byBwb3NMaXN0ID0gc3RkOjpmaW5kKHVtYXRfbGlzdC5jYmVnaW4oKSwgdW1hdF9saXN0LmNlbmQoKSwgcyk7CiAgYm9vbCBpbkxpc3QgPSBwb3NMaXN0ICE9IHVtYXRfbGlzdC5jZW5kKCk7CiAgYm9vbCBpbkZyZWVkID0gc3RkOjpmaW5kKHVtYXRfZnJlZWQuY2JlZ2luKCksIHVtYXRfZnJlZWQuY2VuZCgpLCBzKSAhPSB1bWF0X2ZyZWVkLmNlbmQoKTsKICBjb25zdCBhdXRvIHUgPSBzLT51OwogIHN0ZDo6Y2VyciA8PCAiIFVNYXQiCiAgICAgICAgICAgIDw8ICJbIiA8PCAocG9zTGlzdCAtIHVtYXRfbGlzdC5jYmVnaW4oKSkgPDwgIl09IiA8PCBzdGF0aWNfY2FzdDx2b2lkKj4ocyk7CgogIGlmKGluTGlzdCkKICAgIHN0ZDo6Y2VyciA8PCAiLCBpbkxpc3Q9IiA8PCAoaW5MaXN0ID8gInRydWUiIDogImZhbHNlIik7CiAgaWYoaW5GcmVlZCkKICAgIHN0ZDo6Y2VyciA8PCAiLCBpbkZyZWVkPSIgPDwgKGluRnJlZWQgPyAidHJ1ZSIgOiAiZmFsc2UiKTsKCiAgaWYocy0+cm93cyB8fCBzLT5jb2xzIHx8IHMtPmNoYW5uZWxzKCkgPiAxIHx8IHMtPmRlcHRoKCkgPiAwKSB7CiAgICBzdGQ6OmNlcnIgPDwgIiwgcm93cz0iIDw8IHMtPnJvd3M7CiAgICBzdGQ6OmNlcnIgPDwgIiwgY29scz0iIDw8IHMtPmNvbHM7CiAgICBzdGQ6OmNlcnIgPDwgIiwgY2hhbm5lbHM9IiA8PCBzLT5jaGFubmVscygpOwogICAgc3RkOjpjZXJyIDw8ICIsIGRlcHRoPSIgPDwgcy0+ZGVwdGgoKTsKICB9CgogIGlmKHUgIT0gbnVsbHB0cikgewoKICAgIC8vIGlmKHUtPnJlZmNvdW50KQogICAgc3RkOjpjZXJyIDw8ICIsIHJlZmNvdW50PSIgPDwgdS0+cmVmY291bnQ7CiAgICBpZih1LT5kYXRhKQogICAgICBzdGQ6OmNlcnIgPDwgIiwgZGF0YT0iIDw8IHN0YXRpY19jYXN0PHZvaWQqPih1LT5kYXRhKTsKICAgIGlmKHUtPnNpemUpCiAgICAgIHN0ZDo6Y2VyciA8PCAiLCBzaXplPSIgPDwgdS0+c2l6ZTsKICB9Cn0KI2VuZGlmCgpWSVNJQkxFIEpTVmFsdWUKanNfdW1hdF9uZXcoSlNDb250ZXh0KiBjdHgsIHVpbnQzMl90IHJvd3MsIHVpbnQzMl90IGNvbHMsIGludCB0eXBlKSB7CiAgSlNWYWx1ZSByZXQ7CiAgSlNVTWF0RGF0YSogdW07CgogIGlmKEpTX0lzVW5kZWZpbmVkKHVtYXRfcHJvdG8pKQogICAganNfdW1hdF9pbml0KGN0eCwgTlVMTCk7CgogIHJldCA9IEpTX05ld09iamVjdFByb3RvQ2xhc3MoY3R4LCB1bWF0X3Byb3RvLCBqc191bWF0X2NsYXNzX2lkKTsKCiAgdW0gPSBqc19hbGxvY2F0ZTxjdjo6VU1hdD4oY3R4KTsKCiAgaWYoY29scyB8fCByb3dzIHx8IHR5cGUpIHsKICAgIG5ldyh1bSkgY3Y6OlVNYXQocm93cywgY29scywgdHlwZSk7CiAgfSBlbHNlIHsKICAgIG5ldyh1bSkgY3Y6OlVNYXQoKTsKICB9CgogIC8vIHVtLT5hZGRyZWYoKTsKI2lmZGVmIERFQlVHX1VNQVQKICBzdGQ6OmNlcnIgPDwgKChjb2xzID4gMCB8fCByb3dzID4gMCkgPyAianNfdW1hdF9uZXcgKGgsdykiIDogImpzX3VtYXRfbmV3ICAgICAgIik7CiAganNfdW1hdF9kdW1wKHVtKTsKICBzdGQ6OmNlcnIgPDwgc3RkOjplbmRsOwojZW5kaWYKCiAgSlNfU2V0T3BhcXVlKHJldCwgdW0pOwogIHJldHVybiByZXQ7Cn0KCnN0YXRpYyBzdGQ6OnBhaXI8SlNTaXplRGF0YTx1aW50MzJfdD4sIGludD4KanNfdW1hdF9wYXJhbXMoSlNDb250ZXh0KiBjdHgsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QqIGFyZ3YpIHsKICBKU1NpemVEYXRhPHVpbnQzMl90PiBzaXplOwogIGludDMyX3QgdHlwZSA9IDA7CiAgaWYoYXJnYyA+IDApIHsKICAgIGlmKGpzX3NpemVfcmVhZChjdHgsIGFyZ3ZbMF0sICZzaXplKSkgewogICAgICBhcmd2Kys7CiAgICAgIGFyZ2MtLTsKICAgIH0gZWxzZSB7CiAgICAgIEpTX1RvVWludDMyKGN0eCwgJnNpemUuaGVpZ2h0LCBhcmd2WzBdKTsKICAgICAgSlNfVG9VaW50MzIoY3R4LCAmc2l6ZS53aWR0aCwgYXJndlsxXSk7CiAgICAgIGFyZ3YgKz0gMjsKICAgICAgYXJnYyAtPSAyOwogICAgfQogICAgaWYoYXJnYyA+IDApIHsKICAgICAgaWYoIUpTX1RvSW50MzIoY3R4LCAmdHlwZSwgYXJndlswXSkpIHsKICAgICAgICBhcmd2Kys7CiAgICAgICAgYXJnYy0tOwogICAgICB9CiAgICB9CiAgfQogIHJldHVybiBzdGQ6Om1ha2VfcGFpcihzaXplLCB0eXBlKTsKfQoKc3RhdGljIEpTVmFsdWUKanNfdW1hdF9jdG9yKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgbmV3X3RhcmdldCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCogYXJndikgewoKICBjb25zdCBhdXRvJiBbc2l6ZSwgdHlwZV0gPSBqc191bWF0X3BhcmFtcyhjdHgsIGFyZ2MsIGFyZ3YpOwoKICByZXR1cm4ganNfdW1hdF9uZXcoY3R4LCBzaXplLmhlaWdodCwgc2l6ZS53aWR0aCwgdHlwZSk7Cn0KCnZvaWQKanNfdW1hdF9maW5hbGl6ZXIoSlNSdW50aW1lKiBydCwgSlNWYWx1ZSB2YWwpIHsKICBKU1VNYXREYXRhKiB1bTsKCiAgaWYoKHVtID0gc3RhdGljX2Nhc3Q8SlNVTWF0RGF0YSo+KEpTX0dldE9wYXF1ZSh2YWwsIGpzX3VtYXRfY2xhc3NfaWQpKSkpIHsKICAgIHVtLT5yZWxlYXNlKCk7CiAgICBqc19kZWFsbG9jYXRlKHJ0LCB1bSk7CiAgfQogIC8vIEpTX0ZyZWVWYWx1ZVJUKHJ0LCB2YWwpOwp9CgpzdGF0aWMgSlNWYWx1ZQpqc191bWF0X2Z1bmNzKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QqIGFyZ3YsIGludCBtYWdpYykgewogIEpTVmFsdWUgcmV0ID0gSlNfVU5ERUZJTkVEOwogIGludDY0X3QgaSA9IC0xLCBpMiA9IC0xOwogIEpTUG9pbnREYXRhPGRvdWJsZT4gcHQ7CiAgSlNVTWF0RGF0YSogdW0gPSBqc191bWF0X2RhdGEoY3R4LCB0aGlzX3ZhbCk7CgogIGlmKGFyZ2MgPiAwKSB7CiAgICBKU19Ub0ludDY0KGN0eCwgJmksIGFyZ3ZbMF0pOwogICAgcHQgPSBqc19wb2ludF9nZXQoY3R4LCBhcmd2WzBdKTsKICAgIGlmKGFyZ2MgPiAxKSB7CiAgICAgIEpTX1RvSW50NjQoY3R4LCAmaTIsIGFyZ3ZbMV0pOwogICAgfQogIH0KICBzd2l0Y2gobWFnaWMpIHsKICAgIGNhc2UgTUVUSE9EX0NPTDogewogICAgICByZXQgPSBqc191bWF0X3dyYXAoY3R4LCB1bS0+Y29sKGkpKTsKICAgICAgYnJlYWs7CiAgICB9CiAgICBjYXNlIE1FVEhPRF9ST1c6IHsKICAgICAgcmV0ID0ganNfdW1hdF93cmFwKGN0eCwgdW0tPnJvdyhpKSk7CiAgICAgIGJyZWFrOwogICAgfQogICAgY2FzZSBNRVRIT0RfQ09MX1JBTkdFOiB7CiAgICAgIHJldCA9IGpzX3VtYXRfd3JhcChjdHgsIHVtLT5jb2xSYW5nZShpLCBpMikpOwogICAgICBicmVhazsKICAgIH0KICAgIGNhc2UgTUVUSE9EX1JPV19SQU5HRTogewogICAgICByZXQgPSBqc191bWF0X3dyYXAoY3R4LCB1bS0+cm93UmFuZ2UoaSwgaTIpKTsKICAgICAgYnJlYWs7CiAgICB9CiAgICBjYXNlIE1FVEhPRF9DTE9ORTogewogICAgICByZXQgPSBqc191bWF0X3dyYXAoY3R4LCB1bS0+Y2xvbmUoKSk7CiAgICAgIGJyZWFrOwogICAgfQogICAgY2FzZSBNRVRIT0RfUk9JOiB7CiAgICAgIEpTUmVjdERhdGE8ZG91YmxlPiByZWN0ID0gezAsIDAsIDAsIDB9OwoKICAgICAgaWYoYXJnYyA+IDApCiAgICAgICAgcmVjdCA9IGpzX3JlY3RfZ2V0KGN0eCwgYXJndlswXSk7CgogICAgICByZXQgPSBqc191bWF0X3dyYXAoY3R4LCAoKnVtKShyZWN0KSk7CiAgICAgIGJyZWFrOwogICAgfQogICAgY2FzZSBNRVRIT0RfUkVMRUFTRTogewogICAgICB1bS0+cmVsZWFzZSgpOwogICAgICBicmVhazsKICAgIH0KICAgIGNhc2UgTUVUSE9EX0RVUDogewogICAgICByZXQgPSBqc191bWF0X3dyYXAoY3R4LCAqdW0pOwogICAgICBicmVhazsKICAgIH0KICAgIGNhc2UgTUVUSE9EX0NMRUFSOiB7CiAgICAgICp1bSA9IGN2OjpVTWF0Ojp6ZXJvcyh1bS0+cm93cywgdW0tPmNvbHMsIHVtLT50eXBlKCkpOwogICAgICBicmVhazsKICAgIH0KICAgIGNhc2UgTUVUSE9EX1JFU0VUOiB7CiAgICAgICp1bSA9IGN2OjpVTWF0KCk7CiAgICAgIGJyZWFrOwogICAgfQogICAgY2FzZSBNRVRIT0RfU1RFUDE6IHsKICAgICAgaW50MzJfdCBpID0gMDsKCiAgICAgIEpTX1RvSW50MzIoY3R4LCAmaSwgYXJndlswXSk7CiAgICAgIHJldCA9IEpTX05ld0ludDY0KGN0eCwgdW0tPnN0ZXAxKGkpKTsKICAgICAgYnJlYWs7CiAgICB9CiAgICBjYXNlIE1FVEhPRF9MT0NBVEVfUk9JOiB7CiAgICAgIGN2OjpTaXplIHdob2xlU2l6ZTsKICAgICAgY3Y6OlBvaW50IG9mczsKICAgICAgdW0tPmxvY2F0ZVJPSSh3aG9sZVNpemUsIG9mcyk7CiAgICAgIGpzX3NpemVfd3JpdGUoY3R4LCBhcmd2WzBdLCB3aG9sZVNpemUpOwogICAgICBqc19wb2ludF93cml0ZShjdHgsIGFyZ3ZbMF0sIG9mcyk7CiAgICAgIGJyZWFrOwogICAgfQoKICAgIGRlZmF1bHQ6IHsKICAgICAgcmV0ID0gSlNfRVhDRVBUSU9OOwogICAgICBicmVhazsKICAgIH0KICB9CgogIHJldHVybiByZXQ7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX3VtYXRfaW5pdChKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2LCBpbnQgbWFnaWMpIHsKICBKU1ZhbHVlIHJldCA9IEpTX1VOREVGSU5FRDsKICBKU1VNYXREYXRhKiB1bTsKCiAgYXV0byBbc2l6ZSwgdHlwZV0gPSBqc191bWF0X3BhcmFtcyhjdHgsIGFyZ2MsIGFyZ3YpOwoKICBpZigodW0gPSBqc191bWF0X2RhdGEoY3R4LCB0aGlzX3ZhbCkpKSB7CiAgICBpZihzaXplLndpZHRoID09IDAgfHwgc2l6ZS5oZWlnaHQgPT0gMCkgewogICAgICBpZih1bS0+cm93cyAmJiB1bS0+Y29scykgewogICAgICAgIHNpemUud2lkdGggPSB1bS0+Y29sczsKICAgICAgICBzaXplLmhlaWdodCA9IHVtLT5yb3dzOwogICAgICAgIHR5cGUgPSB1bS0+dHlwZSgpOwogICAgICB9CiAgICB9CiAgICByZXQgPSBKU19EdXBWYWx1ZShjdHgsIHRoaXNfdmFsKTsKICB9IGVsc2UgaWYoc2l6ZS53aWR0aCA+IDAgJiYgc2l6ZS5oZWlnaHQgPiAwKSB7CiAgICByZXQgPSBqc191bWF0X25ldyhjdHgsIHNpemUuaGVpZ2h0LCBzaXplLndpZHRoLCB0eXBlKTsKCiAgICB1bSA9IGpzX3VtYXRfZGF0YShjdHgsIHJldCk7CiAgfSBlbHNlIHsKICAgIHJldHVybiBKU19FWENFUFRJT047CiAgfQoKICBjdjo6VU1hdCYgdW1hdCA9ICp1bTsKCiAgc3dpdGNoKG1hZ2ljKSB7CiAgICBjYXNlIDA6IHsKICAgICAgdW1hdCA9IGN2OjpVTWF0Ojp6ZXJvcyhzaXplLCB0eXBlKTsKICAgICAgYnJlYWs7CiAgICB9CiAgICBjYXNlIDE6IHsKICAgICAgdW1hdCA9IGN2OjpVTWF0OjpvbmVzKHNpemUsIHR5cGUpOwogICAgICBicmVhazsKICAgIH0KICB9CgogIHJldHVybiByZXQ7Cn0KCnRlbXBsYXRlPGNsYXNzIFQ+CnZvaWQKanNfdW1hdF9nZXQoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgdWludDMyX3Qgcm93LCB1aW50MzJfdCBjb2wsIFQmIHZhbHVlKSB7CiAgY3Y6OlVNYXQqIHVtID0ganNfdW1hdF9kYXRhKGN0eCwgdGhpc192YWwpOwoKICBpZih1bSkKICAgIHZhbHVlID0gbWF0X2F0PFQ+KCp1bSwgcm93LCBjb2wpOwogIGVsc2UKICAgIHZhbHVlID0gVCgpOwp9CgpzdGF0aWMgSlNWYWx1ZQpqc191bWF0X2dldChKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCB1aW50MzJfdCByb3csIHVpbnQzMl90IGNvbCkgewogIEpTVmFsdWUgcmV0ID0gSlNfRVhDRVBUSU9OOwogIGN2OjpVTWF0KiB1bSA9IGpzX3VtYXRfZGF0YShjdHgsIHRoaXNfdmFsKTsKCiAgaWYodW0pIHsKICAgIHVpbnQzMl90IGJ5dGVzID0gKDEgPDwgdW0tPmRlcHRoKCkpICogdW0tPmNoYW5uZWxzKCk7CiAgICBzaXplX3QgY2hhbm5lbHMgPSBtYXRfY2hhbm5lbHMoKnVtKTsKCiAgICBpZihjaGFubmVscyA9PSAxKSB7CiAgICAgIHN3aXRjaCh1bS0+dHlwZSgpKSB7CgogICAgICAgIGNhc2UgQ1ZfOFVDMTogewogICAgICAgICAgdWludDhfdCB2YWx1ZTsKICAgICAgICAgIGpzX3VtYXRfZ2V0KGN0eCwgdGhpc192YWwsIHJvdywgY29sLCB2YWx1ZSk7CiAgICAgICAgICByZXQgPSBKU19OZXdVaW50MzIoY3R4LCB2YWx1ZSk7CiAgICAgICAgICBicmVhazsKICAgICAgICB9CgogICAgICAgIGNhc2UgQ1ZfMTZVQzE6IHsKICAgICAgICAgIHVpbnQxNl90IHZhbHVlOwogICAgICAgICAganNfdW1hdF9nZXQoY3R4LCB0aGlzX3ZhbCwgcm93LCBjb2wsIHZhbHVlKTsKICAgICAgICAgIHJldCA9IEpTX05ld1VpbnQzMihjdHgsIHZhbHVlKTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KICAgICAgICBjYXNlIENWXzMyU0MxOiB7CiAgICAgICAgICBpbnQzMl90IHZhbHVlOwogICAgICAgICAganNfdW1hdF9nZXQoY3R4LCB0aGlzX3ZhbCwgcm93LCBjb2wsIHZhbHVlKTsKICAgICAgICAgIHJldCA9IEpTX05ld0ludDMyKGN0eCwgdmFsdWUpOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQogICAgICAgIGNhc2UgQ1ZfMzJGQzE6IHsKICAgICAgICAgIGZsb2F0IHZhbHVlOwogICAgICAgICAganNfdW1hdF9nZXQoY3R4LCB0aGlzX3ZhbCwgcm93LCBjb2wsIHZhbHVlKTsKICAgICAgICAgIHJldCA9IEpTX05ld0Zsb2F0NjQoY3R4LCB2YWx1ZSk7CiAgICAgICAgICBicmVhazsKICAgICAgICB9CiAgICAgICAgY2FzZSBDVl82NEZDMTogewogICAgICAgICAgZG91YmxlIHZhbHVlOwogICAgICAgICAganNfdW1hdF9nZXQoY3R4LCB0aGlzX3ZhbCwgcm93LCBjb2wsIHZhbHVlKTsKICAgICAgICAgIHJldCA9IEpTX05ld0Zsb2F0NjQoY3R4LCB2YWx1ZSk7CiAgICAgICAgICBicmVhazsKICAgICAgICB9CiAgICAgICAgZGVmYXVsdDogewogICAgICAgICAgcmV0ID0gSlNfVGhyb3dUeXBlRXJyb3IoY3R4LCAiSW52YWxpZCBVTWF0IHR5cGUgJXUiLCB1bS0+dHlwZSgpKTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KICAgICAgfQoKICAgICAgcmV0dXJuIHJldDsKICAgIH0KICB9CiAgcmV0dXJuIEpTX1VOREVGSU5FRDsKfQoKc3RhdGljIGludApqc191bWF0X2dldF93aChKU0NvbnRleHQqIGN0eCwgSlNNYXREaW1lbnNpb25zKiBzaXplLCBKU1ZhbHVlQ29uc3Qgb2JqKSB7CiAgY3Y6OlVNYXQqIHVtID0ganNfdW1hdF9kYXRhKGN0eCwgb2JqKTsKCiAgaWYodW0pIHsKICAgIHNpemUtPnJvd3MgPSB1bS0+cm93czsKICAgIHNpemUtPmNvbHMgPSB1bS0+Y29sczsKICAgIHJldHVybiAxOwogIH0KICByZXR1cm4gMDsKfQoKc3RhdGljIEpTVmFsdWUKanNfdW1hdF9hdChKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2KSB7CiAgSlNVTWF0RGF0YSogdW0gPSBqc191bWF0X2RhdGEoY3R4LCB0aGlzX3ZhbCk7CiAgaWYoIXVtKQogICAgcmV0dXJuIEpTX0VYQ0VQVElPTjsKICBKU1BvaW50RGF0YTxkb3VibGU+IHB0OwogIEpTVmFsdWUgcmV0OwogIHVpbnQzMl90IHJvdyA9IDAsIGNvbCA9IDA7CiAgaWYoanNfcG9pbnRfcmVhZChjdHgsIGFyZ3ZbMF0sICZwdCkpIHsKICAgIGNvbCA9IHB0Lng7CiAgICByb3cgPSBwdC55OwogIH0gZWxzZSBpZihhcmdjID49IDIgJiYgSlNfSXNOdW1iZXIoYXJndlswXSkgJiYgSlNfSXNOdW1iZXIoYXJndlsxXSkpIHsKICAgIEpTX1RvVWludDMyKGN0eCwgJnJvdywgYXJndlswXSk7CiAgICBKU19Ub1VpbnQzMihjdHgsICZjb2wsIGFyZ3ZbMV0pOwogICAgYXJnYyAtPSAyOwogICAgYXJndiArPSAyOwogIH0gZWxzZSBpZihhcmdjID49IDEgJiYgSlNfSXNOdW1iZXIoYXJndlswXSkpIHsKICAgIEpTTWF0RGltZW5zaW9ucyBkaW0gPSB7c3RhdGljX2Nhc3Q8dWludDMyX3Q+KHVtLT5yb3dzKSwgc3RhdGljX2Nhc3Q8dWludDMyX3Q+KHVtLT5jb2xzKX07CiAgICB1aW50MzJfdCBpZHg7CgogICAgSlNfVG9VaW50MzIoY3R4LCAmaWR4LCBhcmd2WzBdKTsKICAgIHJvdyA9IGlkeCAvIGRpbS5jb2xzOwogICAgY29sID0gaWR4ICUgZGltLmNvbHM7CiAgfQoKICByZXR1cm4ganNfdW1hdF9nZXQoY3R4LCB0aGlzX3ZhbCwgcm93LCBjb2wpOwp9CgpzdGF0aWMgSlNWYWx1ZQpqc191bWF0X3NldChKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2KSB7CiAgY3Y6OlVNYXQqIHVtID0ganNfdW1hdF9kYXRhKGN0eCwgdGhpc192YWwpOwogIHVpbnQzMl90IGJ5dGVzOwogIGlmKCF1bSkKICAgIHJldHVybiBKU19FWENFUFRJT047CgogIEpTUG9pbnREYXRhPGRvdWJsZT4gcHQ7CiAgSlNWYWx1ZSByZXQ7CiAgaW50MzJfdCBjb2wgPSAtMSwgcm93ID0gLTE7CgogIGlmKGpzX3BvaW50X3JlYWQoY3R4LCBhcmd2WzBdLCAmcHQpKSB7CiAgICBjb2wgPSBwdC54OwogICAgcm93ID0gcHQueTsKICAgIGFyZ2MtLTsKICAgIGFyZ3YrKzsKICB9IGVsc2UgewogICAgaWYoYXJnYyA+PSAxKSB7CiAgICAgIEpTX1RvSW50MzIoY3R4LCAmcm93LCBhcmd2WzBdKTsKICAgICAgYXJnYy0tOwogICAgICBhcmd2Kys7CiAgICB9CiAgICBpZihhcmdjID49IDEpIHsKICAgICAgSlNfVG9JbnQzMihjdHgsICZjb2wsIGFyZ3ZbMF0pOwogICAgICBhcmdjLS07CiAgICAgIGFyZ3YrKzsKICAgIH0KICB9CiAgYnl0ZXMgPSAoMSA8PCB1bS0+ZGVwdGgoKSkgKiB1bS0+Y2hhbm5lbHMoKTsKICBpZih1bS0+dHlwZSgpID09IENWXzMyRkMxKSB7CiAgICBkb3VibGUgZGF0YTsKICAgIGlmKEpTX1RvRmxvYXQ2NChjdHgsICZkYXRhLCBhcmd2WzBdKSkKICAgICAgcmV0dXJuIEpTX0VYQ0VQVElPTjsKICAgIG1hdF9hdDxmbG9hdD4oKnVtLCByb3csIGNvbCkgPSAoZmxvYXQpZGF0YTsKICB9IGVsc2UgaWYoYnl0ZXMgPD0gc2l6ZW9mKHVpbnQpKSB7CiAgICB1aW50MzJfdCBtYXNrID0gKDFMVSA8PCAoYnl0ZXMgKiA4KSkgLSAxOwogICAgdWludDMyX3QgZGF0YTsKICAgIGlmKEpTX1RvVWludDMyKGN0eCwgJmRhdGEsIGFyZ3ZbMF0pKQogICAgICByZXR1cm4gSlNfRVhDRVBUSU9OOwoKICAgIGlmKGJ5dGVzIDw9IDEpIHsKICAgICAgdWludDhfdCogcCA9ICZtYXRfYXQ8dWludDhfdD4oKnVtLCByb3csIGNvbCk7CiAgICAgICpwID0gKHVpbnQ4X3QpZGF0YSAmIG1hc2s7CiAgICB9IGVsc2UgaWYoYnl0ZXMgPD0gMikgewogICAgICB1aW50MTZfdCogcCA9ICZtYXRfYXQ8dWludDE2X3Q+KCp1bSwgcm93LCBjb2wpOwogICAgICAqcCA9ICh1aW50MTZfdClkYXRhICYgbWFzazsKCiAgICB9IGVsc2UgaWYoYnl0ZXMgPD0gNCkgewogICAgICB1aW50KiBwID0gJm1hdF9hdDx1aW50PigqdW0sIHJvdywgY29sKTsKICAgICAgKnAgPSAodWludClkYXRhICYgbWFzazsKICAgIH0KCiAgfSBlbHNlCiAgICByZXR1cm4gSlNfVU5ERUZJTkVEOwogIHJldHVybiBKU19VTkRFRklORUQ7Cn0KCnRlbXBsYXRlPGNsYXNzIFQ+CnR5cGVuYW1lIHN0ZDo6ZW5hYmxlX2lmPHN0ZDo6aXNfaW50ZWdyYWw8VD46OnZhbHVlLCB2b2lkPjo6dHlwZQpqc191bWF0X3ZlY3Rvcl9nZXQoSlNDb250ZXh0KiBjdHgsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QqIGFyZ3YsIHN0ZDo6dmVjdG9yPFQ+JiBvdXRwdXQsIHN0ZDo6dmVjdG9yPGJvb2w+JiBkZWZpbmVkKSB7CiAgb3V0cHV0LnJlc2l6ZShzdGF0aWNfY2FzdDxzaXplX3Q+KGFyZ2MpKTsKICBkZWZpbmVkLnJlc2l6ZShzdGF0aWNfY2FzdDxzaXplX3Q+KGFyZ2MpKTsKICBmb3IoaW50IGkgPSAwOyBpIDwgYXJnYzsgaSsrKSB7CiAgICB1aW50MzJfdCB2YWwgPSAwOwogICAgYm9vbCBpc0RlZiA9IEpTX0lzTnVtYmVyKGFyZ3ZbaV0pICYmICFKU19Ub1VpbnQzMihjdHgsICZ2YWwsIGFyZ3ZbaV0pOwoKICAgIG91dHB1dFtpXSA9IHZhbDsKICAgIGRlZmluZWRbaV0gPSBpc0RlZjsKICB9Cn0KCnRlbXBsYXRlPGNsYXNzIFQ+CnR5cGVuYW1lIHN0ZDo6ZW5hYmxlX2lmPHN0ZDo6aXNfZmxvYXRpbmdfcG9pbnQ8VD46OnZhbHVlLCB2b2lkPjo6dHlwZQpqc191bWF0X3ZlY3Rvcl9nZXQoSlNDb250ZXh0KiBjdHgsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QqIGFyZ3YsIHN0ZDo6dmVjdG9yPFQ+JiBvdXRwdXQsIHN0ZDo6dmVjdG9yPGJvb2w+JiBkZWZpbmVkKSB7CiAgb3V0cHV0LnJlc2l6ZShzdGF0aWNfY2FzdDxzaXplX3Q+KGFyZ2MpKTsKICBkZWZpbmVkLnJlc2l6ZShzdGF0aWNfY2FzdDxzaXplX3Q+KGFyZ2MpKTsKICBmb3IoaW50IGkgPSAwOyBpIDwgYXJnYzsgaSsrKSB7CiAgICBkb3VibGUgdmFsID0gMDsKICAgIGJvb2wgaXNEZWYgPSBKU19Jc051bWJlcihhcmd2W2ldKSAmJiAhSlNfVG9GbG9hdDY0KGN0eCwgJnZhbCwgYXJndltpXSk7CgogICAgb3V0cHV0W2ldID0gdmFsOwogICAgZGVmaW5lZFtpXSA9IGlzRGVmOwogIH0KfQoKdGVtcGxhdGU8Y2xhc3MgVD4KdHlwZW5hbWUgc3RkOjplbmFibGVfaWY8c3RkOjppc19pbnRlZ3JhbDx0eXBlbmFtZSBUOjp2YWx1ZV90eXBlPjo6dmFsdWUsIHZvaWQ+Ojp0eXBlCmpzX3VtYXRfdmVjdG9yX2dldChKU0NvbnRleHQqIGN0eCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCogYXJndiwgc3RkOjp2ZWN0b3I8VD4mIG91dHB1dCwgc3RkOjp2ZWN0b3I8Ym9vbD4mIGRlZmluZWQpIHsKICBjb25zdCBzaXplX3QgYml0cyA9IChzaXplb2YodHlwZW5hbWUgVDo6dmFsdWVfdHlwZSkgKiA4KTsKICBjb25zdCBzaXplX3QgbiA9IFQ6OmNoYW5uZWxzOwogIG91dHB1dC5yZXNpemUoc3RhdGljX2Nhc3Q8c2l6ZV90PihhcmdjKSk7CiAgZGVmaW5lZC5yZXNpemUoc3RhdGljX2Nhc3Q8c2l6ZV90PihhcmdjKSk7CiAgZm9yKGludCBpID0gMDsgaSA8IGFyZ2M7IGkrKykgewogICAgZG91YmxlIHZhbCA9IDA7CiAgICBib29sIGlzRGVmID0gSlNfSXNOdW1iZXIoYXJndltpXSkgJiYgIUpTX1RvRmxvYXQ2NChjdHgsICZ2YWwsIGFyZ3ZbaV0pOwogICAgaWYoaXNEZWYpIHsKICAgICAgY29uc3QgdWludDY0X3QgbWFzayA9ICgxVSA8PCBiaXRzKSAtIDE7CiAgICAgIHVpbnQ2NF90IGl2YWwgPSB2YWw7CiAgICAgIGZvcihpbnQgaiA9IDA7IGogPCBuOyBqKyspIHsKICAgICAgICBvdXRwdXRbaV1bal0gPSBpdmFsICYgbWFzazsKICAgICAgICBpdmFsID4+PSBiaXRzOwogICAgICB9CiAgICB9CiAgICBkZWZpbmVkW2ldID0gaXNEZWY7CiAgfQp9OwoKdGVtcGxhdGU8Y2xhc3MgVD4Kc3RhdGljIHN0ZDo6dmVjdG9yPFQ+CmpzX3VtYXRfc2V0X3ZlY3RvcihKU0NvbnRleHQqIGN0eCwgSlNVTWF0RGF0YSogdW0sIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QqIGFyZ3YpIHsKICBKU01hdERpbWVuc2lvbnMgZGltID0ge3N0YXRpY19jYXN0PHVpbnQzMl90Pih1bS0+cm93cyksIHN0YXRpY19jYXN0PHVpbnQzMl90Pih1bS0+Y29scyl9OwogIHVpbnQzMl90IGlkeDsKICBzdGQ6OnZlY3Rvcjxib29sPiBkZWZpbmVkOwogIHN0ZDo6dmVjdG9yPFQ+IHY7CiAganNfdW1hdF92ZWN0b3JfZ2V0KGN0eCwgYXJnYywgYXJndiwgdiwgZGVmaW5lZCk7CgogIGZvcihpZHggPSAwOyBpZHggPCB2LnNpemUoKTsgaWR4KyspCiAgICBpZihkZWZpbmVkW2lkeF0pCiAgICAgIG1hdF9hdDxUPigqdW0sIGlkeCAvIGRpbS5jb2xzLCBpZHggJSBkaW0uY29scykgPSB2W2lkeF07CiAgcmV0dXJuIHY7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX3VtYXRfc2V0X3RvKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QqIGFyZ3YpIHsKICBKU1VNYXREYXRhKiBtID0ganNfdW1hdF9kYXRhKGN0eCwgdGhpc192YWwpOwogIHVpbnQzMl90IGJ5dGVzOwogIHN0ZDo6dmVjdG9yPGJvb2w+IGRlZmluZWQ7CgogIGlmKCFtKQogICAgcmV0dXJuIEpTX0VYQ0VQVElPTjsKCiAgaWYobS0+Y2hhbm5lbHMoKSA9PSAxKSB7CiAgICBkb3VibGUgdmFsdWU7CiAgICBqc192YWx1ZV90byhjdHgsIGFyZ3ZbMF0sIHZhbHVlKTsKICAgIG0tPnNldFRvKGN2OjpTY2FsYXIodmFsdWUpKTsKCiAgfSBlbHNlIGlmKGpzX2lzX2FycmF5KGN0eCwgYXJndlswXSkpIHsKICAgIGN2OjpTY2FsYXIgczsKICAgIHNpemVfdCBuID0ganNfYXJyYXlfdG8oY3R4LCBhcmd2WzBdLCBzKTsKICAgIGlmKG4gPj0gbS0+Y2hhbm5lbHMoKSkgewogICAgICBtLT5zZXRUbyhzKTsKICAgICAgcmV0dXJuIEpTX1VOREVGSU5FRDsKICAgIH0KICB9CgogIGJ5dGVzID0gbS0+ZWxlbVNpemUoKTsKCiAgcmV0dXJuIEpTX1VOREVGSU5FRDsKfQoKc3RhdGljIEpTVmFsdWUKanNfdW1hdF9nZXRfcHJvcHMoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgaW50IG1hZ2ljKSB7CiAgY3Y6OlVNYXQqIHVtID0ganNfdW1hdF9kYXRhKGN0eCwgdGhpc192YWwpOwogIGlmKCF1bSkKICAgIHJldHVybiBKU19FWENFUFRJT047CgogIHN3aXRjaChtYWdpYykgewogICAgY2FzZSBQUk9QX0NPTFM6IHJldHVybiBKU19OZXdVaW50MzIoY3R4LCB1bS0+Y29scyk7CiAgICBjYXNlIFBST1BfUk9XUzogcmV0dXJuIEpTX05ld1VpbnQzMihjdHgsIHVtLT5yb3dzKTsKICAgIGNhc2UgUFJPUF9DSEFOTkVMUzogcmV0dXJuIEpTX05ld1VpbnQzMihjdHgsIHVtLT5jaGFubmVscygpKTsKICAgIGNhc2UgUFJPUF9UWVBFOiByZXR1cm4gSlNfTmV3VWludDMyKGN0eCwgdW0tPnR5cGUoKSk7CiAgICBjYXNlIFBST1BfREVQVEg6IHJldHVybiBKU19OZXdVaW50MzIoY3R4LCB1bS0+ZGVwdGgoKSk7CiAgICBjYXNlIFBST1BfRU1QVFk6IHJldHVybiBKU19OZXdCb29sKGN0eCwgdW0tPmVtcHR5KCkpOwogICAgY2FzZSBQUk9QX1RPVEFMOiByZXR1cm4gSlNfTmV3RmxvYXQ2NChjdHgsIHVtLT50b3RhbCgpKTsKICAgIGNhc2UgUFJPUF9TSVpFOiByZXR1cm4ganNfc2l6ZV9uZXcoY3R4LCB1bS0+Y29scywgdW0tPnJvd3MpOwogICAgY2FzZSBQUk9QX0NPTlRJTlVPVVM6IHJldHVybiBKU19OZXdCb29sKGN0eCwgdW0tPmlzQ29udGludW91cygpKTsKICAgIGNhc2UgUFJPUF9TVUJNQVRSSVg6IHJldHVybiBKU19OZXdCb29sKGN0eCwgdW0tPmlzU3VibWF0cml4KCkpOwogICAgY2FzZSBQUk9QX1NURVA6IHJldHVybiBKU19OZXdVaW50MzIoY3R4LCB1bS0+c3RlcCk7CiAgICBjYXNlIFBST1BfRUxFTVNJWkU6IHJldHVybiBKU19OZXdVaW50MzIoY3R4LCB1bS0+ZWxlbVNpemUoKSk7CiAgICBjYXNlIFBST1BfRUxFTVNJWkUxOiByZXR1cm4gSlNfTmV3VWludDMyKGN0eCwgdW0tPmVsZW1TaXplMSgpKTsKICB9CgogIHJldHVybiBKU19VTkRFRklORUQ7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX3VtYXRfdG9zdHJpbmcoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCogYXJndikgewogIGN2OjpVTWF0KiB1bSA9IGpzX3VtYXRfZGF0YShjdHgsIHRoaXNfdmFsKTsKICBpbnQgeCwgeTsKCiAgc3RkOjpvc3RyaW5nc3RyZWFtIG9zOwogIHN0ZDo6c3RyaW5nIHN0cjsKICBpbnQgaSA9IDA7CiAgaWYoIXVtKQogICAgcmV0dXJuIEpTX0VYQ0VQVElPTjsKCiAgb3MgPDwgIlVNYXQoIjsKCiAgaWYoZmFsc2UgJiYgKHVtLT5yb3dzID4gMCAmJiB1bS0+Y29scyA+IDApICYmIHVtLT5kaW1zID09IDIpIHsKICAgIG9zIDw8IHVtLT5yb3dzIDw8ICIsICIgPDwgdW0tPmNvbHM7CiAgfSBlbHNlIHsKICAgIHN0ZDo6dmVjdG9yPHN0ZDo6c3RyaW5nPiBzaXplU3RycyA9IGpzX3VtYXRfZGltZW5zaW9ucygqdW0pOwogICAgb3MgPDwgIlsiIDw8IGpvaW4oc2l6ZVN0cnMuY2JlZ2luKCksIHNpemVTdHJzLmNlbmQoKSwgIiwgIikgPDwgIl0iOwogIH0KCiAgaWYodW0tPmRlcHRoKCkgPT0gQ1ZfOFUgfHwgdW0tPmNoYW5uZWxzKCkgPiAxKSB7CiAgICBvcyA8PCAiLCAiOwogICAgY29uc3QgY2hhciogdHN0cjsKICAgIHN3aXRjaCh1bS0+ZGVwdGgoKSAmIDcpIHsKICAgICAgY2FzZSBDVl84VTogdHN0ciA9ICJDVl84VSI7IGJyZWFrOwogICAgICBjYXNlIENWXzhTOiB0c3RyID0gIkNWXzhTIjsgYnJlYWs7CiAgICAgIGNhc2UgQ1ZfMTZVOiB0c3RyID0gIkNWXzE2VSI7IGJyZWFrOwogICAgICBjYXNlIENWXzE2UzogdHN0ciA9ICJDVl8xNlMiOyBicmVhazsKICAgICAgY2FzZSBDVl8zMlM6IHRzdHIgPSAiQ1ZfMzJTIjsgYnJlYWs7CiAgICAgIGNhc2UgQ1ZfMzJGOiB0c3RyID0gIkNWXzMyRiI7IGJyZWFrOwogICAgICBjYXNlIENWXzY0RjogdHN0ciA9ICJDVl82NEYiOyBicmVhazsKICAgIH0KICAgIG9zIDw8IHRzdHIgPDwgJ0MnIDw8IHVtLT5jaGFubmVscygpIDw8ICIpIiAvKjw8IHN0ZDo6ZW5kbCovOwogIH0gZWxzZSB7CiAgICBvcyA8PCAiVU1hdFsiOwogICAgZm9yKHkgPSAwOyB5IDwgdW0tPnJvd3M7IHkrKykgewogICAgICBvcyA8PCAiXG4gICI7CgogICAgICBmb3IoeCA9IDA7IHggPCB1bS0+Y29sczsgeCsrKSB7CiAgICAgICAgaWYoeCA+IDApCiAgICAgICAgICBvcyA8PCAnLCc7CiAgICAgICAgaWYodW0tPnR5cGUoKSA9PSBDVl8zMkZDMSkKICAgICAgICAgIG9zIDw8IG1hdF9hdDxmbG9hdD4oKnVtLCB5LCB4KTsKICAgICAgICBlbHNlCiAgICAgICAgICBvcyA8PCBzdGQ6OnNldGZpbGwoJzAnKSA8PCBzdGQ6OnNldGJhc2UoMTYpIDw8IHN0ZDo6c2V0dyh1bS0+dHlwZSgpID09IENWXzhVQzQgPyA4IDogdW0tPnR5cGUoKSA9PSBDVl84VUMxID8gMiA6IDYpCiAgICAgICAgICAgICA8PCBtYXRfYXQ8dWludDMyX3Q+KCp1bSwgeSwgeCk7CiAgICAgIH0KICAgIH0KCiAgICBvcyA8PCAnXScgLyo8PCBzdGQ6OmVuZGwqLzsKICB9CiAgb3MgPDwgJyAnOwogIG9zIDw8ICh2b2lkKil1bS0+ZWxlbVNpemUoKTsKICBvcyA8PCAieCI7CiAgb3MgPDwgKHZvaWQqKXVtLT50b3RhbCgpOwogIG9zIDw8ICIgQCI7CiAgb3MgPDwgKHZvaWQqKW1hdF9wdHIoKnVtKTsKCiAgc3RyID0gb3Muc3RyKCk7CgogIHJldHVybiBKU19OZXdTdHJpbmdMZW4oY3R4LCBzdHIuZGF0YSgpLCBzdHIuc2l6ZSgpKTsKfQoKc3RhdGljIEpTVmFsdWUKanNfdW1hdF9pbnNwZWN0KEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QqIGFyZ3YpIHsKICBjdjo6VU1hdCogdW0gPSBqc191bWF0X2RhdGEoY3R4LCB0aGlzX3ZhbCk7CiAgaW50IHgsIHk7CgogIHN0ZDo6b3N0cmluZ3N0cmVhbSBvczsKICBzdGQ6OnN0cmluZyBzdHI7CiAgaW50IGkgPSAwOwogIGlmKCF1bSkKICAgIHJldHVybiBKU19FWENFUFRJT047CgogIGludCBieXRlcyA9IDEgPDwgKCh1bS0+dHlwZSgpICYgMHg3KSA+PiAxKTsKICBjaGFyIHNpZ24gPSAodW0tPnR5cGUoKSAmIDB4NykgPj0gNSA/ICdGJyA6ICh1bS0+dHlwZSgpICYgMSkgPyAnUycgOiAnVSc7CgogIHN0ZDo6dmVjdG9yPHN0ZDo6c3RyaW5nPiBzaXplU3RycyA9IGpzX3VtYXRfZGltZW5zaW9ucygqdW0pOwogIDsKCiAgb3MgPDwgIlVNYXQgIgogICAgIC8qICAgICA8PCAiQCAiCiAgICAgICAgICA8PCByZWludGVycHJldF9jYXN0PHZvaWQqPihyZWludGVycHJldF9jYXN0PGNoYXIqPih1bSkgICkqLwogICAgIDw8ICIgWyAiOwogIGlmKHNpemVTdHJzLnNpemUoKSB8fCB1bS0+dHlwZSgpKSB7CiAgICBvcyA8PCAic2l6ZTogIiBDT0xPUl9ZRUxMT1cgIiIgPDwgam9pbihzaXplU3Rycy5jYmVnaW4oKSwgc2l6ZVN0cnMuY2VuZCgpLCAiIiBDT0xPUl9OT05FICIqIiBDT0xPUl9ZRUxMT1cgIiIpCiAgICAgICA8PCAiIiBDT0xPUl9OT05FICIsICI7CiAgICBvcyA8PCAidHlwZTogIiBDT0xPUl9ZRUxMT1cgIkNWXyIgPDwgKGJ5dGVzICogOCkgPDwgc2lnbiA8PCAnQycgPDwgdW0tPmNoYW5uZWxzKCkgPDwgIiIgQ09MT1JfTk9ORSAiLCAiOwogICAgb3MgPDwgImVsZW1TaXplOiAiIENPTE9SX1lFTExPVyAiIiA8PCB1bS0+ZWxlbVNpemUoKSA8PCAiIiBDT0xPUl9OT05FICIsICI7CiAgICBvcyA8PCAiZWxlbVNpemUxOiAiIENPTE9SX1lFTExPVyAiIiA8PCB1bS0+ZWxlbVNpemUxKCkgPDwgIiIgQ09MT1JfTk9ORSAiLCAiOwogICAgb3MgPDwgInRvdGFsOiAiIENPTE9SX1lFTExPVyAiIiA8PCB1bS0+dG90YWwoKSA8PCAiIiBDT0xPUl9OT05FICIsICI7CiAgICBvcyA8PCAiZGltczogIiBDT0xPUl9ZRUxMT1cgIiIgPDwgdW0tPmRpbXMgPDwgIiIgQ09MT1JfTk9ORSAiIjsKICB9IGVsc2UgewogICAgb3MgPDwgImVtcHR5IjsKICB9CiAgaWYodW0tPnUpCiAgICBvcyA8PCAiLCByZWZjb3VudDogIiBDT0xPUl9ZRUxMT1cgIiIgPDwgdW0tPnUtPnJlZmNvdW50OwogIG9zIDw8ICIiIENPTE9SX05PTkUgIiBdIjsKICBzdHIgPSBvcy5zdHIoKTsKICByZXR1cm4gSlNfTmV3U3RyaW5nTGVuKGN0eCwgc3RyLmRhdGEoKSwgc3RyLnNpemUoKSk7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX3VtYXRfY29udmVydF90byhKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2KSB7CiAgSlNVTWF0RGF0YSAqdW0sICpvdXRwdXQ7CiAgaW50MzJfdCBydHlwZTsKICBkb3VibGUgYWxwaGEgPSAxLCBiZXRhID0gMDsKCiAgdW0gPSBqc191bWF0X2RhdGEoY3R4LCB0aGlzX3ZhbCk7CiAgb3V0cHV0ID0ganNfdW1hdF9kYXRhKGN0eCwgYXJndlswXSk7CgogIGlmKHVtID09IG51bGxwdHIgfHwgb3V0cHV0ID09IG51bGxwdHIpCiAgICByZXR1cm4gSlNfRVhDRVBUSU9OOwoKICBKU19Ub0ludDMyKGN0eCwgJnJ0eXBlLCBhcmd2WzFdKTsKCiAgaWYoYXJnYyA+PSAzKQogICAgSlNfVG9GbG9hdDY0KGN0eCwgJmFscGhhLCBhcmd2WzJdKTsKCiAgaWYoYXJnYyA+PSA0KQogICAgSlNfVG9GbG9hdDY0KGN0eCwgJmJldGEsIGFyZ3ZbM10pOwoKICB1bS0+Y29udmVydFRvKCpvdXRwdXQsIHJ0eXBlLCBhbHBoYSwgYmV0YSk7CgogIHJldHVybiBKU19VTkRFRklORUQ7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX3VtYXRfY29weV90byhKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2KSB7CiAgSlNVTWF0RGF0YSAqdW0gPSBudWxscHRyLCAqb3V0cHV0ID0gbnVsbHB0ciwgKm1hc2sgPSBudWxscHRyOwoKICB1bSA9IGpzX3VtYXRfZGF0YShjdHgsIHRoaXNfdmFsKTsKICBvdXRwdXQgPSBqc191bWF0X2RhdGEoY3R4LCBhcmd2WzBdKTsKCiAgaWYoYXJnYyA+IDEpCiAgICBtYXNrID0ganNfdW1hdF9kYXRhKGN0eCwgYXJndlsxXSk7CgogIGlmKHVtID09IG51bGxwdHIgfHwgb3V0cHV0ID09IG51bGxwdHIpCiAgICByZXR1cm4gSlNfRVhDRVBUSU9OOwoKICBpZihtYXNrKQogICAgdW0tPmNvcHlUbygqb3V0cHV0LCAqbWFzayk7CiAgZWxzZQogICAgdW0tPmNvcHlUbygqb3V0cHV0KTsKICAvKmlmKG1hc2spCiAgICB1bS0+Y29weVRvKCpvdXRwdXQsICptYXNrKTsKICBlbHNlCiAgICAqb3V0cHV0ID0gKnVtOyovCgogIHJldHVybiBKU19VTkRFRklORUQ7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX3VtYXRfcmVzaGFwZShKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2KSB7CiAgSlNVTWF0RGF0YSAqdW0sIHVtYXQ7CiAgaW50MzJfdCBjbiwgcm93cyA9IDA7CiAgSlNWYWx1ZSByZXQgPSBKU19FWENFUFRJT047CgogIHVtID0ganNfdW1hdF9kYXRhKGN0eCwgdGhpc192YWwpOwoKICBpZih1bSA9PSBudWxscHRyIHx8IGFyZ2MgPCAxKQogICAgcmV0dXJuIHJldDsKCiAgaWYoYXJnYyA+PSAxICYmIEpTX0lzTnVtYmVyKGFyZ3ZbMF0pKSB7CiAgICBKU19Ub0ludDMyKGN0eCwgJmNuLCBhcmd2WzBdKTsKICAgIGFyZ3YrKzsKICAgIGFyZ2MtLTsKICB9IGVsc2UgewogICAgY24gPSB1bS0+Y2hhbm5lbHMoKTsKICB9CgogIGlmKGFyZ2MgPj0gMSkgewogICAgc3RkOjp2ZWN0b3I8aW50PiBuZXdzaGFwZTsKICAgIGlmKGpzX2lzX2FycmF5KGN0eCwgYXJndlswXSkpIHsKICAgICAganNfYXJyYXlfdG8oY3R4LCBhcmd2WzBdLCBuZXdzaGFwZSk7CiAgICAgIGlmKGFyZ2MgPj0gMiAmJiBKU19Jc051bWJlcihhcmd2WzFdKSkgewogICAgICAgIHVpbnQzMl90IG5kaW1zOwogICAgICAgIEpTX1RvVWludDMyKGN0eCwgJm5kaW1zLCBhcmd2WzFdKTsKICAgICAgICBpZihuZGltcyA+IG5ld3NoYXBlLnNpemUoKSkKICAgICAgICAgIHJldHVybiBKU19FWENFUFRJT047CiAgICAgICAgdW1hdCA9IHVtLT5yZXNoYXBlKGNuLCBuZGltcywgJm5ld3NoYXBlWzBdKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB1bWF0ID0gdW0tPnJlc2hhcGUoY24sIG5ld3NoYXBlLnNpemUoKSwgJm5ld3NoYXBlWzBdKTsKICAgICAgfQogICAgfSBlbHNlIGlmKEpTX0lzTnVtYmVyKGFyZ3ZbMF0pKSB7CiAgICAgIEpTX1RvSW50MzIoY3R4LCAmcm93cywgYXJndlswXSk7CiAgICAgIHVtYXQgPSB1bS0+cmVzaGFwZShjbiwgcm93cyk7CiAgICB9CiAgICByZXQgPSBqc191bWF0X3dyYXAoY3R4LCB1bWF0KTsKICB9CgogIHJldHVybiByZXQ7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX3VtYXRfZ2V0bWF0KEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QqIGFyZ3YpIHsKICBKU1VNYXREYXRhKiB1bTsKICBKU01hdERhdGEgbWF0OwogIGludDMyX3QgYWNjZXNzRmxhZ3M7CiAgSlNWYWx1ZSByZXQgPSBKU19FWENFUFRJT047CgogIHVtID0ganNfdW1hdF9kYXRhKGN0eCwgdGhpc192YWwpOwoKICBpZih1bSA9PSBudWxscHRyIHx8IGFyZ2MgPCAxKQogICAgcmV0dXJuIHJldDsKCiAgaWYoanNfdW1hdF9jbGFzc19pZCA9PSAwKQogICAgcmV0dXJuIEpTX05VTEw7CgogIEpTX1RvSW50MzIoY3R4LCAmYWNjZXNzRmxhZ3MsIGFyZ3ZbMF0pOwoKICBtYXQgPSB1bS0+Z2V0TWF0KGN2OjpBY2Nlc3NGbGFnKGFjY2Vzc0ZsYWdzKSk7CgogIHJldHVybiBqc19tYXRfd3JhcChjdHgsIG1hdCk7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX3VtYXRfZmlsbChKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2LCBpbnQgbWFnaWMpIHsKICBKU1VNYXREYXRhKiB1bTsKCiAgdW0gPSBqc191bWF0X2RhdGEoY3R4LCB0aGlzX3ZhbCk7CgogIGlmKHVtID09IG51bGxwdHIpCiAgICByZXR1cm4gSlNfRVhDRVBUSU9OOwoKICBpZih1bS0+ZW1wdHkoKSB8fCB1bS0+cm93cyA9PSAwIHx8IHVtLT5jb2xzID09IDApCiAgICByZXR1cm4gSlNfRVhDRVBUSU9OOwoKICBjdjo6VU1hdCYgdW1hdCA9ICp1bTsKCiAgc3dpdGNoKG1hZ2ljKSB7CiAgICBjYXNlIDA6IHsKICAgICAgdW1hdCA9IGN2OjpVTWF0Ojp6ZXJvcyh1bWF0LnJvd3MsIHVtYXQuY29scywgdW1hdC50eXBlKCkpOwogICAgICBicmVhazsKICAgIH0KICAgIGNhc2UgMTogewogICAgICB1bWF0ID0gY3Y6OlVNYXQ6Om9uZXModW1hdC5yb3dzLCB1bWF0LmNvbHMsIHVtYXQudHlwZSgpKTsKICAgICAgYnJlYWs7CiAgICB9CiAgfQoKICByZXR1cm4gSlNfRHVwVmFsdWUoY3R4LCB0aGlzX3ZhbCk7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX3VtYXRfY2xhc3NfY3JlYXRlKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QqIGFyZ3YsIGludCBtYWdpYykgewogIEpTVmFsdWUgcmV0ID0gSlNfVU5ERUZJTkVEOwoKICBjb25zdCBhdXRvJiBbc2l6ZSwgdHlwZV0gPSBqc191bWF0X3BhcmFtcyhjdHgsIGFyZ2MsIGFyZ3YpOwoKICBpZihzaXplLndpZHRoID09IDAgfHwgc2l6ZS5oZWlnaHQgPT0gMCkKICAgIHJldHVybiBKU19FWENFUFRJT047CgogIHJldCA9IGpzX3VtYXRfbmV3KGN0eCwgdWludDMyX3QoMCksIHVpbnQzMl90KDApLCBpbnQoMCkpOwogIEpTVU1hdERhdGEmIHVtYXQgPSAqanNfdW1hdF9kYXRhKGN0eCwgcmV0KTsKCiAgc3dpdGNoKG1hZ2ljKSB7CiAgICBjYXNlIDA6IHsKICAgICAgdW1hdCA9IGN2OjpTY2FsYXI6OmFsbCgwKTsKICAgICAgYnJlYWs7CiAgICB9CiAgICBjYXNlIDE6IHsKICAgICAgdW1hdCA9IGN2OjpTY2FsYXI6OmFsbCgxKTsKICAgICAgYnJlYWs7CiAgICB9CiAgfQoKICByZXR1cm4gcmV0Owp9CgovKnN0YXRpYyBKU1ZhbHVlCmpzX3VtYXRfY3JlYXRlX3ZlYyhKU0NvbnRleHQqIGN0eCwgaW50IGxlbiwgSlNWYWx1ZSogdmVjKSB7CiAgSlNWYWx1ZSBvYmogPSBKU19FWENFUFRJT047CiAgaW50IGk7CgogIG9iaiA9IEpTX05ld0FycmF5KGN0eCk7CiAgaWYoIUpTX0lzRXhjZXB0aW9uKG9iaikpIHsKCiAgICBmb3IoaSA9IDA7IGkgPCBsZW47IGkrKykgewoKICAgICAgaWYoSlNfU2V0UHJvcGVydHlVaW50MzIoY3R4LCBvYmosIGksIHZlY1tpXSkgPCAwKSB7CiAgICAgICAgSlNfRnJlZVZhbHVlKGN0eCwgb2JqKTsKICAgICAgICByZXR1cm4gSlNfRVhDRVBUSU9OOwogICAgICB9CiAgICB9CiAgfQogIHJldHVybiBvYmo7Cn0qLwoKc3RhdGljIEpTVmFsdWUKanNfdW1hdF9idWZmZXIoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCkgewogIEpTVU1hdERhdGEqIHVtOwogIGN2OjpVTWF0RGF0YSogZGF0YTsKICBzaXplX3Qgc2l6ZTsKICB1aW50OF90KiBwdHI7CgogIGlmKCh1bSA9IGpzX3VtYXRfZGF0YShjdHgsIHRoaXNfdmFsKSkgPT0gbnVsbHB0cikKICAgIHJldHVybiBKU19FWENFUFRJT047CgogIGRhdGEgPSB1bS0+dTsKICBwdHIgPSBkYXRhID8gZGF0YS0+ZGF0YSA6IG51bGxwdHI7CiAgc2l6ZSA9IGRhdGEgPyBkYXRhLT5zaXplIDogMDsKCiAgaWYocHRyID09IG51bGxwdHIpCiAgICByZXR1cm4gSlNfTlVMTDsKCiAgdW0tPmFkZHJlZigpOwogIC8vIHVtLT5hZGRyZWYoKTsKCiAgcmV0dXJuIEpTX05ld0FycmF5QnVmZmVyKGN0eCwgcHRyLCBzaXplLCAmanNfdW1hdF9mcmVlX2Z1bmMsIHVtLCBGQUxTRSAvKlRSVUUqLyk7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX3VtYXRfYXJyYXkoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCkgewogIEpTVU1hdERhdGEqIHVtOwogIEpTVmFsdWVDb25zdCBnbG9iYWwsIHR5cGVkX2FycmF5LCBidWZmZXI7CiAgaW50IGVsZW1fc2l6ZTsKICBjb25zdCBjaGFyKiBjdG9yOwoKICBpZigodW0gPSBqc191bWF0X2RhdGEoY3R4LCB0aGlzX3ZhbCkpID09IG51bGxwdHIpCiAgICByZXR1cm4gSlNfRVhDRVBUSU9OOwoKICBlbGVtX3NpemUgPSB1bS0+ZWxlbVNpemUoKTsKCiAgZ2xvYmFsID0gSlNfR2V0R2xvYmFsT2JqZWN0KGN0eCk7CgogIHByaW50ZigidW0tPnR5cGUoKT0leCB1bS0+Y2hhbm5lbHMoKT0leFxuIiwgdW0tPnR5cGUoKSwgdW0tPmNoYW5uZWxzKCkpOwogIHN3aXRjaCh1bS0+dHlwZSgpKSB7CiAgICBjYXNlIENWXzhVOgogICAgY2FzZSBDVl84UzogY3RvciA9ICJVaW50OEFycmF5IjsgYnJlYWs7CiAgICBjYXNlIENWXzE2VToKICAgIGNhc2UgQ1ZfMTZTOiBjdG9yID0gIlVpbnQxNkFycmF5IjsgYnJlYWs7CiAgICBjYXNlIENWXzMyUzogY3RvciA9ICJJbnQzMkFycmF5IjsgYnJlYWs7CiAgICBjYXNlIENWXzMyRjogY3RvciA9ICJGbG9hdDMyQXJyYXkiOyBicmVhazsKICAgIGNhc2UgQ1ZfNjRGOiBjdG9yID0gIkZsb2F0NjRBcnJheSI7IGJyZWFrOwogICAgZGVmYXVsdDogSlNfVGhyb3dUeXBlRXJyb3IoY3R4LCAiY3Y6VU1hdCB0eXBlPSUwMnggY2hhbm5lbHM9JTAyeCIsIHVtLT50eXBlKCksIHVtLT5jaGFubmVscygpKTsgcmV0dXJuIEpTX0VYQ0VQVElPTjsKICB9CiAgdHlwZWRfYXJyYXkgPSBKU19HZXRQcm9wZXJ0eVN0cihjdHgsIGdsb2JhbCwgY3Rvcik7CiAgYnVmZmVyID0ganNfdW1hdF9nZXRfcHJvcHMoY3R4LCB0aGlzX3ZhbCwgOSk7CgogIHJldHVybiBKU19DYWxsQ29uc3RydWN0b3IoY3R4LCB0eXBlZF9hcnJheSwgMSwgJmJ1ZmZlcik7Cn0KCkpTVmFsdWUKanNfdW1hdF9jYWxsKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgZnVuY19vYmosIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCogYXJndiwgaW50IGZsYWdzKSB7CiAgY3Y6OlJlY3QgcmVjdCA9IHswLCAwLCAwLCAwfTsKICBKU1VNYXREYXRhKiBzcmM7CgogIGlmKChzcmMgPSBqc191bWF0X2RhdGEoY3R4LCBmdW5jX29iaikpID09IG51bGxwdHIpCiAgICByZXR1cm4gSlNfRVhDRVBUSU9OOwoKICBpZighanNfcmVjdF9yZWFkKGN0eCwgYXJndlswXSwgJnJlY3QpKQogICAgcmV0dXJuIEpTX1Rocm93VHlwZUVycm9yKGN0eCwgImFyZ3VtZW50IDEgZXhwZWN0aW5nIFJlY3QiKTsKICAvLyBwcmludGYoImpzX21hdF9jYWxsICV1LCV1ICV1eCV1XG4iLCByZWN0LngsIHJlY3QueSwgcmVjdC53aWR0aCwgcmVjdC5oZWlnaHQpOwoKICBjdjo6VU1hdCB1bWF0ID0gc3JjLT5vcGVyYXRvcigpKHJlY3QpOwogIHJldHVybiBqc191bWF0X3dyYXAoY3R4LCB1bWF0KTsKfQoKSlNDbGFzc0RlZiBqc191bWF0X2NsYXNzID0gewogICAgLmNsYXNzX25hbWUgPSAiVU1hdCIsCiAgICAuZmluYWxpemVyID0ganNfdW1hdF9maW5hbGl6ZXIsCiAgICAuY2FsbCA9IGpzX3VtYXRfY2FsbCwKfTsKCmNvbnN0IEpTQ0Z1bmN0aW9uTGlzdEVudHJ5IGpzX3VtYXRfcHJvdG9fZnVuY3NbXSA9IHsKICAgIEpTX0NHRVRTRVRfTUFHSUNfREVGKCJjb2xzIiwganNfdW1hdF9nZXRfcHJvcHMsIE5VTEwsIFBST1BfQ09MUyksCiAgICBKU19DR0VUU0VUX01BR0lDX0RFRigicm93cyIsIGpzX3VtYXRfZ2V0X3Byb3BzLCBOVUxMLCBQUk9QX1JPV1MpLAogICAgSlNfQ0dFVFNFVF9NQUdJQ19ERUYoImNoYW5uZWxzIiwganNfdW1hdF9nZXRfcHJvcHMsIE5VTEwsIFBST1BfQ0hBTk5FTFMpLAogICAgSlNfQ0dFVFNFVF9NQUdJQ19ERUYoInR5cGUiLCBqc191bWF0X2dldF9wcm9wcywgTlVMTCwgUFJPUF9UWVBFKSwKICAgIEpTX0NHRVRTRVRfTUFHSUNfREVGKCJkZXB0aCIsIGpzX3VtYXRfZ2V0X3Byb3BzLCBOVUxMLCBQUk9QX0RFUFRIKSwKICAgIEpTX0NHRVRTRVRfTUFHSUNfREVGKCJlbXB0eSIsIGpzX3VtYXRfZ2V0X3Byb3BzLCBOVUxMLCBQUk9QX0VNUFRZKSwKICAgIEpTX0NHRVRTRVRfTUFHSUNfREVGKCJ0b3RhbCIsIGpzX3VtYXRfZ2V0X3Byb3BzLCBOVUxMLCBQUk9QX1RPVEFMKSwKICAgIEpTX0NHRVRTRVRfTUFHSUNfREVGKCJzaXplIiwganNfdW1hdF9nZXRfcHJvcHMsIE5VTEwsIFBST1BfU0laRSksCiAgICBKU19DR0VUU0VUX01BR0lDX0RFRigiY29udGludW91cyIsIGpzX3VtYXRfZ2V0X3Byb3BzLCBOVUxMLCBQUk9QX0NPTlRJTlVPVVMpLAogICAgSlNfQ0dFVFNFVF9NQUdJQ19ERUYoInN1Ym1hdHJpeCIsIGpzX3VtYXRfZ2V0X3Byb3BzLCBOVUxMLCBQUk9QX1NVQk1BVFJJWCksCiAgICBKU19DR0VUU0VUX01BR0lDX0RFRigic3RlcCIsIGpzX3VtYXRfZ2V0X3Byb3BzLCBOVUxMLCBQUk9QX1NURVApLAogICAgSlNfQ0dFVFNFVF9NQUdJQ19ERUYoImVsZW1TaXplIiwganNfdW1hdF9nZXRfcHJvcHMsIE5VTEwsIFBST1BfRUxFTVNJWkUpLAogICAgSlNfQ0dFVFNFVF9NQUdJQ19ERUYoImVsZW1TaXplMSIsIGpzX3VtYXRfZ2V0X3Byb3BzLCBOVUxMLCBQUk9QX0VMRU1TSVpFMSksCiAgICBKU19DR0VUU0VUX0RFRigiYnVmZmVyIiwganNfdW1hdF9idWZmZXIsIE5VTEwpLAogICAgSlNfQ0dFVFNFVF9ERUYoImFycmF5IiwganNfdW1hdF9hcnJheSwgTlVMTCksCiAgICBKU19DRlVOQ19NQUdJQ19ERUYoImNvbCIsIDEsIGpzX3VtYXRfZnVuY3MsIE1FVEhPRF9DT0wpLAogICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJyb3ciLCAxLCBqc191bWF0X2Z1bmNzLCBNRVRIT0RfUk9XKSwKICAgIEpTX0NGVU5DX01BR0lDX0RFRigiY29sUmFuZ2UiLCAyLCBqc191bWF0X2Z1bmNzLCBNRVRIT0RfQ09MX1JBTkdFKSwKICAgIEpTX0NGVU5DX01BR0lDX0RFRigicm93UmFuZ2UiLCAyLCBqc191bWF0X2Z1bmNzLCBNRVRIT0RfUk9XX1JBTkdFKSwKICAgIEpTX0NGVU5DX01BR0lDX0RFRigiY2xvbmUiLCAwLCBqc191bWF0X2Z1bmNzLCBNRVRIT0RfQ0xPTkUpLAogICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJyb2kiLCAwLCBqc191bWF0X2Z1bmNzLCBNRVRIT0RfUk9JKSwKICAgIEpTX0NGVU5DX01BR0lDX0RFRigicmVsZWFzZSIsIDAsIGpzX3VtYXRfZnVuY3MsIE1FVEhPRF9SRUxFQVNFKSwKICAgIEpTX0NGVU5DX01BR0lDX0RFRigiZHVwIiwgMCwganNfdW1hdF9mdW5jcywgTUVUSE9EX0RVUCksCiAgICBKU19DRlVOQ19NQUdJQ19ERUYoImNsZWFyIiwgMCwganNfdW1hdF9mdW5jcywgTUVUSE9EX0NMRUFSKSwKICAgIEpTX0NGVU5DX01BR0lDX0RFRigicmVzZXQiLCAwLCBqc191bWF0X2Z1bmNzLCBNRVRIT0RfUkVTRVQpLAogICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJzdGVwMSIsIDAsIGpzX3VtYXRfZnVuY3MsIE1FVEhPRF9TVEVQMSksCiAgICBKU19DRlVOQ19NQUdJQ19ERUYoImxvY2F0ZVJPSSIsIDAsIGpzX3VtYXRfZnVuY3MsIE1FVEhPRF9MT0NBVEVfUk9JKSwKCiAgICBKU19DRlVOQ19NQUdJQ19ERUYoInplcm8iLCAyLCBqc191bWF0X2ZpbGwsIDApLAogICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJvbmUiLCAyLCBqc191bWF0X2ZpbGwsIDEpLAoKICAgIEpTX0NGVU5DX0RFRigidG9TdHJpbmciLCAwLCBqc191bWF0X3Rvc3RyaW5nKSwKICAgIEpTX0NGVU5DX0RFRigiaW5zcGVjdCIsIDAsIGpzX3VtYXRfaW5zcGVjdCksCiAgICBKU19DRlVOQ19ERUYoImF0IiwgMSwganNfdW1hdF9hdCksCiAgICBKU19DRlVOQ19ERUYoInNldCIsIDIsIGpzX3VtYXRfc2V0KSwKICAgIEpTX0NGVU5DX0RFRigic2V0VG8iLCAwLCBqc191bWF0X3NldF90byksCiAgICBKU19DRlVOQ19ERUYoImNvbnZlcnRUbyIsIDIsIGpzX3VtYXRfY29udmVydF90byksCiAgICBKU19DRlVOQ19ERUYoImNvcHlUbyIsIDEsIGpzX3VtYXRfY29weV90byksCiAgICBKU19DRlVOQ19ERUYoInJlc2hhcGUiLCAxLCBqc191bWF0X3Jlc2hhcGUpLAogICAgSlNfQ0ZVTkNfREVGKCJnZXRNYXQiLCAxLCBqc191bWF0X2dldG1hdCksCiAgICBKU19BTElBU19ERUYoIltTeW1ib2wudG9QcmltaXRpdmVdIiwgInRvU3RyaW5nIiksCgogICAgSlNfUFJPUF9TVFJJTkdfREVGKCJbU3ltYm9sLnRvU3RyaW5nVGFnXSIsICJVTWF0IiwgSlNfUFJPUF9DT05GSUdVUkFCTEUpCgp9OwoKY29uc3QgSlNDRnVuY3Rpb25MaXN0RW50cnkganNfdW1hdF9zdGF0aWNfZnVuY3NbXSA9IHsKICAgIEpTX0NGVU5DX01BR0lDX0RFRigiemVyb3MiLCAxLCBqc191bWF0X2NsYXNzX2NyZWF0ZSwgMCksCiAgICBKU19DRlVOQ19NQUdJQ19ERUYoIm9uZXMiLCAxLCBqc191bWF0X2NsYXNzX2NyZWF0ZSwgMSksCiAgICBKU19QUk9QX0lOVDMyX0RFRigiQ1ZfOFUiLCBDVl9NQUtFVFlQRShDVl84VSwgMSksIEpTX1BST1BfRU5VTUVSQUJMRSksCn07CgppbnQKanNfdW1hdF9pbml0KEpTQ29udGV4dCogY3R4LCBKU01vZHVsZURlZiogbSkgewogIGlmKGpzX3VtYXRfY2xhc3NfaWQgPT0gMCkgewogICAgLyogY3JlYXRlIHRoZSBVTWF0IGNsYXNzICovCiAgICBKU19OZXdDbGFzc0lEKCZqc191bWF0X2NsYXNzX2lkKTsKICAgIEpTX05ld0NsYXNzKEpTX0dldFJ1bnRpbWUoY3R4KSwganNfdW1hdF9jbGFzc19pZCwgJmpzX3VtYXRfY2xhc3MpOwoKICAgIHVtYXRfcHJvdG8gPSBKU19OZXdPYmplY3QoY3R4KTsKICAgIEpTX1NldFByb3BlcnR5RnVuY3Rpb25MaXN0KGN0eCwgdW1hdF9wcm90bywganNfdW1hdF9wcm90b19mdW5jcywgY291bnRvZihqc191bWF0X3Byb3RvX2Z1bmNzKSk7CiAgICBKU19TZXRDbGFzc1Byb3RvKGN0eCwganNfdW1hdF9jbGFzc19pZCwgdW1hdF9wcm90byk7CgogICAgdW1hdF9jbGFzcyA9IEpTX05ld0NGdW5jdGlvbjIoY3R4LCBqc191bWF0X2N0b3IsICJVTWF0IiwgMiwgSlNfQ0ZVTkNfY29uc3RydWN0b3IsIDApOwogICAgLyogc2V0IHByb3RvLmNvbnN0cnVjdG9yIGFuZCBjdG9yLnByb3RvdHlwZSAqLwogICAgSlNfU2V0Q29uc3RydWN0b3IoY3R4LCB1bWF0X2NsYXNzLCB1bWF0X3Byb3RvKTsKCiAgICBKU19TZXRQcm9wZXJ0eUZ1bmN0aW9uTGlzdChjdHgsIHVtYXRfY2xhc3MsIGpzX3VtYXRfc3RhdGljX2Z1bmNzLCBjb3VudG9mKGpzX3VtYXRfc3RhdGljX2Z1bmNzKSk7CgogICAgLyogIEpTVmFsdWUgZyA9IEpTX0dldEdsb2JhbE9iamVjdChjdHgpOwogICAgICBpbnQzMmFycmF5X2N0b3IgPSBKU19HZXRQcm9wZXJ0eShjdHgsIGcsIEpTX0FUT01fSW50MzJBcnJheSk7CiAgICAgIGludDMyYXJyYXlfcHJvdG8gPSBKU19HZXRQcm90b3R5cGUoY3R4LCBpbnQzMmFycmF5X2N0b3IpOwoKICAgICAgSlNfRnJlZVZhbHVlKGN0eCwgZyk7Ki8KICB9CgogIGlmKG0pCiAgICBKU19TZXRNb2R1bGVFeHBvcnQoY3R4LCBtLCAiVU1hdCIsIHVtYXRfY2xhc3MpOwogIHJldHVybiAwOwp9CgpleHRlcm4gIkMiIFZJU0lCTEUgdm9pZApqc191bWF0X2V4cG9ydChKU0NvbnRleHQqIGN0eCwgSlNNb2R1bGVEZWYqIG0pIHsKICBKU19BZGRNb2R1bGVFeHBvcnQoY3R4LCBtLCAiVU1hdCIpOwp9CgojaWYgZGVmaW5lZChKU19VTUFUX01PRFVMRSkKI2RlZmluZSBKU19JTklUX01PRFVMRSBWSVNJQkxFIGpzX2luaXRfbW9kdWxlCiNlbHNlCiNkZWZpbmUgSlNfSU5JVF9NT0RVTEUganNfaW5pdF9tb2R1bGVfdW1hdAojZW5kaWYKCmV4dGVybiAiQyIgICBKU01vZHVsZURlZioKSlNfSU5JVF9NT0RVTEUoSlNDb250ZXh0KiBjdHgsIGNvbnN0IGNoYXIqIG1vZHVsZV9uYW1lKSB7CiAgSlNNb2R1bGVEZWYqIG07CiAgbSA9IEpTX05ld0NNb2R1bGUoY3R4LCBtb2R1bGVfbmFtZSwgJmpzX3VtYXRfaW5pdCk7CiAgaWYoIW0pCiAgICByZXR1cm4gTlVMTDsKICBqc191bWF0X2V4cG9ydChjdHgsIG0pOwogIHJldHVybiBtOwp9AAAAAAAAAAAydAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAO3MAAAAAAAA7cwAAAAAAAAAAAAAAAPC/"
				]
			]
		},
		{
			"file": "js_umat.hpp",
			"settings":
			{
				"buffer_size": 1863,
				"line_ending": "Unix"
			},
			"undo_stack":
			[
				[
					3,
					1,
					"paste",
					null,
					"AQAAAHMAAAAAAAAAsgAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAcwAAAAAAAABzAAAAAAAAAAAAAAAAAPC/"
				],
				[
					5,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"AQAAAHMAAAAAAAAAdAAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAcwAAAAAAAABzAAAAAAAAAAAAAAAAAAAA"
				],
				[
					6,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAABHBwAAI2lmbmRlZiBKU19VTUFUX0hQUAojZGVmaW5lIEpTX1VNQVRfSFBQCgojaW5jbHVkZSAianNiaW5kaW5ncy5ocHAiCiNpbmNsdWRlICJqc19hbGxvYy5ocHAiCiNpbmNsdWRlICJqc19hcnJheS5ocHAiCgpleHRlcm4gIkMiIFZJU0lCTEUgaW50IGpzX3VtYXRfaW5pdChKU0NvbnRleHQqLCBKU01vZHVsZURlZiopOwoKZXh0ZXJuICJDIiB7CgpleHRlcm4gSlNWYWx1ZSB1bWF0X3Byb3RvLCB1bWF0X2NsYXNzOwpleHRlcm4gSlNDbGFzc0lEIGpzX3VtYXRfY2xhc3NfaWQ7CgpWSVNJQkxFIEpTVmFsdWUganNfdW1hdF9uZXcoSlNDb250ZXh0KiwgdWludDMyX3QsIHVpbnQzMl90LCBpbnQpOwppbnQganNfdW1hdF9pbml0KEpTQ29udGV4dCosIEpTTW9kdWxlRGVmKik7CkpTTW9kdWxlRGVmKiBqc19pbml0X3VtYXRfbW9kdWxlKEpTQ29udGV4dCogY3R4LCBjb25zdCBjaGFyKiBtb2R1bGVfbmFtZSk7CnZvaWQganNfdW1hdF9jb25zdHJ1Y3RvcihKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZSBwYXJlbnQsIGNvbnN0IGNoYXIqIG5hbWUpOwoKVklTSUJMRSBKU1VNYXREYXRhKiBqc191bWF0X2RhdGEoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB2YWwpOwoKc3RhdGljIGlubGluZSBKU0lucHV0T3V0cHV0QXJyYXkKanNfdW1hdF9vcl9tYXQoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB2YWx1ZSkgewogIGN2OjpNYXQqIG1hdDsKICBjdjo6VU1hdCogdW1hdDsKCiAgaWYoKHVtYXQgPSBzdGF0aWNfY2FzdDxjdjo6VU1hdCo+KEpTX0dldE9wYXF1ZSh2YWx1ZSwganNfdW1hdF9jbGFzc19pZCkpKSkKICAgIHJldHVybiBKU0lucHV0T3V0cHV0QXJyYXkoKnVtYXQpOwogIGlmKChtYXQgPSBzdGF0aWNfY2FzdDxjdjo6TWF0Kj4oSlNfR2V0T3BhcXVlKHZhbHVlLCBqc19tYXRfY2xhc3NfaWQpKSkpCiAgICByZXR1cm4gSlNJbnB1dE91dHB1dEFycmF5KCptYXQpOwoKICByZXR1cm4gY3Y6Om5vQXJyYXkoKTsKfQoKc3RhdGljIGlubGluZSBKU0lucHV0QXJyYXkKanNfaW5wdXRfYXJyYXkoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB2YWx1ZSkgewogIGN2OjpNYXQqIG1hdDsKICBjdjo6VU1hdCogdW1hdDsKCiAgaWYoKHVtYXQgPSBzdGF0aWNfY2FzdDxjdjo6VU1hdCo+KEpTX0dldE9wYXF1ZSh2YWx1ZSwganNfdW1hdF9jbGFzc19pZCkpKSkKICAgIHJldHVybiBKU0lucHV0QXJyYXkoKnVtYXQpOwogIGlmKChtYXQgPSBzdGF0aWNfY2FzdDxjdjo6TWF0Kj4oSlNfR2V0T3BhcXVlKHZhbHVlLCBqc19tYXRfY2xhc3NfaWQpKSkpCiAgICByZXR1cm4gSlNJbnB1dEFycmF5KCptYXQpOwoKICBpZihqc19pc19hcnJheShjdHgsIHZhbHVlKSkgewogICAgc3RkOjp2ZWN0b3I8ZG91YmxlPiBhcnI7CiAgICBjdjo6U2NhbGFyIHNjYWxhcjsKICAgIGpzX2FycmF5X3RvKGN0eCwgdmFsdWUsIGFycik7CiAgICBmb3Ioc2l6ZV90IGkgPSAwOyBpIDwgYXJyLnNpemUoKTsgaSsrKSBzY2FsYXJbaV0gPSBhcnJbaV07CiAgICByZXR1cm4gSlNJbnB1dEFycmF5KHNjYWxhcik7CiAgfQoKICByZXR1cm4gY3Y6Om5vQXJyYXkoKTsKfQoKc3RhdGljIGlubGluZSBKU1ZhbHVlCmpzX3VtYXRfd3JhcChKU0NvbnRleHQqIGN0eCwgY29uc3QgY3Y6OlVNYXQmIHVtYXQpIHsKICBKU1ZhbHVlIHJldDsKICBKU1VNYXREYXRhKiBzOwogIHJldCA9IEpTX05ld09iamVjdFByb3RvQ2xhc3MoY3R4LCB1bWF0X3Byb3RvLCBqc191bWF0X2NsYXNzX2lkKTsKCiAgcyA9IGpzX2FsbG9jYXRlPGN2OjpVTWF0PihjdHgpOwoKICBuZXcocykgY3Y6OlVNYXQodW1hdCk7CgogIEpTX1NldE9wYXF1ZShyZXQsIHMpOwogIHJldHVybiByZXQ7Cn0KfQoKI2VuZGlmIC8qIGRlZmluZWQoSlNfVU1BVF9IUFApICovAAAAAAAAAABHBwAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAdAAAAAAAAAB0AAAAAAAAAAAAAAAAAPC/"
				]
			]
		},
		{
			"file": "js_utility.cpp",
			"settings":
			{
				"buffer_size": 5972,
				"line_ending": "Unix"
			},
			"undo_stack":
			[
				[
					3,
					1,
					"paste",
					null,
					"AQAAADIAAAAAAAAAdAAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAMgAAAAAAAAAyAAAAAAAAAAAAAAAAAPC/"
				],
				[
					6,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"AQAAADIAAAAAAAAAMwAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAMgAAAAAAAAAyAAAAAAAAAAAAAAAAAAAA"
				],
				[
					7,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAAD4FgAAI2luY2x1ZGUgImpzYmluZGluZ3MuaHBwIgojaW5jbHVkZSAianNfYWxsb2MuaHBwIgoKZXh0ZXJuICJDIiBWSVNJQkxFIGludCBqc191dGlsaXR5X2luaXQoSlNDb250ZXh0KiwgSlNNb2R1bGVEZWYqKTsKCmV4dGVybiAiQyIgewoKSlNWYWx1ZSB0aWNrX21ldGVyX3Byb3RvID0gSlNfVU5ERUZJTkVELCB0aWNrX21ldGVyX2NsYXNzID0gSlNfVU5ERUZJTkVEOwpKU0NsYXNzSUQganNfdGlja19tZXRlcl9jbGFzc19pZCA9IDA7CgpWSVNJQkxFIEpTVmFsdWUKanNfdGlja19tZXRlcl9uZXcoSlNDb250ZXh0KiBjdHgpIHsKICBKU1ZhbHVlIHJldDsKICBKU1RpY2tNZXRlckRhdGEqIHM7CgogIHJldCA9IEpTX05ld09iamVjdFByb3RvQ2xhc3MoY3R4LCB0aWNrX21ldGVyX3Byb3RvLCBqc190aWNrX21ldGVyX2NsYXNzX2lkKTsKCiAgcyA9IGpzX2FsbG9jYXRlPEpTVGlja01ldGVyRGF0YT4oY3R4KTsKCiAgbmV3KHMpIGN2OjpUaWNrTWV0ZXIoKTsKCiAgSlNfU2V0T3BhcXVlKHJldCwgcyk7CiAgcmV0dXJuIHJldDsKfQoKc3RhdGljIEpTVmFsdWUKanNfdGlja19tZXRlcl9jdG9yKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgbmV3X3RhcmdldCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCogYXJndikgewogIEpTVGlja01ldGVyRGF0YSogczsKICBKU1ZhbHVlIG9iaiA9IEpTX1VOREVGSU5FRDsKICBKU1ZhbHVlIHByb3RvOwoKICBzID0ganNfYWxsb2NhdGU8SlNUaWNrTWV0ZXJEYXRhPihjdHgpOwogIGlmKCFzKQogICAgcmV0dXJuIEpTX0VYQ0VQVElPTjsKICBuZXcocykgY3Y6OlRpY2tNZXRlcigpOwoKICAvKiB1c2luZyBuZXdfdGFyZ2V0IHRvIGdldCB0aGUgcHJvdG90eXBlIGlzIG5lY2Vzc2FyeSB3aGVuIHRoZQogICAgIGNsYXNzIGlzIGV4dGVuZGVkLiAqLwogIHByb3RvID0gSlNfR2V0UHJvcGVydHlTdHIoY3R4LCBuZXdfdGFyZ2V0LCAicHJvdG90eXBlIik7CiAgaWYoSlNfSXNFeGNlcHRpb24ocHJvdG8pKQogICAgZ290byBmYWlsOwogIG9iaiA9IEpTX05ld09iamVjdFByb3RvQ2xhc3MoY3R4LCBwcm90bywganNfdGlja19tZXRlcl9jbGFzc19pZCk7CiAgSlNfRnJlZVZhbHVlKGN0eCwgcHJvdG8pOwogIGlmKEpTX0lzRXhjZXB0aW9uKG9iaikpCiAgICBnb3RvIGZhaWw7CiAgSlNfU2V0T3BhcXVlKG9iaiwgcyk7CiAgcmV0dXJuIG9iajsKZmFpbDoKICBqc19kZWFsbG9jYXRlKGN0eCwgcyk7CiAgSlNfRnJlZVZhbHVlKGN0eCwgb2JqKTsKICByZXR1cm4gSlNfRVhDRVBUSU9OOwp9CgpKU1RpY2tNZXRlckRhdGEqCmpzX3RpY2tfbWV0ZXJfZGF0YShKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHZhbCkgewogIHJldHVybiBzdGF0aWNfY2FzdDxKU1RpY2tNZXRlckRhdGEqPihKU19HZXRPcGFxdWUyKGN0eCwgdmFsLCBqc190aWNrX21ldGVyX2NsYXNzX2lkKSk7Cn0KCnZvaWQKanNfdGlja19tZXRlcl9maW5hbGl6ZXIoSlNSdW50aW1lKiBydCwgSlNWYWx1ZSB2YWwpIHsKICBKU1RpY2tNZXRlckRhdGEqIHMgPSBzdGF0aWNfY2FzdDxKU1RpY2tNZXRlckRhdGEqPihKU19HZXRPcGFxdWUodmFsLCBqc190aWNrX21ldGVyX2NsYXNzX2lkKSk7CiAgLyogTm90ZTogJ3MnIGNhbiBiZSBOVUxMIGluIGNhc2UgSlNfU2V0T3BhcXVlKCkgd2FzIG5vdCBjYWxsZWQgKi8KICBqc19kZWFsbG9jYXRlKHJ0LCBzKTsKfQoKc3RhdGljIEpTVmFsdWUKanNfdGlja19tZXRlcl9nZXQoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgaW50IG1hZ2ljKSB7CiAgSlNWYWx1ZSByZXQgPSBKU19VTkRFRklORUQ7CiAgSlNUaWNrTWV0ZXJEYXRhKiBzID0gc3RhdGljX2Nhc3Q8SlNUaWNrTWV0ZXJEYXRhKj4oSlNfR2V0T3BhcXVlMihjdHgsIHRoaXNfdmFsLCBqc190aWNrX21ldGVyX2NsYXNzX2lkKSk7CiAgaWYoIXMpCiAgICByZXQgPSBKU19FWENFUFRJT047CiAgZWxzZSBpZihtYWdpYyA9PSAwKQogICAgcmV0ID0gSlNfTmV3SW50NjQoY3R4LCBzLT5nZXRDb3VudGVyKCkpOwogIGVsc2UgaWYobWFnaWMgPT0gMSkKICAgIHJldCA9IEpTX05ld0Zsb2F0NjQoY3R4LCBzLT5nZXRUaW1lTWljcm8oKSk7CiAgZWxzZSBpZihtYWdpYyA9PSAyKQogICAgcmV0ID0gSlNfTmV3RmxvYXQ2NChjdHgsIHMtPmdldFRpbWVNaWxsaSgpKTsKICBlbHNlIGlmKG1hZ2ljID09IDMpCiAgICByZXQgPSBKU19OZXdGbG9hdDY0KGN0eCwgcy0+Z2V0VGltZVNlYygpKTsKICBlbHNlIGlmKG1hZ2ljID09IDQpCiAgICByZXQgPSBKU19OZXdJbnQ2NChjdHgsIHMtPmdldFRpbWVUaWNrcygpKTsKI2lmIENWX1ZFUlNJT05fTUFKT1IgPj0gNCAmJiBDVl9WRVJTSU9OX01JTk9SID49IDQKICBlbHNlIGlmKG1hZ2ljID09IDUpCiAgICByZXQgPSBKU19OZXdGbG9hdDY0KGN0eCwgcy0+Z2V0QXZnVGltZU1pbGxpKCkpOwogIGVsc2UgaWYobWFnaWMgPT0gNikKICAgIHJldCA9IEpTX05ld0Zsb2F0NjQoY3R4LCBzLT5nZXRBdmdUaW1lU2VjKCkpOwogIGVsc2UgaWYobWFnaWMgPT0gNykKICAgIHJldCA9IEpTX05ld0Zsb2F0NjQoY3R4LCBzLT5nZXRGUFMoKSk7CiNlbmRpZgogIHJldHVybiByZXQ7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX3RpY2tfbWV0ZXJfbWV0aG9kKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QqIGFyZ3YsIGludCBtYWdpYykgewogIEpTVmFsdWUgcmV0ID0gSlNfVU5ERUZJTkVEOwogIEpTVGlja01ldGVyRGF0YSogcyA9IHN0YXRpY19jYXN0PEpTVGlja01ldGVyRGF0YSo+KEpTX0dldE9wYXF1ZTIoY3R4LCB0aGlzX3ZhbCwganNfdGlja19tZXRlcl9jbGFzc19pZCkpOwogIGlmKCFzKQogICAgcmV0ID0gSlNfRVhDRVBUSU9OOwogIGVsc2UgaWYobWFnaWMgPT0gMCkKICAgIHMtPnJlc2V0KCk7CiAgZWxzZSBpZihtYWdpYyA9PSAxKQogICAgcy0+c3RhcnQoKTsKICBlbHNlIGlmKG1hZ2ljID09IDIpCiAgICBzLT5zdG9wKCk7CgogIHJldHVybiByZXQ7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX3RpY2tfbWV0ZXJfdG9zdHJpbmcoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCogYXJndikgewogIEpTVGlja01ldGVyRGF0YSogczsKCiAgaWYoKHMgPSBzdGF0aWNfY2FzdDxKU1RpY2tNZXRlckRhdGEqPihKU19HZXRPcGFxdWUyKGN0eCwgdGhpc192YWwsIGpzX3RpY2tfbWV0ZXJfY2xhc3NfaWQpKSkpIHsKICAgIHN0ZDo6b3N0cmluZ3N0cmVhbSBvczsKICAgIG9zIDw8ICpzOwogICAgc3RkOjpzdHJpbmcgc3RyID0gb3Muc3RyKCk7CiAgICByZXR1cm4gSlNfTmV3U3RyaW5nTGVuKGN0eCwgc3RyLmRhdGEoKSwgc3RyLnNpemUoKSk7CiAgfQoKICByZXR1cm4gSlNfRVhDRVBUSU9OOwp9CgpKU0NsYXNzRGVmIGpzX3RpY2tfbWV0ZXJfY2xhc3MgPSB7CiAgICAuY2xhc3NfbmFtZSA9ICJUaWNrTWV0ZXIiLAogICAgLmZpbmFsaXplciA9IGpzX3RpY2tfbWV0ZXJfZmluYWxpemVyLAp9OwoKY29uc3QgSlNDRnVuY3Rpb25MaXN0RW50cnkganNfdGlja19tZXRlcl9wcm90b19mdW5jc1tdID0gewogICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJyZXNldCIsIDAsIGpzX3RpY2tfbWV0ZXJfbWV0aG9kLCAwKSwKICAgIEpTX0NGVU5DX01BR0lDX0RFRigic3RhcnQiLCAwLCBqc190aWNrX21ldGVyX21ldGhvZCwgMSksCiAgICBKU19DRlVOQ19NQUdJQ19ERUYoInN0b3AiLCAwLCBqc190aWNrX21ldGVyX21ldGhvZCwgMiksCiAgICBKU19DR0VUU0VUX01BR0lDX0RFRigiY291bnRlciIsIGpzX3RpY2tfbWV0ZXJfZ2V0LCBOVUxMLCAwKSwKICAgIEpTX0NHRVRTRVRfTUFHSUNfREVGKCJ0aW1lTWljcm8iLCBqc190aWNrX21ldGVyX2dldCwgTlVMTCwgMSksCiAgICBKU19DR0VUU0VUX01BR0lDX0RFRigidGltZU1pbGxpIiwganNfdGlja19tZXRlcl9nZXQsIE5VTEwsIDIpLAogICAgSlNfQ0dFVFNFVF9NQUdJQ19ERUYoInRpbWVTZWMiLCBqc190aWNrX21ldGVyX2dldCwgTlVMTCwgMyksCiAgICBKU19DR0VUU0VUX01BR0lDX0RFRigidGltZVRpY2tzIiwganNfdGlja19tZXRlcl9nZXQsIE5VTEwsIDQpLAojaWYgQ1ZfVkVSU0lPTl9NQUpPUiA+PSA0ICYmIENWX1ZFUlNJT05fTUlOT1IgPj0gNAogICAgSlNfQ0dFVFNFVF9NQUdJQ19ERUYoImF2Z1RpbWVNaWxsaSIsIGpzX3RpY2tfbWV0ZXJfZ2V0LCBOVUxMLCA1KSwKICAgIEpTX0NHRVRTRVRfTUFHSUNfREVGKCJhdmdUaW1lU2VjIiwganNfdGlja19tZXRlcl9nZXQsIE5VTEwsIDYpLAogICAgSlNfQ0dFVFNFVF9NQUdJQ19ERUYoImZwcyIsIGpzX3RpY2tfbWV0ZXJfZ2V0LCBOVUxMLCA3KSwKI2VuZGlmCiAgICBKU19DRlVOQ19ERUYoInRvU3RyaW5nIiwgMCwganNfdGlja19tZXRlcl90b3N0cmluZyksCgogICAgSlNfUFJPUF9TVFJJTkdfREVGKCJbU3ltYm9sLnRvU3RyaW5nVGFnXSIsICJUaWNrTWV0ZXIiLCBKU19QUk9QX0NPTkZJR1VSQUJMRSksCn07CgpleHRlcm4gIkMiIGludApqc191dGlsaXR5X2luaXQoSlNDb250ZXh0KiBjdHgsIEpTTW9kdWxlRGVmKiBtKSB7CgogIGlmKGpzX3RpY2tfbWV0ZXJfY2xhc3NfaWQgPT0gMCkgewogICAgLyogY3JlYXRlIHRoZSBUaWNrTWV0ZXIgY2xhc3MgKi8KICAgIEpTX05ld0NsYXNzSUQoJmpzX3RpY2tfbWV0ZXJfY2xhc3NfaWQpOwogICAgSlNfTmV3Q2xhc3MoSlNfR2V0UnVudGltZShjdHgpLCBqc190aWNrX21ldGVyX2NsYXNzX2lkLCAmanNfdGlja19tZXRlcl9jbGFzcyk7CgogICAgdGlja19tZXRlcl9wcm90byA9IEpTX05ld09iamVjdChjdHgpOwogICAgSlNfU2V0UHJvcGVydHlGdW5jdGlvbkxpc3QoY3R4LCB0aWNrX21ldGVyX3Byb3RvLCBqc190aWNrX21ldGVyX3Byb3RvX2Z1bmNzLCBjb3VudG9mKGpzX3RpY2tfbWV0ZXJfcHJvdG9fZnVuY3MpKTsKICAgIEpTX1NldENsYXNzUHJvdG8oY3R4LCBqc190aWNrX21ldGVyX2NsYXNzX2lkLCB0aWNrX21ldGVyX3Byb3RvKTsKCiAgICB0aWNrX21ldGVyX2NsYXNzID0gSlNfTmV3Q0Z1bmN0aW9uMihjdHgsIGpzX3RpY2tfbWV0ZXJfY3RvciwgIlRpY2tNZXRlciIsIDAsIEpTX0NGVU5DX2NvbnN0cnVjdG9yLCAwKTsKICAgIC8qIHNldCBwcm90by5jb25zdHJ1Y3RvciBhbmQgY3Rvci5wcm90b3R5cGUgKi8KICAgIEpTX1NldENvbnN0cnVjdG9yKGN0eCwgdGlja19tZXRlcl9jbGFzcywgdGlja19tZXRlcl9wcm90byk7CiAgfQoKICBpZihtKQogICAgSlNfU2V0TW9kdWxlRXhwb3J0KGN0eCwgbSwgIlRpY2tNZXRlciIsIHRpY2tfbWV0ZXJfY2xhc3MpOwoKICByZXR1cm4gMDsKfQoKdm9pZApqc190aWNrX21ldGVyX2NvbnN0cnVjdG9yKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlIHBhcmVudCwgY29uc3QgY2hhciogbmFtZSkgewogIGlmKEpTX0lzVW5kZWZpbmVkKHRpY2tfbWV0ZXJfY2xhc3MpKQogICAganNfdXRpbGl0eV9pbml0KGN0eCwgMCk7CgogIEpTX1NldFByb3BlcnR5U3RyKGN0eCwgcGFyZW50LCBuYW1lID8gbmFtZSA6ICJUaWNrTWV0ZXIiLCB0aWNrX21ldGVyX2NsYXNzKTsKfQoKI2lmZGVmIEpTX1VUSUxJVFlfTU9EVUxFCiNkZWZpbmUgSlNfSU5JVF9NT0RVTEUgLypWSVNJQkxFKi8ganNfaW5pdF9tb2R1bGUKI2Vsc2UKI2RlZmluZSBKU19JTklUX01PRFVMRSAvKlZJU0lCTEUqLyBqc19pbml0X21vZHVsZV91dGlsaXR5CiNlbmRpZgoKSlNNb2R1bGVEZWYqCkpTX0lOSVRfTU9EVUxFKEpTQ29udGV4dCogY3R4LCBjb25zdCBjaGFyKiBtb2R1bGVfbmFtZSkgewogIEpTTW9kdWxlRGVmKiBtOwogIG0gPSBKU19OZXdDTW9kdWxlKGN0eCwgbW9kdWxlX25hbWUsICZqc191dGlsaXR5X2luaXQpOwogIGlmKCFtKQogICAgcmV0dXJuIE5VTEw7CiAgSlNfQWRkTW9kdWxlRXhwb3J0KGN0eCwgbSwgIlRpY2tNZXRlciIpOwogIHJldHVybiBtOwp9Cn0KAAAAAAAAAABGFwAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAMwAAAAAAAAAzAAAAAAAAAAAAAAAAAPC/"
				],
				[
					12,
					1,
					"cut",
					null,
					"AQAAAPgWAAAAAAAA+BYAAAAAAABOAAAAZXh0ZXJuICJDIiBWSVNJQkxFIHZvaWQganNfdXRpbGl0eV9leHBvcnQoSlNDb250ZXh0KiBjdHgsIEpTTW9kdWxlRGVmKiBtKSB7Cn0K",
					"AQAAAAAAAAABAAAA+BYAAAAAAABGFwAAAAAAAAAAAAAAAPC/"
				],
				[
					17,
					1,
					"paste",
					null,
					"AQAAAJMUAAAAAAAA4RQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAkxQAAAAAAACTFAAAAAAAAAAAAAAAAPC/"
				],
				[
					19,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"AQAAAJMUAAAAAAAAlBQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAkxQAAAAAAACTFAAAAAAAAAAAAAAAAAAA"
				],
				[
					25,
					1,
					"cut",
					null,
					"AQAAAAwXAAAAAAAADBcAAAAAAAArAAAAICBKU19BZGRNb2R1bGVFeHBvcnQoY3R4LCBtLCAiVGlja01ldGVyIik7Cg",
					"AQAAAAAAAAABAAAADBcAAAAAAAA3FwAAAAAAAAAAAAAAAPC/"
				],
				[
					28,
					1,
					"paste",
					null,
					"AQAAAOAUAAAAAAAACxUAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA4BQAAAAAAADgFAAAAAAAAAAAAAAAAPC/"
				],
				[
					35,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"BAAAADYXAAAAAAAANxcAAAAAAAAAAAAANxcAAAAAAAA7FwAAAAAAAAAAAAA3FwAAAAAAADcXAAAAAAAABAAAACAgICA3FwAAAAAAADkXAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAANhcAAAAAAAA2FwAAAAAAAAAAAAAAAPC/"
				],
				[
					36,
					1,
					"paste",
					null,
					"AQAAADkXAAAAAAAAShcAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAORcAAAAAAAA5FwAAAAAAAAAAAAAAAPC/"
				],
				[
					37,
					1,
					"insert_snippet",
					{
						"contents": "($0)"
					},
					"AQAAAEoXAAAAAAAATBcAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAShcAAAAAAABKFwAAAAAAAAAAAAAAAPC/"
				],
				[
					38,
					1,
					"insert",
					{
						"characters": "ctx,m"
					},
					"BQAAAEsXAAAAAAAATBcAAAAAAAAAAAAATBcAAAAAAABNFwAAAAAAAAAAAABNFwAAAAAAAE4XAAAAAAAAAAAAAE4XAAAAAAAATxcAAAAAAAAAAAAATxcAAAAAAABQFwAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAASxcAAAAAAABLFwAAAAAAAAAAAAAAAPC/"
				],
				[
					40,
					1,
					"insert",
					{
						"characters": ";"
					},
					"AQAAAFEXAAAAAAAAUhcAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAURcAAAAAAABRFwAAAAAAAAAAAAAAAPC/"
				],
				[
					41,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAABjFwAAI2luY2x1ZGUgImpzYmluZGluZ3MuaHBwIgojaW5jbHVkZSAianNfYWxsb2MuaHBwIgoKZXh0ZXJuICJDIiBWSVNJQkxFIGludCBqc191dGlsaXR5X2luaXQoSlNDb250ZXh0KiwgSlNNb2R1bGVEZWYqKTsKCmV4dGVybiAiQyIgewoKSlNWYWx1ZSB0aWNrX21ldGVyX3Byb3RvID0gSlNfVU5ERUZJTkVELCB0aWNrX21ldGVyX2NsYXNzID0gSlNfVU5ERUZJTkVEOwpKU0NsYXNzSUQganNfdGlja19tZXRlcl9jbGFzc19pZCA9IDA7CgpWSVNJQkxFIEpTVmFsdWUKanNfdGlja19tZXRlcl9uZXcoSlNDb250ZXh0KiBjdHgpIHsKICBKU1ZhbHVlIHJldDsKICBKU1RpY2tNZXRlckRhdGEqIHM7CgogIHJldCA9IEpTX05ld09iamVjdFByb3RvQ2xhc3MoY3R4LCB0aWNrX21ldGVyX3Byb3RvLCBqc190aWNrX21ldGVyX2NsYXNzX2lkKTsKCiAgcyA9IGpzX2FsbG9jYXRlPEpTVGlja01ldGVyRGF0YT4oY3R4KTsKCiAgbmV3KHMpIGN2OjpUaWNrTWV0ZXIoKTsKCiAgSlNfU2V0T3BhcXVlKHJldCwgcyk7CiAgcmV0dXJuIHJldDsKfQoKc3RhdGljIEpTVmFsdWUKanNfdGlja19tZXRlcl9jdG9yKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgbmV3X3RhcmdldCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCogYXJndikgewogIEpTVGlja01ldGVyRGF0YSogczsKICBKU1ZhbHVlIG9iaiA9IEpTX1VOREVGSU5FRDsKICBKU1ZhbHVlIHByb3RvOwoKICBzID0ganNfYWxsb2NhdGU8SlNUaWNrTWV0ZXJEYXRhPihjdHgpOwogIGlmKCFzKQogICAgcmV0dXJuIEpTX0VYQ0VQVElPTjsKICBuZXcocykgY3Y6OlRpY2tNZXRlcigpOwoKICAvKiB1c2luZyBuZXdfdGFyZ2V0IHRvIGdldCB0aGUgcHJvdG90eXBlIGlzIG5lY2Vzc2FyeSB3aGVuIHRoZQogICAgIGNsYXNzIGlzIGV4dGVuZGVkLiAqLwogIHByb3RvID0gSlNfR2V0UHJvcGVydHlTdHIoY3R4LCBuZXdfdGFyZ2V0LCAicHJvdG90eXBlIik7CiAgaWYoSlNfSXNFeGNlcHRpb24ocHJvdG8pKQogICAgZ290byBmYWlsOwogIG9iaiA9IEpTX05ld09iamVjdFByb3RvQ2xhc3MoY3R4LCBwcm90bywganNfdGlja19tZXRlcl9jbGFzc19pZCk7CiAgSlNfRnJlZVZhbHVlKGN0eCwgcHJvdG8pOwogIGlmKEpTX0lzRXhjZXB0aW9uKG9iaikpCiAgICBnb3RvIGZhaWw7CiAgSlNfU2V0T3BhcXVlKG9iaiwgcyk7CiAgcmV0dXJuIG9iajsKZmFpbDoKICBqc19kZWFsbG9jYXRlKGN0eCwgcyk7CiAgSlNfRnJlZVZhbHVlKGN0eCwgb2JqKTsKICByZXR1cm4gSlNfRVhDRVBUSU9OOwp9CgpKU1RpY2tNZXRlckRhdGEqCmpzX3RpY2tfbWV0ZXJfZGF0YShKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHZhbCkgewogIHJldHVybiBzdGF0aWNfY2FzdDxKU1RpY2tNZXRlckRhdGEqPihKU19HZXRPcGFxdWUyKGN0eCwgdmFsLCBqc190aWNrX21ldGVyX2NsYXNzX2lkKSk7Cn0KCnZvaWQKanNfdGlja19tZXRlcl9maW5hbGl6ZXIoSlNSdW50aW1lKiBydCwgSlNWYWx1ZSB2YWwpIHsKICBKU1RpY2tNZXRlckRhdGEqIHMgPSBzdGF0aWNfY2FzdDxKU1RpY2tNZXRlckRhdGEqPihKU19HZXRPcGFxdWUodmFsLCBqc190aWNrX21ldGVyX2NsYXNzX2lkKSk7CiAgLyogTm90ZTogJ3MnIGNhbiBiZSBOVUxMIGluIGNhc2UgSlNfU2V0T3BhcXVlKCkgd2FzIG5vdCBjYWxsZWQgKi8KICBqc19kZWFsbG9jYXRlKHJ0LCBzKTsKfQoKc3RhdGljIEpTVmFsdWUKanNfdGlja19tZXRlcl9nZXQoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgaW50IG1hZ2ljKSB7CiAgSlNWYWx1ZSByZXQgPSBKU19VTkRFRklORUQ7CiAgSlNUaWNrTWV0ZXJEYXRhKiBzID0gc3RhdGljX2Nhc3Q8SlNUaWNrTWV0ZXJEYXRhKj4oSlNfR2V0T3BhcXVlMihjdHgsIHRoaXNfdmFsLCBqc190aWNrX21ldGVyX2NsYXNzX2lkKSk7CiAgaWYoIXMpCiAgICByZXQgPSBKU19FWENFUFRJT047CiAgZWxzZSBpZihtYWdpYyA9PSAwKQogICAgcmV0ID0gSlNfTmV3SW50NjQoY3R4LCBzLT5nZXRDb3VudGVyKCkpOwogIGVsc2UgaWYobWFnaWMgPT0gMSkKICAgIHJldCA9IEpTX05ld0Zsb2F0NjQoY3R4LCBzLT5nZXRUaW1lTWljcm8oKSk7CiAgZWxzZSBpZihtYWdpYyA9PSAyKQogICAgcmV0ID0gSlNfTmV3RmxvYXQ2NChjdHgsIHMtPmdldFRpbWVNaWxsaSgpKTsKICBlbHNlIGlmKG1hZ2ljID09IDMpCiAgICByZXQgPSBKU19OZXdGbG9hdDY0KGN0eCwgcy0+Z2V0VGltZVNlYygpKTsKICBlbHNlIGlmKG1hZ2ljID09IDQpCiAgICByZXQgPSBKU19OZXdJbnQ2NChjdHgsIHMtPmdldFRpbWVUaWNrcygpKTsKI2lmIENWX1ZFUlNJT05fTUFKT1IgPj0gNCAmJiBDVl9WRVJTSU9OX01JTk9SID49IDQKICBlbHNlIGlmKG1hZ2ljID09IDUpCiAgICByZXQgPSBKU19OZXdGbG9hdDY0KGN0eCwgcy0+Z2V0QXZnVGltZU1pbGxpKCkpOwogIGVsc2UgaWYobWFnaWMgPT0gNikKICAgIHJldCA9IEpTX05ld0Zsb2F0NjQoY3R4LCBzLT5nZXRBdmdUaW1lU2VjKCkpOwogIGVsc2UgaWYobWFnaWMgPT0gNykKICAgIHJldCA9IEpTX05ld0Zsb2F0NjQoY3R4LCBzLT5nZXRGUFMoKSk7CiNlbmRpZgogIHJldHVybiByZXQ7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX3RpY2tfbWV0ZXJfbWV0aG9kKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QqIGFyZ3YsIGludCBtYWdpYykgewogIEpTVmFsdWUgcmV0ID0gSlNfVU5ERUZJTkVEOwogIEpTVGlja01ldGVyRGF0YSogcyA9IHN0YXRpY19jYXN0PEpTVGlja01ldGVyRGF0YSo+KEpTX0dldE9wYXF1ZTIoY3R4LCB0aGlzX3ZhbCwganNfdGlja19tZXRlcl9jbGFzc19pZCkpOwogIGlmKCFzKQogICAgcmV0ID0gSlNfRVhDRVBUSU9OOwogIGVsc2UgaWYobWFnaWMgPT0gMCkKICAgIHMtPnJlc2V0KCk7CiAgZWxzZSBpZihtYWdpYyA9PSAxKQogICAgcy0+c3RhcnQoKTsKICBlbHNlIGlmKG1hZ2ljID09IDIpCiAgICBzLT5zdG9wKCk7CgogIHJldHVybiByZXQ7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX3RpY2tfbWV0ZXJfdG9zdHJpbmcoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCogYXJndikgewogIEpTVGlja01ldGVyRGF0YSogczsKCiAgaWYoKHMgPSBzdGF0aWNfY2FzdDxKU1RpY2tNZXRlckRhdGEqPihKU19HZXRPcGFxdWUyKGN0eCwgdGhpc192YWwsIGpzX3RpY2tfbWV0ZXJfY2xhc3NfaWQpKSkpIHsKICAgIHN0ZDo6b3N0cmluZ3N0cmVhbSBvczsKICAgIG9zIDw8ICpzOwogICAgc3RkOjpzdHJpbmcgc3RyID0gb3Muc3RyKCk7CiAgICByZXR1cm4gSlNfTmV3U3RyaW5nTGVuKGN0eCwgc3RyLmRhdGEoKSwgc3RyLnNpemUoKSk7CiAgfQoKICByZXR1cm4gSlNfRVhDRVBUSU9OOwp9CgpKU0NsYXNzRGVmIGpzX3RpY2tfbWV0ZXJfY2xhc3MgPSB7CiAgICAuY2xhc3NfbmFtZSA9ICJUaWNrTWV0ZXIiLAogICAgLmZpbmFsaXplciA9IGpzX3RpY2tfbWV0ZXJfZmluYWxpemVyLAp9OwoKY29uc3QgSlNDRnVuY3Rpb25MaXN0RW50cnkganNfdGlja19tZXRlcl9wcm90b19mdW5jc1tdID0gewogICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJyZXNldCIsIDAsIGpzX3RpY2tfbWV0ZXJfbWV0aG9kLCAwKSwKICAgIEpTX0NGVU5DX01BR0lDX0RFRigic3RhcnQiLCAwLCBqc190aWNrX21ldGVyX21ldGhvZCwgMSksCiAgICBKU19DRlVOQ19NQUdJQ19ERUYoInN0b3AiLCAwLCBqc190aWNrX21ldGVyX21ldGhvZCwgMiksCiAgICBKU19DR0VUU0VUX01BR0lDX0RFRigiY291bnRlciIsIGpzX3RpY2tfbWV0ZXJfZ2V0LCBOVUxMLCAwKSwKICAgIEpTX0NHRVRTRVRfTUFHSUNfREVGKCJ0aW1lTWljcm8iLCBqc190aWNrX21ldGVyX2dldCwgTlVMTCwgMSksCiAgICBKU19DR0VUU0VUX01BR0lDX0RFRigidGltZU1pbGxpIiwganNfdGlja19tZXRlcl9nZXQsIE5VTEwsIDIpLAogICAgSlNfQ0dFVFNFVF9NQUdJQ19ERUYoInRpbWVTZWMiLCBqc190aWNrX21ldGVyX2dldCwgTlVMTCwgMyksCiAgICBKU19DR0VUU0VUX01BR0lDX0RFRigidGltZVRpY2tzIiwganNfdGlja19tZXRlcl9nZXQsIE5VTEwsIDQpLAojaWYgQ1ZfVkVSU0lPTl9NQUpPUiA+PSA0ICYmIENWX1ZFUlNJT05fTUlOT1IgPj0gNAogICAgSlNfQ0dFVFNFVF9NQUdJQ19ERUYoImF2Z1RpbWVNaWxsaSIsIGpzX3RpY2tfbWV0ZXJfZ2V0LCBOVUxMLCA1KSwKICAgIEpTX0NHRVRTRVRfTUFHSUNfREVGKCJhdmdUaW1lU2VjIiwganNfdGlja19tZXRlcl9nZXQsIE5VTEwsIDYpLAogICAgSlNfQ0dFVFNFVF9NQUdJQ19ERUYoImZwcyIsIGpzX3RpY2tfbWV0ZXJfZ2V0LCBOVUxMLCA3KSwKI2VuZGlmCiAgICBKU19DRlVOQ19ERUYoInRvU3RyaW5nIiwgMCwganNfdGlja19tZXRlcl90b3N0cmluZyksCgogICAgSlNfUFJPUF9TVFJJTkdfREVGKCJbU3ltYm9sLnRvU3RyaW5nVGFnXSIsICJUaWNrTWV0ZXIiLCBKU19QUk9QX0NPTkZJR1VSQUJMRSksCn07CgpleHRlcm4gIkMiIGludApqc191dGlsaXR5X2luaXQoSlNDb250ZXh0KiBjdHgsIEpTTW9kdWxlRGVmKiBtKSB7CgogIGlmKGpzX3RpY2tfbWV0ZXJfY2xhc3NfaWQgPT0gMCkgewogICAgLyogY3JlYXRlIHRoZSBUaWNrTWV0ZXIgY2xhc3MgKi8KICAgIEpTX05ld0NsYXNzSUQoJmpzX3RpY2tfbWV0ZXJfY2xhc3NfaWQpOwogICAgSlNfTmV3Q2xhc3MoSlNfR2V0UnVudGltZShjdHgpLCBqc190aWNrX21ldGVyX2NsYXNzX2lkLCAmanNfdGlja19tZXRlcl9jbGFzcyk7CgogICAgdGlja19tZXRlcl9wcm90byA9IEpTX05ld09iamVjdChjdHgpOwogICAgSlNfU2V0UHJvcGVydHlGdW5jdGlvbkxpc3QoY3R4LCB0aWNrX21ldGVyX3Byb3RvLCBqc190aWNrX21ldGVyX3Byb3RvX2Z1bmNzLCBjb3VudG9mKGpzX3RpY2tfbWV0ZXJfcHJvdG9fZnVuY3MpKTsKICAgIEpTX1NldENsYXNzUHJvdG8oY3R4LCBqc190aWNrX21ldGVyX2NsYXNzX2lkLCB0aWNrX21ldGVyX3Byb3RvKTsKCiAgICB0aWNrX21ldGVyX2NsYXNzID0gSlNfTmV3Q0Z1bmN0aW9uMihjdHgsIGpzX3RpY2tfbWV0ZXJfY3RvciwgIlRpY2tNZXRlciIsIDAsIEpTX0NGVU5DX2NvbnN0cnVjdG9yLCAwKTsKICAgIC8qIHNldCBwcm90by5jb25zdHJ1Y3RvciBhbmQgY3Rvci5wcm90b3R5cGUgKi8KICAgIEpTX1NldENvbnN0cnVjdG9yKGN0eCwgdGlja19tZXRlcl9jbGFzcywgdGlja19tZXRlcl9wcm90byk7CiAgfQoKICBpZihtKQogICAgSlNfU2V0TW9kdWxlRXhwb3J0KGN0eCwgbSwgIlRpY2tNZXRlciIsIHRpY2tfbWV0ZXJfY2xhc3MpOwoKICByZXR1cm4gMDsKfQoKZXh0ZXJuICJDIiBWSVNJQkxFIHZvaWQganNfdXRpbGl0eV9leHBvcnQoSlNDb250ZXh0KiBjdHgsIEpTTW9kdWxlRGVmKiBtKSB7CiAgSlNfQWRkTW9kdWxlRXhwb3J0KGN0eCwgbSwgIlRpY2tNZXRlciIpOwp9Cgp2b2lkCmpzX3RpY2tfbWV0ZXJfY29uc3RydWN0b3IoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWUgcGFyZW50LCBjb25zdCBjaGFyKiBuYW1lKSB7CiAgaWYoSlNfSXNVbmRlZmluZWQodGlja19tZXRlcl9jbGFzcykpCiAgICBqc191dGlsaXR5X2luaXQoY3R4LCAwKTsKCiAgSlNfU2V0UHJvcGVydHlTdHIoY3R4LCBwYXJlbnQsIG5hbWUgPyBuYW1lIDogIlRpY2tNZXRlciIsIHRpY2tfbWV0ZXJfY2xhc3MpOwp9CgojaWZkZWYgSlNfVVRJTElUWV9NT0RVTEUKI2RlZmluZSBKU19JTklUX01PRFVMRSAvKlZJU0lCTEUqLyBqc19pbml0X21vZHVsZQojZWxzZQojZGVmaW5lIEpTX0lOSVRfTU9EVUxFIC8qVklTSUJMRSovIGpzX2luaXRfbW9kdWxlX3V0aWxpdHkKI2VuZGlmCgpKU01vZHVsZURlZioKSlNfSU5JVF9NT0RVTEUoSlNDb250ZXh0KiBjdHgsIGNvbnN0IGNoYXIqIG1vZHVsZV9uYW1lKSB7CiAgSlNNb2R1bGVEZWYqIG07CiAgbSA9IEpTX05ld0NNb2R1bGUoY3R4LCBtb2R1bGVfbmFtZSwgJmpzX3V0aWxpdHlfaW5pdCk7CiAgaWYoIW0pCiAgICByZXR1cm4gTlVMTDsKICBqc191dGlsaXR5X2V4cG9ydChjdHgsbSk7CiAgcmV0dXJuIG07Cn0KfQoAAAAAAAAAAGQXAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAUhcAAAAAAABSFwAAAAAAAAAAAAAAAPC/"
				],
				[
					42,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAABkFwAAI2luY2x1ZGUgImpzYmluZGluZ3MuaHBwIgojaW5jbHVkZSAianNfYWxsb2MuaHBwIgoKZXh0ZXJuICJDIiBWSVNJQkxFIGludCBqc191dGlsaXR5X2luaXQoSlNDb250ZXh0KiwgSlNNb2R1bGVEZWYqKTsKCmV4dGVybiAiQyIgewoKSlNWYWx1ZSB0aWNrX21ldGVyX3Byb3RvID0gSlNfVU5ERUZJTkVELCB0aWNrX21ldGVyX2NsYXNzID0gSlNfVU5ERUZJTkVEOwpKU0NsYXNzSUQganNfdGlja19tZXRlcl9jbGFzc19pZCA9IDA7CgpWSVNJQkxFIEpTVmFsdWUKanNfdGlja19tZXRlcl9uZXcoSlNDb250ZXh0KiBjdHgpIHsKICBKU1ZhbHVlIHJldDsKICBKU1RpY2tNZXRlckRhdGEqIHM7CgogIHJldCA9IEpTX05ld09iamVjdFByb3RvQ2xhc3MoY3R4LCB0aWNrX21ldGVyX3Byb3RvLCBqc190aWNrX21ldGVyX2NsYXNzX2lkKTsKCiAgcyA9IGpzX2FsbG9jYXRlPEpTVGlja01ldGVyRGF0YT4oY3R4KTsKCiAgbmV3KHMpIGN2OjpUaWNrTWV0ZXIoKTsKCiAgSlNfU2V0T3BhcXVlKHJldCwgcyk7CiAgcmV0dXJuIHJldDsKfQoKc3RhdGljIEpTVmFsdWUKanNfdGlja19tZXRlcl9jdG9yKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgbmV3X3RhcmdldCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCogYXJndikgewogIEpTVGlja01ldGVyRGF0YSogczsKICBKU1ZhbHVlIG9iaiA9IEpTX1VOREVGSU5FRDsKICBKU1ZhbHVlIHByb3RvOwoKICBzID0ganNfYWxsb2NhdGU8SlNUaWNrTWV0ZXJEYXRhPihjdHgpOwogIGlmKCFzKQogICAgcmV0dXJuIEpTX0VYQ0VQVElPTjsKICBuZXcocykgY3Y6OlRpY2tNZXRlcigpOwoKICAvKiB1c2luZyBuZXdfdGFyZ2V0IHRvIGdldCB0aGUgcHJvdG90eXBlIGlzIG5lY2Vzc2FyeSB3aGVuIHRoZQogICAgIGNsYXNzIGlzIGV4dGVuZGVkLiAqLwogIHByb3RvID0gSlNfR2V0UHJvcGVydHlTdHIoY3R4LCBuZXdfdGFyZ2V0LCAicHJvdG90eXBlIik7CiAgaWYoSlNfSXNFeGNlcHRpb24ocHJvdG8pKQogICAgZ290byBmYWlsOwogIG9iaiA9IEpTX05ld09iamVjdFByb3RvQ2xhc3MoY3R4LCBwcm90bywganNfdGlja19tZXRlcl9jbGFzc19pZCk7CiAgSlNfRnJlZVZhbHVlKGN0eCwgcHJvdG8pOwogIGlmKEpTX0lzRXhjZXB0aW9uKG9iaikpCiAgICBnb3RvIGZhaWw7CiAgSlNfU2V0T3BhcXVlKG9iaiwgcyk7CiAgcmV0dXJuIG9iajsKZmFpbDoKICBqc19kZWFsbG9jYXRlKGN0eCwgcyk7CiAgSlNfRnJlZVZhbHVlKGN0eCwgb2JqKTsKICByZXR1cm4gSlNfRVhDRVBUSU9OOwp9CgpKU1RpY2tNZXRlckRhdGEqCmpzX3RpY2tfbWV0ZXJfZGF0YShKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHZhbCkgewogIHJldHVybiBzdGF0aWNfY2FzdDxKU1RpY2tNZXRlckRhdGEqPihKU19HZXRPcGFxdWUyKGN0eCwgdmFsLCBqc190aWNrX21ldGVyX2NsYXNzX2lkKSk7Cn0KCnZvaWQKanNfdGlja19tZXRlcl9maW5hbGl6ZXIoSlNSdW50aW1lKiBydCwgSlNWYWx1ZSB2YWwpIHsKICBKU1RpY2tNZXRlckRhdGEqIHMgPSBzdGF0aWNfY2FzdDxKU1RpY2tNZXRlckRhdGEqPihKU19HZXRPcGFxdWUodmFsLCBqc190aWNrX21ldGVyX2NsYXNzX2lkKSk7CiAgLyogTm90ZTogJ3MnIGNhbiBiZSBOVUxMIGluIGNhc2UgSlNfU2V0T3BhcXVlKCkgd2FzIG5vdCBjYWxsZWQgKi8KICBqc19kZWFsbG9jYXRlKHJ0LCBzKTsKfQoKc3RhdGljIEpTVmFsdWUKanNfdGlja19tZXRlcl9nZXQoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgaW50IG1hZ2ljKSB7CiAgSlNWYWx1ZSByZXQgPSBKU19VTkRFRklORUQ7CiAgSlNUaWNrTWV0ZXJEYXRhKiBzID0gc3RhdGljX2Nhc3Q8SlNUaWNrTWV0ZXJEYXRhKj4oSlNfR2V0T3BhcXVlMihjdHgsIHRoaXNfdmFsLCBqc190aWNrX21ldGVyX2NsYXNzX2lkKSk7CiAgaWYoIXMpCiAgICByZXQgPSBKU19FWENFUFRJT047CiAgZWxzZSBpZihtYWdpYyA9PSAwKQogICAgcmV0ID0gSlNfTmV3SW50NjQoY3R4LCBzLT5nZXRDb3VudGVyKCkpOwogIGVsc2UgaWYobWFnaWMgPT0gMSkKICAgIHJldCA9IEpTX05ld0Zsb2F0NjQoY3R4LCBzLT5nZXRUaW1lTWljcm8oKSk7CiAgZWxzZSBpZihtYWdpYyA9PSAyKQogICAgcmV0ID0gSlNfTmV3RmxvYXQ2NChjdHgsIHMtPmdldFRpbWVNaWxsaSgpKTsKICBlbHNlIGlmKG1hZ2ljID09IDMpCiAgICByZXQgPSBKU19OZXdGbG9hdDY0KGN0eCwgcy0+Z2V0VGltZVNlYygpKTsKICBlbHNlIGlmKG1hZ2ljID09IDQpCiAgICByZXQgPSBKU19OZXdJbnQ2NChjdHgsIHMtPmdldFRpbWVUaWNrcygpKTsKI2lmIENWX1ZFUlNJT05fTUFKT1IgPj0gNCAmJiBDVl9WRVJTSU9OX01JTk9SID49IDQKICBlbHNlIGlmKG1hZ2ljID09IDUpCiAgICByZXQgPSBKU19OZXdGbG9hdDY0KGN0eCwgcy0+Z2V0QXZnVGltZU1pbGxpKCkpOwogIGVsc2UgaWYobWFnaWMgPT0gNikKICAgIHJldCA9IEpTX05ld0Zsb2F0NjQoY3R4LCBzLT5nZXRBdmdUaW1lU2VjKCkpOwogIGVsc2UgaWYobWFnaWMgPT0gNykKICAgIHJldCA9IEpTX05ld0Zsb2F0NjQoY3R4LCBzLT5nZXRGUFMoKSk7CiNlbmRpZgogIHJldHVybiByZXQ7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX3RpY2tfbWV0ZXJfbWV0aG9kKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QqIGFyZ3YsIGludCBtYWdpYykgewogIEpTVmFsdWUgcmV0ID0gSlNfVU5ERUZJTkVEOwogIEpTVGlja01ldGVyRGF0YSogcyA9IHN0YXRpY19jYXN0PEpTVGlja01ldGVyRGF0YSo+KEpTX0dldE9wYXF1ZTIoY3R4LCB0aGlzX3ZhbCwganNfdGlja19tZXRlcl9jbGFzc19pZCkpOwogIGlmKCFzKQogICAgcmV0ID0gSlNfRVhDRVBUSU9OOwogIGVsc2UgaWYobWFnaWMgPT0gMCkKICAgIHMtPnJlc2V0KCk7CiAgZWxzZSBpZihtYWdpYyA9PSAxKQogICAgcy0+c3RhcnQoKTsKICBlbHNlIGlmKG1hZ2ljID09IDIpCiAgICBzLT5zdG9wKCk7CgogIHJldHVybiByZXQ7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX3RpY2tfbWV0ZXJfdG9zdHJpbmcoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCogYXJndikgewogIEpTVGlja01ldGVyRGF0YSogczsKCiAgaWYoKHMgPSBzdGF0aWNfY2FzdDxKU1RpY2tNZXRlckRhdGEqPihKU19HZXRPcGFxdWUyKGN0eCwgdGhpc192YWwsIGpzX3RpY2tfbWV0ZXJfY2xhc3NfaWQpKSkpIHsKICAgIHN0ZDo6b3N0cmluZ3N0cmVhbSBvczsKICAgIG9zIDw8ICpzOwogICAgc3RkOjpzdHJpbmcgc3RyID0gb3Muc3RyKCk7CiAgICByZXR1cm4gSlNfTmV3U3RyaW5nTGVuKGN0eCwgc3RyLmRhdGEoKSwgc3RyLnNpemUoKSk7CiAgfQoKICByZXR1cm4gSlNfRVhDRVBUSU9OOwp9CgpKU0NsYXNzRGVmIGpzX3RpY2tfbWV0ZXJfY2xhc3MgPSB7CiAgICAuY2xhc3NfbmFtZSA9ICJUaWNrTWV0ZXIiLAogICAgLmZpbmFsaXplciA9IGpzX3RpY2tfbWV0ZXJfZmluYWxpemVyLAp9OwoKY29uc3QgSlNDRnVuY3Rpb25MaXN0RW50cnkganNfdGlja19tZXRlcl9wcm90b19mdW5jc1tdID0gewogICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJyZXNldCIsIDAsIGpzX3RpY2tfbWV0ZXJfbWV0aG9kLCAwKSwKICAgIEpTX0NGVU5DX01BR0lDX0RFRigic3RhcnQiLCAwLCBqc190aWNrX21ldGVyX21ldGhvZCwgMSksCiAgICBKU19DRlVOQ19NQUdJQ19ERUYoInN0b3AiLCAwLCBqc190aWNrX21ldGVyX21ldGhvZCwgMiksCiAgICBKU19DR0VUU0VUX01BR0lDX0RFRigiY291bnRlciIsIGpzX3RpY2tfbWV0ZXJfZ2V0LCBOVUxMLCAwKSwKICAgIEpTX0NHRVRTRVRfTUFHSUNfREVGKCJ0aW1lTWljcm8iLCBqc190aWNrX21ldGVyX2dldCwgTlVMTCwgMSksCiAgICBKU19DR0VUU0VUX01BR0lDX0RFRigidGltZU1pbGxpIiwganNfdGlja19tZXRlcl9nZXQsIE5VTEwsIDIpLAogICAgSlNfQ0dFVFNFVF9NQUdJQ19ERUYoInRpbWVTZWMiLCBqc190aWNrX21ldGVyX2dldCwgTlVMTCwgMyksCiAgICBKU19DR0VUU0VUX01BR0lDX0RFRigidGltZVRpY2tzIiwganNfdGlja19tZXRlcl9nZXQsIE5VTEwsIDQpLAojaWYgQ1ZfVkVSU0lPTl9NQUpPUiA+PSA0ICYmIENWX1ZFUlNJT05fTUlOT1IgPj0gNAogICAgSlNfQ0dFVFNFVF9NQUdJQ19ERUYoImF2Z1RpbWVNaWxsaSIsIGpzX3RpY2tfbWV0ZXJfZ2V0LCBOVUxMLCA1KSwKICAgIEpTX0NHRVRTRVRfTUFHSUNfREVGKCJhdmdUaW1lU2VjIiwganNfdGlja19tZXRlcl9nZXQsIE5VTEwsIDYpLAogICAgSlNfQ0dFVFNFVF9NQUdJQ19ERUYoImZwcyIsIGpzX3RpY2tfbWV0ZXJfZ2V0LCBOVUxMLCA3KSwKI2VuZGlmCiAgICBKU19DRlVOQ19ERUYoInRvU3RyaW5nIiwgMCwganNfdGlja19tZXRlcl90b3N0cmluZyksCgogICAgSlNfUFJPUF9TVFJJTkdfREVGKCJbU3ltYm9sLnRvU3RyaW5nVGFnXSIsICJUaWNrTWV0ZXIiLCBKU19QUk9QX0NPTkZJR1VSQUJMRSksCn07CgpleHRlcm4gIkMiIGludApqc191dGlsaXR5X2luaXQoSlNDb250ZXh0KiBjdHgsIEpTTW9kdWxlRGVmKiBtKSB7CgogIGlmKGpzX3RpY2tfbWV0ZXJfY2xhc3NfaWQgPT0gMCkgewogICAgLyogY3JlYXRlIHRoZSBUaWNrTWV0ZXIgY2xhc3MgKi8KICAgIEpTX05ld0NsYXNzSUQoJmpzX3RpY2tfbWV0ZXJfY2xhc3NfaWQpOwogICAgSlNfTmV3Q2xhc3MoSlNfR2V0UnVudGltZShjdHgpLCBqc190aWNrX21ldGVyX2NsYXNzX2lkLCAmanNfdGlja19tZXRlcl9jbGFzcyk7CgogICAgdGlja19tZXRlcl9wcm90byA9IEpTX05ld09iamVjdChjdHgpOwogICAgSlNfU2V0UHJvcGVydHlGdW5jdGlvbkxpc3QoY3R4LCB0aWNrX21ldGVyX3Byb3RvLCBqc190aWNrX21ldGVyX3Byb3RvX2Z1bmNzLCBjb3VudG9mKGpzX3RpY2tfbWV0ZXJfcHJvdG9fZnVuY3MpKTsKICAgIEpTX1NldENsYXNzUHJvdG8oY3R4LCBqc190aWNrX21ldGVyX2NsYXNzX2lkLCB0aWNrX21ldGVyX3Byb3RvKTsKCiAgICB0aWNrX21ldGVyX2NsYXNzID0gSlNfTmV3Q0Z1bmN0aW9uMihjdHgsIGpzX3RpY2tfbWV0ZXJfY3RvciwgIlRpY2tNZXRlciIsIDAsIEpTX0NGVU5DX2NvbnN0cnVjdG9yLCAwKTsKICAgIC8qIHNldCBwcm90by5jb25zdHJ1Y3RvciBhbmQgY3Rvci5wcm90b3R5cGUgKi8KICAgIEpTX1NldENvbnN0cnVjdG9yKGN0eCwgdGlja19tZXRlcl9jbGFzcywgdGlja19tZXRlcl9wcm90byk7CiAgfQoKICBpZihtKQogICAgSlNfU2V0TW9kdWxlRXhwb3J0KGN0eCwgbSwgIlRpY2tNZXRlciIsIHRpY2tfbWV0ZXJfY2xhc3MpOwoKICByZXR1cm4gMDsKfQoKZXh0ZXJuICJDIiBWSVNJQkxFIHZvaWQKanNfdXRpbGl0eV9leHBvcnQoSlNDb250ZXh0KiBjdHgsIEpTTW9kdWxlRGVmKiBtKSB7CiAgSlNfQWRkTW9kdWxlRXhwb3J0KGN0eCwgbSwgIlRpY2tNZXRlciIpOwp9Cgp2b2lkCmpzX3RpY2tfbWV0ZXJfY29uc3RydWN0b3IoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWUgcGFyZW50LCBjb25zdCBjaGFyKiBuYW1lKSB7CiAgaWYoSlNfSXNVbmRlZmluZWQodGlja19tZXRlcl9jbGFzcykpCiAgICBqc191dGlsaXR5X2luaXQoY3R4LCAwKTsKCiAgSlNfU2V0UHJvcGVydHlTdHIoY3R4LCBwYXJlbnQsIG5hbWUgPyBuYW1lIDogIlRpY2tNZXRlciIsIHRpY2tfbWV0ZXJfY2xhc3MpOwp9CgojaWZkZWYgSlNfVVRJTElUWV9NT0RVTEUKI2RlZmluZSBKU19JTklUX01PRFVMRSAvKlZJU0lCTEUqLyBqc19pbml0X21vZHVsZQojZWxzZQojZGVmaW5lIEpTX0lOSVRfTU9EVUxFIC8qVklTSUJMRSovIGpzX2luaXRfbW9kdWxlX3V0aWxpdHkKI2VuZGlmCgpKU01vZHVsZURlZioKSlNfSU5JVF9NT0RVTEUoSlNDb250ZXh0KiBjdHgsIGNvbnN0IGNoYXIqIG1vZHVsZV9uYW1lKSB7CiAgSlNNb2R1bGVEZWYqIG07CiAgbSA9IEpTX05ld0NNb2R1bGUoY3R4LCBtb2R1bGVfbmFtZSwgJmpzX3V0aWxpdHlfaW5pdCk7CiAgaWYoIW0pCiAgICByZXR1cm4gTlVMTDsKICBqc191dGlsaXR5X2V4cG9ydChjdHgsIG0pOwogIHJldHVybiBtOwp9Cn0KAAAAAAAAAABkFwAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAUhcAAAAAAABSFwAAAAAAAAAAAAAAAPC/"
				],
				[
					43,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAABkFwAAI2luY2x1ZGUgImpzYmluZGluZ3MuaHBwIgojaW5jbHVkZSAianNfYWxsb2MuaHBwIgoKZXh0ZXJuICJDIiBWSVNJQkxFIGludCBqc191dGlsaXR5X2luaXQoSlNDb250ZXh0KiwgSlNNb2R1bGVEZWYqKTsKCmV4dGVybiAiQyIgewoKSlNWYWx1ZSB0aWNrX21ldGVyX3Byb3RvID0gSlNfVU5ERUZJTkVELCB0aWNrX21ldGVyX2NsYXNzID0gSlNfVU5ERUZJTkVEOwpKU0NsYXNzSUQganNfdGlja19tZXRlcl9jbGFzc19pZCA9IDA7CgpWSVNJQkxFIEpTVmFsdWUKanNfdGlja19tZXRlcl9uZXcoSlNDb250ZXh0KiBjdHgpIHsKICBKU1ZhbHVlIHJldDsKICBKU1RpY2tNZXRlckRhdGEqIHM7CgogIHJldCA9IEpTX05ld09iamVjdFByb3RvQ2xhc3MoY3R4LCB0aWNrX21ldGVyX3Byb3RvLCBqc190aWNrX21ldGVyX2NsYXNzX2lkKTsKCiAgcyA9IGpzX2FsbG9jYXRlPEpTVGlja01ldGVyRGF0YT4oY3R4KTsKCiAgbmV3KHMpIGN2OjpUaWNrTWV0ZXIoKTsKCiAgSlNfU2V0T3BhcXVlKHJldCwgcyk7CiAgcmV0dXJuIHJldDsKfQoKc3RhdGljIEpTVmFsdWUKanNfdGlja19tZXRlcl9jdG9yKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgbmV3X3RhcmdldCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCogYXJndikgewogIEpTVGlja01ldGVyRGF0YSogczsKICBKU1ZhbHVlIG9iaiA9IEpTX1VOREVGSU5FRDsKICBKU1ZhbHVlIHByb3RvOwoKICBzID0ganNfYWxsb2NhdGU8SlNUaWNrTWV0ZXJEYXRhPihjdHgpOwogIGlmKCFzKQogICAgcmV0dXJuIEpTX0VYQ0VQVElPTjsKICBuZXcocykgY3Y6OlRpY2tNZXRlcigpOwoKICAvKiB1c2luZyBuZXdfdGFyZ2V0IHRvIGdldCB0aGUgcHJvdG90eXBlIGlzIG5lY2Vzc2FyeSB3aGVuIHRoZQogICAgIGNsYXNzIGlzIGV4dGVuZGVkLiAqLwogIHByb3RvID0gSlNfR2V0UHJvcGVydHlTdHIoY3R4LCBuZXdfdGFyZ2V0LCAicHJvdG90eXBlIik7CiAgaWYoSlNfSXNFeGNlcHRpb24ocHJvdG8pKQogICAgZ290byBmYWlsOwogIG9iaiA9IEpTX05ld09iamVjdFByb3RvQ2xhc3MoY3R4LCBwcm90bywganNfdGlja19tZXRlcl9jbGFzc19pZCk7CiAgSlNfRnJlZVZhbHVlKGN0eCwgcHJvdG8pOwogIGlmKEpTX0lzRXhjZXB0aW9uKG9iaikpCiAgICBnb3RvIGZhaWw7CiAgSlNfU2V0T3BhcXVlKG9iaiwgcyk7CiAgcmV0dXJuIG9iajsKZmFpbDoKICBqc19kZWFsbG9jYXRlKGN0eCwgcyk7CiAgSlNfRnJlZVZhbHVlKGN0eCwgb2JqKTsKICByZXR1cm4gSlNfRVhDRVBUSU9OOwp9CgpKU1RpY2tNZXRlckRhdGEqCmpzX3RpY2tfbWV0ZXJfZGF0YShKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHZhbCkgewogIHJldHVybiBzdGF0aWNfY2FzdDxKU1RpY2tNZXRlckRhdGEqPihKU19HZXRPcGFxdWUyKGN0eCwgdmFsLCBqc190aWNrX21ldGVyX2NsYXNzX2lkKSk7Cn0KCnZvaWQKanNfdGlja19tZXRlcl9maW5hbGl6ZXIoSlNSdW50aW1lKiBydCwgSlNWYWx1ZSB2YWwpIHsKICBKU1RpY2tNZXRlckRhdGEqIHMgPSBzdGF0aWNfY2FzdDxKU1RpY2tNZXRlckRhdGEqPihKU19HZXRPcGFxdWUodmFsLCBqc190aWNrX21ldGVyX2NsYXNzX2lkKSk7CiAgLyogTm90ZTogJ3MnIGNhbiBiZSBOVUxMIGluIGNhc2UgSlNfU2V0T3BhcXVlKCkgd2FzIG5vdCBjYWxsZWQgKi8KICBqc19kZWFsbG9jYXRlKHJ0LCBzKTsKfQoKc3RhdGljIEpTVmFsdWUKanNfdGlja19tZXRlcl9nZXQoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgaW50IG1hZ2ljKSB7CiAgSlNWYWx1ZSByZXQgPSBKU19VTkRFRklORUQ7CiAgSlNUaWNrTWV0ZXJEYXRhKiBzID0gc3RhdGljX2Nhc3Q8SlNUaWNrTWV0ZXJEYXRhKj4oSlNfR2V0T3BhcXVlMihjdHgsIHRoaXNfdmFsLCBqc190aWNrX21ldGVyX2NsYXNzX2lkKSk7CiAgaWYoIXMpCiAgICByZXQgPSBKU19FWENFUFRJT047CiAgZWxzZSBpZihtYWdpYyA9PSAwKQogICAgcmV0ID0gSlNfTmV3SW50NjQoY3R4LCBzLT5nZXRDb3VudGVyKCkpOwogIGVsc2UgaWYobWFnaWMgPT0gMSkKICAgIHJldCA9IEpTX05ld0Zsb2F0NjQoY3R4LCBzLT5nZXRUaW1lTWljcm8oKSk7CiAgZWxzZSBpZihtYWdpYyA9PSAyKQogICAgcmV0ID0gSlNfTmV3RmxvYXQ2NChjdHgsIHMtPmdldFRpbWVNaWxsaSgpKTsKICBlbHNlIGlmKG1hZ2ljID09IDMpCiAgICByZXQgPSBKU19OZXdGbG9hdDY0KGN0eCwgcy0+Z2V0VGltZVNlYygpKTsKICBlbHNlIGlmKG1hZ2ljID09IDQpCiAgICByZXQgPSBKU19OZXdJbnQ2NChjdHgsIHMtPmdldFRpbWVUaWNrcygpKTsKI2lmIENWX1ZFUlNJT05fTUFKT1IgPj0gNCAmJiBDVl9WRVJTSU9OX01JTk9SID49IDQKICBlbHNlIGlmKG1hZ2ljID09IDUpCiAgICByZXQgPSBKU19OZXdGbG9hdDY0KGN0eCwgcy0+Z2V0QXZnVGltZU1pbGxpKCkpOwogIGVsc2UgaWYobWFnaWMgPT0gNikKICAgIHJldCA9IEpTX05ld0Zsb2F0NjQoY3R4LCBzLT5nZXRBdmdUaW1lU2VjKCkpOwogIGVsc2UgaWYobWFnaWMgPT0gNykKICAgIHJldCA9IEpTX05ld0Zsb2F0NjQoY3R4LCBzLT5nZXRGUFMoKSk7CiNlbmRpZgogIHJldHVybiByZXQ7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX3RpY2tfbWV0ZXJfbWV0aG9kKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QqIGFyZ3YsIGludCBtYWdpYykgewogIEpTVmFsdWUgcmV0ID0gSlNfVU5ERUZJTkVEOwogIEpTVGlja01ldGVyRGF0YSogcyA9IHN0YXRpY19jYXN0PEpTVGlja01ldGVyRGF0YSo+KEpTX0dldE9wYXF1ZTIoY3R4LCB0aGlzX3ZhbCwganNfdGlja19tZXRlcl9jbGFzc19pZCkpOwogIGlmKCFzKQogICAgcmV0ID0gSlNfRVhDRVBUSU9OOwogIGVsc2UgaWYobWFnaWMgPT0gMCkKICAgIHMtPnJlc2V0KCk7CiAgZWxzZSBpZihtYWdpYyA9PSAxKQogICAgcy0+c3RhcnQoKTsKICBlbHNlIGlmKG1hZ2ljID09IDIpCiAgICBzLT5zdG9wKCk7CgogIHJldHVybiByZXQ7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX3RpY2tfbWV0ZXJfdG9zdHJpbmcoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCogYXJndikgewogIEpTVGlja01ldGVyRGF0YSogczsKCiAgaWYoKHMgPSBzdGF0aWNfY2FzdDxKU1RpY2tNZXRlckRhdGEqPihKU19HZXRPcGFxdWUyKGN0eCwgdGhpc192YWwsIGpzX3RpY2tfbWV0ZXJfY2xhc3NfaWQpKSkpIHsKICAgIHN0ZDo6b3N0cmluZ3N0cmVhbSBvczsKICAgIG9zIDw8ICpzOwogICAgc3RkOjpzdHJpbmcgc3RyID0gb3Muc3RyKCk7CiAgICByZXR1cm4gSlNfTmV3U3RyaW5nTGVuKGN0eCwgc3RyLmRhdGEoKSwgc3RyLnNpemUoKSk7CiAgfQoKICByZXR1cm4gSlNfRVhDRVBUSU9OOwp9CgpKU0NsYXNzRGVmIGpzX3RpY2tfbWV0ZXJfY2xhc3MgPSB7CiAgICAuY2xhc3NfbmFtZSA9ICJUaWNrTWV0ZXIiLAogICAgLmZpbmFsaXplciA9IGpzX3RpY2tfbWV0ZXJfZmluYWxpemVyLAp9OwoKY29uc3QgSlNDRnVuY3Rpb25MaXN0RW50cnkganNfdGlja19tZXRlcl9wcm90b19mdW5jc1tdID0gewogICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJyZXNldCIsIDAsIGpzX3RpY2tfbWV0ZXJfbWV0aG9kLCAwKSwKICAgIEpTX0NGVU5DX01BR0lDX0RFRigic3RhcnQiLCAwLCBqc190aWNrX21ldGVyX21ldGhvZCwgMSksCiAgICBKU19DRlVOQ19NQUdJQ19ERUYoInN0b3AiLCAwLCBqc190aWNrX21ldGVyX21ldGhvZCwgMiksCiAgICBKU19DR0VUU0VUX01BR0lDX0RFRigiY291bnRlciIsIGpzX3RpY2tfbWV0ZXJfZ2V0LCBOVUxMLCAwKSwKICAgIEpTX0NHRVRTRVRfTUFHSUNfREVGKCJ0aW1lTWljcm8iLCBqc190aWNrX21ldGVyX2dldCwgTlVMTCwgMSksCiAgICBKU19DR0VUU0VUX01BR0lDX0RFRigidGltZU1pbGxpIiwganNfdGlja19tZXRlcl9nZXQsIE5VTEwsIDIpLAogICAgSlNfQ0dFVFNFVF9NQUdJQ19ERUYoInRpbWVTZWMiLCBqc190aWNrX21ldGVyX2dldCwgTlVMTCwgMyksCiAgICBKU19DR0VUU0VUX01BR0lDX0RFRigidGltZVRpY2tzIiwganNfdGlja19tZXRlcl9nZXQsIE5VTEwsIDQpLAojaWYgQ1ZfVkVSU0lPTl9NQUpPUiA+PSA0ICYmIENWX1ZFUlNJT05fTUlOT1IgPj0gNAogICAgSlNfQ0dFVFNFVF9NQUdJQ19ERUYoImF2Z1RpbWVNaWxsaSIsIGpzX3RpY2tfbWV0ZXJfZ2V0LCBOVUxMLCA1KSwKICAgIEpTX0NHRVRTRVRfTUFHSUNfREVGKCJhdmdUaW1lU2VjIiwganNfdGlja19tZXRlcl9nZXQsIE5VTEwsIDYpLAogICAgSlNfQ0dFVFNFVF9NQUdJQ19ERUYoImZwcyIsIGpzX3RpY2tfbWV0ZXJfZ2V0LCBOVUxMLCA3KSwKI2VuZGlmCiAgICBKU19DRlVOQ19ERUYoInRvU3RyaW5nIiwgMCwganNfdGlja19tZXRlcl90b3N0cmluZyksCgogICAgSlNfUFJPUF9TVFJJTkdfREVGKCJbU3ltYm9sLnRvU3RyaW5nVGFnXSIsICJUaWNrTWV0ZXIiLCBKU19QUk9QX0NPTkZJR1VSQUJMRSksCn07CgpleHRlcm4gIkMiIGludApqc191dGlsaXR5X2luaXQoSlNDb250ZXh0KiBjdHgsIEpTTW9kdWxlRGVmKiBtKSB7CgogIGlmKGpzX3RpY2tfbWV0ZXJfY2xhc3NfaWQgPT0gMCkgewogICAgLyogY3JlYXRlIHRoZSBUaWNrTWV0ZXIgY2xhc3MgKi8KICAgIEpTX05ld0NsYXNzSUQoJmpzX3RpY2tfbWV0ZXJfY2xhc3NfaWQpOwogICAgSlNfTmV3Q2xhc3MoSlNfR2V0UnVudGltZShjdHgpLCBqc190aWNrX21ldGVyX2NsYXNzX2lkLCAmanNfdGlja19tZXRlcl9jbGFzcyk7CgogICAgdGlja19tZXRlcl9wcm90byA9IEpTX05ld09iamVjdChjdHgpOwogICAgSlNfU2V0UHJvcGVydHlGdW5jdGlvbkxpc3QoY3R4LCB0aWNrX21ldGVyX3Byb3RvLCBqc190aWNrX21ldGVyX3Byb3RvX2Z1bmNzLCBjb3VudG9mKGpzX3RpY2tfbWV0ZXJfcHJvdG9fZnVuY3MpKTsKICAgIEpTX1NldENsYXNzUHJvdG8oY3R4LCBqc190aWNrX21ldGVyX2NsYXNzX2lkLCB0aWNrX21ldGVyX3Byb3RvKTsKCiAgICB0aWNrX21ldGVyX2NsYXNzID0gSlNfTmV3Q0Z1bmN0aW9uMihjdHgsIGpzX3RpY2tfbWV0ZXJfY3RvciwgIlRpY2tNZXRlciIsIDAsIEpTX0NGVU5DX2NvbnN0cnVjdG9yLCAwKTsKICAgIC8qIHNldCBwcm90by5jb25zdHJ1Y3RvciBhbmQgY3Rvci5wcm90b3R5cGUgKi8KICAgIEpTX1NldENvbnN0cnVjdG9yKGN0eCwgdGlja19tZXRlcl9jbGFzcywgdGlja19tZXRlcl9wcm90byk7CiAgfQoKICBpZihtKQogICAgSlNfU2V0TW9kdWxlRXhwb3J0KGN0eCwgbSwgIlRpY2tNZXRlciIsIHRpY2tfbWV0ZXJfY2xhc3MpOwoKICByZXR1cm4gMDsKfQoKZXh0ZXJuICJDIiBWSVNJQkxFIHZvaWQKanNfdXRpbGl0eV9leHBvcnQoSlNDb250ZXh0KiBjdHgsIEpTTW9kdWxlRGVmKiBtKSB7CiAgSlNfQWRkTW9kdWxlRXhwb3J0KGN0eCwgbSwgIlRpY2tNZXRlciIpOwp9Cgp2b2lkCmpzX3RpY2tfbWV0ZXJfY29uc3RydWN0b3IoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWUgcGFyZW50LCBjb25zdCBjaGFyKiBuYW1lKSB7CiAgaWYoSlNfSXNVbmRlZmluZWQodGlja19tZXRlcl9jbGFzcykpCiAgICBqc191dGlsaXR5X2luaXQoY3R4LCAwKTsKCiAgSlNfU2V0UHJvcGVydHlTdHIoY3R4LCBwYXJlbnQsIG5hbWUgPyBuYW1lIDogIlRpY2tNZXRlciIsIHRpY2tfbWV0ZXJfY2xhc3MpOwp9CgojaWZkZWYgSlNfVVRJTElUWV9NT0RVTEUKI2RlZmluZSBKU19JTklUX01PRFVMRSAvKlZJU0lCTEUqLyBqc19pbml0X21vZHVsZQojZWxzZQojZGVmaW5lIEpTX0lOSVRfTU9EVUxFIC8qVklTSUJMRSovIGpzX2luaXRfbW9kdWxlX3V0aWxpdHkKI2VuZGlmCgpKU01vZHVsZURlZioKSlNfSU5JVF9NT0RVTEUoSlNDb250ZXh0KiBjdHgsIGNvbnN0IGNoYXIqIG1vZHVsZV9uYW1lKSB7CiAgSlNNb2R1bGVEZWYqIG07CiAgbSA9IEpTX05ld0NNb2R1bGUoY3R4LCBtb2R1bGVfbmFtZSwgJmpzX3V0aWxpdHlfaW5pdCk7CiAgaWYoIW0pCiAgICByZXR1cm4gTlVMTDsKICBqc191dGlsaXR5X2V4cG9ydChjdHgsIG0pOwogIHJldHVybiBtOwp9Cn0KAAAAAAAAAABUFwAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAUhcAAAAAAABSFwAAAAAAAAAAAAAAAPC/"
				]
			]
		},
		{
			"file": "js_video_capture.cpp",
			"settings":
			{
				"buffer_size": 6393,
				"line_ending": "Unix"
			},
			"undo_stack":
			[
				[
					5,
					1,
					"paste",
					null,
					"AQAAAEgAAAAAAAAAkAAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAASAAAAAAAAABIAAAAAAAAAAAAAAAAAPC/"
				],
				[
					7,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"AQAAAEgAAAAAAAAASQAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAASAAAAAAAAABIAAAAAAAAAAAAAAAAAAAA"
				],
				[
					8,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAACSGAAAI2luY2x1ZGUgImpzYmluZGluZ3MuaHBwIgojaW5jbHVkZSAianNfbWF0LmhwcCIKI2luY2x1ZGUgImpzX2FsbG9jLmhwcCIKCmV4dGVybiAiQyIgVklTSUJMRSBpbnQganNfdmlkZW9fY2FwdHVyZV9pbml0KEpTQ29udGV4dCosIEpTTW9kdWxlRGVmKik7CgpleHRlcm4gIkMiIHsKSlNWYWx1ZSB2aWRlb19jYXB0dXJlX3Byb3RvID0gSlNfVU5ERUZJTkVELCB2aWRlb19jYXB0dXJlX2NsYXNzID0gSlNfVU5ERUZJTkVEOwpKU0NsYXNzSUQganNfdmlkZW9fY2FwdHVyZV9jbGFzc19pZCA9IDA7Cn0KCnN0YXRpYyBpbmxpbmUgaW50CmlzX251bWVyaWMoY29uc3Qgc3RkOjpzdHJpbmcmIHMpIHsKICByZXR1cm4gc3RkOjphbGxfb2Yocy5iZWdpbigpLCBzLmVuZCgpLCBbXSh1bnNpZ25lZCBjaGFyIGMpIHsgcmV0dXJuIHN0ZDo6aXNkaWdpdChjKTsgfSk7Cn0KCnN0YXRpYyBib29sCmpzX3ZpZGVvX2NhcHR1cmVfb3BlbihKU0NvbnRleHQqIGN0eCwgSlNWaWRlb0NhcHR1cmVEYXRhKiBzLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2KSB7CiAgaW50MzJfdCBjYW1JRCwgYXBpUHJlZmVyZW5jZSA9IGN2OjpDQVBfQU5ZOwogIGN2OjpTdHJpbmcgZmlsZW5hbWU7CgogIGZpbGVuYW1lID0gSlNfVG9DU3RyaW5nKGN0eCwgYXJndlswXSk7CgogIGlmKGFyZ2MgPiAxKQogICAgSlNfVG9JbnQzMihjdHgsICZhcGlQcmVmZXJlbmNlLCBhcmd2WzFdKTsKCiAgaWYoaXNfbnVtZXJpYyhmaWxlbmFtZSkpCiAgICBKU19Ub0ludDMyKGN0eCwgJmNhbUlELCBhcmd2WzBdKTsKCiAgc3RkOjpjZXJyIDw8ICJWaWRlb0NhcHR1cmUub3BlbiBmaWxlbmFtZT0nIiA8PCBmaWxlbmFtZSA8PCAiJywgY2FtSUQ9IiA8PCBjYW1JRCA8PCAiLCBhcGlQcmVmZXJlbmNlPSIgPDwgYXBpUHJlZmVyZW5jZQogICAgICAgICAgICA8PCBzdGQ6OmVuZGw7CgogIGlmKGZpbGVuYW1lLmVtcHR5KCkpCiAgICByZXR1cm4gcy0+b3BlbihjYW1JRCwgYXBpUHJlZmVyZW5jZSk7CgogIHJldHVybiBzLT5vcGVuKGZpbGVuYW1lLCBhcGlQcmVmZXJlbmNlKTsKfQoKc3RhdGljIEpTVmFsdWUKanNfdmlkZW9fY2FwdHVyZV9jdG9yKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgbmV3X3RhcmdldCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCogYXJndikgewogIEpTVmlkZW9DYXB0dXJlRGF0YSogczsKICBKU1ZhbHVlIG9iaiA9IEpTX1VOREVGSU5FRDsKICBKU1ZhbHVlIHByb3RvLCByZXQ7CgogIHMgPSBqc19hbGxvY2F0ZTxKU1ZpZGVvQ2FwdHVyZURhdGE+KGN0eCk7CiAgaWYoIXMpCiAgICByZXR1cm4gSlNfRVhDRVBUSU9OOwoKICBuZXcocykgSlNWaWRlb0NhcHR1cmVEYXRhKCk7CgogIGlmKGFyZ2MgPiAwKSB7CiAgICBpZighanNfdmlkZW9fY2FwdHVyZV9vcGVuKGN0eCwgcywgYXJnYywgYXJndikpCiAgICAgIHJldHVybiBKU19FWENFUFRJT047CiAgfQoKICAvKiB1c2luZyBuZXdfdGFyZ2V0IHRvIGdldCB0aGUgcHJvdG90eXBlIGlzIG5lY2Vzc2FyeSB3aGVuIHRoZQogICAgIGNsYXNzIGlzIGV4dGVuZGVkLiAqLwogIHByb3RvID0gSlNfR2V0UHJvcGVydHlTdHIoY3R4LCBuZXdfdGFyZ2V0LCAicHJvdG90eXBlIik7CiAgaWYoSlNfSXNFeGNlcHRpb24ocHJvdG8pKQogICAgZ290byBmYWlsOwogIG9iaiA9IEpTX05ld09iamVjdFByb3RvQ2xhc3MoY3R4LCBwcm90bywganNfdmlkZW9fY2FwdHVyZV9jbGFzc19pZCk7CiAgSlNfRnJlZVZhbHVlKGN0eCwgcHJvdG8pOwogIGlmKEpTX0lzRXhjZXB0aW9uKG9iaikpCiAgICBnb3RvIGZhaWw7CiAgSlNfU2V0T3BhcXVlKG9iaiwgcyk7CiAgcmV0dXJuIG9iajsKZmFpbDoKICBqc19kZWFsbG9jYXRlKGN0eCwgcyk7CiAgSlNfRnJlZVZhbHVlKGN0eCwgb2JqKTsKICByZXR1cm4gSlNfRVhDRVBUSU9OOwp9CgpWSVNJQkxFIEpTVmlkZW9DYXB0dXJlRGF0YSoKanNfdmlkZW9fY2FwdHVyZV9kYXRhKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdmFsKSB7CiAgcmV0dXJuIHN0YXRpY19jYXN0PEpTVmlkZW9DYXB0dXJlRGF0YSo+KEpTX0dldE9wYXF1ZTIoY3R4LCB2YWwsIGpzX3ZpZGVvX2NhcHR1cmVfY2xhc3NfaWQpKTsKfQoKdm9pZApqc192aWRlb19jYXB0dXJlX2ZpbmFsaXplcihKU1J1bnRpbWUqIHJ0LCBKU1ZhbHVlIHZhbCkgewogIEpTVmlkZW9DYXB0dXJlRGF0YSogcyA9IHN0YXRpY19jYXN0PEpTVmlkZW9DYXB0dXJlRGF0YSo+KEpTX0dldE9wYXF1ZSh2YWwsIGpzX3ZpZGVvX2NhcHR1cmVfY2xhc3NfaWQpKTsKICAvKiBOb3RlOiAncycgY2FuIGJlIE5VTEwgaW4gY2FzZSBKU19TZXRPcGFxdWUoKSB3YXMgbm90IGNhbGxlZCAqLwoKICBzLT5+SlNWaWRlb0NhcHR1cmVEYXRhKCk7CiAganNfZGVhbGxvY2F0ZShydCwgcyk7CgogIEpTX0ZyZWVWYWx1ZVJUKHJ0LCB2YWwpOwp9CgpzdGF0aWMgSlNWYWx1ZQpqc192aWRlb19jYXB0dXJlX21ldGhvZChKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHZpZGVvX2NhcHR1cmUsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QqIGFyZ3YsIGludCBtYWdpYykgewogIEpTVmlkZW9DYXB0dXJlRGF0YSogcyA9IHN0YXRpY19jYXN0PEpTVmlkZW9DYXB0dXJlRGF0YSo+KEpTX0dldE9wYXF1ZTIoY3R4LCB2aWRlb19jYXB0dXJlLCBqc192aWRlb19jYXB0dXJlX2NsYXNzX2lkKSk7CiAgSlNWYWx1ZSByZXQgPSBKU19VTkRFRklORUQ7CiAgaW50MzJfdCBwcm9wSUQ7CiAgZG91YmxlIHZhbHVlID0gMDsKCiAgaWYobWFnaWMgPT0gMCkgewogICAgaWYoIUpTX1RvSW50MzIoY3R4LCAmcHJvcElELCBhcmd2WzBdKSkgewogICAgICB2YWx1ZSA9IHMtPmdldChwcm9wSUQpOwogICAgICByZXQgPSBKU19OZXdGbG9hdDY0KGN0eCwgdmFsdWUpOwogICAgfSBlbHNlIHsKICAgICAgcmV0ID0gSlNfRVhDRVBUSU9OOwogICAgfQogIH0gZWxzZSBpZihtYWdpYyA9PSAxKSB7CiAgICBpZighSlNfVG9JbnQzMihjdHgsICZwcm9wSUQsIGFyZ3ZbMF0pKSB7CiAgICAgIEpTX1RvRmxvYXQ2NChjdHgsICZ2YWx1ZSwgYXJndlsxXSk7CgogICAgICBzLT5zZXQocHJvcElELCB2YWx1ZSk7CiAgICB9IGVsc2UKICAgICAgcmV0ID0gSlNfRVhDRVBUSU9OOwogIH0gZWxzZSBpZihtYWdpYyA9PSAyKSB7CiAgICBzdGQ6OnN0cmluZyBiYWNrZW5kOwogICAgdHJ5IHsKICAgICAgYmFja2VuZCA9IHMtPmdldEJhY2tlbmROYW1lKCk7CiAgICB9IGNhdGNoKGNvbnN0IGN2OjpFeGNlcHRpb24mIGUpIHsgYmFja2VuZCA9IGUubXNnOyB9CiAgICByZXQgPSBKU19OZXdTdHJpbmcoY3R4LCBiYWNrZW5kLmNfc3RyKCkpOwogIH0gZWxzZSBpZihtYWdpYyA9PSAzKSB7CiAgICByZXQgPSBKU19OZXdCb29sKGN0eCwgcy0+Z3JhYigpKTsKICB9IGVsc2UgaWYobWFnaWMgPT0gNCkgewogICAgcmV0ID0gSlNfTmV3Qm9vbChjdHgsIHMtPmlzT3BlbmVkKCkpOwogIH0gZWxzZSBpZihtYWdpYyA9PSA1KSB7CiAgICByZXQgPSBKU19OZXdCb29sKGN0eCwganNfdmlkZW9fY2FwdHVyZV9vcGVuKGN0eCwgcywgYXJnYywgYXJndikpOwogIH0KCiAgZWxzZSBpZihtYWdpYyA9PSA2IHx8IG1hZ2ljID09IDcpIHsKICAgIEpTTWF0RGF0YSogbSA9IGpzX21hdF9kYXRhKGN0eCwgYXJndlswXSk7CgogICAgaWYobSA9PSBudWxscHRyKQogICAgICByZXR1cm4gSlNfRVhDRVBUSU9OOwoKICAgIHJldCA9IEpTX05ld0Jvb2woY3R4LCBtYWdpYyA9PSA2ID8gcy0+cmVhZCgqbSkgOiBzLT5yZXRyaWV2ZSgqbSkpOwogIH0KCiAgcmV0dXJuIHJldDsKfQoKVklTSUJMRSBKU1ZhbHVlCmpzX3ZpZGVvX2NhcHR1cmVfd3JhcChKU0NvbnRleHQqIGN0eCwgY3Y6OlZpZGVvQ2FwdHVyZSogY2FwKSB7CiAgSlNWYWx1ZSByZXQ7CgogIHJldCA9IEpTX05ld09iamVjdFByb3RvQ2xhc3MoY3R4LCB2aWRlb19jYXB0dXJlX3Byb3RvLCBqc192aWRlb19jYXB0dXJlX2NsYXNzX2lkKTsKCiAgLy8gY2FwLT5hZGRyZWYoKTsKCiAgSlNfU2V0T3BhcXVlKHJldCwgY2FwKTsKCiAgcmV0dXJuIHJldDsKfQoKSlNDbGFzc0RlZiBqc192aWRlb19jYXB0dXJlX2NsYXNzID0gewogICAgLmNsYXNzX25hbWUgPSAiVmlkZW9DYXB0dXJlIiwKICAgIC5maW5hbGl6ZXIgPSBqc192aWRlb19jYXB0dXJlX2ZpbmFsaXplciwKfTsKCmNvbnN0IEpTQ0Z1bmN0aW9uTGlzdEVudHJ5IGpzX3ZpZGVvX2NhcHR1cmVfcHJvdG9fZnVuY3NbXSA9IHsKICAgIEpTX0NGVU5DX01BR0lDX0RFRigiZ2V0IiwgMSwganNfdmlkZW9fY2FwdHVyZV9tZXRob2QsIDApLAogICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJzZXQiLCAyLCBqc192aWRlb19jYXB0dXJlX21ldGhvZCwgMSksCiAgICBKU19DRlVOQ19NQUdJQ19ERUYoImdldEJhY2tlbmROYW1lIiwgMCwganNfdmlkZW9fY2FwdHVyZV9tZXRob2QsIDIpLAogICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJncmFiIiwgMCwganNfdmlkZW9fY2FwdHVyZV9tZXRob2QsIDMpLAogICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJpc09wZW5lZCIsIDAsIGpzX3ZpZGVvX2NhcHR1cmVfbWV0aG9kLCA0KSwKICAgIEpTX0NGVU5DX01BR0lDX0RFRigib3BlbiIsIDEsIGpzX3ZpZGVvX2NhcHR1cmVfbWV0aG9kLCA1KSwKICAgIEpTX0NGVU5DX01BR0lDX0RFRigicmVhZCIsIDEsIGpzX3ZpZGVvX2NhcHR1cmVfbWV0aG9kLCA2KSwKICAgIEpTX0NGVU5DX01BR0lDX0RFRigicmV0cmlldmUiLCAxLCBqc192aWRlb19jYXB0dXJlX21ldGhvZCwgNyksCgogICAgSlNfUFJPUF9TVFJJTkdfREVGKCJbU3ltYm9sLnRvU3RyaW5nVGFnXSIsICJWaWRlb0NhcHR1cmUiLCBKU19QUk9QX0NPTkZJR1VSQUJMRSksCgp9OwoKaW50CmpzX3ZpZGVvX2NhcHR1cmVfaW5pdChKU0NvbnRleHQqIGN0eCwgSlNNb2R1bGVEZWYqIG0pIHsKCiAgaWYoanNfdmlkZW9fY2FwdHVyZV9jbGFzc19pZCA9PSAwKSB7CiAgICAvKiBjcmVhdGUgdGhlIFZpZGVvQ2FwdHVyZSBjbGFzcyAqLwogICAgSlNfTmV3Q2xhc3NJRCgmanNfdmlkZW9fY2FwdHVyZV9jbGFzc19pZCk7CiAgICBKU19OZXdDbGFzcyhKU19HZXRSdW50aW1lKGN0eCksIGpzX3ZpZGVvX2NhcHR1cmVfY2xhc3NfaWQsICZqc192aWRlb19jYXB0dXJlX2NsYXNzKTsKCiAgICB2aWRlb19jYXB0dXJlX3Byb3RvID0gSlNfTmV3T2JqZWN0KGN0eCk7CiAgICBKU19TZXRQcm9wZXJ0eUZ1bmN0aW9uTGlzdChjdHgsIHZpZGVvX2NhcHR1cmVfcHJvdG8sIGpzX3ZpZGVvX2NhcHR1cmVfcHJvdG9fZnVuY3MsIGNvdW50b2YoanNfdmlkZW9fY2FwdHVyZV9wcm90b19mdW5jcykpOwogICAgSlNfU2V0Q2xhc3NQcm90byhjdHgsIGpzX3ZpZGVvX2NhcHR1cmVfY2xhc3NfaWQsIHZpZGVvX2NhcHR1cmVfcHJvdG8pOwoKICAgIHZpZGVvX2NhcHR1cmVfY2xhc3MgPSBKU19OZXdDRnVuY3Rpb24yKGN0eCwganNfdmlkZW9fY2FwdHVyZV9jdG9yLCAiVmlkZW9DYXB0dXJlIiwgMiwgSlNfQ0ZVTkNfY29uc3RydWN0b3IsIDApOwogICAgLyogc2V0IHByb3RvLmNvbnN0cnVjdG9yIGFuZCBjdG9yLnByb3RvdHlwZSAqLwogICAgSlNfU2V0Q29uc3RydWN0b3IoY3R4LCB2aWRlb19jYXB0dXJlX2NsYXNzLCB2aWRlb19jYXB0dXJlX3Byb3RvKTsKICB9CgogIGlmKG0pCiAgICBKU19TZXRNb2R1bGVFeHBvcnQoY3R4LCBtLCAiVmlkZW9DYXB0dXJlIiwgdmlkZW9fY2FwdHVyZV9jbGFzcyk7CgogIHJldHVybiAwOwp9Cgp2b2lkCmpzX3ZpZGVvX2NhcHR1cmVfY29uc3RydWN0b3IoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWUgcGFyZW50LCBjb25zdCBjaGFyKiBuYW1lKSB7CiAgaWYoSlNfSXNVbmRlZmluZWQodmlkZW9fY2FwdHVyZV9jbGFzcykpCiAgICBqc192aWRlb19jYXB0dXJlX2luaXQoY3R4LCAwKTsKCiAgSlNfU2V0UHJvcGVydHlTdHIoY3R4LCBwYXJlbnQsIG5hbWUgPyBuYW1lIDogIlZpZGVvQ2FwdHVyZSIsIHZpZGVvX2NhcHR1cmVfY2xhc3MpOwp9CgojaWZkZWYgSlNfVklERU9fQ0FQVFVSRV9NT0RVTEUKI2RlZmluZSBKU19JTklUX01PRFVMRSAvKlZJU0lCTEUqLyBqc19pbml0X21vZHVsZQojZWxzZQojZGVmaW5lIEpTX0lOSVRfTU9EVUxFIC8qVklTSUJMRSovIGpzX2luaXRfbW9kdWxlX3ZpZGVvX2NhcHR1cmUKI2VuZGlmCgpleHRlcm4gIkMiIEpTTW9kdWxlRGVmKgpKU19JTklUX01PRFVMRShKU0NvbnRleHQqIGN0eCwgY29uc3QgY2hhciogbW9kdWxlX25hbWUpIHsKICBKU01vZHVsZURlZiogbTsKICBtID0gSlNfTmV3Q01vZHVsZShjdHgsIG1vZHVsZV9uYW1lLCAmanNfdmlkZW9fY2FwdHVyZV9pbml0KTsKICBpZighbSkKICAgIHJldHVybiBOVUxMOwogIEpTX0FkZE1vZHVsZUV4cG9ydChjdHgsIG0sICJWaWRlb0NhcHR1cmUiKTsKICByZXR1cm4gbTsKfQoAAAAAAAAAAOYYAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAASQAAAAAAAABJAAAAAAAAAAAAAAAAAPC/"
				],
				[
					11,
					1,
					"cut",
					null,
					"AQAAAJEYAAAAAAAAkRgAAAAAAABVAAAACmV4dGVybiAiQyIgVklTSUJMRSB2b2lkIGpzX3ZpZGVvX2NhcHR1cmVfZXhwb3J0KEpTQ29udGV4dCogY3R4LCBKU01vZHVsZURlZiogbSkgewp9Cg",
					"AQAAAAAAAAABAAAAkRgAAAAAAADmGAAAAAAAAAAAAAAAAPC/"
				],
				[
					16,
					1,
					"paste",
					null,
					"AQAAAP0VAAAAAAAAUhYAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA/RUAAAAAAAD9FQAAAAAAAAAAAAAAAPC/"
				],
				[
					22,
					1,
					"cut",
					null,
					"AQAAAKsYAAAAAAAAqxgAAAAAAAAuAAAAICBKU19BZGRNb2R1bGVFeHBvcnQoY3R4LCBtLCAiVmlkZW9DYXB0dXJlIik7Cg",
					"AQAAAAAAAAABAAAAqxgAAAAAAADZGAAAAAAAAAAAAAAAAPC/"
				],
				[
					25,
					1,
					"paste",
					null,
					"AQAAAFAWAAAAAAAAfhYAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAUBYAAAAAAABQFgAAAAAAAAAAAAAAAPC/"
				],
				[
					32,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"BAAAANgYAAAAAAAA2RgAAAAAAAAAAAAA2RgAAAAAAADdGAAAAAAAAAAAAADZGAAAAAAAANkYAAAAAAAABAAAACAgICDZGAAAAAAAANsYAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA2BgAAAAAAADYGAAAAAAAAAAAAAAAAPC/"
				],
				[
					33,
					1,
					"paste",
					null,
					"AQAAANsYAAAAAAAA8hgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA2xgAAAAAAADbGAAAAAAAAAAAAAAAAPC/"
				],
				[
					34,
					1,
					"insert_snippet",
					{
						"contents": "($0)"
					},
					"AQAAAPIYAAAAAAAA9BgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA8hgAAAAAAADyGAAAAAAAAAAAAAAAAPC/"
				],
				[
					35,
					1,
					"insert",
					{
						"characters": "ctx,m"
					},
					"BQAAAPMYAAAAAAAA9BgAAAAAAAAAAAAA9BgAAAAAAAD1GAAAAAAAAAAAAAD1GAAAAAAAAPYYAAAAAAAAAAAAAPYYAAAAAAAA9xgAAAAAAAAAAAAA9xgAAAAAAAD4GAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA8xgAAAAAAADzGAAAAAAAAAAAAAAAAPC/"
				],
				[
					37,
					1,
					"insert",
					{
						"characters": ";"
					},
					"AQAAAPkYAAAAAAAA+hgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA+RgAAAAAAAD5GAAAAAAAAAAAAAAAAPC/"
				],
				[
					38,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAAAIGQAAI2luY2x1ZGUgImpzYmluZGluZ3MuaHBwIgojaW5jbHVkZSAianNfbWF0LmhwcCIKI2luY2x1ZGUgImpzX2FsbG9jLmhwcCIKCmV4dGVybiAiQyIgVklTSUJMRSBpbnQganNfdmlkZW9fY2FwdHVyZV9pbml0KEpTQ29udGV4dCosIEpTTW9kdWxlRGVmKik7CgpleHRlcm4gIkMiIHsKSlNWYWx1ZSB2aWRlb19jYXB0dXJlX3Byb3RvID0gSlNfVU5ERUZJTkVELCB2aWRlb19jYXB0dXJlX2NsYXNzID0gSlNfVU5ERUZJTkVEOwpKU0NsYXNzSUQganNfdmlkZW9fY2FwdHVyZV9jbGFzc19pZCA9IDA7Cn0KCnN0YXRpYyBpbmxpbmUgaW50CmlzX251bWVyaWMoY29uc3Qgc3RkOjpzdHJpbmcmIHMpIHsKICByZXR1cm4gc3RkOjphbGxfb2Yocy5iZWdpbigpLCBzLmVuZCgpLCBbXSh1bnNpZ25lZCBjaGFyIGMpIHsgcmV0dXJuIHN0ZDo6aXNkaWdpdChjKTsgfSk7Cn0KCnN0YXRpYyBib29sCmpzX3ZpZGVvX2NhcHR1cmVfb3BlbihKU0NvbnRleHQqIGN0eCwgSlNWaWRlb0NhcHR1cmVEYXRhKiBzLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2KSB7CiAgaW50MzJfdCBjYW1JRCwgYXBpUHJlZmVyZW5jZSA9IGN2OjpDQVBfQU5ZOwogIGN2OjpTdHJpbmcgZmlsZW5hbWU7CgogIGZpbGVuYW1lID0gSlNfVG9DU3RyaW5nKGN0eCwgYXJndlswXSk7CgogIGlmKGFyZ2MgPiAxKQogICAgSlNfVG9JbnQzMihjdHgsICZhcGlQcmVmZXJlbmNlLCBhcmd2WzFdKTsKCiAgaWYoaXNfbnVtZXJpYyhmaWxlbmFtZSkpCiAgICBKU19Ub0ludDMyKGN0eCwgJmNhbUlELCBhcmd2WzBdKTsKCiAgc3RkOjpjZXJyIDw8ICJWaWRlb0NhcHR1cmUub3BlbiBmaWxlbmFtZT0nIiA8PCBmaWxlbmFtZSA8PCAiJywgY2FtSUQ9IiA8PCBjYW1JRCA8PCAiLCBhcGlQcmVmZXJlbmNlPSIgPDwgYXBpUHJlZmVyZW5jZQogICAgICAgICAgICA8PCBzdGQ6OmVuZGw7CgogIGlmKGZpbGVuYW1lLmVtcHR5KCkpCiAgICByZXR1cm4gcy0+b3BlbihjYW1JRCwgYXBpUHJlZmVyZW5jZSk7CgogIHJldHVybiBzLT5vcGVuKGZpbGVuYW1lLCBhcGlQcmVmZXJlbmNlKTsKfQoKc3RhdGljIEpTVmFsdWUKanNfdmlkZW9fY2FwdHVyZV9jdG9yKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgbmV3X3RhcmdldCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCogYXJndikgewogIEpTVmlkZW9DYXB0dXJlRGF0YSogczsKICBKU1ZhbHVlIG9iaiA9IEpTX1VOREVGSU5FRDsKICBKU1ZhbHVlIHByb3RvLCByZXQ7CgogIHMgPSBqc19hbGxvY2F0ZTxKU1ZpZGVvQ2FwdHVyZURhdGE+KGN0eCk7CiAgaWYoIXMpCiAgICByZXR1cm4gSlNfRVhDRVBUSU9OOwoKICBuZXcocykgSlNWaWRlb0NhcHR1cmVEYXRhKCk7CgogIGlmKGFyZ2MgPiAwKSB7CiAgICBpZighanNfdmlkZW9fY2FwdHVyZV9vcGVuKGN0eCwgcywgYXJnYywgYXJndikpCiAgICAgIHJldHVybiBKU19FWENFUFRJT047CiAgfQoKICAvKiB1c2luZyBuZXdfdGFyZ2V0IHRvIGdldCB0aGUgcHJvdG90eXBlIGlzIG5lY2Vzc2FyeSB3aGVuIHRoZQogICAgIGNsYXNzIGlzIGV4dGVuZGVkLiAqLwogIHByb3RvID0gSlNfR2V0UHJvcGVydHlTdHIoY3R4LCBuZXdfdGFyZ2V0LCAicHJvdG90eXBlIik7CiAgaWYoSlNfSXNFeGNlcHRpb24ocHJvdG8pKQogICAgZ290byBmYWlsOwogIG9iaiA9IEpTX05ld09iamVjdFByb3RvQ2xhc3MoY3R4LCBwcm90bywganNfdmlkZW9fY2FwdHVyZV9jbGFzc19pZCk7CiAgSlNfRnJlZVZhbHVlKGN0eCwgcHJvdG8pOwogIGlmKEpTX0lzRXhjZXB0aW9uKG9iaikpCiAgICBnb3RvIGZhaWw7CiAgSlNfU2V0T3BhcXVlKG9iaiwgcyk7CiAgcmV0dXJuIG9iajsKZmFpbDoKICBqc19kZWFsbG9jYXRlKGN0eCwgcyk7CiAgSlNfRnJlZVZhbHVlKGN0eCwgb2JqKTsKICByZXR1cm4gSlNfRVhDRVBUSU9OOwp9CgpWSVNJQkxFIEpTVmlkZW9DYXB0dXJlRGF0YSoKanNfdmlkZW9fY2FwdHVyZV9kYXRhKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdmFsKSB7CiAgcmV0dXJuIHN0YXRpY19jYXN0PEpTVmlkZW9DYXB0dXJlRGF0YSo+KEpTX0dldE9wYXF1ZTIoY3R4LCB2YWwsIGpzX3ZpZGVvX2NhcHR1cmVfY2xhc3NfaWQpKTsKfQoKdm9pZApqc192aWRlb19jYXB0dXJlX2ZpbmFsaXplcihKU1J1bnRpbWUqIHJ0LCBKU1ZhbHVlIHZhbCkgewogIEpTVmlkZW9DYXB0dXJlRGF0YSogcyA9IHN0YXRpY19jYXN0PEpTVmlkZW9DYXB0dXJlRGF0YSo+KEpTX0dldE9wYXF1ZSh2YWwsIGpzX3ZpZGVvX2NhcHR1cmVfY2xhc3NfaWQpKTsKICAvKiBOb3RlOiAncycgY2FuIGJlIE5VTEwgaW4gY2FzZSBKU19TZXRPcGFxdWUoKSB3YXMgbm90IGNhbGxlZCAqLwoKICBzLT5+SlNWaWRlb0NhcHR1cmVEYXRhKCk7CiAganNfZGVhbGxvY2F0ZShydCwgcyk7CgogIEpTX0ZyZWVWYWx1ZVJUKHJ0LCB2YWwpOwp9CgpzdGF0aWMgSlNWYWx1ZQpqc192aWRlb19jYXB0dXJlX21ldGhvZChKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHZpZGVvX2NhcHR1cmUsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QqIGFyZ3YsIGludCBtYWdpYykgewogIEpTVmlkZW9DYXB0dXJlRGF0YSogcyA9IHN0YXRpY19jYXN0PEpTVmlkZW9DYXB0dXJlRGF0YSo+KEpTX0dldE9wYXF1ZTIoY3R4LCB2aWRlb19jYXB0dXJlLCBqc192aWRlb19jYXB0dXJlX2NsYXNzX2lkKSk7CiAgSlNWYWx1ZSByZXQgPSBKU19VTkRFRklORUQ7CiAgaW50MzJfdCBwcm9wSUQ7CiAgZG91YmxlIHZhbHVlID0gMDsKCiAgaWYobWFnaWMgPT0gMCkgewogICAgaWYoIUpTX1RvSW50MzIoY3R4LCAmcHJvcElELCBhcmd2WzBdKSkgewogICAgICB2YWx1ZSA9IHMtPmdldChwcm9wSUQpOwogICAgICByZXQgPSBKU19OZXdGbG9hdDY0KGN0eCwgdmFsdWUpOwogICAgfSBlbHNlIHsKICAgICAgcmV0ID0gSlNfRVhDRVBUSU9OOwogICAgfQogIH0gZWxzZSBpZihtYWdpYyA9PSAxKSB7CiAgICBpZighSlNfVG9JbnQzMihjdHgsICZwcm9wSUQsIGFyZ3ZbMF0pKSB7CiAgICAgIEpTX1RvRmxvYXQ2NChjdHgsICZ2YWx1ZSwgYXJndlsxXSk7CgogICAgICBzLT5zZXQocHJvcElELCB2YWx1ZSk7CiAgICB9IGVsc2UKICAgICAgcmV0ID0gSlNfRVhDRVBUSU9OOwogIH0gZWxzZSBpZihtYWdpYyA9PSAyKSB7CiAgICBzdGQ6OnN0cmluZyBiYWNrZW5kOwogICAgdHJ5IHsKICAgICAgYmFja2VuZCA9IHMtPmdldEJhY2tlbmROYW1lKCk7CiAgICB9IGNhdGNoKGNvbnN0IGN2OjpFeGNlcHRpb24mIGUpIHsgYmFja2VuZCA9IGUubXNnOyB9CiAgICByZXQgPSBKU19OZXdTdHJpbmcoY3R4LCBiYWNrZW5kLmNfc3RyKCkpOwogIH0gZWxzZSBpZihtYWdpYyA9PSAzKSB7CiAgICByZXQgPSBKU19OZXdCb29sKGN0eCwgcy0+Z3JhYigpKTsKICB9IGVsc2UgaWYobWFnaWMgPT0gNCkgewogICAgcmV0ID0gSlNfTmV3Qm9vbChjdHgsIHMtPmlzT3BlbmVkKCkpOwogIH0gZWxzZSBpZihtYWdpYyA9PSA1KSB7CiAgICByZXQgPSBKU19OZXdCb29sKGN0eCwganNfdmlkZW9fY2FwdHVyZV9vcGVuKGN0eCwgcywgYXJnYywgYXJndikpOwogIH0KCiAgZWxzZSBpZihtYWdpYyA9PSA2IHx8IG1hZ2ljID09IDcpIHsKICAgIEpTTWF0RGF0YSogbSA9IGpzX21hdF9kYXRhKGN0eCwgYXJndlswXSk7CgogICAgaWYobSA9PSBudWxscHRyKQogICAgICByZXR1cm4gSlNfRVhDRVBUSU9OOwoKICAgIHJldCA9IEpTX05ld0Jvb2woY3R4LCBtYWdpYyA9PSA2ID8gcy0+cmVhZCgqbSkgOiBzLT5yZXRyaWV2ZSgqbSkpOwogIH0KCiAgcmV0dXJuIHJldDsKfQoKVklTSUJMRSBKU1ZhbHVlCmpzX3ZpZGVvX2NhcHR1cmVfd3JhcChKU0NvbnRleHQqIGN0eCwgY3Y6OlZpZGVvQ2FwdHVyZSogY2FwKSB7CiAgSlNWYWx1ZSByZXQ7CgogIHJldCA9IEpTX05ld09iamVjdFByb3RvQ2xhc3MoY3R4LCB2aWRlb19jYXB0dXJlX3Byb3RvLCBqc192aWRlb19jYXB0dXJlX2NsYXNzX2lkKTsKCiAgLy8gY2FwLT5hZGRyZWYoKTsKCiAgSlNfU2V0T3BhcXVlKHJldCwgY2FwKTsKCiAgcmV0dXJuIHJldDsKfQoKSlNDbGFzc0RlZiBqc192aWRlb19jYXB0dXJlX2NsYXNzID0gewogICAgLmNsYXNzX25hbWUgPSAiVmlkZW9DYXB0dXJlIiwKICAgIC5maW5hbGl6ZXIgPSBqc192aWRlb19jYXB0dXJlX2ZpbmFsaXplciwKfTsKCmNvbnN0IEpTQ0Z1bmN0aW9uTGlzdEVudHJ5IGpzX3ZpZGVvX2NhcHR1cmVfcHJvdG9fZnVuY3NbXSA9IHsKICAgIEpTX0NGVU5DX01BR0lDX0RFRigiZ2V0IiwgMSwganNfdmlkZW9fY2FwdHVyZV9tZXRob2QsIDApLAogICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJzZXQiLCAyLCBqc192aWRlb19jYXB0dXJlX21ldGhvZCwgMSksCiAgICBKU19DRlVOQ19NQUdJQ19ERUYoImdldEJhY2tlbmROYW1lIiwgMCwganNfdmlkZW9fY2FwdHVyZV9tZXRob2QsIDIpLAogICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJncmFiIiwgMCwganNfdmlkZW9fY2FwdHVyZV9tZXRob2QsIDMpLAogICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJpc09wZW5lZCIsIDAsIGpzX3ZpZGVvX2NhcHR1cmVfbWV0aG9kLCA0KSwKICAgIEpTX0NGVU5DX01BR0lDX0RFRigib3BlbiIsIDEsIGpzX3ZpZGVvX2NhcHR1cmVfbWV0aG9kLCA1KSwKICAgIEpTX0NGVU5DX01BR0lDX0RFRigicmVhZCIsIDEsIGpzX3ZpZGVvX2NhcHR1cmVfbWV0aG9kLCA2KSwKICAgIEpTX0NGVU5DX01BR0lDX0RFRigicmV0cmlldmUiLCAxLCBqc192aWRlb19jYXB0dXJlX21ldGhvZCwgNyksCgogICAgSlNfUFJPUF9TVFJJTkdfREVGKCJbU3ltYm9sLnRvU3RyaW5nVGFnXSIsICJWaWRlb0NhcHR1cmUiLCBKU19QUk9QX0NPTkZJR1VSQUJMRSksCgp9OwoKaW50CmpzX3ZpZGVvX2NhcHR1cmVfaW5pdChKU0NvbnRleHQqIGN0eCwgSlNNb2R1bGVEZWYqIG0pIHsKCiAgaWYoanNfdmlkZW9fY2FwdHVyZV9jbGFzc19pZCA9PSAwKSB7CiAgICAvKiBjcmVhdGUgdGhlIFZpZGVvQ2FwdHVyZSBjbGFzcyAqLwogICAgSlNfTmV3Q2xhc3NJRCgmanNfdmlkZW9fY2FwdHVyZV9jbGFzc19pZCk7CiAgICBKU19OZXdDbGFzcyhKU19HZXRSdW50aW1lKGN0eCksIGpzX3ZpZGVvX2NhcHR1cmVfY2xhc3NfaWQsICZqc192aWRlb19jYXB0dXJlX2NsYXNzKTsKCiAgICB2aWRlb19jYXB0dXJlX3Byb3RvID0gSlNfTmV3T2JqZWN0KGN0eCk7CiAgICBKU19TZXRQcm9wZXJ0eUZ1bmN0aW9uTGlzdChjdHgsIHZpZGVvX2NhcHR1cmVfcHJvdG8sIGpzX3ZpZGVvX2NhcHR1cmVfcHJvdG9fZnVuY3MsIGNvdW50b2YoanNfdmlkZW9fY2FwdHVyZV9wcm90b19mdW5jcykpOwogICAgSlNfU2V0Q2xhc3NQcm90byhjdHgsIGpzX3ZpZGVvX2NhcHR1cmVfY2xhc3NfaWQsIHZpZGVvX2NhcHR1cmVfcHJvdG8pOwoKICAgIHZpZGVvX2NhcHR1cmVfY2xhc3MgPSBKU19OZXdDRnVuY3Rpb24yKGN0eCwganNfdmlkZW9fY2FwdHVyZV9jdG9yLCAiVmlkZW9DYXB0dXJlIiwgMiwgSlNfQ0ZVTkNfY29uc3RydWN0b3IsIDApOwogICAgLyogc2V0IHByb3RvLmNvbnN0cnVjdG9yIGFuZCBjdG9yLnByb3RvdHlwZSAqLwogICAgSlNfU2V0Q29uc3RydWN0b3IoY3R4LCB2aWRlb19jYXB0dXJlX2NsYXNzLCB2aWRlb19jYXB0dXJlX3Byb3RvKTsKICB9CgogIGlmKG0pCiAgICBKU19TZXRNb2R1bGVFeHBvcnQoY3R4LCBtLCAiVmlkZW9DYXB0dXJlIiwgdmlkZW9fY2FwdHVyZV9jbGFzcyk7CgogIHJldHVybiAwOwp9CgpleHRlcm4gIkMiIFZJU0lCTEUgdm9pZCBqc192aWRlb19jYXB0dXJlX2V4cG9ydChKU0NvbnRleHQqIGN0eCwgSlNNb2R1bGVEZWYqIG0pIHsKICBKU19BZGRNb2R1bGVFeHBvcnQoY3R4LCBtLCAiVmlkZW9DYXB0dXJlIik7Cn0KCnZvaWQKanNfdmlkZW9fY2FwdHVyZV9jb25zdHJ1Y3RvcihKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZSBwYXJlbnQsIGNvbnN0IGNoYXIqIG5hbWUpIHsKICBpZihKU19Jc1VuZGVmaW5lZCh2aWRlb19jYXB0dXJlX2NsYXNzKSkKICAgIGpzX3ZpZGVvX2NhcHR1cmVfaW5pdChjdHgsIDApOwoKICBKU19TZXRQcm9wZXJ0eVN0cihjdHgsIHBhcmVudCwgbmFtZSA/IG5hbWUgOiAiVmlkZW9DYXB0dXJlIiwgdmlkZW9fY2FwdHVyZV9jbGFzcyk7Cn0KCiNpZmRlZiBKU19WSURFT19DQVBUVVJFX01PRFVMRQojZGVmaW5lIEpTX0lOSVRfTU9EVUxFIC8qVklTSUJMRSovIGpzX2luaXRfbW9kdWxlCiNlbHNlCiNkZWZpbmUgSlNfSU5JVF9NT0RVTEUgLypWSVNJQkxFKi8ganNfaW5pdF9tb2R1bGVfdmlkZW9fY2FwdHVyZQojZW5kaWYKCmV4dGVybiAiQyIgSlNNb2R1bGVEZWYqCkpTX0lOSVRfTU9EVUxFKEpTQ29udGV4dCogY3R4LCBjb25zdCBjaGFyKiBtb2R1bGVfbmFtZSkgewogIEpTTW9kdWxlRGVmKiBtOwogIG0gPSBKU19OZXdDTW9kdWxlKGN0eCwgbW9kdWxlX25hbWUsICZqc192aWRlb19jYXB0dXJlX2luaXQpOwogIGlmKCFtKQogICAgcmV0dXJuIE5VTEw7CiAganNfdmlkZW9fY2FwdHVyZV9leHBvcnQoY3R4LG0pOwogIHJldHVybiBtOwp9AAAAAAAAAAAJGQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA+hgAAAAAAAD6GAAAAAAAAAAAAAAAAPC/"
				],
				[
					41,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAAAJGQAAI2luY2x1ZGUgImpzYmluZGluZ3MuaHBwIgojaW5jbHVkZSAianNfbWF0LmhwcCIKI2luY2x1ZGUgImpzX2FsbG9jLmhwcCIKCmV4dGVybiAiQyIgVklTSUJMRSBpbnQganNfdmlkZW9fY2FwdHVyZV9pbml0KEpTQ29udGV4dCosIEpTTW9kdWxlRGVmKik7CgpleHRlcm4gIkMiIHsKSlNWYWx1ZSB2aWRlb19jYXB0dXJlX3Byb3RvID0gSlNfVU5ERUZJTkVELCB2aWRlb19jYXB0dXJlX2NsYXNzID0gSlNfVU5ERUZJTkVEOwpKU0NsYXNzSUQganNfdmlkZW9fY2FwdHVyZV9jbGFzc19pZCA9IDA7Cn0KCnN0YXRpYyBpbmxpbmUgaW50CmlzX251bWVyaWMoY29uc3Qgc3RkOjpzdHJpbmcmIHMpIHsKICByZXR1cm4gc3RkOjphbGxfb2Yocy5iZWdpbigpLCBzLmVuZCgpLCBbXSh1bnNpZ25lZCBjaGFyIGMpIHsgcmV0dXJuIHN0ZDo6aXNkaWdpdChjKTsgfSk7Cn0KCnN0YXRpYyBib29sCmpzX3ZpZGVvX2NhcHR1cmVfb3BlbihKU0NvbnRleHQqIGN0eCwgSlNWaWRlb0NhcHR1cmVEYXRhKiBzLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2KSB7CiAgaW50MzJfdCBjYW1JRCwgYXBpUHJlZmVyZW5jZSA9IGN2OjpDQVBfQU5ZOwogIGN2OjpTdHJpbmcgZmlsZW5hbWU7CgogIGZpbGVuYW1lID0gSlNfVG9DU3RyaW5nKGN0eCwgYXJndlswXSk7CgogIGlmKGFyZ2MgPiAxKQogICAgSlNfVG9JbnQzMihjdHgsICZhcGlQcmVmZXJlbmNlLCBhcmd2WzFdKTsKCiAgaWYoaXNfbnVtZXJpYyhmaWxlbmFtZSkpCiAgICBKU19Ub0ludDMyKGN0eCwgJmNhbUlELCBhcmd2WzBdKTsKCiAgc3RkOjpjZXJyIDw8ICJWaWRlb0NhcHR1cmUub3BlbiBmaWxlbmFtZT0nIiA8PCBmaWxlbmFtZSA8PCAiJywgY2FtSUQ9IiA8PCBjYW1JRCA8PCAiLCBhcGlQcmVmZXJlbmNlPSIgPDwgYXBpUHJlZmVyZW5jZQogICAgICAgICAgICA8PCBzdGQ6OmVuZGw7CgogIGlmKGZpbGVuYW1lLmVtcHR5KCkpCiAgICByZXR1cm4gcy0+b3BlbihjYW1JRCwgYXBpUHJlZmVyZW5jZSk7CgogIHJldHVybiBzLT5vcGVuKGZpbGVuYW1lLCBhcGlQcmVmZXJlbmNlKTsKfQoKc3RhdGljIEpTVmFsdWUKanNfdmlkZW9fY2FwdHVyZV9jdG9yKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgbmV3X3RhcmdldCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCogYXJndikgewogIEpTVmlkZW9DYXB0dXJlRGF0YSogczsKICBKU1ZhbHVlIG9iaiA9IEpTX1VOREVGSU5FRDsKICBKU1ZhbHVlIHByb3RvLCByZXQ7CgogIHMgPSBqc19hbGxvY2F0ZTxKU1ZpZGVvQ2FwdHVyZURhdGE+KGN0eCk7CiAgaWYoIXMpCiAgICByZXR1cm4gSlNfRVhDRVBUSU9OOwoKICBuZXcocykgSlNWaWRlb0NhcHR1cmVEYXRhKCk7CgogIGlmKGFyZ2MgPiAwKSB7CiAgICBpZighanNfdmlkZW9fY2FwdHVyZV9vcGVuKGN0eCwgcywgYXJnYywgYXJndikpCiAgICAgIHJldHVybiBKU19FWENFUFRJT047CiAgfQoKICAvKiB1c2luZyBuZXdfdGFyZ2V0IHRvIGdldCB0aGUgcHJvdG90eXBlIGlzIG5lY2Vzc2FyeSB3aGVuIHRoZQogICAgIGNsYXNzIGlzIGV4dGVuZGVkLiAqLwogIHByb3RvID0gSlNfR2V0UHJvcGVydHlTdHIoY3R4LCBuZXdfdGFyZ2V0LCAicHJvdG90eXBlIik7CiAgaWYoSlNfSXNFeGNlcHRpb24ocHJvdG8pKQogICAgZ290byBmYWlsOwogIG9iaiA9IEpTX05ld09iamVjdFByb3RvQ2xhc3MoY3R4LCBwcm90bywganNfdmlkZW9fY2FwdHVyZV9jbGFzc19pZCk7CiAgSlNfRnJlZVZhbHVlKGN0eCwgcHJvdG8pOwogIGlmKEpTX0lzRXhjZXB0aW9uKG9iaikpCiAgICBnb3RvIGZhaWw7CiAgSlNfU2V0T3BhcXVlKG9iaiwgcyk7CiAgcmV0dXJuIG9iajsKZmFpbDoKICBqc19kZWFsbG9jYXRlKGN0eCwgcyk7CiAgSlNfRnJlZVZhbHVlKGN0eCwgb2JqKTsKICByZXR1cm4gSlNfRVhDRVBUSU9OOwp9CgpWSVNJQkxFIEpTVmlkZW9DYXB0dXJlRGF0YSoKanNfdmlkZW9fY2FwdHVyZV9kYXRhKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdmFsKSB7CiAgcmV0dXJuIHN0YXRpY19jYXN0PEpTVmlkZW9DYXB0dXJlRGF0YSo+KEpTX0dldE9wYXF1ZTIoY3R4LCB2YWwsIGpzX3ZpZGVvX2NhcHR1cmVfY2xhc3NfaWQpKTsKfQoKdm9pZApqc192aWRlb19jYXB0dXJlX2ZpbmFsaXplcihKU1J1bnRpbWUqIHJ0LCBKU1ZhbHVlIHZhbCkgewogIEpTVmlkZW9DYXB0dXJlRGF0YSogcyA9IHN0YXRpY19jYXN0PEpTVmlkZW9DYXB0dXJlRGF0YSo+KEpTX0dldE9wYXF1ZSh2YWwsIGpzX3ZpZGVvX2NhcHR1cmVfY2xhc3NfaWQpKTsKICAvKiBOb3RlOiAncycgY2FuIGJlIE5VTEwgaW4gY2FzZSBKU19TZXRPcGFxdWUoKSB3YXMgbm90IGNhbGxlZCAqLwoKICBzLT5+SlNWaWRlb0NhcHR1cmVEYXRhKCk7CiAganNfZGVhbGxvY2F0ZShydCwgcyk7CgogIEpTX0ZyZWVWYWx1ZVJUKHJ0LCB2YWwpOwp9CgpzdGF0aWMgSlNWYWx1ZQpqc192aWRlb19jYXB0dXJlX21ldGhvZChKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHZpZGVvX2NhcHR1cmUsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QqIGFyZ3YsIGludCBtYWdpYykgewogIEpTVmlkZW9DYXB0dXJlRGF0YSogcyA9IHN0YXRpY19jYXN0PEpTVmlkZW9DYXB0dXJlRGF0YSo+KEpTX0dldE9wYXF1ZTIoY3R4LCB2aWRlb19jYXB0dXJlLCBqc192aWRlb19jYXB0dXJlX2NsYXNzX2lkKSk7CiAgSlNWYWx1ZSByZXQgPSBKU19VTkRFRklORUQ7CiAgaW50MzJfdCBwcm9wSUQ7CiAgZG91YmxlIHZhbHVlID0gMDsKCiAgaWYobWFnaWMgPT0gMCkgewogICAgaWYoIUpTX1RvSW50MzIoY3R4LCAmcHJvcElELCBhcmd2WzBdKSkgewogICAgICB2YWx1ZSA9IHMtPmdldChwcm9wSUQpOwogICAgICByZXQgPSBKU19OZXdGbG9hdDY0KGN0eCwgdmFsdWUpOwogICAgfSBlbHNlIHsKICAgICAgcmV0ID0gSlNfRVhDRVBUSU9OOwogICAgfQogIH0gZWxzZSBpZihtYWdpYyA9PSAxKSB7CiAgICBpZighSlNfVG9JbnQzMihjdHgsICZwcm9wSUQsIGFyZ3ZbMF0pKSB7CiAgICAgIEpTX1RvRmxvYXQ2NChjdHgsICZ2YWx1ZSwgYXJndlsxXSk7CgogICAgICBzLT5zZXQocHJvcElELCB2YWx1ZSk7CiAgICB9IGVsc2UKICAgICAgcmV0ID0gSlNfRVhDRVBUSU9OOwogIH0gZWxzZSBpZihtYWdpYyA9PSAyKSB7CiAgICBzdGQ6OnN0cmluZyBiYWNrZW5kOwogICAgdHJ5IHsKICAgICAgYmFja2VuZCA9IHMtPmdldEJhY2tlbmROYW1lKCk7CiAgICB9IGNhdGNoKGNvbnN0IGN2OjpFeGNlcHRpb24mIGUpIHsgYmFja2VuZCA9IGUubXNnOyB9CiAgICByZXQgPSBKU19OZXdTdHJpbmcoY3R4LCBiYWNrZW5kLmNfc3RyKCkpOwogIH0gZWxzZSBpZihtYWdpYyA9PSAzKSB7CiAgICByZXQgPSBKU19OZXdCb29sKGN0eCwgcy0+Z3JhYigpKTsKICB9IGVsc2UgaWYobWFnaWMgPT0gNCkgewogICAgcmV0ID0gSlNfTmV3Qm9vbChjdHgsIHMtPmlzT3BlbmVkKCkpOwogIH0gZWxzZSBpZihtYWdpYyA9PSA1KSB7CiAgICByZXQgPSBKU19OZXdCb29sKGN0eCwganNfdmlkZW9fY2FwdHVyZV9vcGVuKGN0eCwgcywgYXJnYywgYXJndikpOwogIH0KCiAgZWxzZSBpZihtYWdpYyA9PSA2IHx8IG1hZ2ljID09IDcpIHsKICAgIEpTTWF0RGF0YSogbSA9IGpzX21hdF9kYXRhKGN0eCwgYXJndlswXSk7CgogICAgaWYobSA9PSBudWxscHRyKQogICAgICByZXR1cm4gSlNfRVhDRVBUSU9OOwoKICAgIHJldCA9IEpTX05ld0Jvb2woY3R4LCBtYWdpYyA9PSA2ID8gcy0+cmVhZCgqbSkgOiBzLT5yZXRyaWV2ZSgqbSkpOwogIH0KCiAgcmV0dXJuIHJldDsKfQoKVklTSUJMRSBKU1ZhbHVlCmpzX3ZpZGVvX2NhcHR1cmVfd3JhcChKU0NvbnRleHQqIGN0eCwgY3Y6OlZpZGVvQ2FwdHVyZSogY2FwKSB7CiAgSlNWYWx1ZSByZXQ7CgogIHJldCA9IEpTX05ld09iamVjdFByb3RvQ2xhc3MoY3R4LCB2aWRlb19jYXB0dXJlX3Byb3RvLCBqc192aWRlb19jYXB0dXJlX2NsYXNzX2lkKTsKCiAgLy8gY2FwLT5hZGRyZWYoKTsKCiAgSlNfU2V0T3BhcXVlKHJldCwgY2FwKTsKCiAgcmV0dXJuIHJldDsKfQoKSlNDbGFzc0RlZiBqc192aWRlb19jYXB0dXJlX2NsYXNzID0gewogICAgLmNsYXNzX25hbWUgPSAiVmlkZW9DYXB0dXJlIiwKICAgIC5maW5hbGl6ZXIgPSBqc192aWRlb19jYXB0dXJlX2ZpbmFsaXplciwKfTsKCmNvbnN0IEpTQ0Z1bmN0aW9uTGlzdEVudHJ5IGpzX3ZpZGVvX2NhcHR1cmVfcHJvdG9fZnVuY3NbXSA9IHsKICAgIEpTX0NGVU5DX01BR0lDX0RFRigiZ2V0IiwgMSwganNfdmlkZW9fY2FwdHVyZV9tZXRob2QsIDApLAogICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJzZXQiLCAyLCBqc192aWRlb19jYXB0dXJlX21ldGhvZCwgMSksCiAgICBKU19DRlVOQ19NQUdJQ19ERUYoImdldEJhY2tlbmROYW1lIiwgMCwganNfdmlkZW9fY2FwdHVyZV9tZXRob2QsIDIpLAogICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJncmFiIiwgMCwganNfdmlkZW9fY2FwdHVyZV9tZXRob2QsIDMpLAogICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJpc09wZW5lZCIsIDAsIGpzX3ZpZGVvX2NhcHR1cmVfbWV0aG9kLCA0KSwKICAgIEpTX0NGVU5DX01BR0lDX0RFRigib3BlbiIsIDEsIGpzX3ZpZGVvX2NhcHR1cmVfbWV0aG9kLCA1KSwKICAgIEpTX0NGVU5DX01BR0lDX0RFRigicmVhZCIsIDEsIGpzX3ZpZGVvX2NhcHR1cmVfbWV0aG9kLCA2KSwKICAgIEpTX0NGVU5DX01BR0lDX0RFRigicmV0cmlldmUiLCAxLCBqc192aWRlb19jYXB0dXJlX21ldGhvZCwgNyksCgogICAgSlNfUFJPUF9TVFJJTkdfREVGKCJbU3ltYm9sLnRvU3RyaW5nVGFnXSIsICJWaWRlb0NhcHR1cmUiLCBKU19QUk9QX0NPTkZJR1VSQUJMRSksCgp9OwoKaW50CmpzX3ZpZGVvX2NhcHR1cmVfaW5pdChKU0NvbnRleHQqIGN0eCwgSlNNb2R1bGVEZWYqIG0pIHsKCiAgaWYoanNfdmlkZW9fY2FwdHVyZV9jbGFzc19pZCA9PSAwKSB7CiAgICAvKiBjcmVhdGUgdGhlIFZpZGVvQ2FwdHVyZSBjbGFzcyAqLwogICAgSlNfTmV3Q2xhc3NJRCgmanNfdmlkZW9fY2FwdHVyZV9jbGFzc19pZCk7CiAgICBKU19OZXdDbGFzcyhKU19HZXRSdW50aW1lKGN0eCksIGpzX3ZpZGVvX2NhcHR1cmVfY2xhc3NfaWQsICZqc192aWRlb19jYXB0dXJlX2NsYXNzKTsKCiAgICB2aWRlb19jYXB0dXJlX3Byb3RvID0gSlNfTmV3T2JqZWN0KGN0eCk7CiAgICBKU19TZXRQcm9wZXJ0eUZ1bmN0aW9uTGlzdChjdHgsIHZpZGVvX2NhcHR1cmVfcHJvdG8sIGpzX3ZpZGVvX2NhcHR1cmVfcHJvdG9fZnVuY3MsIGNvdW50b2YoanNfdmlkZW9fY2FwdHVyZV9wcm90b19mdW5jcykpOwogICAgSlNfU2V0Q2xhc3NQcm90byhjdHgsIGpzX3ZpZGVvX2NhcHR1cmVfY2xhc3NfaWQsIHZpZGVvX2NhcHR1cmVfcHJvdG8pOwoKICAgIHZpZGVvX2NhcHR1cmVfY2xhc3MgPSBKU19OZXdDRnVuY3Rpb24yKGN0eCwganNfdmlkZW9fY2FwdHVyZV9jdG9yLCAiVmlkZW9DYXB0dXJlIiwgMiwgSlNfQ0ZVTkNfY29uc3RydWN0b3IsIDApOwogICAgLyogc2V0IHByb3RvLmNvbnN0cnVjdG9yIGFuZCBjdG9yLnByb3RvdHlwZSAqLwogICAgSlNfU2V0Q29uc3RydWN0b3IoY3R4LCB2aWRlb19jYXB0dXJlX2NsYXNzLCB2aWRlb19jYXB0dXJlX3Byb3RvKTsKICB9CgogIGlmKG0pCiAgICBKU19TZXRNb2R1bGVFeHBvcnQoY3R4LCBtLCAiVmlkZW9DYXB0dXJlIiwgdmlkZW9fY2FwdHVyZV9jbGFzcyk7CgogIHJldHVybiAwOwp9CgpleHRlcm4gIkMiIFZJU0lCTEUgdm9pZApqc192aWRlb19jYXB0dXJlX2V4cG9ydChKU0NvbnRleHQqIGN0eCwgSlNNb2R1bGVEZWYqIG0pIHsKICBKU19BZGRNb2R1bGVFeHBvcnQoY3R4LCBtLCAiVmlkZW9DYXB0dXJlIik7Cn0KCnZvaWQKanNfdmlkZW9fY2FwdHVyZV9jb25zdHJ1Y3RvcihKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZSBwYXJlbnQsIGNvbnN0IGNoYXIqIG5hbWUpIHsKICBpZihKU19Jc1VuZGVmaW5lZCh2aWRlb19jYXB0dXJlX2NsYXNzKSkKICAgIGpzX3ZpZGVvX2NhcHR1cmVfaW5pdChjdHgsIDApOwoKICBKU19TZXRQcm9wZXJ0eVN0cihjdHgsIHBhcmVudCwgbmFtZSA/IG5hbWUgOiAiVmlkZW9DYXB0dXJlIiwgdmlkZW9fY2FwdHVyZV9jbGFzcyk7Cn0KCiNpZmRlZiBKU19WSURFT19DQVBUVVJFX01PRFVMRQojZGVmaW5lIEpTX0lOSVRfTU9EVUxFIC8qVklTSUJMRSovIGpzX2luaXRfbW9kdWxlCiNlbHNlCiNkZWZpbmUgSlNfSU5JVF9NT0RVTEUgLypWSVNJQkxFKi8ganNfaW5pdF9tb2R1bGVfdmlkZW9fY2FwdHVyZQojZW5kaWYKCmV4dGVybiAiQyIgSlNNb2R1bGVEZWYqCkpTX0lOSVRfTU9EVUxFKEpTQ29udGV4dCogY3R4LCBjb25zdCBjaGFyKiBtb2R1bGVfbmFtZSkgewogIEpTTW9kdWxlRGVmKiBtOwogIG0gPSBKU19OZXdDTW9kdWxlKGN0eCwgbW9kdWxlX25hbWUsICZqc192aWRlb19jYXB0dXJlX2luaXQpOwogIGlmKCFtKQogICAgcmV0dXJuIE5VTEw7CiAganNfdmlkZW9fY2FwdHVyZV9leHBvcnQoY3R4LCBtKTsKICByZXR1cm4gbTsKfQAAAAAAAAAACRkAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAuhYAAAAAAAC6FgAAAAAAAAAAAAAAAPC/"
				],
				[
					42,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAAAJGQAAI2luY2x1ZGUgImpzYmluZGluZ3MuaHBwIgojaW5jbHVkZSAianNfbWF0LmhwcCIKI2luY2x1ZGUgImpzX2FsbG9jLmhwcCIKCmV4dGVybiAiQyIgVklTSUJMRSBpbnQganNfdmlkZW9fY2FwdHVyZV9pbml0KEpTQ29udGV4dCosIEpTTW9kdWxlRGVmKik7CgpleHRlcm4gIkMiIHsKSlNWYWx1ZSB2aWRlb19jYXB0dXJlX3Byb3RvID0gSlNfVU5ERUZJTkVELCB2aWRlb19jYXB0dXJlX2NsYXNzID0gSlNfVU5ERUZJTkVEOwpKU0NsYXNzSUQganNfdmlkZW9fY2FwdHVyZV9jbGFzc19pZCA9IDA7Cn0KCnN0YXRpYyBpbmxpbmUgaW50CmlzX251bWVyaWMoY29uc3Qgc3RkOjpzdHJpbmcmIHMpIHsKICByZXR1cm4gc3RkOjphbGxfb2Yocy5iZWdpbigpLCBzLmVuZCgpLCBbXSh1bnNpZ25lZCBjaGFyIGMpIHsgcmV0dXJuIHN0ZDo6aXNkaWdpdChjKTsgfSk7Cn0KCnN0YXRpYyBib29sCmpzX3ZpZGVvX2NhcHR1cmVfb3BlbihKU0NvbnRleHQqIGN0eCwgSlNWaWRlb0NhcHR1cmVEYXRhKiBzLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2KSB7CiAgaW50MzJfdCBjYW1JRCwgYXBpUHJlZmVyZW5jZSA9IGN2OjpDQVBfQU5ZOwogIGN2OjpTdHJpbmcgZmlsZW5hbWU7CgogIGZpbGVuYW1lID0gSlNfVG9DU3RyaW5nKGN0eCwgYXJndlswXSk7CgogIGlmKGFyZ2MgPiAxKQogICAgSlNfVG9JbnQzMihjdHgsICZhcGlQcmVmZXJlbmNlLCBhcmd2WzFdKTsKCiAgaWYoaXNfbnVtZXJpYyhmaWxlbmFtZSkpCiAgICBKU19Ub0ludDMyKGN0eCwgJmNhbUlELCBhcmd2WzBdKTsKCiAgc3RkOjpjZXJyIDw8ICJWaWRlb0NhcHR1cmUub3BlbiBmaWxlbmFtZT0nIiA8PCBmaWxlbmFtZSA8PCAiJywgY2FtSUQ9IiA8PCBjYW1JRCA8PCAiLCBhcGlQcmVmZXJlbmNlPSIgPDwgYXBpUHJlZmVyZW5jZQogICAgICAgICAgICA8PCBzdGQ6OmVuZGw7CgogIGlmKGZpbGVuYW1lLmVtcHR5KCkpCiAgICByZXR1cm4gcy0+b3BlbihjYW1JRCwgYXBpUHJlZmVyZW5jZSk7CgogIHJldHVybiBzLT5vcGVuKGZpbGVuYW1lLCBhcGlQcmVmZXJlbmNlKTsKfQoKc3RhdGljIEpTVmFsdWUKanNfdmlkZW9fY2FwdHVyZV9jdG9yKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgbmV3X3RhcmdldCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCogYXJndikgewogIEpTVmlkZW9DYXB0dXJlRGF0YSogczsKICBKU1ZhbHVlIG9iaiA9IEpTX1VOREVGSU5FRDsKICBKU1ZhbHVlIHByb3RvLCByZXQ7CgogIHMgPSBqc19hbGxvY2F0ZTxKU1ZpZGVvQ2FwdHVyZURhdGE+KGN0eCk7CiAgaWYoIXMpCiAgICByZXR1cm4gSlNfRVhDRVBUSU9OOwoKICBuZXcocykgSlNWaWRlb0NhcHR1cmVEYXRhKCk7CgogIGlmKGFyZ2MgPiAwKSB7CiAgICBpZighanNfdmlkZW9fY2FwdHVyZV9vcGVuKGN0eCwgcywgYXJnYywgYXJndikpCiAgICAgIHJldHVybiBKU19FWENFUFRJT047CiAgfQoKICAvKiB1c2luZyBuZXdfdGFyZ2V0IHRvIGdldCB0aGUgcHJvdG90eXBlIGlzIG5lY2Vzc2FyeSB3aGVuIHRoZQogICAgIGNsYXNzIGlzIGV4dGVuZGVkLiAqLwogIHByb3RvID0gSlNfR2V0UHJvcGVydHlTdHIoY3R4LCBuZXdfdGFyZ2V0LCAicHJvdG90eXBlIik7CiAgaWYoSlNfSXNFeGNlcHRpb24ocHJvdG8pKQogICAgZ290byBmYWlsOwogIG9iaiA9IEpTX05ld09iamVjdFByb3RvQ2xhc3MoY3R4LCBwcm90bywganNfdmlkZW9fY2FwdHVyZV9jbGFzc19pZCk7CiAgSlNfRnJlZVZhbHVlKGN0eCwgcHJvdG8pOwogIGlmKEpTX0lzRXhjZXB0aW9uKG9iaikpCiAgICBnb3RvIGZhaWw7CiAgSlNfU2V0T3BhcXVlKG9iaiwgcyk7CiAgcmV0dXJuIG9iajsKZmFpbDoKICBqc19kZWFsbG9jYXRlKGN0eCwgcyk7CiAgSlNfRnJlZVZhbHVlKGN0eCwgb2JqKTsKICByZXR1cm4gSlNfRVhDRVBUSU9OOwp9CgpWSVNJQkxFIEpTVmlkZW9DYXB0dXJlRGF0YSoKanNfdmlkZW9fY2FwdHVyZV9kYXRhKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdmFsKSB7CiAgcmV0dXJuIHN0YXRpY19jYXN0PEpTVmlkZW9DYXB0dXJlRGF0YSo+KEpTX0dldE9wYXF1ZTIoY3R4LCB2YWwsIGpzX3ZpZGVvX2NhcHR1cmVfY2xhc3NfaWQpKTsKfQoKdm9pZApqc192aWRlb19jYXB0dXJlX2ZpbmFsaXplcihKU1J1bnRpbWUqIHJ0LCBKU1ZhbHVlIHZhbCkgewogIEpTVmlkZW9DYXB0dXJlRGF0YSogcyA9IHN0YXRpY19jYXN0PEpTVmlkZW9DYXB0dXJlRGF0YSo+KEpTX0dldE9wYXF1ZSh2YWwsIGpzX3ZpZGVvX2NhcHR1cmVfY2xhc3NfaWQpKTsKICAvKiBOb3RlOiAncycgY2FuIGJlIE5VTEwgaW4gY2FzZSBKU19TZXRPcGFxdWUoKSB3YXMgbm90IGNhbGxlZCAqLwoKICBzLT5+SlNWaWRlb0NhcHR1cmVEYXRhKCk7CiAganNfZGVhbGxvY2F0ZShydCwgcyk7CgogIEpTX0ZyZWVWYWx1ZVJUKHJ0LCB2YWwpOwp9CgpzdGF0aWMgSlNWYWx1ZQpqc192aWRlb19jYXB0dXJlX21ldGhvZChKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHZpZGVvX2NhcHR1cmUsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QqIGFyZ3YsIGludCBtYWdpYykgewogIEpTVmlkZW9DYXB0dXJlRGF0YSogcyA9IHN0YXRpY19jYXN0PEpTVmlkZW9DYXB0dXJlRGF0YSo+KEpTX0dldE9wYXF1ZTIoY3R4LCB2aWRlb19jYXB0dXJlLCBqc192aWRlb19jYXB0dXJlX2NsYXNzX2lkKSk7CiAgSlNWYWx1ZSByZXQgPSBKU19VTkRFRklORUQ7CiAgaW50MzJfdCBwcm9wSUQ7CiAgZG91YmxlIHZhbHVlID0gMDsKCiAgaWYobWFnaWMgPT0gMCkgewogICAgaWYoIUpTX1RvSW50MzIoY3R4LCAmcHJvcElELCBhcmd2WzBdKSkgewogICAgICB2YWx1ZSA9IHMtPmdldChwcm9wSUQpOwogICAgICByZXQgPSBKU19OZXdGbG9hdDY0KGN0eCwgdmFsdWUpOwogICAgfSBlbHNlIHsKICAgICAgcmV0ID0gSlNfRVhDRVBUSU9OOwogICAgfQogIH0gZWxzZSBpZihtYWdpYyA9PSAxKSB7CiAgICBpZighSlNfVG9JbnQzMihjdHgsICZwcm9wSUQsIGFyZ3ZbMF0pKSB7CiAgICAgIEpTX1RvRmxvYXQ2NChjdHgsICZ2YWx1ZSwgYXJndlsxXSk7CgogICAgICBzLT5zZXQocHJvcElELCB2YWx1ZSk7CiAgICB9IGVsc2UKICAgICAgcmV0ID0gSlNfRVhDRVBUSU9OOwogIH0gZWxzZSBpZihtYWdpYyA9PSAyKSB7CiAgICBzdGQ6OnN0cmluZyBiYWNrZW5kOwogICAgdHJ5IHsKICAgICAgYmFja2VuZCA9IHMtPmdldEJhY2tlbmROYW1lKCk7CiAgICB9IGNhdGNoKGNvbnN0IGN2OjpFeGNlcHRpb24mIGUpIHsgYmFja2VuZCA9IGUubXNnOyB9CiAgICByZXQgPSBKU19OZXdTdHJpbmcoY3R4LCBiYWNrZW5kLmNfc3RyKCkpOwogIH0gZWxzZSBpZihtYWdpYyA9PSAzKSB7CiAgICByZXQgPSBKU19OZXdCb29sKGN0eCwgcy0+Z3JhYigpKTsKICB9IGVsc2UgaWYobWFnaWMgPT0gNCkgewogICAgcmV0ID0gSlNfTmV3Qm9vbChjdHgsIHMtPmlzT3BlbmVkKCkpOwogIH0gZWxzZSBpZihtYWdpYyA9PSA1KSB7CiAgICByZXQgPSBKU19OZXdCb29sKGN0eCwganNfdmlkZW9fY2FwdHVyZV9vcGVuKGN0eCwgcywgYXJnYywgYXJndikpOwogIH0KCiAgZWxzZSBpZihtYWdpYyA9PSA2IHx8IG1hZ2ljID09IDcpIHsKICAgIEpTTWF0RGF0YSogbSA9IGpzX21hdF9kYXRhKGN0eCwgYXJndlswXSk7CgogICAgaWYobSA9PSBudWxscHRyKQogICAgICByZXR1cm4gSlNfRVhDRVBUSU9OOwoKICAgIHJldCA9IEpTX05ld0Jvb2woY3R4LCBtYWdpYyA9PSA2ID8gcy0+cmVhZCgqbSkgOiBzLT5yZXRyaWV2ZSgqbSkpOwogIH0KCiAgcmV0dXJuIHJldDsKfQoKVklTSUJMRSBKU1ZhbHVlCmpzX3ZpZGVvX2NhcHR1cmVfd3JhcChKU0NvbnRleHQqIGN0eCwgY3Y6OlZpZGVvQ2FwdHVyZSogY2FwKSB7CiAgSlNWYWx1ZSByZXQ7CgogIHJldCA9IEpTX05ld09iamVjdFByb3RvQ2xhc3MoY3R4LCB2aWRlb19jYXB0dXJlX3Byb3RvLCBqc192aWRlb19jYXB0dXJlX2NsYXNzX2lkKTsKCiAgLy8gY2FwLT5hZGRyZWYoKTsKCiAgSlNfU2V0T3BhcXVlKHJldCwgY2FwKTsKCiAgcmV0dXJuIHJldDsKfQoKSlNDbGFzc0RlZiBqc192aWRlb19jYXB0dXJlX2NsYXNzID0gewogICAgLmNsYXNzX25hbWUgPSAiVmlkZW9DYXB0dXJlIiwKICAgIC5maW5hbGl6ZXIgPSBqc192aWRlb19jYXB0dXJlX2ZpbmFsaXplciwKfTsKCmNvbnN0IEpTQ0Z1bmN0aW9uTGlzdEVudHJ5IGpzX3ZpZGVvX2NhcHR1cmVfcHJvdG9fZnVuY3NbXSA9IHsKICAgIEpTX0NGVU5DX01BR0lDX0RFRigiZ2V0IiwgMSwganNfdmlkZW9fY2FwdHVyZV9tZXRob2QsIDApLAogICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJzZXQiLCAyLCBqc192aWRlb19jYXB0dXJlX21ldGhvZCwgMSksCiAgICBKU19DRlVOQ19NQUdJQ19ERUYoImdldEJhY2tlbmROYW1lIiwgMCwganNfdmlkZW9fY2FwdHVyZV9tZXRob2QsIDIpLAogICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJncmFiIiwgMCwganNfdmlkZW9fY2FwdHVyZV9tZXRob2QsIDMpLAogICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJpc09wZW5lZCIsIDAsIGpzX3ZpZGVvX2NhcHR1cmVfbWV0aG9kLCA0KSwKICAgIEpTX0NGVU5DX01BR0lDX0RFRigib3BlbiIsIDEsIGpzX3ZpZGVvX2NhcHR1cmVfbWV0aG9kLCA1KSwKICAgIEpTX0NGVU5DX01BR0lDX0RFRigicmVhZCIsIDEsIGpzX3ZpZGVvX2NhcHR1cmVfbWV0aG9kLCA2KSwKICAgIEpTX0NGVU5DX01BR0lDX0RFRigicmV0cmlldmUiLCAxLCBqc192aWRlb19jYXB0dXJlX21ldGhvZCwgNyksCgogICAgSlNfUFJPUF9TVFJJTkdfREVGKCJbU3ltYm9sLnRvU3RyaW5nVGFnXSIsICJWaWRlb0NhcHR1cmUiLCBKU19QUk9QX0NPTkZJR1VSQUJMRSksCgp9OwoKaW50CmpzX3ZpZGVvX2NhcHR1cmVfaW5pdChKU0NvbnRleHQqIGN0eCwgSlNNb2R1bGVEZWYqIG0pIHsKCiAgaWYoanNfdmlkZW9fY2FwdHVyZV9jbGFzc19pZCA9PSAwKSB7CiAgICAvKiBjcmVhdGUgdGhlIFZpZGVvQ2FwdHVyZSBjbGFzcyAqLwogICAgSlNfTmV3Q2xhc3NJRCgmanNfdmlkZW9fY2FwdHVyZV9jbGFzc19pZCk7CiAgICBKU19OZXdDbGFzcyhKU19HZXRSdW50aW1lKGN0eCksIGpzX3ZpZGVvX2NhcHR1cmVfY2xhc3NfaWQsICZqc192aWRlb19jYXB0dXJlX2NsYXNzKTsKCiAgICB2aWRlb19jYXB0dXJlX3Byb3RvID0gSlNfTmV3T2JqZWN0KGN0eCk7CiAgICBKU19TZXRQcm9wZXJ0eUZ1bmN0aW9uTGlzdChjdHgsIHZpZGVvX2NhcHR1cmVfcHJvdG8sIGpzX3ZpZGVvX2NhcHR1cmVfcHJvdG9fZnVuY3MsIGNvdW50b2YoanNfdmlkZW9fY2FwdHVyZV9wcm90b19mdW5jcykpOwogICAgSlNfU2V0Q2xhc3NQcm90byhjdHgsIGpzX3ZpZGVvX2NhcHR1cmVfY2xhc3NfaWQsIHZpZGVvX2NhcHR1cmVfcHJvdG8pOwoKICAgIHZpZGVvX2NhcHR1cmVfY2xhc3MgPSBKU19OZXdDRnVuY3Rpb24yKGN0eCwganNfdmlkZW9fY2FwdHVyZV9jdG9yLCAiVmlkZW9DYXB0dXJlIiwgMiwgSlNfQ0ZVTkNfY29uc3RydWN0b3IsIDApOwogICAgLyogc2V0IHByb3RvLmNvbnN0cnVjdG9yIGFuZCBjdG9yLnByb3RvdHlwZSAqLwogICAgSlNfU2V0Q29uc3RydWN0b3IoY3R4LCB2aWRlb19jYXB0dXJlX2NsYXNzLCB2aWRlb19jYXB0dXJlX3Byb3RvKTsKICB9CgogIGlmKG0pCiAgICBKU19TZXRNb2R1bGVFeHBvcnQoY3R4LCBtLCAiVmlkZW9DYXB0dXJlIiwgdmlkZW9fY2FwdHVyZV9jbGFzcyk7CgogIHJldHVybiAwOwp9CgpleHRlcm4gIkMiIFZJU0lCTEUgdm9pZApqc192aWRlb19jYXB0dXJlX2V4cG9ydChKU0NvbnRleHQqIGN0eCwgSlNNb2R1bGVEZWYqIG0pIHsKICBKU19BZGRNb2R1bGVFeHBvcnQoY3R4LCBtLCAiVmlkZW9DYXB0dXJlIik7Cn0KCnZvaWQKanNfdmlkZW9fY2FwdHVyZV9jb25zdHJ1Y3RvcihKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZSBwYXJlbnQsIGNvbnN0IGNoYXIqIG5hbWUpIHsKICBpZihKU19Jc1VuZGVmaW5lZCh2aWRlb19jYXB0dXJlX2NsYXNzKSkKICAgIGpzX3ZpZGVvX2NhcHR1cmVfaW5pdChjdHgsIDApOwoKICBKU19TZXRQcm9wZXJ0eVN0cihjdHgsIHBhcmVudCwgbmFtZSA/IG5hbWUgOiAiVmlkZW9DYXB0dXJlIiwgdmlkZW9fY2FwdHVyZV9jbGFzcyk7Cn0KCiNpZmRlZiBKU19WSURFT19DQVBUVVJFX01PRFVMRQojZGVmaW5lIEpTX0lOSVRfTU9EVUxFIC8qVklTSUJMRSovIGpzX2luaXRfbW9kdWxlCiNlbHNlCiNkZWZpbmUgSlNfSU5JVF9NT0RVTEUgLypWSVNJQkxFKi8ganNfaW5pdF9tb2R1bGVfdmlkZW9fY2FwdHVyZQojZW5kaWYKCmV4dGVybiAiQyIgSlNNb2R1bGVEZWYqCkpTX0lOSVRfTU9EVUxFKEpTQ29udGV4dCogY3R4LCBjb25zdCBjaGFyKiBtb2R1bGVfbmFtZSkgewogIEpTTW9kdWxlRGVmKiBtOwogIG0gPSBKU19OZXdDTW9kdWxlKGN0eCwgbW9kdWxlX25hbWUsICZqc192aWRlb19jYXB0dXJlX2luaXQpOwogIGlmKCFtKQogICAgcmV0dXJuIE5VTEw7CiAganNfdmlkZW9fY2FwdHVyZV9leHBvcnQoY3R4LCBtKTsKICByZXR1cm4gbTsKfQAAAAAAAAAA+RgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAuhYAAAAAAAC6FgAAAAAAAAAAAAAAAPC/"
				]
			]
		},
		{
			"file": "jsbindings.cpp",
			"settings":
			{
				"buffer_size": 4698,
				"line_ending": "Unix"
			},
			"undo_stack":
			[
				[
					13,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"AQAAAJkBAAAAAAAAmgEAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAmQEAAAAAAACZAQAAAAAAAAAAAAAAAPC/"
				],
				[
					15,
					1,
					"insert",
					{
						"characters": "/(/"
					},
					"AwAAAIoBAAAAAAAAiwEAAAAAAAAAAAAAiwEAAAAAAACMAQAAAAAAAAAAAACMAQAAAAAAAI0BAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAigEAAAAAAACKAQAAAAAAAAAAAAAAAAAA"
				],
				[
					16,
					2,
					"left_delete",
					null,
					"AgAAAIwBAAAAAAAAjAEAAAAAAAABAAAAL4sBAAAAAAAAiwEAAAAAAAABAAAAKA",
					"AQAAAAAAAAABAAAAjQEAAAAAAACNAQAAAAAAAAAAAAAAAPC/"
				],
				[
					17,
					1,
					"insert",
					{
						"characters": "/"
					},
					"AQAAAIsBAAAAAAAAjAEAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAiwEAAAAAAACLAQAAAAAAAAAAAAAAAPC/"
				],
				[
					23,
					2,
					"left_delete",
					null,
					"AgAAAIoBAAAAAAAAigEAAAAAAAASAAAALy9leHRlcm4ganNydCBqczsKiQEAAAAAAACJAQAAAAAAAAEAAAAK",
					"AQAAAAAAAAABAAAAnAEAAAAAAACKAQAAAAAAAAAAAAAAAPC/"
				],
				[
					24,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAACJEgAALy8jaW5jbHVkZSAicGxvdC1jdi5ocHAiCiNpbmNsdWRlICJnZW9tZXRyeS5ocHAiCiNpbmNsdWRlICJqcy5ocHAiCiNpbmNsdWRlICJqc2JpbmRpbmdzLmhwcCIKI2luY2x1ZGUgImpzX3BvaW50LmhwcCIKI2luY2x1ZGUgImpzX3NpemUuaHBwIgojaW5jbHVkZSAianNfcmVjdC5ocHAiCiNpbmNsdWRlICJqc19jb250b3VyLmhwcCIKI2luY2x1ZGUgImpzX21hdC5ocHAiCiNpbmNsdWRlICJqc19wb2ludF9pdGVyYXRvci5ocHAiCiNpbmNsdWRlICJxdWlja2pzL2N1dGlscy5oIgojaW5jbHVkZSAicXVpY2tqcy9xdWlja2pzLmgiCgojaW5jbHVkZSA8b3BlbmN2Mi9jb3JlL2NvcmUuaHBwPgojaW5jbHVkZSA8b3BlbmN2Mi9pbWdwcm9jL2ltZ3Byb2MuaHBwPgojaW5jbHVkZSA8aW9tYW5pcD4KCnRlbXBsYXRlPGNsYXNzIFQ+IGNsYXNzIGpzYWxsb2NhdG9yIHsKcHVibGljOgogIHR5cGVkZWYgVCB2YWx1ZV90eXBlOwogIHR5cGVkZWYgVCogcG9pbnRlcjsKICB0eXBlZGVmIGNvbnN0IFQqIGNvbnN0X3BvaW50ZXI7CiAgdHlwZWRlZiBUJiByZWZlcmVuY2U7CiAgdHlwZWRlZiBjb25zdCBUJiBjb25zdF9yZWZlcmVuY2U7CiAgdHlwZWRlZiBzdGQ6OnNpemVfdCBzaXplX3R5cGU7CiAgdHlwZWRlZiBzdGQ6OnB0cmRpZmZfdCBkaWZmZXJlbmNlX3R5cGU7CiAgdGVtcGxhdGU8Y2xhc3MgVT4gc3RydWN0IHJlYmluZCB7IHR5cGVkZWYganNhbGxvY2F0b3I8VT4gb3RoZXI7IH07CiAgcG9pbnRlcgogIGFkZHJlc3MocmVmZXJlbmNlIHZhbHVlKSBjb25zdCB7CiAgICByZXR1cm4gJnZhbHVlOwogIH0KICBjb25zdF9wb2ludGVyCiAgYWRkcmVzcyhjb25zdF9yZWZlcmVuY2UgdmFsdWUpIGNvbnN0IHsKICAgIHJldHVybiAmdmFsdWU7CiAgfQogIGpzYWxsb2NhdG9yKCkgdGhyb3coKSB7fQogIGpzYWxsb2NhdG9yKGNvbnN0IGpzYWxsb2NhdG9yJikgdGhyb3coKSB7fQogIHRlbXBsYXRlPGNsYXNzIFU+IGpzYWxsb2NhdG9yKGNvbnN0IGpzYWxsb2NhdG9yPFU+JikgdGhyb3coKSB7fQogIH5qc2FsbG9jYXRvcigpIHRocm93KCkge30KICBzaXplX3R5cGUKICBtYXhfc2l6ZSgpIGNvbnN0IHRocm93KCkgewogICAgcmV0dXJuIHN0ZDo6bnVtZXJpY19saW1pdHM8c3RkOjpzaXplX3Q+OjptYXgoKSAvIHNpemVvZihUKTsKICB9CiAgcG9pbnRlcgogIGFsbG9jYXRlKHNpemVfdHlwZSBudW0sIGNvbnN0IHZvaWQqID0gMCkgewogICAgcG9pbnRlciByZXQ7CiAgICBzdGQ6OmNlcnIgPDwgImFsbG9jYXRlICIgPDwgbnVtIDw8ICIgZWxlbWVudChzKSIKICAgICAgICAgICAgICA8PCAiIG9mIHNpemUgIiA8PCBzaXplb2YoVCkgPDwgc3RkOjplbmRsOwoKICAgIHN0ZDo6Y2VyciA8PCAiIGFsbG9jYXRlZCBhdDogIiA8PCAodm9pZCopcmV0IDw8IHN0ZDo6ZW5kbDsKICAgIHJldHVybiByZXQ7CiAgfQogIHZvaWQKICBjb25zdHJ1Y3QocG9pbnRlciBwLCBjb25zdCBUJiB2YWx1ZSkgewogICAgcC0+VCh2YWx1ZSk7CiAgfQogIHZvaWQKICBkZXN0cm95KHBvaW50ZXIgcCkgewogICAgcC0+flQoKTsKICB9CiAgdm9pZAogIGRlYWxsb2NhdGUocG9pbnRlciBwLCBzaXplX3R5cGUgbnVtKSB7CiAgICBzdGQ6OmNlcnIgPDwgImRlYWxsb2NhdGUgIiA8PCBudW0gPDwgIiBlbGVtZW50KHMpIgogICAgICAgICAgICAgIDw8ICIgb2Ygc2l6ZSAiIDw8IHNpemVvZihUKSA8PCAiIGF0OiAiIDw8ICh2b2lkKilwIDw8IHN0ZDo6ZW5kbDsKICAgIGpzX2ZyZWUocCk7CiAgfQp9OwoKLypleHRlcm4gIkMiIHt9CgpKU1ZhbHVlIGludDMyYXJyYXlfcHJvdG8sIGludDMyYXJyYXlfY3RvcjsKSlNDbGFzc0lEIGludDMyYXJyYXlfY2xhc3NfaWQ7Ki8KCmV4dGVybiAiQysrIiB0ZW1wbGF0ZTxjbGFzcyBUeXBlPiBKU1ZhbHVlIGpzX2NvbnRvdXJfbmV3KEpTQ29udGV4dCogY3R4LCBjb25zdCBzdGQ6OnZlY3RvcjxUeXBlPiYgcG9pbnRzKTsKCi8qSlNWYWx1ZQpqc192ZWN0b3JfdmVjNGlfdG9fYXJyYXkoSlNDb250ZXh0KiBjdHgsIGNvbnN0IHN0ZDo6dmVjdG9yPGN2OjpWZWM0aT4mIHZlYykgewogIEpTVmFsdWUgcmV0ID0gSlNfTmV3QXJyYXkoY3R4KTsKICB1aW50MzJfdCBpLCBqLCBuID0gdmVjLnNpemUoKTsKICBmb3IoaSA9IDA7IGkgPCBuOyBpKyspIHsKICAgIEpTVmFsdWUgaXRlbSA9IEpTX05ld09iamVjdFByb3RvKGN0eCwgaW50MzJhcnJheV9wcm90byk7CiAgICBmb3IoaiA9IDA7IGogPCA0OyBqKyspIHsgSlNfU2V0UHJvcGVydHlVaW50MzIoY3R4LCBpdGVtLCBqLCBKU19OZXdJbnQzMihjdHgsIHZlY1tpXVtqXSkpOyB9CiAgICBKU19TZXRQcm9wZXJ0eVVpbnQzMihjdHgsIHJldCwgaSwgaXRlbSk7CiAgfQogIHJldHVybiByZXQ7Cn0qLwoKaW50CmpzX2NvbG9yX3JlYWQoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCBjb2xvciwgSlNDb2xvckRhdGE8ZG91YmxlPiogb3V0KSB7CiAgaW50IHJldCA9IDE7CiAgc3RkOjphcnJheTxkb3VibGUsIDQ+IGM7CiAgaWYoSlNfSXNPYmplY3QoY29sb3IpKSB7CiAgICBKU1ZhbHVlIHZbNF07CiAgICBpZihqc19pc19hcnJheShjdHgsIGNvbG9yKSkgewogICAgICB2WzBdID0gSlNfR2V0UHJvcGVydHlVaW50MzIoY3R4LCBjb2xvciwgMCk7CiAgICAgIHZbMV0gPSBKU19HZXRQcm9wZXJ0eVVpbnQzMihjdHgsIGNvbG9yLCAxKTsKICAgICAgdlsyXSA9IEpTX0dldFByb3BlcnR5VWludDMyKGN0eCwgY29sb3IsIDIpOwogICAgICB2WzNdID0gSlNfR2V0UHJvcGVydHlVaW50MzIoY3R4LCBjb2xvciwgMyk7CiAgICB9IGVsc2UgewogICAgICB2WzBdID0gSlNfR2V0UHJvcGVydHlTdHIoY3R4LCBjb2xvciwgInIiKTsKICAgICAgdlsxXSA9IEpTX0dldFByb3BlcnR5U3RyKGN0eCwgY29sb3IsICJnIik7CiAgICAgIHZbMl0gPSBKU19HZXRQcm9wZXJ0eVN0cihjdHgsIGNvbG9yLCAiYiIpOwogICAgICB2WzNdID0gSlNfR2V0UHJvcGVydHlTdHIoY3R4LCBjb2xvciwgImEiKTsKICAgIH0KICAgIEpTX1RvRmxvYXQ2NChjdHgsICZjWzBdLCB2WzBdKTsKICAgIEpTX1RvRmxvYXQ2NChjdHgsICZjWzFdLCB2WzFdKTsKICAgIEpTX1RvRmxvYXQ2NChjdHgsICZjWzJdLCB2WzJdKTsKICAgIEpTX1RvRmxvYXQ2NChjdHgsICZjWzNdLCB2WzNdKTsKCiAgICBKU19GcmVlVmFsdWUoY3R4LCB2WzBdKTsKICAgIEpTX0ZyZWVWYWx1ZShjdHgsIHZbMV0pOwogICAgSlNfRnJlZVZhbHVlKGN0eCwgdlsyXSk7CiAgICBKU19GcmVlVmFsdWUoY3R4LCB2WzNdKTsKICB9IGVsc2UgaWYoSlNfSXNOdW1iZXIoY29sb3IpKSB7CiAgICB1aW50MzJfdCB2YWx1ZTsKICAgIEpTX1RvVWludDMyKGN0eCwgJnZhbHVlLCBjb2xvcik7CiAgICBjWzBdID0gdmFsdWUgJiAweGZmOwogICAgY1sxXSA9ICh2YWx1ZSA+PiA4KSAmIDB4ZmY7CiAgICBjWzJdID0gKHZhbHVlID4+IDE2KSAmIDB4ZmY7CiAgICBjWzNdID0gKHZhbHVlID4+IDI0KSAmIDB4ZmY7CiAgfSBlbHNlIHsKICAgIHJldCA9IDA7CiAgfQoKICBzdGQ6OmNvcHkoYy5jYmVnaW4oKSwgYy5jZW5kKCksIG91dC0+YXJyLmJlZ2luKCkpOwoKICByZXR1cm4gcmV0Owp9CgppbnQKanNfY29sb3JfcmVhZChKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHZhbHVlLCBKU0NvbG9yRGF0YTx1aW50OF90Piogb3V0KSB7CiAgSlNDb2xvckRhdGE8ZG91YmxlPiBjb2xvcjsKICBpZihqc19jb2xvcl9yZWFkKGN0eCwgdmFsdWUsICZjb2xvcikpIHsKICAgIG91dC0+YXJyWzBdID0gY29sb3IuYXJyWzBdOwogICAgb3V0LT5hcnJbMV0gPSBjb2xvci5hcnJbMV07CiAgICBvdXQtPmFyclsyXSA9IGNvbG9yLmFyclsyXTsKICAgIG91dC0+YXJyWzNdID0gY29sb3IuYXJyWzNdOwogICAgcmV0dXJuIDE7CiAgfQogIHJldHVybiAwOwp9CgppbnQKanNfcmVmKEpTQ29udGV4dCogY3R4LCBjb25zdCBjaGFyKiBuYW1lLCBKU1ZhbHVlQ29uc3QgYXJnLCBKU1ZhbHVlIHZhbHVlKSB7CiAgaWYoSlNfSXNGdW5jdGlvbihjdHgsIGFyZykpIHsKICAgIEpTVmFsdWVDb25zdCB2ID0gdmFsdWU7CiAgICBKU19DYWxsKGN0eCwgYXJnLCBKU19VTkRFRklORUQsIDEsICZ2KTsKICB9IGVsc2UgaWYoanNfaXNfYXJyYXkoY3R4LCBhcmcpKSB7CiAgICBKU19TZXRQcm9wZXJ0eVVpbnQzMihjdHgsIGFyZywgMCwgdmFsdWUpOwogIH0gZWxzZSBpZihKU19Jc09iamVjdChhcmcpKSB7CiAgICBKU19TZXRQcm9wZXJ0eVN0cihjdHgsIGFyZywgbmFtZSwgdmFsdWUpOwogIH0gZWxzZSB7CiAgICByZXR1cm4gMDsKICB9CiAgcmV0dXJuIDE7Cn0KCiNpZmRlZiBKU19CSU5ESU5HU19JTklUX01PRFVMRQpzdGF0aWMgaW50CmpzX2JpbmRpbmdzX2luaXQoSlNDb250ZXh0KiBjdHgsIEpTTW9kdWxlRGVmKiBtKSB7CiAganNfcG9pbnRfaW5pdChjdHgsIG0pOwogIGpzX3BvaW50X2l0ZXJhdG9yX2luaXQoY3R4LCBtKTsKICBqc19zaXplX2luaXQoY3R4LCBtKTsKICBqc19yZWN0X2luaXQoY3R4LCBtKTsKICBqc19tYXRfaW5pdChjdHgsIG0pOwogIGpzX2NvbnRvdXJfaW5pdChjdHgsIG0pOwogIGpzX2RyYXdfaW5pdChjdHgsIG0pOwogIGpzX3ZpZGVvX2NhcHR1cmVfaW5pdChjdHgsIG0pOwogIHJldHVybiAwOwp9CgpleHRlcm4gIkMiIEpTTW9kdWxlRGVmKgoKanNfaW5pdF9tb2R1bGUoSlNDb250ZXh0KiBjdHgsIGNvbnN0IGNoYXIqIG1vZHVsZV9uYW1lKSB7CiAgSlNNb2R1bGVEZWYqIG07CgogIG0gPSBKU19OZXdDTW9kdWxlKGN0eCwgbW9kdWxlX25hbWUsICZqc19iaW5kaW5nc19pbml0KTsKCiAgcmV0dXJuIG07Cn0KCiNlbmRpZgoAAAAAAAAAAHcSAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAiQEAAAAAAACJAQAAAAAAAAAAAAAAAPC/"
				],
				[
					38,
					1,
					"cut",
					null,
					"AQAAAP4AAAAAAAAA/gAAAAAAAAAdAAAAI2luY2x1ZGUgInF1aWNranMvcXVpY2tqcy5oIgo",
					"AQAAAAAAAAABAAAA/gAAAAAAAAAbAQAAAAAAAAAAAAAAAPC/"
				],
				[
					39,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAABaEgAALy8jaW5jbHVkZSAicGxvdC1jdi5ocHAiCiNpbmNsdWRlICJnZW9tZXRyeS5ocHAiCiNpbmNsdWRlICJqc2JpbmRpbmdzLmhwcCIKI2luY2x1ZGUgImpzX3BvaW50LmhwcCIKI2luY2x1ZGUgImpzX3NpemUuaHBwIgojaW5jbHVkZSAianNfcmVjdC5ocHAiCiNpbmNsdWRlICJqc19jb250b3VyLmhwcCIKI2luY2x1ZGUgImpzX21hdC5ocHAiCiNpbmNsdWRlICJqc19wb2ludF9pdGVyYXRvci5ocHAiCiNpbmNsdWRlICJxdWlja2pzL2N1dGlscy5oIgoKI2luY2x1ZGUgPG9wZW5jdjIvY29yZS9jb3JlLmhwcD4KI2luY2x1ZGUgPG9wZW5jdjIvaW1ncHJvYy9pbWdwcm9jLmhwcD4KI2luY2x1ZGUgPGlvbWFuaXA+Cgp0ZW1wbGF0ZTxjbGFzcyBUPiBjbGFzcyBqc2FsbG9jYXRvciB7CnB1YmxpYzoKICB0eXBlZGVmIFQgdmFsdWVfdHlwZTsKICB0eXBlZGVmIFQqIHBvaW50ZXI7CiAgdHlwZWRlZiBjb25zdCBUKiBjb25zdF9wb2ludGVyOwogIHR5cGVkZWYgVCYgcmVmZXJlbmNlOwogIHR5cGVkZWYgY29uc3QgVCYgY29uc3RfcmVmZXJlbmNlOwogIHR5cGVkZWYgc3RkOjpzaXplX3Qgc2l6ZV90eXBlOwogIHR5cGVkZWYgc3RkOjpwdHJkaWZmX3QgZGlmZmVyZW5jZV90eXBlOwogIHRlbXBsYXRlPGNsYXNzIFU+IHN0cnVjdCByZWJpbmQgeyB0eXBlZGVmIGpzYWxsb2NhdG9yPFU+IG90aGVyOyB9OwogIHBvaW50ZXIKICBhZGRyZXNzKHJlZmVyZW5jZSB2YWx1ZSkgY29uc3QgewogICAgcmV0dXJuICZ2YWx1ZTsKICB9CiAgY29uc3RfcG9pbnRlcgogIGFkZHJlc3MoY29uc3RfcmVmZXJlbmNlIHZhbHVlKSBjb25zdCB7CiAgICByZXR1cm4gJnZhbHVlOwogIH0KICBqc2FsbG9jYXRvcigpIHRocm93KCkge30KICBqc2FsbG9jYXRvcihjb25zdCBqc2FsbG9jYXRvciYpIHRocm93KCkge30KICB0ZW1wbGF0ZTxjbGFzcyBVPiBqc2FsbG9jYXRvcihjb25zdCBqc2FsbG9jYXRvcjxVPiYpIHRocm93KCkge30KICB+anNhbGxvY2F0b3IoKSB0aHJvdygpIHt9CiAgc2l6ZV90eXBlCiAgbWF4X3NpemUoKSBjb25zdCB0aHJvdygpIHsKICAgIHJldHVybiBzdGQ6Om51bWVyaWNfbGltaXRzPHN0ZDo6c2l6ZV90Pjo6bWF4KCkgLyBzaXplb2YoVCk7CiAgfQogIHBvaW50ZXIKICBhbGxvY2F0ZShzaXplX3R5cGUgbnVtLCBjb25zdCB2b2lkKiA9IDApIHsKICAgIHBvaW50ZXIgcmV0OwogICAgc3RkOjpjZXJyIDw8ICJhbGxvY2F0ZSAiIDw8IG51bSA8PCAiIGVsZW1lbnQocykiCiAgICAgICAgICAgICAgPDwgIiBvZiBzaXplICIgPDwgc2l6ZW9mKFQpIDw8IHN0ZDo6ZW5kbDsKCiAgICBzdGQ6OmNlcnIgPDwgIiBhbGxvY2F0ZWQgYXQ6ICIgPDwgKHZvaWQqKXJldCA8PCBzdGQ6OmVuZGw7CiAgICByZXR1cm4gcmV0OwogIH0KICB2b2lkCiAgY29uc3RydWN0KHBvaW50ZXIgcCwgY29uc3QgVCYgdmFsdWUpIHsKICAgIHAtPlQodmFsdWUpOwogIH0KICB2b2lkCiAgZGVzdHJveShwb2ludGVyIHApIHsKICAgIHAtPn5UKCk7CiAgfQogIHZvaWQKICBkZWFsbG9jYXRlKHBvaW50ZXIgcCwgc2l6ZV90eXBlIG51bSkgewogICAgc3RkOjpjZXJyIDw8ICJkZWFsbG9jYXRlICIgPDwgbnVtIDw8ICIgZWxlbWVudChzKSIKICAgICAgICAgICAgICA8PCAiIG9mIHNpemUgIiA8PCBzaXplb2YoVCkgPDwgIiBhdDogIiA8PCAodm9pZCopcCA8PCBzdGQ6OmVuZGw7CiAgICBqc19mcmVlKHApOwogIH0KfTsKCi8qZXh0ZXJuICJDIiB7fQoKSlNWYWx1ZSBpbnQzMmFycmF5X3Byb3RvLCBpbnQzMmFycmF5X2N0b3I7CkpTQ2xhc3NJRCBpbnQzMmFycmF5X2NsYXNzX2lkOyovCgpleHRlcm4gIkMrKyIgdGVtcGxhdGU8Y2xhc3MgVHlwZT4gSlNWYWx1ZSBqc19jb250b3VyX25ldyhKU0NvbnRleHQqIGN0eCwgY29uc3Qgc3RkOjp2ZWN0b3I8VHlwZT4mIHBvaW50cyk7CgovKkpTVmFsdWUKanNfdmVjdG9yX3ZlYzRpX3RvX2FycmF5KEpTQ29udGV4dCogY3R4LCBjb25zdCBzdGQ6OnZlY3Rvcjxjdjo6VmVjNGk+JiB2ZWMpIHsKICBKU1ZhbHVlIHJldCA9IEpTX05ld0FycmF5KGN0eCk7CiAgdWludDMyX3QgaSwgaiwgbiA9IHZlYy5zaXplKCk7CiAgZm9yKGkgPSAwOyBpIDwgbjsgaSsrKSB7CiAgICBKU1ZhbHVlIGl0ZW0gPSBKU19OZXdPYmplY3RQcm90byhjdHgsIGludDMyYXJyYXlfcHJvdG8pOwogICAgZm9yKGogPSAwOyBqIDwgNDsgaisrKSB7IEpTX1NldFByb3BlcnR5VWludDMyKGN0eCwgaXRlbSwgaiwgSlNfTmV3SW50MzIoY3R4LCB2ZWNbaV1bal0pKTsgfQogICAgSlNfU2V0UHJvcGVydHlVaW50MzIoY3R4LCByZXQsIGksIGl0ZW0pOwogIH0KICByZXR1cm4gcmV0Owp9Ki8KCmludApqc19jb2xvcl9yZWFkKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgY29sb3IsIEpTQ29sb3JEYXRhPGRvdWJsZT4qIG91dCkgewogIGludCByZXQgPSAxOwogIHN0ZDo6YXJyYXk8ZG91YmxlLCA0PiBjOwogIGlmKEpTX0lzT2JqZWN0KGNvbG9yKSkgewogICAgSlNWYWx1ZSB2WzRdOwogICAgaWYoanNfaXNfYXJyYXkoY3R4LCBjb2xvcikpIHsKICAgICAgdlswXSA9IEpTX0dldFByb3BlcnR5VWludDMyKGN0eCwgY29sb3IsIDApOwogICAgICB2WzFdID0gSlNfR2V0UHJvcGVydHlVaW50MzIoY3R4LCBjb2xvciwgMSk7CiAgICAgIHZbMl0gPSBKU19HZXRQcm9wZXJ0eVVpbnQzMihjdHgsIGNvbG9yLCAyKTsKICAgICAgdlszXSA9IEpTX0dldFByb3BlcnR5VWludDMyKGN0eCwgY29sb3IsIDMpOwogICAgfSBlbHNlIHsKICAgICAgdlswXSA9IEpTX0dldFByb3BlcnR5U3RyKGN0eCwgY29sb3IsICJyIik7CiAgICAgIHZbMV0gPSBKU19HZXRQcm9wZXJ0eVN0cihjdHgsIGNvbG9yLCAiZyIpOwogICAgICB2WzJdID0gSlNfR2V0UHJvcGVydHlTdHIoY3R4LCBjb2xvciwgImIiKTsKICAgICAgdlszXSA9IEpTX0dldFByb3BlcnR5U3RyKGN0eCwgY29sb3IsICJhIik7CiAgICB9CiAgICBKU19Ub0Zsb2F0NjQoY3R4LCAmY1swXSwgdlswXSk7CiAgICBKU19Ub0Zsb2F0NjQoY3R4LCAmY1sxXSwgdlsxXSk7CiAgICBKU19Ub0Zsb2F0NjQoY3R4LCAmY1syXSwgdlsyXSk7CiAgICBKU19Ub0Zsb2F0NjQoY3R4LCAmY1szXSwgdlszXSk7CgogICAgSlNfRnJlZVZhbHVlKGN0eCwgdlswXSk7CiAgICBKU19GcmVlVmFsdWUoY3R4LCB2WzFdKTsKICAgIEpTX0ZyZWVWYWx1ZShjdHgsIHZbMl0pOwogICAgSlNfRnJlZVZhbHVlKGN0eCwgdlszXSk7CiAgfSBlbHNlIGlmKEpTX0lzTnVtYmVyKGNvbG9yKSkgewogICAgdWludDMyX3QgdmFsdWU7CiAgICBKU19Ub1VpbnQzMihjdHgsICZ2YWx1ZSwgY29sb3IpOwogICAgY1swXSA9IHZhbHVlICYgMHhmZjsKICAgIGNbMV0gPSAodmFsdWUgPj4gOCkgJiAweGZmOwogICAgY1syXSA9ICh2YWx1ZSA+PiAxNikgJiAweGZmOwogICAgY1szXSA9ICh2YWx1ZSA+PiAyNCkgJiAweGZmOwogIH0gZWxzZSB7CiAgICByZXQgPSAwOwogIH0KCiAgc3RkOjpjb3B5KGMuY2JlZ2luKCksIGMuY2VuZCgpLCBvdXQtPmFyci5iZWdpbigpKTsKCiAgcmV0dXJuIHJldDsKfQoKaW50CmpzX2NvbG9yX3JlYWQoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB2YWx1ZSwgSlNDb2xvckRhdGE8dWludDhfdD4qIG91dCkgewogIEpTQ29sb3JEYXRhPGRvdWJsZT4gY29sb3I7CiAgaWYoanNfY29sb3JfcmVhZChjdHgsIHZhbHVlLCAmY29sb3IpKSB7CiAgICBvdXQtPmFyclswXSA9IGNvbG9yLmFyclswXTsKICAgIG91dC0+YXJyWzFdID0gY29sb3IuYXJyWzFdOwogICAgb3V0LT5hcnJbMl0gPSBjb2xvci5hcnJbMl07CiAgICBvdXQtPmFyclszXSA9IGNvbG9yLmFyclszXTsKICAgIHJldHVybiAxOwogIH0KICByZXR1cm4gMDsKfQoKaW50CmpzX3JlZihKU0NvbnRleHQqIGN0eCwgY29uc3QgY2hhciogbmFtZSwgSlNWYWx1ZUNvbnN0IGFyZywgSlNWYWx1ZSB2YWx1ZSkgewogIGlmKEpTX0lzRnVuY3Rpb24oY3R4LCBhcmcpKSB7CiAgICBKU1ZhbHVlQ29uc3QgdiA9IHZhbHVlOwogICAgSlNfQ2FsbChjdHgsIGFyZywgSlNfVU5ERUZJTkVELCAxLCAmdik7CiAgfSBlbHNlIGlmKGpzX2lzX2FycmF5KGN0eCwgYXJnKSkgewogICAgSlNfU2V0UHJvcGVydHlVaW50MzIoY3R4LCBhcmcsIDAsIHZhbHVlKTsKICB9IGVsc2UgaWYoSlNfSXNPYmplY3QoYXJnKSkgewogICAgSlNfU2V0UHJvcGVydHlTdHIoY3R4LCBhcmcsIG5hbWUsIHZhbHVlKTsKICB9IGVsc2UgewogICAgcmV0dXJuIDA7CiAgfQogIHJldHVybiAxOwp9CgojaWZkZWYgSlNfQklORElOR1NfSU5JVF9NT0RVTEUKc3RhdGljIGludApqc19iaW5kaW5nc19pbml0KEpTQ29udGV4dCogY3R4LCBKU01vZHVsZURlZiogbSkgewogIGpzX3BvaW50X2luaXQoY3R4LCBtKTsKICBqc19wb2ludF9pdGVyYXRvcl9pbml0KGN0eCwgbSk7CiAganNfc2l6ZV9pbml0KGN0eCwgbSk7CiAganNfcmVjdF9pbml0KGN0eCwgbSk7CiAganNfbWF0X2luaXQoY3R4LCBtKTsKICBqc19jb250b3VyX2luaXQoY3R4LCBtKTsKICBqc19kcmF3X2luaXQoY3R4LCBtKTsKICBqc192aWRlb19jYXB0dXJlX2luaXQoY3R4LCBtKTsKICByZXR1cm4gMDsKfQoKZXh0ZXJuICJDIiBKU01vZHVsZURlZioKCmpzX2luaXRfbW9kdWxlKEpTQ29udGV4dCogY3R4LCBjb25zdCBjaGFyKiBtb2R1bGVfbmFtZSkgewogIEpTTW9kdWxlRGVmKiBtOwoKICBtID0gSlNfTmV3Q01vZHVsZShjdHgsIG1vZHVsZV9uYW1lLCAmanNfYmluZGluZ3NfaW5pdCk7CgogIHJldHVybiBtOwp9CgojZW5kaWYKAAAAAAAAAABaEgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA/gAAAAAAAAD+AAAAAAAAAAAAAAAAAPC/"
				]
			]
		},
		{
			"contents": "#include \"js.hpp\"\n#include \"jsbindings.hpp\"\n#include \"util.hpp\"\n#include <cstring>\n#include <iostream>\n#include <cstring>\n#include <filesystem>\n#include <cassert>\n#include <regex>\n\nextern \"C\" {\n#include \"quickjs/quickjs.h\"\n#include \"quickjs/quickjs-libc.h\"\n#include \"quickjs/cutils.h\"\n\n// jsrt js;\n\nchar* normalize_module(JSContext* ctx, const char* module_base_name, const char* module_name, void* opaque);\n\nstruct JSString {\n  JSRefCountHeader header; /* must come first, 32-bit */\n  uint32_t len : 31;\n  uint8_t is_wide_char : 1; /* 0 = 8 bits, 1 = 16 bits characters */\n  /* for JS_ATOM_TYPE_SYMBOL: hash = 0, atom_type = 3,\n     for JS_ATOM_TYPE_PRIVATE: hash = 1, atom_type = 3\n     XXX: could change encoding to have one more bit in hash */\n  uint32_t hash : 30;\n  uint8_t atom_type : 2; /* != 0 if atom, JS_ATOM_TYPE_x */\n  uint32_t hash_next;    /* atom_index for JS_ATOM_TYPE_SYMBOL */\n#ifdef DUMP_LEAKS\n  struct list_head link; /* string list */\n#endif\n  union {\n    uint8_t str8[0]; /* 8 bit strings will get an extra null terminator */\n    uint16_t str16[0];\n  } u;\n};\n\ntypedef struct JSString JSAtomStruct;\n};\n\nstatic JSValue\njs_print(JSContext* ctx, JSValueConst this_val, int argc, JSValueConst* argv) {\n  int i;\n  const char* str;\n\n  for(i = 0; i < argc; i++) {\n    if(i != 0)\n      putchar(' ');\n    str = JS_ToCString(ctx, argv[i]);\n    if(!str)\n      return JS_EXCEPTION;\n    fputs(str, stdout);\n    JS_FreeCString(ctx, str);\n  }\n  putchar('\\n');\n  return JS_UNDEFINED;\n}\n\nstruct JSProperty;\nstruct JSShapeProperty;\n\nbool\njsrt::init(int argc, char* argv[]) {\n  int load_std = 0;\n\n  if(ctx == nullptr)\n    if(!create())\n      return false;\n\n  // JS_AddIntrinsicBaseObjects(ctx);\n  js_std_add_helpers(ctx, argc, argv);\n\n  /* system modules */\n  js_init_module_std(ctx, \"std\");\n  js_init_module_os(ctx, \"os\");\n\n  /* make 'std' and 'os' visible to non module code */\n  if(load_std) {\n    const char* str = \"import * as std from 'std';\\n\"\n                      \"import * as os from 'os';\\n\"\n                      \"globalThis.std = std;\\n\"\n                      \"globalThis.os = os;\\n\";\n    eval_buf(str, strlen(str), \"<input>\", JS_EVAL_TYPE_MODULE);\n  }\n\n  /* loader for ES6 modules */\n  JS_SetModuleLoaderFunc(get_runtime(), &normalize_module, js_module_loader, this);\n\n  // global.get();\n\n  /*  this->_undefined = get_undefined();\n    this->_null = get_null();\n    this->_true = get_true();\n    this->_false = get_false();*/\n\n  return ctx != nullptr;\n}\n\nbool\njsrt::create(JSContext* _ctx) {\n  assert(ctx == nullptr);\n  if(_ctx) {\n    // rt = JS_GetRuntime(ctx = _ctx);\n  } else {\n    JSRuntime* rt;\n    if((rt = JS_NewRuntime())) {\n      js_std_init_handlers(rt);\n\n      ctx = JS_NewContext(rt);\n    }\n  }\n  return ctx != nullptr;\n}\n\n/*jsrt::value*\njsrt::get_function(const char* name) {\n  auto it = funcmap.find(name);\n  if(it != funcmap.end()) {\n    std::pair<JSCFunction*, value>& val = it->second;\n    return &val.second;\n  }\n  return nullptr;\n}*/\n\nstd::string\njsrt::to_str(const_value val) {\n  std::string ret;\n  if(JS_IsFunction(ctx, val))\n    ret = \"Function\";\n  else if(JS_IsNumber(val))\n    ret = \"Number\";\n  else if(JS_IsBool(val))\n    ret = \"Boolean\";\n  else if(JS_IsString(val))\n    ret = \"String\";\n  else if(js_is_array(ctx, val))\n    ret = \"Array\";\n  else if(JS_IsObject(val))\n    ret = \"Object\";\n  else if(JS_IsSymbol(val))\n    ret = \"Symbol\";\n  else if(JS_IsException(val))\n    ret = \"Exception\";\n  else if(JS_IsUninitialized(val))\n    ret = \"Uninitialized\";\n  else if(JS_IsUndefined(val))\n    ret = \"undefined\";\n\n  return ret;\n}\n\njsrt::const_value\njsrt::prototype(const_value obj) const {\n  return JS_GetPrototype(ctx, obj);\n}\n\nstd::vector<const char*>\njsrt::property_names(const_value obj, bool enum_only, bool recursive) const {\n  std::vector<const char*> ret;\n  property_names(obj, ret, enum_only);\n  return ret;\n}\n\nvoid\njsrt::property_names(const_value obj, std::vector<const char*>& out, bool enum_only, bool recursive) const {\n  JSPropertyEnum* props;\n  uint32_t nprops;\n  while(JS_IsObject(obj)) {\n    props = nullptr;\n    nprops = 0;\n    JS_GetOwnPropertyNames(\n        ctx, &props, &nprops, obj, JS_GPN_STRING_MASK | JS_GPN_SYMBOL_MASK | (enum_only ? JS_GPN_ENUM_ONLY : 0));\n    for(uint32_t i = 0; i < nprops; i++) {\n      const char* s = JS_AtomToCString(ctx, props[i].atom);\n      out.push_back(s);\n    }\n    if(!recursive)\n      break;\n\n    obj = prototype(obj);\n  }\n}\n\nbool\njsrt::is_point(const_value val) const {\n  if(is_array(val)) {\n    int32_t length = -1;\n    get_number(get_property<const char*>(val, \"length\"), length);\n    if(length == 2)\n      return true;\n  } else if(is_object(val)) {\n    JSValue x, y;\n    x = get_property<const char*>(val, \"x\");\n    y = get_property<const char*>(val, \"y\");\n    if(is_number(x) && is_number(y))\n      return true;\n  }\n\n  return false;\n}\n\nbool\njsrt::is_rect(const_value val) const {\n  if(is_object(val)) {\n    JSValue x, y, w, h;\n    x = get_property<const char*>(val, \"x\");\n    y = get_property<const char*>(val, \"y\");\n    w = get_property<const char*>(val, \"width\");\n    h = get_property<const char*>(val, \"height\");\n    if(is_number(x) && is_number(y))\n      if(is_number(w) && is_number(h))\n        return true;\n  }\n\n  return false;\n}\n\nbool\njsrt::is_color(const_value val) const {\n  JSValue b = _undefined, g = _undefined, r = _undefined, a = _undefined;\n\n  if(is_array_like(val)) {\n    uint32_t length;\n    get_number(get_property<const char*>(val, \"length\"), length);\n\n    if(length == 3 || length == 4) {\n      b = get_property<uint32_t>(val, 0);\n      g = get_property<uint32_t>(val, 1);\n      r = get_property<uint32_t>(val, 2);\n      a = length > 3 ? get_property<uint32_t>(val, 3) : const_cast<jsrt*>(this)->create<int32_t>(255);\n    } else {\n      return false;\n    }\n  } else if(is_object(val)) {\n    b = get_property<const char*>(val, \"b\");\n    g = get_property<const char*>(val, \"g\");\n    r = get_property<const char*>(val, \"r\");\n    a = get_property<const char*>(val, \"a\");\n  }\n\n  if(is_number(b) && is_number(g) && is_number(r) && is_number(a))\n    return true;\n  return false;\n}\n\n/*\njsrt::global::global(jsrt& rt) : val(JS_UNDEFINED), js(rt) {}\n\nbool\njsrt::global::get() const {\n  if(JS_IsUndefined((const_value)val)) {\n    if(js.ctx) {\n      value global = JS_GetGlobalObject(js.ctx);\n\n      JS_SetPropertyStr(js.ctx, global, \"global\", JS_DupValue(js.ctx, global));\n      JS_FreeValue(js.ctx, global);\n    }\n\n    if(js.ctx) {\n      val = JS_GetGlobalObject(js.ctx);\n      return true;\n    }\n  }\n  return false;\n}\n\njsrt::global::global(global&& o) noexcept : val(std::move(o.val)), js(o.js) {}\n\njsrt::global::~global() {\n  if(js.ctx)\n    JS_FreeValue(js.ctx, val);\n}*/\n\njsrt::value\njsrt::get_undefined() const {\n  return JS_UNDEFINED;\n}\n\njsrt::value\njsrt::get_null() const {\n  return JS_NULL;\n}\n\njsrt::value\njsrt::get_true() const {\n  return JS_TRUE;\n}\n\njsrt::value\njsrt::get_false() const {\n  return JS_FALSE;\n}\n\njsrt::~jsrt() {\n  if(ctx)\n    JS_FreeContext(ctx);\n  ctx = nullptr;\n}\n\nJSValue\njsrt::eval_buf(const char* buf, int buf_len, const char* filename, int eval_flags) {\n  jsrt::value val;\n  if((eval_flags & JS_EVAL_TYPE_MASK) == JS_EVAL_TYPE_MODULE) {\n    val = JS_Eval(ctx, buf, buf_len, filename, eval_flags | JS_EVAL_FLAG_COMPILE_ONLY);\n    if(!JS_IsException(val)) {\n      js_module_set_import_meta(ctx, val, TRUE, TRUE);\n      val = JS_EvalFunction(ctx, val);\n    }\n  } else {\n    val = JS_Eval(ctx, buf, buf_len, filename, eval_flags);\n  }\n  if(JS_IsException(val)) {\n    js_std_dump_error(ctx);\n  } else {\n  }\n  return val;\n}\n\njsrt::value\njsrt::eval_file(const char* filename, int module) {\n  char* buf;\n  int eval_flags;\n  jsrt::value ret;\n  size_t buf_len;\n  buf = reinterpret_cast<char*>(js_load_file(ctx, &buf_len, filename));\n  if(!buf) {\n    perror(filename);\n    exit(1);\n  }\n  if(module < 0)\n    module = (str_end(filename, \".mjs\") || JS_DetectModule((const char*)buf, buf_len));\n\n  eval_flags = module ? JS_EVAL_TYPE_MODULE : JS_EVAL_TYPE_GLOBAL;\n\n  /*  std::string script(buf, buf_len);\n    std::cerr << \"Script: \" << script << std::endl;\n */\n  ret = eval_buf(buf, buf_len, filename, eval_flags);\n  js_free(ctx, buf);\n  return ret;\n}\n\nvoid\njsrt::set_global(const char* name, jsrt::value val) {\n  value globalThis = JS_GetGlobalObject(ctx);\n  JS_SetPropertyStr(ctx, globalThis, name, val);\n}\n\njsrt::value\njsrt::get_global(const char* name) const {\n  value globalThis = JS_GetGlobalObject(ctx);\n  value ret = JS_GetPropertyStr(ctx, globalThis, name);\n  return ret;\n}\n\nbool\njsrt::is_promise(const_value val) {\n  jsrt::value promise = get_global(\"Promise\");\n  jsrt::value promise_proto = get_property<const char*>(promise, \"prototype\");\n  return is_object(val) && (JS_IsInstanceOf(ctx, val, promise) || JS_IsInstanceOf(ctx, val, promise_proto));\n}\n\njsrt::value\njsrt::call(const char* name, size_t argc, value argv[]) const {\n  const_value func = get_global(name);\n  return call(func, argc, argv);\n}\n\njsrt::value\njsrt::call(const_value func, std::vector<value>& args) const {\n  return call(func, args.size(), const_cast<value*>(args.data()));\n}\n\njsrt::value\njsrt::call(const_value func, const_value this_arg, size_t argc, value argv[]) const {\n  value ret = JS_Call(ctx, func, this_arg, argc, const_cast<const_value*>(argv));\n  if(JS_IsException(ret))\n    dump_error();\n  return ret;\n}\n\njsrt::value\njsrt::call(const_value func, size_t argc, value argv[]) const {\n  return call(func, global_object(), argc, argv);\n}\n\nextern \"C\" char*\nnormalize_module(JSContext* ctx, const char* module_base_name, const char* module_name, void* opaque) {\n  using std::filesystem::exists;\n  using std::filesystem::path;\n  using std::filesystem::weakly_canonical;\n\n  char* name;\n  jsrt* js = static_cast<jsrt*>(opaque);\n\n  std::string module_dir = std::string(CONFIG_PREFIX) + \"/lib/quickjs\";\n\n  /*std::cerr << \"module_base_name: \" << module_base_name << std::endl;\n  std::cerr << \"module_name: \" << module_name << std::endl;\n  std::cerr << \"module_dir: \" << module_dir << std::endl;*/\n\n  if(module_name[0] == '.' && module_name[1] == '/')\n    module_name += 2;\n\n  const char* module_ext = strrchr(module_name, '.');\n  // std::cerr << \"module_ext: \" << module_ext << std::endl;\n\n  std::string module;\n  path module_path;\n  if((module_ext && !strcmp(\".so\", module_ext)) || module_ext == nullptr) {\n    module = module_dir + \"/\" + module_name;\n    module_path = path(module);\n  } else {\n    module = module_base_name;\n    module_path = path(module).replace_filename(path(module_name, module_name + strlen(module_name)));\n  }\n\n  std::string module_pathstr;\n\n  // std::cerr << \"module_path: \" << module_path.string() << std::endl;\n\n  bool present = exists(module_path);\n  /*  std::cerr << \"exists module_path: \" << present << std::endl;*/\n  module_pathstr = module_path.string();\n\n  if(!present) {\n    module_path = weakly_canonical(module_path);\n    module_pathstr = module_path.string();\n\n    present = exists(module_path);\n  }\n  /*std::cerr << \"module_pathstr: \" << module_pathstr << std::endl;\n  std::cerr << \"module_name: \" << module_name << std::endl;\n  std::cerr << \"present: \" << present << std::endl;*/\n\n  if(true) {\n\n    /*\n    module_pathstr.resize(module_pathstr.size()+1);\n    */\n    const char* s = module_pathstr.c_str();\n    name = static_cast<char*>(js_strdup(ctx, s));\n\n    return name;\n  }\n  return 0;\n}\n\nvoid\njsrt::dump_error() const {\n  JSValue exception_val;\n\n  exception_val = JS_GetException(ctx);\n  dump_exception(exception_val, true);\n  JS_FreeValue(ctx, exception_val);\n}\n\nvoid\njsrt::dump_exception(JSValueConst exception_val, bool is_throw) const {\n  JSValue val;\n  const char* stack;\n  bool is_error;\n\n  is_error = JS_IsError(ctx, exception_val);\n  /*  if(is_throw && !is_error)\n      printf(\"Throw: \");*/\n  js_print(ctx, JS_NULL, 1, (JSValueConst*)&exception_val);\n  if(is_error) {\n    val = JS_GetPropertyStr(ctx, exception_val, \"stack\");\n    if(!JS_IsUndefined(val)) {\n      stack = JS_ToCString(ctx, val);\n      printf(\"%s\\n\", stack);\n      JS_FreeCString(ctx, stack);\n    }\n    JS_FreeValue(ctx, val);\n  }\n}\n\njsrt::atom\njsrt::new_atom(const char* buf, size_t len) const {\n  return JS_NewAtomLen(ctx, buf, len);\n}\n\njsrt::atom\njsrt::new_atom(const char* str) const {\n  return JS_NewAtom(ctx, str);\n}\n\njsrt::atom\njsrt::new_atom(uint32_t n) const {\n  return JS_NewAtomUInt32(ctx, n);\n}\n\nvoid\njsrt::free_atom(const jsrt::atom& a) const {\n  JS_FreeAtom(ctx, a);\n}\n\njsrt::value\njsrt::atom_to_value(const jsrt::atom& a) const {\n  return JS_AtomToValue(ctx, a);\n}\n\njsrt::value\njsrt::atom_to_string(const jsrt::atom& a) const {\n  return JS_AtomToString(ctx, a);\n}\n\nconst char*\njsrt::atom_to_cstring(const jsrt::atom& a) const {\n  return JS_AtomToCString(ctx, a);\n}\n\njsrt::atom\njsrt::value_to_atom(const const_value& v) const {\n  return JS_ValueToAtom(ctx, v);\n}\n\njsrt::value\njsrt::get_symbol(const char* name) const {\n  value ctor = get_global(\"Symbol\");\n  if(has_property(ctor, name))\n    return get_property<const char*>(ctor, name);\n\n  const_value for_fn = get_property<const char*>(ctor, \"for\");\n  value arg = new_string(name);\n  return call(for_fn, ctor, 1, &arg);\n}\n\njsrt::value\njsrt::get_property_symbol(const_value obj, const char* symbol) {\n  value sym = get_symbol(symbol);\n  value ret = get_property<value>(obj, sym);\n  free_value(sym);\n  return ret;\n}\n\njsrt::value\njsrt::call_iterator(const_value obj, const char* symbol) {\n  value fn = get_iterator(obj, symbol);\n  value ret = _undefined;\n\n  if(is_function(fn))\n    ret = call(fn, obj, 0, nullptr);\n\n  free_value(fn);\n\n  return ret;\n}\n\njsrt::value\njsrt::call_iterator_next(const_value obj, const char* symbol) {\n  value iter = get_iterator(obj, symbol);\n  value ret = _undefined, next = _undefined;\n\n  if(is_object(iter) && !is_null(iter)) {\n    next = get_property<const char*>(iter, \"next\");\n\n    if(is_function(next) && has_property(next, \"bind\")) {\n      ret = call(get_property<const char*>(next, \"bind\"), iter, 0, nullptr);\n      //   free_value(next);\n    }\n  }\n  // free_value(iter);\n  return ret;\n}\n\nint\njsrt::tag(value val) const {\n  return JS_VALUE_GET_TAG(val);\n}\n\nvoid*\njsrt::obj(const_value val) const {\n  return JS_VALUE_GET_OBJ(val);\n}\n",
			"file": "js.cpp",
			"file_size": 14147,
			"file_write_time": 132653233312368093,
			"settings":
			{
				"buffer_size": 14147,
				"encoding": "UTF-8",
				"line_ending": "Unix"
			},
			"undo_stack":
			[
				[
					7,
					1,
					"insert",
					{
						"characters": "//"
					},
					"AgAAACcBAAAAAAAAKAEAAAAAAAAAAAAAKAEAAAAAAAApAQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAJwEAAAAAAAAnAQAAAAAAAAAAAAAAAAAA"
				],
				[
					8,
					2,
					"left_delete",
					null,
					"AgAAACgBAAAAAAAAKAEAAAAAAAABAAAALycBAAAAAAAAJwEAAAAAAAABAAAALw",
					"AQAAAAAAAAABAAAAKQEAAAAAAAApAQAAAAAAAAAAAAAAAPC/"
				],
				[
					10,
					1,
					"insert",
					{
						"characters": "//"
					},
					"AgAAAB4BAAAAAAAAHwEAAAAAAAAAAAAAHwEAAAAAAAAgAQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAHgEAAAAAAAAeAQAAAAAAAAAAAAAAAAAA"
				],
				[
					30,
					1,
					"toggle_comment",
					{
						"block": true
					},
					"AgAAAJcGAAAAAAAAmQYAAAAAAAAAAAAA/wUAAAAAAAABBgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA/wUAAAAAAACXBgAAAAAAAAAAAAAAAPC/"
				],
				[
					36,
					1,
					"insert",
					{
						"characters": " "
					},
					"AgAAAP4FAAAAAAAA/wUAAAAAAAAAAAAA/wUAAAAAAAD/BQAAAAAAAJ0AAAAKLyoKanNydDo6dmFsdWUganNydDo6X3VuZGVmaW5lZCA9IEpTX1VOREVGSU5FRDsKanNydDo6dmFsdWUganNydDo6X3RydWUgPSBKU19UUlVFOwpqc3J0Ojp2YWx1ZSBqc3J0OjpfZmFsc2UgPSBKU19GQUxTRTsKanNydDo6dmFsdWUganNydDo6X251bGwgPSBKU19OVUxMOyov",
					"AQAAAAAAAAABAAAA/gUAAAAAAACbBgAAAAAAAAAAAAAAAPC/"
				],
				[
					37,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAABDNwAAI2luY2x1ZGUgImpzLmhwcCIKI2luY2x1ZGUgImpzYmluZGluZ3MuaHBwIgojaW5jbHVkZSAidXRpbC5ocHAiCiNpbmNsdWRlIDxjc3RyaW5nPgojaW5jbHVkZSA8aW9zdHJlYW0+CiNpbmNsdWRlIDxjc3RyaW5nPgojaW5jbHVkZSA8ZmlsZXN5c3RlbT4KI2luY2x1ZGUgPGNhc3NlcnQ+CiNpbmNsdWRlIDxyZWdleD4KCmV4dGVybiAiQyIgewojaW5jbHVkZSAicXVpY2tqcy9xdWlja2pzLmgiCiNpbmNsdWRlICJxdWlja2pzL3F1aWNranMtbGliYy5oIgojaW5jbHVkZSAicXVpY2tqcy9jdXRpbHMuaCIKCi8vanNydCBqczsKCmNoYXIqIG5vcm1hbGl6ZV9tb2R1bGUoSlNDb250ZXh0KiBjdHgsIGNvbnN0IGNoYXIqIG1vZHVsZV9iYXNlX25hbWUsIGNvbnN0IGNoYXIqIG1vZHVsZV9uYW1lLCB2b2lkKiBvcGFxdWUpOwoKc3RydWN0IEpTU3RyaW5nIHsKICBKU1JlZkNvdW50SGVhZGVyIGhlYWRlcjsgLyogbXVzdCBjb21lIGZpcnN0LCAzMi1iaXQgKi8KICB1aW50MzJfdCBsZW4gOiAzMTsKICB1aW50OF90IGlzX3dpZGVfY2hhciA6IDE7IC8qIDAgPSA4IGJpdHMsIDEgPSAxNiBiaXRzIGNoYXJhY3RlcnMgKi8KICAvKiBmb3IgSlNfQVRPTV9UWVBFX1NZTUJPTDogaGFzaCA9IDAsIGF0b21fdHlwZSA9IDMsCiAgICAgZm9yIEpTX0FUT01fVFlQRV9QUklWQVRFOiBoYXNoID0gMSwgYXRvbV90eXBlID0gMwogICAgIFhYWDogY291bGQgY2hhbmdlIGVuY29kaW5nIHRvIGhhdmUgb25lIG1vcmUgYml0IGluIGhhc2ggKi8KICB1aW50MzJfdCBoYXNoIDogMzA7CiAgdWludDhfdCBhdG9tX3R5cGUgOiAyOyAvKiAhPSAwIGlmIGF0b20sIEpTX0FUT01fVFlQRV94ICovCiAgdWludDMyX3QgaGFzaF9uZXh0OyAgICAvKiBhdG9tX2luZGV4IGZvciBKU19BVE9NX1RZUEVfU1lNQk9MICovCiNpZmRlZiBEVU1QX0xFQUtTCiAgc3RydWN0IGxpc3RfaGVhZCBsaW5rOyAvKiBzdHJpbmcgbGlzdCAqLwojZW5kaWYKICB1bmlvbiB7CiAgICB1aW50OF90IHN0cjhbMF07IC8qIDggYml0IHN0cmluZ3Mgd2lsbCBnZXQgYW4gZXh0cmEgbnVsbCB0ZXJtaW5hdG9yICovCiAgICB1aW50MTZfdCBzdHIxNlswXTsKICB9IHU7Cn07Cgp0eXBlZGVmIHN0cnVjdCBKU1N0cmluZyBKU0F0b21TdHJ1Y3Q7Cn07CgpzdGF0aWMgSlNWYWx1ZQpqc19wcmludChKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2KSB7CiAgaW50IGk7CiAgY29uc3QgY2hhciogc3RyOwoKICBmb3IoaSA9IDA7IGkgPCBhcmdjOyBpKyspIHsKICAgIGlmKGkgIT0gMCkKICAgICAgcHV0Y2hhcignICcpOwogICAgc3RyID0gSlNfVG9DU3RyaW5nKGN0eCwgYXJndltpXSk7CiAgICBpZighc3RyKQogICAgICByZXR1cm4gSlNfRVhDRVBUSU9OOwogICAgZnB1dHMoc3RyLCBzdGRvdXQpOwogICAgSlNfRnJlZUNTdHJpbmcoY3R4LCBzdHIpOwogIH0KICBwdXRjaGFyKCdcbicpOwogIHJldHVybiBKU19VTkRFRklORUQ7Cn0KCnN0cnVjdCBKU1Byb3BlcnR5OwpzdHJ1Y3QgSlNTaGFwZVByb3BlcnR5OyAKCmJvb2wKanNydDo6aW5pdChpbnQgYXJnYywgY2hhciogYXJndltdKSB7CiAgaW50IGxvYWRfc3RkID0gMDsKCiAgaWYoY3R4ID09IG51bGxwdHIpCiAgICBpZighY3JlYXRlKCkpCiAgICAgIHJldHVybiBmYWxzZTsKCiAgLy8gSlNfQWRkSW50cmluc2ljQmFzZU9iamVjdHMoY3R4KTsKICBqc19zdGRfYWRkX2hlbHBlcnMoY3R4LCBhcmdjLCBhcmd2KTsKCiAgLyogc3lzdGVtIG1vZHVsZXMgKi8KICBqc19pbml0X21vZHVsZV9zdGQoY3R4LCAic3RkIik7CiAganNfaW5pdF9tb2R1bGVfb3MoY3R4LCAib3MiKTsKCiAgLyogbWFrZSAnc3RkJyBhbmQgJ29zJyB2aXNpYmxlIHRvIG5vbiBtb2R1bGUgY29kZSAqLwogIGlmKGxvYWRfc3RkKSB7CiAgICBjb25zdCBjaGFyKiBzdHIgPSAiaW1wb3J0ICogYXMgc3RkIGZyb20gJ3N0ZCc7XG4iCiAgICAgICAgICAgICAgICAgICAgICAiaW1wb3J0ICogYXMgb3MgZnJvbSAnb3MnO1xuIgogICAgICAgICAgICAgICAgICAgICAgImdsb2JhbFRoaXMuc3RkID0gc3RkO1xuIgogICAgICAgICAgICAgICAgICAgICAgImdsb2JhbFRoaXMub3MgPSBvcztcbiI7CiAgICBldmFsX2J1ZihzdHIsIHN0cmxlbihzdHIpLCAiPGlucHV0PiIsIEpTX0VWQUxfVFlQRV9NT0RVTEUpOwogIH0KCiAgLyogbG9hZGVyIGZvciBFUzYgbW9kdWxlcyAqLwogIEpTX1NldE1vZHVsZUxvYWRlckZ1bmMoZ2V0X3J1bnRpbWUoKSwgJm5vcm1hbGl6ZV9tb2R1bGUsIGpzX21vZHVsZV9sb2FkZXIsIHRoaXMpOwoKICAvLyBnbG9iYWwuZ2V0KCk7CgogIC8qICB0aGlzLT5fdW5kZWZpbmVkID0gZ2V0X3VuZGVmaW5lZCgpOwogICAgdGhpcy0+X251bGwgPSBnZXRfbnVsbCgpOwogICAgdGhpcy0+X3RydWUgPSBnZXRfdHJ1ZSgpOwogICAgdGhpcy0+X2ZhbHNlID0gZ2V0X2ZhbHNlKCk7Ki8KCiAgcmV0dXJuIGN0eCAhPSBudWxscHRyOwp9Cgpib29sCmpzcnQ6OmNyZWF0ZShKU0NvbnRleHQqIF9jdHgpIHsKICBhc3NlcnQoY3R4ID09IG51bGxwdHIpOwogIGlmKF9jdHgpIHsKICAgIC8vIHJ0ID0gSlNfR2V0UnVudGltZShjdHggPSBfY3R4KTsKICB9IGVsc2UgewogICAgSlNSdW50aW1lKiBydDsKICAgIGlmKChydCA9IEpTX05ld1J1bnRpbWUoKSkpIHsKICAgICAganNfc3RkX2luaXRfaGFuZGxlcnMocnQpOwoKICAgICAgY3R4ID0gSlNfTmV3Q29udGV4dChydCk7CiAgICB9CiAgfQogIHJldHVybiBjdHggIT0gbnVsbHB0cjsKfQoKLypqc3J0Ojp2YWx1ZSoKanNydDo6Z2V0X2Z1bmN0aW9uKGNvbnN0IGNoYXIqIG5hbWUpIHsKICBhdXRvIGl0ID0gZnVuY21hcC5maW5kKG5hbWUpOwogIGlmKGl0ICE9IGZ1bmNtYXAuZW5kKCkpIHsKICAgIHN0ZDo6cGFpcjxKU0NGdW5jdGlvbiosIHZhbHVlPiYgdmFsID0gaXQtPnNlY29uZDsKICAgIHJldHVybiAmdmFsLnNlY29uZDsKICB9CiAgcmV0dXJuIG51bGxwdHI7Cn0qLwoKc3RkOjpzdHJpbmcKanNydDo6dG9fc3RyKGNvbnN0X3ZhbHVlIHZhbCkgewogIHN0ZDo6c3RyaW5nIHJldDsKICBpZihKU19Jc0Z1bmN0aW9uKGN0eCwgdmFsKSkKICAgIHJldCA9ICJGdW5jdGlvbiI7CiAgZWxzZSBpZihKU19Jc051bWJlcih2YWwpKQogICAgcmV0ID0gIk51bWJlciI7CiAgZWxzZSBpZihKU19Jc0Jvb2wodmFsKSkKICAgIHJldCA9ICJCb29sZWFuIjsKICBlbHNlIGlmKEpTX0lzU3RyaW5nKHZhbCkpCiAgICByZXQgPSAiU3RyaW5nIjsKICBlbHNlIGlmKGpzX2lzX2FycmF5KGN0eCwgdmFsKSkKICAgIHJldCA9ICJBcnJheSI7CiAgZWxzZSBpZihKU19Jc09iamVjdCh2YWwpKQogICAgcmV0ID0gIk9iamVjdCI7CiAgZWxzZSBpZihKU19Jc1N5bWJvbCh2YWwpKQogICAgcmV0ID0gIlN5bWJvbCI7CiAgZWxzZSBpZihKU19Jc0V4Y2VwdGlvbih2YWwpKQogICAgcmV0ID0gIkV4Y2VwdGlvbiI7CiAgZWxzZSBpZihKU19Jc1VuaW5pdGlhbGl6ZWQodmFsKSkKICAgIHJldCA9ICJVbmluaXRpYWxpemVkIjsKICBlbHNlIGlmKEpTX0lzVW5kZWZpbmVkKHZhbCkpCiAgICByZXQgPSAidW5kZWZpbmVkIjsKCiAgcmV0dXJuIHJldDsKfQoKanNydDo6Y29uc3RfdmFsdWUKanNydDo6cHJvdG90eXBlKGNvbnN0X3ZhbHVlIG9iaikgY29uc3QgewogIHJldHVybiBKU19HZXRQcm90b3R5cGUoY3R4LCBvYmopOwp9CgpzdGQ6OnZlY3Rvcjxjb25zdCBjaGFyKj4KanNydDo6cHJvcGVydHlfbmFtZXMoY29uc3RfdmFsdWUgb2JqLCBib29sIGVudW1fb25seSwgYm9vbCByZWN1cnNpdmUpIGNvbnN0IHsKICBzdGQ6OnZlY3Rvcjxjb25zdCBjaGFyKj4gcmV0OwogIHByb3BlcnR5X25hbWVzKG9iaiwgcmV0LCBlbnVtX29ubHkpOwogIHJldHVybiByZXQ7Cn0KCnZvaWQKanNydDo6cHJvcGVydHlfbmFtZXMoY29uc3RfdmFsdWUgb2JqLCBzdGQ6OnZlY3Rvcjxjb25zdCBjaGFyKj4mIG91dCwgYm9vbCBlbnVtX29ubHksIGJvb2wgcmVjdXJzaXZlKSBjb25zdCB7CiAgSlNQcm9wZXJ0eUVudW0qIHByb3BzOwogIHVpbnQzMl90IG5wcm9wczsKICB3aGlsZShKU19Jc09iamVjdChvYmopKSB7CiAgICBwcm9wcyA9IG51bGxwdHI7CiAgICBucHJvcHMgPSAwOwogICAgSlNfR2V0T3duUHJvcGVydHlOYW1lcygKICAgICAgICBjdHgsICZwcm9wcywgJm5wcm9wcywgb2JqLCBKU19HUE5fU1RSSU5HX01BU0sgfCBKU19HUE5fU1lNQk9MX01BU0sgfCAoZW51bV9vbmx5ID8gSlNfR1BOX0VOVU1fT05MWSA6IDApKTsKICAgIGZvcih1aW50MzJfdCBpID0gMDsgaSA8IG5wcm9wczsgaSsrKSB7CiAgICAgIGNvbnN0IGNoYXIqIHMgPSBKU19BdG9tVG9DU3RyaW5nKGN0eCwgcHJvcHNbaV0uYXRvbSk7CiAgICAgIG91dC5wdXNoX2JhY2socyk7CiAgICB9CiAgICBpZighcmVjdXJzaXZlKQogICAgICBicmVhazsKCiAgICBvYmogPSBwcm90b3R5cGUob2JqKTsKICB9Cn0KCmJvb2wKanNydDo6aXNfcG9pbnQoY29uc3RfdmFsdWUgdmFsKSBjb25zdCB7CiAgaWYoaXNfYXJyYXkodmFsKSkgewogICAgaW50MzJfdCBsZW5ndGggPSAtMTsKICAgIGdldF9udW1iZXIoZ2V0X3Byb3BlcnR5PGNvbnN0IGNoYXIqPih2YWwsICJsZW5ndGgiKSwgbGVuZ3RoKTsKICAgIGlmKGxlbmd0aCA9PSAyKQogICAgICByZXR1cm4gdHJ1ZTsKICB9IGVsc2UgaWYoaXNfb2JqZWN0KHZhbCkpIHsKICAgIEpTVmFsdWUgeCwgeTsKICAgIHggPSBnZXRfcHJvcGVydHk8Y29uc3QgY2hhcio+KHZhbCwgIngiKTsKICAgIHkgPSBnZXRfcHJvcGVydHk8Y29uc3QgY2hhcio+KHZhbCwgInkiKTsKICAgIGlmKGlzX251bWJlcih4KSAmJiBpc19udW1iZXIoeSkpCiAgICAgIHJldHVybiB0cnVlOwogIH0KCiAgcmV0dXJuIGZhbHNlOwp9Cgpib29sCmpzcnQ6OmlzX3JlY3QoY29uc3RfdmFsdWUgdmFsKSBjb25zdCB7CiAgaWYoaXNfb2JqZWN0KHZhbCkpIHsKICAgIEpTVmFsdWUgeCwgeSwgdywgaDsKICAgIHggPSBnZXRfcHJvcGVydHk8Y29uc3QgY2hhcio+KHZhbCwgIngiKTsKICAgIHkgPSBnZXRfcHJvcGVydHk8Y29uc3QgY2hhcio+KHZhbCwgInkiKTsKICAgIHcgPSBnZXRfcHJvcGVydHk8Y29uc3QgY2hhcio+KHZhbCwgIndpZHRoIik7CiAgICBoID0gZ2V0X3Byb3BlcnR5PGNvbnN0IGNoYXIqPih2YWwsICJoZWlnaHQiKTsKICAgIGlmKGlzX251bWJlcih4KSAmJiBpc19udW1iZXIoeSkpCiAgICAgIGlmKGlzX251bWJlcih3KSAmJiBpc19udW1iZXIoaCkpCiAgICAgICAgcmV0dXJuIHRydWU7CiAgfQoKICByZXR1cm4gZmFsc2U7Cn0KCmJvb2wKanNydDo6aXNfY29sb3IoY29uc3RfdmFsdWUgdmFsKSBjb25zdCB7CiAgSlNWYWx1ZSBiID0gX3VuZGVmaW5lZCwgZyA9IF91bmRlZmluZWQsIHIgPSBfdW5kZWZpbmVkLCBhID0gX3VuZGVmaW5lZDsKCiAgaWYoaXNfYXJyYXlfbGlrZSh2YWwpKSB7CiAgICB1aW50MzJfdCBsZW5ndGg7CiAgICBnZXRfbnVtYmVyKGdldF9wcm9wZXJ0eTxjb25zdCBjaGFyKj4odmFsLCAibGVuZ3RoIiksIGxlbmd0aCk7CgogICAgaWYobGVuZ3RoID09IDMgfHwgbGVuZ3RoID09IDQpIHsKICAgICAgYiA9IGdldF9wcm9wZXJ0eTx1aW50MzJfdD4odmFsLCAwKTsKICAgICAgZyA9IGdldF9wcm9wZXJ0eTx1aW50MzJfdD4odmFsLCAxKTsKICAgICAgciA9IGdldF9wcm9wZXJ0eTx1aW50MzJfdD4odmFsLCAyKTsKICAgICAgYSA9IGxlbmd0aCA+IDMgPyBnZXRfcHJvcGVydHk8dWludDMyX3Q+KHZhbCwgMykgOiBjb25zdF9jYXN0PGpzcnQqPih0aGlzKS0+Y3JlYXRlPGludDMyX3Q+KDI1NSk7CiAgICB9IGVsc2UgewogICAgICByZXR1cm4gZmFsc2U7CiAgICB9CiAgfSBlbHNlIGlmKGlzX29iamVjdCh2YWwpKSB7CiAgICBiID0gZ2V0X3Byb3BlcnR5PGNvbnN0IGNoYXIqPih2YWwsICJiIik7CiAgICBnID0gZ2V0X3Byb3BlcnR5PGNvbnN0IGNoYXIqPih2YWwsICJnIik7CiAgICByID0gZ2V0X3Byb3BlcnR5PGNvbnN0IGNoYXIqPih2YWwsICJyIik7CiAgICBhID0gZ2V0X3Byb3BlcnR5PGNvbnN0IGNoYXIqPih2YWwsICJhIik7CiAgfQoKICBpZihpc19udW1iZXIoYikgJiYgaXNfbnVtYmVyKGcpICYmIGlzX251bWJlcihyKSAmJiBpc19udW1iZXIoYSkpCiAgICByZXR1cm4gdHJ1ZTsKICByZXR1cm4gZmFsc2U7Cn0KCi8qCmpzcnQ6Omdsb2JhbDo6Z2xvYmFsKGpzcnQmIHJ0KSA6IHZhbChKU19VTkRFRklORUQpLCBqcyhydCkge30KCmJvb2wKanNydDo6Z2xvYmFsOjpnZXQoKSBjb25zdCB7CiAgaWYoSlNfSXNVbmRlZmluZWQoKGNvbnN0X3ZhbHVlKXZhbCkpIHsKICAgIGlmKGpzLmN0eCkgewogICAgICB2YWx1ZSBnbG9iYWwgPSBKU19HZXRHbG9iYWxPYmplY3QoanMuY3R4KTsKCiAgICAgIEpTX1NldFByb3BlcnR5U3RyKGpzLmN0eCwgZ2xvYmFsLCAiZ2xvYmFsIiwgSlNfRHVwVmFsdWUoanMuY3R4LCBnbG9iYWwpKTsKICAgICAgSlNfRnJlZVZhbHVlKGpzLmN0eCwgZ2xvYmFsKTsKICAgIH0KCiAgICBpZihqcy5jdHgpIHsKICAgICAgdmFsID0gSlNfR2V0R2xvYmFsT2JqZWN0KGpzLmN0eCk7CiAgICAgIHJldHVybiB0cnVlOwogICAgfQogIH0KICByZXR1cm4gZmFsc2U7Cn0KCmpzcnQ6Omdsb2JhbDo6Z2xvYmFsKGdsb2JhbCYmIG8pIG5vZXhjZXB0IDogdmFsKHN0ZDo6bW92ZShvLnZhbCkpLCBqcyhvLmpzKSB7fQoKanNydDo6Z2xvYmFsOjp+Z2xvYmFsKCkgewogIGlmKGpzLmN0eCkKICAgIEpTX0ZyZWVWYWx1ZShqcy5jdHgsIHZhbCk7Cn0qLwoKanNydDo6dmFsdWUKanNydDo6Z2V0X3VuZGVmaW5lZCgpIGNvbnN0IHsKICByZXR1cm4gSlNfVU5ERUZJTkVEOwp9Cgpqc3J0Ojp2YWx1ZQpqc3J0OjpnZXRfbnVsbCgpIGNvbnN0IHsKICByZXR1cm4gSlNfTlVMTDsKfQoKanNydDo6dmFsdWUKanNydDo6Z2V0X3RydWUoKSBjb25zdCB7CiAgcmV0dXJuIEpTX1RSVUU7Cn0KCmpzcnQ6OnZhbHVlCmpzcnQ6OmdldF9mYWxzZSgpIGNvbnN0IHsKICByZXR1cm4gSlNfRkFMU0U7Cn0KCmpzcnQ6On5qc3J0KCkgewogIGlmKGN0eCkKICAgIEpTX0ZyZWVDb250ZXh0KGN0eCk7CiAgY3R4ID0gbnVsbHB0cjsKfQoKSlNWYWx1ZQpqc3J0OjpldmFsX2J1Zihjb25zdCBjaGFyKiBidWYsIGludCBidWZfbGVuLCBjb25zdCBjaGFyKiBmaWxlbmFtZSwgaW50IGV2YWxfZmxhZ3MpIHsKICBqc3J0Ojp2YWx1ZSB2YWw7CiAgaWYoKGV2YWxfZmxhZ3MgJiBKU19FVkFMX1RZUEVfTUFTSykgPT0gSlNfRVZBTF9UWVBFX01PRFVMRSkgewogICAgdmFsID0gSlNfRXZhbChjdHgsIGJ1ZiwgYnVmX2xlbiwgZmlsZW5hbWUsIGV2YWxfZmxhZ3MgfCBKU19FVkFMX0ZMQUdfQ09NUElMRV9PTkxZKTsKICAgIGlmKCFKU19Jc0V4Y2VwdGlvbih2YWwpKSB7CiAgICAgIGpzX21vZHVsZV9zZXRfaW1wb3J0X21ldGEoY3R4LCB2YWwsIFRSVUUsIFRSVUUpOwogICAgICB2YWwgPSBKU19FdmFsRnVuY3Rpb24oY3R4LCB2YWwpOwogICAgfQogIH0gZWxzZSB7CiAgICB2YWwgPSBKU19FdmFsKGN0eCwgYnVmLCBidWZfbGVuLCBmaWxlbmFtZSwgZXZhbF9mbGFncyk7CiAgfQogIGlmKEpTX0lzRXhjZXB0aW9uKHZhbCkpIHsKICAgIGpzX3N0ZF9kdW1wX2Vycm9yKGN0eCk7CiAgfSBlbHNlIHsKICB9CiAgcmV0dXJuIHZhbDsKfQoKanNydDo6dmFsdWUKanNydDo6ZXZhbF9maWxlKGNvbnN0IGNoYXIqIGZpbGVuYW1lLCBpbnQgbW9kdWxlKSB7CiAgY2hhciogYnVmOwogIGludCBldmFsX2ZsYWdzOwogIGpzcnQ6OnZhbHVlIHJldDsKICBzaXplX3QgYnVmX2xlbjsKICBidWYgPSByZWludGVycHJldF9jYXN0PGNoYXIqPihqc19sb2FkX2ZpbGUoY3R4LCAmYnVmX2xlbiwgZmlsZW5hbWUpKTsKICBpZighYnVmKSB7CiAgICBwZXJyb3IoZmlsZW5hbWUpOwogICAgZXhpdCgxKTsKICB9CiAgaWYobW9kdWxlIDwgMCkKICAgIG1vZHVsZSA9IChzdHJfZW5kKGZpbGVuYW1lLCAiLm1qcyIpIHx8IEpTX0RldGVjdE1vZHVsZSgoY29uc3QgY2hhciopYnVmLCBidWZfbGVuKSk7CgogIGV2YWxfZmxhZ3MgPSBtb2R1bGUgPyBKU19FVkFMX1RZUEVfTU9EVUxFIDogSlNfRVZBTF9UWVBFX0dMT0JBTDsKCiAgLyogIHN0ZDo6c3RyaW5nIHNjcmlwdChidWYsIGJ1Zl9sZW4pOwogICAgc3RkOjpjZXJyIDw8ICJTY3JpcHQ6ICIgPDwgc2NyaXB0IDw8IHN0ZDo6ZW5kbDsKICovCiAgcmV0ID0gZXZhbF9idWYoYnVmLCBidWZfbGVuLCBmaWxlbmFtZSwgZXZhbF9mbGFncyk7CiAganNfZnJlZShjdHgsIGJ1Zik7CiAgcmV0dXJuIHJldDsKfQoKdm9pZApqc3J0OjpzZXRfZ2xvYmFsKGNvbnN0IGNoYXIqIG5hbWUsIGpzcnQ6OnZhbHVlIHZhbCkgewogIHZhbHVlIGdsb2JhbFRoaXMgPSBKU19HZXRHbG9iYWxPYmplY3QoY3R4KTsKICBKU19TZXRQcm9wZXJ0eVN0cihjdHgsIGdsb2JhbFRoaXMsIG5hbWUsIHZhbCk7Cn0KCmpzcnQ6OnZhbHVlCmpzcnQ6OmdldF9nbG9iYWwoY29uc3QgY2hhciogbmFtZSkgY29uc3QgewogIHZhbHVlIGdsb2JhbFRoaXMgPSBKU19HZXRHbG9iYWxPYmplY3QoY3R4KTsKICB2YWx1ZSByZXQgPSBKU19HZXRQcm9wZXJ0eVN0cihjdHgsIGdsb2JhbFRoaXMsIG5hbWUpOwogIHJldHVybiByZXQ7Cn0KCmJvb2wKanNydDo6aXNfcHJvbWlzZShjb25zdF92YWx1ZSB2YWwpIHsKICBqc3J0Ojp2YWx1ZSBwcm9taXNlID0gZ2V0X2dsb2JhbCgiUHJvbWlzZSIpOwogIGpzcnQ6OnZhbHVlIHByb21pc2VfcHJvdG8gPSBnZXRfcHJvcGVydHk8Y29uc3QgY2hhcio+KHByb21pc2UsICJwcm90b3R5cGUiKTsKICByZXR1cm4gaXNfb2JqZWN0KHZhbCkgJiYgKEpTX0lzSW5zdGFuY2VPZihjdHgsIHZhbCwgcHJvbWlzZSkgfHwgSlNfSXNJbnN0YW5jZU9mKGN0eCwgdmFsLCBwcm9taXNlX3Byb3RvKSk7Cn0KCmpzcnQ6OnZhbHVlCmpzcnQ6OmNhbGwoY29uc3QgY2hhciogbmFtZSwgc2l6ZV90IGFyZ2MsIHZhbHVlIGFyZ3ZbXSkgY29uc3QgewogIGNvbnN0X3ZhbHVlIGZ1bmMgPSBnZXRfZ2xvYmFsKG5hbWUpOwogIHJldHVybiBjYWxsKGZ1bmMsIGFyZ2MsIGFyZ3YpOwp9Cgpqc3J0Ojp2YWx1ZQpqc3J0OjpjYWxsKGNvbnN0X3ZhbHVlIGZ1bmMsIHN0ZDo6dmVjdG9yPHZhbHVlPiYgYXJncykgY29uc3QgewogIHJldHVybiBjYWxsKGZ1bmMsIGFyZ3Muc2l6ZSgpLCBjb25zdF9jYXN0PHZhbHVlKj4oYXJncy5kYXRhKCkpKTsKfQoKanNydDo6dmFsdWUKanNydDo6Y2FsbChjb25zdF92YWx1ZSBmdW5jLCBjb25zdF92YWx1ZSB0aGlzX2FyZywgc2l6ZV90IGFyZ2MsIHZhbHVlIGFyZ3ZbXSkgY29uc3QgewogIHZhbHVlIHJldCA9IEpTX0NhbGwoY3R4LCBmdW5jLCB0aGlzX2FyZywgYXJnYywgY29uc3RfY2FzdDxjb25zdF92YWx1ZSo+KGFyZ3YpKTsKICBpZihKU19Jc0V4Y2VwdGlvbihyZXQpKQogICAgZHVtcF9lcnJvcigpOwogIHJldHVybiByZXQ7Cn0KCmpzcnQ6OnZhbHVlCmpzcnQ6OmNhbGwoY29uc3RfdmFsdWUgZnVuYywgc2l6ZV90IGFyZ2MsIHZhbHVlIGFyZ3ZbXSkgY29uc3QgewogIHJldHVybiBjYWxsKGZ1bmMsIGdsb2JhbF9vYmplY3QoKSwgYXJnYywgYXJndik7Cn0KCmV4dGVybiAiQyIgY2hhcioKbm9ybWFsaXplX21vZHVsZShKU0NvbnRleHQqIGN0eCwgY29uc3QgY2hhciogbW9kdWxlX2Jhc2VfbmFtZSwgY29uc3QgY2hhciogbW9kdWxlX25hbWUsIHZvaWQqIG9wYXF1ZSkgewogIHVzaW5nIHN0ZDo6ZmlsZXN5c3RlbTo6ZXhpc3RzOwogIHVzaW5nIHN0ZDo6ZmlsZXN5c3RlbTo6cGF0aDsKICB1c2luZyBzdGQ6OmZpbGVzeXN0ZW06OndlYWtseV9jYW5vbmljYWw7CgogIGNoYXIqIG5hbWU7CiAganNydCoganMgPSBzdGF0aWNfY2FzdDxqc3J0Kj4ob3BhcXVlKTsKCiAgc3RkOjpzdHJpbmcgbW9kdWxlX2RpciA9IHN0ZDo6c3RyaW5nKENPTkZJR19QUkVGSVgpICsgIi9saWIvcXVpY2tqcyI7CgogIC8qc3RkOjpjZXJyIDw8ICJtb2R1bGVfYmFzZV9uYW1lOiAiIDw8IG1vZHVsZV9iYXNlX25hbWUgPDwgc3RkOjplbmRsOwogIHN0ZDo6Y2VyciA8PCAibW9kdWxlX25hbWU6ICIgPDwgbW9kdWxlX25hbWUgPDwgc3RkOjplbmRsOwogIHN0ZDo6Y2VyciA8PCAibW9kdWxlX2RpcjogIiA8PCBtb2R1bGVfZGlyIDw8IHN0ZDo6ZW5kbDsqLwoKICBpZihtb2R1bGVfbmFtZVswXSA9PSAnLicgJiYgbW9kdWxlX25hbWVbMV0gPT0gJy8nKQogICAgbW9kdWxlX25hbWUgKz0gMjsKCiAgY29uc3QgY2hhciogbW9kdWxlX2V4dCA9IHN0cnJjaHIobW9kdWxlX25hbWUsICcuJyk7CiAgLy8gc3RkOjpjZXJyIDw8ICJtb2R1bGVfZXh0OiAiIDw8IG1vZHVsZV9leHQgPDwgc3RkOjplbmRsOwoKICBzdGQ6OnN0cmluZyBtb2R1bGU7CiAgcGF0aCBtb2R1bGVfcGF0aDsKICBpZigobW9kdWxlX2V4dCAmJiAhc3RyY21wKCIuc28iLCBtb2R1bGVfZXh0KSkgfHwgbW9kdWxlX2V4dCA9PSBudWxscHRyKSB7CiAgICBtb2R1bGUgPSBtb2R1bGVfZGlyICsgIi8iICsgbW9kdWxlX25hbWU7CiAgICBtb2R1bGVfcGF0aCA9IHBhdGgobW9kdWxlKTsKICB9IGVsc2UgewogICAgbW9kdWxlID0gbW9kdWxlX2Jhc2VfbmFtZTsKICAgIG1vZHVsZV9wYXRoID0gcGF0aChtb2R1bGUpLnJlcGxhY2VfZmlsZW5hbWUocGF0aChtb2R1bGVfbmFtZSwgbW9kdWxlX25hbWUgKyBzdHJsZW4obW9kdWxlX25hbWUpKSk7CiAgfQoKICBzdGQ6OnN0cmluZyBtb2R1bGVfcGF0aHN0cjsKCiAgLy8gc3RkOjpjZXJyIDw8ICJtb2R1bGVfcGF0aDogIiA8PCBtb2R1bGVfcGF0aC5zdHJpbmcoKSA8PCBzdGQ6OmVuZGw7CgogIGJvb2wgcHJlc2VudCA9IGV4aXN0cyhtb2R1bGVfcGF0aCk7CiAgLyogIHN0ZDo6Y2VyciA8PCAiZXhpc3RzIG1vZHVsZV9wYXRoOiAiIDw8IHByZXNlbnQgPDwgc3RkOjplbmRsOyovCiAgbW9kdWxlX3BhdGhzdHIgPSBtb2R1bGVfcGF0aC5zdHJpbmcoKTsKCiAgaWYoIXByZXNlbnQpIHsKICAgIG1vZHVsZV9wYXRoID0gd2Vha2x5X2Nhbm9uaWNhbChtb2R1bGVfcGF0aCk7CiAgICBtb2R1bGVfcGF0aHN0ciA9IG1vZHVsZV9wYXRoLnN0cmluZygpOwoKICAgIHByZXNlbnQgPSBleGlzdHMobW9kdWxlX3BhdGgpOwogIH0KICAvKnN0ZDo6Y2VyciA8PCAibW9kdWxlX3BhdGhzdHI6ICIgPDwgbW9kdWxlX3BhdGhzdHIgPDwgc3RkOjplbmRsOwogIHN0ZDo6Y2VyciA8PCAibW9kdWxlX25hbWU6ICIgPDwgbW9kdWxlX25hbWUgPDwgc3RkOjplbmRsOwogIHN0ZDo6Y2VyciA8PCAicHJlc2VudDogIiA8PCBwcmVzZW50IDw8IHN0ZDo6ZW5kbDsqLwoKICBpZih0cnVlKSB7CgogICAgLyoKICAgIG1vZHVsZV9wYXRoc3RyLnJlc2l6ZShtb2R1bGVfcGF0aHN0ci5zaXplKCkrMSk7CiAgICAqLwogICAgY29uc3QgY2hhciogcyA9IG1vZHVsZV9wYXRoc3RyLmNfc3RyKCk7CiAgICBuYW1lID0gc3RhdGljX2Nhc3Q8Y2hhcio+KGpzX3N0cmR1cChjdHgsIHMpKTsKCiAgICByZXR1cm4gbmFtZTsKICB9CiAgcmV0dXJuIDA7Cn0KCnZvaWQKanNydDo6ZHVtcF9lcnJvcigpIGNvbnN0IHsKICBKU1ZhbHVlIGV4Y2VwdGlvbl92YWw7CgogIGV4Y2VwdGlvbl92YWwgPSBKU19HZXRFeGNlcHRpb24oY3R4KTsKICBkdW1wX2V4Y2VwdGlvbihleGNlcHRpb25fdmFsLCB0cnVlKTsKICBKU19GcmVlVmFsdWUoY3R4LCBleGNlcHRpb25fdmFsKTsKfQoKdm9pZApqc3J0OjpkdW1wX2V4Y2VwdGlvbihKU1ZhbHVlQ29uc3QgZXhjZXB0aW9uX3ZhbCwgYm9vbCBpc190aHJvdykgY29uc3QgewogIEpTVmFsdWUgdmFsOwogIGNvbnN0IGNoYXIqIHN0YWNrOwogIGJvb2wgaXNfZXJyb3I7CgogIGlzX2Vycm9yID0gSlNfSXNFcnJvcihjdHgsIGV4Y2VwdGlvbl92YWwpOwogIC8qICBpZihpc190aHJvdyAmJiAhaXNfZXJyb3IpCiAgICAgIHByaW50ZigiVGhyb3c6ICIpOyovCiAganNfcHJpbnQoY3R4LCBKU19OVUxMLCAxLCAoSlNWYWx1ZUNvbnN0KikmZXhjZXB0aW9uX3ZhbCk7CiAgaWYoaXNfZXJyb3IpIHsKICAgIHZhbCA9IEpTX0dldFByb3BlcnR5U3RyKGN0eCwgZXhjZXB0aW9uX3ZhbCwgInN0YWNrIik7CiAgICBpZighSlNfSXNVbmRlZmluZWQodmFsKSkgewogICAgICBzdGFjayA9IEpTX1RvQ1N0cmluZyhjdHgsIHZhbCk7CiAgICAgIHByaW50ZigiJXNcbiIsIHN0YWNrKTsKICAgICAgSlNfRnJlZUNTdHJpbmcoY3R4LCBzdGFjayk7CiAgICB9CiAgICBKU19GcmVlVmFsdWUoY3R4LCB2YWwpOwogIH0KfQoKanNydDo6YXRvbQpqc3J0OjpuZXdfYXRvbShjb25zdCBjaGFyKiBidWYsIHNpemVfdCBsZW4pIGNvbnN0IHsKICByZXR1cm4gSlNfTmV3QXRvbUxlbihjdHgsIGJ1ZiwgbGVuKTsKfQoKanNydDo6YXRvbQpqc3J0OjpuZXdfYXRvbShjb25zdCBjaGFyKiBzdHIpIGNvbnN0IHsKICByZXR1cm4gSlNfTmV3QXRvbShjdHgsIHN0cik7Cn0KCmpzcnQ6OmF0b20KanNydDo6bmV3X2F0b20odWludDMyX3QgbikgY29uc3QgewogIHJldHVybiBKU19OZXdBdG9tVUludDMyKGN0eCwgbik7Cn0KCnZvaWQKanNydDo6ZnJlZV9hdG9tKGNvbnN0IGpzcnQ6OmF0b20mIGEpIGNvbnN0IHsKICBKU19GcmVlQXRvbShjdHgsIGEpOwp9Cgpqc3J0Ojp2YWx1ZQpqc3J0OjphdG9tX3RvX3ZhbHVlKGNvbnN0IGpzcnQ6OmF0b20mIGEpIGNvbnN0IHsKICByZXR1cm4gSlNfQXRvbVRvVmFsdWUoY3R4LCBhKTsKfQoKanNydDo6dmFsdWUKanNydDo6YXRvbV90b19zdHJpbmcoY29uc3QganNydDo6YXRvbSYgYSkgY29uc3QgewogIHJldHVybiBKU19BdG9tVG9TdHJpbmcoY3R4LCBhKTsKfQoKY29uc3QgY2hhcioKanNydDo6YXRvbV90b19jc3RyaW5nKGNvbnN0IGpzcnQ6OmF0b20mIGEpIGNvbnN0IHsKICByZXR1cm4gSlNfQXRvbVRvQ1N0cmluZyhjdHgsIGEpOwp9Cgpqc3J0OjphdG9tCmpzcnQ6OnZhbHVlX3RvX2F0b20oY29uc3QgY29uc3RfdmFsdWUmIHYpIGNvbnN0IHsKICByZXR1cm4gSlNfVmFsdWVUb0F0b20oY3R4LCB2KTsKfQoKanNydDo6dmFsdWUKanNydDo6Z2V0X3N5bWJvbChjb25zdCBjaGFyKiBuYW1lKSBjb25zdCB7CiAgdmFsdWUgY3RvciA9IGdldF9nbG9iYWwoIlN5bWJvbCIpOwogIGlmKGhhc19wcm9wZXJ0eShjdG9yLCBuYW1lKSkKICAgIHJldHVybiBnZXRfcHJvcGVydHk8Y29uc3QgY2hhcio+KGN0b3IsIG5hbWUpOwoKICBjb25zdF92YWx1ZSBmb3JfZm4gPSBnZXRfcHJvcGVydHk8Y29uc3QgY2hhcio+KGN0b3IsICJmb3IiKTsKICB2YWx1ZSBhcmcgPSBuZXdfc3RyaW5nKG5hbWUpOwogIHJldHVybiBjYWxsKGZvcl9mbiwgY3RvciwgMSwgJmFyZyk7Cn0KCmpzcnQ6OnZhbHVlCmpzcnQ6OmdldF9wcm9wZXJ0eV9zeW1ib2woY29uc3RfdmFsdWUgb2JqLCBjb25zdCBjaGFyKiBzeW1ib2wpIHsKICB2YWx1ZSBzeW0gPSBnZXRfc3ltYm9sKHN5bWJvbCk7CiAgdmFsdWUgcmV0ID0gZ2V0X3Byb3BlcnR5PHZhbHVlPihvYmosIHN5bSk7CiAgZnJlZV92YWx1ZShzeW0pOwogIHJldHVybiByZXQ7Cn0KCmpzcnQ6OnZhbHVlCmpzcnQ6OmNhbGxfaXRlcmF0b3IoY29uc3RfdmFsdWUgb2JqLCBjb25zdCBjaGFyKiBzeW1ib2wpIHsKICB2YWx1ZSBmbiA9IGdldF9pdGVyYXRvcihvYmosIHN5bWJvbCk7CiAgdmFsdWUgcmV0ID0gX3VuZGVmaW5lZDsKCiAgaWYoaXNfZnVuY3Rpb24oZm4pKQogICAgcmV0ID0gY2FsbChmbiwgb2JqLCAwLCBudWxscHRyKTsKCiAgZnJlZV92YWx1ZShmbik7CgogIHJldHVybiByZXQ7Cn0KCmpzcnQ6OnZhbHVlCmpzcnQ6OmNhbGxfaXRlcmF0b3JfbmV4dChjb25zdF92YWx1ZSBvYmosIGNvbnN0IGNoYXIqIHN5bWJvbCkgewogIHZhbHVlIGl0ZXIgPSBnZXRfaXRlcmF0b3Iob2JqLCBzeW1ib2wpOwogIHZhbHVlIHJldCA9IF91bmRlZmluZWQsIG5leHQgPSBfdW5kZWZpbmVkOwoKICBpZihpc19vYmplY3QoaXRlcikgJiYgIWlzX251bGwoaXRlcikpIHsKICAgIG5leHQgPSBnZXRfcHJvcGVydHk8Y29uc3QgY2hhcio+KGl0ZXIsICJuZXh0Iik7CgogICAgaWYoaXNfZnVuY3Rpb24obmV4dCkgJiYgaGFzX3Byb3BlcnR5KG5leHQsICJiaW5kIikpIHsKICAgICAgcmV0ID0gY2FsbChnZXRfcHJvcGVydHk8Y29uc3QgY2hhcio+KG5leHQsICJiaW5kIiksIGl0ZXIsIDAsIG51bGxwdHIpOwogICAgICAvLyAgIGZyZWVfdmFsdWUobmV4dCk7CiAgICB9CiAgfQogIC8vIGZyZWVfdmFsdWUoaXRlcik7CiAgcmV0dXJuIHJldDsKfQoKaW50CmpzcnQ6OnRhZyh2YWx1ZSB2YWwpIGNvbnN0IHsKICByZXR1cm4gSlNfVkFMVUVfR0VUX1RBRyh2YWwpOwp9Cgp2b2lkKgpqc3J0OjpvYmooY29uc3RfdmFsdWUgdmFsKSBjb25zdCB7CiAgcmV0dXJuIEpTX1ZBTFVFX0dFVF9PQkoodmFsKTsKfQoAAAAAAAAAAEM3AAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA/wUAAAAAAAD/BQAAAAAAAAAAAAAAAPC/"
				],
				[
					38,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAABDNwAAI2luY2x1ZGUgImpzLmhwcCIKI2luY2x1ZGUgImpzYmluZGluZ3MuaHBwIgojaW5jbHVkZSAidXRpbC5ocHAiCiNpbmNsdWRlIDxjc3RyaW5nPgojaW5jbHVkZSA8aW9zdHJlYW0+CiNpbmNsdWRlIDxjc3RyaW5nPgojaW5jbHVkZSA8ZmlsZXN5c3RlbT4KI2luY2x1ZGUgPGNhc3NlcnQ+CiNpbmNsdWRlIDxyZWdleD4KCmV4dGVybiAiQyIgewojaW5jbHVkZSAicXVpY2tqcy9xdWlja2pzLmgiCiNpbmNsdWRlICJxdWlja2pzL3F1aWNranMtbGliYy5oIgojaW5jbHVkZSAicXVpY2tqcy9jdXRpbHMuaCIKCi8vIGpzcnQganM7CgpjaGFyKiBub3JtYWxpemVfbW9kdWxlKEpTQ29udGV4dCogY3R4LCBjb25zdCBjaGFyKiBtb2R1bGVfYmFzZV9uYW1lLCBjb25zdCBjaGFyKiBtb2R1bGVfbmFtZSwgdm9pZCogb3BhcXVlKTsKCnN0cnVjdCBKU1N0cmluZyB7CiAgSlNSZWZDb3VudEhlYWRlciBoZWFkZXI7IC8qIG11c3QgY29tZSBmaXJzdCwgMzItYml0ICovCiAgdWludDMyX3QgbGVuIDogMzE7CiAgdWludDhfdCBpc193aWRlX2NoYXIgOiAxOyAvKiAwID0gOCBiaXRzLCAxID0gMTYgYml0cyBjaGFyYWN0ZXJzICovCiAgLyogZm9yIEpTX0FUT01fVFlQRV9TWU1CT0w6IGhhc2ggPSAwLCBhdG9tX3R5cGUgPSAzLAogICAgIGZvciBKU19BVE9NX1RZUEVfUFJJVkFURTogaGFzaCA9IDEsIGF0b21fdHlwZSA9IDMKICAgICBYWFg6IGNvdWxkIGNoYW5nZSBlbmNvZGluZyB0byBoYXZlIG9uZSBtb3JlIGJpdCBpbiBoYXNoICovCiAgdWludDMyX3QgaGFzaCA6IDMwOwogIHVpbnQ4X3QgYXRvbV90eXBlIDogMjsgLyogIT0gMCBpZiBhdG9tLCBKU19BVE9NX1RZUEVfeCAqLwogIHVpbnQzMl90IGhhc2hfbmV4dDsgICAgLyogYXRvbV9pbmRleCBmb3IgSlNfQVRPTV9UWVBFX1NZTUJPTCAqLwojaWZkZWYgRFVNUF9MRUFLUwogIHN0cnVjdCBsaXN0X2hlYWQgbGluazsgLyogc3RyaW5nIGxpc3QgKi8KI2VuZGlmCiAgdW5pb24gewogICAgdWludDhfdCBzdHI4WzBdOyAvKiA4IGJpdCBzdHJpbmdzIHdpbGwgZ2V0IGFuIGV4dHJhIG51bGwgdGVybWluYXRvciAqLwogICAgdWludDE2X3Qgc3RyMTZbMF07CiAgfSB1Owp9OwoKdHlwZWRlZiBzdHJ1Y3QgSlNTdHJpbmcgSlNBdG9tU3RydWN0Owp9OwoKc3RhdGljIEpTVmFsdWUKanNfcHJpbnQoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCogYXJndikgewogIGludCBpOwogIGNvbnN0IGNoYXIqIHN0cjsKCiAgZm9yKGkgPSAwOyBpIDwgYXJnYzsgaSsrKSB7CiAgICBpZihpICE9IDApCiAgICAgIHB1dGNoYXIoJyAnKTsKICAgIHN0ciA9IEpTX1RvQ1N0cmluZyhjdHgsIGFyZ3ZbaV0pOwogICAgaWYoIXN0cikKICAgICAgcmV0dXJuIEpTX0VYQ0VQVElPTjsKICAgIGZwdXRzKHN0ciwgc3Rkb3V0KTsKICAgIEpTX0ZyZWVDU3RyaW5nKGN0eCwgc3RyKTsKICB9CiAgcHV0Y2hhcignXG4nKTsKICByZXR1cm4gSlNfVU5ERUZJTkVEOwp9CgpzdHJ1Y3QgSlNQcm9wZXJ0eTsKc3RydWN0IEpTU2hhcGVQcm9wZXJ0eTsKCmJvb2wKanNydDo6aW5pdChpbnQgYXJnYywgY2hhciogYXJndltdKSB7CiAgaW50IGxvYWRfc3RkID0gMDsKCiAgaWYoY3R4ID09IG51bGxwdHIpCiAgICBpZighY3JlYXRlKCkpCiAgICAgIHJldHVybiBmYWxzZTsKCiAgLy8gSlNfQWRkSW50cmluc2ljQmFzZU9iamVjdHMoY3R4KTsKICBqc19zdGRfYWRkX2hlbHBlcnMoY3R4LCBhcmdjLCBhcmd2KTsKCiAgLyogc3lzdGVtIG1vZHVsZXMgKi8KICBqc19pbml0X21vZHVsZV9zdGQoY3R4LCAic3RkIik7CiAganNfaW5pdF9tb2R1bGVfb3MoY3R4LCAib3MiKTsKCiAgLyogbWFrZSAnc3RkJyBhbmQgJ29zJyB2aXNpYmxlIHRvIG5vbiBtb2R1bGUgY29kZSAqLwogIGlmKGxvYWRfc3RkKSB7CiAgICBjb25zdCBjaGFyKiBzdHIgPSAiaW1wb3J0ICogYXMgc3RkIGZyb20gJ3N0ZCc7XG4iCiAgICAgICAgICAgICAgICAgICAgICAiaW1wb3J0ICogYXMgb3MgZnJvbSAnb3MnO1xuIgogICAgICAgICAgICAgICAgICAgICAgImdsb2JhbFRoaXMuc3RkID0gc3RkO1xuIgogICAgICAgICAgICAgICAgICAgICAgImdsb2JhbFRoaXMub3MgPSBvcztcbiI7CiAgICBldmFsX2J1ZihzdHIsIHN0cmxlbihzdHIpLCAiPGlucHV0PiIsIEpTX0VWQUxfVFlQRV9NT0RVTEUpOwogIH0KCiAgLyogbG9hZGVyIGZvciBFUzYgbW9kdWxlcyAqLwogIEpTX1NldE1vZHVsZUxvYWRlckZ1bmMoZ2V0X3J1bnRpbWUoKSwgJm5vcm1hbGl6ZV9tb2R1bGUsIGpzX21vZHVsZV9sb2FkZXIsIHRoaXMpOwoKICAvLyBnbG9iYWwuZ2V0KCk7CgogIC8qICB0aGlzLT5fdW5kZWZpbmVkID0gZ2V0X3VuZGVmaW5lZCgpOwogICAgdGhpcy0+X251bGwgPSBnZXRfbnVsbCgpOwogICAgdGhpcy0+X3RydWUgPSBnZXRfdHJ1ZSgpOwogICAgdGhpcy0+X2ZhbHNlID0gZ2V0X2ZhbHNlKCk7Ki8KCiAgcmV0dXJuIGN0eCAhPSBudWxscHRyOwp9Cgpib29sCmpzcnQ6OmNyZWF0ZShKU0NvbnRleHQqIF9jdHgpIHsKICBhc3NlcnQoY3R4ID09IG51bGxwdHIpOwogIGlmKF9jdHgpIHsKICAgIC8vIHJ0ID0gSlNfR2V0UnVudGltZShjdHggPSBfY3R4KTsKICB9IGVsc2UgewogICAgSlNSdW50aW1lKiBydDsKICAgIGlmKChydCA9IEpTX05ld1J1bnRpbWUoKSkpIHsKICAgICAganNfc3RkX2luaXRfaGFuZGxlcnMocnQpOwoKICAgICAgY3R4ID0gSlNfTmV3Q29udGV4dChydCk7CiAgICB9CiAgfQogIHJldHVybiBjdHggIT0gbnVsbHB0cjsKfQoKLypqc3J0Ojp2YWx1ZSoKanNydDo6Z2V0X2Z1bmN0aW9uKGNvbnN0IGNoYXIqIG5hbWUpIHsKICBhdXRvIGl0ID0gZnVuY21hcC5maW5kKG5hbWUpOwogIGlmKGl0ICE9IGZ1bmNtYXAuZW5kKCkpIHsKICAgIHN0ZDo6cGFpcjxKU0NGdW5jdGlvbiosIHZhbHVlPiYgdmFsID0gaXQtPnNlY29uZDsKICAgIHJldHVybiAmdmFsLnNlY29uZDsKICB9CiAgcmV0dXJuIG51bGxwdHI7Cn0qLwoKc3RkOjpzdHJpbmcKanNydDo6dG9fc3RyKGNvbnN0X3ZhbHVlIHZhbCkgewogIHN0ZDo6c3RyaW5nIHJldDsKICBpZihKU19Jc0Z1bmN0aW9uKGN0eCwgdmFsKSkKICAgIHJldCA9ICJGdW5jdGlvbiI7CiAgZWxzZSBpZihKU19Jc051bWJlcih2YWwpKQogICAgcmV0ID0gIk51bWJlciI7CiAgZWxzZSBpZihKU19Jc0Jvb2wodmFsKSkKICAgIHJldCA9ICJCb29sZWFuIjsKICBlbHNlIGlmKEpTX0lzU3RyaW5nKHZhbCkpCiAgICByZXQgPSAiU3RyaW5nIjsKICBlbHNlIGlmKGpzX2lzX2FycmF5KGN0eCwgdmFsKSkKICAgIHJldCA9ICJBcnJheSI7CiAgZWxzZSBpZihKU19Jc09iamVjdCh2YWwpKQogICAgcmV0ID0gIk9iamVjdCI7CiAgZWxzZSBpZihKU19Jc1N5bWJvbCh2YWwpKQogICAgcmV0ID0gIlN5bWJvbCI7CiAgZWxzZSBpZihKU19Jc0V4Y2VwdGlvbih2YWwpKQogICAgcmV0ID0gIkV4Y2VwdGlvbiI7CiAgZWxzZSBpZihKU19Jc1VuaW5pdGlhbGl6ZWQodmFsKSkKICAgIHJldCA9ICJVbmluaXRpYWxpemVkIjsKICBlbHNlIGlmKEpTX0lzVW5kZWZpbmVkKHZhbCkpCiAgICByZXQgPSAidW5kZWZpbmVkIjsKCiAgcmV0dXJuIHJldDsKfQoKanNydDo6Y29uc3RfdmFsdWUKanNydDo6cHJvdG90eXBlKGNvbnN0X3ZhbHVlIG9iaikgY29uc3QgewogIHJldHVybiBKU19HZXRQcm90b3R5cGUoY3R4LCBvYmopOwp9CgpzdGQ6OnZlY3Rvcjxjb25zdCBjaGFyKj4KanNydDo6cHJvcGVydHlfbmFtZXMoY29uc3RfdmFsdWUgb2JqLCBib29sIGVudW1fb25seSwgYm9vbCByZWN1cnNpdmUpIGNvbnN0IHsKICBzdGQ6OnZlY3Rvcjxjb25zdCBjaGFyKj4gcmV0OwogIHByb3BlcnR5X25hbWVzKG9iaiwgcmV0LCBlbnVtX29ubHkpOwogIHJldHVybiByZXQ7Cn0KCnZvaWQKanNydDo6cHJvcGVydHlfbmFtZXMoY29uc3RfdmFsdWUgb2JqLCBzdGQ6OnZlY3Rvcjxjb25zdCBjaGFyKj4mIG91dCwgYm9vbCBlbnVtX29ubHksIGJvb2wgcmVjdXJzaXZlKSBjb25zdCB7CiAgSlNQcm9wZXJ0eUVudW0qIHByb3BzOwogIHVpbnQzMl90IG5wcm9wczsKICB3aGlsZShKU19Jc09iamVjdChvYmopKSB7CiAgICBwcm9wcyA9IG51bGxwdHI7CiAgICBucHJvcHMgPSAwOwogICAgSlNfR2V0T3duUHJvcGVydHlOYW1lcygKICAgICAgICBjdHgsICZwcm9wcywgJm5wcm9wcywgb2JqLCBKU19HUE5fU1RSSU5HX01BU0sgfCBKU19HUE5fU1lNQk9MX01BU0sgfCAoZW51bV9vbmx5ID8gSlNfR1BOX0VOVU1fT05MWSA6IDApKTsKICAgIGZvcih1aW50MzJfdCBpID0gMDsgaSA8IG5wcm9wczsgaSsrKSB7CiAgICAgIGNvbnN0IGNoYXIqIHMgPSBKU19BdG9tVG9DU3RyaW5nKGN0eCwgcHJvcHNbaV0uYXRvbSk7CiAgICAgIG91dC5wdXNoX2JhY2socyk7CiAgICB9CiAgICBpZighcmVjdXJzaXZlKQogICAgICBicmVhazsKCiAgICBvYmogPSBwcm90b3R5cGUob2JqKTsKICB9Cn0KCmJvb2wKanNydDo6aXNfcG9pbnQoY29uc3RfdmFsdWUgdmFsKSBjb25zdCB7CiAgaWYoaXNfYXJyYXkodmFsKSkgewogICAgaW50MzJfdCBsZW5ndGggPSAtMTsKICAgIGdldF9udW1iZXIoZ2V0X3Byb3BlcnR5PGNvbnN0IGNoYXIqPih2YWwsICJsZW5ndGgiKSwgbGVuZ3RoKTsKICAgIGlmKGxlbmd0aCA9PSAyKQogICAgICByZXR1cm4gdHJ1ZTsKICB9IGVsc2UgaWYoaXNfb2JqZWN0KHZhbCkpIHsKICAgIEpTVmFsdWUgeCwgeTsKICAgIHggPSBnZXRfcHJvcGVydHk8Y29uc3QgY2hhcio+KHZhbCwgIngiKTsKICAgIHkgPSBnZXRfcHJvcGVydHk8Y29uc3QgY2hhcio+KHZhbCwgInkiKTsKICAgIGlmKGlzX251bWJlcih4KSAmJiBpc19udW1iZXIoeSkpCiAgICAgIHJldHVybiB0cnVlOwogIH0KCiAgcmV0dXJuIGZhbHNlOwp9Cgpib29sCmpzcnQ6OmlzX3JlY3QoY29uc3RfdmFsdWUgdmFsKSBjb25zdCB7CiAgaWYoaXNfb2JqZWN0KHZhbCkpIHsKICAgIEpTVmFsdWUgeCwgeSwgdywgaDsKICAgIHggPSBnZXRfcHJvcGVydHk8Y29uc3QgY2hhcio+KHZhbCwgIngiKTsKICAgIHkgPSBnZXRfcHJvcGVydHk8Y29uc3QgY2hhcio+KHZhbCwgInkiKTsKICAgIHcgPSBnZXRfcHJvcGVydHk8Y29uc3QgY2hhcio+KHZhbCwgIndpZHRoIik7CiAgICBoID0gZ2V0X3Byb3BlcnR5PGNvbnN0IGNoYXIqPih2YWwsICJoZWlnaHQiKTsKICAgIGlmKGlzX251bWJlcih4KSAmJiBpc19udW1iZXIoeSkpCiAgICAgIGlmKGlzX251bWJlcih3KSAmJiBpc19udW1iZXIoaCkpCiAgICAgICAgcmV0dXJuIHRydWU7CiAgfQoKICByZXR1cm4gZmFsc2U7Cn0KCmJvb2wKanNydDo6aXNfY29sb3IoY29uc3RfdmFsdWUgdmFsKSBjb25zdCB7CiAgSlNWYWx1ZSBiID0gX3VuZGVmaW5lZCwgZyA9IF91bmRlZmluZWQsIHIgPSBfdW5kZWZpbmVkLCBhID0gX3VuZGVmaW5lZDsKCiAgaWYoaXNfYXJyYXlfbGlrZSh2YWwpKSB7CiAgICB1aW50MzJfdCBsZW5ndGg7CiAgICBnZXRfbnVtYmVyKGdldF9wcm9wZXJ0eTxjb25zdCBjaGFyKj4odmFsLCAibGVuZ3RoIiksIGxlbmd0aCk7CgogICAgaWYobGVuZ3RoID09IDMgfHwgbGVuZ3RoID09IDQpIHsKICAgICAgYiA9IGdldF9wcm9wZXJ0eTx1aW50MzJfdD4odmFsLCAwKTsKICAgICAgZyA9IGdldF9wcm9wZXJ0eTx1aW50MzJfdD4odmFsLCAxKTsKICAgICAgciA9IGdldF9wcm9wZXJ0eTx1aW50MzJfdD4odmFsLCAyKTsKICAgICAgYSA9IGxlbmd0aCA+IDMgPyBnZXRfcHJvcGVydHk8dWludDMyX3Q+KHZhbCwgMykgOiBjb25zdF9jYXN0PGpzcnQqPih0aGlzKS0+Y3JlYXRlPGludDMyX3Q+KDI1NSk7CiAgICB9IGVsc2UgewogICAgICByZXR1cm4gZmFsc2U7CiAgICB9CiAgfSBlbHNlIGlmKGlzX29iamVjdCh2YWwpKSB7CiAgICBiID0gZ2V0X3Byb3BlcnR5PGNvbnN0IGNoYXIqPih2YWwsICJiIik7CiAgICBnID0gZ2V0X3Byb3BlcnR5PGNvbnN0IGNoYXIqPih2YWwsICJnIik7CiAgICByID0gZ2V0X3Byb3BlcnR5PGNvbnN0IGNoYXIqPih2YWwsICJyIik7CiAgICBhID0gZ2V0X3Byb3BlcnR5PGNvbnN0IGNoYXIqPih2YWwsICJhIik7CiAgfQoKICBpZihpc19udW1iZXIoYikgJiYgaXNfbnVtYmVyKGcpICYmIGlzX251bWJlcihyKSAmJiBpc19udW1iZXIoYSkpCiAgICByZXR1cm4gdHJ1ZTsKICByZXR1cm4gZmFsc2U7Cn0KCi8qCmpzcnQ6Omdsb2JhbDo6Z2xvYmFsKGpzcnQmIHJ0KSA6IHZhbChKU19VTkRFRklORUQpLCBqcyhydCkge30KCmJvb2wKanNydDo6Z2xvYmFsOjpnZXQoKSBjb25zdCB7CiAgaWYoSlNfSXNVbmRlZmluZWQoKGNvbnN0X3ZhbHVlKXZhbCkpIHsKICAgIGlmKGpzLmN0eCkgewogICAgICB2YWx1ZSBnbG9iYWwgPSBKU19HZXRHbG9iYWxPYmplY3QoanMuY3R4KTsKCiAgICAgIEpTX1NldFByb3BlcnR5U3RyKGpzLmN0eCwgZ2xvYmFsLCAiZ2xvYmFsIiwgSlNfRHVwVmFsdWUoanMuY3R4LCBnbG9iYWwpKTsKICAgICAgSlNfRnJlZVZhbHVlKGpzLmN0eCwgZ2xvYmFsKTsKICAgIH0KCiAgICBpZihqcy5jdHgpIHsKICAgICAgdmFsID0gSlNfR2V0R2xvYmFsT2JqZWN0KGpzLmN0eCk7CiAgICAgIHJldHVybiB0cnVlOwogICAgfQogIH0KICByZXR1cm4gZmFsc2U7Cn0KCmpzcnQ6Omdsb2JhbDo6Z2xvYmFsKGdsb2JhbCYmIG8pIG5vZXhjZXB0IDogdmFsKHN0ZDo6bW92ZShvLnZhbCkpLCBqcyhvLmpzKSB7fQoKanNydDo6Z2xvYmFsOjp+Z2xvYmFsKCkgewogIGlmKGpzLmN0eCkKICAgIEpTX0ZyZWVWYWx1ZShqcy5jdHgsIHZhbCk7Cn0qLwoKanNydDo6dmFsdWUKanNydDo6Z2V0X3VuZGVmaW5lZCgpIGNvbnN0IHsKICByZXR1cm4gSlNfVU5ERUZJTkVEOwp9Cgpqc3J0Ojp2YWx1ZQpqc3J0OjpnZXRfbnVsbCgpIGNvbnN0IHsKICByZXR1cm4gSlNfTlVMTDsKfQoKanNydDo6dmFsdWUKanNydDo6Z2V0X3RydWUoKSBjb25zdCB7CiAgcmV0dXJuIEpTX1RSVUU7Cn0KCmpzcnQ6OnZhbHVlCmpzcnQ6OmdldF9mYWxzZSgpIGNvbnN0IHsKICByZXR1cm4gSlNfRkFMU0U7Cn0KCmpzcnQ6On5qc3J0KCkgewogIGlmKGN0eCkKICAgIEpTX0ZyZWVDb250ZXh0KGN0eCk7CiAgY3R4ID0gbnVsbHB0cjsKfQoKSlNWYWx1ZQpqc3J0OjpldmFsX2J1Zihjb25zdCBjaGFyKiBidWYsIGludCBidWZfbGVuLCBjb25zdCBjaGFyKiBmaWxlbmFtZSwgaW50IGV2YWxfZmxhZ3MpIHsKICBqc3J0Ojp2YWx1ZSB2YWw7CiAgaWYoKGV2YWxfZmxhZ3MgJiBKU19FVkFMX1RZUEVfTUFTSykgPT0gSlNfRVZBTF9UWVBFX01PRFVMRSkgewogICAgdmFsID0gSlNfRXZhbChjdHgsIGJ1ZiwgYnVmX2xlbiwgZmlsZW5hbWUsIGV2YWxfZmxhZ3MgfCBKU19FVkFMX0ZMQUdfQ09NUElMRV9PTkxZKTsKICAgIGlmKCFKU19Jc0V4Y2VwdGlvbih2YWwpKSB7CiAgICAgIGpzX21vZHVsZV9zZXRfaW1wb3J0X21ldGEoY3R4LCB2YWwsIFRSVUUsIFRSVUUpOwogICAgICB2YWwgPSBKU19FdmFsRnVuY3Rpb24oY3R4LCB2YWwpOwogICAgfQogIH0gZWxzZSB7CiAgICB2YWwgPSBKU19FdmFsKGN0eCwgYnVmLCBidWZfbGVuLCBmaWxlbmFtZSwgZXZhbF9mbGFncyk7CiAgfQogIGlmKEpTX0lzRXhjZXB0aW9uKHZhbCkpIHsKICAgIGpzX3N0ZF9kdW1wX2Vycm9yKGN0eCk7CiAgfSBlbHNlIHsKICB9CiAgcmV0dXJuIHZhbDsKfQoKanNydDo6dmFsdWUKanNydDo6ZXZhbF9maWxlKGNvbnN0IGNoYXIqIGZpbGVuYW1lLCBpbnQgbW9kdWxlKSB7CiAgY2hhciogYnVmOwogIGludCBldmFsX2ZsYWdzOwogIGpzcnQ6OnZhbHVlIHJldDsKICBzaXplX3QgYnVmX2xlbjsKICBidWYgPSByZWludGVycHJldF9jYXN0PGNoYXIqPihqc19sb2FkX2ZpbGUoY3R4LCAmYnVmX2xlbiwgZmlsZW5hbWUpKTsKICBpZighYnVmKSB7CiAgICBwZXJyb3IoZmlsZW5hbWUpOwogICAgZXhpdCgxKTsKICB9CiAgaWYobW9kdWxlIDwgMCkKICAgIG1vZHVsZSA9IChzdHJfZW5kKGZpbGVuYW1lLCAiLm1qcyIpIHx8IEpTX0RldGVjdE1vZHVsZSgoY29uc3QgY2hhciopYnVmLCBidWZfbGVuKSk7CgogIGV2YWxfZmxhZ3MgPSBtb2R1bGUgPyBKU19FVkFMX1RZUEVfTU9EVUxFIDogSlNfRVZBTF9UWVBFX0dMT0JBTDsKCiAgLyogIHN0ZDo6c3RyaW5nIHNjcmlwdChidWYsIGJ1Zl9sZW4pOwogICAgc3RkOjpjZXJyIDw8ICJTY3JpcHQ6ICIgPDwgc2NyaXB0IDw8IHN0ZDo6ZW5kbDsKICovCiAgcmV0ID0gZXZhbF9idWYoYnVmLCBidWZfbGVuLCBmaWxlbmFtZSwgZXZhbF9mbGFncyk7CiAganNfZnJlZShjdHgsIGJ1Zik7CiAgcmV0dXJuIHJldDsKfQoKdm9pZApqc3J0OjpzZXRfZ2xvYmFsKGNvbnN0IGNoYXIqIG5hbWUsIGpzcnQ6OnZhbHVlIHZhbCkgewogIHZhbHVlIGdsb2JhbFRoaXMgPSBKU19HZXRHbG9iYWxPYmplY3QoY3R4KTsKICBKU19TZXRQcm9wZXJ0eVN0cihjdHgsIGdsb2JhbFRoaXMsIG5hbWUsIHZhbCk7Cn0KCmpzcnQ6OnZhbHVlCmpzcnQ6OmdldF9nbG9iYWwoY29uc3QgY2hhciogbmFtZSkgY29uc3QgewogIHZhbHVlIGdsb2JhbFRoaXMgPSBKU19HZXRHbG9iYWxPYmplY3QoY3R4KTsKICB2YWx1ZSByZXQgPSBKU19HZXRQcm9wZXJ0eVN0cihjdHgsIGdsb2JhbFRoaXMsIG5hbWUpOwogIHJldHVybiByZXQ7Cn0KCmJvb2wKanNydDo6aXNfcHJvbWlzZShjb25zdF92YWx1ZSB2YWwpIHsKICBqc3J0Ojp2YWx1ZSBwcm9taXNlID0gZ2V0X2dsb2JhbCgiUHJvbWlzZSIpOwogIGpzcnQ6OnZhbHVlIHByb21pc2VfcHJvdG8gPSBnZXRfcHJvcGVydHk8Y29uc3QgY2hhcio+KHByb21pc2UsICJwcm90b3R5cGUiKTsKICByZXR1cm4gaXNfb2JqZWN0KHZhbCkgJiYgKEpTX0lzSW5zdGFuY2VPZihjdHgsIHZhbCwgcHJvbWlzZSkgfHwgSlNfSXNJbnN0YW5jZU9mKGN0eCwgdmFsLCBwcm9taXNlX3Byb3RvKSk7Cn0KCmpzcnQ6OnZhbHVlCmpzcnQ6OmNhbGwoY29uc3QgY2hhciogbmFtZSwgc2l6ZV90IGFyZ2MsIHZhbHVlIGFyZ3ZbXSkgY29uc3QgewogIGNvbnN0X3ZhbHVlIGZ1bmMgPSBnZXRfZ2xvYmFsKG5hbWUpOwogIHJldHVybiBjYWxsKGZ1bmMsIGFyZ2MsIGFyZ3YpOwp9Cgpqc3J0Ojp2YWx1ZQpqc3J0OjpjYWxsKGNvbnN0X3ZhbHVlIGZ1bmMsIHN0ZDo6dmVjdG9yPHZhbHVlPiYgYXJncykgY29uc3QgewogIHJldHVybiBjYWxsKGZ1bmMsIGFyZ3Muc2l6ZSgpLCBjb25zdF9jYXN0PHZhbHVlKj4oYXJncy5kYXRhKCkpKTsKfQoKanNydDo6dmFsdWUKanNydDo6Y2FsbChjb25zdF92YWx1ZSBmdW5jLCBjb25zdF92YWx1ZSB0aGlzX2FyZywgc2l6ZV90IGFyZ2MsIHZhbHVlIGFyZ3ZbXSkgY29uc3QgewogIHZhbHVlIHJldCA9IEpTX0NhbGwoY3R4LCBmdW5jLCB0aGlzX2FyZywgYXJnYywgY29uc3RfY2FzdDxjb25zdF92YWx1ZSo+KGFyZ3YpKTsKICBpZihKU19Jc0V4Y2VwdGlvbihyZXQpKQogICAgZHVtcF9lcnJvcigpOwogIHJldHVybiByZXQ7Cn0KCmpzcnQ6OnZhbHVlCmpzcnQ6OmNhbGwoY29uc3RfdmFsdWUgZnVuYywgc2l6ZV90IGFyZ2MsIHZhbHVlIGFyZ3ZbXSkgY29uc3QgewogIHJldHVybiBjYWxsKGZ1bmMsIGdsb2JhbF9vYmplY3QoKSwgYXJnYywgYXJndik7Cn0KCmV4dGVybiAiQyIgY2hhcioKbm9ybWFsaXplX21vZHVsZShKU0NvbnRleHQqIGN0eCwgY29uc3QgY2hhciogbW9kdWxlX2Jhc2VfbmFtZSwgY29uc3QgY2hhciogbW9kdWxlX25hbWUsIHZvaWQqIG9wYXF1ZSkgewogIHVzaW5nIHN0ZDo6ZmlsZXN5c3RlbTo6ZXhpc3RzOwogIHVzaW5nIHN0ZDo6ZmlsZXN5c3RlbTo6cGF0aDsKICB1c2luZyBzdGQ6OmZpbGVzeXN0ZW06OndlYWtseV9jYW5vbmljYWw7CgogIGNoYXIqIG5hbWU7CiAganNydCoganMgPSBzdGF0aWNfY2FzdDxqc3J0Kj4ob3BhcXVlKTsKCiAgc3RkOjpzdHJpbmcgbW9kdWxlX2RpciA9IHN0ZDo6c3RyaW5nKENPTkZJR19QUkVGSVgpICsgIi9saWIvcXVpY2tqcyI7CgogIC8qc3RkOjpjZXJyIDw8ICJtb2R1bGVfYmFzZV9uYW1lOiAiIDw8IG1vZHVsZV9iYXNlX25hbWUgPDwgc3RkOjplbmRsOwogIHN0ZDo6Y2VyciA8PCAibW9kdWxlX25hbWU6ICIgPDwgbW9kdWxlX25hbWUgPDwgc3RkOjplbmRsOwogIHN0ZDo6Y2VyciA8PCAibW9kdWxlX2RpcjogIiA8PCBtb2R1bGVfZGlyIDw8IHN0ZDo6ZW5kbDsqLwoKICBpZihtb2R1bGVfbmFtZVswXSA9PSAnLicgJiYgbW9kdWxlX25hbWVbMV0gPT0gJy8nKQogICAgbW9kdWxlX25hbWUgKz0gMjsKCiAgY29uc3QgY2hhciogbW9kdWxlX2V4dCA9IHN0cnJjaHIobW9kdWxlX25hbWUsICcuJyk7CiAgLy8gc3RkOjpjZXJyIDw8ICJtb2R1bGVfZXh0OiAiIDw8IG1vZHVsZV9leHQgPDwgc3RkOjplbmRsOwoKICBzdGQ6OnN0cmluZyBtb2R1bGU7CiAgcGF0aCBtb2R1bGVfcGF0aDsKICBpZigobW9kdWxlX2V4dCAmJiAhc3RyY21wKCIuc28iLCBtb2R1bGVfZXh0KSkgfHwgbW9kdWxlX2V4dCA9PSBudWxscHRyKSB7CiAgICBtb2R1bGUgPSBtb2R1bGVfZGlyICsgIi8iICsgbW9kdWxlX25hbWU7CiAgICBtb2R1bGVfcGF0aCA9IHBhdGgobW9kdWxlKTsKICB9IGVsc2UgewogICAgbW9kdWxlID0gbW9kdWxlX2Jhc2VfbmFtZTsKICAgIG1vZHVsZV9wYXRoID0gcGF0aChtb2R1bGUpLnJlcGxhY2VfZmlsZW5hbWUocGF0aChtb2R1bGVfbmFtZSwgbW9kdWxlX25hbWUgKyBzdHJsZW4obW9kdWxlX25hbWUpKSk7CiAgfQoKICBzdGQ6OnN0cmluZyBtb2R1bGVfcGF0aHN0cjsKCiAgLy8gc3RkOjpjZXJyIDw8ICJtb2R1bGVfcGF0aDogIiA8PCBtb2R1bGVfcGF0aC5zdHJpbmcoKSA8PCBzdGQ6OmVuZGw7CgogIGJvb2wgcHJlc2VudCA9IGV4aXN0cyhtb2R1bGVfcGF0aCk7CiAgLyogIHN0ZDo6Y2VyciA8PCAiZXhpc3RzIG1vZHVsZV9wYXRoOiAiIDw8IHByZXNlbnQgPDwgc3RkOjplbmRsOyovCiAgbW9kdWxlX3BhdGhzdHIgPSBtb2R1bGVfcGF0aC5zdHJpbmcoKTsKCiAgaWYoIXByZXNlbnQpIHsKICAgIG1vZHVsZV9wYXRoID0gd2Vha2x5X2Nhbm9uaWNhbChtb2R1bGVfcGF0aCk7CiAgICBtb2R1bGVfcGF0aHN0ciA9IG1vZHVsZV9wYXRoLnN0cmluZygpOwoKICAgIHByZXNlbnQgPSBleGlzdHMobW9kdWxlX3BhdGgpOwogIH0KICAvKnN0ZDo6Y2VyciA8PCAibW9kdWxlX3BhdGhzdHI6ICIgPDwgbW9kdWxlX3BhdGhzdHIgPDwgc3RkOjplbmRsOwogIHN0ZDo6Y2VyciA8PCAibW9kdWxlX25hbWU6ICIgPDwgbW9kdWxlX25hbWUgPDwgc3RkOjplbmRsOwogIHN0ZDo6Y2VyciA8PCAicHJlc2VudDogIiA8PCBwcmVzZW50IDw8IHN0ZDo6ZW5kbDsqLwoKICBpZih0cnVlKSB7CgogICAgLyoKICAgIG1vZHVsZV9wYXRoc3RyLnJlc2l6ZShtb2R1bGVfcGF0aHN0ci5zaXplKCkrMSk7CiAgICAqLwogICAgY29uc3QgY2hhciogcyA9IG1vZHVsZV9wYXRoc3RyLmNfc3RyKCk7CiAgICBuYW1lID0gc3RhdGljX2Nhc3Q8Y2hhcio+KGpzX3N0cmR1cChjdHgsIHMpKTsKCiAgICByZXR1cm4gbmFtZTsKICB9CiAgcmV0dXJuIDA7Cn0KCnZvaWQKanNydDo6ZHVtcF9lcnJvcigpIGNvbnN0IHsKICBKU1ZhbHVlIGV4Y2VwdGlvbl92YWw7CgogIGV4Y2VwdGlvbl92YWwgPSBKU19HZXRFeGNlcHRpb24oY3R4KTsKICBkdW1wX2V4Y2VwdGlvbihleGNlcHRpb25fdmFsLCB0cnVlKTsKICBKU19GcmVlVmFsdWUoY3R4LCBleGNlcHRpb25fdmFsKTsKfQoKdm9pZApqc3J0OjpkdW1wX2V4Y2VwdGlvbihKU1ZhbHVlQ29uc3QgZXhjZXB0aW9uX3ZhbCwgYm9vbCBpc190aHJvdykgY29uc3QgewogIEpTVmFsdWUgdmFsOwogIGNvbnN0IGNoYXIqIHN0YWNrOwogIGJvb2wgaXNfZXJyb3I7CgogIGlzX2Vycm9yID0gSlNfSXNFcnJvcihjdHgsIGV4Y2VwdGlvbl92YWwpOwogIC8qICBpZihpc190aHJvdyAmJiAhaXNfZXJyb3IpCiAgICAgIHByaW50ZigiVGhyb3c6ICIpOyovCiAganNfcHJpbnQoY3R4LCBKU19OVUxMLCAxLCAoSlNWYWx1ZUNvbnN0KikmZXhjZXB0aW9uX3ZhbCk7CiAgaWYoaXNfZXJyb3IpIHsKICAgIHZhbCA9IEpTX0dldFByb3BlcnR5U3RyKGN0eCwgZXhjZXB0aW9uX3ZhbCwgInN0YWNrIik7CiAgICBpZighSlNfSXNVbmRlZmluZWQodmFsKSkgewogICAgICBzdGFjayA9IEpTX1RvQ1N0cmluZyhjdHgsIHZhbCk7CiAgICAgIHByaW50ZigiJXNcbiIsIHN0YWNrKTsKICAgICAgSlNfRnJlZUNTdHJpbmcoY3R4LCBzdGFjayk7CiAgICB9CiAgICBKU19GcmVlVmFsdWUoY3R4LCB2YWwpOwogIH0KfQoKanNydDo6YXRvbQpqc3J0OjpuZXdfYXRvbShjb25zdCBjaGFyKiBidWYsIHNpemVfdCBsZW4pIGNvbnN0IHsKICByZXR1cm4gSlNfTmV3QXRvbUxlbihjdHgsIGJ1ZiwgbGVuKTsKfQoKanNydDo6YXRvbQpqc3J0OjpuZXdfYXRvbShjb25zdCBjaGFyKiBzdHIpIGNvbnN0IHsKICByZXR1cm4gSlNfTmV3QXRvbShjdHgsIHN0cik7Cn0KCmpzcnQ6OmF0b20KanNydDo6bmV3X2F0b20odWludDMyX3QgbikgY29uc3QgewogIHJldHVybiBKU19OZXdBdG9tVUludDMyKGN0eCwgbik7Cn0KCnZvaWQKanNydDo6ZnJlZV9hdG9tKGNvbnN0IGpzcnQ6OmF0b20mIGEpIGNvbnN0IHsKICBKU19GcmVlQXRvbShjdHgsIGEpOwp9Cgpqc3J0Ojp2YWx1ZQpqc3J0OjphdG9tX3RvX3ZhbHVlKGNvbnN0IGpzcnQ6OmF0b20mIGEpIGNvbnN0IHsKICByZXR1cm4gSlNfQXRvbVRvVmFsdWUoY3R4LCBhKTsKfQoKanNydDo6dmFsdWUKanNydDo6YXRvbV90b19zdHJpbmcoY29uc3QganNydDo6YXRvbSYgYSkgY29uc3QgewogIHJldHVybiBKU19BdG9tVG9TdHJpbmcoY3R4LCBhKTsKfQoKY29uc3QgY2hhcioKanNydDo6YXRvbV90b19jc3RyaW5nKGNvbnN0IGpzcnQ6OmF0b20mIGEpIGNvbnN0IHsKICByZXR1cm4gSlNfQXRvbVRvQ1N0cmluZyhjdHgsIGEpOwp9Cgpqc3J0OjphdG9tCmpzcnQ6OnZhbHVlX3RvX2F0b20oY29uc3QgY29uc3RfdmFsdWUmIHYpIGNvbnN0IHsKICByZXR1cm4gSlNfVmFsdWVUb0F0b20oY3R4LCB2KTsKfQoKanNydDo6dmFsdWUKanNydDo6Z2V0X3N5bWJvbChjb25zdCBjaGFyKiBuYW1lKSBjb25zdCB7CiAgdmFsdWUgY3RvciA9IGdldF9nbG9iYWwoIlN5bWJvbCIpOwogIGlmKGhhc19wcm9wZXJ0eShjdG9yLCBuYW1lKSkKICAgIHJldHVybiBnZXRfcHJvcGVydHk8Y29uc3QgY2hhcio+KGN0b3IsIG5hbWUpOwoKICBjb25zdF92YWx1ZSBmb3JfZm4gPSBnZXRfcHJvcGVydHk8Y29uc3QgY2hhcio+KGN0b3IsICJmb3IiKTsKICB2YWx1ZSBhcmcgPSBuZXdfc3RyaW5nKG5hbWUpOwogIHJldHVybiBjYWxsKGZvcl9mbiwgY3RvciwgMSwgJmFyZyk7Cn0KCmpzcnQ6OnZhbHVlCmpzcnQ6OmdldF9wcm9wZXJ0eV9zeW1ib2woY29uc3RfdmFsdWUgb2JqLCBjb25zdCBjaGFyKiBzeW1ib2wpIHsKICB2YWx1ZSBzeW0gPSBnZXRfc3ltYm9sKHN5bWJvbCk7CiAgdmFsdWUgcmV0ID0gZ2V0X3Byb3BlcnR5PHZhbHVlPihvYmosIHN5bSk7CiAgZnJlZV92YWx1ZShzeW0pOwogIHJldHVybiByZXQ7Cn0KCmpzcnQ6OnZhbHVlCmpzcnQ6OmNhbGxfaXRlcmF0b3IoY29uc3RfdmFsdWUgb2JqLCBjb25zdCBjaGFyKiBzeW1ib2wpIHsKICB2YWx1ZSBmbiA9IGdldF9pdGVyYXRvcihvYmosIHN5bWJvbCk7CiAgdmFsdWUgcmV0ID0gX3VuZGVmaW5lZDsKCiAgaWYoaXNfZnVuY3Rpb24oZm4pKQogICAgcmV0ID0gY2FsbChmbiwgb2JqLCAwLCBudWxscHRyKTsKCiAgZnJlZV92YWx1ZShmbik7CgogIHJldHVybiByZXQ7Cn0KCmpzcnQ6OnZhbHVlCmpzcnQ6OmNhbGxfaXRlcmF0b3JfbmV4dChjb25zdF92YWx1ZSBvYmosIGNvbnN0IGNoYXIqIHN5bWJvbCkgewogIHZhbHVlIGl0ZXIgPSBnZXRfaXRlcmF0b3Iob2JqLCBzeW1ib2wpOwogIHZhbHVlIHJldCA9IF91bmRlZmluZWQsIG5leHQgPSBfdW5kZWZpbmVkOwoKICBpZihpc19vYmplY3QoaXRlcikgJiYgIWlzX251bGwoaXRlcikpIHsKICAgIG5leHQgPSBnZXRfcHJvcGVydHk8Y29uc3QgY2hhcio+KGl0ZXIsICJuZXh0Iik7CgogICAgaWYoaXNfZnVuY3Rpb24obmV4dCkgJiYgaGFzX3Byb3BlcnR5KG5leHQsICJiaW5kIikpIHsKICAgICAgcmV0ID0gY2FsbChnZXRfcHJvcGVydHk8Y29uc3QgY2hhcio+KG5leHQsICJiaW5kIiksIGl0ZXIsIDAsIG51bGxwdHIpOwogICAgICAvLyAgIGZyZWVfdmFsdWUobmV4dCk7CiAgICB9CiAgfQogIC8vIGZyZWVfdmFsdWUoaXRlcik7CiAgcmV0dXJuIHJldDsKfQoKaW50CmpzcnQ6OnRhZyh2YWx1ZSB2YWwpIGNvbnN0IHsKICByZXR1cm4gSlNfVkFMVUVfR0VUX1RBRyh2YWwpOwp9Cgp2b2lkKgpqc3J0OjpvYmooY29uc3RfdmFsdWUgdmFsKSBjb25zdCB7CiAgcmV0dXJuIEpTX1ZBTFVFX0dFVF9PQkoodmFsKTsKfQoAAAAAAAAAADE3AAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA/wUAAAAAAAD/BQAAAAAAAAAAAAAAAPC/"
				],
				[
					55,
					1,
					"cut",
					null,
					"AQAAAAAAAAAAAAAAAAAAAAAAAAAaAAAAI2luY2x1ZGUgImpzYmluZGluZ3MuaHBwIgo",
					"AQAAAAAAAAABAAAAAAAAAAAAAAAaAAAAAAAAAAAAAAAAAPC/"
				],
				[
					56,
					2,
					"paste",
					null,
					"AgAAAAAAAAAAAAAAGgAAAAAAAAAAAAAAGgAAAAAAAAA0AAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/"
				],
				[
					60,
					1,
					"insert",
					{
						"characters": "js"
					},
					"AwAAAAoAAAAAAAAACwAAAAAAAAAAAAAACwAAAAAAAAALAAAAAAAAAAoAAABqc2JpbmRpbmdzCwAAAAAAAAAMAAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAACgAAAAAAAAAUAAAAAAAAAAAAAAAAAPC/"
				]
			]
		},
		{
			"contents": "#ifndef JS_HPP\n#define JS_HPP\n\n#include <errno.h>\n\nextern \"C\" {\n#include \"quickjs/quickjs-atom.h\"\n}\nenum {\n  JS_NULL,\n#define DEF(name, str) JS_ATOM_##name,\n#include \"quickjs-atom.h\"\n#undef DEF\n  JS_ATOM_END,\n};\n#include \"quickjs/quickjs.h\"\n\n#include <unordered_map>\n#include <vector>\n#include <type_traits>\n#include <functional>\n#include <string>\n#include <cstring>\n#include <iostream>\n#include <iterator>\n\nstruct jsiter;\n\nstruct jsatom {\n\n  static jsatom\n  create(JSContext* ctx, const char* str) {\n    return jsatom(JS_NewAtom(ctx, str));\n  }\n  static jsatom\n  create(JSContext* ctx, uint32_t num) {\n    return jsatom(JS_NewAtomUInt32(ctx, num));\n  }\n  static jsatom\n  create(JSContext* ctx, const char* x, size_t n) {\n    return jsatom(JS_NewAtomLen(ctx, x, n));\n  }\n  static jsatom\n  create(JSContext* ctx, const jsatom& atom) {\n    return jsatom(JS_DupAtom(ctx, atom));\n  }\n  static jsatom\n  create(JSContext* ctx, const JSValueConst& value) {\n    return jsatom(JS_ValueToAtom(ctx, value));\n  }\n  static jsatom\n  create(JSContext* ctx, const std::string& str) {\n    return create(ctx, str.data(), str.size());\n  }\n\n  //~jsatom() { destroy(); }\n\n  static void\n  destroy(JSContext* ctx, jsatom& a) {\n    JS_FreeAtom(ctx, a._a);\n    a._a = JS_ATOM_NULL;\n  }\n\n  operator JSAtom() const { return _a; }\n\n  const char*\n  to_cstring(JSContext* _ctx) const {\n    return JS_AtomToCString(_ctx, _a);\n  }\n\n  JSValue\n  to_value(JSContext* _ctx) const {\n    return JS_AtomToValue(_ctx, _a);\n  }\n\n  JSValue\n  to_string(JSContext* _ctx) const {\n    return JS_AtomToString(_ctx, _a);\n  }\n\nprivate:\n  jsatom(JSAtom a) : _a(a) {}\n\n  static jsatom\n  create(JSAtom a) {\n    jsatom ret(a);\n    return ret;\n  }\n\n  JSAtom _a;\n};\n\nstruct jsrt {\n  typedef JSValue value;\n  typedef JSValueConst const_value;\n  typedef JSAtom atom;\n\n  static constexpr value _true = JS_TRUE, _false = JS_FALSE, _null = JS_NULL, _undefined = JS_UNDEFINED;\n\n  bool init(int argc, char* argv[]);\n  bool create(JSContext* ctx = 0);\n\n  jsrt() {}\n  jsrt(JSContext* c) : ctx(JS_DupContext(c)) {}\n  ~jsrt();\n\n  value\n  new_string(const char* str) const {\n    return JS_NewString(ctx, str);\n  }\n\n  typedef value c_function(jsrt* rt, const_value this_val, int argc, const_value* argv);\n\n  value eval_buf(const char* buf, int buf_len, const char* filename, int eval_flags);\n  value eval_file(const char* filename, int module = -1);\n\n  // value add_function(const char* name, JSCFunction* fn, int args = 0);\n\n  template<class T> void get_number(const_value val, T& ref) const;\n  void get_string(const_value val, std::string& str) const;\n  void get_string(const_value val, const char*& cstr) const;\n\n  template<class T> void get_int_array(const_value val, T& ref) const;\n  template<class T> void get_point(const_value val, T& ref) const;\n  template<class T> void get_point_array(const_value val, std::vector<T>& ref) const;\n  template<class T> void get_rect(const_value val, T& ref) const;\n  template<class T> void get_color(const_value val, T& ref) const;\n\n  void\n  get_boolean(const_value val, bool& ref) {\n    bool b = JS_ToBool(ctx, val);\n    ref = b;\n  }\n  bool\n  get_boolean(const_value val) {\n    bool b;\n    get_boolean(val, b);\n    return b;\n  }\n\n  value create_array(int32_t size = -1);\n  value create_object();\n  template<class T> value create(T arg);\n  template<class T> value create_point(T x, T y);\n\n  template<class T>\n  value\n  get_property(const_value obj, T prop) const {\n    throw std::runtime_error(\"template specialization\");\n  }\n\n  value get_property_atom(const_value obj, atom) const;\n  value get_property_symbol(const_value obj, const char* symbol);\n\n  bool has_property(const_value obj, const jsatom& atom) const;\n\n  bool\n  has_property(const_value obj, const std::string& name) const {\n    jsatom atom = jsatom::create(ctx, name);\n    bool ret = has_property(obj, atom);\n    jsatom::destroy(ctx, atom);\n    return ret;\n  }\n  bool\n  has_property(const_value obj, uint32_t index) const {\n    jsatom atom = jsatom::create(ctx, index);\n    bool ret = has_property(obj, atom);\n    jsatom::destroy(ctx, atom);\n    return ret;\n  }\n  bool\n  has_property(const_value obj, const const_value& prop) const {\n    jsatom atom = jsatom::create(ctx, prop);\n    bool ret = has_property(obj, atom);\n    jsatom::destroy(ctx, atom);\n    return ret;\n  }\n\n  template<class T>\n  void\n  set_property(const_value obj, T prop, value val) {}\n\n  void set_property(const_value obj, const jsatom& atom, value val, int flags);\n  void\n  set_property(const_value obj, const std::string& name, value val, int flags) {\n    jsatom atom = jsatom::create(ctx, name);\n    set_property(obj, atom, val, flags);\n    jsatom::destroy(ctx, atom);\n  }\n\n  void\n  set_property(const_value obj, uint32_t index, value val, int flags) {\n    jsatom atom = jsatom::create(ctx, index);\n    set_property(obj, atom, val, flags);\n    jsatom::destroy(ctx, atom);\n  }\n\n  void\n  set_property(const_value obj, const const_value& prop, value val, int flags) {\n    jsatom atom = jsatom::create(ctx, prop);\n    set_property(obj, atom, val, flags);\n    jsatom::destroy(ctx, atom);\n  }\n\n  value get_constructor(const_value obj) const;\n  bool has_constructor(const_value obj) const;\n\n  value get_prototype(const_value obj) const;\n  bool has_prototype(const_value obj) const;\n\n  std::string function_name(const_value fn) const;\n\n  std::string\n  class_name(const_value obj) const {\n    return function_name(get_constructor(obj));\n  }\n\n  value get_global(const char* name) const;\n  void set_global(const char* name, value v);\n\n  value get_symbol(const char* name) const;\n  value\n  get_iterator(const_value obj, const char* symbol = \"iterator\") {\n    return get_property_symbol(obj, symbol);\n  }\n  value call_iterator(const_value obj, const char* symbol = \"iterator\");\n  value call_iterator_next(const_value obj, const char* symbol = \"iterator\");\n\n  const_value\n  global_object() const {\n    value globalThis = JS_GetGlobalObject(ctx);\n    return globalThis;\n  }\n  value\n  global_object() {\n    value globalThis = JS_GetGlobalObject(ctx);\n    return globalThis;\n  }\n\n  value call(const_value func, size_t argc, value argv[]) const;\n  value call(const_value func, std::vector<value>& args) const;\n  value call(const char* name, size_t argc, value argv[]) const;\n  value call(const_value func, const_value this_arg, size_t argc, value argv[]) const;\n\n  std::string to_str(const_value val);\n\n  template<class T> T to(const_value val);\n  template<class T> value from(const T& val);\n\n  const_value prototype(const_value obj) const;\n\n  void property_names(const_value obj, std::vector<const char*>& out, bool enum_only = false, bool recursive = false) const;\n\n  std::vector<const char*> property_names(const_value obj, bool enum_only = true, bool recursive = true) const;\n\n  void dump_error() const;\n\n  void dump_exception(JSValueConst exception_val, bool is_throw) const;\n\n  bool is_number(const_value val) const;\n  bool is_big_int(const_value val) const;\n  bool is_big_float(const_value val) const;\n  bool is_big_decimal(const_value val) const;\n  bool is_bool(const_value val) const;\n  bool is_null(const_value val) const;\n  bool is_undefined(const_value val) const;\n  bool is_exception(const_value val) const;\n  bool is_uninitialized(const_value val) const;\n  bool is_string(const_value val) const;\n  bool is_symbol(const_value val) const;\n  bool is_object(const_value val) const;\n  bool is_error(const_value val) const;\n  bool is_function(const_value val) const;\n  bool is_constructor(const_value val) const;\n  bool is_array(const_value val) const;\n  bool is_extensible(const_value val) const;\n\n  bool is_promise(const_value val);\n  bool is_point(const_value val) const;\n  bool is_rect(const_value val) const;\n  bool is_color(const_value val) const;\n  bool is_array_like(const_value val) const;\n\n  bool is_iterable(const_value val);\n  bool is_iterator(const_value val) const;\n\n  // int tag(const_value val) const;\n  int tag(value val) const;\n  void* obj(const_value val) const;\n\n  std::string\n  typestr(const_value val) const {\n    if(is_number(val))\n      return \"number\";\n    else if(is_bool(val))\n      return \"boolean\";\n    else if(is_symbol(val))\n      return \"symbol\";\n    else if(is_undefined(val))\n      return \"undefined\";\n\n    /*   else if(is_constructor(val))\n       return \"constructor\";*/\n    else if(is_object(val) || is_null(val)) {\n      if(!is_null(val) && obj(val)) {\n        if(is_function(val))\n          return \"function\";\n        else if(is_array(val))\n          return \"array\";\n        else if(is_point(val))\n          return \"point\";\n        else if(is_rect(val))\n          return \"rect\";\n        else if(is_color(val))\n          return \"color\";\n      }\n      return \"object\";\n    }\n    return \"unknown\";\n  }\n\n  std::string\n  to_string(const_value arg) const {\n    std::string ret;\n    get_string(arg, ret);\n    return ret;\n  }\n\n  atom new_atom(const char*, size_t) const;\n  atom new_atom(const char*) const;\n  atom new_atom(uint32_t) const;\n  atom value_to_atom(const const_value& v) const;\n\n  void free_atom(const atom& a) const;\n\n  value atom_to_value(const atom& a) const;\n  value atom_to_string(const atom& a) const;\n  const char* atom_to_cstring(const atom& a) const;\n\n  void\n  free_value(const value& v) const {\n    JS_FreeValue(ctx, v);\n  }\n\nprotected:\n  value get_undefined() const;\n  value get_null() const;\n  value get_true() const;\n  value get_false() const;\n\npublic:\n  JSContext* ctx;\n\nprivate:\n  JSRuntime*\n  get_runtime() const {\n    return JS_GetRuntime(ctx);\n  }\n\npublic:\n  int32_t get_length(const const_value& v) const;\n  jsiter begin(JSValue& v);\n  jsiter end(JSValue& v);\n\nprivate:\n  friend class jsiter;\n\n  std::function<JSValue(JSValue, uint32_t)> index() const;\n  std::function<JSValue(uint32_t)> index(const JSValueConst&) const;\n};\n\ninline void\njsrt::get_string(const_value val, std::string& str) const {\n  const char* s = JS_ToCString(ctx, val);\n  str = std::string(s);\n  JS_FreeCString(ctx, s);\n}\n\ninline void\njsrt::get_string(const_value val, const char*& str) const {\n  const char* s = JS_ToCString(ctx, val);\n  str = strdup(s);\n  JS_FreeCString(ctx, s);\n}\n\ntemplate<>\ninline void\njsrt::get_number<int32_t>(const_value val, int32_t& ref) const {\n  int32_t i = -1;\n  JS_ToInt32(ctx, &i, val);\n  ref = i;\n}\n\ntemplate<>\ninline void\njsrt::get_number<int64_t>(const_value val, int64_t& ref) const {\n  int64_t i = 0;\n  JS_ToInt64(ctx, &i, val);\n  ref = i;\n}\n\ntemplate<>\ninline void\njsrt::get_number<double>(const_value val, double& ref) const {\n  double f = 0;\n  JS_ToFloat64(ctx, &f, val);\n  ref = f;\n}\n\ntemplate<>\ninline void\njsrt::get_number<float>(const_value val, float& ref) const {\n  double f = 0;\n  get_number(val, f);\n  ref = f;\n}\n\ntemplate<>\ninline void\njsrt::get_number<uint32_t>(const_value val, uint32_t& ref) const {\n  int64_t i = 0;\n  get_number<int64_t>(val, i);\n  ref = static_cast<uint32_t>(i);\n}\n\ntemplate<class T>\ninline void\njsrt::get_int_array(const_value val, T& ref) const {\n  uint32_t i, n, length = 0, arr = JS_IsArray(ctx, val);\n  if(arr) {\n    get_number(get_property<const char*>(val, \"length\"), length);\n    for(i = 0; i < length; i++) {\n      value v = get_property<uint32_t>(val, i);\n      get_number(v, n);\n      ref[i] = n;\n    }\n  }\n}\n\ntemplate<class T>\ninline void\njsrt::get_point(const_value val, T& ref) const {\n  const_value vx = _undefined, vy = _undefined;\n\n  if(is_array(val)) {\n    uint32_t length;\n    get_number(get_property<const char*>(val, \"length\"), length);\n    if(length >= 2) {\n      vx = get_property<uint32_t>(val, 0);\n      vy = get_property<uint32_t>(val, 1);\n    } else {\n      return;\n    }\n  } else if(is_object(val) && has_property(val, \"x\") && has_property(val, \"y\")) {\n    vx = get_property<const char*>(val, \"x\");\n    vy = get_property<const char*>(val, \"y\");\n  }\n\n  get_number(vx, ref.x);\n  get_number(vy, ref.y);\n}\n\ntemplate<class T>\ninline void\njsrt::get_rect(const_value val, T& ref) const {\n  if(is_object(val)) {\n    double vw, vh;\n\n    get_point(val, ref);\n\n    get_number(get_property<const char*>(val, \"width\"), vw);\n    get_number(get_property<const char*>(val, \"height\"), vh);\n\n    ref.width = vw;\n    ref.height = vh;\n  }\n}\n\ntemplate<class T>\ninline void\njsrt::get_color(const_value val, T& ref) const {\n  const_value vr = _undefined, vg = _undefined, vb = _undefined, va = _undefined;\n\n  if(is_object(val) && has_property(val, \"r\") && has_property(val, \"g\") && has_property(val, \"b\")) {\n    vr = get_property<const char*>(val, \"r\");\n    vg = get_property<const char*>(val, \"g\");\n    vb = get_property<const char*>(val, \"b\");\n    va = get_property<const char*>(val, \"a\");\n  } else if(is_array_like(val)) {\n    uint32_t length;\n    get_number(get_property<const char*>(val, \"length\"), length);\n    if(length >= 3) {\n      vr = get_property<uint32_t>(val, 0);\n      vg = get_property<uint32_t>(val, 1);\n      vb = get_property<uint32_t>(val, 2);\n      va = get_property<uint32_t>(val, 3);\n    } else {\n      return;\n    }\n  }\n  get_number(vb, ref[0]);\n  get_number(vg, ref[1]);\n  get_number(vr, ref[2]);\n  get_number(va, ref[3]);\n}\n\ntemplate<class T>\ninline void\njsrt::get_point_array(const_value val, std::vector<T>& ref) const {\n  if(is_array_like(val)) {\n    uint32_t i, length;\n\n    get_number(get_property<const char*>(val, \"length\"), length);\n    ref.resize(length);\n\n    for(i = 0; i < length; i++) {\n      JSValueConst pt = get_property<uint32_t>(val, i);\n\n      get_point(pt, ref[i]);\n    }\n  }\n}\n\ntemplate<>\ninline jsrt::value\njsrt::create<double>(double num) {\n  return JS_NewFloat64(ctx, num);\n}\n\ntemplate<>\ninline jsrt::value\njsrt::create<float>(float num) {\n  return create(static_cast<double>(num));\n}\n\ntemplate<>\ninline jsrt::value\njsrt::create<int>(int num) {\n  return JS_NewInt32(ctx, num);\n}\n\ntemplate<>\ninline jsrt::value\njsrt::create<const char*>(const char* str) {\n  return JS_NewString(ctx, str);\n}\n\ntemplate<>\ninline jsrt::value\njsrt::create<bool>(bool b) {\n  return b ? get_true() : get_false();\n}\n\ninline jsrt::value\njsrt::create_array(int32_t size) {\n  value ret = JS_NewArray(ctx);\n  if(size >= 0)\n    JS_SetPropertyStr(ctx, ret, \"length\", JS_NewInt32(ctx, size));\n\n  return ret;\n}\n\ninline jsrt::value\njsrt::create_object() {\n  return JS_NewObject(ctx);\n}\n\ntemplate<class T>\ninline jsrt::value\njsrt::create(T arg) {\n  return std::is_pointer<T>::value && arg == nullptr ? get_null() : get_undefined();\n}\n\ntemplate<class T>\ninline jsrt::value\njsrt::create_point(T x, T y) {\n  value obj = JS_NewObject(ctx);\n  JS_SetPropertyStr(ctx, obj, \"x\", create(x));\n  JS_SetPropertyStr(ctx, obj, \"y\", create(y));\n  return obj;\n}\n\ntemplate<>\ninline jsrt::value\njsrt::get_property<uint32_t>(const_value obj, uint32_t index) const {\n  return JS_GetPropertyUint32(ctx, obj, index);\n}\n\ntemplate<>\ninline jsrt::value\njsrt::get_property<int>(const_value obj, int index) const {\n  return JS_GetPropertyUint32(ctx, obj, index);\n}\n\ntemplate<>\ninline jsrt::value\njsrt::get_property<const std::string&>(const_value obj, const std::string& name) const {\n  return JS_GetPropertyStr(ctx, obj, name.c_str());\n}\n\ntemplate<>\ninline jsrt::value\njsrt::get_property<const char*>(const_value obj, const char* name) const {\n  return JS_GetPropertyStr(ctx, obj, name);\n}\n\ninline jsrt::value\njsrt::get_property_atom(const_value obj, atom a) const {\n  return JS_GetProperty(ctx, obj, a);\n}\n\ntemplate<>\ninline jsrt::value\njsrt::get_property<jsrt::value>(const_value obj, value prop) const {\n  return get_property_atom(obj, value_to_atom(prop));\n}\n\ninline jsrt::value\njsrt::get_constructor(jsrt::const_value obj) const {\n  return get_property<const char*>(get_prototype(obj), \"constructor\");\n}\n\ninline bool\njsrt::has_constructor(jsrt::const_value obj) const {\n  return !is_undefined(get_constructor(obj));\n}\n\ninline jsrt::value\njsrt::get_prototype(jsrt::const_value obj) const {\n  return JS_GetPrototype(ctx, obj);\n}\n\ninline bool\njsrt::has_prototype(jsrt::const_value obj) const {\n  return !is_undefined(get_prototype(obj));\n}\n\ninline std::string\njsrt::function_name(jsrt::const_value fn) const {\n  return to_string(get_property<const char*>(fn, \"name\"));\n}\n\ninline bool\njsrt::has_property(const_value obj, const jsatom& atom) const {\n  return JS_HasProperty(ctx, obj, atom);\n}\n\ntemplate<>\ninline void\njsrt::set_property<const char*>(const_value obj, const char* name, value val) {\n  // JS_SetPropertyStr(ctx, obj, name, val);\n  JS_DefinePropertyValueStr(ctx, obj, name, val, JS_PROP_C_W_E);\n}\n\ntemplate<>\ninline void\njsrt::set_property<uint32_t>(const_value obj, uint32_t index, value val) {\n  JS_SetPropertyUint32(ctx, obj, index, val);\n}\n\ntemplate<>\ninline void\njsrt::set_property<const jsatom&>(const_value obj, const jsatom& atom, value val) {\n  JS_SetProperty(ctx, obj, atom, val);\n}\n\ninline void\njsrt::set_property(const_value obj, const jsatom& atom, value val, int flags) {\n  JS_SetPropertyInternal(ctx, obj, atom, val, flags);\n}\n\ntemplate<class T>\ninline jsrt::value\nvector_to_js(jsrt& js, const T& v, size_t n, const std::function<jsrt::value(const typename T::value_type&)>& fn) {\n  using std::placeholders::_1;\n  jsrt::value ret = js.create_array(n);\n  for(uint32_t i = 0; i < n; i++) js.set_property(ret, i, fn(v[i]));\n  return ret;\n}\n\ntemplate<class T>\ninline jsrt::value\nvector_to_js(jsrt& js, const T& v, size_t n) {\n  return vector_to_js(v, n, std::bind(&jsrt::create<typename T::value_type>, &js, std::placeholders::_1));\n}\n\ntemplate<class T>\ninline jsrt::value\nvector_to_js(jsrt& js, const T& v) {\n  return vector_to_js(js, v, v.size());\n}\n\ntemplate<class P>\ninline jsrt::value\nvector_to_js(jsrt& js, const std::vector<P>& v, const std::function<jsrt::value(const P&)>& fn) {\n  return vector_to_js(js, v, v.size(), fn);\n}\n\ntemplate<class P>\ninline jsrt::value\npointer_to_js(jsrt& js, const P* v, size_t n, const std::function<jsrt::value(const P&)>& fn) {\n  jsrt::value ret = js.create_array(n);\n  for(uint32_t i = 0; i < n; i++) js.set_property(ret, i, fn(v[i]));\n  return ret;\n}\n\ntemplate<class P>\ninline jsrt::value\npointer_to_js(jsrt& js, const P* v, size_t n) {\n  std::function<jsrt::value(const P&)> fn([&](const P& v) -> jsrt::value { return js.create(v); });\n\n  return pointer_to_js(js, v, n, fn);\n}\n\ntemplate<class P>\ninline jsrt::value\nvector_to_js(jsrt& js, const std::vector<P>& v, jsrt::value (*fn)(const P&)) {\n  uint32_t i, n = v.size();\n  jsrt::value ret = js.create_array(n);\n  for(i = 0; i < n; i++) js.set_property(ret, i, fn(v[i]));\n  return ret;\n}\n\ntemplate<class P>\ninline jsrt::value\nvector_to_js(jsrt& js, const std::vector<P>& v) {\n  using std::placeholders::_1;\n  return vector_to_js<P>(v, std::bind(&jsrt::create<P>, &js, _1));\n}\n\ninline std::string\nto_string(const char* s) {\n  return std::string(s);\n}\n\ninline bool\njsrt::is_number(const_value val) const {\n  return JS_IsNumber(val);\n}\n\ninline bool\njsrt::is_big_int(const_value val) const {\n  return JS_IsBigInt(ctx, val);\n}\n\ninline bool\njsrt::is_big_float(const_value val) const {\n  return JS_IsBigFloat(val);\n}\n\ninline bool\njsrt::is_big_decimal(const_value val) const {\n  return JS_IsBigDecimal(val);\n}\n\ninline bool\njsrt::is_bool(const_value val) const {\n  return JS_IsBool(val);\n}\n\ninline bool\njsrt::is_null(const_value val) const {\n  return JS_IsNull(val);\n}\n\ninline bool\njsrt::is_undefined(const_value val) const {\n  return JS_IsUndefined(val);\n}\n\ninline bool\njsrt::is_exception(const_value val) const {\n  return JS_IsException(val);\n}\n\ninline bool\njsrt::is_uninitialized(const_value val) const {\n  return JS_IsUninitialized(val);\n}\n\ninline bool\njsrt::is_string(const_value val) const {\n  return JS_IsString(val);\n}\n\ninline bool\njsrt::is_symbol(const_value val) const {\n  return JS_IsSymbol(val);\n}\n\ninline bool\njsrt::is_object(const_value val) const {\n  return JS_IsObject(val);\n}\n\ninline bool\njsrt::is_error(const_value val) const {\n  return JS_IsError(ctx, val);\n}\n\ninline bool\njsrt::is_function(const_value val) const {\n  return JS_IsFunction(ctx, val);\n}\n\ninline bool\njsrt::is_constructor(const_value val) const {\n  return JS_IsConstructor(ctx, val);\n}\n\ninline bool\njsrt::is_array(const_value val) const {\n  return JS_IsArray(ctx, val);\n}\n\ninline bool\njsrt::is_extensible(const_value val) const {\n  return JS_IsExtensible(ctx, val);\n}\n\ninline bool\njsrt::is_array_like(const_value val) const {\n  if(is_array(val))\n    return true;\n\n  if(has_property(val, \"length\")) {\n    if(is_number(get_property<const char*>(val, \"length\")))\n      return true;\n  }\n  return false;\n}\n\n/**\n * Array iterator\n */\nstruct jsiter {\n  JSValue\n  operator*() const {\n    if(p < n)\n      return i((uint32_t)p);\n    else\n      return JS_UNDEFINED;\n  }\n  jsiter\n  operator++() {\n    jsiter ret = *this;\n    if(p < n)\n      p++;\n    return ret;\n  }\n  jsiter&\n  operator++(int) {\n    if(p < n)\n      ++p;\n    return *this;\n  }\n  bool\n  operator==(const jsiter& o) const {\n    return p == o.p && n == o.n;\n  }\n  bool\n  operator<(const jsiter& o) const {\n    return p < o.p;\n  }\n  bool\n  operator>(const jsiter& o) const {\n    return p > o.p;\n  }\n  bool\n  operator<=(const jsiter& o) const {\n    return !(*this > o);\n  }\n  bool\n  operator>=(const jsiter& o) const {\n    return !(*this < o);\n  }\n  bool\n  operator!=(const jsiter& o) const {\n    return !(*this == o);\n  }\n\n  ptrdiff_t\n  operator-(const jsiter& o) const {\n    return p - o.p;\n  }\n\n  jsiter\n  operator-(size_t o) const {\n    return jsiter(i, n, p - o);\n  }\n\n  jsiter\n  operator+(size_t o) const {\n    return jsiter(i, n, p + o);\n  }\n\nprotected:\n  std::function<JSValue(uint32_t)> i;\n  uint32_t n;\n  uint32_t p;\n\nprivate:\n  friend class jsrt;\n\n  jsiter(std::function<JSValue(uint32_t)> index, size_t len, size_t pos) : i(index), n(len), p(pos) {}\n  jsiter(jsrt& js, const JSValue& arr, size_t len) : i(js.index(arr)), n(len), p(0) {}\n  jsiter(jsrt& js, const JSValue& arr, size_t len, size_t pos) : i(js.index(arr)), n(len), p(pos) {}\n};\n\ninline int32_t\njsrt::get_length(const jsrt::const_value& a) const {\n  uint32_t length;\n  JSValue v = get_property<const char*>(a, \"length\");\n  if(is_undefined(v))\n    return -1;\n  get_number(v, length);\n  return length;\n}\n\ninline jsiter\njsrt::begin(JSValue& v) {\n  uint32_t n = get_length(v);\n  return jsiter(*this, v, n, 0);\n}\n\ninline jsiter\njsrt::end(JSValue& v) {\n  uint32_t n = get_length(v);\n  return jsiter(*this, v, n, n);\n}\n\ninline std::function<JSValue(JSValue, uint32_t)>\njsrt::index() const {\n  return std::bind(&jsrt::get_property<uint32_t>, this, std::placeholders::_1, std::placeholders::_2);\n}\n\ninline std::function<JSValue(uint32_t)>\njsrt::index(const JSValueConst& a) const {\n  return std::bind(&jsrt::get_property<uint32_t>, this, a, std::placeholders::_1);\n}\n\ninline bool\njsrt::is_iterable(const_value val) {\n  bool ret = false;\n  value sym = get_symbol(\"iterator\");\n  if(is_object(val) && has_property(val, sym)) {\n    value iter = get_property<value>(val, sym);\n    ret = is_function(iter);\n  }\n  free_value(sym);\n  return ret;\n}\n\ninline bool\njsrt::is_iterator(const_value val) const {\n  if(is_object(val) && has_property(val, \"next\")) {\n    value next = get_property<const char*>(val, \"next\");\n    return is_function(next);\n  }\n  return false;\n}\n\nextern \"C\" jsrt js;\n\ntemplate<>\ninline std::string\njsrt::to<std::string>(jsrt::const_value val) {\n  return jsrt::to_string(val);\n}\n\ntemplate<>\ninline int32_t\njsrt::to<int32_t>(jsrt::const_value val) {\n  int32_t ret;\n  jsrt::get_number(val, ret);\n  return ret;\n}\n\ntemplate<>\ninline uint32_t\njsrt::to<uint32_t>(jsrt::const_value val) {\n  uint32_t ret;\n  jsrt::get_number(val, ret);\n  return ret;\n}\n\ntemplate<>\ninline float\njsrt::to<float>(jsrt::const_value val) {\n  float ret;\n  jsrt::get_number(val, ret);\n  return ret;\n}\n\ntemplate<>\ninline double\njsrt::to<double>(jsrt::const_value val) {\n  double ret;\n  jsrt::get_number(val, ret);\n  return ret;\n}\n\ntemplate<>\ninline jsrt::value\njsrt::from<std::string>(const std::string& value) {\n  return new_string(value.c_str());\n}\n\n#endif // defined JS_HPP\n",
			"file": "js.hpp",
			"file_size": 23851,
			"file_write_time": 132653233037368085,
			"redo_stack":
			[
				[
					69,
					1,
					"left_delete",
					null,
					"AQAAAGIAAAAAAAAAZAAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAYgAAAAAAAABiAAAAAAAAAAAAAAAAAPC/"
				]
			],
			"settings":
			{
				"buffer_size": 23851,
				"encoding": "UTF-8",
				"line_ending": "Unix"
			},
			"undo_stack":
			[
				[
					14,
					1,
					"insert",
					{
						"characters": " ="
					},
					"AgAAAEMHAAAAAAAARAcAAAAAAAAAAAAARAcAAAAAAABFBwAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAQwcAAAAAAABDBwAAAAAAAAAAAAAAAPC/"
				],
				[
					15,
					1,
					"insert",
					{
						"characters": " JS_UNDEFINED"
					},
					"DQAAAEUHAAAAAAAARgcAAAAAAAAAAAAARgcAAAAAAABHBwAAAAAAAAAAAABHBwAAAAAAAEgHAAAAAAAAAAAAAEgHAAAAAAAASQcAAAAAAAAAAAAASQcAAAAAAABKBwAAAAAAAAAAAABKBwAAAAAAAEsHAAAAAAAAAAAAAEsHAAAAAAAATAcAAAAAAAAAAAAATAcAAAAAAABNBwAAAAAAAAAAAABNBwAAAAAAAE4HAAAAAAAAAAAAAE4HAAAAAAAATwcAAAAAAAAAAAAATwcAAAAAAABQBwAAAAAAAAAAAABQBwAAAAAAAFEHAAAAAAAAAAAAAFEHAAAAAAAAUgcAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAARQcAAAAAAABFBwAAAAAAAAAAAAAAAPC/"
				],
				[
					18,
					1,
					"insert",
					{
						"characters": " ="
					},
					"AgAAADcHAAAAAAAAOAcAAAAAAAAAAAAAOAcAAAAAAAA5BwAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAANwcAAAAAAAA3BwAAAAAAAAAAAAAAAPC/"
				],
				[
					19,
					1,
					"insert",
					{
						"characters": " JS_NUKL"
					},
					"CAAAADkHAAAAAAAAOgcAAAAAAAAAAAAAOgcAAAAAAAA7BwAAAAAAAAAAAAA7BwAAAAAAADwHAAAAAAAAAAAAADwHAAAAAAAAPQcAAAAAAAAAAAAAPQcAAAAAAAA+BwAAAAAAAAAAAAA+BwAAAAAAAD8HAAAAAAAAAAAAAD8HAAAAAAAAQAcAAAAAAAAAAAAAQAcAAAAAAABBBwAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAOQcAAAAAAAA5BwAAAAAAAAAAAAAAAPC/"
				],
				[
					20,
					2,
					"left_delete",
					null,
					"AgAAAEAHAAAAAAAAQAcAAAAAAAABAAAATD8HAAAAAAAAPwcAAAAAAAABAAAASw",
					"AQAAAAAAAAABAAAAQQcAAAAAAABBBwAAAAAAAAAAAAAAAPC/"
				],
				[
					21,
					1,
					"insert",
					{
						"characters": "LL"
					},
					"AgAAAD8HAAAAAAAAQAcAAAAAAAAAAAAAQAcAAAAAAABBBwAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAPwcAAAAAAAA/BwAAAAAAAAAAAAAAAPC/"
				],
				[
					26,
					1,
					"insert",
					{
						"characters": " ="
					},
					"AgAAADAHAAAAAAAAMQcAAAAAAAAAAAAAMQcAAAAAAAAyBwAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAMAcAAAAAAAAwBwAAAAAAAAAAAAAAAPC/"
				],
				[
					27,
					1,
					"insert",
					{
						"characters": " JS_FALSE"
					},
					"CQAAADIHAAAAAAAAMwcAAAAAAAAAAAAAMwcAAAAAAAA0BwAAAAAAAAAAAAA0BwAAAAAAADUHAAAAAAAAAAAAADUHAAAAAAAANgcAAAAAAAAAAAAANgcAAAAAAAA3BwAAAAAAAAAAAAA3BwAAAAAAADgHAAAAAAAAAAAAADgHAAAAAAAAOQcAAAAAAAAAAAAAOQcAAAAAAAA6BwAAAAAAAAAAAAA6BwAAAAAAADsHAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAMgcAAAAAAAAyBwAAAAAAAAAAAAAAAPC/"
				],
				[
					35,
					1,
					"paste",
					null,
					"AQAAACgHAAAAAAAAMgcAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAKAcAAAAAAAAoBwAAAAAAAAAAAAAAAPC/"
				],
				[
					38,
					1,
					"insert",
					{
						"characters": "TRUE"
					},
					"BQAAAC0HAAAAAAAALgcAAAAAAAAAAAAALgcAAAAAAAAuBwAAAAAAAAUAAABGQUxTRS4HAAAAAAAALwcAAAAAAAAAAAAALwcAAAAAAAAwBwAAAAAAAAAAAAAwBwAAAAAAADEHAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAMgcAAAAAAAAtBwAAAAAAAAAAAAAAAPC/"
				],
				[
					45,
					1,
					"insert",
					{
						"characters": " constexpr"
					},
					"CgAAABwHAAAAAAAAHQcAAAAAAAAAAAAAHQcAAAAAAAAeBwAAAAAAAAAAAAAeBwAAAAAAAB8HAAAAAAAAAAAAAB8HAAAAAAAAIAcAAAAAAAAAAAAAIAcAAAAAAAAhBwAAAAAAAAAAAAAhBwAAAAAAACIHAAAAAAAAAAAAACIHAAAAAAAAIwcAAAAAAAAAAAAAIwcAAAAAAAAkBwAAAAAAAAAAAAAkBwAAAAAAACUHAAAAAAAAAAAAACUHAAAAAAAAJgcAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAHAcAAAAAAAAcBwAAAAAAAAAAAAAAAPC/"
				],
				[
					46,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAAArXQAAI2lmbmRlZiBKU19IUFAKI2RlZmluZSBKU19IUFAKCiNpbmNsdWRlIDxlcnJuby5oPgoKZXh0ZXJuICJDIiB7CiNpbmNsdWRlICJxdWlja2pzL3F1aWNranMtYXRvbS5oIgp9CgplbnVtIHsKICBKU19OVUxMLAojZGVmaW5lIERFRihuYW1lLCBzdHIpIEpTX0FUT01fIyNuYW1lLAojaW5jbHVkZSAicXVpY2tqcy1hdG9tLmgiCiN1bmRlZiBERUYKICBKU19BVE9NX0VORCwKfTsKI2luY2x1ZGUgInF1aWNranMvcXVpY2tqcy5oIgoKI2luY2x1ZGUgPHVub3JkZXJlZF9tYXA+CiNpbmNsdWRlIDx2ZWN0b3I+CiNpbmNsdWRlIDx0eXBlX3RyYWl0cz4KI2luY2x1ZGUgPGZ1bmN0aW9uYWw+CiNpbmNsdWRlIDxzdHJpbmc+CiNpbmNsdWRlIDxjc3RyaW5nPgojaW5jbHVkZSA8aW9zdHJlYW0+CiNpbmNsdWRlIDxpdGVyYXRvcj4KCnN0cnVjdCBqc2l0ZXI7CgpzdHJ1Y3QganNhdG9tIHsKCiAgc3RhdGljIGpzYXRvbQogIGNyZWF0ZShKU0NvbnRleHQqIGN0eCwgY29uc3QgY2hhciogc3RyKSB7CiAgICByZXR1cm4ganNhdG9tKEpTX05ld0F0b20oY3R4LCBzdHIpKTsKICB9CiAgc3RhdGljIGpzYXRvbQogIGNyZWF0ZShKU0NvbnRleHQqIGN0eCwgdWludDMyX3QgbnVtKSB7CiAgICByZXR1cm4ganNhdG9tKEpTX05ld0F0b21VSW50MzIoY3R4LCBudW0pKTsKICB9CiAgc3RhdGljIGpzYXRvbQogIGNyZWF0ZShKU0NvbnRleHQqIGN0eCwgY29uc3QgY2hhciogeCwgc2l6ZV90IG4pIHsKICAgIHJldHVybiBqc2F0b20oSlNfTmV3QXRvbUxlbihjdHgsIHgsIG4pKTsKICB9CiAgc3RhdGljIGpzYXRvbQogIGNyZWF0ZShKU0NvbnRleHQqIGN0eCwgY29uc3QganNhdG9tJiBhdG9tKSB7CiAgICByZXR1cm4ganNhdG9tKEpTX0R1cEF0b20oY3R4LCBhdG9tKSk7CiAgfQogIHN0YXRpYyBqc2F0b20KICBjcmVhdGUoSlNDb250ZXh0KiBjdHgsIGNvbnN0IEpTVmFsdWVDb25zdCYgdmFsdWUpIHsKICAgIHJldHVybiBqc2F0b20oSlNfVmFsdWVUb0F0b20oY3R4LCB2YWx1ZSkpOwogIH0KICBzdGF0aWMganNhdG9tCiAgY3JlYXRlKEpTQ29udGV4dCogY3R4LCBjb25zdCBzdGQ6OnN0cmluZyYgc3RyKSB7CiAgICByZXR1cm4gY3JlYXRlKGN0eCwgc3RyLmRhdGEoKSwgc3RyLnNpemUoKSk7CiAgfQoKICAvL35qc2F0b20oKSB7IGRlc3Ryb3koKTsgfQoKICBzdGF0aWMgdm9pZAogIGRlc3Ryb3koSlNDb250ZXh0KiBjdHgsIGpzYXRvbSYgYSkgewogICAgSlNfRnJlZUF0b20oY3R4LCBhLl9hKTsKICAgIGEuX2EgPSBKU19BVE9NX05VTEw7CiAgfQoKICBvcGVyYXRvciBKU0F0b20oKSBjb25zdCB7IHJldHVybiBfYTsgfQoKICBjb25zdCBjaGFyKgogIHRvX2NzdHJpbmcoSlNDb250ZXh0KiBfY3R4KSBjb25zdCB7CiAgICByZXR1cm4gSlNfQXRvbVRvQ1N0cmluZyhfY3R4LCBfYSk7CiAgfQoKICBKU1ZhbHVlCiAgdG9fdmFsdWUoSlNDb250ZXh0KiBfY3R4KSBjb25zdCB7CiAgICByZXR1cm4gSlNfQXRvbVRvVmFsdWUoX2N0eCwgX2EpOwogIH0KCiAgSlNWYWx1ZQogIHRvX3N0cmluZyhKU0NvbnRleHQqIF9jdHgpIGNvbnN0IHsKICAgIHJldHVybiBKU19BdG9tVG9TdHJpbmcoX2N0eCwgX2EpOwogIH0KCnByaXZhdGU6CiAganNhdG9tKEpTQXRvbSBhKSA6IF9hKGEpIHt9CgogIHN0YXRpYyBqc2F0b20KICBjcmVhdGUoSlNBdG9tIGEpIHsKICAgIGpzYXRvbSByZXQoYSk7CiAgICByZXR1cm4gcmV0OwogIH0KCiAgSlNBdG9tIF9hOwp9OwoKc3RydWN0IGpzcnQgewogIHR5cGVkZWYgSlNWYWx1ZSB2YWx1ZTsKICB0eXBlZGVmIEpTVmFsdWVDb25zdCBjb25zdF92YWx1ZTsKICB0eXBlZGVmIEpTQXRvbSBhdG9tOwoKICBzdGF0aWMgY29uc3RleHByIHZhbHVlIF90cnVlPSBKU19UUlVFLCBfZmFsc2UgPSBKU19GQUxTRSwgX251bGwgPSBKU19OVUxMLCBfdW5kZWZpbmVkID0gSlNfVU5ERUZJTkVEOwoKICBib29sIGluaXQoaW50IGFyZ2MsIGNoYXIqIGFyZ3ZbXSk7CiAgYm9vbCBjcmVhdGUoSlNDb250ZXh0KiBjdHggPSAwKTsKCiAganNydCgpIHt9CiAganNydChKU0NvbnRleHQqIGMpIDogY3R4KEpTX0R1cENvbnRleHQoYykpIHt9CiAgfmpzcnQoKTsKCiAgdmFsdWUKICBuZXdfc3RyaW5nKGNvbnN0IGNoYXIqIHN0cikgY29uc3QgewogICAgcmV0dXJuIEpTX05ld1N0cmluZyhjdHgsIHN0cik7CiAgfQoKICB0eXBlZGVmIHZhbHVlIGNfZnVuY3Rpb24oanNydCogcnQsIGNvbnN0X3ZhbHVlIHRoaXNfdmFsLCBpbnQgYXJnYywgY29uc3RfdmFsdWUqIGFyZ3YpOwoKICB2YWx1ZSBldmFsX2J1Zihjb25zdCBjaGFyKiBidWYsIGludCBidWZfbGVuLCBjb25zdCBjaGFyKiBmaWxlbmFtZSwgaW50IGV2YWxfZmxhZ3MpOwogIHZhbHVlIGV2YWxfZmlsZShjb25zdCBjaGFyKiBmaWxlbmFtZSwgaW50IG1vZHVsZSA9IC0xKTsKCiAgLy8gdmFsdWUgYWRkX2Z1bmN0aW9uKGNvbnN0IGNoYXIqIG5hbWUsIEpTQ0Z1bmN0aW9uKiBmbiwgaW50IGFyZ3MgPSAwKTsKCiAgdGVtcGxhdGU8Y2xhc3MgVD4gdm9pZCBnZXRfbnVtYmVyKGNvbnN0X3ZhbHVlIHZhbCwgVCYgcmVmKSBjb25zdDsKICB2b2lkIGdldF9zdHJpbmcoY29uc3RfdmFsdWUgdmFsLCBzdGQ6OnN0cmluZyYgc3RyKSBjb25zdDsKICB2b2lkIGdldF9zdHJpbmcoY29uc3RfdmFsdWUgdmFsLCBjb25zdCBjaGFyKiYgY3N0cikgY29uc3Q7CgogIHRlbXBsYXRlPGNsYXNzIFQ+IHZvaWQgZ2V0X2ludF9hcnJheShjb25zdF92YWx1ZSB2YWwsIFQmIHJlZikgY29uc3Q7CiAgdGVtcGxhdGU8Y2xhc3MgVD4gdm9pZCBnZXRfcG9pbnQoY29uc3RfdmFsdWUgdmFsLCBUJiByZWYpIGNvbnN0OwogIHRlbXBsYXRlPGNsYXNzIFQ+IHZvaWQgZ2V0X3BvaW50X2FycmF5KGNvbnN0X3ZhbHVlIHZhbCwgc3RkOjp2ZWN0b3I8VD4mIHJlZikgY29uc3Q7CiAgdGVtcGxhdGU8Y2xhc3MgVD4gdm9pZCBnZXRfcmVjdChjb25zdF92YWx1ZSB2YWwsIFQmIHJlZikgY29uc3Q7CiAgdGVtcGxhdGU8Y2xhc3MgVD4gdm9pZCBnZXRfY29sb3IoY29uc3RfdmFsdWUgdmFsLCBUJiByZWYpIGNvbnN0OwoKICB2b2lkCiAgZ2V0X2Jvb2xlYW4oY29uc3RfdmFsdWUgdmFsLCBib29sJiByZWYpIHsKICAgIGJvb2wgYiA9IEpTX1RvQm9vbChjdHgsIHZhbCk7CiAgICByZWYgPSBiOwogIH0KICBib29sCiAgZ2V0X2Jvb2xlYW4oY29uc3RfdmFsdWUgdmFsKSB7CiAgICBib29sIGI7CiAgICBnZXRfYm9vbGVhbih2YWwsIGIpOwogICAgcmV0dXJuIGI7CiAgfQoKICB2YWx1ZSBjcmVhdGVfYXJyYXkoaW50MzJfdCBzaXplID0gLTEpOwogIHZhbHVlIGNyZWF0ZV9vYmplY3QoKTsKICB0ZW1wbGF0ZTxjbGFzcyBUPiB2YWx1ZSBjcmVhdGUoVCBhcmcpOwogIHRlbXBsYXRlPGNsYXNzIFQ+IHZhbHVlIGNyZWF0ZV9wb2ludChUIHgsIFQgeSk7CgogIHRlbXBsYXRlPGNsYXNzIFQ+CiAgdmFsdWUKICBnZXRfcHJvcGVydHkoY29uc3RfdmFsdWUgb2JqLCBUIHByb3ApIGNvbnN0IHsKICAgIHRocm93IHN0ZDo6cnVudGltZV9lcnJvcigidGVtcGxhdGUgc3BlY2lhbGl6YXRpb24iKTsKICB9CgogIHZhbHVlIGdldF9wcm9wZXJ0eV9hdG9tKGNvbnN0X3ZhbHVlIG9iaiwgYXRvbSkgY29uc3Q7CiAgdmFsdWUgZ2V0X3Byb3BlcnR5X3N5bWJvbChjb25zdF92YWx1ZSBvYmosIGNvbnN0IGNoYXIqIHN5bWJvbCk7CgogIGJvb2wgaGFzX3Byb3BlcnR5KGNvbnN0X3ZhbHVlIG9iaiwgY29uc3QganNhdG9tJiBhdG9tKSBjb25zdDsKCiAgYm9vbAogIGhhc19wcm9wZXJ0eShjb25zdF92YWx1ZSBvYmosIGNvbnN0IHN0ZDo6c3RyaW5nJiBuYW1lKSBjb25zdCB7CiAgICBqc2F0b20gYXRvbSA9IGpzYXRvbTo6Y3JlYXRlKGN0eCwgbmFtZSk7CiAgICBib29sIHJldCA9IGhhc19wcm9wZXJ0eShvYmosIGF0b20pOwogICAganNhdG9tOjpkZXN0cm95KGN0eCwgYXRvbSk7CiAgICByZXR1cm4gcmV0OwogIH0KICBib29sCiAgaGFzX3Byb3BlcnR5KGNvbnN0X3ZhbHVlIG9iaiwgdWludDMyX3QgaW5kZXgpIGNvbnN0IHsKICAgIGpzYXRvbSBhdG9tID0ganNhdG9tOjpjcmVhdGUoY3R4LCBpbmRleCk7CiAgICBib29sIHJldCA9IGhhc19wcm9wZXJ0eShvYmosIGF0b20pOwogICAganNhdG9tOjpkZXN0cm95KGN0eCwgYXRvbSk7CiAgICByZXR1cm4gcmV0OwogIH0KICBib29sCiAgaGFzX3Byb3BlcnR5KGNvbnN0X3ZhbHVlIG9iaiwgY29uc3QgY29uc3RfdmFsdWUmIHByb3ApIGNvbnN0IHsKICAgIGpzYXRvbSBhdG9tID0ganNhdG9tOjpjcmVhdGUoY3R4LCBwcm9wKTsKICAgIGJvb2wgcmV0ID0gaGFzX3Byb3BlcnR5KG9iaiwgYXRvbSk7CiAgICBqc2F0b206OmRlc3Ryb3koY3R4LCBhdG9tKTsKICAgIHJldHVybiByZXQ7CiAgfQoKICB0ZW1wbGF0ZTxjbGFzcyBUPgogIHZvaWQKICBzZXRfcHJvcGVydHkoY29uc3RfdmFsdWUgb2JqLCBUIHByb3AsIHZhbHVlIHZhbCkge30KCiAgdm9pZCBzZXRfcHJvcGVydHkoY29uc3RfdmFsdWUgb2JqLCBjb25zdCBqc2F0b20mIGF0b20sIHZhbHVlIHZhbCwgaW50IGZsYWdzKTsKICB2b2lkCiAgc2V0X3Byb3BlcnR5KGNvbnN0X3ZhbHVlIG9iaiwgY29uc3Qgc3RkOjpzdHJpbmcmIG5hbWUsIHZhbHVlIHZhbCwgaW50IGZsYWdzKSB7CiAgICBqc2F0b20gYXRvbSA9IGpzYXRvbTo6Y3JlYXRlKGN0eCwgbmFtZSk7CiAgICBzZXRfcHJvcGVydHkob2JqLCBhdG9tLCB2YWwsIGZsYWdzKTsKICAgIGpzYXRvbTo6ZGVzdHJveShjdHgsIGF0b20pOwogIH0KCiAgdm9pZAogIHNldF9wcm9wZXJ0eShjb25zdF92YWx1ZSBvYmosIHVpbnQzMl90IGluZGV4LCB2YWx1ZSB2YWwsIGludCBmbGFncykgewogICAganNhdG9tIGF0b20gPSBqc2F0b206OmNyZWF0ZShjdHgsIGluZGV4KTsKICAgIHNldF9wcm9wZXJ0eShvYmosIGF0b20sIHZhbCwgZmxhZ3MpOwogICAganNhdG9tOjpkZXN0cm95KGN0eCwgYXRvbSk7CiAgfQoKICB2b2lkCiAgc2V0X3Byb3BlcnR5KGNvbnN0X3ZhbHVlIG9iaiwgY29uc3QgY29uc3RfdmFsdWUmIHByb3AsIHZhbHVlIHZhbCwgaW50IGZsYWdzKSB7CiAgICBqc2F0b20gYXRvbSA9IGpzYXRvbTo6Y3JlYXRlKGN0eCwgcHJvcCk7CiAgICBzZXRfcHJvcGVydHkob2JqLCBhdG9tLCB2YWwsIGZsYWdzKTsKICAgIGpzYXRvbTo6ZGVzdHJveShjdHgsIGF0b20pOwogIH0KCiAgdmFsdWUgZ2V0X2NvbnN0cnVjdG9yKGNvbnN0X3ZhbHVlIG9iaikgY29uc3Q7CiAgYm9vbCBoYXNfY29uc3RydWN0b3IoY29uc3RfdmFsdWUgb2JqKSBjb25zdDsKCiAgdmFsdWUgZ2V0X3Byb3RvdHlwZShjb25zdF92YWx1ZSBvYmopIGNvbnN0OwogIGJvb2wgaGFzX3Byb3RvdHlwZShjb25zdF92YWx1ZSBvYmopIGNvbnN0OwoKICBzdGQ6OnN0cmluZyBmdW5jdGlvbl9uYW1lKGNvbnN0X3ZhbHVlIGZuKSBjb25zdDsKCiAgc3RkOjpzdHJpbmcKICBjbGFzc19uYW1lKGNvbnN0X3ZhbHVlIG9iaikgY29uc3QgewogICAgcmV0dXJuIGZ1bmN0aW9uX25hbWUoZ2V0X2NvbnN0cnVjdG9yKG9iaikpOwogIH0KCiAgdmFsdWUgZ2V0X2dsb2JhbChjb25zdCBjaGFyKiBuYW1lKSBjb25zdDsKICB2b2lkIHNldF9nbG9iYWwoY29uc3QgY2hhciogbmFtZSwgdmFsdWUgdik7CgogIHZhbHVlIGdldF9zeW1ib2woY29uc3QgY2hhciogbmFtZSkgY29uc3Q7CiAgdmFsdWUKICBnZXRfaXRlcmF0b3IoY29uc3RfdmFsdWUgb2JqLCBjb25zdCBjaGFyKiBzeW1ib2wgPSAiaXRlcmF0b3IiKSB7CiAgICByZXR1cm4gZ2V0X3Byb3BlcnR5X3N5bWJvbChvYmosIHN5bWJvbCk7CiAgfQogIHZhbHVlIGNhbGxfaXRlcmF0b3IoY29uc3RfdmFsdWUgb2JqLCBjb25zdCBjaGFyKiBzeW1ib2wgPSAiaXRlcmF0b3IiKTsKICB2YWx1ZSBjYWxsX2l0ZXJhdG9yX25leHQoY29uc3RfdmFsdWUgb2JqLCBjb25zdCBjaGFyKiBzeW1ib2wgPSAiaXRlcmF0b3IiKTsKCiAgY29uc3RfdmFsdWUKICBnbG9iYWxfb2JqZWN0KCkgY29uc3QgewogICAgdmFsdWUgZ2xvYmFsVGhpcyA9IEpTX0dldEdsb2JhbE9iamVjdChjdHgpOwogICAgcmV0dXJuIGdsb2JhbFRoaXM7CiAgfQogIHZhbHVlCiAgZ2xvYmFsX29iamVjdCgpIHsKICAgIHZhbHVlIGdsb2JhbFRoaXMgPSBKU19HZXRHbG9iYWxPYmplY3QoY3R4KTsKICAgIHJldHVybiBnbG9iYWxUaGlzOwogIH0KCiAgdmFsdWUgY2FsbChjb25zdF92YWx1ZSBmdW5jLCBzaXplX3QgYXJnYywgdmFsdWUgYXJndltdKSBjb25zdDsKICB2YWx1ZSBjYWxsKGNvbnN0X3ZhbHVlIGZ1bmMsIHN0ZDo6dmVjdG9yPHZhbHVlPiYgYXJncykgY29uc3Q7CiAgdmFsdWUgY2FsbChjb25zdCBjaGFyKiBuYW1lLCBzaXplX3QgYXJnYywgdmFsdWUgYXJndltdKSBjb25zdDsKICB2YWx1ZSBjYWxsKGNvbnN0X3ZhbHVlIGZ1bmMsIGNvbnN0X3ZhbHVlIHRoaXNfYXJnLCBzaXplX3QgYXJnYywgdmFsdWUgYXJndltdKSBjb25zdDsKCiAgc3RkOjpzdHJpbmcgdG9fc3RyKGNvbnN0X3ZhbHVlIHZhbCk7CgogIHRlbXBsYXRlPGNsYXNzIFQ+IFQgdG8oY29uc3RfdmFsdWUgdmFsKTsKICB0ZW1wbGF0ZTxjbGFzcyBUPiB2YWx1ZSBmcm9tKGNvbnN0IFQmIHZhbCk7CgogIGNvbnN0X3ZhbHVlIHByb3RvdHlwZShjb25zdF92YWx1ZSBvYmopIGNvbnN0OwoKICB2b2lkIHByb3BlcnR5X25hbWVzKGNvbnN0X3ZhbHVlIG9iaiwgc3RkOjp2ZWN0b3I8Y29uc3QgY2hhcio+JiBvdXQsIGJvb2wgZW51bV9vbmx5ID0gZmFsc2UsIGJvb2wgcmVjdXJzaXZlID0gZmFsc2UpIGNvbnN0OwoKICBzdGQ6OnZlY3Rvcjxjb25zdCBjaGFyKj4gcHJvcGVydHlfbmFtZXMoY29uc3RfdmFsdWUgb2JqLCBib29sIGVudW1fb25seSA9IHRydWUsIGJvb2wgcmVjdXJzaXZlID0gdHJ1ZSkgY29uc3Q7CgogIHZvaWQgZHVtcF9lcnJvcigpIGNvbnN0OwoKICB2b2lkIGR1bXBfZXhjZXB0aW9uKEpTVmFsdWVDb25zdCBleGNlcHRpb25fdmFsLCBib29sIGlzX3Rocm93KSBjb25zdDsKCiAgYm9vbCBpc19udW1iZXIoY29uc3RfdmFsdWUgdmFsKSBjb25zdDsKICBib29sIGlzX2JpZ19pbnQoY29uc3RfdmFsdWUgdmFsKSBjb25zdDsKICBib29sIGlzX2JpZ19mbG9hdChjb25zdF92YWx1ZSB2YWwpIGNvbnN0OwogIGJvb2wgaXNfYmlnX2RlY2ltYWwoY29uc3RfdmFsdWUgdmFsKSBjb25zdDsKICBib29sIGlzX2Jvb2woY29uc3RfdmFsdWUgdmFsKSBjb25zdDsKICBib29sIGlzX251bGwoY29uc3RfdmFsdWUgdmFsKSBjb25zdDsKICBib29sIGlzX3VuZGVmaW5lZChjb25zdF92YWx1ZSB2YWwpIGNvbnN0OwogIGJvb2wgaXNfZXhjZXB0aW9uKGNvbnN0X3ZhbHVlIHZhbCkgY29uc3Q7CiAgYm9vbCBpc191bmluaXRpYWxpemVkKGNvbnN0X3ZhbHVlIHZhbCkgY29uc3Q7CiAgYm9vbCBpc19zdHJpbmcoY29uc3RfdmFsdWUgdmFsKSBjb25zdDsKICBib29sIGlzX3N5bWJvbChjb25zdF92YWx1ZSB2YWwpIGNvbnN0OwogIGJvb2wgaXNfb2JqZWN0KGNvbnN0X3ZhbHVlIHZhbCkgY29uc3Q7CiAgYm9vbCBpc19lcnJvcihjb25zdF92YWx1ZSB2YWwpIGNvbnN0OwogIGJvb2wgaXNfZnVuY3Rpb24oY29uc3RfdmFsdWUgdmFsKSBjb25zdDsKICBib29sIGlzX2NvbnN0cnVjdG9yKGNvbnN0X3ZhbHVlIHZhbCkgY29uc3Q7CiAgYm9vbCBpc19hcnJheShjb25zdF92YWx1ZSB2YWwpIGNvbnN0OwogIGJvb2wgaXNfZXh0ZW5zaWJsZShjb25zdF92YWx1ZSB2YWwpIGNvbnN0OwoKICBib29sIGlzX3Byb21pc2UoY29uc3RfdmFsdWUgdmFsKTsKICBib29sIGlzX3BvaW50KGNvbnN0X3ZhbHVlIHZhbCkgY29uc3Q7CiAgYm9vbCBpc19yZWN0KGNvbnN0X3ZhbHVlIHZhbCkgY29uc3Q7CiAgYm9vbCBpc19jb2xvcihjb25zdF92YWx1ZSB2YWwpIGNvbnN0OwogIGJvb2wgaXNfYXJyYXlfbGlrZShjb25zdF92YWx1ZSB2YWwpIGNvbnN0OwoKICBib29sIGlzX2l0ZXJhYmxlKGNvbnN0X3ZhbHVlIHZhbCk7CiAgYm9vbCBpc19pdGVyYXRvcihjb25zdF92YWx1ZSB2YWwpIGNvbnN0OwoKICAvLyBpbnQgdGFnKGNvbnN0X3ZhbHVlIHZhbCkgY29uc3Q7CiAgaW50IHRhZyh2YWx1ZSB2YWwpIGNvbnN0OwogIHZvaWQqIG9iaihjb25zdF92YWx1ZSB2YWwpIGNvbnN0OwoKICBzdGQ6OnN0cmluZwogIHR5cGVzdHIoY29uc3RfdmFsdWUgdmFsKSBjb25zdCB7CiAgICBpZihpc19udW1iZXIodmFsKSkKICAgICAgcmV0dXJuICJudW1iZXIiOwogICAgZWxzZSBpZihpc19ib29sKHZhbCkpCiAgICAgIHJldHVybiAiYm9vbGVhbiI7CiAgICBlbHNlIGlmKGlzX3N5bWJvbCh2YWwpKQogICAgICByZXR1cm4gInN5bWJvbCI7CiAgICBlbHNlIGlmKGlzX3VuZGVmaW5lZCh2YWwpKQogICAgICByZXR1cm4gInVuZGVmaW5lZCI7CgogICAgLyogICBlbHNlIGlmKGlzX2NvbnN0cnVjdG9yKHZhbCkpCiAgICAgICByZXR1cm4gImNvbnN0cnVjdG9yIjsqLwogICAgZWxzZSBpZihpc19vYmplY3QodmFsKSB8fCBpc19udWxsKHZhbCkpIHsKICAgICAgaWYoIWlzX251bGwodmFsKSAmJiBvYmoodmFsKSkgewogICAgICAgIGlmKGlzX2Z1bmN0aW9uKHZhbCkpCiAgICAgICAgICByZXR1cm4gImZ1bmN0aW9uIjsKICAgICAgICBlbHNlIGlmKGlzX2FycmF5KHZhbCkpCiAgICAgICAgICByZXR1cm4gImFycmF5IjsKICAgICAgICBlbHNlIGlmKGlzX3BvaW50KHZhbCkpCiAgICAgICAgICByZXR1cm4gInBvaW50IjsKICAgICAgICBlbHNlIGlmKGlzX3JlY3QodmFsKSkKICAgICAgICAgIHJldHVybiAicmVjdCI7CiAgICAgICAgZWxzZSBpZihpc19jb2xvcih2YWwpKQogICAgICAgICAgcmV0dXJuICJjb2xvciI7CiAgICAgIH0KICAgICAgcmV0dXJuICJvYmplY3QiOwogICAgfQogICAgcmV0dXJuICJ1bmtub3duIjsKICB9CgogIHN0ZDo6c3RyaW5nCiAgdG9fc3RyaW5nKGNvbnN0X3ZhbHVlIGFyZykgY29uc3QgewogICAgc3RkOjpzdHJpbmcgcmV0OwogICAgZ2V0X3N0cmluZyhhcmcsIHJldCk7CiAgICByZXR1cm4gcmV0OwogIH0KCiAgYXRvbSBuZXdfYXRvbShjb25zdCBjaGFyKiwgc2l6ZV90KSBjb25zdDsKICBhdG9tIG5ld19hdG9tKGNvbnN0IGNoYXIqKSBjb25zdDsKICBhdG9tIG5ld19hdG9tKHVpbnQzMl90KSBjb25zdDsKICBhdG9tIHZhbHVlX3RvX2F0b20oY29uc3QgY29uc3RfdmFsdWUmIHYpIGNvbnN0OwoKICB2b2lkIGZyZWVfYXRvbShjb25zdCBhdG9tJiBhKSBjb25zdDsKCiAgdmFsdWUgYXRvbV90b192YWx1ZShjb25zdCBhdG9tJiBhKSBjb25zdDsKICB2YWx1ZSBhdG9tX3RvX3N0cmluZyhjb25zdCBhdG9tJiBhKSBjb25zdDsKICBjb25zdCBjaGFyKiBhdG9tX3RvX2NzdHJpbmcoY29uc3QgYXRvbSYgYSkgY29uc3Q7CgogIHZvaWQKICBmcmVlX3ZhbHVlKGNvbnN0IHZhbHVlJiB2KSBjb25zdCB7CiAgICBKU19GcmVlVmFsdWUoY3R4LCB2KTsKICB9Cgpwcm90ZWN0ZWQ6CiAgdmFsdWUgZ2V0X3VuZGVmaW5lZCgpIGNvbnN0OwogIHZhbHVlIGdldF9udWxsKCkgY29uc3Q7CiAgdmFsdWUgZ2V0X3RydWUoKSBjb25zdDsKICB2YWx1ZSBnZXRfZmFsc2UoKSBjb25zdDsKCnB1YmxpYzoKICBKU0NvbnRleHQqIGN0eDsKCnByaXZhdGU6CiAgSlNSdW50aW1lKgogIGdldF9ydW50aW1lKCkgY29uc3QgewogICAgcmV0dXJuIEpTX0dldFJ1bnRpbWUoY3R4KTsKICB9CgpwdWJsaWM6CiAgaW50MzJfdCBnZXRfbGVuZ3RoKGNvbnN0IGNvbnN0X3ZhbHVlJiB2KSBjb25zdDsKICBqc2l0ZXIgYmVnaW4oSlNWYWx1ZSYgdik7CiAganNpdGVyIGVuZChKU1ZhbHVlJiB2KTsKCnByaXZhdGU6CiAgZnJpZW5kIGNsYXNzIGpzaXRlcjsKCiAgc3RkOjpmdW5jdGlvbjxKU1ZhbHVlKEpTVmFsdWUsIHVpbnQzMl90KT4gaW5kZXgoKSBjb25zdDsKICBzdGQ6OmZ1bmN0aW9uPEpTVmFsdWUodWludDMyX3QpPiBpbmRleChjb25zdCBKU1ZhbHVlQ29uc3QmKSBjb25zdDsKfTsKCmlubGluZSB2b2lkCmpzcnQ6OmdldF9zdHJpbmcoY29uc3RfdmFsdWUgdmFsLCBzdGQ6OnN0cmluZyYgc3RyKSBjb25zdCB7CiAgY29uc3QgY2hhciogcyA9IEpTX1RvQ1N0cmluZyhjdHgsIHZhbCk7CiAgc3RyID0gc3RkOjpzdHJpbmcocyk7CiAgSlNfRnJlZUNTdHJpbmcoY3R4LCBzKTsKfQoKaW5saW5lIHZvaWQKanNydDo6Z2V0X3N0cmluZyhjb25zdF92YWx1ZSB2YWwsIGNvbnN0IGNoYXIqJiBzdHIpIGNvbnN0IHsKICBjb25zdCBjaGFyKiBzID0gSlNfVG9DU3RyaW5nKGN0eCwgdmFsKTsKICBzdHIgPSBzdHJkdXAocyk7CiAgSlNfRnJlZUNTdHJpbmcoY3R4LCBzKTsKfQoKdGVtcGxhdGU8PgppbmxpbmUgdm9pZApqc3J0OjpnZXRfbnVtYmVyPGludDMyX3Q+KGNvbnN0X3ZhbHVlIHZhbCwgaW50MzJfdCYgcmVmKSBjb25zdCB7CiAgaW50MzJfdCBpID0gLTE7CiAgSlNfVG9JbnQzMihjdHgsICZpLCB2YWwpOwogIHJlZiA9IGk7Cn0KCnRlbXBsYXRlPD4KaW5saW5lIHZvaWQKanNydDo6Z2V0X251bWJlcjxpbnQ2NF90Pihjb25zdF92YWx1ZSB2YWwsIGludDY0X3QmIHJlZikgY29uc3QgewogIGludDY0X3QgaSA9IDA7CiAgSlNfVG9JbnQ2NChjdHgsICZpLCB2YWwpOwogIHJlZiA9IGk7Cn0KCnRlbXBsYXRlPD4KaW5saW5lIHZvaWQKanNydDo6Z2V0X251bWJlcjxkb3VibGU+KGNvbnN0X3ZhbHVlIHZhbCwgZG91YmxlJiByZWYpIGNvbnN0IHsKICBkb3VibGUgZiA9IDA7CiAgSlNfVG9GbG9hdDY0KGN0eCwgJmYsIHZhbCk7CiAgcmVmID0gZjsKfQoKdGVtcGxhdGU8PgppbmxpbmUgdm9pZApqc3J0OjpnZXRfbnVtYmVyPGZsb2F0Pihjb25zdF92YWx1ZSB2YWwsIGZsb2F0JiByZWYpIGNvbnN0IHsKICBkb3VibGUgZiA9IDA7CiAgZ2V0X251bWJlcih2YWwsIGYpOwogIHJlZiA9IGY7Cn0KCnRlbXBsYXRlPD4KaW5saW5lIHZvaWQKanNydDo6Z2V0X251bWJlcjx1aW50MzJfdD4oY29uc3RfdmFsdWUgdmFsLCB1aW50MzJfdCYgcmVmKSBjb25zdCB7CiAgaW50NjRfdCBpID0gMDsKICBnZXRfbnVtYmVyPGludDY0X3Q+KHZhbCwgaSk7CiAgcmVmID0gc3RhdGljX2Nhc3Q8dWludDMyX3Q+KGkpOwp9Cgp0ZW1wbGF0ZTxjbGFzcyBUPgppbmxpbmUgdm9pZApqc3J0OjpnZXRfaW50X2FycmF5KGNvbnN0X3ZhbHVlIHZhbCwgVCYgcmVmKSBjb25zdCB7CiAgdWludDMyX3QgaSwgbiwgbGVuZ3RoID0gMCwgYXJyID0gSlNfSXNBcnJheShjdHgsIHZhbCk7CiAgaWYoYXJyKSB7CiAgICBnZXRfbnVtYmVyKGdldF9wcm9wZXJ0eTxjb25zdCBjaGFyKj4odmFsLCAibGVuZ3RoIiksIGxlbmd0aCk7CiAgICBmb3IoaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykgewogICAgICB2YWx1ZSB2ID0gZ2V0X3Byb3BlcnR5PHVpbnQzMl90Pih2YWwsIGkpOwogICAgICBnZXRfbnVtYmVyKHYsIG4pOwogICAgICByZWZbaV0gPSBuOwogICAgfQogIH0KfQoKdGVtcGxhdGU8Y2xhc3MgVD4KaW5saW5lIHZvaWQKanNydDo6Z2V0X3BvaW50KGNvbnN0X3ZhbHVlIHZhbCwgVCYgcmVmKSBjb25zdCB7CiAgY29uc3RfdmFsdWUgdnggPSBfdW5kZWZpbmVkLCB2eSA9IF91bmRlZmluZWQ7CgogIGlmKGlzX2FycmF5KHZhbCkpIHsKICAgIHVpbnQzMl90IGxlbmd0aDsKICAgIGdldF9udW1iZXIoZ2V0X3Byb3BlcnR5PGNvbnN0IGNoYXIqPih2YWwsICJsZW5ndGgiKSwgbGVuZ3RoKTsKICAgIGlmKGxlbmd0aCA+PSAyKSB7CiAgICAgIHZ4ID0gZ2V0X3Byb3BlcnR5PHVpbnQzMl90Pih2YWwsIDApOwogICAgICB2eSA9IGdldF9wcm9wZXJ0eTx1aW50MzJfdD4odmFsLCAxKTsKICAgIH0gZWxzZSB7CiAgICAgIHJldHVybjsKICAgIH0KICB9IGVsc2UgaWYoaXNfb2JqZWN0KHZhbCkgJiYgaGFzX3Byb3BlcnR5KHZhbCwgIngiKSAmJiBoYXNfcHJvcGVydHkodmFsLCAieSIpKSB7CiAgICB2eCA9IGdldF9wcm9wZXJ0eTxjb25zdCBjaGFyKj4odmFsLCAieCIpOwogICAgdnkgPSBnZXRfcHJvcGVydHk8Y29uc3QgY2hhcio+KHZhbCwgInkiKTsKICB9CgogIGdldF9udW1iZXIodngsIHJlZi54KTsKICBnZXRfbnVtYmVyKHZ5LCByZWYueSk7Cn0KCnRlbXBsYXRlPGNsYXNzIFQ+CmlubGluZSB2b2lkCmpzcnQ6OmdldF9yZWN0KGNvbnN0X3ZhbHVlIHZhbCwgVCYgcmVmKSBjb25zdCB7CiAgaWYoaXNfb2JqZWN0KHZhbCkpIHsKICAgIGRvdWJsZSB2dywgdmg7CgogICAgZ2V0X3BvaW50KHZhbCwgcmVmKTsKCiAgICBnZXRfbnVtYmVyKGdldF9wcm9wZXJ0eTxjb25zdCBjaGFyKj4odmFsLCAid2lkdGgiKSwgdncpOwogICAgZ2V0X251bWJlcihnZXRfcHJvcGVydHk8Y29uc3QgY2hhcio+KHZhbCwgImhlaWdodCIpLCB2aCk7CgogICAgcmVmLndpZHRoID0gdnc7CiAgICByZWYuaGVpZ2h0ID0gdmg7CiAgfQp9Cgp0ZW1wbGF0ZTxjbGFzcyBUPgppbmxpbmUgdm9pZApqc3J0OjpnZXRfY29sb3IoY29uc3RfdmFsdWUgdmFsLCBUJiByZWYpIGNvbnN0IHsKICBjb25zdF92YWx1ZSB2ciA9IF91bmRlZmluZWQsIHZnID0gX3VuZGVmaW5lZCwgdmIgPSBfdW5kZWZpbmVkLCB2YSA9IF91bmRlZmluZWQ7CgogIGlmKGlzX29iamVjdCh2YWwpICYmIGhhc19wcm9wZXJ0eSh2YWwsICJyIikgJiYgaGFzX3Byb3BlcnR5KHZhbCwgImciKSAmJiBoYXNfcHJvcGVydHkodmFsLCAiYiIpKSB7CiAgICB2ciA9IGdldF9wcm9wZXJ0eTxjb25zdCBjaGFyKj4odmFsLCAiciIpOwogICAgdmcgPSBnZXRfcHJvcGVydHk8Y29uc3QgY2hhcio+KHZhbCwgImciKTsKICAgIHZiID0gZ2V0X3Byb3BlcnR5PGNvbnN0IGNoYXIqPih2YWwsICJiIik7CiAgICB2YSA9IGdldF9wcm9wZXJ0eTxjb25zdCBjaGFyKj4odmFsLCAiYSIpOwogIH0gZWxzZSBpZihpc19hcnJheV9saWtlKHZhbCkpIHsKICAgIHVpbnQzMl90IGxlbmd0aDsKICAgIGdldF9udW1iZXIoZ2V0X3Byb3BlcnR5PGNvbnN0IGNoYXIqPih2YWwsICJsZW5ndGgiKSwgbGVuZ3RoKTsKICAgIGlmKGxlbmd0aCA+PSAzKSB7CiAgICAgIHZyID0gZ2V0X3Byb3BlcnR5PHVpbnQzMl90Pih2YWwsIDApOwogICAgICB2ZyA9IGdldF9wcm9wZXJ0eTx1aW50MzJfdD4odmFsLCAxKTsKICAgICAgdmIgPSBnZXRfcHJvcGVydHk8dWludDMyX3Q+KHZhbCwgMik7CiAgICAgIHZhID0gZ2V0X3Byb3BlcnR5PHVpbnQzMl90Pih2YWwsIDMpOwogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuOwogICAgfQogIH0KICBnZXRfbnVtYmVyKHZiLCByZWZbMF0pOwogIGdldF9udW1iZXIodmcsIHJlZlsxXSk7CiAgZ2V0X251bWJlcih2ciwgcmVmWzJdKTsKICBnZXRfbnVtYmVyKHZhLCByZWZbM10pOwp9Cgp0ZW1wbGF0ZTxjbGFzcyBUPgppbmxpbmUgdm9pZApqc3J0OjpnZXRfcG9pbnRfYXJyYXkoY29uc3RfdmFsdWUgdmFsLCBzdGQ6OnZlY3RvcjxUPiYgcmVmKSBjb25zdCB7CiAgaWYoaXNfYXJyYXlfbGlrZSh2YWwpKSB7CiAgICB1aW50MzJfdCBpLCBsZW5ndGg7CgogICAgZ2V0X251bWJlcihnZXRfcHJvcGVydHk8Y29uc3QgY2hhcio+KHZhbCwgImxlbmd0aCIpLCBsZW5ndGgpOwogICAgcmVmLnJlc2l6ZShsZW5ndGgpOwoKICAgIGZvcihpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7CiAgICAgIEpTVmFsdWVDb25zdCBwdCA9IGdldF9wcm9wZXJ0eTx1aW50MzJfdD4odmFsLCBpKTsKCiAgICAgIGdldF9wb2ludChwdCwgcmVmW2ldKTsKICAgIH0KICB9Cn0KCnRlbXBsYXRlPD4KaW5saW5lIGpzcnQ6OnZhbHVlCmpzcnQ6OmNyZWF0ZTxkb3VibGU+KGRvdWJsZSBudW0pIHsKICByZXR1cm4gSlNfTmV3RmxvYXQ2NChjdHgsIG51bSk7Cn0KCnRlbXBsYXRlPD4KaW5saW5lIGpzcnQ6OnZhbHVlCmpzcnQ6OmNyZWF0ZTxmbG9hdD4oZmxvYXQgbnVtKSB7CiAgcmV0dXJuIGNyZWF0ZShzdGF0aWNfY2FzdDxkb3VibGU+KG51bSkpOwp9Cgp0ZW1wbGF0ZTw+CmlubGluZSBqc3J0Ojp2YWx1ZQpqc3J0OjpjcmVhdGU8aW50PihpbnQgbnVtKSB7CiAgcmV0dXJuIEpTX05ld0ludDMyKGN0eCwgbnVtKTsKfQoKdGVtcGxhdGU8PgppbmxpbmUganNydDo6dmFsdWUKanNydDo6Y3JlYXRlPGNvbnN0IGNoYXIqPihjb25zdCBjaGFyKiBzdHIpIHsKICByZXR1cm4gSlNfTmV3U3RyaW5nKGN0eCwgc3RyKTsKfQoKdGVtcGxhdGU8PgppbmxpbmUganNydDo6dmFsdWUKanNydDo6Y3JlYXRlPGJvb2w+KGJvb2wgYikgewogIHJldHVybiBiID8gZ2V0X3RydWUoKSA6IGdldF9mYWxzZSgpOwp9CgppbmxpbmUganNydDo6dmFsdWUKanNydDo6Y3JlYXRlX2FycmF5KGludDMyX3Qgc2l6ZSkgewogIHZhbHVlIHJldCA9IEpTX05ld0FycmF5KGN0eCk7CiAgaWYoc2l6ZSA+PSAwKQogICAgSlNfU2V0UHJvcGVydHlTdHIoY3R4LCByZXQsICJsZW5ndGgiLCBKU19OZXdJbnQzMihjdHgsIHNpemUpKTsKCiAgcmV0dXJuIHJldDsKfQoKaW5saW5lIGpzcnQ6OnZhbHVlCmpzcnQ6OmNyZWF0ZV9vYmplY3QoKSB7CiAgcmV0dXJuIEpTX05ld09iamVjdChjdHgpOwp9Cgp0ZW1wbGF0ZTxjbGFzcyBUPgppbmxpbmUganNydDo6dmFsdWUKanNydDo6Y3JlYXRlKFQgYXJnKSB7CiAgcmV0dXJuIHN0ZDo6aXNfcG9pbnRlcjxUPjo6dmFsdWUgJiYgYXJnID09IG51bGxwdHIgPyBnZXRfbnVsbCgpIDogZ2V0X3VuZGVmaW5lZCgpOwp9Cgp0ZW1wbGF0ZTxjbGFzcyBUPgppbmxpbmUganNydDo6dmFsdWUKanNydDo6Y3JlYXRlX3BvaW50KFQgeCwgVCB5KSB7CiAgdmFsdWUgb2JqID0gSlNfTmV3T2JqZWN0KGN0eCk7CiAgSlNfU2V0UHJvcGVydHlTdHIoY3R4LCBvYmosICJ4IiwgY3JlYXRlKHgpKTsKICBKU19TZXRQcm9wZXJ0eVN0cihjdHgsIG9iaiwgInkiLCBjcmVhdGUoeSkpOwogIHJldHVybiBvYmo7Cn0KCnRlbXBsYXRlPD4KaW5saW5lIGpzcnQ6OnZhbHVlCmpzcnQ6OmdldF9wcm9wZXJ0eTx1aW50MzJfdD4oY29uc3RfdmFsdWUgb2JqLCB1aW50MzJfdCBpbmRleCkgY29uc3QgewogIHJldHVybiBKU19HZXRQcm9wZXJ0eVVpbnQzMihjdHgsIG9iaiwgaW5kZXgpOwp9Cgp0ZW1wbGF0ZTw+CmlubGluZSBqc3J0Ojp2YWx1ZQpqc3J0OjpnZXRfcHJvcGVydHk8aW50Pihjb25zdF92YWx1ZSBvYmosIGludCBpbmRleCkgY29uc3QgewogIHJldHVybiBKU19HZXRQcm9wZXJ0eVVpbnQzMihjdHgsIG9iaiwgaW5kZXgpOwp9Cgp0ZW1wbGF0ZTw+CmlubGluZSBqc3J0Ojp2YWx1ZQpqc3J0OjpnZXRfcHJvcGVydHk8Y29uc3Qgc3RkOjpzdHJpbmcmPihjb25zdF92YWx1ZSBvYmosIGNvbnN0IHN0ZDo6c3RyaW5nJiBuYW1lKSBjb25zdCB7CiAgcmV0dXJuIEpTX0dldFByb3BlcnR5U3RyKGN0eCwgb2JqLCBuYW1lLmNfc3RyKCkpOwp9Cgp0ZW1wbGF0ZTw+CmlubGluZSBqc3J0Ojp2YWx1ZQpqc3J0OjpnZXRfcHJvcGVydHk8Y29uc3QgY2hhcio+KGNvbnN0X3ZhbHVlIG9iaiwgY29uc3QgY2hhciogbmFtZSkgY29uc3QgewogIHJldHVybiBKU19HZXRQcm9wZXJ0eVN0cihjdHgsIG9iaiwgbmFtZSk7Cn0KCmlubGluZSBqc3J0Ojp2YWx1ZQpqc3J0OjpnZXRfcHJvcGVydHlfYXRvbShjb25zdF92YWx1ZSBvYmosIGF0b20gYSkgY29uc3QgewogIHJldHVybiBKU19HZXRQcm9wZXJ0eShjdHgsIG9iaiwgYSk7Cn0KCnRlbXBsYXRlPD4KaW5saW5lIGpzcnQ6OnZhbHVlCmpzcnQ6OmdldF9wcm9wZXJ0eTxqc3J0Ojp2YWx1ZT4oY29uc3RfdmFsdWUgb2JqLCB2YWx1ZSBwcm9wKSBjb25zdCB7CiAgcmV0dXJuIGdldF9wcm9wZXJ0eV9hdG9tKG9iaiwgdmFsdWVfdG9fYXRvbShwcm9wKSk7Cn0KCmlubGluZSBqc3J0Ojp2YWx1ZQpqc3J0OjpnZXRfY29uc3RydWN0b3IoanNydDo6Y29uc3RfdmFsdWUgb2JqKSBjb25zdCB7CiAgcmV0dXJuIGdldF9wcm9wZXJ0eTxjb25zdCBjaGFyKj4oZ2V0X3Byb3RvdHlwZShvYmopLCAiY29uc3RydWN0b3IiKTsKfQoKaW5saW5lIGJvb2wKanNydDo6aGFzX2NvbnN0cnVjdG9yKGpzcnQ6OmNvbnN0X3ZhbHVlIG9iaikgY29uc3QgewogIHJldHVybiAhaXNfdW5kZWZpbmVkKGdldF9jb25zdHJ1Y3RvcihvYmopKTsKfQoKaW5saW5lIGpzcnQ6OnZhbHVlCmpzcnQ6OmdldF9wcm90b3R5cGUoanNydDo6Y29uc3RfdmFsdWUgb2JqKSBjb25zdCB7CiAgcmV0dXJuIEpTX0dldFByb3RvdHlwZShjdHgsIG9iaik7Cn0KCmlubGluZSBib29sCmpzcnQ6Omhhc19wcm90b3R5cGUoanNydDo6Y29uc3RfdmFsdWUgb2JqKSBjb25zdCB7CiAgcmV0dXJuICFpc191bmRlZmluZWQoZ2V0X3Byb3RvdHlwZShvYmopKTsKfQoKaW5saW5lIHN0ZDo6c3RyaW5nCmpzcnQ6OmZ1bmN0aW9uX25hbWUoanNydDo6Y29uc3RfdmFsdWUgZm4pIGNvbnN0IHsKICByZXR1cm4gdG9fc3RyaW5nKGdldF9wcm9wZXJ0eTxjb25zdCBjaGFyKj4oZm4sICJuYW1lIikpOwp9CgppbmxpbmUgYm9vbApqc3J0OjpoYXNfcHJvcGVydHkoY29uc3RfdmFsdWUgb2JqLCBjb25zdCBqc2F0b20mIGF0b20pIGNvbnN0IHsKICByZXR1cm4gSlNfSGFzUHJvcGVydHkoY3R4LCBvYmosIGF0b20pOwp9Cgp0ZW1wbGF0ZTw+CmlubGluZSB2b2lkCmpzcnQ6OnNldF9wcm9wZXJ0eTxjb25zdCBjaGFyKj4oY29uc3RfdmFsdWUgb2JqLCBjb25zdCBjaGFyKiBuYW1lLCB2YWx1ZSB2YWwpIHsKICAvLyBKU19TZXRQcm9wZXJ0eVN0cihjdHgsIG9iaiwgbmFtZSwgdmFsKTsKICBKU19EZWZpbmVQcm9wZXJ0eVZhbHVlU3RyKGN0eCwgb2JqLCBuYW1lLCB2YWwsIEpTX1BST1BfQ19XX0UpOwp9Cgp0ZW1wbGF0ZTw+CmlubGluZSB2b2lkCmpzcnQ6OnNldF9wcm9wZXJ0eTx1aW50MzJfdD4oY29uc3RfdmFsdWUgb2JqLCB1aW50MzJfdCBpbmRleCwgdmFsdWUgdmFsKSB7CiAgSlNfU2V0UHJvcGVydHlVaW50MzIoY3R4LCBvYmosIGluZGV4LCB2YWwpOwp9Cgp0ZW1wbGF0ZTw+CmlubGluZSB2b2lkCmpzcnQ6OnNldF9wcm9wZXJ0eTxjb25zdCBqc2F0b20mPihjb25zdF92YWx1ZSBvYmosIGNvbnN0IGpzYXRvbSYgYXRvbSwgdmFsdWUgdmFsKSB7CiAgSlNfU2V0UHJvcGVydHkoY3R4LCBvYmosIGF0b20sIHZhbCk7Cn0KCmlubGluZSB2b2lkCmpzcnQ6OnNldF9wcm9wZXJ0eShjb25zdF92YWx1ZSBvYmosIGNvbnN0IGpzYXRvbSYgYXRvbSwgdmFsdWUgdmFsLCBpbnQgZmxhZ3MpIHsKICBKU19TZXRQcm9wZXJ0eUludGVybmFsKGN0eCwgb2JqLCBhdG9tLCB2YWwsIGZsYWdzKTsKfQoKdGVtcGxhdGU8Y2xhc3MgVD4KaW5saW5lIGpzcnQ6OnZhbHVlCnZlY3Rvcl90b19qcyhqc3J0JiBqcywgY29uc3QgVCYgdiwgc2l6ZV90IG4sIGNvbnN0IHN0ZDo6ZnVuY3Rpb248anNydDo6dmFsdWUoY29uc3QgdHlwZW5hbWUgVDo6dmFsdWVfdHlwZSYpPiYgZm4pIHsKICB1c2luZyBzdGQ6OnBsYWNlaG9sZGVyczo6XzE7CiAganNydDo6dmFsdWUgcmV0ID0ganMuY3JlYXRlX2FycmF5KG4pOwogIGZvcih1aW50MzJfdCBpID0gMDsgaSA8IG47IGkrKykganMuc2V0X3Byb3BlcnR5KHJldCwgaSwgZm4odltpXSkpOwogIHJldHVybiByZXQ7Cn0KCnRlbXBsYXRlPGNsYXNzIFQ+CmlubGluZSBqc3J0Ojp2YWx1ZQp2ZWN0b3JfdG9fanMoanNydCYganMsIGNvbnN0IFQmIHYsIHNpemVfdCBuKSB7CiAgcmV0dXJuIHZlY3Rvcl90b19qcyh2LCBuLCBzdGQ6OmJpbmQoJmpzcnQ6OmNyZWF0ZTx0eXBlbmFtZSBUOjp2YWx1ZV90eXBlPiwgJmpzLCBzdGQ6OnBsYWNlaG9sZGVyczo6XzEpKTsKfQoKdGVtcGxhdGU8Y2xhc3MgVD4KaW5saW5lIGpzcnQ6OnZhbHVlCnZlY3Rvcl90b19qcyhqc3J0JiBqcywgY29uc3QgVCYgdikgewogIHJldHVybiB2ZWN0b3JfdG9fanMoanMsIHYsIHYuc2l6ZSgpKTsKfQoKdGVtcGxhdGU8Y2xhc3MgUD4KaW5saW5lIGpzcnQ6OnZhbHVlCnZlY3Rvcl90b19qcyhqc3J0JiBqcywgY29uc3Qgc3RkOjp2ZWN0b3I8UD4mIHYsIGNvbnN0IHN0ZDo6ZnVuY3Rpb248anNydDo6dmFsdWUoY29uc3QgUCYpPiYgZm4pIHsKICByZXR1cm4gdmVjdG9yX3RvX2pzKGpzLCB2LCB2LnNpemUoKSwgZm4pOwp9Cgp0ZW1wbGF0ZTxjbGFzcyBQPgppbmxpbmUganNydDo6dmFsdWUKcG9pbnRlcl90b19qcyhqc3J0JiBqcywgY29uc3QgUCogdiwgc2l6ZV90IG4sIGNvbnN0IHN0ZDo6ZnVuY3Rpb248anNydDo6dmFsdWUoY29uc3QgUCYpPiYgZm4pIHsKICBqc3J0Ojp2YWx1ZSByZXQgPSBqcy5jcmVhdGVfYXJyYXkobik7CiAgZm9yKHVpbnQzMl90IGkgPSAwOyBpIDwgbjsgaSsrKSBqcy5zZXRfcHJvcGVydHkocmV0LCBpLCBmbih2W2ldKSk7CiAgcmV0dXJuIHJldDsKfQoKdGVtcGxhdGU8Y2xhc3MgUD4KaW5saW5lIGpzcnQ6OnZhbHVlCnBvaW50ZXJfdG9fanMoanNydCYganMsIGNvbnN0IFAqIHYsIHNpemVfdCBuKSB7CiAgc3RkOjpmdW5jdGlvbjxqc3J0Ojp2YWx1ZShjb25zdCBQJik+IGZuKFsmXShjb25zdCBQJiB2KSAtPiBqc3J0Ojp2YWx1ZSB7IHJldHVybiBqcy5jcmVhdGUodik7IH0pOwoKICByZXR1cm4gcG9pbnRlcl90b19qcyhqcywgdiwgbiwgZm4pOwp9Cgp0ZW1wbGF0ZTxjbGFzcyBQPgppbmxpbmUganNydDo6dmFsdWUKdmVjdG9yX3RvX2pzKGpzcnQmIGpzLCBjb25zdCBzdGQ6OnZlY3RvcjxQPiYgdiwganNydDo6dmFsdWUgKCpmbikoY29uc3QgUCYpKSB7CiAgdWludDMyX3QgaSwgbiA9IHYuc2l6ZSgpOwogIGpzcnQ6OnZhbHVlIHJldCA9IGpzLmNyZWF0ZV9hcnJheShuKTsKICBmb3IoaSA9IDA7IGkgPCBuOyBpKyspIGpzLnNldF9wcm9wZXJ0eShyZXQsIGksIGZuKHZbaV0pKTsKICByZXR1cm4gcmV0Owp9Cgp0ZW1wbGF0ZTxjbGFzcyBQPgppbmxpbmUganNydDo6dmFsdWUKdmVjdG9yX3RvX2pzKGpzcnQmIGpzLCBjb25zdCBzdGQ6OnZlY3RvcjxQPiYgdikgewogIHVzaW5nIHN0ZDo6cGxhY2Vob2xkZXJzOjpfMTsKICByZXR1cm4gdmVjdG9yX3RvX2pzPFA+KHYsIHN0ZDo6YmluZCgmanNydDo6Y3JlYXRlPFA+LCAmanMsIF8xKSk7Cn0KCmlubGluZSBzdGQ6OnN0cmluZwp0b19zdHJpbmcoY29uc3QgY2hhciogcykgewogIHJldHVybiBzdGQ6OnN0cmluZyhzKTsKfQoKaW5saW5lIGJvb2wKanNydDo6aXNfbnVtYmVyKGNvbnN0X3ZhbHVlIHZhbCkgY29uc3QgewogIHJldHVybiBKU19Jc051bWJlcih2YWwpOwp9CgppbmxpbmUgYm9vbApqc3J0Ojppc19iaWdfaW50KGNvbnN0X3ZhbHVlIHZhbCkgY29uc3QgewogIHJldHVybiBKU19Jc0JpZ0ludChjdHgsIHZhbCk7Cn0KCmlubGluZSBib29sCmpzcnQ6OmlzX2JpZ19mbG9hdChjb25zdF92YWx1ZSB2YWwpIGNvbnN0IHsKICByZXR1cm4gSlNfSXNCaWdGbG9hdCh2YWwpOwp9CgppbmxpbmUgYm9vbApqc3J0Ojppc19iaWdfZGVjaW1hbChjb25zdF92YWx1ZSB2YWwpIGNvbnN0IHsKICByZXR1cm4gSlNfSXNCaWdEZWNpbWFsKHZhbCk7Cn0KCmlubGluZSBib29sCmpzcnQ6OmlzX2Jvb2woY29uc3RfdmFsdWUgdmFsKSBjb25zdCB7CiAgcmV0dXJuIEpTX0lzQm9vbCh2YWwpOwp9CgppbmxpbmUgYm9vbApqc3J0Ojppc19udWxsKGNvbnN0X3ZhbHVlIHZhbCkgY29uc3QgewogIHJldHVybiBKU19Jc051bGwodmFsKTsKfQoKaW5saW5lIGJvb2wKanNydDo6aXNfdW5kZWZpbmVkKGNvbnN0X3ZhbHVlIHZhbCkgY29uc3QgewogIHJldHVybiBKU19Jc1VuZGVmaW5lZCh2YWwpOwp9CgppbmxpbmUgYm9vbApqc3J0Ojppc19leGNlcHRpb24oY29uc3RfdmFsdWUgdmFsKSBjb25zdCB7CiAgcmV0dXJuIEpTX0lzRXhjZXB0aW9uKHZhbCk7Cn0KCmlubGluZSBib29sCmpzcnQ6OmlzX3VuaW5pdGlhbGl6ZWQoY29uc3RfdmFsdWUgdmFsKSBjb25zdCB7CiAgcmV0dXJuIEpTX0lzVW5pbml0aWFsaXplZCh2YWwpOwp9CgppbmxpbmUgYm9vbApqc3J0Ojppc19zdHJpbmcoY29uc3RfdmFsdWUgdmFsKSBjb25zdCB7CiAgcmV0dXJuIEpTX0lzU3RyaW5nKHZhbCk7Cn0KCmlubGluZSBib29sCmpzcnQ6OmlzX3N5bWJvbChjb25zdF92YWx1ZSB2YWwpIGNvbnN0IHsKICByZXR1cm4gSlNfSXNTeW1ib2wodmFsKTsKfQoKaW5saW5lIGJvb2wKanNydDo6aXNfb2JqZWN0KGNvbnN0X3ZhbHVlIHZhbCkgY29uc3QgewogIHJldHVybiBKU19Jc09iamVjdCh2YWwpOwp9CgppbmxpbmUgYm9vbApqc3J0Ojppc19lcnJvcihjb25zdF92YWx1ZSB2YWwpIGNvbnN0IHsKICByZXR1cm4gSlNfSXNFcnJvcihjdHgsIHZhbCk7Cn0KCmlubGluZSBib29sCmpzcnQ6OmlzX2Z1bmN0aW9uKGNvbnN0X3ZhbHVlIHZhbCkgY29uc3QgewogIHJldHVybiBKU19Jc0Z1bmN0aW9uKGN0eCwgdmFsKTsKfQoKaW5saW5lIGJvb2wKanNydDo6aXNfY29uc3RydWN0b3IoY29uc3RfdmFsdWUgdmFsKSBjb25zdCB7CiAgcmV0dXJuIEpTX0lzQ29uc3RydWN0b3IoY3R4LCB2YWwpOwp9CgppbmxpbmUgYm9vbApqc3J0Ojppc19hcnJheShjb25zdF92YWx1ZSB2YWwpIGNvbnN0IHsKICByZXR1cm4gSlNfSXNBcnJheShjdHgsIHZhbCk7Cn0KCmlubGluZSBib29sCmpzcnQ6OmlzX2V4dGVuc2libGUoY29uc3RfdmFsdWUgdmFsKSBjb25zdCB7CiAgcmV0dXJuIEpTX0lzRXh0ZW5zaWJsZShjdHgsIHZhbCk7Cn0KCmlubGluZSBib29sCmpzcnQ6OmlzX2FycmF5X2xpa2UoY29uc3RfdmFsdWUgdmFsKSBjb25zdCB7CiAgaWYoaXNfYXJyYXkodmFsKSkKICAgIHJldHVybiB0cnVlOwoKICBpZihoYXNfcHJvcGVydHkodmFsLCAibGVuZ3RoIikpIHsKICAgIGlmKGlzX251bWJlcihnZXRfcHJvcGVydHk8Y29uc3QgY2hhcio+KHZhbCwgImxlbmd0aCIpKSkKICAgICAgcmV0dXJuIHRydWU7CiAgfQogIHJldHVybiBmYWxzZTsKfQoKLyoqCiAqIEFycmF5IGl0ZXJhdG9yCiAqLwpzdHJ1Y3QganNpdGVyIHsKICBKU1ZhbHVlCiAgb3BlcmF0b3IqKCkgY29uc3QgewogICAgaWYocCA8IG4pCiAgICAgIHJldHVybiBpKCh1aW50MzJfdClwKTsKICAgIGVsc2UKICAgICAgcmV0dXJuIEpTX1VOREVGSU5FRDsKICB9CiAganNpdGVyCiAgb3BlcmF0b3IrKygpIHsKICAgIGpzaXRlciByZXQgPSAqdGhpczsKICAgIGlmKHAgPCBuKQogICAgICBwKys7CiAgICByZXR1cm4gcmV0OwogIH0KICBqc2l0ZXImCiAgb3BlcmF0b3IrKyhpbnQpIHsKICAgIGlmKHAgPCBuKQogICAgICArK3A7CiAgICByZXR1cm4gKnRoaXM7CiAgfQogIGJvb2wKICBvcGVyYXRvcj09KGNvbnN0IGpzaXRlciYgbykgY29uc3QgewogICAgcmV0dXJuIHAgPT0gby5wICYmIG4gPT0gby5uOwogIH0KICBib29sCiAgb3BlcmF0b3I8KGNvbnN0IGpzaXRlciYgbykgY29uc3QgewogICAgcmV0dXJuIHAgPCBvLnA7CiAgfQogIGJvb2wKICBvcGVyYXRvcj4oY29uc3QganNpdGVyJiBvKSBjb25zdCB7CiAgICByZXR1cm4gcCA+IG8ucDsKICB9CiAgYm9vbAogIG9wZXJhdG9yPD0oY29uc3QganNpdGVyJiBvKSBjb25zdCB7CiAgICByZXR1cm4gISgqdGhpcyA+IG8pOwogIH0KICBib29sCiAgb3BlcmF0b3I+PShjb25zdCBqc2l0ZXImIG8pIGNvbnN0IHsKICAgIHJldHVybiAhKCp0aGlzIDwgbyk7CiAgfQogIGJvb2wKICBvcGVyYXRvciE9KGNvbnN0IGpzaXRlciYgbykgY29uc3QgewogICAgcmV0dXJuICEoKnRoaXMgPT0gbyk7CiAgfQoKICBwdHJkaWZmX3QKICBvcGVyYXRvci0oY29uc3QganNpdGVyJiBvKSBjb25zdCB7CiAgICByZXR1cm4gcCAtIG8ucDsKICB9CgogIGpzaXRlcgogIG9wZXJhdG9yLShzaXplX3QgbykgY29uc3QgewogICAgcmV0dXJuIGpzaXRlcihpLCBuLCBwIC0gbyk7CiAgfQoKICBqc2l0ZXIKICBvcGVyYXRvcisoc2l6ZV90IG8pIGNvbnN0IHsKICAgIHJldHVybiBqc2l0ZXIoaSwgbiwgcCArIG8pOwogIH0KCnByb3RlY3RlZDoKICBzdGQ6OmZ1bmN0aW9uPEpTVmFsdWUodWludDMyX3QpPiBpOwogIHVpbnQzMl90IG47CiAgdWludDMyX3QgcDsKCnByaXZhdGU6CiAgZnJpZW5kIGNsYXNzIGpzcnQ7CgogIGpzaXRlcihzdGQ6OmZ1bmN0aW9uPEpTVmFsdWUodWludDMyX3QpPiBpbmRleCwgc2l6ZV90IGxlbiwgc2l6ZV90IHBvcykgOiBpKGluZGV4KSwgbihsZW4pLCBwKHBvcykge30KICBqc2l0ZXIoanNydCYganMsIGNvbnN0IEpTVmFsdWUmIGFyciwgc2l6ZV90IGxlbikgOiBpKGpzLmluZGV4KGFycikpLCBuKGxlbiksIHAoMCkge30KICBqc2l0ZXIoanNydCYganMsIGNvbnN0IEpTVmFsdWUmIGFyciwgc2l6ZV90IGxlbiwgc2l6ZV90IHBvcykgOiBpKGpzLmluZGV4KGFycikpLCBuKGxlbiksIHAocG9zKSB7fQp9OwoKaW5saW5lIGludDMyX3QKanNydDo6Z2V0X2xlbmd0aChjb25zdCBqc3J0Ojpjb25zdF92YWx1ZSYgYSkgY29uc3QgewogIHVpbnQzMl90IGxlbmd0aDsKICBKU1ZhbHVlIHYgPSBnZXRfcHJvcGVydHk8Y29uc3QgY2hhcio+KGEsICJsZW5ndGgiKTsKICBpZihpc191bmRlZmluZWQodikpCiAgICByZXR1cm4gLTE7CiAgZ2V0X251bWJlcih2LCBsZW5ndGgpOwogIHJldHVybiBsZW5ndGg7Cn0KCmlubGluZSBqc2l0ZXIKanNydDo6YmVnaW4oSlNWYWx1ZSYgdikgewogIHVpbnQzMl90IG4gPSBnZXRfbGVuZ3RoKHYpOwogIHJldHVybiBqc2l0ZXIoKnRoaXMsIHYsIG4sIDApOwp9CgppbmxpbmUganNpdGVyCmpzcnQ6OmVuZChKU1ZhbHVlJiB2KSB7CiAgdWludDMyX3QgbiA9IGdldF9sZW5ndGgodik7CiAgcmV0dXJuIGpzaXRlcigqdGhpcywgdiwgbiwgbik7Cn0KCmlubGluZSBzdGQ6OmZ1bmN0aW9uPEpTVmFsdWUoSlNWYWx1ZSwgdWludDMyX3QpPgpqc3J0OjppbmRleCgpIGNvbnN0IHsKICByZXR1cm4gc3RkOjpiaW5kKCZqc3J0OjpnZXRfcHJvcGVydHk8dWludDMyX3Q+LCB0aGlzLCBzdGQ6OnBsYWNlaG9sZGVyczo6XzEsIHN0ZDo6cGxhY2Vob2xkZXJzOjpfMik7Cn0KCmlubGluZSBzdGQ6OmZ1bmN0aW9uPEpTVmFsdWUodWludDMyX3QpPgpqc3J0OjppbmRleChjb25zdCBKU1ZhbHVlQ29uc3QmIGEpIGNvbnN0IHsKICByZXR1cm4gc3RkOjpiaW5kKCZqc3J0OjpnZXRfcHJvcGVydHk8dWludDMyX3Q+LCB0aGlzLCBhLCBzdGQ6OnBsYWNlaG9sZGVyczo6XzEpOwp9CgppbmxpbmUgYm9vbApqc3J0Ojppc19pdGVyYWJsZShjb25zdF92YWx1ZSB2YWwpIHsKICBib29sIHJldCA9IGZhbHNlOwogIHZhbHVlIHN5bSA9IGdldF9zeW1ib2woIml0ZXJhdG9yIik7CiAgaWYoaXNfb2JqZWN0KHZhbCkgJiYgaGFzX3Byb3BlcnR5KHZhbCwgc3ltKSkgewogICAgdmFsdWUgaXRlciA9IGdldF9wcm9wZXJ0eTx2YWx1ZT4odmFsLCBzeW0pOwogICAgcmV0ID0gaXNfZnVuY3Rpb24oaXRlcik7CiAgfQogIGZyZWVfdmFsdWUoc3ltKTsKICByZXR1cm4gcmV0Owp9CgppbmxpbmUgYm9vbApqc3J0Ojppc19pdGVyYXRvcihjb25zdF92YWx1ZSB2YWwpIGNvbnN0IHsKICBpZihpc19vYmplY3QodmFsKSAmJiBoYXNfcHJvcGVydHkodmFsLCAibmV4dCIpKSB7CiAgICB2YWx1ZSBuZXh0ID0gZ2V0X3Byb3BlcnR5PGNvbnN0IGNoYXIqPih2YWwsICJuZXh0Iik7CiAgICByZXR1cm4gaXNfZnVuY3Rpb24obmV4dCk7CiAgfQogIHJldHVybiBmYWxzZTsKfQoKZXh0ZXJuICJDIiBqc3J0IGpzOwoKdGVtcGxhdGU8PgppbmxpbmUgc3RkOjpzdHJpbmcKanNydDo6dG88c3RkOjpzdHJpbmc+KGpzcnQ6OmNvbnN0X3ZhbHVlIHZhbCkgewogIHJldHVybiBqc3J0Ojp0b19zdHJpbmcodmFsKTsKfQoKdGVtcGxhdGU8PgppbmxpbmUgaW50MzJfdApqc3J0Ojp0bzxpbnQzMl90Pihqc3J0Ojpjb25zdF92YWx1ZSB2YWwpIHsKICBpbnQzMl90IHJldDsKICBqc3J0OjpnZXRfbnVtYmVyKHZhbCwgcmV0KTsKICByZXR1cm4gcmV0Owp9Cgp0ZW1wbGF0ZTw+CmlubGluZSB1aW50MzJfdApqc3J0Ojp0bzx1aW50MzJfdD4oanNydDo6Y29uc3RfdmFsdWUgdmFsKSB7CiAgdWludDMyX3QgcmV0OwogIGpzcnQ6OmdldF9udW1iZXIodmFsLCByZXQpOwogIHJldHVybiByZXQ7Cn0KCnRlbXBsYXRlPD4KaW5saW5lIGZsb2F0CmpzcnQ6OnRvPGZsb2F0Pihqc3J0Ojpjb25zdF92YWx1ZSB2YWwpIHsKICBmbG9hdCByZXQ7CiAganNydDo6Z2V0X251bWJlcih2YWwsIHJldCk7CiAgcmV0dXJuIHJldDsKfQoKdGVtcGxhdGU8PgppbmxpbmUgZG91YmxlCmpzcnQ6OnRvPGRvdWJsZT4oanNydDo6Y29uc3RfdmFsdWUgdmFsKSB7CiAgZG91YmxlIHJldDsKICBqc3J0OjpnZXRfbnVtYmVyKHZhbCwgcmV0KTsKICByZXR1cm4gcmV0Owp9Cgp0ZW1wbGF0ZTw+CmlubGluZSBqc3J0Ojp2YWx1ZQpqc3J0Ojpmcm9tPHN0ZDo6c3RyaW5nPihjb25zdCBzdGQ6OnN0cmluZyYgdmFsdWUpIHsKICByZXR1cm4gbmV3X3N0cmluZyh2YWx1ZS5jX3N0cigpKTsKfQoKI2VuZGlmIC8vIGRlZmluZWQgSlNfSFBQCgAAAAAAAAAALF0AAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAJgcAAAAAAAAmBwAAAAAAAAAAAAAAAPC/"
				],
				[
					49,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAAAsXQAAI2lmbmRlZiBKU19IUFAKI2RlZmluZSBKU19IUFAKCiNpbmNsdWRlIDxlcnJuby5oPgoKZXh0ZXJuICJDIiB7CiNpbmNsdWRlICJxdWlja2pzL3F1aWNranMtYXRvbS5oIgp9CgplbnVtIHsKICBKU19OVUxMLAojZGVmaW5lIERFRihuYW1lLCBzdHIpIEpTX0FUT01fIyNuYW1lLAojaW5jbHVkZSAicXVpY2tqcy1hdG9tLmgiCiN1bmRlZiBERUYKICBKU19BVE9NX0VORCwKfTsKI2luY2x1ZGUgInF1aWNranMvcXVpY2tqcy5oIgoKI2luY2x1ZGUgPHVub3JkZXJlZF9tYXA+CiNpbmNsdWRlIDx2ZWN0b3I+CiNpbmNsdWRlIDx0eXBlX3RyYWl0cz4KI2luY2x1ZGUgPGZ1bmN0aW9uYWw+CiNpbmNsdWRlIDxzdHJpbmc+CiNpbmNsdWRlIDxjc3RyaW5nPgojaW5jbHVkZSA8aW9zdHJlYW0+CiNpbmNsdWRlIDxpdGVyYXRvcj4KCnN0cnVjdCBqc2l0ZXI7CgpzdHJ1Y3QganNhdG9tIHsKCiAgc3RhdGljIGpzYXRvbQogIGNyZWF0ZShKU0NvbnRleHQqIGN0eCwgY29uc3QgY2hhciogc3RyKSB7CiAgICByZXR1cm4ganNhdG9tKEpTX05ld0F0b20oY3R4LCBzdHIpKTsKICB9CiAgc3RhdGljIGpzYXRvbQogIGNyZWF0ZShKU0NvbnRleHQqIGN0eCwgdWludDMyX3QgbnVtKSB7CiAgICByZXR1cm4ganNhdG9tKEpTX05ld0F0b21VSW50MzIoY3R4LCBudW0pKTsKICB9CiAgc3RhdGljIGpzYXRvbQogIGNyZWF0ZShKU0NvbnRleHQqIGN0eCwgY29uc3QgY2hhciogeCwgc2l6ZV90IG4pIHsKICAgIHJldHVybiBqc2F0b20oSlNfTmV3QXRvbUxlbihjdHgsIHgsIG4pKTsKICB9CiAgc3RhdGljIGpzYXRvbQogIGNyZWF0ZShKU0NvbnRleHQqIGN0eCwgY29uc3QganNhdG9tJiBhdG9tKSB7CiAgICByZXR1cm4ganNhdG9tKEpTX0R1cEF0b20oY3R4LCBhdG9tKSk7CiAgfQogIHN0YXRpYyBqc2F0b20KICBjcmVhdGUoSlNDb250ZXh0KiBjdHgsIGNvbnN0IEpTVmFsdWVDb25zdCYgdmFsdWUpIHsKICAgIHJldHVybiBqc2F0b20oSlNfVmFsdWVUb0F0b20oY3R4LCB2YWx1ZSkpOwogIH0KICBzdGF0aWMganNhdG9tCiAgY3JlYXRlKEpTQ29udGV4dCogY3R4LCBjb25zdCBzdGQ6OnN0cmluZyYgc3RyKSB7CiAgICByZXR1cm4gY3JlYXRlKGN0eCwgc3RyLmRhdGEoKSwgc3RyLnNpemUoKSk7CiAgfQoKICAvL35qc2F0b20oKSB7IGRlc3Ryb3koKTsgfQoKICBzdGF0aWMgdm9pZAogIGRlc3Ryb3koSlNDb250ZXh0KiBjdHgsIGpzYXRvbSYgYSkgewogICAgSlNfRnJlZUF0b20oY3R4LCBhLl9hKTsKICAgIGEuX2EgPSBKU19BVE9NX05VTEw7CiAgfQoKICBvcGVyYXRvciBKU0F0b20oKSBjb25zdCB7IHJldHVybiBfYTsgfQoKICBjb25zdCBjaGFyKgogIHRvX2NzdHJpbmcoSlNDb250ZXh0KiBfY3R4KSBjb25zdCB7CiAgICByZXR1cm4gSlNfQXRvbVRvQ1N0cmluZyhfY3R4LCBfYSk7CiAgfQoKICBKU1ZhbHVlCiAgdG9fdmFsdWUoSlNDb250ZXh0KiBfY3R4KSBjb25zdCB7CiAgICByZXR1cm4gSlNfQXRvbVRvVmFsdWUoX2N0eCwgX2EpOwogIH0KCiAgSlNWYWx1ZQogIHRvX3N0cmluZyhKU0NvbnRleHQqIF9jdHgpIGNvbnN0IHsKICAgIHJldHVybiBKU19BdG9tVG9TdHJpbmcoX2N0eCwgX2EpOwogIH0KCnByaXZhdGU6CiAganNhdG9tKEpTQXRvbSBhKSA6IF9hKGEpIHt9CgogIHN0YXRpYyBqc2F0b20KICBjcmVhdGUoSlNBdG9tIGEpIHsKICAgIGpzYXRvbSByZXQoYSk7CiAgICByZXR1cm4gcmV0OwogIH0KCiAgSlNBdG9tIF9hOwp9OwoKc3RydWN0IGpzcnQgewogIHR5cGVkZWYgSlNWYWx1ZSB2YWx1ZTsKICB0eXBlZGVmIEpTVmFsdWVDb25zdCBjb25zdF92YWx1ZTsKICB0eXBlZGVmIEpTQXRvbSBhdG9tOwoKICBzdGF0aWMgY29uc3RleHByIHZhbHVlIF90cnVlID0gSlNfVFJVRSwgX2ZhbHNlID0gSlNfRkFMU0UsIF9udWxsID0gSlNfTlVMTCwgX3VuZGVmaW5lZCA9IEpTX1VOREVGSU5FRDsKCiAgYm9vbCBpbml0KGludCBhcmdjLCBjaGFyKiBhcmd2W10pOwogIGJvb2wgY3JlYXRlKEpTQ29udGV4dCogY3R4ID0gMCk7CgogIGpzcnQoKSB7fQogIGpzcnQoSlNDb250ZXh0KiBjKSA6IGN0eChKU19EdXBDb250ZXh0KGMpKSB7fQogIH5qc3J0KCk7CgogIHZhbHVlCiAgbmV3X3N0cmluZyhjb25zdCBjaGFyKiBzdHIpIGNvbnN0IHsKICAgIHJldHVybiBKU19OZXdTdHJpbmcoY3R4LCBzdHIpOwogIH0KCiAgdHlwZWRlZiB2YWx1ZSBjX2Z1bmN0aW9uKGpzcnQqIHJ0LCBjb25zdF92YWx1ZSB0aGlzX3ZhbCwgaW50IGFyZ2MsIGNvbnN0X3ZhbHVlKiBhcmd2KTsKCiAgdmFsdWUgZXZhbF9idWYoY29uc3QgY2hhciogYnVmLCBpbnQgYnVmX2xlbiwgY29uc3QgY2hhciogZmlsZW5hbWUsIGludCBldmFsX2ZsYWdzKTsKICB2YWx1ZSBldmFsX2ZpbGUoY29uc3QgY2hhciogZmlsZW5hbWUsIGludCBtb2R1bGUgPSAtMSk7CgogIC8vIHZhbHVlIGFkZF9mdW5jdGlvbihjb25zdCBjaGFyKiBuYW1lLCBKU0NGdW5jdGlvbiogZm4sIGludCBhcmdzID0gMCk7CgogIHRlbXBsYXRlPGNsYXNzIFQ+IHZvaWQgZ2V0X251bWJlcihjb25zdF92YWx1ZSB2YWwsIFQmIHJlZikgY29uc3Q7CiAgdm9pZCBnZXRfc3RyaW5nKGNvbnN0X3ZhbHVlIHZhbCwgc3RkOjpzdHJpbmcmIHN0cikgY29uc3Q7CiAgdm9pZCBnZXRfc3RyaW5nKGNvbnN0X3ZhbHVlIHZhbCwgY29uc3QgY2hhciomIGNzdHIpIGNvbnN0OwoKICB0ZW1wbGF0ZTxjbGFzcyBUPiB2b2lkIGdldF9pbnRfYXJyYXkoY29uc3RfdmFsdWUgdmFsLCBUJiByZWYpIGNvbnN0OwogIHRlbXBsYXRlPGNsYXNzIFQ+IHZvaWQgZ2V0X3BvaW50KGNvbnN0X3ZhbHVlIHZhbCwgVCYgcmVmKSBjb25zdDsKICB0ZW1wbGF0ZTxjbGFzcyBUPiB2b2lkIGdldF9wb2ludF9hcnJheShjb25zdF92YWx1ZSB2YWwsIHN0ZDo6dmVjdG9yPFQ+JiByZWYpIGNvbnN0OwogIHRlbXBsYXRlPGNsYXNzIFQ+IHZvaWQgZ2V0X3JlY3QoY29uc3RfdmFsdWUgdmFsLCBUJiByZWYpIGNvbnN0OwogIHRlbXBsYXRlPGNsYXNzIFQ+IHZvaWQgZ2V0X2NvbG9yKGNvbnN0X3ZhbHVlIHZhbCwgVCYgcmVmKSBjb25zdDsKCiAgdm9pZAogIGdldF9ib29sZWFuKGNvbnN0X3ZhbHVlIHZhbCwgYm9vbCYgcmVmKSB7CiAgICBib29sIGIgPSBKU19Ub0Jvb2woY3R4LCB2YWwpOwogICAgcmVmID0gYjsKICB9CiAgYm9vbAogIGdldF9ib29sZWFuKGNvbnN0X3ZhbHVlIHZhbCkgewogICAgYm9vbCBiOwogICAgZ2V0X2Jvb2xlYW4odmFsLCBiKTsKICAgIHJldHVybiBiOwogIH0KCiAgdmFsdWUgY3JlYXRlX2FycmF5KGludDMyX3Qgc2l6ZSA9IC0xKTsKICB2YWx1ZSBjcmVhdGVfb2JqZWN0KCk7CiAgdGVtcGxhdGU8Y2xhc3MgVD4gdmFsdWUgY3JlYXRlKFQgYXJnKTsKICB0ZW1wbGF0ZTxjbGFzcyBUPiB2YWx1ZSBjcmVhdGVfcG9pbnQoVCB4LCBUIHkpOwoKICB0ZW1wbGF0ZTxjbGFzcyBUPgogIHZhbHVlCiAgZ2V0X3Byb3BlcnR5KGNvbnN0X3ZhbHVlIG9iaiwgVCBwcm9wKSBjb25zdCB7CiAgICB0aHJvdyBzdGQ6OnJ1bnRpbWVfZXJyb3IoInRlbXBsYXRlIHNwZWNpYWxpemF0aW9uIik7CiAgfQoKICB2YWx1ZSBnZXRfcHJvcGVydHlfYXRvbShjb25zdF92YWx1ZSBvYmosIGF0b20pIGNvbnN0OwogIHZhbHVlIGdldF9wcm9wZXJ0eV9zeW1ib2woY29uc3RfdmFsdWUgb2JqLCBjb25zdCBjaGFyKiBzeW1ib2wpOwoKICBib29sIGhhc19wcm9wZXJ0eShjb25zdF92YWx1ZSBvYmosIGNvbnN0IGpzYXRvbSYgYXRvbSkgY29uc3Q7CgogIGJvb2wKICBoYXNfcHJvcGVydHkoY29uc3RfdmFsdWUgb2JqLCBjb25zdCBzdGQ6OnN0cmluZyYgbmFtZSkgY29uc3QgewogICAganNhdG9tIGF0b20gPSBqc2F0b206OmNyZWF0ZShjdHgsIG5hbWUpOwogICAgYm9vbCByZXQgPSBoYXNfcHJvcGVydHkob2JqLCBhdG9tKTsKICAgIGpzYXRvbTo6ZGVzdHJveShjdHgsIGF0b20pOwogICAgcmV0dXJuIHJldDsKICB9CiAgYm9vbAogIGhhc19wcm9wZXJ0eShjb25zdF92YWx1ZSBvYmosIHVpbnQzMl90IGluZGV4KSBjb25zdCB7CiAgICBqc2F0b20gYXRvbSA9IGpzYXRvbTo6Y3JlYXRlKGN0eCwgaW5kZXgpOwogICAgYm9vbCByZXQgPSBoYXNfcHJvcGVydHkob2JqLCBhdG9tKTsKICAgIGpzYXRvbTo6ZGVzdHJveShjdHgsIGF0b20pOwogICAgcmV0dXJuIHJldDsKICB9CiAgYm9vbAogIGhhc19wcm9wZXJ0eShjb25zdF92YWx1ZSBvYmosIGNvbnN0IGNvbnN0X3ZhbHVlJiBwcm9wKSBjb25zdCB7CiAgICBqc2F0b20gYXRvbSA9IGpzYXRvbTo6Y3JlYXRlKGN0eCwgcHJvcCk7CiAgICBib29sIHJldCA9IGhhc19wcm9wZXJ0eShvYmosIGF0b20pOwogICAganNhdG9tOjpkZXN0cm95KGN0eCwgYXRvbSk7CiAgICByZXR1cm4gcmV0OwogIH0KCiAgdGVtcGxhdGU8Y2xhc3MgVD4KICB2b2lkCiAgc2V0X3Byb3BlcnR5KGNvbnN0X3ZhbHVlIG9iaiwgVCBwcm9wLCB2YWx1ZSB2YWwpIHt9CgogIHZvaWQgc2V0X3Byb3BlcnR5KGNvbnN0X3ZhbHVlIG9iaiwgY29uc3QganNhdG9tJiBhdG9tLCB2YWx1ZSB2YWwsIGludCBmbGFncyk7CiAgdm9pZAogIHNldF9wcm9wZXJ0eShjb25zdF92YWx1ZSBvYmosIGNvbnN0IHN0ZDo6c3RyaW5nJiBuYW1lLCB2YWx1ZSB2YWwsIGludCBmbGFncykgewogICAganNhdG9tIGF0b20gPSBqc2F0b206OmNyZWF0ZShjdHgsIG5hbWUpOwogICAgc2V0X3Byb3BlcnR5KG9iaiwgYXRvbSwgdmFsLCBmbGFncyk7CiAgICBqc2F0b206OmRlc3Ryb3koY3R4LCBhdG9tKTsKICB9CgogIHZvaWQKICBzZXRfcHJvcGVydHkoY29uc3RfdmFsdWUgb2JqLCB1aW50MzJfdCBpbmRleCwgdmFsdWUgdmFsLCBpbnQgZmxhZ3MpIHsKICAgIGpzYXRvbSBhdG9tID0ganNhdG9tOjpjcmVhdGUoY3R4LCBpbmRleCk7CiAgICBzZXRfcHJvcGVydHkob2JqLCBhdG9tLCB2YWwsIGZsYWdzKTsKICAgIGpzYXRvbTo6ZGVzdHJveShjdHgsIGF0b20pOwogIH0KCiAgdm9pZAogIHNldF9wcm9wZXJ0eShjb25zdF92YWx1ZSBvYmosIGNvbnN0IGNvbnN0X3ZhbHVlJiBwcm9wLCB2YWx1ZSB2YWwsIGludCBmbGFncykgewogICAganNhdG9tIGF0b20gPSBqc2F0b206OmNyZWF0ZShjdHgsIHByb3ApOwogICAgc2V0X3Byb3BlcnR5KG9iaiwgYXRvbSwgdmFsLCBmbGFncyk7CiAgICBqc2F0b206OmRlc3Ryb3koY3R4LCBhdG9tKTsKICB9CgogIHZhbHVlIGdldF9jb25zdHJ1Y3Rvcihjb25zdF92YWx1ZSBvYmopIGNvbnN0OwogIGJvb2wgaGFzX2NvbnN0cnVjdG9yKGNvbnN0X3ZhbHVlIG9iaikgY29uc3Q7CgogIHZhbHVlIGdldF9wcm90b3R5cGUoY29uc3RfdmFsdWUgb2JqKSBjb25zdDsKICBib29sIGhhc19wcm90b3R5cGUoY29uc3RfdmFsdWUgb2JqKSBjb25zdDsKCiAgc3RkOjpzdHJpbmcgZnVuY3Rpb25fbmFtZShjb25zdF92YWx1ZSBmbikgY29uc3Q7CgogIHN0ZDo6c3RyaW5nCiAgY2xhc3NfbmFtZShjb25zdF92YWx1ZSBvYmopIGNvbnN0IHsKICAgIHJldHVybiBmdW5jdGlvbl9uYW1lKGdldF9jb25zdHJ1Y3RvcihvYmopKTsKICB9CgogIHZhbHVlIGdldF9nbG9iYWwoY29uc3QgY2hhciogbmFtZSkgY29uc3Q7CiAgdm9pZCBzZXRfZ2xvYmFsKGNvbnN0IGNoYXIqIG5hbWUsIHZhbHVlIHYpOwoKICB2YWx1ZSBnZXRfc3ltYm9sKGNvbnN0IGNoYXIqIG5hbWUpIGNvbnN0OwogIHZhbHVlCiAgZ2V0X2l0ZXJhdG9yKGNvbnN0X3ZhbHVlIG9iaiwgY29uc3QgY2hhciogc3ltYm9sID0gIml0ZXJhdG9yIikgewogICAgcmV0dXJuIGdldF9wcm9wZXJ0eV9zeW1ib2wob2JqLCBzeW1ib2wpOwogIH0KICB2YWx1ZSBjYWxsX2l0ZXJhdG9yKGNvbnN0X3ZhbHVlIG9iaiwgY29uc3QgY2hhciogc3ltYm9sID0gIml0ZXJhdG9yIik7CiAgdmFsdWUgY2FsbF9pdGVyYXRvcl9uZXh0KGNvbnN0X3ZhbHVlIG9iaiwgY29uc3QgY2hhciogc3ltYm9sID0gIml0ZXJhdG9yIik7CgogIGNvbnN0X3ZhbHVlCiAgZ2xvYmFsX29iamVjdCgpIGNvbnN0IHsKICAgIHZhbHVlIGdsb2JhbFRoaXMgPSBKU19HZXRHbG9iYWxPYmplY3QoY3R4KTsKICAgIHJldHVybiBnbG9iYWxUaGlzOwogIH0KICB2YWx1ZQogIGdsb2JhbF9vYmplY3QoKSB7CiAgICB2YWx1ZSBnbG9iYWxUaGlzID0gSlNfR2V0R2xvYmFsT2JqZWN0KGN0eCk7CiAgICByZXR1cm4gZ2xvYmFsVGhpczsKICB9CgogIHZhbHVlIGNhbGwoY29uc3RfdmFsdWUgZnVuYywgc2l6ZV90IGFyZ2MsIHZhbHVlIGFyZ3ZbXSkgY29uc3Q7CiAgdmFsdWUgY2FsbChjb25zdF92YWx1ZSBmdW5jLCBzdGQ6OnZlY3Rvcjx2YWx1ZT4mIGFyZ3MpIGNvbnN0OwogIHZhbHVlIGNhbGwoY29uc3QgY2hhciogbmFtZSwgc2l6ZV90IGFyZ2MsIHZhbHVlIGFyZ3ZbXSkgY29uc3Q7CiAgdmFsdWUgY2FsbChjb25zdF92YWx1ZSBmdW5jLCBjb25zdF92YWx1ZSB0aGlzX2FyZywgc2l6ZV90IGFyZ2MsIHZhbHVlIGFyZ3ZbXSkgY29uc3Q7CgogIHN0ZDo6c3RyaW5nIHRvX3N0cihjb25zdF92YWx1ZSB2YWwpOwoKICB0ZW1wbGF0ZTxjbGFzcyBUPiBUIHRvKGNvbnN0X3ZhbHVlIHZhbCk7CiAgdGVtcGxhdGU8Y2xhc3MgVD4gdmFsdWUgZnJvbShjb25zdCBUJiB2YWwpOwoKICBjb25zdF92YWx1ZSBwcm90b3R5cGUoY29uc3RfdmFsdWUgb2JqKSBjb25zdDsKCiAgdm9pZCBwcm9wZXJ0eV9uYW1lcyhjb25zdF92YWx1ZSBvYmosIHN0ZDo6dmVjdG9yPGNvbnN0IGNoYXIqPiYgb3V0LCBib29sIGVudW1fb25seSA9IGZhbHNlLCBib29sIHJlY3Vyc2l2ZSA9IGZhbHNlKSBjb25zdDsKCiAgc3RkOjp2ZWN0b3I8Y29uc3QgY2hhcio+IHByb3BlcnR5X25hbWVzKGNvbnN0X3ZhbHVlIG9iaiwgYm9vbCBlbnVtX29ubHkgPSB0cnVlLCBib29sIHJlY3Vyc2l2ZSA9IHRydWUpIGNvbnN0OwoKICB2b2lkIGR1bXBfZXJyb3IoKSBjb25zdDsKCiAgdm9pZCBkdW1wX2V4Y2VwdGlvbihKU1ZhbHVlQ29uc3QgZXhjZXB0aW9uX3ZhbCwgYm9vbCBpc190aHJvdykgY29uc3Q7CgogIGJvb2wgaXNfbnVtYmVyKGNvbnN0X3ZhbHVlIHZhbCkgY29uc3Q7CiAgYm9vbCBpc19iaWdfaW50KGNvbnN0X3ZhbHVlIHZhbCkgY29uc3Q7CiAgYm9vbCBpc19iaWdfZmxvYXQoY29uc3RfdmFsdWUgdmFsKSBjb25zdDsKICBib29sIGlzX2JpZ19kZWNpbWFsKGNvbnN0X3ZhbHVlIHZhbCkgY29uc3Q7CiAgYm9vbCBpc19ib29sKGNvbnN0X3ZhbHVlIHZhbCkgY29uc3Q7CiAgYm9vbCBpc19udWxsKGNvbnN0X3ZhbHVlIHZhbCkgY29uc3Q7CiAgYm9vbCBpc191bmRlZmluZWQoY29uc3RfdmFsdWUgdmFsKSBjb25zdDsKICBib29sIGlzX2V4Y2VwdGlvbihjb25zdF92YWx1ZSB2YWwpIGNvbnN0OwogIGJvb2wgaXNfdW5pbml0aWFsaXplZChjb25zdF92YWx1ZSB2YWwpIGNvbnN0OwogIGJvb2wgaXNfc3RyaW5nKGNvbnN0X3ZhbHVlIHZhbCkgY29uc3Q7CiAgYm9vbCBpc19zeW1ib2woY29uc3RfdmFsdWUgdmFsKSBjb25zdDsKICBib29sIGlzX29iamVjdChjb25zdF92YWx1ZSB2YWwpIGNvbnN0OwogIGJvb2wgaXNfZXJyb3IoY29uc3RfdmFsdWUgdmFsKSBjb25zdDsKICBib29sIGlzX2Z1bmN0aW9uKGNvbnN0X3ZhbHVlIHZhbCkgY29uc3Q7CiAgYm9vbCBpc19jb25zdHJ1Y3Rvcihjb25zdF92YWx1ZSB2YWwpIGNvbnN0OwogIGJvb2wgaXNfYXJyYXkoY29uc3RfdmFsdWUgdmFsKSBjb25zdDsKICBib29sIGlzX2V4dGVuc2libGUoY29uc3RfdmFsdWUgdmFsKSBjb25zdDsKCiAgYm9vbCBpc19wcm9taXNlKGNvbnN0X3ZhbHVlIHZhbCk7CiAgYm9vbCBpc19wb2ludChjb25zdF92YWx1ZSB2YWwpIGNvbnN0OwogIGJvb2wgaXNfcmVjdChjb25zdF92YWx1ZSB2YWwpIGNvbnN0OwogIGJvb2wgaXNfY29sb3IoY29uc3RfdmFsdWUgdmFsKSBjb25zdDsKICBib29sIGlzX2FycmF5X2xpa2UoY29uc3RfdmFsdWUgdmFsKSBjb25zdDsKCiAgYm9vbCBpc19pdGVyYWJsZShjb25zdF92YWx1ZSB2YWwpOwogIGJvb2wgaXNfaXRlcmF0b3IoY29uc3RfdmFsdWUgdmFsKSBjb25zdDsKCiAgLy8gaW50IHRhZyhjb25zdF92YWx1ZSB2YWwpIGNvbnN0OwogIGludCB0YWcodmFsdWUgdmFsKSBjb25zdDsKICB2b2lkKiBvYmooY29uc3RfdmFsdWUgdmFsKSBjb25zdDsKCiAgc3RkOjpzdHJpbmcKICB0eXBlc3RyKGNvbnN0X3ZhbHVlIHZhbCkgY29uc3QgewogICAgaWYoaXNfbnVtYmVyKHZhbCkpCiAgICAgIHJldHVybiAibnVtYmVyIjsKICAgIGVsc2UgaWYoaXNfYm9vbCh2YWwpKQogICAgICByZXR1cm4gImJvb2xlYW4iOwogICAgZWxzZSBpZihpc19zeW1ib2wodmFsKSkKICAgICAgcmV0dXJuICJzeW1ib2wiOwogICAgZWxzZSBpZihpc191bmRlZmluZWQodmFsKSkKICAgICAgcmV0dXJuICJ1bmRlZmluZWQiOwoKICAgIC8qICAgZWxzZSBpZihpc19jb25zdHJ1Y3Rvcih2YWwpKQogICAgICAgcmV0dXJuICJjb25zdHJ1Y3RvciI7Ki8KICAgIGVsc2UgaWYoaXNfb2JqZWN0KHZhbCkgfHwgaXNfbnVsbCh2YWwpKSB7CiAgICAgIGlmKCFpc19udWxsKHZhbCkgJiYgb2JqKHZhbCkpIHsKICAgICAgICBpZihpc19mdW5jdGlvbih2YWwpKQogICAgICAgICAgcmV0dXJuICJmdW5jdGlvbiI7CiAgICAgICAgZWxzZSBpZihpc19hcnJheSh2YWwpKQogICAgICAgICAgcmV0dXJuICJhcnJheSI7CiAgICAgICAgZWxzZSBpZihpc19wb2ludCh2YWwpKQogICAgICAgICAgcmV0dXJuICJwb2ludCI7CiAgICAgICAgZWxzZSBpZihpc19yZWN0KHZhbCkpCiAgICAgICAgICByZXR1cm4gInJlY3QiOwogICAgICAgIGVsc2UgaWYoaXNfY29sb3IodmFsKSkKICAgICAgICAgIHJldHVybiAiY29sb3IiOwogICAgICB9CiAgICAgIHJldHVybiAib2JqZWN0IjsKICAgIH0KICAgIHJldHVybiAidW5rbm93biI7CiAgfQoKICBzdGQ6OnN0cmluZwogIHRvX3N0cmluZyhjb25zdF92YWx1ZSBhcmcpIGNvbnN0IHsKICAgIHN0ZDo6c3RyaW5nIHJldDsKICAgIGdldF9zdHJpbmcoYXJnLCByZXQpOwogICAgcmV0dXJuIHJldDsKICB9CgogIGF0b20gbmV3X2F0b20oY29uc3QgY2hhciosIHNpemVfdCkgY29uc3Q7CiAgYXRvbSBuZXdfYXRvbShjb25zdCBjaGFyKikgY29uc3Q7CiAgYXRvbSBuZXdfYXRvbSh1aW50MzJfdCkgY29uc3Q7CiAgYXRvbSB2YWx1ZV90b19hdG9tKGNvbnN0IGNvbnN0X3ZhbHVlJiB2KSBjb25zdDsKCiAgdm9pZCBmcmVlX2F0b20oY29uc3QgYXRvbSYgYSkgY29uc3Q7CgogIHZhbHVlIGF0b21fdG9fdmFsdWUoY29uc3QgYXRvbSYgYSkgY29uc3Q7CiAgdmFsdWUgYXRvbV90b19zdHJpbmcoY29uc3QgYXRvbSYgYSkgY29uc3Q7CiAgY29uc3QgY2hhciogYXRvbV90b19jc3RyaW5nKGNvbnN0IGF0b20mIGEpIGNvbnN0OwoKICB2b2lkCiAgZnJlZV92YWx1ZShjb25zdCB2YWx1ZSYgdikgY29uc3QgewogICAgSlNfRnJlZVZhbHVlKGN0eCwgdik7CiAgfQoKcHJvdGVjdGVkOgogIHZhbHVlIGdldF91bmRlZmluZWQoKSBjb25zdDsKICB2YWx1ZSBnZXRfbnVsbCgpIGNvbnN0OwogIHZhbHVlIGdldF90cnVlKCkgY29uc3Q7CiAgdmFsdWUgZ2V0X2ZhbHNlKCkgY29uc3Q7CgpwdWJsaWM6CiAgSlNDb250ZXh0KiBjdHg7Cgpwcml2YXRlOgogIEpTUnVudGltZSoKICBnZXRfcnVudGltZSgpIGNvbnN0IHsKICAgIHJldHVybiBKU19HZXRSdW50aW1lKGN0eCk7CiAgfQoKcHVibGljOgogIGludDMyX3QgZ2V0X2xlbmd0aChjb25zdCBjb25zdF92YWx1ZSYgdikgY29uc3Q7CiAganNpdGVyIGJlZ2luKEpTVmFsdWUmIHYpOwogIGpzaXRlciBlbmQoSlNWYWx1ZSYgdik7Cgpwcml2YXRlOgogIGZyaWVuZCBjbGFzcyBqc2l0ZXI7CgogIHN0ZDo6ZnVuY3Rpb248SlNWYWx1ZShKU1ZhbHVlLCB1aW50MzJfdCk+IGluZGV4KCkgY29uc3Q7CiAgc3RkOjpmdW5jdGlvbjxKU1ZhbHVlKHVpbnQzMl90KT4gaW5kZXgoY29uc3QgSlNWYWx1ZUNvbnN0JikgY29uc3Q7Cn07CgppbmxpbmUgdm9pZApqc3J0OjpnZXRfc3RyaW5nKGNvbnN0X3ZhbHVlIHZhbCwgc3RkOjpzdHJpbmcmIHN0cikgY29uc3QgewogIGNvbnN0IGNoYXIqIHMgPSBKU19Ub0NTdHJpbmcoY3R4LCB2YWwpOwogIHN0ciA9IHN0ZDo6c3RyaW5nKHMpOwogIEpTX0ZyZWVDU3RyaW5nKGN0eCwgcyk7Cn0KCmlubGluZSB2b2lkCmpzcnQ6OmdldF9zdHJpbmcoY29uc3RfdmFsdWUgdmFsLCBjb25zdCBjaGFyKiYgc3RyKSBjb25zdCB7CiAgY29uc3QgY2hhciogcyA9IEpTX1RvQ1N0cmluZyhjdHgsIHZhbCk7CiAgc3RyID0gc3RyZHVwKHMpOwogIEpTX0ZyZWVDU3RyaW5nKGN0eCwgcyk7Cn0KCnRlbXBsYXRlPD4KaW5saW5lIHZvaWQKanNydDo6Z2V0X251bWJlcjxpbnQzMl90Pihjb25zdF92YWx1ZSB2YWwsIGludDMyX3QmIHJlZikgY29uc3QgewogIGludDMyX3QgaSA9IC0xOwogIEpTX1RvSW50MzIoY3R4LCAmaSwgdmFsKTsKICByZWYgPSBpOwp9Cgp0ZW1wbGF0ZTw+CmlubGluZSB2b2lkCmpzcnQ6OmdldF9udW1iZXI8aW50NjRfdD4oY29uc3RfdmFsdWUgdmFsLCBpbnQ2NF90JiByZWYpIGNvbnN0IHsKICBpbnQ2NF90IGkgPSAwOwogIEpTX1RvSW50NjQoY3R4LCAmaSwgdmFsKTsKICByZWYgPSBpOwp9Cgp0ZW1wbGF0ZTw+CmlubGluZSB2b2lkCmpzcnQ6OmdldF9udW1iZXI8ZG91YmxlPihjb25zdF92YWx1ZSB2YWwsIGRvdWJsZSYgcmVmKSBjb25zdCB7CiAgZG91YmxlIGYgPSAwOwogIEpTX1RvRmxvYXQ2NChjdHgsICZmLCB2YWwpOwogIHJlZiA9IGY7Cn0KCnRlbXBsYXRlPD4KaW5saW5lIHZvaWQKanNydDo6Z2V0X251bWJlcjxmbG9hdD4oY29uc3RfdmFsdWUgdmFsLCBmbG9hdCYgcmVmKSBjb25zdCB7CiAgZG91YmxlIGYgPSAwOwogIGdldF9udW1iZXIodmFsLCBmKTsKICByZWYgPSBmOwp9Cgp0ZW1wbGF0ZTw+CmlubGluZSB2b2lkCmpzcnQ6OmdldF9udW1iZXI8dWludDMyX3Q+KGNvbnN0X3ZhbHVlIHZhbCwgdWludDMyX3QmIHJlZikgY29uc3QgewogIGludDY0X3QgaSA9IDA7CiAgZ2V0X251bWJlcjxpbnQ2NF90Pih2YWwsIGkpOwogIHJlZiA9IHN0YXRpY19jYXN0PHVpbnQzMl90PihpKTsKfQoKdGVtcGxhdGU8Y2xhc3MgVD4KaW5saW5lIHZvaWQKanNydDo6Z2V0X2ludF9hcnJheShjb25zdF92YWx1ZSB2YWwsIFQmIHJlZikgY29uc3QgewogIHVpbnQzMl90IGksIG4sIGxlbmd0aCA9IDAsIGFyciA9IEpTX0lzQXJyYXkoY3R4LCB2YWwpOwogIGlmKGFycikgewogICAgZ2V0X251bWJlcihnZXRfcHJvcGVydHk8Y29uc3QgY2hhcio+KHZhbCwgImxlbmd0aCIpLCBsZW5ndGgpOwogICAgZm9yKGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHsKICAgICAgdmFsdWUgdiA9IGdldF9wcm9wZXJ0eTx1aW50MzJfdD4odmFsLCBpKTsKICAgICAgZ2V0X251bWJlcih2LCBuKTsKICAgICAgcmVmW2ldID0gbjsKICAgIH0KICB9Cn0KCnRlbXBsYXRlPGNsYXNzIFQ+CmlubGluZSB2b2lkCmpzcnQ6OmdldF9wb2ludChjb25zdF92YWx1ZSB2YWwsIFQmIHJlZikgY29uc3QgewogIGNvbnN0X3ZhbHVlIHZ4ID0gX3VuZGVmaW5lZCwgdnkgPSBfdW5kZWZpbmVkOwoKICBpZihpc19hcnJheSh2YWwpKSB7CiAgICB1aW50MzJfdCBsZW5ndGg7CiAgICBnZXRfbnVtYmVyKGdldF9wcm9wZXJ0eTxjb25zdCBjaGFyKj4odmFsLCAibGVuZ3RoIiksIGxlbmd0aCk7CiAgICBpZihsZW5ndGggPj0gMikgewogICAgICB2eCA9IGdldF9wcm9wZXJ0eTx1aW50MzJfdD4odmFsLCAwKTsKICAgICAgdnkgPSBnZXRfcHJvcGVydHk8dWludDMyX3Q+KHZhbCwgMSk7CiAgICB9IGVsc2UgewogICAgICByZXR1cm47CiAgICB9CiAgfSBlbHNlIGlmKGlzX29iamVjdCh2YWwpICYmIGhhc19wcm9wZXJ0eSh2YWwsICJ4IikgJiYgaGFzX3Byb3BlcnR5KHZhbCwgInkiKSkgewogICAgdnggPSBnZXRfcHJvcGVydHk8Y29uc3QgY2hhcio+KHZhbCwgIngiKTsKICAgIHZ5ID0gZ2V0X3Byb3BlcnR5PGNvbnN0IGNoYXIqPih2YWwsICJ5Iik7CiAgfQoKICBnZXRfbnVtYmVyKHZ4LCByZWYueCk7CiAgZ2V0X251bWJlcih2eSwgcmVmLnkpOwp9Cgp0ZW1wbGF0ZTxjbGFzcyBUPgppbmxpbmUgdm9pZApqc3J0OjpnZXRfcmVjdChjb25zdF92YWx1ZSB2YWwsIFQmIHJlZikgY29uc3QgewogIGlmKGlzX29iamVjdCh2YWwpKSB7CiAgICBkb3VibGUgdncsIHZoOwoKICAgIGdldF9wb2ludCh2YWwsIHJlZik7CgogICAgZ2V0X251bWJlcihnZXRfcHJvcGVydHk8Y29uc3QgY2hhcio+KHZhbCwgIndpZHRoIiksIHZ3KTsKICAgIGdldF9udW1iZXIoZ2V0X3Byb3BlcnR5PGNvbnN0IGNoYXIqPih2YWwsICJoZWlnaHQiKSwgdmgpOwoKICAgIHJlZi53aWR0aCA9IHZ3OwogICAgcmVmLmhlaWdodCA9IHZoOwogIH0KfQoKdGVtcGxhdGU8Y2xhc3MgVD4KaW5saW5lIHZvaWQKanNydDo6Z2V0X2NvbG9yKGNvbnN0X3ZhbHVlIHZhbCwgVCYgcmVmKSBjb25zdCB7CiAgY29uc3RfdmFsdWUgdnIgPSBfdW5kZWZpbmVkLCB2ZyA9IF91bmRlZmluZWQsIHZiID0gX3VuZGVmaW5lZCwgdmEgPSBfdW5kZWZpbmVkOwoKICBpZihpc19vYmplY3QodmFsKSAmJiBoYXNfcHJvcGVydHkodmFsLCAiciIpICYmIGhhc19wcm9wZXJ0eSh2YWwsICJnIikgJiYgaGFzX3Byb3BlcnR5KHZhbCwgImIiKSkgewogICAgdnIgPSBnZXRfcHJvcGVydHk8Y29uc3QgY2hhcio+KHZhbCwgInIiKTsKICAgIHZnID0gZ2V0X3Byb3BlcnR5PGNvbnN0IGNoYXIqPih2YWwsICJnIik7CiAgICB2YiA9IGdldF9wcm9wZXJ0eTxjb25zdCBjaGFyKj4odmFsLCAiYiIpOwogICAgdmEgPSBnZXRfcHJvcGVydHk8Y29uc3QgY2hhcio+KHZhbCwgImEiKTsKICB9IGVsc2UgaWYoaXNfYXJyYXlfbGlrZSh2YWwpKSB7CiAgICB1aW50MzJfdCBsZW5ndGg7CiAgICBnZXRfbnVtYmVyKGdldF9wcm9wZXJ0eTxjb25zdCBjaGFyKj4odmFsLCAibGVuZ3RoIiksIGxlbmd0aCk7CiAgICBpZihsZW5ndGggPj0gMykgewogICAgICB2ciA9IGdldF9wcm9wZXJ0eTx1aW50MzJfdD4odmFsLCAwKTsKICAgICAgdmcgPSBnZXRfcHJvcGVydHk8dWludDMyX3Q+KHZhbCwgMSk7CiAgICAgIHZiID0gZ2V0X3Byb3BlcnR5PHVpbnQzMl90Pih2YWwsIDIpOwogICAgICB2YSA9IGdldF9wcm9wZXJ0eTx1aW50MzJfdD4odmFsLCAzKTsKICAgIH0gZWxzZSB7CiAgICAgIHJldHVybjsKICAgIH0KICB9CiAgZ2V0X251bWJlcih2YiwgcmVmWzBdKTsKICBnZXRfbnVtYmVyKHZnLCByZWZbMV0pOwogIGdldF9udW1iZXIodnIsIHJlZlsyXSk7CiAgZ2V0X251bWJlcih2YSwgcmVmWzNdKTsKfQoKdGVtcGxhdGU8Y2xhc3MgVD4KaW5saW5lIHZvaWQKanNydDo6Z2V0X3BvaW50X2FycmF5KGNvbnN0X3ZhbHVlIHZhbCwgc3RkOjp2ZWN0b3I8VD4mIHJlZikgY29uc3QgewogIGlmKGlzX2FycmF5X2xpa2UodmFsKSkgewogICAgdWludDMyX3QgaSwgbGVuZ3RoOwoKICAgIGdldF9udW1iZXIoZ2V0X3Byb3BlcnR5PGNvbnN0IGNoYXIqPih2YWwsICJsZW5ndGgiKSwgbGVuZ3RoKTsKICAgIHJlZi5yZXNpemUobGVuZ3RoKTsKCiAgICBmb3IoaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykgewogICAgICBKU1ZhbHVlQ29uc3QgcHQgPSBnZXRfcHJvcGVydHk8dWludDMyX3Q+KHZhbCwgaSk7CgogICAgICBnZXRfcG9pbnQocHQsIHJlZltpXSk7CiAgICB9CiAgfQp9Cgp0ZW1wbGF0ZTw+CmlubGluZSBqc3J0Ojp2YWx1ZQpqc3J0OjpjcmVhdGU8ZG91YmxlPihkb3VibGUgbnVtKSB7CiAgcmV0dXJuIEpTX05ld0Zsb2F0NjQoY3R4LCBudW0pOwp9Cgp0ZW1wbGF0ZTw+CmlubGluZSBqc3J0Ojp2YWx1ZQpqc3J0OjpjcmVhdGU8ZmxvYXQ+KGZsb2F0IG51bSkgewogIHJldHVybiBjcmVhdGUoc3RhdGljX2Nhc3Q8ZG91YmxlPihudW0pKTsKfQoKdGVtcGxhdGU8PgppbmxpbmUganNydDo6dmFsdWUKanNydDo6Y3JlYXRlPGludD4oaW50IG51bSkgewogIHJldHVybiBKU19OZXdJbnQzMihjdHgsIG51bSk7Cn0KCnRlbXBsYXRlPD4KaW5saW5lIGpzcnQ6OnZhbHVlCmpzcnQ6OmNyZWF0ZTxjb25zdCBjaGFyKj4oY29uc3QgY2hhciogc3RyKSB7CiAgcmV0dXJuIEpTX05ld1N0cmluZyhjdHgsIHN0cik7Cn0KCnRlbXBsYXRlPD4KaW5saW5lIGpzcnQ6OnZhbHVlCmpzcnQ6OmNyZWF0ZTxib29sPihib29sIGIpIHsKICByZXR1cm4gYiA/IGdldF90cnVlKCkgOiBnZXRfZmFsc2UoKTsKfQoKaW5saW5lIGpzcnQ6OnZhbHVlCmpzcnQ6OmNyZWF0ZV9hcnJheShpbnQzMl90IHNpemUpIHsKICB2YWx1ZSByZXQgPSBKU19OZXdBcnJheShjdHgpOwogIGlmKHNpemUgPj0gMCkKICAgIEpTX1NldFByb3BlcnR5U3RyKGN0eCwgcmV0LCAibGVuZ3RoIiwgSlNfTmV3SW50MzIoY3R4LCBzaXplKSk7CgogIHJldHVybiByZXQ7Cn0KCmlubGluZSBqc3J0Ojp2YWx1ZQpqc3J0OjpjcmVhdGVfb2JqZWN0KCkgewogIHJldHVybiBKU19OZXdPYmplY3QoY3R4KTsKfQoKdGVtcGxhdGU8Y2xhc3MgVD4KaW5saW5lIGpzcnQ6OnZhbHVlCmpzcnQ6OmNyZWF0ZShUIGFyZykgewogIHJldHVybiBzdGQ6OmlzX3BvaW50ZXI8VD46OnZhbHVlICYmIGFyZyA9PSBudWxscHRyID8gZ2V0X251bGwoKSA6IGdldF91bmRlZmluZWQoKTsKfQoKdGVtcGxhdGU8Y2xhc3MgVD4KaW5saW5lIGpzcnQ6OnZhbHVlCmpzcnQ6OmNyZWF0ZV9wb2ludChUIHgsIFQgeSkgewogIHZhbHVlIG9iaiA9IEpTX05ld09iamVjdChjdHgpOwogIEpTX1NldFByb3BlcnR5U3RyKGN0eCwgb2JqLCAieCIsIGNyZWF0ZSh4KSk7CiAgSlNfU2V0UHJvcGVydHlTdHIoY3R4LCBvYmosICJ5IiwgY3JlYXRlKHkpKTsKICByZXR1cm4gb2JqOwp9Cgp0ZW1wbGF0ZTw+CmlubGluZSBqc3J0Ojp2YWx1ZQpqc3J0OjpnZXRfcHJvcGVydHk8dWludDMyX3Q+KGNvbnN0X3ZhbHVlIG9iaiwgdWludDMyX3QgaW5kZXgpIGNvbnN0IHsKICByZXR1cm4gSlNfR2V0UHJvcGVydHlVaW50MzIoY3R4LCBvYmosIGluZGV4KTsKfQoKdGVtcGxhdGU8PgppbmxpbmUganNydDo6dmFsdWUKanNydDo6Z2V0X3Byb3BlcnR5PGludD4oY29uc3RfdmFsdWUgb2JqLCBpbnQgaW5kZXgpIGNvbnN0IHsKICByZXR1cm4gSlNfR2V0UHJvcGVydHlVaW50MzIoY3R4LCBvYmosIGluZGV4KTsKfQoKdGVtcGxhdGU8PgppbmxpbmUganNydDo6dmFsdWUKanNydDo6Z2V0X3Byb3BlcnR5PGNvbnN0IHN0ZDo6c3RyaW5nJj4oY29uc3RfdmFsdWUgb2JqLCBjb25zdCBzdGQ6OnN0cmluZyYgbmFtZSkgY29uc3QgewogIHJldHVybiBKU19HZXRQcm9wZXJ0eVN0cihjdHgsIG9iaiwgbmFtZS5jX3N0cigpKTsKfQoKdGVtcGxhdGU8PgppbmxpbmUganNydDo6dmFsdWUKanNydDo6Z2V0X3Byb3BlcnR5PGNvbnN0IGNoYXIqPihjb25zdF92YWx1ZSBvYmosIGNvbnN0IGNoYXIqIG5hbWUpIGNvbnN0IHsKICByZXR1cm4gSlNfR2V0UHJvcGVydHlTdHIoY3R4LCBvYmosIG5hbWUpOwp9CgppbmxpbmUganNydDo6dmFsdWUKanNydDo6Z2V0X3Byb3BlcnR5X2F0b20oY29uc3RfdmFsdWUgb2JqLCBhdG9tIGEpIGNvbnN0IHsKICByZXR1cm4gSlNfR2V0UHJvcGVydHkoY3R4LCBvYmosIGEpOwp9Cgp0ZW1wbGF0ZTw+CmlubGluZSBqc3J0Ojp2YWx1ZQpqc3J0OjpnZXRfcHJvcGVydHk8anNydDo6dmFsdWU+KGNvbnN0X3ZhbHVlIG9iaiwgdmFsdWUgcHJvcCkgY29uc3QgewogIHJldHVybiBnZXRfcHJvcGVydHlfYXRvbShvYmosIHZhbHVlX3RvX2F0b20ocHJvcCkpOwp9CgppbmxpbmUganNydDo6dmFsdWUKanNydDo6Z2V0X2NvbnN0cnVjdG9yKGpzcnQ6OmNvbnN0X3ZhbHVlIG9iaikgY29uc3QgewogIHJldHVybiBnZXRfcHJvcGVydHk8Y29uc3QgY2hhcio+KGdldF9wcm90b3R5cGUob2JqKSwgImNvbnN0cnVjdG9yIik7Cn0KCmlubGluZSBib29sCmpzcnQ6Omhhc19jb25zdHJ1Y3Rvcihqc3J0Ojpjb25zdF92YWx1ZSBvYmopIGNvbnN0IHsKICByZXR1cm4gIWlzX3VuZGVmaW5lZChnZXRfY29uc3RydWN0b3Iob2JqKSk7Cn0KCmlubGluZSBqc3J0Ojp2YWx1ZQpqc3J0OjpnZXRfcHJvdG90eXBlKGpzcnQ6OmNvbnN0X3ZhbHVlIG9iaikgY29uc3QgewogIHJldHVybiBKU19HZXRQcm90b3R5cGUoY3R4LCBvYmopOwp9CgppbmxpbmUgYm9vbApqc3J0OjpoYXNfcHJvdG90eXBlKGpzcnQ6OmNvbnN0X3ZhbHVlIG9iaikgY29uc3QgewogIHJldHVybiAhaXNfdW5kZWZpbmVkKGdldF9wcm90b3R5cGUob2JqKSk7Cn0KCmlubGluZSBzdGQ6OnN0cmluZwpqc3J0OjpmdW5jdGlvbl9uYW1lKGpzcnQ6OmNvbnN0X3ZhbHVlIGZuKSBjb25zdCB7CiAgcmV0dXJuIHRvX3N0cmluZyhnZXRfcHJvcGVydHk8Y29uc3QgY2hhcio+KGZuLCAibmFtZSIpKTsKfQoKaW5saW5lIGJvb2wKanNydDo6aGFzX3Byb3BlcnR5KGNvbnN0X3ZhbHVlIG9iaiwgY29uc3QganNhdG9tJiBhdG9tKSBjb25zdCB7CiAgcmV0dXJuIEpTX0hhc1Byb3BlcnR5KGN0eCwgb2JqLCBhdG9tKTsKfQoKdGVtcGxhdGU8PgppbmxpbmUgdm9pZApqc3J0OjpzZXRfcHJvcGVydHk8Y29uc3QgY2hhcio+KGNvbnN0X3ZhbHVlIG9iaiwgY29uc3QgY2hhciogbmFtZSwgdmFsdWUgdmFsKSB7CiAgLy8gSlNfU2V0UHJvcGVydHlTdHIoY3R4LCBvYmosIG5hbWUsIHZhbCk7CiAgSlNfRGVmaW5lUHJvcGVydHlWYWx1ZVN0cihjdHgsIG9iaiwgbmFtZSwgdmFsLCBKU19QUk9QX0NfV19FKTsKfQoKdGVtcGxhdGU8PgppbmxpbmUgdm9pZApqc3J0OjpzZXRfcHJvcGVydHk8dWludDMyX3Q+KGNvbnN0X3ZhbHVlIG9iaiwgdWludDMyX3QgaW5kZXgsIHZhbHVlIHZhbCkgewogIEpTX1NldFByb3BlcnR5VWludDMyKGN0eCwgb2JqLCBpbmRleCwgdmFsKTsKfQoKdGVtcGxhdGU8PgppbmxpbmUgdm9pZApqc3J0OjpzZXRfcHJvcGVydHk8Y29uc3QganNhdG9tJj4oY29uc3RfdmFsdWUgb2JqLCBjb25zdCBqc2F0b20mIGF0b20sIHZhbHVlIHZhbCkgewogIEpTX1NldFByb3BlcnR5KGN0eCwgb2JqLCBhdG9tLCB2YWwpOwp9CgppbmxpbmUgdm9pZApqc3J0OjpzZXRfcHJvcGVydHkoY29uc3RfdmFsdWUgb2JqLCBjb25zdCBqc2F0b20mIGF0b20sIHZhbHVlIHZhbCwgaW50IGZsYWdzKSB7CiAgSlNfU2V0UHJvcGVydHlJbnRlcm5hbChjdHgsIG9iaiwgYXRvbSwgdmFsLCBmbGFncyk7Cn0KCnRlbXBsYXRlPGNsYXNzIFQ+CmlubGluZSBqc3J0Ojp2YWx1ZQp2ZWN0b3JfdG9fanMoanNydCYganMsIGNvbnN0IFQmIHYsIHNpemVfdCBuLCBjb25zdCBzdGQ6OmZ1bmN0aW9uPGpzcnQ6OnZhbHVlKGNvbnN0IHR5cGVuYW1lIFQ6OnZhbHVlX3R5cGUmKT4mIGZuKSB7CiAgdXNpbmcgc3RkOjpwbGFjZWhvbGRlcnM6Ol8xOwogIGpzcnQ6OnZhbHVlIHJldCA9IGpzLmNyZWF0ZV9hcnJheShuKTsKICBmb3IodWludDMyX3QgaSA9IDA7IGkgPCBuOyBpKyspIGpzLnNldF9wcm9wZXJ0eShyZXQsIGksIGZuKHZbaV0pKTsKICByZXR1cm4gcmV0Owp9Cgp0ZW1wbGF0ZTxjbGFzcyBUPgppbmxpbmUganNydDo6dmFsdWUKdmVjdG9yX3RvX2pzKGpzcnQmIGpzLCBjb25zdCBUJiB2LCBzaXplX3QgbikgewogIHJldHVybiB2ZWN0b3JfdG9fanModiwgbiwgc3RkOjpiaW5kKCZqc3J0OjpjcmVhdGU8dHlwZW5hbWUgVDo6dmFsdWVfdHlwZT4sICZqcywgc3RkOjpwbGFjZWhvbGRlcnM6Ol8xKSk7Cn0KCnRlbXBsYXRlPGNsYXNzIFQ+CmlubGluZSBqc3J0Ojp2YWx1ZQp2ZWN0b3JfdG9fanMoanNydCYganMsIGNvbnN0IFQmIHYpIHsKICByZXR1cm4gdmVjdG9yX3RvX2pzKGpzLCB2LCB2LnNpemUoKSk7Cn0KCnRlbXBsYXRlPGNsYXNzIFA+CmlubGluZSBqc3J0Ojp2YWx1ZQp2ZWN0b3JfdG9fanMoanNydCYganMsIGNvbnN0IHN0ZDo6dmVjdG9yPFA+JiB2LCBjb25zdCBzdGQ6OmZ1bmN0aW9uPGpzcnQ6OnZhbHVlKGNvbnN0IFAmKT4mIGZuKSB7CiAgcmV0dXJuIHZlY3Rvcl90b19qcyhqcywgdiwgdi5zaXplKCksIGZuKTsKfQoKdGVtcGxhdGU8Y2xhc3MgUD4KaW5saW5lIGpzcnQ6OnZhbHVlCnBvaW50ZXJfdG9fanMoanNydCYganMsIGNvbnN0IFAqIHYsIHNpemVfdCBuLCBjb25zdCBzdGQ6OmZ1bmN0aW9uPGpzcnQ6OnZhbHVlKGNvbnN0IFAmKT4mIGZuKSB7CiAganNydDo6dmFsdWUgcmV0ID0ganMuY3JlYXRlX2FycmF5KG4pOwogIGZvcih1aW50MzJfdCBpID0gMDsgaSA8IG47IGkrKykganMuc2V0X3Byb3BlcnR5KHJldCwgaSwgZm4odltpXSkpOwogIHJldHVybiByZXQ7Cn0KCnRlbXBsYXRlPGNsYXNzIFA+CmlubGluZSBqc3J0Ojp2YWx1ZQpwb2ludGVyX3RvX2pzKGpzcnQmIGpzLCBjb25zdCBQKiB2LCBzaXplX3QgbikgewogIHN0ZDo6ZnVuY3Rpb248anNydDo6dmFsdWUoY29uc3QgUCYpPiBmbihbJl0oY29uc3QgUCYgdikgLT4ganNydDo6dmFsdWUgeyByZXR1cm4ganMuY3JlYXRlKHYpOyB9KTsKCiAgcmV0dXJuIHBvaW50ZXJfdG9fanMoanMsIHYsIG4sIGZuKTsKfQoKdGVtcGxhdGU8Y2xhc3MgUD4KaW5saW5lIGpzcnQ6OnZhbHVlCnZlY3Rvcl90b19qcyhqc3J0JiBqcywgY29uc3Qgc3RkOjp2ZWN0b3I8UD4mIHYsIGpzcnQ6OnZhbHVlICgqZm4pKGNvbnN0IFAmKSkgewogIHVpbnQzMl90IGksIG4gPSB2LnNpemUoKTsKICBqc3J0Ojp2YWx1ZSByZXQgPSBqcy5jcmVhdGVfYXJyYXkobik7CiAgZm9yKGkgPSAwOyBpIDwgbjsgaSsrKSBqcy5zZXRfcHJvcGVydHkocmV0LCBpLCBmbih2W2ldKSk7CiAgcmV0dXJuIHJldDsKfQoKdGVtcGxhdGU8Y2xhc3MgUD4KaW5saW5lIGpzcnQ6OnZhbHVlCnZlY3Rvcl90b19qcyhqc3J0JiBqcywgY29uc3Qgc3RkOjp2ZWN0b3I8UD4mIHYpIHsKICB1c2luZyBzdGQ6OnBsYWNlaG9sZGVyczo6XzE7CiAgcmV0dXJuIHZlY3Rvcl90b19qczxQPih2LCBzdGQ6OmJpbmQoJmpzcnQ6OmNyZWF0ZTxQPiwgJmpzLCBfMSkpOwp9CgppbmxpbmUgc3RkOjpzdHJpbmcKdG9fc3RyaW5nKGNvbnN0IGNoYXIqIHMpIHsKICByZXR1cm4gc3RkOjpzdHJpbmcocyk7Cn0KCmlubGluZSBib29sCmpzcnQ6OmlzX251bWJlcihjb25zdF92YWx1ZSB2YWwpIGNvbnN0IHsKICByZXR1cm4gSlNfSXNOdW1iZXIodmFsKTsKfQoKaW5saW5lIGJvb2wKanNydDo6aXNfYmlnX2ludChjb25zdF92YWx1ZSB2YWwpIGNvbnN0IHsKICByZXR1cm4gSlNfSXNCaWdJbnQoY3R4LCB2YWwpOwp9CgppbmxpbmUgYm9vbApqc3J0Ojppc19iaWdfZmxvYXQoY29uc3RfdmFsdWUgdmFsKSBjb25zdCB7CiAgcmV0dXJuIEpTX0lzQmlnRmxvYXQodmFsKTsKfQoKaW5saW5lIGJvb2wKanNydDo6aXNfYmlnX2RlY2ltYWwoY29uc3RfdmFsdWUgdmFsKSBjb25zdCB7CiAgcmV0dXJuIEpTX0lzQmlnRGVjaW1hbCh2YWwpOwp9CgppbmxpbmUgYm9vbApqc3J0Ojppc19ib29sKGNvbnN0X3ZhbHVlIHZhbCkgY29uc3QgewogIHJldHVybiBKU19Jc0Jvb2wodmFsKTsKfQoKaW5saW5lIGJvb2wKanNydDo6aXNfbnVsbChjb25zdF92YWx1ZSB2YWwpIGNvbnN0IHsKICByZXR1cm4gSlNfSXNOdWxsKHZhbCk7Cn0KCmlubGluZSBib29sCmpzcnQ6OmlzX3VuZGVmaW5lZChjb25zdF92YWx1ZSB2YWwpIGNvbnN0IHsKICByZXR1cm4gSlNfSXNVbmRlZmluZWQodmFsKTsKfQoKaW5saW5lIGJvb2wKanNydDo6aXNfZXhjZXB0aW9uKGNvbnN0X3ZhbHVlIHZhbCkgY29uc3QgewogIHJldHVybiBKU19Jc0V4Y2VwdGlvbih2YWwpOwp9CgppbmxpbmUgYm9vbApqc3J0Ojppc191bmluaXRpYWxpemVkKGNvbnN0X3ZhbHVlIHZhbCkgY29uc3QgewogIHJldHVybiBKU19Jc1VuaW5pdGlhbGl6ZWQodmFsKTsKfQoKaW5saW5lIGJvb2wKanNydDo6aXNfc3RyaW5nKGNvbnN0X3ZhbHVlIHZhbCkgY29uc3QgewogIHJldHVybiBKU19Jc1N0cmluZyh2YWwpOwp9CgppbmxpbmUgYm9vbApqc3J0Ojppc19zeW1ib2woY29uc3RfdmFsdWUgdmFsKSBjb25zdCB7CiAgcmV0dXJuIEpTX0lzU3ltYm9sKHZhbCk7Cn0KCmlubGluZSBib29sCmpzcnQ6OmlzX29iamVjdChjb25zdF92YWx1ZSB2YWwpIGNvbnN0IHsKICByZXR1cm4gSlNfSXNPYmplY3QodmFsKTsKfQoKaW5saW5lIGJvb2wKanNydDo6aXNfZXJyb3IoY29uc3RfdmFsdWUgdmFsKSBjb25zdCB7CiAgcmV0dXJuIEpTX0lzRXJyb3IoY3R4LCB2YWwpOwp9CgppbmxpbmUgYm9vbApqc3J0Ojppc19mdW5jdGlvbihjb25zdF92YWx1ZSB2YWwpIGNvbnN0IHsKICByZXR1cm4gSlNfSXNGdW5jdGlvbihjdHgsIHZhbCk7Cn0KCmlubGluZSBib29sCmpzcnQ6OmlzX2NvbnN0cnVjdG9yKGNvbnN0X3ZhbHVlIHZhbCkgY29uc3QgewogIHJldHVybiBKU19Jc0NvbnN0cnVjdG9yKGN0eCwgdmFsKTsKfQoKaW5saW5lIGJvb2wKanNydDo6aXNfYXJyYXkoY29uc3RfdmFsdWUgdmFsKSBjb25zdCB7CiAgcmV0dXJuIEpTX0lzQXJyYXkoY3R4LCB2YWwpOwp9CgppbmxpbmUgYm9vbApqc3J0Ojppc19leHRlbnNpYmxlKGNvbnN0X3ZhbHVlIHZhbCkgY29uc3QgewogIHJldHVybiBKU19Jc0V4dGVuc2libGUoY3R4LCB2YWwpOwp9CgppbmxpbmUgYm9vbApqc3J0Ojppc19hcnJheV9saWtlKGNvbnN0X3ZhbHVlIHZhbCkgY29uc3QgewogIGlmKGlzX2FycmF5KHZhbCkpCiAgICByZXR1cm4gdHJ1ZTsKCiAgaWYoaGFzX3Byb3BlcnR5KHZhbCwgImxlbmd0aCIpKSB7CiAgICBpZihpc19udW1iZXIoZ2V0X3Byb3BlcnR5PGNvbnN0IGNoYXIqPih2YWwsICJsZW5ndGgiKSkpCiAgICAgIHJldHVybiB0cnVlOwogIH0KICByZXR1cm4gZmFsc2U7Cn0KCi8qKgogKiBBcnJheSBpdGVyYXRvcgogKi8Kc3RydWN0IGpzaXRlciB7CiAgSlNWYWx1ZQogIG9wZXJhdG9yKigpIGNvbnN0IHsKICAgIGlmKHAgPCBuKQogICAgICByZXR1cm4gaSgodWludDMyX3QpcCk7CiAgICBlbHNlCiAgICAgIHJldHVybiBKU19VTkRFRklORUQ7CiAgfQogIGpzaXRlcgogIG9wZXJhdG9yKysoKSB7CiAgICBqc2l0ZXIgcmV0ID0gKnRoaXM7CiAgICBpZihwIDwgbikKICAgICAgcCsrOwogICAgcmV0dXJuIHJldDsKICB9CiAganNpdGVyJgogIG9wZXJhdG9yKysoaW50KSB7CiAgICBpZihwIDwgbikKICAgICAgKytwOwogICAgcmV0dXJuICp0aGlzOwogIH0KICBib29sCiAgb3BlcmF0b3I9PShjb25zdCBqc2l0ZXImIG8pIGNvbnN0IHsKICAgIHJldHVybiBwID09IG8ucCAmJiBuID09IG8ubjsKICB9CiAgYm9vbAogIG9wZXJhdG9yPChjb25zdCBqc2l0ZXImIG8pIGNvbnN0IHsKICAgIHJldHVybiBwIDwgby5wOwogIH0KICBib29sCiAgb3BlcmF0b3I+KGNvbnN0IGpzaXRlciYgbykgY29uc3QgewogICAgcmV0dXJuIHAgPiBvLnA7CiAgfQogIGJvb2wKICBvcGVyYXRvcjw9KGNvbnN0IGpzaXRlciYgbykgY29uc3QgewogICAgcmV0dXJuICEoKnRoaXMgPiBvKTsKICB9CiAgYm9vbAogIG9wZXJhdG9yPj0oY29uc3QganNpdGVyJiBvKSBjb25zdCB7CiAgICByZXR1cm4gISgqdGhpcyA8IG8pOwogIH0KICBib29sCiAgb3BlcmF0b3IhPShjb25zdCBqc2l0ZXImIG8pIGNvbnN0IHsKICAgIHJldHVybiAhKCp0aGlzID09IG8pOwogIH0KCiAgcHRyZGlmZl90CiAgb3BlcmF0b3ItKGNvbnN0IGpzaXRlciYgbykgY29uc3QgewogICAgcmV0dXJuIHAgLSBvLnA7CiAgfQoKICBqc2l0ZXIKICBvcGVyYXRvci0oc2l6ZV90IG8pIGNvbnN0IHsKICAgIHJldHVybiBqc2l0ZXIoaSwgbiwgcCAtIG8pOwogIH0KCiAganNpdGVyCiAgb3BlcmF0b3IrKHNpemVfdCBvKSBjb25zdCB7CiAgICByZXR1cm4ganNpdGVyKGksIG4sIHAgKyBvKTsKICB9Cgpwcm90ZWN0ZWQ6CiAgc3RkOjpmdW5jdGlvbjxKU1ZhbHVlKHVpbnQzMl90KT4gaTsKICB1aW50MzJfdCBuOwogIHVpbnQzMl90IHA7Cgpwcml2YXRlOgogIGZyaWVuZCBjbGFzcyBqc3J0OwoKICBqc2l0ZXIoc3RkOjpmdW5jdGlvbjxKU1ZhbHVlKHVpbnQzMl90KT4gaW5kZXgsIHNpemVfdCBsZW4sIHNpemVfdCBwb3MpIDogaShpbmRleCksIG4obGVuKSwgcChwb3MpIHt9CiAganNpdGVyKGpzcnQmIGpzLCBjb25zdCBKU1ZhbHVlJiBhcnIsIHNpemVfdCBsZW4pIDogaShqcy5pbmRleChhcnIpKSwgbihsZW4pLCBwKDApIHt9CiAganNpdGVyKGpzcnQmIGpzLCBjb25zdCBKU1ZhbHVlJiBhcnIsIHNpemVfdCBsZW4sIHNpemVfdCBwb3MpIDogaShqcy5pbmRleChhcnIpKSwgbihsZW4pLCBwKHBvcykge30KfTsKCmlubGluZSBpbnQzMl90CmpzcnQ6OmdldF9sZW5ndGgoY29uc3QganNydDo6Y29uc3RfdmFsdWUmIGEpIGNvbnN0IHsKICB1aW50MzJfdCBsZW5ndGg7CiAgSlNWYWx1ZSB2ID0gZ2V0X3Byb3BlcnR5PGNvbnN0IGNoYXIqPihhLCAibGVuZ3RoIik7CiAgaWYoaXNfdW5kZWZpbmVkKHYpKQogICAgcmV0dXJuIC0xOwogIGdldF9udW1iZXIodiwgbGVuZ3RoKTsKICByZXR1cm4gbGVuZ3RoOwp9CgppbmxpbmUganNpdGVyCmpzcnQ6OmJlZ2luKEpTVmFsdWUmIHYpIHsKICB1aW50MzJfdCBuID0gZ2V0X2xlbmd0aCh2KTsKICByZXR1cm4ganNpdGVyKCp0aGlzLCB2LCBuLCAwKTsKfQoKaW5saW5lIGpzaXRlcgpqc3J0OjplbmQoSlNWYWx1ZSYgdikgewogIHVpbnQzMl90IG4gPSBnZXRfbGVuZ3RoKHYpOwogIHJldHVybiBqc2l0ZXIoKnRoaXMsIHYsIG4sIG4pOwp9CgppbmxpbmUgc3RkOjpmdW5jdGlvbjxKU1ZhbHVlKEpTVmFsdWUsIHVpbnQzMl90KT4KanNydDo6aW5kZXgoKSBjb25zdCB7CiAgcmV0dXJuIHN0ZDo6YmluZCgmanNydDo6Z2V0X3Byb3BlcnR5PHVpbnQzMl90PiwgdGhpcywgc3RkOjpwbGFjZWhvbGRlcnM6Ol8xLCBzdGQ6OnBsYWNlaG9sZGVyczo6XzIpOwp9CgppbmxpbmUgc3RkOjpmdW5jdGlvbjxKU1ZhbHVlKHVpbnQzMl90KT4KanNydDo6aW5kZXgoY29uc3QgSlNWYWx1ZUNvbnN0JiBhKSBjb25zdCB7CiAgcmV0dXJuIHN0ZDo6YmluZCgmanNydDo6Z2V0X3Byb3BlcnR5PHVpbnQzMl90PiwgdGhpcywgYSwgc3RkOjpwbGFjZWhvbGRlcnM6Ol8xKTsKfQoKaW5saW5lIGJvb2wKanNydDo6aXNfaXRlcmFibGUoY29uc3RfdmFsdWUgdmFsKSB7CiAgYm9vbCByZXQgPSBmYWxzZTsKICB2YWx1ZSBzeW0gPSBnZXRfc3ltYm9sKCJpdGVyYXRvciIpOwogIGlmKGlzX29iamVjdCh2YWwpICYmIGhhc19wcm9wZXJ0eSh2YWwsIHN5bSkpIHsKICAgIHZhbHVlIGl0ZXIgPSBnZXRfcHJvcGVydHk8dmFsdWU+KHZhbCwgc3ltKTsKICAgIHJldCA9IGlzX2Z1bmN0aW9uKGl0ZXIpOwogIH0KICBmcmVlX3ZhbHVlKHN5bSk7CiAgcmV0dXJuIHJldDsKfQoKaW5saW5lIGJvb2wKanNydDo6aXNfaXRlcmF0b3IoY29uc3RfdmFsdWUgdmFsKSBjb25zdCB7CiAgaWYoaXNfb2JqZWN0KHZhbCkgJiYgaGFzX3Byb3BlcnR5KHZhbCwgIm5leHQiKSkgewogICAgdmFsdWUgbmV4dCA9IGdldF9wcm9wZXJ0eTxjb25zdCBjaGFyKj4odmFsLCAibmV4dCIpOwogICAgcmV0dXJuIGlzX2Z1bmN0aW9uKG5leHQpOwogIH0KICByZXR1cm4gZmFsc2U7Cn0KCmV4dGVybiAiQyIganNydCBqczsKCnRlbXBsYXRlPD4KaW5saW5lIHN0ZDo6c3RyaW5nCmpzcnQ6OnRvPHN0ZDo6c3RyaW5nPihqc3J0Ojpjb25zdF92YWx1ZSB2YWwpIHsKICByZXR1cm4ganNydDo6dG9fc3RyaW5nKHZhbCk7Cn0KCnRlbXBsYXRlPD4KaW5saW5lIGludDMyX3QKanNydDo6dG88aW50MzJfdD4oanNydDo6Y29uc3RfdmFsdWUgdmFsKSB7CiAgaW50MzJfdCByZXQ7CiAganNydDo6Z2V0X251bWJlcih2YWwsIHJldCk7CiAgcmV0dXJuIHJldDsKfQoKdGVtcGxhdGU8PgppbmxpbmUgdWludDMyX3QKanNydDo6dG88dWludDMyX3Q+KGpzcnQ6OmNvbnN0X3ZhbHVlIHZhbCkgewogIHVpbnQzMl90IHJldDsKICBqc3J0OjpnZXRfbnVtYmVyKHZhbCwgcmV0KTsKICByZXR1cm4gcmV0Owp9Cgp0ZW1wbGF0ZTw+CmlubGluZSBmbG9hdApqc3J0Ojp0bzxmbG9hdD4oanNydDo6Y29uc3RfdmFsdWUgdmFsKSB7CiAgZmxvYXQgcmV0OwogIGpzcnQ6OmdldF9udW1iZXIodmFsLCByZXQpOwogIHJldHVybiByZXQ7Cn0KCnRlbXBsYXRlPD4KaW5saW5lIGRvdWJsZQpqc3J0Ojp0bzxkb3VibGU+KGpzcnQ6OmNvbnN0X3ZhbHVlIHZhbCkgewogIGRvdWJsZSByZXQ7CiAganNydDo6Z2V0X251bWJlcih2YWwsIHJldCk7CiAgcmV0dXJuIHJldDsKfQoKdGVtcGxhdGU8PgppbmxpbmUganNydDo6dmFsdWUKanNydDo6ZnJvbTxzdGQ6OnN0cmluZz4oY29uc3Qgc3RkOjpzdHJpbmcmIHZhbHVlKSB7CiAgcmV0dXJuIG5ld19zdHJpbmcodmFsdWUuY19zdHIoKSk7Cn0KCiNlbmRpZiAvLyBkZWZpbmVkIEpTX0hQUAoAAAAAAAAAACxdAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAgwwAAAAAAACDDAAAAAAAAAAAAAAAAPC/"
				],
				[
					65,
					1,
					"left_delete",
					null,
					"AQAAAGMAAAAAAAAAYwAAAAAAAAABAAAACg",
					"AQAAAAAAAAABAAAAZAAAAAAAAABkAAAAAAAAAAAAAAAAAPC/"
				]
			]
		},
		{
			"file": "js_clahe.cpp",
			"settings":
			{
				"buffer_size": 4958,
				"line_ending": "Unix"
			},
			"undo_stack":
			[
				[
					5,
					1,
					"paste",
					null,
					"AQAAANUAAAAAAAAAFQEAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA1QAAAAAAAADVAAAAAAAAAAAAAAAAAPC/"
				],
				[
					7,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"AQAAANUAAAAAAAAA1gAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA1QAAAAAAAADVAAAAAAAAAAAAAAAAAAAA"
				],
				[
					8,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAAAHEwAAI2luY2x1ZGUgImpzYmluZGluZ3MuaHBwIgojaW5jbHVkZSAianNfc2l6ZS5ocHAiCiNpbmNsdWRlICJqc19wb2ludC5ocHAiCiNpbmNsdWRlICJqc19tYXQuaHBwIgojaW5jbHVkZSAianNfYWxsb2MuaHBwIgoKSlNWYWx1ZSBjbGFoZV9wcm90byA9IEpTX1VOREVGSU5FRCwgY2xhaGVfY2xhc3MgPSBKU19VTkRFRklORUQ7CkpTQ2xhc3NJRCBqc19jbGFoZV9jbGFzc19pZDsKCmV4dGVybiAiQyIgVklTSUJMRSBpbnQganNfY2xhaGVfaW5pdChKU0NvbnRleHQqLCBKU01vZHVsZURlZiopOwoKZXh0ZXJuICJDIiBWSVNJQkxFIEpTVmFsdWUKanNfY2xhaGVfbmV3KEpTQ29udGV4dCogY3R4LCBkb3VibGUgY2xpcExpbWl0ID0gNDAuMCwgY3Y6OlNpemUgdGlsZUdyaWRTaXplID0gY3Y6OlNpemUoOCwgOCkpIHsKICBKU1ZhbHVlIHJldDsKICBKU0NMQUhFRGF0YSogczsKICByZXQgPSBKU19OZXdPYmplY3RQcm90b0NsYXNzKGN0eCwgY2xhaGVfcHJvdG8sIGpzX2NsYWhlX2NsYXNzX2lkKTsKICBzID0ganNfYWxsb2NhdGU8SlNDTEFIRURhdGE+KGN0eCk7CiAgbmV3KHMpIEpTQ0xBSEVEYXRhKCk7CiAgKnMgPSBjdjo6Y3JlYXRlQ0xBSEUoY2xpcExpbWl0LCB0aWxlR3JpZFNpemUpOwogIEpTX1NldE9wYXF1ZShyZXQsIHMpOwogIHJldHVybiByZXQ7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX2NsYWhlX2N0b3IoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCBuZXdfdGFyZ2V0LCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2KSB7CiAgZG91YmxlIGNsaXBMaW1pdCA9IDQwLjA7CiAgSlNTaXplRGF0YTxkb3VibGU+IHRpbGVHcmlkU2l6ZSA9IGN2OjpTaXplMmQoOCwgOCk7CiAgaWYoYXJnYyA+PSAxKQogICAgSlNfVG9GbG9hdDY0KGN0eCwgJmNsaXBMaW1pdCwgYXJndlswXSk7CiAgaWYoYXJnYyA+PSAyKQogICAgaWYoIWpzX3NpemVfcmVhZChjdHgsIGFyZ3ZbMV0sICZ0aWxlR3JpZFNpemUpKQogICAgICByZXR1cm4gSlNfRVhDRVBUSU9OOwogIHJldHVybiBqc19jbGFoZV9uZXcoY3R4LCBjbGlwTGltaXQsIHRpbGVHcmlkU2l6ZSk7Cn0KCkpTQ0xBSEVEYXRhKgpqc19jbGFoZV9kYXRhKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdmFsKSB7CiAgcmV0dXJuIHN0YXRpY19jYXN0PEpTQ0xBSEVEYXRhKj4oSlNfR2V0T3BhcXVlMihjdHgsIHZhbCwganNfY2xhaGVfY2xhc3NfaWQpKTsKfQoKdm9pZApqc19jbGFoZV9maW5hbGl6ZXIoSlNSdW50aW1lKiBydCwgSlNWYWx1ZSB2YWwpIHsKICBKU0NMQUhFRGF0YSogcyA9IHN0YXRpY19jYXN0PEpTQ0xBSEVEYXRhKj4oSlNfR2V0T3BhcXVlKHZhbCwganNfY2xhaGVfY2xhc3NfaWQpKTsKICAvKiBOb3RlOiAncycgY2FuIGJlIE5VTEwgaW4gY2FzZSBKU19TZXRPcGFxdWUoKSB3YXMgbm90IGNhbGxlZCAqLwoKICBzLT5+SlNDTEFIRURhdGEoKTsKICBqc19kZWFsbG9jYXRlKHJ0LCBzKTsKfQoKc3RhdGljIEpTVmFsdWUKanNfY2xhaGVfbWV0aG9kKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QqIGFyZ3YsIGludCBtYWdpYykgewogIEpTQ0xBSEVEYXRhKiBzID0gc3RhdGljX2Nhc3Q8SlNDTEFIRURhdGEqPihKU19HZXRPcGFxdWUyKGN0eCwgdGhpc192YWwsIGpzX2NsYWhlX2NsYXNzX2lkKSk7CiAgSlNWYWx1ZSByZXQgPSBKU19VTkRFRklORUQ7CiAgSlNQb2ludERhdGE8ZG91YmxlPiBwb2ludCA9IGpzX3BvaW50X2dldChjdHgsIGFyZ3ZbMF0pOwoKICBzd2l0Y2gobWFnaWMpIHsKICAgIGNhc2UgMDogewogICAgICBjdjo6TWF0ICppbnB1dCwgKm91dHB1dDsKICAgICAgaWYoYXJnYyA8IDIpCiAgICAgICAgcmV0dXJuIEpTX0VYQ0VQVElPTjsKICAgICAgaW5wdXQgPSBqc19tYXRfZGF0YShjdHgsIGFyZ3ZbMF0pOwogICAgICBvdXRwdXQgPSBqc19tYXRfZGF0YShjdHgsIGFyZ3ZbMV0pOwogICAgICBpZihpbnB1dCA9PSBudWxscHRyIHx8IG91dHB1dCA9PSBudWxscHRyKQogICAgICAgIHJldHVybiBKU19FWENFUFRJT047CiAgICAgICgqcyktPmFwcGx5KCppbnB1dCwgKm91dHB1dCk7CiAgICAgIGJyZWFrOwogICAgfQogICAgY2FzZSAxOiB7CiAgICAgICgqcyktPmNvbGxlY3RHYXJiYWdlKCk7CiAgICAgIGJyZWFrOwogICAgfQogICAgY2FzZSAyOiB7CiAgICAgIHJldCA9IEpTX05ld0Zsb2F0NjQoY3R4LCAoKnMpLT5nZXRDbGlwTGltaXQoKSk7CiAgICAgIGJyZWFrOwogICAgfQogICAgY2FzZSAzOiB7CiAgICAgIHJldCA9IGpzX3NpemVfd3JhcChjdHgsICgqcyktPmdldFRpbGVzR3JpZFNpemUoKSk7CiAgICAgIGJyZWFrOwogICAgfQogICAgY2FzZSA0OiB7CiAgICAgIGRvdWJsZSBjbGlwTGltaXQ7CiAgICAgIGlmKGFyZ2MgPCAxIHx8IEpTX1RvRmxvYXQ2NChjdHgsICZjbGlwTGltaXQsIGFyZ3ZbMF0pID09IC0xKQogICAgICAgIHJldHVybiBKU19FWENFUFRJT047CiAgICAgICgqcyktPnNldENsaXBMaW1pdChjbGlwTGltaXQpOwogICAgICBicmVhazsKICAgIH0KICAgIGNhc2UgNTogewogICAgICBKU1NpemVEYXRhPGRvdWJsZT4gc2l6ZTsKICAgICAgaWYoYXJnYyA8IDEgfHwgIWpzX3NpemVfcmVhZChjdHgsIGFyZ3ZbMF0sICZzaXplKSkKICAgICAgICByZXR1cm4gSlNfRVhDRVBUSU9OOwogICAgICAoKnMpLT5zZXRUaWxlc0dyaWRTaXplKHNpemUpOwogICAgICBicmVhazsKICAgIH0KICB9CiAgcmV0dXJuIHJldDsKfQoKSlNDbGFzc0RlZiBqc19jbGFoZV9jbGFzcyA9IHsKICAgIC5jbGFzc19uYW1lID0gIkNMQUhFIiwKICAgIC5maW5hbGl6ZXIgPSBqc19jbGFoZV9maW5hbGl6ZXIsCn07Cgpjb25zdCBKU0NGdW5jdGlvbkxpc3RFbnRyeSBqc19jbGFoZV9wcm90b19mdW5jc1tdID0ge0pTX0NGVU5DX01BR0lDX0RFRigiYXBwbHkiLCAwLCBqc19jbGFoZV9tZXRob2QsIDApLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEpTX0NGVU5DX01BR0lDX0RFRigiY29sbGVjdEdhcmJhZ2UiLCAwLCBqc19jbGFoZV9tZXRob2QsIDEpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEpTX0NGVU5DX01BR0lDX0RFRigiZ2V0Q2xpcExpbWl0IiwgMCwganNfY2xhaGVfbWV0aG9kLCAyKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBKU19DRlVOQ19NQUdJQ19ERUYoImdldFRpbGVzR3JpZFNpemUiLCAwLCBqc19jbGFoZV9tZXRob2QsIDMpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEpTX0NGVU5DX01BR0lDX0RFRigic2V0Q2xpcExpbWl0IiwgMCwganNfY2xhaGVfbWV0aG9kLCA0KSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBKU19DRlVOQ19NQUdJQ19ERUYoInNldFRpbGVzR3JpZFNpemUiLCAwLCBqc19jbGFoZV9tZXRob2QsIDUpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEpTX1BST1BfU1RSSU5HX0RFRigiW1N5bWJvbC50b1N0cmluZ1RhZ10iLCAiQ0xBSEUiLCBKU19QUk9QX0NPTkZJR1VSQUJMRSl9OwoKZXh0ZXJuICJDIiBpbnQKanNfY2xhaGVfaW5pdChKU0NvbnRleHQqIGN0eCwgSlNNb2R1bGVEZWYqIG0pIHsKCiAgLyogY3JlYXRlIHRoZSBDTEFIRSBjbGFzcyAqLwogIEpTX05ld0NsYXNzSUQoJmpzX2NsYWhlX2NsYXNzX2lkKTsKICBKU19OZXdDbGFzcyhKU19HZXRSdW50aW1lKGN0eCksIGpzX2NsYWhlX2NsYXNzX2lkLCAmanNfY2xhaGVfY2xhc3MpOwoKICBjbGFoZV9wcm90byA9IEpTX05ld09iamVjdChjdHgpOwogIEpTX1NldFByb3BlcnR5RnVuY3Rpb25MaXN0KGN0eCwgY2xhaGVfcHJvdG8sIGpzX2NsYWhlX3Byb3RvX2Z1bmNzLCBjb3VudG9mKGpzX2NsYWhlX3Byb3RvX2Z1bmNzKSk7CiAgSlNfU2V0Q2xhc3NQcm90byhjdHgsIGpzX2NsYWhlX2NsYXNzX2lkLCBjbGFoZV9wcm90byk7CgogIGNsYWhlX2NsYXNzID0gSlNfTmV3Q0Z1bmN0aW9uMihjdHgsIGpzX2NsYWhlX2N0b3IsICJDTEFIRSIsIDIsIEpTX0NGVU5DX2NvbnN0cnVjdG9yLCAwKTsKICAvKiBzZXQgcHJvdG8uY29uc3RydWN0b3IgYW5kIGN0b3IucHJvdG90eXBlICovCiAgSlNfU2V0Q29uc3RydWN0b3IoY3R4LCBjbGFoZV9jbGFzcywgY2xhaGVfcHJvdG8pOwoKICBpZihtKQogICAgSlNfU2V0TW9kdWxlRXhwb3J0KGN0eCwgbSwgIkNMQUhFIiwgY2xhaGVfY2xhc3MpOwoKICByZXR1cm4gMDsKfQoKdm9pZApqc19jbGFoZV9jb25zdHJ1Y3RvcihKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZSBwYXJlbnQsIGNvbnN0IGNoYXIqIG5hbWUpIHsKICBpZihKU19Jc1VuZGVmaW5lZChjbGFoZV9jbGFzcykpCiAgICBqc19jbGFoZV9pbml0KGN0eCwgMCk7CgogIEpTX1NldFByb3BlcnR5U3RyKGN0eCwgcGFyZW50LCBuYW1lID8gbmFtZSA6ICJDTEFIRSIsIGNsYWhlX2NsYXNzKTsKfQoKI2lmZGVmIEpTX0NMQUhFX01PRFVMRQojZGVmaW5lIEpTX0lOSVRfTU9EVUxFIC8qVklTSUJMRSovIGpzX2luaXRfbW9kdWxlCiNlbHNlCiNkZWZpbmUgSlNfSU5JVF9NT0RVTEUgLypWSVNJQkxFKi8ganNfaW5pdF9tb2R1bGVfY2xhaGUKI2VuZGlmCgpleHRlcm4gIkMiIEpTTW9kdWxlRGVmKgpKU19JTklUX01PRFVMRShKU0NvbnRleHQqIGN0eCwgY29uc3QgY2hhciogbW9kdWxlX25hbWUpIHsKICBKU01vZHVsZURlZiogbTsKICBtID0gSlNfTmV3Q01vZHVsZShjdHgsIG1vZHVsZV9uYW1lLCAmanNfY2xhaGVfaW5pdCk7CiAgaWYoIW0pCiAgICByZXR1cm4gTlVMTDsKICBKU19BZGRNb2R1bGVFeHBvcnQoY3R4LCBtLCAiQ0xBSEUiKTsKICByZXR1cm4gbTsKfQoAAAAAAAAAAFMTAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA1gAAAAAAAADWAAAAAAAAAAAAAAAAAPC/"
				],
				[
					11,
					1,
					"cut",
					null,
					"AQAAAAYTAAAAAAAABhMAAAAAAABNAAAACmV4dGVybiAiQyIgVklTSUJMRSB2b2lkIGpzX2NsYWhlX2V4cG9ydChKU0NvbnRleHQqIGN0eCwgSlNNb2R1bGVEZWYqIG0pIHsKfQo",
					"AQAAAAAAAAABAAAABhMAAAAAAABTEwAAAAAAAAAAAAAAAPC/"
				],
				[
					14,
					1,
					"paste",
					null,
					"AQAAABwSAAAAAAAAaRIAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAHBIAAAAAAAAcEgAAAAAAAAAAAAAAAPC/"
				],
				[
					23,
					1,
					"paste",
					null,
					"AQAAAGcSAAAAAAAAjhIAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAZxIAAAAAAABnEgAAAAAAAAAAAAAAAPC/"
				],
				[
					36,
					1,
					"paste",
					null,
					"AgAAAEgTAAAAAAAAVxMAAAAAAAAAAAAAVxMAAAAAAABXEwAAAAAAABIAAABKU19BZGRNb2R1bGVFeHBvcnQ",
					"AQAAAAAAAAABAAAASBMAAAAAAABaEwAAAAAAAAAAAAAAAPC/"
				],
				[
					39,
					2,
					"left_delete",
					null,
					"AgAAAF8TAAAAAAAAXxMAAAAAAAAIAAAAICJDTEFIRSJeEwAAAAAAAF4TAAAAAAAAAQAAACw",
					"AQAAAAAAAAABAAAAXxMAAAAAAABnEwAAAAAAAAAAAAAAAPC/"
				],
				[
					40,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAABuEwAAI2luY2x1ZGUgImpzYmluZGluZ3MuaHBwIgojaW5jbHVkZSAianNfc2l6ZS5ocHAiCiNpbmNsdWRlICJqc19wb2ludC5ocHAiCiNpbmNsdWRlICJqc19tYXQuaHBwIgojaW5jbHVkZSAianNfYWxsb2MuaHBwIgoKSlNWYWx1ZSBjbGFoZV9wcm90byA9IEpTX1VOREVGSU5FRCwgY2xhaGVfY2xhc3MgPSBKU19VTkRFRklORUQ7CkpTQ2xhc3NJRCBqc19jbGFoZV9jbGFzc19pZDsKCmV4dGVybiAiQyIgVklTSUJMRSBpbnQganNfY2xhaGVfaW5pdChKU0NvbnRleHQqLCBKU01vZHVsZURlZiopOwoKZXh0ZXJuICJDIiBWSVNJQkxFIEpTVmFsdWUKanNfY2xhaGVfbmV3KEpTQ29udGV4dCogY3R4LCBkb3VibGUgY2xpcExpbWl0ID0gNDAuMCwgY3Y6OlNpemUgdGlsZUdyaWRTaXplID0gY3Y6OlNpemUoOCwgOCkpIHsKICBKU1ZhbHVlIHJldDsKICBKU0NMQUhFRGF0YSogczsKICByZXQgPSBKU19OZXdPYmplY3RQcm90b0NsYXNzKGN0eCwgY2xhaGVfcHJvdG8sIGpzX2NsYWhlX2NsYXNzX2lkKTsKICBzID0ganNfYWxsb2NhdGU8SlNDTEFIRURhdGE+KGN0eCk7CiAgbmV3KHMpIEpTQ0xBSEVEYXRhKCk7CiAgKnMgPSBjdjo6Y3JlYXRlQ0xBSEUoY2xpcExpbWl0LCB0aWxlR3JpZFNpemUpOwogIEpTX1NldE9wYXF1ZShyZXQsIHMpOwogIHJldHVybiByZXQ7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX2NsYWhlX2N0b3IoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCBuZXdfdGFyZ2V0LCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2KSB7CiAgZG91YmxlIGNsaXBMaW1pdCA9IDQwLjA7CiAgSlNTaXplRGF0YTxkb3VibGU+IHRpbGVHcmlkU2l6ZSA9IGN2OjpTaXplMmQoOCwgOCk7CiAgaWYoYXJnYyA+PSAxKQogICAgSlNfVG9GbG9hdDY0KGN0eCwgJmNsaXBMaW1pdCwgYXJndlswXSk7CiAgaWYoYXJnYyA+PSAyKQogICAgaWYoIWpzX3NpemVfcmVhZChjdHgsIGFyZ3ZbMV0sICZ0aWxlR3JpZFNpemUpKQogICAgICByZXR1cm4gSlNfRVhDRVBUSU9OOwogIHJldHVybiBqc19jbGFoZV9uZXcoY3R4LCBjbGlwTGltaXQsIHRpbGVHcmlkU2l6ZSk7Cn0KCkpTQ0xBSEVEYXRhKgpqc19jbGFoZV9kYXRhKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdmFsKSB7CiAgcmV0dXJuIHN0YXRpY19jYXN0PEpTQ0xBSEVEYXRhKj4oSlNfR2V0T3BhcXVlMihjdHgsIHZhbCwganNfY2xhaGVfY2xhc3NfaWQpKTsKfQoKdm9pZApqc19jbGFoZV9maW5hbGl6ZXIoSlNSdW50aW1lKiBydCwgSlNWYWx1ZSB2YWwpIHsKICBKU0NMQUhFRGF0YSogcyA9IHN0YXRpY19jYXN0PEpTQ0xBSEVEYXRhKj4oSlNfR2V0T3BhcXVlKHZhbCwganNfY2xhaGVfY2xhc3NfaWQpKTsKICAvKiBOb3RlOiAncycgY2FuIGJlIE5VTEwgaW4gY2FzZSBKU19TZXRPcGFxdWUoKSB3YXMgbm90IGNhbGxlZCAqLwoKICBzLT5+SlNDTEFIRURhdGEoKTsKICBqc19kZWFsbG9jYXRlKHJ0LCBzKTsKfQoKc3RhdGljIEpTVmFsdWUKanNfY2xhaGVfbWV0aG9kKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QqIGFyZ3YsIGludCBtYWdpYykgewogIEpTQ0xBSEVEYXRhKiBzID0gc3RhdGljX2Nhc3Q8SlNDTEFIRURhdGEqPihKU19HZXRPcGFxdWUyKGN0eCwgdGhpc192YWwsIGpzX2NsYWhlX2NsYXNzX2lkKSk7CiAgSlNWYWx1ZSByZXQgPSBKU19VTkRFRklORUQ7CiAgSlNQb2ludERhdGE8ZG91YmxlPiBwb2ludCA9IGpzX3BvaW50X2dldChjdHgsIGFyZ3ZbMF0pOwoKICBzd2l0Y2gobWFnaWMpIHsKICAgIGNhc2UgMDogewogICAgICBjdjo6TWF0ICppbnB1dCwgKm91dHB1dDsKICAgICAgaWYoYXJnYyA8IDIpCiAgICAgICAgcmV0dXJuIEpTX0VYQ0VQVElPTjsKICAgICAgaW5wdXQgPSBqc19tYXRfZGF0YShjdHgsIGFyZ3ZbMF0pOwogICAgICBvdXRwdXQgPSBqc19tYXRfZGF0YShjdHgsIGFyZ3ZbMV0pOwogICAgICBpZihpbnB1dCA9PSBudWxscHRyIHx8IG91dHB1dCA9PSBudWxscHRyKQogICAgICAgIHJldHVybiBKU19FWENFUFRJT047CiAgICAgICgqcyktPmFwcGx5KCppbnB1dCwgKm91dHB1dCk7CiAgICAgIGJyZWFrOwogICAgfQogICAgY2FzZSAxOiB7CiAgICAgICgqcyktPmNvbGxlY3RHYXJiYWdlKCk7CiAgICAgIGJyZWFrOwogICAgfQogICAgY2FzZSAyOiB7CiAgICAgIHJldCA9IEpTX05ld0Zsb2F0NjQoY3R4LCAoKnMpLT5nZXRDbGlwTGltaXQoKSk7CiAgICAgIGJyZWFrOwogICAgfQogICAgY2FzZSAzOiB7CiAgICAgIHJldCA9IGpzX3NpemVfd3JhcChjdHgsICgqcyktPmdldFRpbGVzR3JpZFNpemUoKSk7CiAgICAgIGJyZWFrOwogICAgfQogICAgY2FzZSA0OiB7CiAgICAgIGRvdWJsZSBjbGlwTGltaXQ7CiAgICAgIGlmKGFyZ2MgPCAxIHx8IEpTX1RvRmxvYXQ2NChjdHgsICZjbGlwTGltaXQsIGFyZ3ZbMF0pID09IC0xKQogICAgICAgIHJldHVybiBKU19FWENFUFRJT047CiAgICAgICgqcyktPnNldENsaXBMaW1pdChjbGlwTGltaXQpOwogICAgICBicmVhazsKICAgIH0KICAgIGNhc2UgNTogewogICAgICBKU1NpemVEYXRhPGRvdWJsZT4gc2l6ZTsKICAgICAgaWYoYXJnYyA8IDEgfHwgIWpzX3NpemVfcmVhZChjdHgsIGFyZ3ZbMF0sICZzaXplKSkKICAgICAgICByZXR1cm4gSlNfRVhDRVBUSU9OOwogICAgICAoKnMpLT5zZXRUaWxlc0dyaWRTaXplKHNpemUpOwogICAgICBicmVhazsKICAgIH0KICB9CiAgcmV0dXJuIHJldDsKfQoKSlNDbGFzc0RlZiBqc19jbGFoZV9jbGFzcyA9IHsKICAgIC5jbGFzc19uYW1lID0gIkNMQUhFIiwKICAgIC5maW5hbGl6ZXIgPSBqc19jbGFoZV9maW5hbGl6ZXIsCn07Cgpjb25zdCBKU0NGdW5jdGlvbkxpc3RFbnRyeSBqc19jbGFoZV9wcm90b19mdW5jc1tdID0ge0pTX0NGVU5DX01BR0lDX0RFRigiYXBwbHkiLCAwLCBqc19jbGFoZV9tZXRob2QsIDApLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEpTX0NGVU5DX01BR0lDX0RFRigiY29sbGVjdEdhcmJhZ2UiLCAwLCBqc19jbGFoZV9tZXRob2QsIDEpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEpTX0NGVU5DX01BR0lDX0RFRigiZ2V0Q2xpcExpbWl0IiwgMCwganNfY2xhaGVfbWV0aG9kLCAyKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBKU19DRlVOQ19NQUdJQ19ERUYoImdldFRpbGVzR3JpZFNpemUiLCAwLCBqc19jbGFoZV9tZXRob2QsIDMpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEpTX0NGVU5DX01BR0lDX0RFRigic2V0Q2xpcExpbWl0IiwgMCwganNfY2xhaGVfbWV0aG9kLCA0KSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBKU19DRlVOQ19NQUdJQ19ERUYoInNldFRpbGVzR3JpZFNpemUiLCAwLCBqc19jbGFoZV9tZXRob2QsIDUpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEpTX1BST1BfU1RSSU5HX0RFRigiW1N5bWJvbC50b1N0cmluZ1RhZ10iLCAiQ0xBSEUiLCBKU19QUk9QX0NPTkZJR1VSQUJMRSl9OwoKZXh0ZXJuICJDIiBpbnQKanNfY2xhaGVfaW5pdChKU0NvbnRleHQqIGN0eCwgSlNNb2R1bGVEZWYqIG0pIHsKCiAgLyogY3JlYXRlIHRoZSBDTEFIRSBjbGFzcyAqLwogIEpTX05ld0NsYXNzSUQoJmpzX2NsYWhlX2NsYXNzX2lkKTsKICBKU19OZXdDbGFzcyhKU19HZXRSdW50aW1lKGN0eCksIGpzX2NsYWhlX2NsYXNzX2lkLCAmanNfY2xhaGVfY2xhc3MpOwoKICBjbGFoZV9wcm90byA9IEpTX05ld09iamVjdChjdHgpOwogIEpTX1NldFByb3BlcnR5RnVuY3Rpb25MaXN0KGN0eCwgY2xhaGVfcHJvdG8sIGpzX2NsYWhlX3Byb3RvX2Z1bmNzLCBjb3VudG9mKGpzX2NsYWhlX3Byb3RvX2Z1bmNzKSk7CiAgSlNfU2V0Q2xhc3NQcm90byhjdHgsIGpzX2NsYWhlX2NsYXNzX2lkLCBjbGFoZV9wcm90byk7CgogIGNsYWhlX2NsYXNzID0gSlNfTmV3Q0Z1bmN0aW9uMihjdHgsIGpzX2NsYWhlX2N0b3IsICJDTEFIRSIsIDIsIEpTX0NGVU5DX2NvbnN0cnVjdG9yLCAwKTsKICAvKiBzZXQgcHJvdG8uY29uc3RydWN0b3IgYW5kIGN0b3IucHJvdG90eXBlICovCiAgSlNfU2V0Q29uc3RydWN0b3IoY3R4LCBjbGFoZV9jbGFzcywgY2xhaGVfcHJvdG8pOwoKICBpZihtKQogICAgSlNfU2V0TW9kdWxlRXhwb3J0KGN0eCwgbSwgIkNMQUhFIiwgY2xhaGVfY2xhc3MpOwoKICByZXR1cm4gMDsKfQoKdm9pZApqc19jbGFoZV9jb25zdHJ1Y3RvcihKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZSBwYXJlbnQsIGNvbnN0IGNoYXIqIG5hbWUpIHsKICBpZihKU19Jc1VuZGVmaW5lZChjbGFoZV9jbGFzcykpCiAgICBqc19jbGFoZV9pbml0KGN0eCwgMCk7CgogIEpTX1NldFByb3BlcnR5U3RyKGN0eCwgcGFyZW50LCBuYW1lID8gbmFtZSA6ICJDTEFIRSIsIGNsYWhlX2NsYXNzKTsKfQoKI2lmZGVmIEpTX0NMQUhFX01PRFVMRQojZGVmaW5lIEpTX0lOSVRfTU9EVUxFIC8qVklTSUJMRSovIGpzX2luaXRfbW9kdWxlCiNlbHNlCiNkZWZpbmUgSlNfSU5JVF9NT0RVTEUgLypWSVNJQkxFKi8ganNfaW5pdF9tb2R1bGVfY2xhaGUKI2VuZGlmCgpleHRlcm4gIkMiIFZJU0lCTEUgdm9pZCBqc19jbGFoZV9leHBvcnQoSlNDb250ZXh0KiBjdHgsIEpTTW9kdWxlRGVmKiBtKSB7CiAgSlNfQWRkTW9kdWxlRXhwb3J0KGN0eCwgbSwgIkNMQUhFIik7Cn0KCmV4dGVybiAiQyIgSlNNb2R1bGVEZWYqCkpTX0lOSVRfTU9EVUxFKEpTQ29udGV4dCogY3R4LCBjb25zdCBjaGFyKiBtb2R1bGVfbmFtZSkgewogIEpTTW9kdWxlRGVmKiBtOwogIG0gPSBKU19OZXdDTW9kdWxlKGN0eCwgbW9kdWxlX25hbWUsICZqc19jbGFoZV9pbml0KTsKICBpZighbSkKICAgIHJldHVybiBOVUxMOwogIGpzX2NsYWhlX2V4cG9ydChjdHgsIG0pOwogIHJldHVybiBtOwp9AAAAAAAAAABuEwAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAXhMAAAAAAABeEwAAAAAAAAAAAAAAAPC/"
				],
				[
					41,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAABuEwAAI2luY2x1ZGUgImpzYmluZGluZ3MuaHBwIgojaW5jbHVkZSAianNfc2l6ZS5ocHAiCiNpbmNsdWRlICJqc19wb2ludC5ocHAiCiNpbmNsdWRlICJqc19tYXQuaHBwIgojaW5jbHVkZSAianNfYWxsb2MuaHBwIgoKSlNWYWx1ZSBjbGFoZV9wcm90byA9IEpTX1VOREVGSU5FRCwgY2xhaGVfY2xhc3MgPSBKU19VTkRFRklORUQ7CkpTQ2xhc3NJRCBqc19jbGFoZV9jbGFzc19pZDsKCmV4dGVybiAiQyIgVklTSUJMRSBpbnQganNfY2xhaGVfaW5pdChKU0NvbnRleHQqLCBKU01vZHVsZURlZiopOwoKZXh0ZXJuICJDIiBWSVNJQkxFIEpTVmFsdWUKanNfY2xhaGVfbmV3KEpTQ29udGV4dCogY3R4LCBkb3VibGUgY2xpcExpbWl0ID0gNDAuMCwgY3Y6OlNpemUgdGlsZUdyaWRTaXplID0gY3Y6OlNpemUoOCwgOCkpIHsKICBKU1ZhbHVlIHJldDsKICBKU0NMQUhFRGF0YSogczsKICByZXQgPSBKU19OZXdPYmplY3RQcm90b0NsYXNzKGN0eCwgY2xhaGVfcHJvdG8sIGpzX2NsYWhlX2NsYXNzX2lkKTsKICBzID0ganNfYWxsb2NhdGU8SlNDTEFIRURhdGE+KGN0eCk7CiAgbmV3KHMpIEpTQ0xBSEVEYXRhKCk7CiAgKnMgPSBjdjo6Y3JlYXRlQ0xBSEUoY2xpcExpbWl0LCB0aWxlR3JpZFNpemUpOwogIEpTX1NldE9wYXF1ZShyZXQsIHMpOwogIHJldHVybiByZXQ7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX2NsYWhlX2N0b3IoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCBuZXdfdGFyZ2V0LCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2KSB7CiAgZG91YmxlIGNsaXBMaW1pdCA9IDQwLjA7CiAgSlNTaXplRGF0YTxkb3VibGU+IHRpbGVHcmlkU2l6ZSA9IGN2OjpTaXplMmQoOCwgOCk7CiAgaWYoYXJnYyA+PSAxKQogICAgSlNfVG9GbG9hdDY0KGN0eCwgJmNsaXBMaW1pdCwgYXJndlswXSk7CiAgaWYoYXJnYyA+PSAyKQogICAgaWYoIWpzX3NpemVfcmVhZChjdHgsIGFyZ3ZbMV0sICZ0aWxlR3JpZFNpemUpKQogICAgICByZXR1cm4gSlNfRVhDRVBUSU9OOwogIHJldHVybiBqc19jbGFoZV9uZXcoY3R4LCBjbGlwTGltaXQsIHRpbGVHcmlkU2l6ZSk7Cn0KCkpTQ0xBSEVEYXRhKgpqc19jbGFoZV9kYXRhKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdmFsKSB7CiAgcmV0dXJuIHN0YXRpY19jYXN0PEpTQ0xBSEVEYXRhKj4oSlNfR2V0T3BhcXVlMihjdHgsIHZhbCwganNfY2xhaGVfY2xhc3NfaWQpKTsKfQoKdm9pZApqc19jbGFoZV9maW5hbGl6ZXIoSlNSdW50aW1lKiBydCwgSlNWYWx1ZSB2YWwpIHsKICBKU0NMQUhFRGF0YSogcyA9IHN0YXRpY19jYXN0PEpTQ0xBSEVEYXRhKj4oSlNfR2V0T3BhcXVlKHZhbCwganNfY2xhaGVfY2xhc3NfaWQpKTsKICAvKiBOb3RlOiAncycgY2FuIGJlIE5VTEwgaW4gY2FzZSBKU19TZXRPcGFxdWUoKSB3YXMgbm90IGNhbGxlZCAqLwoKICBzLT5+SlNDTEFIRURhdGEoKTsKICBqc19kZWFsbG9jYXRlKHJ0LCBzKTsKfQoKc3RhdGljIEpTVmFsdWUKanNfY2xhaGVfbWV0aG9kKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QqIGFyZ3YsIGludCBtYWdpYykgewogIEpTQ0xBSEVEYXRhKiBzID0gc3RhdGljX2Nhc3Q8SlNDTEFIRURhdGEqPihKU19HZXRPcGFxdWUyKGN0eCwgdGhpc192YWwsIGpzX2NsYWhlX2NsYXNzX2lkKSk7CiAgSlNWYWx1ZSByZXQgPSBKU19VTkRFRklORUQ7CiAgSlNQb2ludERhdGE8ZG91YmxlPiBwb2ludCA9IGpzX3BvaW50X2dldChjdHgsIGFyZ3ZbMF0pOwoKICBzd2l0Y2gobWFnaWMpIHsKICAgIGNhc2UgMDogewogICAgICBjdjo6TWF0ICppbnB1dCwgKm91dHB1dDsKICAgICAgaWYoYXJnYyA8IDIpCiAgICAgICAgcmV0dXJuIEpTX0VYQ0VQVElPTjsKICAgICAgaW5wdXQgPSBqc19tYXRfZGF0YShjdHgsIGFyZ3ZbMF0pOwogICAgICBvdXRwdXQgPSBqc19tYXRfZGF0YShjdHgsIGFyZ3ZbMV0pOwogICAgICBpZihpbnB1dCA9PSBudWxscHRyIHx8IG91dHB1dCA9PSBudWxscHRyKQogICAgICAgIHJldHVybiBKU19FWENFUFRJT047CiAgICAgICgqcyktPmFwcGx5KCppbnB1dCwgKm91dHB1dCk7CiAgICAgIGJyZWFrOwogICAgfQogICAgY2FzZSAxOiB7CiAgICAgICgqcyktPmNvbGxlY3RHYXJiYWdlKCk7CiAgICAgIGJyZWFrOwogICAgfQogICAgY2FzZSAyOiB7CiAgICAgIHJldCA9IEpTX05ld0Zsb2F0NjQoY3R4LCAoKnMpLT5nZXRDbGlwTGltaXQoKSk7CiAgICAgIGJyZWFrOwogICAgfQogICAgY2FzZSAzOiB7CiAgICAgIHJldCA9IGpzX3NpemVfd3JhcChjdHgsICgqcyktPmdldFRpbGVzR3JpZFNpemUoKSk7CiAgICAgIGJyZWFrOwogICAgfQogICAgY2FzZSA0OiB7CiAgICAgIGRvdWJsZSBjbGlwTGltaXQ7CiAgICAgIGlmKGFyZ2MgPCAxIHx8IEpTX1RvRmxvYXQ2NChjdHgsICZjbGlwTGltaXQsIGFyZ3ZbMF0pID09IC0xKQogICAgICAgIHJldHVybiBKU19FWENFUFRJT047CiAgICAgICgqcyktPnNldENsaXBMaW1pdChjbGlwTGltaXQpOwogICAgICBicmVhazsKICAgIH0KICAgIGNhc2UgNTogewogICAgICBKU1NpemVEYXRhPGRvdWJsZT4gc2l6ZTsKICAgICAgaWYoYXJnYyA8IDEgfHwgIWpzX3NpemVfcmVhZChjdHgsIGFyZ3ZbMF0sICZzaXplKSkKICAgICAgICByZXR1cm4gSlNfRVhDRVBUSU9OOwogICAgICAoKnMpLT5zZXRUaWxlc0dyaWRTaXplKHNpemUpOwogICAgICBicmVhazsKICAgIH0KICB9CiAgcmV0dXJuIHJldDsKfQoKSlNDbGFzc0RlZiBqc19jbGFoZV9jbGFzcyA9IHsKICAgIC5jbGFzc19uYW1lID0gIkNMQUhFIiwKICAgIC5maW5hbGl6ZXIgPSBqc19jbGFoZV9maW5hbGl6ZXIsCn07Cgpjb25zdCBKU0NGdW5jdGlvbkxpc3RFbnRyeSBqc19jbGFoZV9wcm90b19mdW5jc1tdID0ge0pTX0NGVU5DX01BR0lDX0RFRigiYXBwbHkiLCAwLCBqc19jbGFoZV9tZXRob2QsIDApLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEpTX0NGVU5DX01BR0lDX0RFRigiY29sbGVjdEdhcmJhZ2UiLCAwLCBqc19jbGFoZV9tZXRob2QsIDEpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEpTX0NGVU5DX01BR0lDX0RFRigiZ2V0Q2xpcExpbWl0IiwgMCwganNfY2xhaGVfbWV0aG9kLCAyKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBKU19DRlVOQ19NQUdJQ19ERUYoImdldFRpbGVzR3JpZFNpemUiLCAwLCBqc19jbGFoZV9tZXRob2QsIDMpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEpTX0NGVU5DX01BR0lDX0RFRigic2V0Q2xpcExpbWl0IiwgMCwganNfY2xhaGVfbWV0aG9kLCA0KSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBKU19DRlVOQ19NQUdJQ19ERUYoInNldFRpbGVzR3JpZFNpemUiLCAwLCBqc19jbGFoZV9tZXRob2QsIDUpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEpTX1BST1BfU1RSSU5HX0RFRigiW1N5bWJvbC50b1N0cmluZ1RhZ10iLCAiQ0xBSEUiLCBKU19QUk9QX0NPTkZJR1VSQUJMRSl9OwoKZXh0ZXJuICJDIiBpbnQKanNfY2xhaGVfaW5pdChKU0NvbnRleHQqIGN0eCwgSlNNb2R1bGVEZWYqIG0pIHsKCiAgLyogY3JlYXRlIHRoZSBDTEFIRSBjbGFzcyAqLwogIEpTX05ld0NsYXNzSUQoJmpzX2NsYWhlX2NsYXNzX2lkKTsKICBKU19OZXdDbGFzcyhKU19HZXRSdW50aW1lKGN0eCksIGpzX2NsYWhlX2NsYXNzX2lkLCAmanNfY2xhaGVfY2xhc3MpOwoKICBjbGFoZV9wcm90byA9IEpTX05ld09iamVjdChjdHgpOwogIEpTX1NldFByb3BlcnR5RnVuY3Rpb25MaXN0KGN0eCwgY2xhaGVfcHJvdG8sIGpzX2NsYWhlX3Byb3RvX2Z1bmNzLCBjb3VudG9mKGpzX2NsYWhlX3Byb3RvX2Z1bmNzKSk7CiAgSlNfU2V0Q2xhc3NQcm90byhjdHgsIGpzX2NsYWhlX2NsYXNzX2lkLCBjbGFoZV9wcm90byk7CgogIGNsYWhlX2NsYXNzID0gSlNfTmV3Q0Z1bmN0aW9uMihjdHgsIGpzX2NsYWhlX2N0b3IsICJDTEFIRSIsIDIsIEpTX0NGVU5DX2NvbnN0cnVjdG9yLCAwKTsKICAvKiBzZXQgcHJvdG8uY29uc3RydWN0b3IgYW5kIGN0b3IucHJvdG90eXBlICovCiAgSlNfU2V0Q29uc3RydWN0b3IoY3R4LCBjbGFoZV9jbGFzcywgY2xhaGVfcHJvdG8pOwoKICBpZihtKQogICAgSlNfU2V0TW9kdWxlRXhwb3J0KGN0eCwgbSwgIkNMQUhFIiwgY2xhaGVfY2xhc3MpOwoKICByZXR1cm4gMDsKfQoKdm9pZApqc19jbGFoZV9jb25zdHJ1Y3RvcihKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZSBwYXJlbnQsIGNvbnN0IGNoYXIqIG5hbWUpIHsKICBpZihKU19Jc1VuZGVmaW5lZChjbGFoZV9jbGFzcykpCiAgICBqc19jbGFoZV9pbml0KGN0eCwgMCk7CgogIEpTX1NldFByb3BlcnR5U3RyKGN0eCwgcGFyZW50LCBuYW1lID8gbmFtZSA6ICJDTEFIRSIsIGNsYWhlX2NsYXNzKTsKfQoKI2lmZGVmIEpTX0NMQUhFX01PRFVMRQojZGVmaW5lIEpTX0lOSVRfTU9EVUxFIC8qVklTSUJMRSovIGpzX2luaXRfbW9kdWxlCiNlbHNlCiNkZWZpbmUgSlNfSU5JVF9NT0RVTEUgLypWSVNJQkxFKi8ganNfaW5pdF9tb2R1bGVfY2xhaGUKI2VuZGlmCgpleHRlcm4gIkMiIFZJU0lCTEUgdm9pZApqc19jbGFoZV9leHBvcnQoSlNDb250ZXh0KiBjdHgsIEpTTW9kdWxlRGVmKiBtKSB7CiAgSlNfQWRkTW9kdWxlRXhwb3J0KGN0eCwgbSwgIkNMQUhFIik7Cn0KCmV4dGVybiAiQyIgSlNNb2R1bGVEZWYqCkpTX0lOSVRfTU9EVUxFKEpTQ29udGV4dCogY3R4LCBjb25zdCBjaGFyKiBtb2R1bGVfbmFtZSkgewogIEpTTW9kdWxlRGVmKiBtOwogIG0gPSBKU19OZXdDTW9kdWxlKGN0eCwgbW9kdWxlX25hbWUsICZqc19jbGFoZV9pbml0KTsKICBpZighbSkKICAgIHJldHVybiBOVUxMOwogIGpzX2NsYWhlX2V4cG9ydChjdHgsIG0pOwogIHJldHVybiBtOwp9AAAAAAAAAABuEwAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAXhMAAAAAAABeEwAAAAAAAAAAAAAAAPC/"
				],
				[
					42,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAABuEwAAI2luY2x1ZGUgImpzYmluZGluZ3MuaHBwIgojaW5jbHVkZSAianNfc2l6ZS5ocHAiCiNpbmNsdWRlICJqc19wb2ludC5ocHAiCiNpbmNsdWRlICJqc19tYXQuaHBwIgojaW5jbHVkZSAianNfYWxsb2MuaHBwIgoKSlNWYWx1ZSBjbGFoZV9wcm90byA9IEpTX1VOREVGSU5FRCwgY2xhaGVfY2xhc3MgPSBKU19VTkRFRklORUQ7CkpTQ2xhc3NJRCBqc19jbGFoZV9jbGFzc19pZDsKCmV4dGVybiAiQyIgVklTSUJMRSBpbnQganNfY2xhaGVfaW5pdChKU0NvbnRleHQqLCBKU01vZHVsZURlZiopOwoKZXh0ZXJuICJDIiBWSVNJQkxFIEpTVmFsdWUKanNfY2xhaGVfbmV3KEpTQ29udGV4dCogY3R4LCBkb3VibGUgY2xpcExpbWl0ID0gNDAuMCwgY3Y6OlNpemUgdGlsZUdyaWRTaXplID0gY3Y6OlNpemUoOCwgOCkpIHsKICBKU1ZhbHVlIHJldDsKICBKU0NMQUhFRGF0YSogczsKICByZXQgPSBKU19OZXdPYmplY3RQcm90b0NsYXNzKGN0eCwgY2xhaGVfcHJvdG8sIGpzX2NsYWhlX2NsYXNzX2lkKTsKICBzID0ganNfYWxsb2NhdGU8SlNDTEFIRURhdGE+KGN0eCk7CiAgbmV3KHMpIEpTQ0xBSEVEYXRhKCk7CiAgKnMgPSBjdjo6Y3JlYXRlQ0xBSEUoY2xpcExpbWl0LCB0aWxlR3JpZFNpemUpOwogIEpTX1NldE9wYXF1ZShyZXQsIHMpOwogIHJldHVybiByZXQ7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX2NsYWhlX2N0b3IoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCBuZXdfdGFyZ2V0LCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2KSB7CiAgZG91YmxlIGNsaXBMaW1pdCA9IDQwLjA7CiAgSlNTaXplRGF0YTxkb3VibGU+IHRpbGVHcmlkU2l6ZSA9IGN2OjpTaXplMmQoOCwgOCk7CiAgaWYoYXJnYyA+PSAxKQogICAgSlNfVG9GbG9hdDY0KGN0eCwgJmNsaXBMaW1pdCwgYXJndlswXSk7CiAgaWYoYXJnYyA+PSAyKQogICAgaWYoIWpzX3NpemVfcmVhZChjdHgsIGFyZ3ZbMV0sICZ0aWxlR3JpZFNpemUpKQogICAgICByZXR1cm4gSlNfRVhDRVBUSU9OOwogIHJldHVybiBqc19jbGFoZV9uZXcoY3R4LCBjbGlwTGltaXQsIHRpbGVHcmlkU2l6ZSk7Cn0KCkpTQ0xBSEVEYXRhKgpqc19jbGFoZV9kYXRhKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdmFsKSB7CiAgcmV0dXJuIHN0YXRpY19jYXN0PEpTQ0xBSEVEYXRhKj4oSlNfR2V0T3BhcXVlMihjdHgsIHZhbCwganNfY2xhaGVfY2xhc3NfaWQpKTsKfQoKdm9pZApqc19jbGFoZV9maW5hbGl6ZXIoSlNSdW50aW1lKiBydCwgSlNWYWx1ZSB2YWwpIHsKICBKU0NMQUhFRGF0YSogcyA9IHN0YXRpY19jYXN0PEpTQ0xBSEVEYXRhKj4oSlNfR2V0T3BhcXVlKHZhbCwganNfY2xhaGVfY2xhc3NfaWQpKTsKICAvKiBOb3RlOiAncycgY2FuIGJlIE5VTEwgaW4gY2FzZSBKU19TZXRPcGFxdWUoKSB3YXMgbm90IGNhbGxlZCAqLwoKICBzLT5+SlNDTEFIRURhdGEoKTsKICBqc19kZWFsbG9jYXRlKHJ0LCBzKTsKfQoKc3RhdGljIEpTVmFsdWUKanNfY2xhaGVfbWV0aG9kKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QqIGFyZ3YsIGludCBtYWdpYykgewogIEpTQ0xBSEVEYXRhKiBzID0gc3RhdGljX2Nhc3Q8SlNDTEFIRURhdGEqPihKU19HZXRPcGFxdWUyKGN0eCwgdGhpc192YWwsIGpzX2NsYWhlX2NsYXNzX2lkKSk7CiAgSlNWYWx1ZSByZXQgPSBKU19VTkRFRklORUQ7CiAgSlNQb2ludERhdGE8ZG91YmxlPiBwb2ludCA9IGpzX3BvaW50X2dldChjdHgsIGFyZ3ZbMF0pOwoKICBzd2l0Y2gobWFnaWMpIHsKICAgIGNhc2UgMDogewogICAgICBjdjo6TWF0ICppbnB1dCwgKm91dHB1dDsKICAgICAgaWYoYXJnYyA8IDIpCiAgICAgICAgcmV0dXJuIEpTX0VYQ0VQVElPTjsKICAgICAgaW5wdXQgPSBqc19tYXRfZGF0YShjdHgsIGFyZ3ZbMF0pOwogICAgICBvdXRwdXQgPSBqc19tYXRfZGF0YShjdHgsIGFyZ3ZbMV0pOwogICAgICBpZihpbnB1dCA9PSBudWxscHRyIHx8IG91dHB1dCA9PSBudWxscHRyKQogICAgICAgIHJldHVybiBKU19FWENFUFRJT047CiAgICAgICgqcyktPmFwcGx5KCppbnB1dCwgKm91dHB1dCk7CiAgICAgIGJyZWFrOwogICAgfQogICAgY2FzZSAxOiB7CiAgICAgICgqcyktPmNvbGxlY3RHYXJiYWdlKCk7CiAgICAgIGJyZWFrOwogICAgfQogICAgY2FzZSAyOiB7CiAgICAgIHJldCA9IEpTX05ld0Zsb2F0NjQoY3R4LCAoKnMpLT5nZXRDbGlwTGltaXQoKSk7CiAgICAgIGJyZWFrOwogICAgfQogICAgY2FzZSAzOiB7CiAgICAgIHJldCA9IGpzX3NpemVfd3JhcChjdHgsICgqcyktPmdldFRpbGVzR3JpZFNpemUoKSk7CiAgICAgIGJyZWFrOwogICAgfQogICAgY2FzZSA0OiB7CiAgICAgIGRvdWJsZSBjbGlwTGltaXQ7CiAgICAgIGlmKGFyZ2MgPCAxIHx8IEpTX1RvRmxvYXQ2NChjdHgsICZjbGlwTGltaXQsIGFyZ3ZbMF0pID09IC0xKQogICAgICAgIHJldHVybiBKU19FWENFUFRJT047CiAgICAgICgqcyktPnNldENsaXBMaW1pdChjbGlwTGltaXQpOwogICAgICBicmVhazsKICAgIH0KICAgIGNhc2UgNTogewogICAgICBKU1NpemVEYXRhPGRvdWJsZT4gc2l6ZTsKICAgICAgaWYoYXJnYyA8IDEgfHwgIWpzX3NpemVfcmVhZChjdHgsIGFyZ3ZbMF0sICZzaXplKSkKICAgICAgICByZXR1cm4gSlNfRVhDRVBUSU9OOwogICAgICAoKnMpLT5zZXRUaWxlc0dyaWRTaXplKHNpemUpOwogICAgICBicmVhazsKICAgIH0KICB9CiAgcmV0dXJuIHJldDsKfQoKSlNDbGFzc0RlZiBqc19jbGFoZV9jbGFzcyA9IHsKICAgIC5jbGFzc19uYW1lID0gIkNMQUhFIiwKICAgIC5maW5hbGl6ZXIgPSBqc19jbGFoZV9maW5hbGl6ZXIsCn07Cgpjb25zdCBKU0NGdW5jdGlvbkxpc3RFbnRyeSBqc19jbGFoZV9wcm90b19mdW5jc1tdID0ge0pTX0NGVU5DX01BR0lDX0RFRigiYXBwbHkiLCAwLCBqc19jbGFoZV9tZXRob2QsIDApLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEpTX0NGVU5DX01BR0lDX0RFRigiY29sbGVjdEdhcmJhZ2UiLCAwLCBqc19jbGFoZV9tZXRob2QsIDEpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEpTX0NGVU5DX01BR0lDX0RFRigiZ2V0Q2xpcExpbWl0IiwgMCwganNfY2xhaGVfbWV0aG9kLCAyKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBKU19DRlVOQ19NQUdJQ19ERUYoImdldFRpbGVzR3JpZFNpemUiLCAwLCBqc19jbGFoZV9tZXRob2QsIDMpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEpTX0NGVU5DX01BR0lDX0RFRigic2V0Q2xpcExpbWl0IiwgMCwganNfY2xhaGVfbWV0aG9kLCA0KSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBKU19DRlVOQ19NQUdJQ19ERUYoInNldFRpbGVzR3JpZFNpemUiLCAwLCBqc19jbGFoZV9tZXRob2QsIDUpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEpTX1BST1BfU1RSSU5HX0RFRigiW1N5bWJvbC50b1N0cmluZ1RhZ10iLCAiQ0xBSEUiLCBKU19QUk9QX0NPTkZJR1VSQUJMRSl9OwoKZXh0ZXJuICJDIiBpbnQKanNfY2xhaGVfaW5pdChKU0NvbnRleHQqIGN0eCwgSlNNb2R1bGVEZWYqIG0pIHsKCiAgLyogY3JlYXRlIHRoZSBDTEFIRSBjbGFzcyAqLwogIEpTX05ld0NsYXNzSUQoJmpzX2NsYWhlX2NsYXNzX2lkKTsKICBKU19OZXdDbGFzcyhKU19HZXRSdW50aW1lKGN0eCksIGpzX2NsYWhlX2NsYXNzX2lkLCAmanNfY2xhaGVfY2xhc3MpOwoKICBjbGFoZV9wcm90byA9IEpTX05ld09iamVjdChjdHgpOwogIEpTX1NldFByb3BlcnR5RnVuY3Rpb25MaXN0KGN0eCwgY2xhaGVfcHJvdG8sIGpzX2NsYWhlX3Byb3RvX2Z1bmNzLCBjb3VudG9mKGpzX2NsYWhlX3Byb3RvX2Z1bmNzKSk7CiAgSlNfU2V0Q2xhc3NQcm90byhjdHgsIGpzX2NsYWhlX2NsYXNzX2lkLCBjbGFoZV9wcm90byk7CgogIGNsYWhlX2NsYXNzID0gSlNfTmV3Q0Z1bmN0aW9uMihjdHgsIGpzX2NsYWhlX2N0b3IsICJDTEFIRSIsIDIsIEpTX0NGVU5DX2NvbnN0cnVjdG9yLCAwKTsKICAvKiBzZXQgcHJvdG8uY29uc3RydWN0b3IgYW5kIGN0b3IucHJvdG90eXBlICovCiAgSlNfU2V0Q29uc3RydWN0b3IoY3R4LCBjbGFoZV9jbGFzcywgY2xhaGVfcHJvdG8pOwoKICBpZihtKQogICAgSlNfU2V0TW9kdWxlRXhwb3J0KGN0eCwgbSwgIkNMQUhFIiwgY2xhaGVfY2xhc3MpOwoKICByZXR1cm4gMDsKfQoKdm9pZApqc19jbGFoZV9jb25zdHJ1Y3RvcihKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZSBwYXJlbnQsIGNvbnN0IGNoYXIqIG5hbWUpIHsKICBpZihKU19Jc1VuZGVmaW5lZChjbGFoZV9jbGFzcykpCiAgICBqc19jbGFoZV9pbml0KGN0eCwgMCk7CgogIEpTX1NldFByb3BlcnR5U3RyKGN0eCwgcGFyZW50LCBuYW1lID8gbmFtZSA6ICJDTEFIRSIsIGNsYWhlX2NsYXNzKTsKfQoKI2lmZGVmIEpTX0NMQUhFX01PRFVMRQojZGVmaW5lIEpTX0lOSVRfTU9EVUxFIC8qVklTSUJMRSovIGpzX2luaXRfbW9kdWxlCiNlbHNlCiNkZWZpbmUgSlNfSU5JVF9NT0RVTEUgLypWSVNJQkxFKi8ganNfaW5pdF9tb2R1bGVfY2xhaGUKI2VuZGlmCgpleHRlcm4gIkMiIFZJU0lCTEUgdm9pZApqc19jbGFoZV9leHBvcnQoSlNDb250ZXh0KiBjdHgsIEpTTW9kdWxlRGVmKiBtKSB7CiAgSlNfQWRkTW9kdWxlRXhwb3J0KGN0eCwgbSwgIkNMQUhFIik7Cn0KCmV4dGVybiAiQyIgSlNNb2R1bGVEZWYqCkpTX0lOSVRfTU9EVUxFKEpTQ29udGV4dCogY3R4LCBjb25zdCBjaGFyKiBtb2R1bGVfbmFtZSkgewogIEpTTW9kdWxlRGVmKiBtOwogIG0gPSBKU19OZXdDTW9kdWxlKGN0eCwgbW9kdWxlX25hbWUsICZqc19jbGFoZV9pbml0KTsKICBpZighbSkKICAgIHJldHVybiBOVUxMOwogIGpzX2NsYWhlX2V4cG9ydChjdHgsIG0pOwogIHJldHVybiBtOwp9AAAAAAAAAABeEwAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAXhMAAAAAAABeEwAAAAAAAAAAAAAAAPC/"
				]
			]
		},
		{
			"file": "js_contour.hpp",
			"settings":
			{
				"buffer_size": 2158,
				"line_ending": "Unix"
			},
			"undo_stack":
			[
				[
					5,
					1,
					"paste",
					null,
					"AQAAAOQAAAAAAAAAJgEAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA5AAAAAAAAADkAAAAAAAAAAAAAAAAAPC/"
				],
				[
					7,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"AQAAAOQAAAAAAAAA5QAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA5AAAAAAAAADkAAAAAAAAAAAAAAAAAAAA"
				],
				[
					8,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAABuCAAAI2lmbmRlZiBKU19DT05UT1VSX0hQUAojZGVmaW5lIEpTX0NPTlRPVVJfSFBQCgojaW5jbHVkZSAianNfYWxsb2MuaHBwIgojaW5jbHVkZSAiZ2VvbWV0cnkuaHBwIgoKZXh0ZXJuICJDIiB7CmV4dGVybiBKU1ZhbHVlIGNvbnRvdXJfY2xhc3MsIGNvbnRvdXJfcHJvdG87CmV4dGVybiBKU0NsYXNzRGVmIGpzX2NvbnRvdXJfY2xhc3M7CmV4dGVybiBKU0NsYXNzSUQganNfY29udG91cl9jbGFzc19pZDsKCmV4dGVybiAiQyIgVklTSUJMRSBpbnQganNfY29udG91cl9pbml0KEpTQ29udGV4dCosIEpTTW9kdWxlRGVmKik7Cgp2b2lkIGpzX2NvbnRvdXJfZmluYWxpemVyKEpTUnVudGltZSogcnQsIEpTVmFsdWUgdmFsKTsKCkpTVmFsdWUganNfY29udG91cl90b19zdHJpbmcoSlNDb250ZXh0KiwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2KTsKaW50IGpzX2NvbnRvdXJfaW5pdChKU0NvbnRleHQqLCBKU01vZHVsZURlZiopOwpKU01vZHVsZURlZioganNfaW5pdF9jb250b3VyX21vZHVsZShKU0NvbnRleHQqIGN0eCwgY29uc3QgY2hhciogbW9kdWxlX25hbWUpOwp2b2lkIGpzX2NvbnRvdXJfY29uc3RydWN0b3IoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWUgcGFyZW50LCBjb25zdCBjaGFyKiBuYW1lKTsKfTsKCnN0YXRpYyBpbmxpbmUgSlNDb250b3VyRGF0YTxkb3VibGU+Kgpqc19jb250b3VyX2RhdGEoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB2YWwpIHsKICByZXR1cm4ganNfY29udG91cl9jbGFzc19pZCA/IHN0YXRpY19jYXN0PEpTQ29udG91ckRhdGE8ZG91YmxlPio+KEpTX0dldE9wYXF1ZTIoY3R4LCB2YWwsIGpzX2NvbnRvdXJfY2xhc3NfaWQpKSA6IDA7Cn0KCkpTVmFsdWUganNfY29udG91cl9uZXcoSlNDb250ZXh0KiBjdHgsIGNvbnN0IEpTQ29udG91ckRhdGE8ZG91YmxlPiYgcG9pbnRzKTsKCnRlbXBsYXRlPGNsYXNzIFQ+CnN0YXRpYyBpbmxpbmUgSlNWYWx1ZQpqc19jb250b3VyX25ldyhKU0NvbnRleHQqIGN0eCwgY29uc3QgSlNDb250b3VyRGF0YTxUPiYgcG9pbnRzKSB7CiAgSlNWYWx1ZSByZXQ7CiAgSlNDb250b3VyRGF0YTxkb3VibGU+KiBjb250b3VyOwogIHJldCA9IEpTX05ld09iamVjdFByb3RvQ2xhc3MoY3R4LCBjb250b3VyX3Byb3RvLCBqc19jb250b3VyX2NsYXNzX2lkKTsKICBjb250b3VyID0ganNfYWxsb2NhdGU8SlNDb250b3VyRGF0YTxkb3VibGU+PihjdHgpOwogIG5ldyhjb250b3VyKSBKU0NvbnRvdXJEYXRhPGRvdWJsZT4oKTsKICBjb250b3VyLT5yZXNpemUocG9pbnRzLnNpemUoKSk7CiAgdHJhbnNmb3JtX3BvaW50cyhwb2ludHMuY2JlZ2luKCksIHBvaW50cy5jZW5kKCksIGNvbnRvdXItPmJlZ2luKCkpOwoKICBKU19TZXRPcGFxdWUocmV0LCBjb250b3VyKTsKICByZXR1cm4gcmV0Owp9OwoKc3RhdGljIGlubGluZSBpbnQKanNfY29udG91cl9yZWFkKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgY29udG91ciwgSlNDb250b3VyRGF0YTxkb3VibGU+KiBvdXQpIHsKICBpbnQgcmV0ID0gMDsKICByZXR1cm4gcmV0Owp9CgpzdGF0aWMgaW5saW5lIEpTQ29udG91ckRhdGE8ZG91YmxlPgpqc19jb250b3VyX2dldChKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IGNvbnRvdXIpIHsKICBKU0NvbnRvdXJEYXRhPGRvdWJsZT4gciA9IHt9OwogIGpzX2NvbnRvdXJfcmVhZChjdHgsIGNvbnRvdXIsICZyKTsKICByZXR1cm4gcjsKfQoKdGVtcGxhdGU8Y2xhc3MgVD4KSlNWYWx1ZQpqc19jb250b3Vyc19uZXcoSlNDb250ZXh0KiBjdHgsIGNvbnN0IHN0ZDo6dmVjdG9yPEpTQ29udG91ckRhdGE8VD4+JiBjb250b3VycykgewoKICBKU1ZhbHVlIHJldCA9IEpTX05ld0FycmF5KGN0eCk7CiAgdWludDMyX3QgaSwgc2l6ZSA9IGNvbnRvdXJzLnNpemUoKTsKCiAgZm9yKGkgPSAwOyBpIDwgc2l6ZTsgaSsrKSB7CiAgICBKU1ZhbHVlIGNvbnRvdXIgPSBqc19jb250b3VyX25ldyhjdHgsIGNvbnRvdXJzW2ldKTsKICAgIEpTX1NldFByb3BlcnR5VWludDMyKGN0eCwgcmV0LCBpLCBjb250b3VyKTsKICB9CgogIHJldHVybiByZXQ7Cn0KCmV4dGVybiAiQyIgaW50IGpzX2NvbnRvdXJfaW5pdChKU0NvbnRleHQqLCBKU01vZHVsZURlZiopOwoKI2VuZGlmIC8qIGRlZmluZWQoSlNfQ09OVE9VUl9IUFApICovCgAAAAAAAAAAbggAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA5QAAAAAAAADlAAAAAAAAAAAAAAAAAPC/"
				]
			]
		},
		{
			"file": "js_cv.cpp",
			"settings":
			{
				"buffer_size": 84543,
				"line_ending": "Unix"
			},
			"undo_stack":
			[
				[
					24,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAABPSgEAI2luY2x1ZGUgImpzYmluZGluZ3MuaHBwIgojaW5jbHVkZSAianNfc2l6ZS5ocHAiCiNpbmNsdWRlICJqc19wb2ludC5ocHAiCiNpbmNsdWRlICJqc19yZWN0LmhwcCIKI2luY2x1ZGUgImpzX3VtYXQuaHBwIgojaW5jbHVkZSAianNfY29udG91ci5ocHAiCiNpbmNsdWRlICJqc19hcnJheS5ocHAiCiNpbmNsdWRlICJqc19hbGxvYy5ocHAiCiNpbmNsdWRlICJqc190eXBlZF9hcnJheS5ocHAiCiNpbmNsdWRlICJqc19jdi5ocHAiCiNpbmNsdWRlICJnZW9tZXRyeS5ocHAiCiNpbmNsdWRlICJza2VsZXRvbml6YXRpb24uaHBwIgojaW5jbHVkZSAicGl4ZWxfbmVpZ2hib3Job29kLmhwcCIKI2luY2x1ZGUgInBuZ193cml0ZS5ocHAiCiNpbmNsdWRlICJwYWxldHRlLmhwcCIKI2luY2x1ZGUgInV0aWwuaHBwIgojaW5jbHVkZSAiLi4vcXVpY2tqcy9jdXRpbHMuaCIKCiNpbmNsdWRlIDxhcnJheT4KI2luY2x1ZGUgPGNhc3NlcnQ+CiNpbmNsdWRlIDxvcGVuY3YyL2ltZ2NvZGVjcy5ocHA+CiNpbmNsdWRlIDxvcGVuY3YyL2ltZ3Byb2MuaHBwPgojaW5jbHVkZSA8b3BlbmN2Mi9oaWdoZ3VpLmhwcD4KCiNkZWZpbmUgSlNfQ1ZfQ09OU1RBTlQobmFtZSkgSlNfUFJPUF9JTlQzMl9ERUYoI25hbWUsIGN2OjpuYW1lLCAwKQoKZW51bSB7IERJU1BMQVlfT1ZFUkxBWSB9OwoKc3RhdGljIHN0ZDo6dmVjdG9yPGN2OjpTdHJpbmc+IHdpbmRvd19saXN0OwoKc3RhdGljIEpTVmFsdWUKanNfY3ZfYmx1cihKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2KSB7CiAgY3Y6Ok1hdCogaW1hZ2U7CiAgSlNTaXplRGF0YTxpbnQ+IHNpemU7CiAgSlNQb2ludERhdGE8aW50PiBhbmNob3IgPSB7LTEsIC0xfTsKICBkb3VibGUgc2lnbWFYLCBzaWdtYVkgPSAwOwogIEpTSW5wdXRPdXRwdXRBcnJheSBpbnB1dCwgb3V0cHV0OwogIGludDMyX3QgYm9yZGVyVHlwZSA9IGN2OjpCT1JERVJfREVGQVVMVDsKCiAgSlNWYWx1ZSByZXQ7CgogIGlmKGpzX2lzX25vYXJyYXkoKGlucHV0ID0ganNfdW1hdF9vcl9tYXQoY3R4LCBhcmd2WzBdKSkpKQogICAgcmV0dXJuIEpTX1Rocm93SW50ZXJuYWxFcnJvcihjdHgsICJhcmd1bWVudCAxIG5vdCBhbiBhcnJheSEiKTsKCiAgaWYoanNfaXNfbm9hcnJheSgob3V0cHV0ID0ganNfdW1hdF9vcl9tYXQoY3R4LCBhcmd2WzFdKSkpKQogICAgcmV0dXJuIEpTX1Rocm93SW50ZXJuYWxFcnJvcihjdHgsICJhcmd1bWVudCAyIG5vdCBhbiBhcnJheSEiKTsKCiAgaWYoYXJnYyA8IDMpCiAgICByZXR1cm4gSlNfRVhDRVBUSU9OOwoKICBzaXplID0ganNfc2l6ZV9nZXQoY3R4LCBhcmd2WzJdKTsKCiAgaWYoYXJnYyA+IDMpCiAgICBqc19wb2ludF9yZWFkKGN0eCwgYXJndlszXSwgJmFuY2hvcik7CgogIGN2OjpibHVyKGlucHV0LCBvdXRwdXQsIHNpemUsIGFuY2hvcik7CgogIHJldHVybiBKU19VTkRFRklORUQ7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX2N2X2JvdW5kaW5nX3JlY3QoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCogYXJndikgewogIEpTSW5wdXRBcnJheSBpbnB1dDsKICBKU1JlY3REYXRhPGRvdWJsZT4gcmVjdDsKCiAgaW5wdXQgPSBqc19jdl9pbnB1dG91dHB1dGFycmF5KGN0eCwgYXJndlswXSk7CgogIHJlY3QgPSBjdjo6Ym91bmRpbmdSZWN0KGlucHV0KTsKICByZXR1cm4ganNfcmVjdF93cmFwKGN0eCwgcmVjdCk7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX2N2X2dhdXNzaWFuX2JsdXIoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCogYXJndikgewogIEpTU2l6ZURhdGE8ZG91YmxlPiBzaXplOwogIGRvdWJsZSBzaWdtYVgsIHNpZ21hWSA9IDA7CiAgSlNJbnB1dE91dHB1dEFycmF5IGlucHV0LCBvdXRwdXQ7CiAgaW50MzJfdCBib3JkZXJUeXBlID0gY3Y6OkJPUkRFUl9ERUZBVUxUOwoKICBpbnB1dCA9IGpzX3VtYXRfb3JfbWF0KGN0eCwgYXJndlswXSk7CiAgb3V0cHV0ID0ganNfdW1hdF9vcl9tYXQoY3R4LCBhcmd2WzFdKTsKCiAgaWYoanNfaXNfbm9hcnJheShpbnB1dCkgfHwganNfaXNfbm9hcnJheShvdXRwdXQpKQogICAgcmV0dXJuIEpTX1Rocm93SW50ZXJuYWxFcnJvcihjdHgsICJhcmd1bWVudCAxIG9yIGFyZ3VtZW50IDIgbm90IGFuIGFycmF5ISIpOwoKICBzaXplID0ganNfc2l6ZV9nZXQoY3R4LCBhcmd2WzJdKTsKCiAgSlNfVG9GbG9hdDY0KGN0eCwgJnNpZ21hWCwgYXJndlszXSk7CiAgaWYoYXJnYyA+PSA1KQogICAgSlNfVG9GbG9hdDY0KGN0eCwgJnNpZ21hWSwgYXJndls0XSk7CiAgaWYoYXJnYyA+PSA2KQogICAgSlNfVG9JbnQzMihjdHgsICZib3JkZXJUeXBlLCBhcmd2WzVdKTsKCiAgLy8gc3RkOjpjZXJyIDw8ICJjdjo6R2F1c3NpYW5CbHVyIHNpemU9IiA8PCBzaXplIDw8ICIgc2lnbWFYPSIgPDwgc2lnbWFYIDw8ICIgc2lnbWFZPSIgPDwgc2lnbWFZCiAgLy8gPDwgIiBib3JkZXJUeXBlPSIgPDwgYm9yZGVyVHlwZSA8PCBzdGQ6OmVuZGw7CiAgY3Y6OkdhdXNzaWFuQmx1cihpbnB1dCwgb3V0cHV0LCBzaXplLCBzaWdtYVgsIHNpZ21hWSwgYm9yZGVyVHlwZSk7CgogIHJldHVybiBKU19VTkRFRklORUQ7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX2N2X2Nvcm5lcl9oYXJyaXMoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCogYXJndikgewogIGN2OjpNYXQqIGltYWdlOwogIGRvdWJsZSBrOwogIEpTSW5wdXRPdXRwdXRBcnJheSBpbnB1dCwgb3V0cHV0OwogIGludDMyX3QgYmxvY2tTaXplLCBrc2l6ZSwgYm9yZGVyVHlwZSA9IGN2OjpCT1JERVJfREVGQVVMVDsKCiAgaW5wdXQgPSBqc191bWF0X29yX21hdChjdHgsIGFyZ3ZbMF0pOwogIG91dHB1dCA9IGpzX3VtYXRfb3JfbWF0KGN0eCwgYXJndlsxXSk7CgogIGlmKGpzX2lzX25vYXJyYXkoaW5wdXQpIHx8IGpzX2lzX25vYXJyYXkob3V0cHV0KSkKICAgIHJldHVybiBKU19UaHJvd0ludGVybmFsRXJyb3IoY3R4LCAiYXJndW1lbnQgMSBvciBhcmd1bWVudCAyIG5vdCBhbiBhcnJheSEiKTsKICBKU19Ub0ludDMyKGN0eCwgJmJsb2NrU2l6ZSwgYXJndlsyXSk7CiAgSlNfVG9JbnQzMihjdHgsICZrc2l6ZSwgYXJndlszXSk7CgogIEpTX1RvRmxvYXQ2NChjdHgsICZrLCBhcmd2WzRdKTsKCiAgaWYoYXJnYyA+PSA2KQogICAgSlNfVG9JbnQzMihjdHgsICZib3JkZXJUeXBlLCBhcmd2WzVdKTsKCiAgY3Y6OmNvcm5lckhhcnJpcyhpbnB1dCwgb3V0cHV0LCBibG9ja1NpemUsIGtzaXplLCBrLCBib3JkZXJUeXBlKTsKCiAgcmV0dXJuIEpTX1VOREVGSU5FRDsKfQoKc3RhdGljIEpTVmFsdWUKanNfY3ZfaG91Z2hfbGluZXMoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCogYXJndikgewogIEpTSW5wdXRPdXRwdXRBcnJheSBpbWFnZTsKICBKU1ZhbHVlQ29uc3QgYXJyYXk7CiAgZG91YmxlIHJobywgdGhldGE7CiAgaW50MzJfdCB0aHJlc2hvbGQ7CiAgZG91YmxlIHNybiA9IDAsIHN0biA9IDAsIG1pbl90aGV0YSA9IDAsIG1heF90aGV0YSA9IENWX1BJOwogIHN0ZDo6dmVjdG9yPGN2OjpWZWMyZj4gbGluZXM7CiAgc2l6ZV90IGk7CgogIGRvdWJsZSBhbmdsZSA9IDAsIHNjYWxlID0gMTsKICBjdjo6TWF0IG07CgogIEpTVmFsdWUgcmV0OwogIGlmKGFyZ2MgPCA1KQogICAgcmV0dXJuIEpTX0VYQ0VQVElPTjsKCiAgaW1hZ2UgPSBqc191bWF0X29yX21hdChjdHgsIGFyZ3ZbMF0pOwoKICBpZihqc19pc19ub2FycmF5KGltYWdlKSB8fCAhanNfaXNfYXJyYXkoY3R4LCBhcmd2WzFdKSkKICAgIHJldHVybiBKU19UaHJvd0ludGVybmFsRXJyb3IoY3R4LCAiYXJndW1lbnQgMSBvciBhcmd1bWVudCAyIG5vdCBhbiBhcnJheSEiKTsKCiAgYXJyYXkgPSBhcmd2WzFdOwogIEpTX1RvRmxvYXQ2NChjdHgsICZyaG8sIGFyZ3ZbMl0pOwogIEpTX1RvRmxvYXQ2NChjdHgsICZ0aGV0YSwgYXJndlszXSk7CiAgSlNfVG9JbnQzMihjdHgsICZ0aHJlc2hvbGQsIGFyZ3ZbNF0pOwoKICBpZihhcmdjID49IDYpCiAgICBKU19Ub0Zsb2F0NjQoY3R4LCAmc3JuLCBhcmd2WzVdKTsKICBpZihhcmdjID49IDcpCiAgICBKU19Ub0Zsb2F0NjQoY3R4LCAmc3RuLCBhcmd2WzZdKTsKCiAgaWYoYXJnYyA+PSA4KQogICAgSlNfVG9GbG9hdDY0KGN0eCwgJm1pbl90aGV0YSwgYXJndls3XSk7CiAgaWYoYXJnYyA+PSA5KQogICAgSlNfVG9GbG9hdDY0KGN0eCwgJm1heF90aGV0YSwgYXJndls4XSk7CgogIGN2OjpIb3VnaExpbmVzKGltYWdlLCBsaW5lcywgcmhvLCB0aGV0YSwgdGhyZXNob2xkLCBzcm4sIHN0biwgbWluX3RoZXRhLCBtYXhfdGhldGEpOwoKICBpID0gMDsKCiAgZm9yKGNvbnN0IGN2OjpWZWMyZiYgbGluZSA6IGxpbmVzKSB7CiAgICBKU1ZhbHVlIHYgPSBKU19OZXdBcnJheShjdHgpOwoKICAgIEpTX1NldFByb3BlcnR5VWludDMyKGN0eCwgdiwgMCwgSlNfTmV3RmxvYXQ2NChjdHgsIGxpbmVbMF0pKTsKICAgIEpTX1NldFByb3BlcnR5VWludDMyKGN0eCwgdiwgMSwgSlNfTmV3RmxvYXQ2NChjdHgsIGxpbmVbMV0pKTsKCiAgICBKU19TZXRQcm9wZXJ0eVVpbnQzMihjdHgsIGFyZ3ZbMV0sIGkrKywgdik7CiAgfQoKICByZXR1cm4gSlNfVU5ERUZJTkVEOwp9CgpzdGF0aWMgSlNWYWx1ZQpqc19jdl9ob3VnaF9saW5lc19wKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QqIGFyZ3YpIHsKICBKU0lucHV0T3V0cHV0QXJyYXkgc3JjLCBkc3Q7CiAgSlNWYWx1ZUNvbnN0IGFycmF5OwogIGRvdWJsZSByaG8sIHRoZXRhOwogIGludDMyX3QgdGhyZXNob2xkOwogIGRvdWJsZSBtaW5MaW5lTGVuZ3RoID0gMCwgbWF4TGluZUdhcCA9IDA7CgogIHN0ZDo6dmVjdG9yPGN2OjpWZWM0aT4gbGluZXM7CiAgc2l6ZV90IGk7CgogIGRvdWJsZSBhbmdsZSA9IDAsIHNjYWxlID0gMTsKICBjdjo6TWF0IG07CgogIEpTVmFsdWUgcmV0OwogIGlmKGFyZ2MgPCA1KQogICAgcmV0dXJuIEpTX0VYQ0VQVElPTjsKCiAgc3JjID0ganNfdW1hdF9vcl9tYXQoY3R4LCBhcmd2WzBdKTsKICBkc3QgPSBqc19jdl9pbnB1dG91dHB1dGFycmF5KGN0eCwgYXJndlsxXSk7CgogIGlmKGpzX2lzX25vYXJyYXkoc3JjKSB8fCBqc19pc19ub2FycmF5KGRzdCkpCiAgICByZXR1cm4gSlNfVGhyb3dJbnRlcm5hbEVycm9yKGN0eCwgInNyYyBvciBkc3Qgbm90IGFuIGFycmF5ISIpOwoKICBhcnJheSA9IGFyZ3ZbMV07CiAgSlNfVG9GbG9hdDY0KGN0eCwgJnJobywgYXJndlsyXSk7CiAgSlNfVG9GbG9hdDY0KGN0eCwgJnRoZXRhLCBhcmd2WzNdKTsKICBKU19Ub0ludDMyKGN0eCwgJnRocmVzaG9sZCwgYXJndls0XSk7CgogIGlmKGFyZ2MgPj0gNikKICAgIEpTX1RvRmxvYXQ2NChjdHgsICZtaW5MaW5lTGVuZ3RoLCBhcmd2WzVdKTsKICBpZihhcmdjID49IDcpCiAgICBKU19Ub0Zsb2F0NjQoY3R4LCAmbWF4TGluZUdhcCwgYXJndls2XSk7CgogIGN2OjpIb3VnaExpbmVzUChzcmMsIGxpbmVzLCByaG8sIHRoZXRhLCB0aHJlc2hvbGQsIG1pbkxpbmVMZW5ndGgsIG1heExpbmVHYXApOwoKICBjdjo6TWF0KGxpbmVzKS5jb3B5VG8oZHN0KTsKICAvKgogICAgaSA9IDA7CiAgICBqc19hcnJheV90cnVuY2F0ZShjdHgsIGFycmF5LCAwKTsKCiAgICBmb3IoY29uc3QgYXV0byYgbGluZSA6IGxpbmVzKSB7CiAgICAgIEpTVmFsdWUgdiA9IGpzX2xpbmVfbmV3KGN0eCwgbGluZVswXSwgbGluZVsxXSwgbGluZVsyXSwgbGluZVszXSk7CgogICAgICBKU19TZXRQcm9wZXJ0eVVpbnQzMihjdHgsIGFycmF5LCBpKyssIHYpOwogICAgfQogICovCiAgcmV0dXJuIEpTX1VOREVGSU5FRDsKfQoKc3RhdGljIEpTVmFsdWUKanNfY3ZfaG91Z2hfY2lyY2xlcyhKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2KSB7CiAgSlNJbnB1dEFycmF5IGltYWdlOwogIEpTVmFsdWVDb25zdCBhcnJheTsKICBpbnQzMl90IG1ldGhvZCwgbWluUmFkaXVzID0gMCwgbWF4UmFkaXVzID0gMDsKICBkb3VibGUgZHAsIG1pbkRpc3QsIHBhcmFtMSA9IDEwMCwgcGFyYW0yID0gMTAwOwoKICBzdGQ6OnZlY3Rvcjxjdjo6VmVjPGZsb2F0LCA0Pj4gY2lyY2xlczsKICBzaXplX3QgaTsKCiAgSlNWYWx1ZSByZXQ7CiAgaWYoYXJnYyA8IDUpCiAgICByZXR1cm4gSlNfRVhDRVBUSU9OOwoKICBpbWFnZSA9IGpzX3VtYXRfb3JfbWF0KGN0eCwgYXJndlswXSk7CgogIGlmKGpzX2lzX25vYXJyYXkoaW1hZ2UpIHx8ICFqc19pc19hcnJheShjdHgsIGFyZ3ZbMV0pKQogICAgcmV0dXJuIEpTX1Rocm93SW50ZXJuYWxFcnJvcihjdHgsICJhcmd1bWVudCAxIG9yIGFyZ3VtZW50IDIgbm90IGFuIGFycmF5ISIpOwoKICBhcnJheSA9IGFyZ3ZbMV07CiAgSlNfVG9JbnQzMihjdHgsICZtZXRob2QsIGFyZ3ZbMl0pOwogIEpTX1RvRmxvYXQ2NChjdHgsICZkcCwgYXJndlszXSk7CiAgSlNfVG9GbG9hdDY0KGN0eCwgJm1pbkRpc3QsIGFyZ3ZbNF0pOwoKICBpZihhcmdjID49IDYpCiAgICBKU19Ub0Zsb2F0NjQoY3R4LCAmcGFyYW0xLCBhcmd2WzVdKTsKICBpZihhcmdjID49IDcpCiAgICBKU19Ub0Zsb2F0NjQoY3R4LCAmcGFyYW0yLCBhcmd2WzZdKTsKICBpZihhcmdjID49IDgpCiAgICBKU19Ub0ludDMyKGN0eCwgJm1pblJhZGl1cywgYXJndls3XSk7CiAgaWYoYXJnYyA+PSA5KQogICAgSlNfVG9JbnQzMihjdHgsICZtYXhSYWRpdXMsIGFyZ3ZbOF0pOwoKICBjdjo6SG91Z2hDaXJjbGVzKGltYWdlLCBjaXJjbGVzLCBtZXRob2QsIGRwLCBtaW5EaXN0LCBwYXJhbTEsIHBhcmFtMiwgbWluUmFkaXVzLCBtYXhSYWRpdXMpOwoKICBpID0gMDsKICBqc19hcnJheV90cnVuY2F0ZShjdHgsIGFycmF5LCAwKTsKCiAgZm9yKGF1dG8mIGNpcmNsZSA6IGNpcmNsZXMpIHsKCiAgICBKU1ZhbHVlIHYgPSBqc19hcnJheV9mcm9tKGN0eCwgYmVnaW4oY2lyY2xlKSwgZW5kKGNpcmNsZSkpOwoKICAgIEpTX1NldFByb3BlcnR5VWludDMyKGN0eCwgYXJyYXksIGkrKywgdik7CiAgfQoKICByZXR1cm4gSlNfVU5ERUZJTkVEOwp9CgpzdGF0aWMgSlNWYWx1ZQpqc19jdl9jYW5ueShKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2KSB7CiAgSlNJbnB1dE91dHB1dEFycmF5IGltYWdlLCBlZGdlczsKICBkb3VibGUgdGhyZXNob2xkMSwgdGhyZXNob2xkMjsKICBpbnQzMl90IGFwZXJ0dXJlU2l6ZSA9IDM7CiAgYm9vbCBMMmdyYWRpZW50ID0gZmFsc2U7CgogIGltYWdlID0ganNfdW1hdF9vcl9tYXQoY3R4LCBhcmd2WzBdKTsKICBlZGdlcyA9IGpzX2N2X2lucHV0b3V0cHV0YXJyYXkoY3R4LCBhcmd2WzFdKTsKCiAgaWYoanNfaXNfbm9hcnJheShpbWFnZSkgfHwganNfaXNfbm9hcnJheShlZGdlcykpCiAgICByZXR1cm4gSlNfVGhyb3dJbnRlcm5hbEVycm9yKGN0eCwgImFyZ3VtZW50IDEgb3IgYXJndW1lbnQgMiBub3QgYW4gYXJyYXkhIik7CgogIEpTX1RvRmxvYXQ2NChjdHgsICZ0aHJlc2hvbGQxLCBhcmd2WzJdKTsKICBKU19Ub0Zsb2F0NjQoY3R4LCAmdGhyZXNob2xkMiwgYXJndlszXSk7CgogIGlmKGFyZ2MgPj0gNSkKICAgIEpTX1RvSW50MzIoY3R4LCAmYXBlcnR1cmVTaXplLCBhcmd2WzRdKTsKCiAgaWYoYXJnYyA+PSA2KQogICAgTDJncmFkaWVudCA9IEpTX1RvQm9vbChjdHgsIGFyZ3ZbNV0pOwoKICAvLyBzdGQ6OmNlcnIgPDwgImN2OjpDYW5ueSB0aHJlc2hvbGQxPSIgPDwgdGhyZXNob2xkMSA8PCAiIHRocmVzaG9sZDI9IiA8PCB0aHJlc2hvbGQyIDw8ICIKICAvLyBhcGVydHVyZVNpemU9IiA8PCBhcGVydHVyZVNpemUgPDwgIiBMMmdyYWRpZW50PSIgPDwgTDJncmFkaWVudCA8PCBzdGQ6OmVuZGw7CgogIGN2OjpDYW5ueShpbWFnZSwgZWRnZXMsIHRocmVzaG9sZDEsIHRocmVzaG9sZDIsIGFwZXJ0dXJlU2l6ZSwgTDJncmFkaWVudCk7CgogIHJldHVybiBKU19VTkRFRklORUQ7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX2N2X2dvb2RfZmVhdHVyZXNfdG9fdHJhY2soSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCogYXJndikgewogIGN2OjpNYXQgKmltYWdlLCAqY29ybmVycywgKm1hc2sgPSBudWxscHRyOwogIGludDMyX3QgbWF4Q29ybmVycywgYmxvY2tTaXplID0gMywgZ3JhZGllbnRTaXplOwogIGRvdWJsZSBxdWFsaXR5TGV2ZWwsIG1pbkRpc3RhbmNlLCBrID0gMC4wNDsKICBib29sIHVzZUhhcnJpc0RldGVjdG9yID0gZmFsc2U7CiAgaW50IGFyZ2luZDsKCiAgaW1hZ2UgPSBqc19tYXRfZGF0YShjdHgsIGFyZ3ZbMF0pOwogIGNvcm5lcnMgPSBqc19tYXRfZGF0YShjdHgsIGFyZ3ZbMV0pOwoKICBpZihpbWFnZSA9PSBudWxscHRyIHx8IGNvcm5lcnMgPT0gbnVsbHB0ciB8fCBpbWFnZS0+ZW1wdHkoKSkKICAgIHJldHVybiBKU19UaHJvd0ludGVybmFsRXJyb3IoY3R4LCAiYXJndW1lbnQgMSBvciBhcmd1bWVudCAyIG5vdCBhbiBhcnJheSEiKTsKCiAgSlNfVG9JbnQzMihjdHgsICZtYXhDb3JuZXJzLCBhcmd2WzJdKTsKICBKU19Ub0Zsb2F0NjQoY3R4LCAmcXVhbGl0eUxldmVsLCBhcmd2WzNdKTsKICBKU19Ub0Zsb2F0NjQoY3R4LCAmbWluRGlzdGFuY2UsIGFyZ3ZbNF0pOwoKICBpZihhcmdjID49IDYpCiAgICBtYXNrID0ganNfbWF0X2RhdGEoY3R4LCBhcmd2WzVdKTsKCiAgaWYoYXJnYyA+PSA3KQogICAgSlNfVG9JbnQzMihjdHgsICZibG9ja1NpemUsIGFyZ3ZbNl0pOwoKICBhcmdpbmQgPSA3OwoKICBpZihhcmdjID4gYXJnaW5kKSB7CiAgICBpZihKU19Jc051bWJlcihhcmd2W2FyZ2luZF0pKSB7CiAgICAgIEpTX1RvSW50MzIoY3R4LCAmZ3JhZGllbnRTaXplLCBhcmd2W2FyZ2luZF0pOwogICAgICBhcmdpbmQrKzsKICAgIH0KICB9CiAgaWYoYXJnYyA+IGFyZ2luZCkgewogICAgdXNlSGFycmlzRGV0ZWN0b3IgPSBKU19Ub0Jvb2woY3R4LCBhcmd2W2FyZ2luZF0pOwogICAgYXJnaW5kKys7CiAgfQogIGlmKGFyZ2MgPiBhcmdpbmQpCiAgICBKU19Ub0Zsb2F0NjQoY3R4LCAmaywgYXJndlthcmdpbmRdKTsKCiAgaWYoYXJnaW5kID09IDkpCiAgICBjdjo6Z29vZEZlYXR1cmVzVG9UcmFjaygqaW1hZ2UsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAqY29ybmVycywKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1heENvcm5lcnMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBxdWFsaXR5TGV2ZWwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtaW5EaXN0YW5jZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hc2sgPyAqbWFzayA6IGN2Ojpub0FycmF5KCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9ja1NpemUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBncmFkaWVudFNpemUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1c2VIYXJyaXNEZXRlY3RvciwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGspOwogIGVsc2UKICAgIGN2Ojpnb29kRmVhdHVyZXNUb1RyYWNrKAogICAgICAgICppbWFnZSwgKmNvcm5lcnMsIG1heENvcm5lcnMsIHF1YWxpdHlMZXZlbCwgbWluRGlzdGFuY2UsIG1hc2sgPyAqbWFzayA6IGN2Ojpub0FycmF5KCksIGJsb2NrU2l6ZSwgdXNlSGFycmlzRGV0ZWN0b3IsIGspOwoKICByZXR1cm4gSlNfVU5ERUZJTkVEOwp9CgpzdGF0aWMgSlNWYWx1ZQpqc19jdl9pbXJlYWQoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCogYXJndikgewoKICBjb25zdCBjaGFyKiBmaWxlbmFtZSA9IEpTX1RvQ1N0cmluZyhjdHgsIGFyZ3ZbMF0pOwoKICBjdjo6TWF0IG1hdCA9IGN2OjppbXJlYWQoZmlsZW5hbWUpOwoKICByZXR1cm4ganNfbWF0X3dyYXAoY3R4LCBtYXQpOwp9CgpzdGF0aWMgSlNWYWx1ZQpqc19jdl9pbXdyaXRlKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QqIGFyZ3YpIHsKCiAgY29uc3QgY2hhciogZmlsZW5hbWUgPSBKU19Ub0NTdHJpbmcoY3R4LCBhcmd2WzBdKTsKICBKU0lucHV0T3V0cHV0QXJyYXkgaW1hZ2UgPSBqc19jdl9pbnB1dG91dHB1dGFycmF5KGN0eCwgYXJndlsxXSk7CgogIGlmKGltYWdlLmVtcHR5KCkpCiAgICByZXR1cm4gSlNfVGhyb3dJbnRlcm5hbEVycm9yKGN0eCwgIkVtcHR5IGltYWdlIik7CgogIGlmKGFyZ2MgPiAyICYmIC8qaW1hZ2UudHlwZSgpID09IENWXzhVQzEgJiYqLyBzdHJfZW5kKGZpbGVuYW1lLCAiLnBuZyIpICYmIGltYWdlLmlzTWF0KCkpIHsKICAgIGRvdWJsZSBtYXg7CgogICAgc3RkOjp2ZWN0b3I8SlNDb2xvckRhdGE8dWludDhfdD4+IHBhbGV0dGU7CgogICAganNfYXJyYXlfdG8oY3R4LCBhcmd2WzJdLCBwYWxldHRlKTsKCiAgICBjdjo6bWluTWF4TG9jKGltYWdlLCBudWxscHRyLCAmbWF4KTsKCiAgICBpZihwYWxldHRlLnNpemUoKSA8IHNpemVfdChtYXgpKQogICAgICBwYWxldHRlLnJlc2l6ZShzaXplX3QobWF4KSk7CgogICAgcHJpbnRmKCJwbmcrKyB3cml0ZV9tYXQgJyVzJyBbJXp1XVxuIiwgZmlsZW5hbWUsIHBhbGV0dGUuc2l6ZSgpKTsKCiAgICB3cml0ZV9tYXQoZmlsZW5hbWUsIGltYWdlLmdldE1hdFJlZigpLCBwYWxldHRlKTsKCiAgfSBlbHNlIHsKICAgIGN2OjppbXdyaXRlKGZpbGVuYW1lLCBpbWFnZSk7CiAgfQoKICByZXR1cm4gSlNfVU5ERUZJTkVEOwp9CgpzdGF0aWMgSlNWYWx1ZQpqc19jdl9pbXNob3coSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCogYXJndikgewoKICBjb25zdCBjaGFyKiB3aW5uYW1lID0gSlNfVG9DU3RyaW5nKGN0eCwgYXJndlswXSk7CiAgSlNJbnB1dE91dHB1dEFycmF5IGltYWdlID0ganNfY3ZfaW5wdXRvdXRwdXRhcnJheShjdHgsIGFyZ3ZbMV0pOwoKICBpZihpbWFnZS5lbXB0eSgpKQogICAgcmV0dXJuIEpTX1Rocm93SW50ZXJuYWxFcnJvcihjdHgsICJFbXB0eSBpbWFnZSIpOwoKICBjdjo6aW1zaG93KHdpbm5hbWUsIGltYWdlKTsKCiAgcmV0dXJuIEpTX1VOREVGSU5FRDsKfQoKc3RhdGljIEpTVmFsdWUKanNfY3ZfY3Z0X2NvbG9yKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QqIGFyZ3YpIHsKCiAgSlNJbnB1dE91dHB1dEFycmF5IHNyYywgZHN0OwogIGludCBjb2RlLCBkc3RDbiA9IDA7CiAgLyppbnQ2NF90IGJlZm9yZSwgYWZ0ZXI7CiAgYmVmb3JlID0gY3Y6OmdldFRpY2tDb3VudCgpOyovCgogIHNyYyA9IGpzX3VtYXRfb3JfbWF0KGN0eCwgYXJndlswXSk7CiAgZHN0ID0ganNfdW1hdF9vcl9tYXQoY3R4LCBhcmd2WzFdKTsKCiAgaWYoanNfaXNfbm9hcnJheShzcmMpIHx8IGpzX2lzX25vYXJyYXkoZHN0KSkKICAgIHJldHVybiBKU19UaHJvd0ludGVybmFsRXJyb3IoY3R4LCAic3JjIG9yIGRzdCBub3QgYW4gYXJyYXkhIik7CgogIEpTX1RvSW50MzIoY3R4LCAmY29kZSwgYXJndlsyXSk7CgogIGlmKGFyZ2MgPj0gNCkKICAgIEpTX1RvSW50MzIoY3R4LCAmZHN0Q24sIGFyZ3ZbM10pOwoKICB0cnkgewoKICAgIGN2OjpjdnRDb2xvcihzcmMsIGRzdCwgY29kZSwgZHN0Q24pOwoKICB9IGNhdGNoKGNvbnN0IGN2OjpFeGNlcHRpb24mIGUpIHsKICAgIHN0ZDo6Y2VyciA8PCBlLndoYXQoKSA8PCBzdGQ6OmVuZGw7CiAgICByZXR1cm4gSlNfVGhyb3dJbnRlcm5hbEVycm9yKGN0eCwgIkMrKyBleGNlcHRpb246ICVzIiwgZS53aGF0KCkpOwogIH0KCiAgLyphZnRlciA9IGN2OjpnZXRUaWNrQ291bnQoKTsKICBkb3VibGUgdCA9IHN0YXRpY19jYXN0PGRvdWJsZT4oYWZ0ZXIgLSBiZWZvcmUpIC8gY3Y6OmdldFRpY2tGcmVxdWVuY3koKTsKICBzdGQ6OmNlcnIgPDwgImN2OjpjdnRDb2xvciBkdXJhdGlvbiA9ICIgPDwgdCA8PCAicyIgPDwgc3RkOjplbmRsOyovCgogIHJldHVybiBKU19VTkRFRklORUQ7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX2N2X3NwbGl0KEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QqIGFyZ3YpIHsKCiAgY3Y6Ok1hdCogc3JjOwogIHN0ZDo6dmVjdG9yPGN2OjpNYXQ+IGRzdDsKICBpbnQgY29kZSwgZHN0Q24gPSAwOwogIGludDMyX3QgbGVuZ3RoOwoKICBzcmMgPSBqc19tYXRfZGF0YShjdHgsIGFyZ3ZbMF0pOwoKICBpZihzcmMgPT0gbnVsbHB0cikKICAgIHJldHVybiBKU19UaHJvd0ludGVybmFsRXJyb3IoY3R4LCAic3JjIG5vdCBhbiBhcnJheSEiKTsKCiAgbGVuZ3RoID0ganNfYXJyYXlfbGVuZ3RoKGN0eCwgYXJndlsxXSk7CgogIGZvcihpbnQzMl90IGkgPSAwOyBpIDwgc3JjLT5jaGFubmVscygpOyBpKyspIHsgZHN0LnB1c2hfYmFjayhjdjo6TWF0KHNyYy0+c2l6ZSgpLCBzcmMtPnR5cGUoKSAmIDB4NykpOyB9CgogIC8vIGRzdC5yZXNpemUoc3JjLT5jaGFubmVscygpKTsKCiAgaWYoZHN0LnNpemUoKSA+PSBzcmMtPmNoYW5uZWxzKCkpIHsKCiAgICAvKiAgc3RkOjp0cmFuc2Zvcm0oanNfYmVnaW4oY3R4LCBhcmd2WzFdKSwganNfZW5kKGN0eCwgYXJndlsxXSksIHN0ZDo6YmFja19pbnNlcnRlcihkc3QpLCBbY3R4LAogICAgICBzcmNdKGNvbnN0IEpTVmFsdWUmIHYpIC0+IGN2OjpNYXQgeyBjdjo6TWF0KiBtYXQgPSBqc19tYXRfZGF0YShjdHgsIHYpOyByZXR1cm4gbWF0ID09IG51bGxwdHIKICAgICAgPyBjdjo6TWF0Ojp6ZXJvcyhzcmMtPnJvd3MsIHNyYy0+Y29scywgc3JjLT50eXBlKCkpIDogKm1hdDsKICAgICAgfSk7CiAgKi8KCiAgICBjdjo6c3BsaXQoKnNyYywgZHN0LmRhdGEoKSk7CgogICAgZm9yKGludDMyX3QgaSA9IDA7IGkgPCBzcmMtPmNoYW5uZWxzKCk7IGkrKykgeyBKU19TZXRQcm9wZXJ0eVVpbnQzMihjdHgsIGFyZ3ZbMV0sIGksIGpzX21hdF93cmFwKGN0eCwgZHN0W2ldKSk7IH0KCiAgICByZXR1cm4gSlNfVU5ERUZJTkVEOwogIH0KICByZXR1cm4gSlNfRVhDRVBUSU9OOwp9CgpzdGF0aWMgSlNWYWx1ZQpqc19jdl9ub3JtYWxpemUoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCogYXJndikgewoKICBKU0lucHV0T3V0cHV0QXJyYXkgc3JjLCBkc3Q7CiAgZG91YmxlIGFscGhhID0gMSwgYmV0YSA9IDA7CiAgaW50MzJfdCBub3JtX3R5cGUgPSBjdjo6Tk9STV9MMiwgZHR5cGUgPSAtMTsKCiAgc3JjID0ganNfdW1hdF9vcl9tYXQoY3R4LCBhcmd2WzBdKTsKICBkc3QgPSBqc191bWF0X29yX21hdChjdHgsIGFyZ3ZbMV0pOwoKICBpZihqc19pc19ub2FycmF5KHNyYykgfHwganNfaXNfbm9hcnJheShkc3QpKQogICAgcmV0dXJuIEpTX1Rocm93SW50ZXJuYWxFcnJvcihjdHgsICJzcmMgb3IgZHN0IG5vdCBhbiBhcnJheSEiKTsKCiAgaWYoYXJnYyA+PSAzKQogICAgSlNfVG9GbG9hdDY0KGN0eCwgJmFscGhhLCBhcmd2WzJdKTsKICBpZihhcmdjID49IDQpCiAgICBKU19Ub0Zsb2F0NjQoY3R4LCAmYmV0YSwgYXJndlszXSk7CiAgaWYoYXJnYyA+PSA1KQogICAgSlNfVG9JbnQzMihjdHgsICZub3JtX3R5cGUsIGFyZ3ZbNF0pOwogIGlmKGFyZ2MgPj0gNikKICAgIEpTX1RvSW50MzIoY3R4LCAmZHR5cGUsIGFyZ3ZbNV0pOwoKICBjdjo6bm9ybWFsaXplKHNyYywgZHN0LCBhbHBoYSwgYmV0YSwgbm9ybV90eXBlLCBkdHlwZSk7CiAgcmV0dXJuIEpTX1VOREVGSU5FRDsKfQoKc3RhdGljIEpTVmFsdWUKanNfY3ZfYWRkX3dlaWdodGVkKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QqIGFyZ3YpIHsKICBKU0lucHV0T3V0cHV0QXJyYXkgYTEsIGEyLCBkc3Q7CgogIGRvdWJsZSBhbHBoYSwgYmV0YSwgZ2FtbWE7CiAgaW50MzJfdCBkdHlwZSA9IC0xOwoKICBhMSA9IGpzX3VtYXRfb3JfbWF0KGN0eCwgYXJndlswXSk7CiAgYTIgPSBqc191bWF0X29yX21hdChjdHgsIGFyZ3ZbMl0pOwoKICBpZihqc19pc19ub2FycmF5KGExKSB8fCBqc19pc19ub2FycmF5KGEyKSkKICAgIHJldHVybiBKU19UaHJvd0ludGVybmFsRXJyb3IoY3R4LCAiYTEgb3IgYTIgbm90IGFuIGFycmF5ISIpOwoKICAvKgogICAgc3JjMSA9IGpzX21hdF9kYXRhKGN0eCwgYXJndlswXSk7CgogICAgc3JjMiA9IGpzX21hdF9kYXRhKGN0eCwgYXJndlsyXSk7Ki8KICBpZihhcmdjID49IDYpCiAgICBkc3QgPSBqc191bWF0X29yX21hdChjdHgsIGFyZ3ZbNV0pOwoKICBpZihqc19pc19ub2FycmF5KGRzdCkpCiAgICByZXR1cm4gSlNfVGhyb3dJbnRlcm5hbEVycm9yKGN0eCwgImRzdCBub3QgYW4gYXJyYXkhIik7CgogIGlmKGFyZ2MgPj0gMikKICAgIEpTX1RvRmxvYXQ2NChjdHgsICZhbHBoYSwgYXJndlsxXSk7CiAgaWYoYXJnYyA+PSA0KQogICAgSlNfVG9GbG9hdDY0KGN0eCwgJmJldGEsIGFyZ3ZbM10pOwogIGlmKGFyZ2MgPj0gNSkKICAgIEpTX1RvRmxvYXQ2NChjdHgsICZnYW1tYSwgYXJndls0XSk7CgogIGlmKGFyZ2MgPj0gNykKICAgIEpTX1RvSW50MzIoY3R4LCAmZHR5cGUsIGFyZ3ZbNl0pOwoKICBjdjo6YWRkV2VpZ2h0ZWQoYTEsIGFscGhhLCBhMiwgYmV0YSwgZ2FtbWEsIGRzdCwgZHR5cGUpOwogIHJldHVybiBKU19VTkRFRklORUQ7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX2N2X3Jlc2l6ZShKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2KSB7CiAgSlNJbnB1dE91dHB1dEFycmF5IHNyYywgZHN0OwogIGRvdWJsZSBmeCwgZnk7CiAgSlNTaXplRGF0YTxkb3VibGU+IGRzaXplOwogIGludDMyX3QgaW50ZXJwb2xhdGlvbjsKCiAgc3JjID0ganNfdW1hdF9vcl9tYXQoY3R4LCBhcmd2WzBdKTsKICBkc3QgPSBqc191bWF0X29yX21hdChjdHgsIGFyZ3ZbMV0pOwoKICBpZihqc19pc19ub2FycmF5KHNyYykgfHwganNfaXNfbm9hcnJheShkc3QpKQogICAgcmV0dXJuIEpTX1Rocm93SW50ZXJuYWxFcnJvcihjdHgsICJzcmMgb3IgZHN0IG5vdCBhbiBhcnJheSEiKTsKCiAgaWYoIWpzX3NpemVfcmVhZChjdHgsIGFyZ3ZbMl0sICZkc2l6ZSkgfHwgZHNpemUud2lkdGggPT0gMCB8fCBkc2l6ZS5oZWlnaHQgPT0gMCkgewogICAgdWludDMyX3QgdywgaDsKCiAgICB3ID0gZHN0LmNvbHMoKSA+IDAgPyBkc3QuY29scygpIDogc3JjLmNvbHMoKTsKICAgIGggPSBkc3Qucm93cygpID4gMCA/IGRzdC5yb3dzKCkgOiBzcmMucm93cygpOwoKICAgIGRzaXplID0gSlNTaXplRGF0YTxkb3VibGU+KHcsIGgpOwogIH0KCiAgaWYoYXJnYyA+IDMpCiAgICBKU19Ub0Zsb2F0NjQoY3R4LCAmZngsIGFyZ3ZbM10pOwogIGlmKGFyZ2MgPiA0KQogICAgSlNfVG9GbG9hdDY0KGN0eCwgJmZ5LCBhcmd2WzRdKTsKICBpZihhcmdjID4gNSkKICAgIEpTX1RvSW50MzIoY3R4LCAmaW50ZXJwb2xhdGlvbiwgYXJndls1XSk7CgogIGN2OjpyZXNpemUoc3JjLCBkc3QsIGRzaXplLCBmeCwgZnksIGludGVycG9sYXRpb24pOwoKICByZXR1cm4gSlNfVU5ERUZJTkVEOwp9CgpzdGF0aWMgSlNWYWx1ZQpqc19jdl9za2VsZXRvbml6YXRpb24oSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCogYXJndikgewogIEpTSW5wdXRPdXRwdXRBcnJheSBzcmMsIGRzdDsKICBjdjo6TWF0IG91dHB1dDsKICBzcmMgPSBqc191bWF0X29yX21hdChjdHgsIGFyZ3ZbMF0pOwogIGRzdCA9IGpzX3VtYXRfb3JfbWF0KGN0eCwgYXJndlsxXSk7CgogIGlmKGpzX2lzX25vYXJyYXkoc3JjKSB8fCBqc19pc19ub2FycmF5KGRzdCkpCiAgICByZXR1cm4gSlNfVGhyb3dJbnRlcm5hbEVycm9yKGN0eCwgInNyYyBvciBkc3Qgbm90IGFuIGFycmF5ISIpOwoKICBvdXRwdXQgPSBza2VsZXRvbml6YXRpb24oc3JjKTsKICBvdXRwdXQuY29weVRvKGRzdCk7CgogIHJldHVybiBKU19VTkRFRklORUQ7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX2N2X3BpeGVsX25laWdoYm9yaG9vZChKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2LCBpbnQgbWFnaWMpIHsKICBKU01hdERhdGEqIHNyYzsKICBKU091dHB1dEFycmF5IGRzdDsKICBjdjo6TWF0IG91dHB1dDsKICBpbnQgY291bnQ7CgogIHNyYyA9IGpzX21hdF9kYXRhKGN0eCwgYXJndlswXSk7CiAgZHN0ID0ganNfdW1hdF9vcl9tYXQoY3R4LCBhcmd2WzFdKTsKCiAgaWYoc3JjID09IG51bGxwdHIgfHwganNfaXNfbm9hcnJheShkc3QpKQogICAgcmV0dXJuIEpTX1Rocm93SW50ZXJuYWxFcnJvcihjdHgsICJzcmMgb3IgZHN0IG5vdCBhbiBhcnJheSEiKTsKCiAgaWYoYXJnYyA+IDIpIHsKICAgIGludDMyX3QgY291bnQ7CgogICAgSlNfVG9JbnQzMihjdHgsICZjb3VudCwgYXJndlsyXSk7CiAgICBvdXRwdXQgPSBtYWdpYyA/IHBpeGVsX25laWdoYm9yaG9vZF9jcm9zc19pZigqc3JjLCBjb3VudCkgOiBwaXhlbF9uZWlnaGJvcmhvb2RfaWYoKnNyYywgY291bnQpOwogIH0gZWxzZSB7CiAgICBvdXRwdXQgPSBtYWdpYyA/IHBpeGVsX25laWdoYm9yaG9vZF9jcm9zcygqc3JjKSA6IHBpeGVsX25laWdoYm9yaG9vZCgqc3JjKTsKICB9CgogIGRzdC5nZXRNYXRSZWYoKSA9IG91dHB1dDsKICAvLyAgb3V0cHV0LmNvcHlUbygpOwoKICByZXR1cm4gSlNfVU5ERUZJTkVEOwp9CgpzdGF0aWMgSlNWYWx1ZQpqc19jdl9waXhlbF9maW5kX3ZhbHVlKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QqIGFyZ3YpIHsKICBKU01hdERhdGEqIHNyYzsKICBzdGQ6OnZlY3RvcjxKU1BvaW50RGF0YTxpbnQ+PiBvdXRwdXQ7CiAgdWludDMyX3QgdmFsdWU7CgogIHNyYyA9IGpzX21hdF9kYXRhKGN0eCwgYXJndlswXSk7CgogIGlmKHNyYyA9PSBudWxscHRyKQogICAgcmV0dXJuIEpTX1Rocm93SW50ZXJuYWxFcnJvcihjdHgsICJzcmMgbm90IGFuIGFycmF5ISIpOwoKICBKU19Ub1VpbnQzMihjdHgsICZ2YWx1ZSwgYXJndlsxXSk7CiAgb3V0cHV0ID0gcGl4ZWxfZmluZF92YWx1ZSgqc3JjLCB2YWx1ZSk7CgogIHJldHVybiBqc19hcnJheV9mcm9tKGN0eCwgb3V0cHV0KTsKfQoKc3RhdGljIEpTVmFsdWUKanNfY3ZfcGFsZXR0ZV9hcHBseShKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2KSB7CiAgSlNNYXREYXRhKiBzcmM7CiAgSlNPdXRwdXRBcnJheSBkc3Q7CiAgc3RkOjphcnJheTx1aW50MzJfdCwgMjU2PiBwYWxldHRlMzI7CiAgc3RkOjp2ZWN0b3I8Y3Y6OlZlYzNiPiBwYWxldHRlOwoKICBzcmMgPSBqc19tYXRfZGF0YShjdHgsIGFyZ3ZbMF0pOwogIGRzdCA9IGpzX3VtYXRfb3JfbWF0KGN0eCwgYXJndlsxXSk7CgogIGlmKHNyYyA9PSBudWxscHRyIHx8IGpzX2lzX25vYXJyYXkoZHN0KSkKICAgIHJldHVybiBKU19UaHJvd0ludGVybmFsRXJyb3IoY3R4LCAic3JjIG9yIGRzdCBub3QgYW4gYXJyYXkhIik7CgogIHsKICAgIGN2OjpNYXQmIG91dHB1dCA9IGRzdC5nZXRNYXRSZWYoKTsKICAgIGludCBjaGFubmVscyA9IG91dHB1dC5jaGFubmVscygpOwoKICAgIHN0ZDo6Y291dCA8PCAib3V0cHV0LmNoYW5uZWxzKCkgPSAiIDw8IGNoYW5uZWxzIDw8IHN0ZDo6ZW5kbDsKICAgIC8qaWYoanNfaXNfdHlwZWRhcnJheShjdHgsIGFyZ3ZbMl0pKSB7CiAgICAgIHJldHVybiBKU19UaHJvd0ludGVybmFsRXJyb3IoY3R4LCAidHlwZWQgYXJyYXkgbm90IGhhbmRsZWQiKTsKICAgIH0gZWxzZSovCgogICAgaWYoY2hhbm5lbHMgPT0gMSkKICAgICAgY2hhbm5lbHMgPSAzOwoKICAgIGlmKGNoYW5uZWxzID09IDQpIHsKICAgICAgc3RkOjp2ZWN0b3I8SlNDb2xvckRhdGE8dWludDhfdD4+IHBhbGV0dGU7CiAgICAgIHN0ZDo6dmVjdG9yPGN2OjpWZWM0Yj4gcGFsZXR0ZTRiOwogICAgICBzdGQ6OnZlY3Rvcjxjdjo6U2NhbGFyPiBwYWxldHRlc2M7CgogICAgICBqc19hcnJheV90byhjdHgsIGFyZ3ZbMl0sIHBhbGV0dGUpOwoKICAgICAgZm9yKGF1dG8mIGNvbG9yIDogcGFsZXR0ZSkgewogICAgICAgIHBhbGV0dGU0Yi5wdXNoX2JhY2soY3Y6OlZlYzRiKGNvbG9yLmFyclswXSwgY29sb3IuYXJyWzFdLCBjb2xvci5hcnJbMl0sIGNvbG9yLmFyclszXSkpOwogICAgICAgIHBhbGV0dGVzYy5wdXNoX2JhY2soY3Y6OlNjYWxhcihjb2xvci5hcnJbMF0sIGNvbG9yLmFyclsxXSwgY29sb3IuYXJyWzJdLCBjb2xvci5hcnJbM10pKTsKICAgICAgfQoKICAgICAgcGFsZXR0ZV9hcHBseTxjdjo6VmVjNGI+KCpzcmMsIGRzdCwgJnBhbGV0dGU0YlswXSk7CgogICAgfSBlbHNlIGlmKGNoYW5uZWxzID09IDMpIHsKICAgICAgc3RkOjp2ZWN0b3I8SlNDb2xvckRhdGE8dWludDhfdD4+IHBhbGV0dGU7CiAgICAgIHN0ZDo6dmVjdG9yPGN2OjpWZWMzYj4gcGFsZXR0ZTNiOwogICAgICBzdGQ6OnZlY3Rvcjxjdjo6U2NhbGFyPiBwYWxldHRlc2M7CgogICAgICBqc19hcnJheV90byhjdHgsIGFyZ3ZbMl0sIHBhbGV0dGUpOwoKICAgICAgZm9yKGF1dG8mIGNvbG9yIDogcGFsZXR0ZSkgewogICAgICAgIHBhbGV0dGUzYi5wdXNoX2JhY2soY3Y6OlZlYzNiKGNvbG9yLmFyclsyXSwgY29sb3IuYXJyWzFdLCBjb2xvci5hcnJbMF0pKTsKICAgICAgICBwYWxldHRlc2MucHVzaF9iYWNrKGN2OjpTY2FsYXIoY29sb3IuYXJyWzJdLCBjb2xvci5hcnJbMV0sIGNvbG9yLmFyclswXSkpOwogICAgICB9CgogICAgICBwYWxldHRlX2FwcGx5PGN2OjpWZWMzYj4oKnNyYywgZHN0LCAmcGFsZXR0ZTNiWzBdKTsKICAgIH0gZWxzZSB7CiAgICAgIHJldHVybiBKU19UaHJvd0ludGVybmFsRXJyb3IoY3R4LCAib3V0cHV0IG1hdCBjaGFubmVscyA9ICV1Iiwgb3V0cHV0LmNoYW5uZWxzKCkpOwogICAgfQogIH0KICByZXR1cm4gSlNfVU5ERUZJTkVEOwp9CgplbnVtIHsgTUFUX0NPVU5UTk9OWkVSTyA9IDAsIE1BVF9GSU5ETk9OWkVSTywgTUFUX0hDT05DQVQsIE1BVF9WQ09OQ0FUIH07CgpzdGF0aWMgSlNWYWx1ZQpqc19jdl9tYXRfZnVuY3Rpb25zKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QqIGFyZ3YsIGludCBtYWdpYykgewogIEpTVmFsdWUgcmV0ID0gSlNfVU5ERUZJTkVEOwogIEpTSW5wdXRPdXRwdXRBcnJheSBtYXQ7CiAgbWF0ID0ganNfdW1hdF9vcl9tYXQoY3R4LCBhcmd2WzBdKTsKCiAgaWYoanNfaXNfbm9hcnJheShtYXQpKQogICAgcmV0dXJuIEpTX1Rocm93SW50ZXJuYWxFcnJvcihjdHgsICJtYXQgbm90IGFuIGFycmF5ISIpOwoKICBzd2l0Y2gobWFnaWMpIHsKICAgIGNhc2UgTUFUX0NPVU5UTk9OWkVSTzogewogICAgICByZXQgPSBKU19OZXdJbnQ2NChjdHgsIGN2Ojpjb3VudE5vblplcm8obWF0KSk7CiAgICAgIGJyZWFrOwogICAgfQogICAgY2FzZSBNQVRfRklORE5PTlpFUk86IHsKICAgICAgc3RkOjp2ZWN0b3I8SlNQb2ludERhdGE8aW50Pj4gb3V0cHV0OwogICAgICBjdjo6ZmluZE5vblplcm8obWF0LCBvdXRwdXQpOwogICAgICByZXQgPSBqc19hcnJheV9mcm9tKGN0eCwgb3V0cHV0KTsKICAgICAgYnJlYWs7CiAgICB9CiAgICBjYXNlIE1BVF9IQ09OQ0FUOiB7CiAgICAgIHN0ZDo6dmVjdG9yPGN2OjpNYXQ+IGE7CiAgICAgIEpTSW5wdXRPdXRwdXRBcnJheSBkc3Q7CiAgICAgIGlmKGpzX2lzX25vYXJyYXkoKGRzdCA9IGpzX3VtYXRfb3JfbWF0KGN0eCwgYXJndlsxXSkpKSkKICAgICAgICByZXR1cm4gSlNfVGhyb3dJbnRlcm5hbEVycm9yKGN0eCwgImRzdCBub3QgYW4gYXJyYXkhIik7CgogICAgICBqc19hcnJheV90byhjdHgsIGFyZ3ZbMF0sIGEpOwogICAgICBjdjo6aGNvbmNhdChhLmRhdGEoKSwgYS5zaXplKCksIGRzdCk7CiAgICAgIGJyZWFrOwogICAgfQogICAgY2FzZSBNQVRfVkNPTkNBVDogewogICAgICBzdGQ6OnZlY3Rvcjxjdjo6TWF0PiBhOwogICAgICBKU0lucHV0T3V0cHV0QXJyYXkgZHN0OwogICAgICBpZihqc19pc19ub2FycmF5KChkc3QgPSBqc191bWF0X29yX21hdChjdHgsIGFyZ3ZbMV0pKSkpCiAgICAgICAgcmV0dXJuIEpTX1Rocm93SW50ZXJuYWxFcnJvcihjdHgsICJkc3Qgbm90IGFuIGFycmF5ISIpOwoKICAgICAganNfYXJyYXlfdG8oY3R4LCBhcmd2WzBdLCBhKTsKICAgICAgY3Y6OnZjb25jYXQoYS5kYXRhKCksIGEuc2l6ZSgpLCBkc3QpOwogICAgICBicmVhazsKICAgIH0KICB9CiAgcmV0dXJuIHJldDsKfQoKc3RhdGljIEpTVmFsdWUKanNfY3ZfZXF1YWxpemVfaGlzdChKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2KSB7CiAgSlNJbnB1dE91dHB1dEFycmF5IHNyYywgZHN0OwogIHNyYyA9IGpzX3VtYXRfb3JfbWF0KGN0eCwgYXJndlswXSk7CiAgZHN0ID0ganNfdW1hdF9vcl9tYXQoY3R4LCBhcmd2WzFdKTsKCiAgaWYoanNfaXNfbm9hcnJheShzcmMpIHx8IGpzX2lzX25vYXJyYXkoZHN0KSkKICAgIHJldHVybiBKU19UaHJvd0ludGVybmFsRXJyb3IoY3R4LCAic3JjIG9yIGRzdCBub3QgYW4gYXJyYXkhIik7CgogIGN2OjplcXVhbGl6ZUhpc3Qoc3JjLCBkc3QpOwogIHJldHVybiBKU19VTkRFRklORUQ7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX2N2X2NvbnZlcnRfc2NhbGVfYWJzKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QqIGFyZ3YpIHsKCiAgSlNJbnB1dE91dHB1dEFycmF5IHNyYywgZHN0OwogIGRvdWJsZSBhbHBoYSA9IDEsIGJldGEgPSAwOwoKICBzcmMgPSBqc191bWF0X29yX21hdChjdHgsIGFyZ3ZbMF0pOwogIGRzdCA9IGpzX3VtYXRfb3JfbWF0KGN0eCwgYXJndlsxXSk7CgogIGlmKGpzX2lzX25vYXJyYXkoc3JjKSB8fCBqc19pc19ub2FycmF5KGRzdCkpCiAgICByZXR1cm4gSlNfVGhyb3dJbnRlcm5hbEVycm9yKGN0eCwgInNyYyBvciBkc3Qgbm90IGFuIGFycmF5ISIpOwoKICBpZihhcmdjID49IDMpCiAgICBKU19Ub0Zsb2F0NjQoY3R4LCAmYWxwaGEsIGFyZ3ZbMl0pOwogIGlmKGFyZ2MgPj0gNCkKICAgIEpTX1RvRmxvYXQ2NChjdHgsICZiZXRhLCBhcmd2WzNdKTsKCiAgY3Y6OmNvbnZlcnRTY2FsZUFicyhzcmMsIGRzdCwgYWxwaGEsIGJldGEpOwogIHJldHVybiBKU19VTkRFRklORUQ7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX2N2X3RocmVzaG9sZChKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2KSB7CiAgSlNJbnB1dE91dHB1dEFycmF5IHNyYywgZHN0OwogIGRvdWJsZSB0aHJlc2gsIG1heHZhbDsKICBpbnQzMl90IHR5cGU7CgogIHNyYyA9IGpzX3VtYXRfb3JfbWF0KGN0eCwgYXJndlswXSk7CiAgZHN0ID0ganNfdW1hdF9vcl9tYXQoY3R4LCBhcmd2WzFdKTsKCiAgaWYoanNfaXNfbm9hcnJheShzcmMpIHx8IGpzX2lzX25vYXJyYXkoZHN0KSkKICAgIHJldHVybiBKU19UaHJvd0ludGVybmFsRXJyb3IoY3R4LCAic3JjIG9yIGRzdCBub3QgYW4gYXJyYXkhIik7CgogIEpTX1RvRmxvYXQ2NChjdHgsICZ0aHJlc2gsIGFyZ3ZbMl0pOwogIEpTX1RvRmxvYXQ2NChjdHgsICZtYXh2YWwsIGFyZ3ZbM10pOwogIEpTX1RvSW50MzIoY3R4LCAmdHlwZSwgYXJndls0XSk7CgogIGN2Ojp0aHJlc2hvbGQoc3JjLCBkc3QsIHRocmVzaCwgbWF4dmFsLCB0eXBlKTsKICByZXR1cm4gSlNfVU5ERUZJTkVEOwp9CgpzdGF0aWMgSlNWYWx1ZQpqc19jdl9iaWxhdGVyYWxfZmlsdGVyKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QqIGFyZ3YpIHsKICBKU0lucHV0T3V0cHV0QXJyYXkgc3JjLCBkc3Q7CiAgZG91YmxlIHNpZ21hQ29sb3IsIHNpZ21hU3BhY2U7CiAgaW50MzJfdCBkLCBib3JkZXJUeXBlID0gY3Y6OkJPUkRFUl9ERUZBVUxUOwoKICBzcmMgPSBqc191bWF0X29yX21hdChjdHgsIGFyZ3ZbMF0pOwogIGRzdCA9IGpzX3VtYXRfb3JfbWF0KGN0eCwgYXJndlsxXSk7CgogIGlmKGpzX2lzX25vYXJyYXkoc3JjKSB8fCBqc19pc19ub2FycmF5KGRzdCkpCiAgICByZXR1cm4gSlNfVGhyb3dJbnRlcm5hbEVycm9yKGN0eCwgInNyYyBvciBkc3Qgbm90IGFuIGFycmF5ISIpOwoKICBKU19Ub0ludDMyKGN0eCwgJmQsIGFyZ3ZbMl0pOwoKICBKU19Ub0Zsb2F0NjQoY3R4LCAmc2lnbWFDb2xvciwgYXJndlszXSk7CiAgSlNfVG9GbG9hdDY0KGN0eCwgJnNpZ21hU3BhY2UsIGFyZ3ZbNF0pOwoKICBpZihhcmdjID49IDYpCiAgICBKU19Ub0ludDMyKGN0eCwgJmJvcmRlclR5cGUsIGFyZ3ZbNV0pOwoKICBjdjo6YmlsYXRlcmFsRmlsdGVyKHNyYywgZHN0LCBkLCBzaWdtYUNvbG9yLCBzaWdtYVNwYWNlLCBib3JkZXJUeXBlKTsKICByZXR1cm4gSlNfVU5ERUZJTkVEOwp9CgpzdGF0aWMgSlNWYWx1ZQpqc19jdl9jYWxjX2hpc3QoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCogYXJndikgewogIHN0ZDo6dmVjdG9yPGN2OjpNYXQ+IGltYWdlczsKICBzdGQ6OnZlY3RvcjxpbnQ+IGNoYW5uZWxzLCBoaXN0U2l6ZTsKICBzdGQ6OnZlY3RvcjxzdGQ6OnZlY3RvcjxmbG9hdD4+IHJhbmdlczsKCiAgY3Y6Ok1hdCAqbWFzaywgKmhpc3Q7CiAgaW50MzJfdCBkaW1zOwogIGJvb2wgdW5pZm9ybSA9IHRydWUsIGFjY3VtdWxhdGUgPSBmYWxzZTsKCiAgaWYoanNfYXJyYXlfdG8oY3R4LCBhcmd2WzBdLCBpbWFnZXMpID09IC0xKQogICAgcmV0dXJuIEpTX0VYQ0VQVElPTjsKCiAgaWYoanNfYXJyYXlfdG8oY3R4LCBhcmd2WzFdLCBjaGFubmVscykgPT0gLTEpCiAgICByZXR1cm4gSlNfRVhDRVBUSU9OOwogIG1hc2sgPSBqc19tYXRfZGF0YShjdHgsIGFyZ3ZbMl0pOwogIGhpc3QgPSBqc19tYXRfZGF0YShjdHgsIGFyZ3ZbM10pOwoKICBpZihtYXNrID09IG51bGxwdHIgfHwgaGlzdCA9PSBudWxscHRyIHx8IGFyZ2MgPCA4KQogICAgcmV0dXJuIEpTX0VYQ0VQVElPTjsKICBKU19Ub0ludDMyKGN0eCwgJmRpbXMsIGFyZ3ZbNF0pOwoKICBpZihqc19hcnJheV90byhjdHgsIGFyZ3ZbNV0sIGhpc3RTaXplKSA9PSAtMSkKICAgIHJldHVybiBKU19FWENFUFRJT047CgogIGlmKGpzX2FycmF5X3RvKGN0eCwgYXJndls2XSwgcmFuZ2VzKSA9PSAtMSkKICAgIHJldHVybiBKU19FWENFUFRJT047CgogIGlmKGFyZ2MgPj0gOCkKICAgIHVuaWZvcm0gPSBKU19Ub0Jvb2woY3R4LCBhcmd2WzddKTsKICBpZihhcmdjID49IDkpCiAgICBhY2N1bXVsYXRlID0gSlNfVG9Cb29sKGN0eCwgYXJndls4XSk7CgogIHsKICAgIHN0ZDo6dmVjdG9yPGNvbnN0IGZsb2F0Kj4gcmFuZ2VQdHIocmFuZ2VzLnNpemUoKSk7CgogICAgZm9yKHNpemVfdCBpID0gMDsgaSA8IHJhbmdlcy5zaXplKCk7IGkrKykgewogICAgICBpZihyYW5nZXNbaV0uc2l6ZSgpIDwgMikKICAgICAgICByYW5nZXNbaV0ucmVzaXplKDIpOwoKICAgICAgcmFuZ2VQdHJbaV0gPSByYW5nZXNbaV0uZGF0YSgpOwogICAgfQoKICAgIGN2OjpjYWxjSGlzdChjb25zdF9jYXN0PGNvbnN0IGN2OjpNYXQqPihpbWFnZXMuZGF0YSgpKSwKICAgICAgICAgICAgICAgICBpbWFnZXMuc2l6ZSgpLAogICAgICAgICAgICAgICAgIGNoYW5uZWxzLmRhdGEoKSwKICAgICAgICAgICAgICAgICAqbWFzaywKICAgICAgICAgICAgICAgICAqaGlzdCwKICAgICAgICAgICAgICAgICBkaW1zLAogICAgICAgICAgICAgICAgIGhpc3RTaXplLmRhdGEoKSwKICAgICAgICAgICAgICAgICByYW5nZVB0ci5kYXRhKCksCiAgICAgICAgICAgICAgICAgdW5pZm9ybSwKICAgICAgICAgICAgICAgICBhY2N1bXVsYXRlKTsKICB9CiAgcmV0dXJuIEpTX1VOREVGSU5FRDsKfQoKc3RhdGljIEpTVmFsdWUKanNfY3ZfbW9ycGhvbG9neShKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2LCBpbnQgbWFnaWMpIHsKICBKU0lucHV0T3V0cHV0QXJyYXkgc3JjLCBkc3QsIGtlcm5lbDsKICBKU1BvaW50RGF0YTxkb3VibGU+IGFuY2hvciA9IGN2OjpQb2ludCgtMSwgLTEpOwogIGludDMyX3QgaXRlcmF0aW9ucyA9IDEsIGJvcmRlclR5cGUgPSBjdjo6Qk9SREVSX0NPTlNUQU5UOwogIGN2OjpTY2FsYXIgYm9yZGVyVmFsdWUgPSBjdjo6bW9ycGhvbG9neURlZmF1bHRCb3JkZXJWYWx1ZSgpOwoKICBzcmMgPSBqc191bWF0X29yX21hdChjdHgsIGFyZ3ZbMF0pOwogIGRzdCA9IGpzX3VtYXRfb3JfbWF0KGN0eCwgYXJndlsxXSk7CiAga2VybmVsID0ganNfY3ZfaW5wdXRvdXRwdXRhcnJheShjdHgsIGFyZ3ZbMl0pOwoKICBpZihqc19pc19ub2FycmF5KHNyYykgfHwganNfaXNfbm9hcnJheShkc3QpIHx8IGpzX2lzX25vYXJyYXkoa2VybmVsKSB8fCBhcmdjIDwgMykKICAgIHJldHVybiBKU19UaHJvd0ludGVybmFsRXJyb3IoY3R4LCAic3JjIG9yIGRzdCBvciBrZXJuZWwgbm90IGFuIGFycmF5ISIpOwoKICBpZihhcmdjID49IDQpCiAgICBpZighanNfcG9pbnRfcmVhZChjdHgsIGFyZ3ZbM10sICZhbmNob3IpKQogICAgICByZXR1cm4gSlNfRVhDRVBUSU9OOwoKICBpZihhcmdjID49IDUpCiAgICBKU19Ub0ludDMyKGN0eCwgJml0ZXJhdGlvbnMsIGFyZ3ZbNF0pOwoKICBpZihhcmdjID49IDYpCiAgICBKU19Ub0ludDMyKGN0eCwgJmJvcmRlclR5cGUsIGFyZ3ZbNV0pOwoKICBpZihhcmdjID49IDcpIHsKICAgIHN0ZDo6dmVjdG9yPGRvdWJsZT4gdmFsdWU7CiAgICBpZighanNfaXNfYXJyYXkoY3R4LCBhcmd2WzZdKSkKICAgICAgcmV0dXJuIEpTX0VYQ0VQVElPTjsKCiAgICBqc19hcnJheV90byhjdHgsIGFyZ3ZbNl0sIHZhbHVlKTsKICAgIGJvcmRlclZhbHVlID0gY3Y6OlNjYWxhcih2YWx1ZVswXSwgdmFsdWVbMV0sIHZhbHVlWzJdLCB2YWx1ZVszXSk7CiAgfQoKICBzd2l0Y2gobWFnaWMpIHsKICAgIGNhc2UgMDogY3Y6OmRpbGF0ZShzcmMsIGRzdCwga2VybmVsLCBhbmNob3IsIGl0ZXJhdGlvbnMsIGJvcmRlclR5cGUsIGJvcmRlclZhbHVlKTsgYnJlYWs7CiAgICBjYXNlIDE6IGN2Ojplcm9kZShzcmMsIGRzdCwga2VybmVsLCBhbmNob3IsIGl0ZXJhdGlvbnMsIGJvcmRlclR5cGUsIGJvcmRlclZhbHVlKTsgYnJlYWs7CiAgfQoKICByZXR1cm4gSlNfVU5ERUZJTkVEOwp9CgpzdGF0aWMgSlNWYWx1ZQpqc19jdl9tb3JwaG9sb2d5X2V4KEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QqIGFyZ3YpIHsKCiAgSlNJbnB1dE91dHB1dEFycmF5IHNyYywgZHN0LCBrZXJuZWw7CiAgSlNQb2ludERhdGE8ZG91YmxlPiBhbmNob3IgPSBjdjo6UG9pbnQoLTEsIC0xKTsKCiAgaW50MzJfdCBvcCwgaXRlcmF0aW9ucyA9IDEsIGJvcmRlclR5cGUgPSBjdjo6Qk9SREVSX0NPTlNUQU5UOwogIGN2OjpTY2FsYXIgYm9yZGVyVmFsdWUgPSBjdjo6bW9ycGhvbG9neURlZmF1bHRCb3JkZXJWYWx1ZSgpOwoKICBzcmMgPSBqc191bWF0X29yX21hdChjdHgsIGFyZ3ZbMF0pOwogIGRzdCA9IGpzX3VtYXRfb3JfbWF0KGN0eCwgYXJndlsxXSk7CgogIEpTX1RvSW50MzIoY3R4LCAmb3AsIGFyZ3ZbMl0pOwogIGtlcm5lbCA9IGpzX3VtYXRfb3JfbWF0KGN0eCwgYXJndlszXSk7CgogIGlmKGpzX2lzX25vYXJyYXkoc3JjKSB8fCBqc19pc19ub2FycmF5KGRzdCkgfHwganNfaXNfbm9hcnJheShrZXJuZWwpIHx8IGFyZ2MgPCAzKQogICAgcmV0dXJuIEpTX1Rocm93SW50ZXJuYWxFcnJvcihjdHgsICJzcmMgb3IgZHN0IG9yIGtlcm5lbCBub3QgYW4gYXJyYXkhIik7CgogIGlmKGFyZ2MgPj0gNSkKICAgIGlmKCFqc19wb2ludF9yZWFkKGN0eCwgYXJndls0XSwgJmFuY2hvcikpCiAgICAgIHJldHVybiBKU19FWENFUFRJT047CgogIGlmKGFyZ2MgPj0gNikKICAgIEpTX1RvSW50MzIoY3R4LCAmaXRlcmF0aW9ucywgYXJndls1XSk7CgogIGlmKGFyZ2MgPj0gNykKICAgIEpTX1RvSW50MzIoY3R4LCAmYm9yZGVyVHlwZSwgYXJndls2XSk7CgogIGlmKGFyZ2MgPj0gOCkgewogICAgc3RkOjp2ZWN0b3I8ZG91YmxlPiB2YWx1ZTsKICAgIGlmKCFqc19pc19hcnJheShjdHgsIGFyZ3ZbN10pKQogICAgICByZXR1cm4gSlNfRVhDRVBUSU9OOwoKICAgIGpzX2FycmF5X3RvKGN0eCwgYXJndls3XSwgdmFsdWUpOwogICAgYm9yZGVyVmFsdWUgPSBjdjo6U2NhbGFyKHZhbHVlWzBdLCB2YWx1ZVsxXSwgdmFsdWVbMl0sIHZhbHVlWzNdKTsKICB9CgogIGN2Ojptb3JwaG9sb2d5RXgoc3JjLCBkc3QsIG9wLCBrZXJuZWwsIGFuY2hvciwgaXRlcmF0aW9ucywgYm9yZGVyVHlwZSwgYm9yZGVyVmFsdWUpOwogIHJldHVybiBKU19VTkRFRklORUQ7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX2N2X2dldF9zdHJ1Y3R1cmluZ19lbGVtZW50KEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QqIGFyZ3YpIHsKICBpbnQzMl90IHNoYXBlOwogIEpTU2l6ZURhdGE8ZG91YmxlPiBrc2l6ZTsKICBKU1BvaW50RGF0YTxkb3VibGU+IGFuY2hvciA9IGN2OjpQb2ludCgtMSwgLTEpOwoKICBpZihhcmdjIDwgMikKICAgIHJldHVybiBKU19FWENFUFRJT047CgogIGlmKEpTX1RvSW50MzIoY3R4LCAmc2hhcGUsIGFyZ3ZbMF0pID09IC0xKQogICAgcmV0dXJuIEpTX0VYQ0VQVElPTjsKCiAgaWYoIWpzX3NpemVfcmVhZChjdHgsIGFyZ3ZbMV0sICZrc2l6ZSkpCiAgICByZXR1cm4gSlNfRVhDRVBUSU9OOwogIGlmKGFyZ2MgPj0gMykKICAgIGlmKCFqc19wb2ludF9yZWFkKGN0eCwgYXJndlsyXSwgJmFuY2hvcikpCiAgICAgIHJldHVybiBKU19FWENFUFRJT047CgogIHJldHVybiBqc19tYXRfd3JhcChjdHgsIGN2OjpnZXRTdHJ1Y3R1cmluZ0VsZW1lbnQoc2hhcGUsIGtzaXplLCBhbmNob3IpKTsKfQoKc3RhdGljIEpTVmFsdWUKanNfY3ZfbWVkaWFuX2JsdXIoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCogYXJndikgewogIEpTSW5wdXRPdXRwdXRBcnJheSBzcmMsIGRzdDsKICBpbnQzMl90IGtzaXplOwoKICBzcmMgPSBqc191bWF0X29yX21hdChjdHgsIGFyZ3ZbMF0pOwogIGRzdCA9IGpzX3VtYXRfb3JfbWF0KGN0eCwgYXJndlsxXSk7CgogIGlmKGpzX2lzX25vYXJyYXkoc3JjKSB8fCBqc19pc19ub2FycmF5KGRzdCkpCiAgICByZXR1cm4gSlNfVGhyb3dJbnRlcm5hbEVycm9yKGN0eCwgInNyYyBvciBkc3Qgbm90IGFuIGFycmF5ISIpOwoKICBKU19Ub0ludDMyKGN0eCwgJmtzaXplLCBhcmd2WzJdKTsKCiAgYXNzZXJ0KGtzaXplID49IDEpOwogIGFzc2VydChrc2l6ZSAlIDIgPT0gMSk7CgogIGN2OjptZWRpYW5CbHVyKHNyYywgZHN0LCBrc2l6ZSk7CiAgcmV0dXJuIEpTX1VOREVGSU5FRDsKfQoKc3RhdGljIEpTVmFsdWUKanNfY3ZfbWVyZ2UoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCogYXJndikgewogIHN0ZDo6dmVjdG9yPGN2OjpNYXQ+IG12OwogIGN2OjpNYXQqIGRzdDsKCiAgaWYoanNfYXJyYXlfdG8oY3R4LCBhcmd2WzBdLCBtdikgPT0gLTEpCiAgICByZXR1cm4gSlNfRVhDRVBUSU9OOwoKICBkc3QgPSBqc19tYXRfZGF0YShjdHgsIGFyZ3ZbMV0pOwoKICBpZihkc3QgPT0gbnVsbHB0cikKICAgIHJldHVybiBKU19FWENFUFRJT047CgogIGN2OjptZXJnZShjb25zdF9jYXN0PGNvbnN0IGN2OjpNYXQqPihtdi5kYXRhKCkpLCBtdi5zaXplKCksICpkc3QpOwoKICByZXR1cm4gSlNfVU5ERUZJTkVEOwp9CgpzdGF0aWMgSlNWYWx1ZQpqc19jdl9taXhfY2hhbm5lbHMoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCogYXJndikgewogIHN0ZDo6dmVjdG9yPGN2OjpNYXQ+IHNyY3MsIGRzdHM7CiAgc3RkOjp2ZWN0b3I8aW50PiBmcm9tVG87CgogIGN2OjpNYXQqIGRzdDsKCiAgaWYoanNfYXJyYXlfdG8oY3R4LCBhcmd2WzBdLCBzcmNzKSA9PSAtMSkKICAgIHJldHVybiBKU19FWENFUFRJT047CiAgaWYoanNfYXJyYXlfdG8oY3R4LCBhcmd2WzFdLCBkc3RzKSA9PSAtMSkKICAgIHJldHVybiBKU19FWENFUFRJT047CgogIGlmKGpzX2FycmF5X3RvKGN0eCwgYXJndlsyXSwgZnJvbVRvKSA9PSAtMSkKICAgIHJldHVybiBKU19FWENFUFRJT047CgogIGN2OjptaXhDaGFubmVscygKICAgICAgY29uc3RfY2FzdDxjb25zdCBjdjo6TWF0Kj4oc3Jjcy5kYXRhKCkpLCBzcmNzLnNpemUoKSwgZHN0cy5kYXRhKCksIGRzdHMuc2l6ZSgpLCBmcm9tVG8uZGF0YSgpLCBmcm9tVG8uc2l6ZSgpID4+IDEpOwoKICByZXR1cm4gSlNfVU5ERUZJTkVEOwp9CgpzdGF0aWMgSlNWYWx1ZQpqc19jdl9taW5fbWF4X2xvYyhKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2KSB7CiAgY3Y6Ok1hdCAqc3JjLCAqbWFzayA9IG51bGxwdHI7CiAgZG91YmxlIG1pblZhbCwgbWF4VmFsOwogIGN2OjpQb2ludCBtaW5Mb2MsIG1heExvYzsKICBKU1ZhbHVlIHJldDsKCiAgc3JjID0ganNfbWF0X2RhdGEoY3R4LCBhcmd2WzBdKTsKCiAgaWYoc3JjID09IG51bGxwdHIpCiAgICByZXR1cm4gSlNfRVhDRVBUSU9OOwoKICBpZihhcmdjID49IDIpCiAgICBpZigobWFzayA9IGpzX21hdF9kYXRhKGN0eCwgYXJndlsxXSkpID09IG51bGxwdHIpCiAgICAgIHJldHVybiBKU19FWENFUFRJT047CgogIGN2OjptaW5NYXhMb2MoKnNyYywgJm1pblZhbCwgJm1heFZhbCwgJm1pbkxvYywgJm1heExvYywgbWFzayA9PSBudWxscHRyID8gY3Y6Om5vQXJyYXkoKSA6ICptYXNrKTsKCiAgcmV0ID0gSlNfTmV3T2JqZWN0KGN0eCk7CiAgSlNfU2V0UHJvcGVydHlTdHIoY3R4LCByZXQsICJtaW5WYWwiLCBKU19OZXdGbG9hdDY0KGN0eCwgbWluVmFsKSk7CiAgSlNfU2V0UHJvcGVydHlTdHIoY3R4LCByZXQsICJtYXhWYWwiLCBKU19OZXdGbG9hdDY0KGN0eCwgbWF4VmFsKSk7CiAgSlNfU2V0UHJvcGVydHlTdHIoY3R4LAogICAgICAgICAgICAgICAgICAgIHJldCwKICAgICAgICAgICAgICAgICAgICAibWluTG9jIiwKICAgICAgICAgICAgICAgICAgICBqc19hcnJheV9mcm9tKGN0eCwgc3RkOjphcnJheTxpbnQsIDI+e21pbkxvYy54LCBtaW5Mb2MueX0pKTsgLy8ganNfcG9pbnRfd3JhcChjdHgsIG1pbkxvYykpOwogIEpTX1NldFByb3BlcnR5U3RyKGN0eCwKICAgICAgICAgICAgICAgICAgICByZXQsCiAgICAgICAgICAgICAgICAgICAgIm1heExvYyIsCiAgICAgICAgICAgICAgICAgICAganNfb2JqZWN0Ojpmcm9tX21hcChjdHgsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGQ6Om1hcDxzdGQ6OnN0cmluZywgaW50PnsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGQ6OnBhaXI8c3RkOjpzdHJpbmcsIGludD57IngiLCBtYXhMb2MueH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RkOjpwYWlyPHN0ZDo6c3RyaW5nLCBpbnQ+eyJ5IiwgbWF4TG9jLnl9fSkpOyAvLyBqc19wb2ludF93cmFwKGN0eCwgbWF4TG9jKSk7CgogIHJldHVybiByZXQ7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX2N2X25hbWVkX3dpbmRvdyhKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2KSB7CiAgY29uc3QgY2hhciogbmFtZTsKICBpbnQzMl90IGZsYWdzID0gY3Y6OldJTkRPV19OT1JNQUw7CiAgbmFtZSA9IEpTX1RvQ1N0cmluZyhjdHgsIGFyZ3ZbMF0pOwoKICBpZihhcmdjID4gMSkKICAgIEpTX1RvSW50MzIoY3R4LCAmZmxhZ3MsIGFyZ3ZbMV0pOwoKICBjdjo6bmFtZWRXaW5kb3cobmFtZSwgZmxhZ3MpOwoKICBpZihzdGQ6OmZpbmQod2luZG93X2xpc3QuY2JlZ2luKCksIHdpbmRvd19saXN0LmNlbmQoKSwgbmFtZSkgPT0gd2luZG93X2xpc3QuY2VuZCgpKQogICAgd2luZG93X2xpc3QucHVzaF9iYWNrKG5hbWUpOwoKICByZXR1cm4gSlNfVU5ERUZJTkVEOwp9CgpzdGF0aWMgSlNWYWx1ZQpqc19jdl9tb3ZlX3dpbmRvdyhKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2KSB7CiAgY29uc3QgY2hhciogbmFtZTsKICBpbnQzMl90IHgsIHk7CiAgSlNQb2ludERhdGE8ZG91YmxlPiBwb2ludDsKICBuYW1lID0gSlNfVG9DU3RyaW5nKGN0eCwgYXJndlswXSk7CgogIGlmKGpzX3BvaW50X3JlYWQoY3R4LCBhcmd2WzFdLCAmcG9pbnQpKSB7CiAgICB4ID0gcG9pbnQueDsKICAgIHkgPSBwb2ludC55OwogIH0gZWxzZSB7CiAgICBKU19Ub0ludDMyKGN0eCwgJngsIGFyZ3ZbMV0pOwogICAgSlNfVG9JbnQzMihjdHgsICZ5LCBhcmd2WzJdKTsKICB9CiAgY3Y6Om1vdmVXaW5kb3cobmFtZSwgeCwgeSk7CiAgcmV0dXJuIEpTX1VOREVGSU5FRDsKfQoKc3RhdGljIEpTVmFsdWUKanNfY3ZfcmVzaXplX3dpbmRvdyhKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2KSB7CiAgY29uc3QgY2hhciogbmFtZTsKICB1aW50MzJfdCB3LCBoOwogIEpTU2l6ZURhdGE8aW50PiBzaXplOwogIG5hbWUgPSBKU19Ub0NTdHJpbmcoY3R4LCBhcmd2WzBdKTsKCiAgaWYoanNfc2l6ZV9yZWFkKGN0eCwgYXJndlsxXSwgJnNpemUpKSB7CiAgICB3ID0gc2l6ZS53aWR0aDsKICAgIGggPSBzaXplLmhlaWdodDsKICB9IGVsc2UgewogICAgSlNfVG9VaW50MzIoY3R4LCAmdywgYXJndlsxXSk7CiAgICBKU19Ub1VpbnQzMihjdHgsICZoLCBhcmd2WzJdKTsKICB9CgogIGN2OjpyZXNpemVXaW5kb3cobmFtZSwgdywgaCk7CiAgcmV0dXJuIEpTX1VOREVGSU5FRDsKfQoKc3RhdGljIEpTVmFsdWUKanNfY3ZfZ2V0X3dpbmRvd19pbWFnZV9yZWN0KEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QqIGFyZ3YpIHsKICBjb25zdCBjaGFyKiBuYW1lOwogIEpTUmVjdERhdGE8aW50PiByZWN0OwogIG5hbWUgPSBKU19Ub0NTdHJpbmcoY3R4LCBhcmd2WzBdKTsKCiAgcmVjdCA9IGN2OjpnZXRXaW5kb3dJbWFnZVJlY3QobmFtZSk7CiAgcmV0dXJuIGpzX3JlY3Rfd3JhcChjdHgsIHJlY3QpOwp9CgpzdGF0aWMgSlNWYWx1ZQpqc19jdl9nZXRfd2luZG93X3Byb3BlcnR5KEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QqIGFyZ3YpIHsKICBjb25zdCBjaGFyKiBuYW1lOwogIGludDMyX3QgcHJvcElkOwogIG5hbWUgPSBKU19Ub0NTdHJpbmcoY3R4LCBhcmd2WzBdKTsKICBKU19Ub0ludDMyKGN0eCwgJnByb3BJZCwgYXJndlsxXSk7CgogIHJldHVybiBKU19OZXdGbG9hdDY0KGN0eCwgY3Y6OmdldFdpbmRvd1Byb3BlcnR5KG5hbWUsIHByb3BJZCkpOwp9CgpzdGF0aWMgSlNWYWx1ZQpqc19jdl9zZXRfd2luZG93X3Byb3BlcnR5KEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QqIGFyZ3YpIHsKICBjb25zdCBjaGFyKiBuYW1lOwogIGludDMyX3QgcHJvcElkOwogIGRvdWJsZSB2YWx1ZTsKICBuYW1lID0gSlNfVG9DU3RyaW5nKGN0eCwgYXJndlswXSk7CiAgSlNfVG9JbnQzMihjdHgsICZwcm9wSWQsIGFyZ3ZbMV0pOwogIEpTX1RvRmxvYXQ2NChjdHgsICZ2YWx1ZSwgYXJndlsyXSk7CiAgY3Y6OnNldFdpbmRvd1Byb3BlcnR5KG5hbWUsIHByb3BJZCwgdmFsdWUpOwogIHJldHVybiBKU19VTkRFRklORUQ7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX2N2X3NldF93aW5kb3dfdGl0bGUoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCogYXJndikgewogIGNvbnN0IGNoYXIgKm5hbWUsICp0aXRsZTsKICBuYW1lID0gSlNfVG9DU3RyaW5nKGN0eCwgYXJndlswXSk7CiAgdGl0bGUgPSBKU19Ub0NTdHJpbmcoY3R4LCBhcmd2WzFdKTsKCiAgY3Y6OnNldFdpbmRvd1RpdGxlKG5hbWUsIHRpdGxlKTsKICByZXR1cm4gSlNfVU5ERUZJTkVEOwp9CgpzdGF0aWMgSlNWYWx1ZQpqc19jdl9kZXN0cm95X3dpbmRvdyhKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2KSB7CiAgY29uc3QgY2hhciogbmFtZTsKICBpbnQzMl90IHByb3BJZDsKICBuYW1lID0gSlNfVG9DU3RyaW5nKGN0eCwgYXJndlswXSk7CgogIGN2OjpkZXN0cm95V2luZG93KG5hbWUpOwogIGF1dG8gaXQgPSBzdGQ6OmZpbmQod2luZG93X2xpc3QuY2JlZ2luKCksIHdpbmRvd19saXN0LmNlbmQoKSwgbmFtZSk7CgogIGlmKGl0ICE9IHdpbmRvd19saXN0LmNlbmQoKSkKICAgIHdpbmRvd19saXN0LmVyYXNlKGl0KTsKCiAgcmV0dXJuIEpTX1VOREVGSU5FRDsKfQoKc3RhdGljIEpTVmFsdWUKanNfY3ZfY3JlYXRlX3RyYWNrYmFyKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QqIGFyZ3YpIHsKICBjb25zdCBjaGFyICpuYW1lLCAqd2luZG93OwogIGludDMyX3QgcmV0LCBjb3VudDsKICBzdHJ1Y3QgVHJhY2tiYXIgewogICAgaW50MzJfdCB2YWx1ZTsKICAgIEpTVmFsdWUgbmFtZSwgd2luZG93LCBjb3VudDsKICAgIEpTVmFsdWVDb25zdCBoYW5kbGVyOwogICAgSlNDb250ZXh0KiBjdHg7CiAgfTsKICBUcmFja2JhciogdXNlcmRhdGE7CgogIG5hbWUgPSBKU19Ub0NTdHJpbmcoY3R4LCBhcmd2WzBdKTsKICB3aW5kb3cgPSBKU19Ub0NTdHJpbmcoY3R4LCBhcmd2WzFdKTsKCiAgaWYobmFtZSA9PSBudWxscHRyIHx8IHdpbmRvdyA9PSBudWxscHRyKQogICAgcmV0dXJuIEpTX0VYQ0VQVElPTjsKCiAgdXNlcmRhdGEgPSBqc19hbGxvY2F0ZTxUcmFja2Jhcj4oY3R4KTsKCiAgSlNfVG9JbnQzMihjdHgsICZ1c2VyZGF0YS0+dmFsdWUsIGFyZ3ZbMl0pOwogIEpTX1RvSW50MzIoY3R4LCAmY291bnQsIGFyZ3ZbM10pOwoKICB1c2VyZGF0YS0+bmFtZSA9IEpTX05ld1N0cmluZyhjdHgsIG5hbWUpOwogIHVzZXJkYXRhLT53aW5kb3cgPSBKU19OZXdTdHJpbmcoY3R4LCB3aW5kb3cpOwogIHVzZXJkYXRhLT5jb3VudCA9IEpTX05ld0ludDMyKGN0eCwgY291bnQpOwogIHVzZXJkYXRhLT5oYW5kbGVyID0gSlNfRHVwVmFsdWUoY3R4LCBhcmd2WzRdKTsKICB1c2VyZGF0YS0+Y3R4ID0gY3R4OwoKICAvKkpTVmFsdWUgc3RyID0gSlNfVG9TdHJpbmcoY3R4LCB1c2VyZGF0YS0+aGFuZGxlcik7CiAgc3RkOjpjb3V0IDw8ICJoYW5kbGVyOiAiIDw8IEpTX1RvQ1N0cmluZyhjdHgsIHN0cikgPDwgc3RkOjplbmRsOyovCgogIHJldCA9IGN2OjpjcmVhdGVUcmFja2JhcigKICAgICAgbmFtZSwKICAgICAgd2luZG93LAogICAgICAmdXNlcmRhdGEtPnZhbHVlLAogICAgICBjb3VudCwKICAgICAgW10oaW50IG5ld1ZhbHVlLCB2b2lkKiBwdHIpIHsKICAgICAgICBUcmFja2JhciBjb25zdCYgZGF0YSA9ICpzdGF0aWNfY2FzdDxUcmFja2Jhcio+KHB0cik7CgogICAgICAgIGlmKEpTX0lzRnVuY3Rpb24oZGF0YS5jdHgsIGRhdGEuaGFuZGxlcikpIHsKICAgICAgICAgIEpTVmFsdWVDb25zdCBhcmd2W10gPSB7SlNfTmV3SW50MzIoZGF0YS5jdHgsIG5ld1ZhbHVlKSwgZGF0YS5jb3VudCwgZGF0YS5uYW1lLCBkYXRhLndpbmRvd307CgogICAgICAgICAgSlNfQ2FsbChkYXRhLmN0eCwgZGF0YS5oYW5kbGVyLCBKU19VTkRFRklORUQsIDQsIGFyZ3YpOwogICAgICAgIH0KICAgICAgfSwKICAgICAgdXNlcmRhdGEpOwoKICByZXR1cm4gSlNfTmV3SW50MzIoY3R4LCByZXQpOwp9CgpzdGF0aWMgSlNWYWx1ZQpqc19jdl9jcmVhdGVfYnV0dG9uKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QqIGFyZ3YpIHsKICBjb25zdCBjaGFyKiBiYXJfbmFtZTsKICBpbnQzMl90IHJldCwgdHlwZTsKICBib29sIGluaXRpYWxfYnV0dG9uX3N0YXRlID0gZmFsc2U7CgogIHN0cnVjdCBCdXR0b24gewogICAgaW50MzJfdCBzdGF0ZTsKICAgIEpTVmFsdWUgYmFyX25hbWUsIHR5cGU7CiAgICBKU1ZhbHVlQ29uc3QgY2FsbGJhY2s7CiAgICBKU0NvbnRleHQqIGN0eDsKICB9OwogIEJ1dHRvbiogdXNlcmRhdGE7CgogIGJhcl9uYW1lID0gSlNfVG9DU3RyaW5nKGN0eCwgYXJndlswXSk7CgogIGlmKGJhcl9uYW1lID09IG51bGxwdHIpCiAgICByZXR1cm4gSlNfRVhDRVBUSU9OOwoKICB1c2VyZGF0YSA9IGpzX2FsbG9jYXRlPEJ1dHRvbj4oY3R4KTsKICB1c2VyZGF0YS0+Y2FsbGJhY2sgPSBKU19EdXBWYWx1ZShjdHgsIGFyZ3ZbMV0pOwoKICBKU19Ub0ludDMyKGN0eCwgJnR5cGUsIGFyZ3ZbMl0pOwogIEpTX1RvSW50MzIoY3R4LCAmdXNlcmRhdGEtPnN0YXRlLCBhcmd2WzNdKTsKCiAgdXNlcmRhdGEtPmJhcl9uYW1lID0gSlNfTmV3U3RyaW5nKGN0eCwgYmFyX25hbWUpOwogIHVzZXJkYXRhLT50eXBlID0gSlNfTmV3SW50MzIoY3R4LCB0eXBlKTsKCiAgdXNlcmRhdGEtPmN0eCA9IGN0eDsKCiAgLy8gaW5pdGlhbF9idXR0b25fc3RhdGUgPSBKU19Ub0Jvb2woY3R4LCBhcmd2WzRdKTsKCiAgLypKU1ZhbHVlIHN0ciA9IEpTX1RvU3RyaW5nKGN0eCwgdXNlcmRhdGEtPmNhbGxiYWNrKTsKICBzdGQ6OmNvdXQgPDwgImNhbGxiYWNrOiAiIDw8IEpTX1RvQ1N0cmluZyhjdHgsIHN0cikgPDwgc3RkOjplbmRsOyovCgogIHJldCA9IGN2OjpjcmVhdGVCdXR0b24oCiAgICAgIGJhcl9uYW1lLAogICAgICBbXShpbnQgc3RhdGUsIHZvaWQqIHB0cikgewogICAgICAgIEJ1dHRvbiBjb25zdCYgZGF0YSA9ICpzdGF0aWNfY2FzdDxCdXR0b24qPihwdHIpOwogICAgICAgIGlmKEpTX0lzRnVuY3Rpb24oZGF0YS5jdHgsIGRhdGEuY2FsbGJhY2spKSB7CiAgICAgICAgICBKU1ZhbHVlQ29uc3QgYXJndltdID0ge0pTX05ld0ludDMyKGRhdGEuY3R4LCBzdGF0ZSksIGRhdGEuYmFyX25hbWUsIGRhdGEudHlwZX07CiAgICAgICAgICBKU19DYWxsKGRhdGEuY3R4LCBkYXRhLmNhbGxiYWNrLCBKU19VTkRFRklORUQsIDMsIGFyZ3YpOwogICAgICAgIH0KICAgICAgfSwKICAgICAgdXNlcmRhdGEsCiAgICAgIHR5cGUsCiAgICAgIGluaXRpYWxfYnV0dG9uX3N0YXRlKTsKCiAgcmV0dXJuIEpTX05ld0ludDMyKGN0eCwgcmV0KTsKfQoKc3RhdGljIEpTVmFsdWUKanNfY3ZfZ2V0X3RyYWNrYmFyX3BvcyhKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2KSB7CiAgY29uc3QgY2hhciAqbmFtZSwgKndpbmRvdzsKCiAgbmFtZSA9IEpTX1RvQ1N0cmluZyhjdHgsIGFyZ3ZbMF0pOwogIHdpbmRvdyA9IEpTX1RvQ1N0cmluZyhjdHgsIGFyZ3ZbMV0pOwoKICBpZihuYW1lID09IG51bGxwdHIgfHwgd2luZG93ID09IG51bGxwdHIpCiAgICByZXR1cm4gSlNfRVhDRVBUSU9OOwoKICByZXR1cm4gSlNfTmV3SW50MzIoY3R4LCBjdjo6Z2V0VHJhY2tiYXJQb3MobmFtZSwgd2luZG93KSk7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX2N2X3NldF90cmFja2JhcihKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2LCBpbnQgbWFnaWMpIHsKICBjb25zdCBjaGFyICpuYW1lLCAqd2luZG93OwogIGludDMyX3QgdmFsOwoKICBuYW1lID0gSlNfVG9DU3RyaW5nKGN0eCwgYXJndlswXSk7CiAgd2luZG93ID0gSlNfVG9DU3RyaW5nKGN0eCwgYXJndlsxXSk7CgogIGlmKG5hbWUgPT0gbnVsbHB0ciB8fCB3aW5kb3cgPT0gbnVsbHB0cikKICAgIHJldHVybiBKU19FWENFUFRJT047CgogIEpTX1RvSW50MzIoY3R4LCAmdmFsLCBhcmd2WzJdKTsKCiAgc3dpdGNoKG1hZ2ljKSB7CiAgICBjYXNlIDA6IGN2OjpzZXRUcmFja2JhclBvcyhuYW1lLCB3aW5kb3csIHZhbCk7IGJyZWFrOwogICAgY2FzZSAxOiBjdjo6c2V0VHJhY2tiYXJNaW4obmFtZSwgd2luZG93LCB2YWwpOyBicmVhazsKICAgIGNhc2UgMjogY3Y6OnNldFRyYWNrYmFyTWF4KG5hbWUsIHdpbmRvdywgdmFsKTsgYnJlYWs7CiAgfQoKICByZXR1cm4gSlNfVU5ERUZJTkVEOwp9CgpzdGF0aWMgSlNWYWx1ZQpqc19jdl9nZXRfbW91c2Vfd2hlZWxfZGVsdGEoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCogYXJndikgewogIGludDMyX3QgZmxhZ3M7CgogIEpTX1RvSW50MzIoY3R4LCAmZmxhZ3MsIGFyZ3ZbMF0pOwoKICByZXR1cm4gSlNfTmV3SW50MzIoY3R4LCBjdjo6Z2V0TW91c2VXaGVlbERlbHRhKGZsYWdzKSk7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX2N2X3NldF9tb3VzZV9jYWxsYmFjayhKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2KSB7CiAgY29uc3QgY2hhciogbmFtZTsKICBzdHJ1Y3QgTW91c2VIYW5kbGVyIHsKICAgIEpTVmFsdWUgd2luZG93OwogICAgSlNWYWx1ZUNvbnN0IGhhbmRsZXI7CiAgICBKU0NvbnRleHQqIGN0eDsKICB9OwogIE1vdXNlSGFuZGxlciogdXNlcmRhdGE7CgogIHVzZXJkYXRhID0ganNfYWxsb2NhdGU8TW91c2VIYW5kbGVyPihjdHgpOwoKICBuYW1lID0gSlNfVG9DU3RyaW5nKGN0eCwgYXJndlswXSk7CgogIHVzZXJkYXRhLT53aW5kb3cgPSBKU19EdXBWYWx1ZShjdHgsIGFyZ3ZbMF0pOwogIHVzZXJkYXRhLT5oYW5kbGVyID0gSlNfRHVwVmFsdWUoY3R4LCBhcmd2WzFdKTsKICB1c2VyZGF0YS0+Y3R4ID0gY3R4OwoKICBjdjo6c2V0TW91c2VDYWxsYmFjaygKICAgICAgbmFtZSwKICAgICAgW10oaW50IGV2ZW50LCBpbnQgeCwgaW50IHksIGludCBmbGFncywgdm9pZCogcHRyKSB7CiAgICAgICAgTW91c2VIYW5kbGVyIGNvbnN0JiBkYXRhID0gKnN0YXRpY19jYXN0PE1vdXNlSGFuZGxlcio+KHB0cik7CgogICAgICAgIGlmKEpTX0lzRnVuY3Rpb24oZGF0YS5jdHgsIGRhdGEuaGFuZGxlcikpIHsKICAgICAgICAgIEpTVmFsdWVDb25zdCBhcmd2W10gPSB7SlNfTmV3SW50MzIoZGF0YS5jdHgsIGV2ZW50KSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSlNfTmV3SW50MzIoZGF0YS5jdHgsIHgpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBKU19OZXdJbnQzMihkYXRhLmN0eCwgeSksCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBKU19OZXdJbnQzMihkYXRhLmN0eCwgZmxhZ3MpfTsKCiAgICAgICAgICBKU19DYWxsKGRhdGEuY3R4LCBkYXRhLmhhbmRsZXIsIEpTX1VOREVGSU5FRCwgNCwgYXJndik7CiAgICAgICAgfQogICAgICB9LAogICAgICB1c2VyZGF0YSk7CiAgcmV0dXJuIEpTX1VOREVGSU5FRDsKfQoKc3RhdGljIEpTVmFsdWUKanNfY3Zfd2FpdF9rZXkoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCogYXJndikgewogIGludDMyX3QgZGVsYXkgPSAwOwogIHVuaW9uIHsKICAgIGludDMyX3QgaTsKICAgIGNoYXIgYzsKICB9IGtleTsKICBKU1ZhbHVlIHJldDsKCiAgaWYoYXJnYyA+IDApCiAgICBKU19Ub0ludDMyKGN0eCwgJmRlbGF5LCBhcmd2WzBdKTsKCiAga2V5LmkgPSBjdjo6d2FpdEtleShkZWxheSk7CgogIGlmKDAgJiYgaXNhbG51bShrZXkuYykpIHsKICAgIGNoYXIgY2hbMl0gPSB7a2V5LmMsIDB9OwoKICAgIHJldCA9IEpTX05ld1N0cmluZyhjdHgsIGNoKTsKICB9IGVsc2UgewogICAgcmV0ID0gSlNfTmV3SW50MzIoY3R4LCBrZXkuaSk7CiAgfQogIHJldHVybiByZXQ7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX2N2X3dhaXRfa2V5X2V4KEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QqIGFyZ3YpIHsKICBpbnQzMl90IGRlbGF5ID0gMDsKICBpbnQga2V5Q29kZTsKICBKU1ZhbHVlIHJldDsKCiAgaWYoYXJnYyA+IDApCiAgICBKU19Ub0ludDMyKGN0eCwgJmRlbGF5LCBhcmd2WzBdKTsKCiAga2V5Q29kZSA9IGN2Ojp3YWl0S2V5RXgoZGVsYXkpOwoKICByZXR1cm4gSlNfTmV3SW50MzIoY3R4LCBrZXlDb2RlKTsKfQoKc3RhdGljIEpTVmFsdWUKanNfY3ZfZ2V0cGVyc3BlY3RpdmV0cmFuc2Zvcm0oSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCogYXJndikgewogIEpTQ29udG91ckRhdGE8ZG91YmxlPip2LCAqb3RoZXIgPSBudWxscHRyLCAqcHRyOwogIEpTVmFsdWUgcmV0ID0gSlNfVU5ERUZJTkVEOwogIGJvb2wgaGFuZGxlTmVzdGVkID0gdHJ1ZTsKICBKU0NvbnRvdXJEYXRhPGZsb2F0PiBhLCBiOwogIGN2OjpNYXQgbWF0cml4OwogIGludDMyX3Qgc29sdmVNZXRob2QgPSBjdjo6REVDT01QX0xVOwoKICB2ID0ganNfY29udG91cl9kYXRhKGN0eCwgYXJndlswXSk7CiAgaWYoIXYpCiAgICByZXR1cm4gSlNfRVhDRVBUSU9OOwoKICBpZihhcmdjID4gMSkgewogICAgb3RoZXIgPSBzdGF0aWNfY2FzdDxKU0NvbnRvdXJEYXRhPGRvdWJsZT4qPihKU19HZXRPcGFxdWUyKGN0eCwgYXJndlsxXSwganNfY29udG91cl9jbGFzc19pZCkpOwoKICAgIGlmKGFyZ2MgPiAyKQogICAgICBKU19Ub0ludDMyKGN0eCwgJnNvbHZlTWV0aG9kLCBhcmd2WzJdKTsKICB9CgogIHN0ZDo6dHJhbnNmb3JtKHYtPmJlZ2luKCksIHYtPmVuZCgpLCBzdGQ6OmJhY2tfaW5zZXJ0ZXIoYSksIFtdKGNvbnN0IEpTUG9pbnREYXRhPGRvdWJsZT4mIHB0KSAtPiBKU1BvaW50RGF0YTxmbG9hdD4gewogICAgcmV0dXJuIEpTUG9pbnREYXRhPGZsb2F0PihwdC54LCBwdC55KTsKICB9KTsKICBzdGQ6OnRyYW5zZm9ybShvdGhlci0+YmVnaW4oKSwgb3RoZXItPmVuZCgpLCBzdGQ6OmJhY2tfaW5zZXJ0ZXIoYiksIFtdKGNvbnN0IEpTUG9pbnREYXRhPGRvdWJsZT4mIHB0KSAtPiBKU1BvaW50RGF0YTxmbG9hdD4gewogICAgcmV0dXJuIEpTUG9pbnREYXRhPGZsb2F0PihwdC54LCBwdC55KTsKICB9KTsKICBtYXRyaXggPSBjdjo6Z2V0UGVyc3BlY3RpdmVUcmFuc2Zvcm0oYSwgYiAvKiwgc29sdmVNZXRob2QqLyk7CgogIHJldCA9IGpzX21hdF93cmFwKGN0eCwgbWF0cml4KTsKICByZXR1cm4gcmV0Owp9CgpzdGF0aWMgSlNWYWx1ZQpqc19jdl9nZXRhZmZpbmV0cmFuc2Zvcm0oSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCogYXJndikgewogIEpTQ29udG91ckRhdGE8ZG91YmxlPip2LCAqb3RoZXIgPSBudWxscHRyLCAqcHRyOwogIEpTVmFsdWUgcmV0ID0gSlNfVU5ERUZJTkVEOwogIGJvb2wgaGFuZGxlTmVzdGVkID0gdHJ1ZTsKICBKU0NvbnRvdXJEYXRhPGZsb2F0PiBhLCBiOwogIGN2OjpNYXQgbWF0cml4OwoKICB2ID0ganNfY29udG91cl9kYXRhKGN0eCwgYXJndlswXSk7CiAgaWYoIXYpCiAgICByZXR1cm4gSlNfRVhDRVBUSU9OOwoKICBpZihhcmdjID4gMSkKICAgIG90aGVyID0gc3RhdGljX2Nhc3Q8SlNDb250b3VyRGF0YTxkb3VibGU+Kj4oSlNfR2V0T3BhcXVlMihjdHgsIGFyZ3ZbMV0sIGpzX2NvbnRvdXJfY2xhc3NfaWQpKTsKCiAgc3RkOjp0cmFuc2Zvcm0odi0+YmVnaW4oKSwgdi0+ZW5kKCksIHN0ZDo6YmFja19pbnNlcnRlcihhKSwgW10oY29uc3QgSlNQb2ludERhdGE8ZG91YmxlPiYgcHQpIC0+IEpTUG9pbnREYXRhPGZsb2F0PiB7CiAgICByZXR1cm4gSlNQb2ludERhdGE8ZmxvYXQ+KHB0LngsIHB0LnkpOwogIH0pOwogIHN0ZDo6dHJhbnNmb3JtKG90aGVyLT5iZWdpbigpLCBvdGhlci0+ZW5kKCksIHN0ZDo6YmFja19pbnNlcnRlcihiKSwgW10oY29uc3QgSlNQb2ludERhdGE8ZG91YmxlPiYgcHQpIC0+IEpTUG9pbnREYXRhPGZsb2F0PiB7CiAgICByZXR1cm4gSlNQb2ludERhdGE8ZmxvYXQ+KHB0LngsIHB0LnkpOwogIH0pOwogIG1hdHJpeCA9IGN2OjpnZXRBZmZpbmVUcmFuc2Zvcm0oYSwgYik7CgogIHJldCA9IGpzX21hdF93cmFwKGN0eCwgbWF0cml4KTsKICByZXR1cm4gcmV0Owp9CgpzdGF0aWMgSlNWYWx1ZQpqc19jdl9maW5kX2NvbnRvdXJzKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QqIGFyZ3YpIHsKICBjdjo6TWF0KiBtID0ganNfbWF0X2RhdGEoY3R4LCBhcmd2WzBdKTsKICBKU1ZhbHVlIGFycmF5X2J1ZmZlciwgcmV0ID0gSlNfVU5ERUZJTkVEOwogIGludCBtb2RlID0gY3Y6OlJFVFJfVFJFRTsKICBpbnQgYXBwcm94ID0gY3Y6OkNIQUlOX0FQUFJPWF9TSU1QTEU7CiAgYm9vbCBoaWVyX2NhbGxiYWNrID0gSlNfSXNGdW5jdGlvbihjdHgsIGFyZ3ZbMl0pOwogIGN2OjpQb2ludCBvZmZzZXQoMCwgMCk7CgogIEpTQ29udG91cnNEYXRhPGludD4gY29udG91cnM7CiAgc3RkOjp2ZWN0b3I8Y3Y6OlZlYzRpPiBoaWVyOwogIEpTQ29udG91cnNEYXRhPGRvdWJsZT4gcG9seTsKCiAgY3Y6OmZpbmRDb250b3VycygqbSwgY29udG91cnMsIGhpZXIsIG1vZGUsIGFwcHJveCwgb2Zmc2V0KTsKCiAgLypwcmludGYoImpzX2N2X2ZpbmRfY29udG91cnMgY29udG91cnMuc2l6ZSgpID0gJXp1XG4iLCBjb250b3Vycy5zaXplKCkpOwogIGlmKGNvbnRvdXJzLnNpemUoKSkKICAgIHByaW50ZigianNfY3ZfZmluZF9jb250b3VycyBjb250b3Vycy5iYWNrKCkuc2l6ZSgpID0gJXp1XG4iLCBjb250b3Vycy5iYWNrKCkuc2l6ZSgpKTsqLwoKICBpZihqc19pc19hcnJheShjdHgsIGFyZ3ZbMV0pKSB7CiAgICBqc19hcnJheV90cnVuY2F0ZShjdHgsIGFyZ3ZbMV0sIDApOwogIH0KCiAgcG9seS5yZXNpemUoY29udG91cnMuc2l6ZSgpKTsKCiAgdHJhbnNmb3JtX2NvbnRvdXJzKGNvbnRvdXJzLmJlZ2luKCksIGNvbnRvdXJzLmVuZCgpLCBwb2x5LmJlZ2luKCkpOwoKICAvKnByaW50ZigianNfY3ZfZmluZF9jb250b3VycyBwb2x5LnNpemUoKSA9ICV6dVxuIiwgcG9seS5zaXplKCkpOwogIGlmKHBvbHkuc2l6ZSgpKQogICAgcHJpbnRmKCJqc19jdl9maW5kX2NvbnRvdXJzIHBvbHkuYmFjaygpLnNpemUoKSA9ICV6dVxuIiwgcG9seS5iYWNrKCkuc2l6ZSgpKTsqLwoKICBhcnJheV9idWZmZXIgPSBqc19hcnJheWJ1ZmZlcl9mcm9tKGN0eCwgYmVnaW4oaGllciksIGVuZChoaWVyKSk7CgogIHsKICAgIHNpemVfdCBpLCBsZW5ndGggPSBjb250b3Vycy5zaXplKCk7CiAgICBKU1ZhbHVlIGN0b3IgPSBqc19nbG9iYWxfZ2V0KGN0eCwgIkludDMyQXJyYXkiKTsKCiAgICBmb3IoaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykgewogICAgICBKU1ZhbHVlIGFycmF5ID0ganNfdHlwZWRhcnJheV9uZXcoY3R4LCBhcnJheV9idWZmZXIsIGkgKiBzaXplb2YoY3Y6OlZlYzRpKSwgNCwgY3Rvcik7CgogICAgICAvKnN0ZDo6YXJyYXk8aW50MzJfdCwgND4gdjsKCiAgICAgIHZbMF0gPSBoaWVyW2ldWzBdOwogICAgICB2WzFdID0gaGllcltpXVsxXTsKICAgICAgdlsyXSA9IGhpZXJbaV1bMl07CiAgICAgIHZbM10gPSBoaWVyW2ldWzNdOyovCgogICAgICBKU19TZXRQcm9wZXJ0eVVpbnQzMihjdHgsIGFyZ3ZbMV0sIGksIGpzX2NvbnRvdXJfbmV3KGN0eCwgcG9seVtpXSkpOwoKICAgICAgaWYoIWhpZXJfY2FsbGJhY2spIHsKICAgICAgICBKU19TZXRQcm9wZXJ0eVVpbnQzMihjdHgsIGFyZ3ZbMl0sIGksIGFycmF5KTsKICAgICAgICAvLyBKU19TZXRQcm9wZXJ0eVVpbnQzMihjdHgsIGFyZ3ZbMl0sIGksIGpzX3R5cGVkYXJyYXlfZnJvbShjdHgsIHYuY2JlZ2luKCksIHYuY2VuZCgpKSk7CiAgICAgICAgLy8gSlNfU2V0UHJvcGVydHlVaW50MzIoY3R4LCBhcmd2WzJdLCBpLCBqc190eXBlZGFycmF5X2Zyb20oY3R4LCBiZWdpbihoaWVyW2ldKSwKICAgICAgICAvLyBlbmQoaGllcltpXSkpKTsKICAgICAgfQogICAgfQogICAgSlNfRnJlZVZhbHVlKGN0eCwgY3Rvcik7CiAgfQoKICBpZihoaWVyX2NhbGxiYWNrKSB7CiAgICBKU1ZhbHVlQ29uc3QgdGFycmF5OwogICAgaW50MzJfdCAqaHN0YXJ0LCAqaGVuZDsKICAgIGhzdGFydCA9IHJlaW50ZXJwcmV0X2Nhc3Q8aW50MzJfdCo+KCZoaWVyWzBdKTsKICAgIGhlbmQgPSByZWludGVycHJldF9jYXN0PGludDMyX3QqPigmaGllcltoaWVyLnNpemUoKV0pOwoKICAgIHRhcnJheSA9IGpzX2FycmF5X2Zyb20oY3R4LCBoc3RhcnQsIGhlbmQpOwoKICAgIEpTX0NhbGwoY3R4LCBhcmd2WzJdLCBKU19OVUxMLCAxLCAmdGFycmF5KTsKICB9CgogIC8qewogICAgICBKU1ZhbHVlIGhpZXJfYXJyID0ganNfdmVjdG9yX3ZlYzRpX3RvX2FycmF5KGN0eCwgaGllcik7CiAgICAgIEpTVmFsdWUgY29udG91cnNfb2JqID0ganNfY29udG91cnNfbmV3KGN0eCwgcG9seSk7CgogICAgICByZXQgPSBKU19OZXdPYmplY3QoY3R4KTsKCiAgICAgIEpTX1NldFByb3BlcnR5U3RyKGN0eCwgcmV0LCAiaGllciIsIGhpZXJfYXJyKTsKICAgICAgSlNfU2V0UHJvcGVydHlTdHIoY3R4LCByZXQsICJjb250b3VycyIsIGNvbnRvdXJzX29iaik7CiAgICB9Ki8KICByZXR1cm4gcmV0Owp9CgpzdGF0aWMgSlNWYWx1ZQpqc19jdl9kcmF3X2NvbnRvdXJzKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QqIGFyZ3YpIHsKICBKU0lucHV0T3V0cHV0QXJyYXkgbWF0OwogIEpTQ29udG91cnNEYXRhPGludD4gY29udG91cnM7CiAgSlNDb2xvckRhdGE8ZG91YmxlPiBjb2xvcjsKICBpbnQzMl90IGNvbnRvdXJJZHggPSAtMSwgdGhpY2tuZXNzID0gMSwgbGluZVR5cGUgPSBjdjo6TElORV84OwoKICBtYXQgPSBqc191bWF0X29yX21hdChjdHgsIGFyZ3ZbMF0pOwoKICBpZihqc19pc19ub2FycmF5KG1hdCkpCiAgICByZXR1cm4gSlNfVGhyb3dJbnRlcm5hbEVycm9yKGN0eCwgIm1hdCBub3QgYW4gYXJyYXkhIik7CgogIGlmKCFqc19pc19hcnJheShjdHgsIGFyZ3ZbMV0pKQogICAgcmV0dXJuIEpTX1Rocm93SW50ZXJuYWxFcnJvcihjdHgsICJhcmd1bWVudCAyIG5vdCBhbiBhcnJheSEiKTsKCiAganNfYXJyYXlfdG8oY3R4LCBhcmd2WzFdLCBjb250b3Vycyk7CgogIC8qcHJpbnRmKCJqc19jdl9kcmF3X2NvbnRvdXJzIGNvbnRvdXJzLnNpemUoKSA9ICV6dVxuIiwgY29udG91cnMuc2l6ZSgpKTsKICBpZihjb250b3Vycy5zaXplKCkpCiAgICBwcmludGYoImpzX2N2X2RyYXdfY29udG91cnMgY29udG91cnMuYmFjaygpLnNpemUoKSA9ICV6dVxuIiwgY29udG91cnMuYmFjaygpLnNpemUoKSk7Ki8KCiAgSlNfVG9JbnQzMihjdHgsICZjb250b3VySWR4LCBhcmd2WzJdKTsKCiAganNfY29sb3JfcmVhZChjdHgsIGFyZ3ZbM10sICZjb2xvcik7CgogIGlmKGFyZ2MgPiA0KQogICAgSlNfVG9JbnQzMihjdHgsICZ0aGlja25lc3MsIGFyZ3ZbNF0pOwoKICBpZihhcmdjID4gNSkKICAgIEpTX1RvSW50MzIoY3R4LCAmbGluZVR5cGUsIGFyZ3ZbNV0pOwoKICBjdjo6ZHJhd0NvbnRvdXJzKG1hdCwgY29udG91cnMsIGNvbnRvdXJJZHgsICpyZWludGVycHJldF9jYXN0PGN2OjpTY2FsYXIqPigmY29sb3IpLCB0aGlja25lc3MsIGxpbmVUeXBlKTsKICByZXR1cm4gSlNfVU5ERUZJTkVEOwp9CgpzdGF0aWMgSlNWYWx1ZQpqc19jdl9wb2ludF9wb2x5Z29uX3Rlc3QoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCogYXJndikgewogIEpTQ29udG91ckRhdGE8ZG91YmxlPiogY29udG91cjsKICBKU1BvaW50RGF0YTxmbG9hdD4gcG9pbnQ7CiAgYm9vbCBtZWFzdXJlRGlzdCA9IGZhbHNlOwoKICBjb250b3VyID0ganNfY29udG91cl9kYXRhKGN0eCwgYXJndlswXSk7CgogIGlmKGNvbnRvdXIgPT0gbnVsbHB0cikKICAgIHJldHVybiBKU19FWENFUFRJT047CgogIHBvaW50ID0ganNfcG9pbnRfZ2V0KGN0eCwgYXJndlsxXSk7CiAgaWYoYXJnYyA+PSAzKQogICAgbWVhc3VyZURpc3QgPSBKU19Ub0Jvb2woY3R4LCBhcmd2WzJdKTsKCiAgcmV0dXJuIEpTX05ld0Zsb2F0NjQoY3R4LCBjdjo6cG9pbnRQb2x5Z29uVGVzdCgqY29udG91ciwgcG9pbnQsIG1lYXN1cmVEaXN0KSk7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX2N2X2dldHRpY2tzKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QqIGFyZ3YsIGludCBtYWdpYykgewogIEpTVmFsdWUgcmV0ID0gSlNfVU5ERUZJTkVEOwogIHN3aXRjaChtYWdpYykgewogICAgY2FzZSAwOiByZXQgPSBKU19OZXdJbnQ2NChjdHgsIGN2OjpnZXRUaWNrQ291bnQoKSk7IGJyZWFrOwogICAgY2FzZSAxOiByZXQgPSBKU19OZXdGbG9hdDY0KGN0eCwgY3Y6OmdldFRpY2tGcmVxdWVuY3koKSk7IGJyZWFrOwogICAgY2FzZSAyOiByZXQgPSBKU19OZXdJbnQ2NChjdHgsIGN2OjpnZXRDUFVUaWNrQ291bnQoKSk7CiAgICBkZWZhdWx0OiByZXQgPSBKU19FWENFUFRJT047CiAgfQogIHJldHVybiByZXQ7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX2N2X2JpdHdpc2UoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCogYXJndiwgaW50IG1hZ2ljKSB7CgogIEpTSW5wdXRPdXRwdXRBcnJheSBzcmMsIGRzdDsKICBKU0lucHV0QXJyYXkgb3RoZXIsIG1hc2s7CgogIHNyYyA9IGpzX3VtYXRfb3JfbWF0KGN0eCwgYXJndlswXSk7CiAgb3RoZXIgPSBqc19pbnB1dF9hcnJheShjdHgsIGFyZ3ZbMV0pOwogIGRzdCA9IHNyYzsKICBpZihhcmdjID4gMikKICAgIGRzdCA9IGpzX3VtYXRfb3JfbWF0KGN0eCwgYXJndlsyXSk7CgogIG1hc2sgPSBjdjo6bm9BcnJheSgpOwogIGlmKGFyZ2MgPiAzKQoKICAgIG1hc2sgPSBqc19pbnB1dF9hcnJheShjdHgsIGFyZ3ZbM10pOwoKICBzd2l0Y2gobWFnaWMpIHsKICAgIGNhc2UgMDogY3Y6OmJpdHdpc2VfYW5kKHNyYywgb3RoZXIsIGRzdCwgbWFzayk7IGJyZWFrOwogICAgY2FzZSAxOiBjdjo6Yml0d2lzZV9vcihzcmMsIG90aGVyLCBkc3QsIG1hc2spOyBicmVhazsKICAgIGNhc2UgMjogY3Y6OmJpdHdpc2VfeG9yKHNyYywgb3RoZXIsIGRzdCwgbWFzayk7IGJyZWFrOwogICAgY2FzZSAzOiBjdjo6Yml0d2lzZV9ub3Qoc3JjLCBkc3QsIG1hc2spOyBicmVhazsKICAgIGRlZmF1bHQ6IHJldHVybiBKU19FWENFUFRJT047CiAgfQogIHJldHVybiBKU19VTkRFRklORUQ7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX2N2X2d1aV9tZXRob2RzKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QqIGFyZ3YsIGludCBtYWdpYykgewogIEpTVmFsdWUgcmV0ID0gSlNfVU5ERUZJTkVEOwogIHN3aXRjaChtYWdpYykgewogICAgY2FzZSBESVNQTEFZX09WRVJMQVk6IHsKICAgICAgY29uc3QgY2hhciAqd2lubmFtZSwgKnRleHQ7CiAgICAgIGludDMyX3QgZGVsYXltcyA9IDA7CiAgICAgIHdpbm5hbWUgPSBKU19Ub0NTdHJpbmcoY3R4LCBhcmd2WzBdKTsKICAgICAgdGV4dCA9IEpTX1RvQ1N0cmluZyhjdHgsIGFyZ3ZbMV0pOwogICAgICBpZihhcmdjID4gMikKICAgICAgICBKU19Ub0ludDMyKGN0eCwgJmRlbGF5bXMsIGFyZ3ZbMl0pOwoKICAgICAgY3Y6OmRpc3BsYXlPdmVybGF5KHdpbm5hbWUsIHRleHQsIGRlbGF5bXMpOwogICAgICBicmVhazsKICAgIH0KICB9CiAgcmV0dXJuIHJldDsKfQoKSlNWYWx1ZSBjdl9wcm90byA9IEpTX1VOREVGSU5FRCwgY3ZfY2xhc3MgPSBKU19VTkRFRklORUQ7CkpTQ2xhc3NJRCBqc19jdl9jbGFzc19pZCA9IDA7Cgp2b2lkCmpzX2N2X2ZpbmFsaXplcihKU1J1bnRpbWUqIHJ0LCBKU1ZhbHVlIHZhbCkgewoKICBmb3IoY29uc3QgYXV0byYgbmFtZSA6IHdpbmRvd19saXN0KSB7CiAgICBzdGQ6OmNlcnIgPDwgIkRlc3Ryb3kgd2luZG93ICciIDw8IG5hbWUgPDwgIiciIDw8IHN0ZDo6ZW5kbDsKICAgIGN2OjpkZXN0cm95V2luZG93KG5hbWUpOwogIH0KCiAgLy8gSlNfRnJlZVZhbHVlUlQocnQsIHZhbCk7CiAgLy8gSlNfRnJlZVZhbHVlUlQocnQsIGN2X2NsYXNzKTsKfQoKSlNDbGFzc0RlZiBqc19jdl9jbGFzcyA9IHsuY2xhc3NfbmFtZSA9ICJjdiIsIC5maW5hbGl6ZXIgPSBqc19jdl9maW5hbGl6ZXJ9OwoKdHlwZWRlZiBzdGQ6OnZlY3RvcjxKU0NGdW5jdGlvbkxpc3RFbnRyeT4ganNfZnVuY3Rpb25fbGlzdF90OwoKanNfZnVuY3Rpb25fbGlzdF90IGpzX2N2X3N0YXRpY19mdW5jc3sKICAgIEpTX0NGVU5DX0RFRigiYmx1ciIsIDMsIGpzX2N2X2JsdXIpLAogICAgSlNfQ0ZVTkNfREVGKCJib3VuZGluZ1JlY3QiLCAxLCBqc19jdl9ib3VuZGluZ19yZWN0KSwKICAgIEpTX0NGVU5DX0RFRigiR2F1c3NpYW5CbHVyIiwgNCwganNfY3ZfZ2F1c3NpYW5fYmx1ciksCiAgICBKU19DRlVOQ19ERUYoIkhvdWdoTGluZXMiLCA1LCBqc19jdl9ob3VnaF9saW5lcyksCiAgICBKU19DRlVOQ19ERUYoIkhvdWdoTGluZXNQIiwgNSwganNfY3ZfaG91Z2hfbGluZXNfcCksCiAgICBKU19DRlVOQ19ERUYoIkhvdWdoQ2lyY2xlcyIsIDUsIGpzX2N2X2hvdWdoX2NpcmNsZXMpLAogICAgSlNfQ0ZVTkNfREVGKCJDYW5ueSIsIDQsIGpzX2N2X2Nhbm55KSwKICAgIEpTX0NGVU5DX0RFRigiZ29vZEZlYXR1cmVzVG9UcmFjayIsIDUsIGpzX2N2X2dvb2RfZmVhdHVyZXNfdG9fdHJhY2spLAogICAgSlNfQ0ZVTkNfREVGKCJpbXJlYWQiLCAxLCBqc19jdl9pbXJlYWQpLAogICAgSlNfQ0ZVTkNfREVGKCJpbXdyaXRlIiwgMiwganNfY3ZfaW13cml0ZSksCiAgICBKU19DRlVOQ19ERUYoImltc2hvdyIsIDIsIGpzX2N2X2ltc2hvdyksCiAgICBKU19DRlVOQ19ERUYoImN2dENvbG9yIiwgMywganNfY3ZfY3Z0X2NvbG9yKSwKICAgIEpTX0NGVU5DX0RFRigic3BsaXQiLCAyLCBqc19jdl9zcGxpdCksCiAgICBKU19DRlVOQ19ERUYoIm5vcm1hbGl6ZSIsIDIsIGpzX2N2X25vcm1hbGl6ZSksCiAgICBKU19DRlVOQ19ERUYoImVxdWFsaXplSGlzdCIsIDIsIGpzX2N2X2VxdWFsaXplX2hpc3QpLAogICAgSlNfQ0ZVTkNfREVGKCJjb252ZXJ0U2NhbGVBYnMiLCAyLCBqc19jdl9jb252ZXJ0X3NjYWxlX2FicyksCiAgICBKU19DRlVOQ19ERUYoInRocmVzaG9sZCIsIDUsIGpzX2N2X3RocmVzaG9sZCksCiAgICBKU19DRlVOQ19ERUYoImJpbGF0ZXJhbEZpbHRlciIsIDUsIGpzX2N2X2JpbGF0ZXJhbF9maWx0ZXIpLAogICAgSlNfQ0ZVTkNfREVGKCJuYW1lZFdpbmRvdyIsIDEsIGpzX2N2X25hbWVkX3dpbmRvdyksCiAgICBKU19DRlVOQ19ERUYoIm1vdmVXaW5kb3ciLCAyLCBqc19jdl9tb3ZlX3dpbmRvdyksCiAgICBKU19DRlVOQ19ERUYoInJlc2l6ZVdpbmRvdyIsIDIsIGpzX2N2X3Jlc2l6ZV93aW5kb3cpLAogICAgSlNfQ0ZVTkNfREVGKCJkZXN0cm95V2luZG93IiwgMSwganNfY3ZfZGVzdHJveV93aW5kb3cpLAogICAgSlNfQ0ZVTkNfREVGKCJnZXRXaW5kb3dJbWFnZVJlY3QiLCAxLCBqc19jdl9nZXRfd2luZG93X2ltYWdlX3JlY3QpLAogICAgSlNfQ0ZVTkNfREVGKCJnZXRXaW5kb3dQcm9wZXJ0eSIsIDIsIGpzX2N2X2dldF93aW5kb3dfcHJvcGVydHkpLAogICAgSlNfQ0ZVTkNfREVGKCJzZXRXaW5kb3dQcm9wZXJ0eSIsIDMsIGpzX2N2X3NldF93aW5kb3dfcHJvcGVydHkpLAogICAgSlNfQ0ZVTkNfREVGKCJzZXRXaW5kb3dUaXRsZSIsIDIsIGpzX2N2X3NldF93aW5kb3dfdGl0bGUpLAogICAgSlNfQ0ZVTkNfREVGKCJjcmVhdGVUcmFja2JhciIsIDUsIGpzX2N2X2NyZWF0ZV90cmFja2JhciksCiAgICBKU19DRlVOQ19ERUYoImNyZWF0ZUJ1dHRvbiIsIDIsIGpzX2N2X2NyZWF0ZV9idXR0b24pLAogICAgSlNfQ0ZVTkNfREVGKCJnZXRUcmFja2JhclBvcyIsIDIsIGpzX2N2X2dldF90cmFja2Jhcl9wb3MpLAogICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJzZXRUcmFja2JhclBvcyIsIDMsIGpzX2N2X3NldF90cmFja2JhciwgMCksCiAgICBKU19DRlVOQ19NQUdJQ19ERUYoInNldFRyYWNrYmFyTWluIiwgMywganNfY3Zfc2V0X3RyYWNrYmFyLCAxKSwKICAgIEpTX0NGVU5DX01BR0lDX0RFRigic2V0VHJhY2tiYXJNYXgiLCAzLCBqc19jdl9zZXRfdHJhY2tiYXIsIDIpLAogICAgSlNfQ0ZVTkNfREVGKCJnZXRNb3VzZVdoZWVsRGVsdGEiLCAxLCBqc19jdl9nZXRfbW91c2Vfd2hlZWxfZGVsdGEpLAogICAgSlNfQ0ZVTkNfREVGKCJzZXRNb3VzZUNhbGxiYWNrIiwgMiwganNfY3Zfc2V0X21vdXNlX2NhbGxiYWNrKSwKICAgIEpTX0NGVU5DX0RFRigid2FpdEtleSIsIDAsIGpzX2N2X3dhaXRfa2V5KSwKICAgIEpTX0NGVU5DX0RFRigid2FpdEtleUV4IiwgMCwganNfY3Zfd2FpdF9rZXlfZXgpLAogICAgSlNfQ0ZVTkNfREVGKCJnZXRQZXJzcGVjdGl2ZVRyYW5zZm9ybSIsIDIsIGpzX2N2X2dldHBlcnNwZWN0aXZldHJhbnNmb3JtKSwKICAgIEpTX0NGVU5DX0RFRigiZ2V0QWZmaW5lVHJhbnNmb3JtIiwgMiwganNfY3ZfZ2V0YWZmaW5ldHJhbnNmb3JtKSwKICAgIEpTX0NGVU5DX0RFRigiZmluZENvbnRvdXJzIiwgMSwganNfY3ZfZmluZF9jb250b3VycyksCiAgICBKU19DRlVOQ19ERUYoImRyYXdDb250b3VycyIsIDQsIGpzX2N2X2RyYXdfY29udG91cnMpLAogICAgSlNfQ0ZVTkNfREVGKCJwb2ludFBvbHlnb25UZXN0IiwgMiwganNfY3ZfcG9pbnRfcG9seWdvbl90ZXN0KSwKICAgIEpTX0NGVU5DX0RFRigiY29ybmVySGFycmlzIiwgNSwganNfY3ZfY29ybmVyX2hhcnJpcyksCiAgICBKU19DRlVOQ19ERUYoImNhbGNIaXN0IiwgOCwganNfY3ZfY2FsY19oaXN0KSwKICAgIEpTX0NGVU5DX01BR0lDX0RFRigiZGlsYXRlIiwgMywganNfY3ZfbW9ycGhvbG9neSwgMCksCiAgICBKU19DRlVOQ19NQUdJQ19ERUYoImVyb2RlIiwgMywganNfY3ZfbW9ycGhvbG9neSwgMSksCiAgICBKU19DRlVOQ19ERUYoIm1vcnBob2xvZ3lFeCIsIDQsIGpzX2N2X21vcnBob2xvZ3lfZXgpLAogICAgSlNfQ0ZVTkNfREVGKCJnZXRTdHJ1Y3R1cmluZ0VsZW1lbnQiLCAyLCBqc19jdl9nZXRfc3RydWN0dXJpbmdfZWxlbWVudCksCiAgICBKU19DRlVOQ19ERUYoIm1lZGlhbkJsdXIiLCAzLCBqc19jdl9tZWRpYW5fYmx1ciksCiAgICBKU19DRlVOQ19ERUYoIm1lcmdlIiwgMiwganNfY3ZfbWVyZ2UpLAogICAgSlNfQ0ZVTkNfREVGKCJtaXhDaGFubmVscyIsIDMsIGpzX2N2X21peF9jaGFubmVscyksCiAgICBKU19DRlVOQ19ERUYoIm1pbk1heExvYyIsIDIsIGpzX2N2X21pbl9tYXhfbG9jKSwKICAgIEpTX0NGVU5DX0RFRigiYWRkV2VpZ2h0ZWQiLCA2LCBqc19jdl9hZGRfd2VpZ2h0ZWQpLAogICAgSlNfQ0ZVTkNfREVGKCJyZXNpemUiLCAzLCBqc19jdl9yZXNpemUpLAogICAgSlNfQ0ZVTkNfREVGKCJza2VsZXRvbml6YXRpb24iLCAxLCBqc19jdl9za2VsZXRvbml6YXRpb24pLAogICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJwaXhlbE5laWdoYm9yaG9vZCIsIDIsIGpzX2N2X3BpeGVsX25laWdoYm9yaG9vZCwgMCksCiAgICBKU19DRlVOQ19NQUdJQ19ERUYoInBpeGVsTmVpZ2hib3Job29kQ3Jvc3MiLCAyLCBqc19jdl9waXhlbF9uZWlnaGJvcmhvb2QsIDEpLAogICAgSlNfQ0ZVTkNfREVGKCJwaXhlbEZpbmRWYWx1ZSIsIDIsIGpzX2N2X3BpeGVsX2ZpbmRfdmFsdWUpLAogICAgSlNfQ0ZVTkNfREVGKCJwYWxldHRlQXBwbHkiLCAyLCBqc19jdl9wYWxldHRlX2FwcGx5KSwKICAgIEpTX0NGVU5DX01BR0lDX0RFRigiZGlzcGxheU92ZXJsYXkiLCAyLCBqc19jdl9ndWlfbWV0aG9kcywgRElTUExBWV9PVkVSTEFZKSwKICAgIEpTX0NGVU5DX01BR0lDX0RFRigiZ2V0VGlja0NvdW50IiwgMCwganNfY3ZfZ2V0dGlja3MsIDApLAogICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJnZXRUaWNrRnJlcXVlbmN5IiwgMCwganNfY3ZfZ2V0dGlja3MsIDEpLAogICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJnZXRDUFVUaWNrQ291bnQiLCAwLCBqc19jdl9nZXR0aWNrcywgMiksCiAgICBKU19DRlVOQ19NQUdJQ19ERUYoImJpdHdpc2VfYW5kIiwgMywganNfY3ZfYml0d2lzZSwgMCksCiAgICBKU19DRlVOQ19NQUdJQ19ERUYoImJpdHdpc2Vfb3IiLCAzLCBqc19jdl9iaXR3aXNlLCAxKSwKICAgIEpTX0NGVU5DX01BR0lDX0RFRigiYml0d2lzZV94b3IiLCAzLCBqc19jdl9iaXR3aXNlLCAyKSwKICAgIEpTX0NGVU5DX01BR0lDX0RFRigiYml0d2lzZV9ub3QiLCAyLCBqc19jdl9iaXR3aXNlLCAzKSwKICAgIEpTX0NGVU5DX01BR0lDX0RFRigiY291bnROb25aZXJvIiwgMSwganNfY3ZfbWF0X2Z1bmN0aW9ucywgTUFUX0NPVU5UTk9OWkVSTyksCiAgICBKU19DRlVOQ19NQUdJQ19ERUYoImZpbmROb25aZXJvIiwgMSwganNfY3ZfbWF0X2Z1bmN0aW9ucywgTUFUX0ZJTkROT05aRVJPKSwKICAgIEpTX0NGVU5DX01BR0lDX0RFRigiaGNvbmNhdCIsIDIsIGpzX2N2X21hdF9mdW5jdGlvbnMsIE1BVF9IQ09OQ0FUKSwKICAgIEpTX0NGVU5DX01BR0lDX0RFRigidmNvbmNhdCIsIDIsIGpzX2N2X21hdF9mdW5jdGlvbnMsIE1BVF9WQ09OQ0FUKSwKICAgIC8qfTsKICAgIGNvbnN0IGpzX2Z1bmN0aW9uX2xpc3RfdCBqc19jdl9jb3JlX2ZsYWdzeyovCiAgICBKU19QUk9QX0lOVDMyX0RFRigiQ1ZfVkVSU0lPTl9NQUpPUiIsIENWX1ZFUlNJT05fTUFKT1IsIDApLAogICAgSlNfUFJPUF9JTlQzMl9ERUYoIkNWX1ZFUlNJT05fTUlOT1IiLCBDVl9WRVJTSU9OX01JTk9SLCAwKSwKICAgIEpTX1BST1BfSU5UMzJfREVGKCJDVl9WRVJTSU9OX1JFVklTSU9OIiwgQ1ZfVkVSU0lPTl9SRVZJU0lPTiwgMCksCiAgICBKU19QUk9QX1NUUklOR19ERUYoIkNWX1ZFUlNJT05fU1RBVFVTIiwgQ1ZfVkVSU0lPTl9TVEFUVVMsIDApLAogICAgSlNfUFJPUF9JTlQzMl9ERUYoIkNWX0NNUF9FUSIsIENWX0NNUF9FUSwgMCksCiAgICBKU19QUk9QX0lOVDMyX0RFRigiQ1ZfQ01QX0dUIiwgQ1ZfQ01QX0dULCAwKSwKICAgIEpTX1BST1BfSU5UMzJfREVGKCJDVl9DTVBfR0UiLCBDVl9DTVBfR0UsIDApLAogICAgSlNfUFJPUF9JTlQzMl9ERUYoIkNWX0NNUF9MVCIsIENWX0NNUF9MVCwgMCksCiAgICBKU19QUk9QX0lOVDMyX0RFRigiQ1ZfQ01QX0xFIiwgQ1ZfQ01QX0xFLCAwKSwKICAgIEpTX1BST1BfSU5UMzJfREVGKCJDVl9DTVBfTkUiLCBDVl9DTVBfTkUsIDApLAogICAgSlNfUFJPUF9ET1VCTEVfREVGKCJDVl9QSSIsIENWX1BJLCAwKSwKICAgIEpTX1BST1BfRE9VQkxFX0RFRigiQ1ZfMlBJIiwgQ1ZfMlBJLCAwKSwKICAgIEpTX1BST1BfRE9VQkxFX0RFRigiQ1ZfTE9HMiIsIENWX0xPRzIsIDApLAogICAgSlNfUFJPUF9JTlQzMl9ERUYoIkNWXzhVIiwgQ1ZfOFUsIDApLAogICAgSlNfUFJPUF9JTlQzMl9ERUYoIkNWXzhTIiwgQ1ZfOFMsIDApLAogICAgSlNfUFJPUF9JTlQzMl9ERUYoIkNWXzE2VSIsIENWXzE2VSwgMCksCiAgICBKU19QUk9QX0lOVDMyX0RFRigiQ1ZfMTZTIiwgQ1ZfMTZTLCAwKSwKICAgIEpTX1BST1BfSU5UMzJfREVGKCJDVl8zMlMiLCBDVl8zMlMsIDApLAogICAgSlNfUFJPUF9JTlQzMl9ERUYoIkNWXzMyRiIsIENWXzMyRiwgMCksCiAgICBKU19QUk9QX0lOVDMyX0RFRigiQ1ZfNjRGIiwgQ1ZfNjRGLCAwKSwKICAgIEpTX1BST1BfSU5UMzJfREVGKCJDVl84VUMxIiwgQ1ZfOFVDMSwgMCksCiAgICBKU19QUk9QX0lOVDMyX0RFRigiQ1ZfOFVDMiIsIENWXzhVQzIsIDApLAogICAgSlNfUFJPUF9JTlQzMl9ERUYoIkNWXzhVQzMiLCBDVl84VUMzLCAwKSwKICAgIEpTX1BST1BfSU5UMzJfREVGKCJDVl84VUM0IiwgQ1ZfOFVDNCwgMCksCiAgICBKU19QUk9QX0lOVDMyX0RFRigiQ1ZfOFNDMSIsIENWXzhTQzEsIDApLAogICAgSlNfUFJPUF9JTlQzMl9ERUYoIkNWXzhTQzIiLCBDVl84U0MyLCAwKSwKICAgIEpTX1BST1BfSU5UMzJfREVGKCJDVl84U0MzIiwgQ1ZfOFNDMywgMCksCiAgICBKU19QUk9QX0lOVDMyX0RFRigiQ1ZfOFNDNCIsIENWXzhTQzQsIDApLAogICAgSlNfUFJPUF9JTlQzMl9ERUYoIkNWXzE2VUMxIiwgQ1ZfMTZVQzEsIDApLAogICAgSlNfUFJPUF9JTlQzMl9ERUYoIkNWXzE2VUMyIiwgQ1ZfMTZVQzIsIDApLAogICAgSlNfUFJPUF9JTlQzMl9ERUYoIkNWXzE2VUMzIiwgQ1ZfMTZVQzMsIDApLAogICAgSlNfUFJPUF9JTlQzMl9ERUYoIkNWXzE2VUM0IiwgQ1ZfMTZVQzQsIDApLAogICAgSlNfUFJPUF9JTlQzMl9ERUYoIkNWXzE2U0MxIiwgQ1ZfMTZTQzEsIDApLAogICAgSlNfUFJPUF9JTlQzMl9ERUYoIkNWXzE2U0MyIiwgQ1ZfMTZTQzIsIDApLAogICAgSlNfUFJPUF9JTlQzMl9ERUYoIkNWXzE2U0MzIiwgQ1ZfMTZTQzMsIDApLAogICAgSlNfUFJPUF9JTlQzMl9ERUYoIkNWXzE2U0M0IiwgQ1ZfMTZTQzQsIDApLAogICAgSlNfUFJPUF9JTlQzMl9ERUYoIkNWXzMyU0MxIiwgQ1ZfMzJTQzEsIDApLAogICAgSlNfUFJPUF9JTlQzMl9ERUYoIkNWXzMyU0MyIiwgQ1ZfMzJTQzIsIDApLAogICAgSlNfUFJPUF9JTlQzMl9ERUYoIkNWXzMyU0MzIiwgQ1ZfMzJTQzMsIDApLAogICAgSlNfUFJPUF9JTlQzMl9ERUYoIkNWXzMyU0M0IiwgQ1ZfMzJTQzQsIDApLAogICAgSlNfUFJPUF9JTlQzMl9ERUYoIkNWXzMyRkMxIiwgQ1ZfMzJGQzEsIDApLAogICAgSlNfUFJPUF9JTlQzMl9ERUYoIkNWXzMyRkMyIiwgQ1ZfMzJGQzIsIDApLAogICAgSlNfUFJPUF9JTlQzMl9ERUYoIkNWXzMyRkMzIiwgQ1ZfMzJGQzMsIDApLAogICAgSlNfUFJPUF9JTlQzMl9ERUYoIkNWXzMyRkM0IiwgQ1ZfMzJGQzQsIDApLAogICAgSlNfUFJPUF9JTlQzMl9ERUYoIkNWXzY0RkMxIiwgQ1ZfNjRGQzEsIDApLAogICAgSlNfUFJPUF9JTlQzMl9ERUYoIkNWXzY0RkMyIiwgQ1ZfNjRGQzIsIDApLAogICAgSlNfUFJPUF9JTlQzMl9ERUYoIkNWXzY0RkMzIiwgQ1ZfNjRGQzMsIDApLAogICAgSlNfUFJPUF9JTlQzMl9ERUYoIkNWXzY0RkM0IiwgQ1ZfNjRGQzQsIDApLAogICAgSlNfUFJPUF9JTlQzMl9ERUYoIk5PUk1fSEFNTUlORyIsIGN2OjpOT1JNX0hBTU1JTkcsIDApLAogICAgSlNfUFJPUF9JTlQzMl9ERUYoIk5PUk1fSEFNTUlORzIiLCBjdjo6Tk9STV9IQU1NSU5HMiwgMCksCiAgICBKU19QUk9QX0lOVDMyX0RFRigiTk9STV9JTkYiLCBjdjo6Tk9STV9JTkYsIDApLAogICAgSlNfUFJPUF9JTlQzMl9ERUYoIk5PUk1fTDEiLCBjdjo6Tk9STV9MMSwgMCksCiAgICBKU19QUk9QX0lOVDMyX0RFRigiTk9STV9MMiIsIGN2OjpOT1JNX0wyLCAwKSwKICAgIEpTX1BST1BfSU5UMzJfREVGKCJOT1JNX0wyU1FSIiwgY3Y6Ok5PUk1fTDJTUVIsIDApLAogICAgSlNfUFJPUF9JTlQzMl9ERUYoIk5PUk1fTUlOTUFYIiwgY3Y6Ok5PUk1fTUlOTUFYLCAwKSwKICAgIEpTX1BST1BfSU5UMzJfREVGKCJOT1JNX1JFTEFUSVZFIiwgY3Y6Ok5PUk1fUkVMQVRJVkUsIDApLAogICAgSlNfUFJPUF9JTlQzMl9ERUYoIk5PUk1fVFlQRV9NQVNLIiwgY3Y6Ok5PUk1fVFlQRV9NQVNLLCAwKSwKICAgIEpTX1BST1BfSU5UMzJfREVGKCJDT0xPUl9CR1IyQkdSQSIsIGN2OjpDT0xPUl9CR1IyQkdSQSwgMCksCiAgICBKU19QUk9QX0lOVDMyX0RFRigiQ09MT1JfUkdCMlJHQkEiLCBjdjo6Q09MT1JfUkdCMlJHQkEsIDApLAogICAgSlNfUFJPUF9JTlQzMl9ERUYoIkNPTE9SX0JHUkEyQkdSIiwgY3Y6OkNPTE9SX0JHUkEyQkdSLCAwKSwKICAgIEpTX1BST1BfSU5UMzJfREVGKCJDT0xPUl9SR0JBMlJHQiIsIGN2OjpDT0xPUl9SR0JBMlJHQiwgMCksCiAgICBKU19QUk9QX0lOVDMyX0RFRigiQ09MT1JfQkdSMlJHQkEiLCBjdjo6Q09MT1JfQkdSMlJHQkEsIDApLAogICAgSlNfUFJPUF9JTlQzMl9ERUYoIkNPTE9SX1JHQjJCR1JBIiwgY3Y6OkNPTE9SX1JHQjJCR1JBLCAwKSwKICAgIEpTX1BST1BfSU5UMzJfREVGKCJDT0xPUl9SR0JBMkJHUiIsIGN2OjpDT0xPUl9SR0JBMkJHUiwgMCksCiAgICBKU19QUk9QX0lOVDMyX0RFRigiQ09MT1JfQkdSQTJSR0IiLCBjdjo6Q09MT1JfQkdSQTJSR0IsIDApLAogICAgSlNfUFJPUF9JTlQzMl9ERUYoIkNPTE9SX0JHUjJSR0IiLCBjdjo6Q09MT1JfQkdSMlJHQiwgMCksCiAgICBKU19QUk9QX0lOVDMyX0RFRigiQ09MT1JfUkdCMkJHUiIsIGN2OjpDT0xPUl9SR0IyQkdSLCAwKSwKICAgIEpTX1BST1BfSU5UMzJfREVGKCJDT0xPUl9CR1JBMlJHQkEiLCBjdjo6Q09MT1JfQkdSQTJSR0JBLCAwKSwKICAgIEpTX1BST1BfSU5UMzJfREVGKCJDT0xPUl9SR0JBMkJHUkEiLCBjdjo6Q09MT1JfUkdCQTJCR1JBLCAwKSwKICAgIEpTX1BST1BfSU5UMzJfREVGKCJDT0xPUl9CR1IyR1JBWSIsIGN2OjpDT0xPUl9CR1IyR1JBWSwgMCksCiAgICBKU19QUk9QX0lOVDMyX0RFRigiQ09MT1JfUkdCMkdSQVkiLCBjdjo6Q09MT1JfUkdCMkdSQVksIDApLAogICAgSlNfUFJPUF9JTlQzMl9ERUYoIkNPTE9SX0dSQVkyQkdSIiwgY3Y6OkNPTE9SX0dSQVkyQkdSLCAwKSwKICAgIEpTX1BST1BfSU5UMzJfREVGKCJDT0xPUl9HUkFZMlJHQiIsIGN2OjpDT0xPUl9HUkFZMlJHQiwgMCksCiAgICBKU19QUk9QX0lOVDMyX0RFRigiQ09MT1JfR1JBWTJCR1JBIiwgY3Y6OkNPTE9SX0dSQVkyQkdSQSwgMCksCiAgICBKU19QUk9QX0lOVDMyX0RFRigiQ09MT1JfR1JBWTJSR0JBIiwgY3Y6OkNPTE9SX0dSQVkyUkdCQSwgMCksCiAgICBKU19QUk9QX0lOVDMyX0RFRigiQ09MT1JfQkdSQTJHUkFZIiwgY3Y6OkNPTE9SX0JHUkEyR1JBWSwgMCksCiAgICBKU19QUk9QX0lOVDMyX0RFRigiQ09MT1JfUkdCQTJHUkFZIiwgY3Y6OkNPTE9SX1JHQkEyR1JBWSwgMCksCiAgICBKU19QUk9QX0lOVDMyX0RFRigiQ09MT1JfQkdSMkJHUjU2NSIsIGN2OjpDT0xPUl9CR1IyQkdSNTY1LCAwKSwKICAgIEpTX1BST1BfSU5UMzJfREVGKCJDT0xPUl9SR0IyQkdSNTY1IiwgY3Y6OkNPTE9SX1JHQjJCR1I1NjUsIDApLAogICAgSlNfUFJPUF9JTlQzMl9ERUYoIkNPTE9SX0JHUjU2NTJCR1IiLCBjdjo6Q09MT1JfQkdSNTY1MkJHUiwgMCksCiAgICBKU19QUk9QX0lOVDMyX0RFRigiQ09MT1JfQkdSNTY1MlJHQiIsIGN2OjpDT0xPUl9CR1I1NjUyUkdCLCAwKSwKICAgIEpTX1BST1BfSU5UMzJfREVGKCJDT0xPUl9CR1JBMkJHUjU2NSIsIGN2OjpDT0xPUl9CR1JBMkJHUjU2NSwgMCksCiAgICBKU19QUk9QX0lOVDMyX0RFRigiQ09MT1JfUkdCQTJCR1I1NjUiLCBjdjo6Q09MT1JfUkdCQTJCR1I1NjUsIDApLAogICAgSlNfUFJPUF9JTlQzMl9ERUYoIkNPTE9SX0JHUjU2NTJCR1JBIiwgY3Y6OkNPTE9SX0JHUjU2NTJCR1JBLCAwKSwKICAgIEpTX1BST1BfSU5UMzJfREVGKCJDT0xPUl9CR1I1NjUyUkdCQSIsIGN2OjpDT0xPUl9CR1I1NjUyUkdCQSwgMCksCiAgICBKU19QUk9QX0lOVDMyX0RFRigiQ09MT1JfR1JBWTJCR1I1NjUiLCBjdjo6Q09MT1JfR1JBWTJCR1I1NjUsIDApLAogICAgSlNfUFJPUF9JTlQzMl9ERUYoIkNPTE9SX0JHUjU2NTJHUkFZIiwgY3Y6OkNPTE9SX0JHUjU2NTJHUkFZLCAwKSwKICAgIEpTX1BST1BfSU5UMzJfREVGKCJDT0xPUl9CR1IyQkdSNTU1IiwgY3Y6OkNPTE9SX0JHUjJCR1I1NTUsIDApLAogICAgSlNfUFJPUF9JTlQzMl9ERUYoIkNPTE9SX1JHQjJCR1I1NTUiLCBjdjo6Q09MT1JfUkdCMkJHUjU1NSwgMCksCiAgICBKU19QUk9QX0lOVDMyX0RFRigiQ09MT1JfQkdSNTU1MkJHUiIsIGN2OjpDT0xPUl9CR1I1NTUyQkdSLCAwKSwKICAgIEpTX1BST1BfSU5UMzJfREVGKCJDT0xPUl9CR1I1NTUyUkdCIiwgY3Y6OkNPTE9SX0JHUjU1NTJSR0IsIDApLAogICAgSlNfUFJPUF9JTlQzMl9ERUYoIkNPTE9SX0JHUkEyQkdSNTU1IiwgY3Y6OkNPTE9SX0JHUkEyQkdSNTU1LCAwKSwKICAgIEpTX1BST1BfSU5UMzJfREVGKCJDT0xPUl9SR0JBMkJHUjU1NSIsIGN2OjpDT0xPUl9SR0JBMkJHUjU1NSwgMCksCiAgICBKU19QUk9QX0lOVDMyX0RFRigiQ09MT1JfQkdSNTU1MkJHUkEiLCBjdjo6Q09MT1JfQkdSNTU1MkJHUkEsIDApLAogICAgSlNfUFJPUF9JTlQzMl9ERUYoIkNPTE9SX0JHUjU1NTJSR0JBIiwgY3Y6OkNPTE9SX0JHUjU1NTJSR0JBLCAwKSwKICAgIEpTX1BST1BfSU5UMzJfREVGKCJDT0xPUl9HUkFZMkJHUjU1NSIsIGN2OjpDT0xPUl9HUkFZMkJHUjU1NSwgMCksCiAgICBKU19QUk9QX0lOVDMyX0RFRigiQ09MT1JfQkdSNTU1MkdSQVkiLCBjdjo6Q09MT1JfQkdSNTU1MkdSQVksIDApLAogICAgSlNfUFJPUF9JTlQzMl9ERUYoIkNPTE9SX0JHUjJYWVoiLCBjdjo6Q09MT1JfQkdSMlhZWiwgMCksCiAgICBKU19QUk9QX0lOVDMyX0RFRigiQ09MT1JfUkdCMlhZWiIsIGN2OjpDT0xPUl9SR0IyWFlaLCAwKSwKICAgIEpTX1BST1BfSU5UMzJfREVGKCJDT0xPUl9YWVoyQkdSIiwgY3Y6OkNPTE9SX1hZWjJCR1IsIDApLAogICAgSlNfUFJPUF9JTlQzMl9ERUYoIkNPTE9SX1hZWjJSR0IiLCBjdjo6Q09MT1JfWFlaMlJHQiwgMCksCiAgICBKU19QUk9QX0lOVDMyX0RFRigiQ09MT1JfQkdSMllDckNiIiwgY3Y6OkNPTE9SX0JHUjJZQ3JDYiwgMCksCiAgICBKU19QUk9QX0lOVDMyX0RFRigiQ09MT1JfUkdCMllDckNiIiwgY3Y6OkNPTE9SX1JHQjJZQ3JDYiwgMCksCiAgICBKU19QUk9QX0lOVDMyX0RFRigiQ09MT1JfWUNyQ2IyQkdSIiwgY3Y6OkNPTE9SX1lDckNiMkJHUiwgMCksCiAgICBKU19QUk9QX0lOVDMyX0RFRigiQ09MT1JfWUNyQ2IyUkdCIiwgY3Y6OkNPTE9SX1lDckNiMlJHQiwgMCksCiAgICBKU19QUk9QX0lOVDMyX0RFRigiQ09MT1JfQkdSMkhTViIsIGN2OjpDT0xPUl9CR1IySFNWLCAwKSwKICAgIEpTX1BST1BfSU5UMzJfREVGKCJDT0xPUl9SR0IySFNWIiwgY3Y6OkNPTE9SX1JHQjJIU1YsIDApLAogICAgSlNfUFJPUF9JTlQzMl9ERUYoIkNPTE9SX0JHUjJMYWIiLCBjdjo6Q09MT1JfQkdSMkxhYiwgMCksCiAgICBKU19QUk9QX0lOVDMyX0RFRigiQ09MT1JfUkdCMkxhYiIsIGN2OjpDT0xPUl9SR0IyTGFiLCAwKSwKICAgIEpTX1BST1BfSU5UMzJfREVGKCJDT0xPUl9CR1IyTHV2IiwgY3Y6OkNPTE9SX0JHUjJMdXYsIDApLAogICAgSlNfUFJPUF9JTlQzMl9ERUYoIkNPTE9SX1JHQjJMdXYiLCBjdjo6Q09MT1JfUkdCMkx1diwgMCksCiAgICBKU19QUk9QX0lOVDMyX0RFRigiQ09MT1JfQkdSMkhMUyIsIGN2OjpDT0xPUl9CR1IySExTLCAwKSwKICAgIEpTX1BST1BfSU5UMzJfREVGKCJDT0xPUl9SR0IySExTIiwgY3Y6OkNPTE9SX1JHQjJITFMsIDApLAogICAgSlNfUFJPUF9JTlQzMl9ERUYoIkNPTE9SX0hTVjJCR1IiLCBjdjo6Q09MT1JfSFNWMkJHUiwgMCksCiAgICBKU19QUk9QX0lOVDMyX0RFRigiQ09MT1JfSFNWMlJHQiIsIGN2OjpDT0xPUl9IU1YyUkdCLCAwKSwKICAgIEpTX1BST1BfSU5UMzJfREVGKCJDT0xPUl9MYWIyQkdSIiwgY3Y6OkNPTE9SX0xhYjJCR1IsIDApLAogICAgSlNfUFJPUF9JTlQzMl9ERUYoIkNPTE9SX0xhYjJSR0IiLCBjdjo6Q09MT1JfTGFiMlJHQiwgMCksCiAgICBKU19QUk9QX0lOVDMyX0RFRigiQ09MT1JfTHV2MkJHUiIsIGN2OjpDT0xPUl9MdXYyQkdSLCAwKSwKICAgIEpTX1BST1BfSU5UMzJfREVGKCJDT0xPUl9MdXYyUkdCIiwgY3Y6OkNPTE9SX0x1djJSR0IsIDApLAogICAgSlNfUFJPUF9JTlQzMl9ERUYoIkNPTE9SX0hMUzJCR1IiLCBjdjo6Q09MT1JfSExTMkJHUiwgMCksCiAgICBKU19QUk9QX0lOVDMyX0RFRigiQ09MT1JfSExTMlJHQiIsIGN2OjpDT0xPUl9ITFMyUkdCLCAwKSwKICAgIEpTX1BST1BfSU5UMzJfREVGKCJDT0xPUl9CR1IySFNWX0ZVTEwiLCBjdjo6Q09MT1JfQkdSMkhTVl9GVUxMLCAwKSwKICAgIEpTX1BST1BfSU5UMzJfREVGKCJDT0xPUl9SR0IySFNWX0ZVTEwiLCBjdjo6Q09MT1JfUkdCMkhTVl9GVUxMLCAwKSwKICAgIEpTX1BST1BfSU5UMzJfREVGKCJDT0xPUl9CR1IySExTX0ZVTEwiLCBjdjo6Q09MT1JfQkdSMkhMU19GVUxMLCAwKSwKICAgIEpTX1BST1BfSU5UMzJfREVGKCJDT0xPUl9SR0IySExTX0ZVTEwiLCBjdjo6Q09MT1JfUkdCMkhMU19GVUxMLCAwKSwKICAgIEpTX1BST1BfSU5UMzJfREVGKCJDT0xPUl9IU1YyQkdSX0ZVTEwiLCBjdjo6Q09MT1JfSFNWMkJHUl9GVUxMLCAwKSwKICAgIEpTX1BST1BfSU5UMzJfREVGKCJDT0xPUl9IU1YyUkdCX0ZVTEwiLCBjdjo6Q09MT1JfSFNWMlJHQl9GVUxMLCAwKSwKICAgIEpTX1BST1BfSU5UMzJfREVGKCJDT0xPUl9ITFMyQkdSX0ZVTEwiLCBjdjo6Q09MT1JfSExTMkJHUl9GVUxMLCAwKSwKICAgIEpTX1BST1BfSU5UMzJfREVGKCJDT0xPUl9ITFMyUkdCX0ZVTEwiLCBjdjo6Q09MT1JfSExTMlJHQl9GVUxMLCAwKSwKICAgIEpTX1BST1BfSU5UMzJfREVGKCJDT0xPUl9MQkdSMkxhYiIsIGN2OjpDT0xPUl9MQkdSMkxhYiwgMCksCiAgICBKU19QUk9QX0lOVDMyX0RFRigiQ09MT1JfTFJHQjJMYWIiLCBjdjo6Q09MT1JfTFJHQjJMYWIsIDApLAogICAgSlNfUFJPUF9JTlQzMl9ERUYoIkNPTE9SX0xCR1IyTHV2IiwgY3Y6OkNPTE9SX0xCR1IyTHV2LCAwKSwKICAgIEpTX1BST1BfSU5UMzJfREVGKCJDT0xPUl9MUkdCMkx1diIsIGN2OjpDT0xPUl9MUkdCMkx1diwgMCksCiAgICBKU19QUk9QX0lOVDMyX0RFRigiQ09MT1JfTGFiMkxCR1IiLCBjdjo6Q09MT1JfTGFiMkxCR1IsIDApLAogICAgSlNfUFJPUF9JTlQzMl9ERUYoIkNPTE9SX0xhYjJMUkdCIiwgY3Y6OkNPTE9SX0xhYjJMUkdCLCAwKSwKICAgIEpTX1BST1BfSU5UMzJfREVGKCJDT0xPUl9MdXYyTEJHUiIsIGN2OjpDT0xPUl9MdXYyTEJHUiwgMCksCiAgICBKU19QUk9QX0lOVDMyX0RFRigiQ09MT1JfTHV2MkxSR0IiLCBjdjo6Q09MT1JfTHV2MkxSR0IsIDApLAogICAgSlNfUFJPUF9JTlQzMl9ERUYoIkNPTE9SX0JHUjJZVVYiLCBjdjo6Q09MT1JfQkdSMllVViwgMCksCiAgICBKU19QUk9QX0lOVDMyX0RFRigiQ09MT1JfUkdCMllVViIsIGN2OjpDT0xPUl9SR0IyWVVWLCAwKSwKICAgIEpTX1BST1BfSU5UMzJfREVGKCJDT0xPUl9ZVVYyQkdSIiwgY3Y6OkNPTE9SX1lVVjJCR1IsIDApLAogICAgSlNfUFJPUF9JTlQzMl9ERUYoIkNPTE9SX1lVVjJSR0IiLCBjdjo6Q09MT1JfWVVWMlJHQiwgMCksCiAgICBKU19QUk9QX0lOVDMyX0RFRigiQ09MT1JfWVVWMlJHQl9OVjEyIiwgY3Y6OkNPTE9SX1lVVjJSR0JfTlYxMiwgMCksCiAgICBKU19QUk9QX0lOVDMyX0RFRigiQ09MT1JfWVVWMkJHUl9OVjEyIiwgY3Y6OkNPTE9SX1lVVjJCR1JfTlYxMiwgMCksCiAgICBKU19QUk9QX0lOVDMyX0RFRigiQ09MT1JfWVVWMlJHQl9OVjIxIiwgY3Y6OkNPTE9SX1lVVjJSR0JfTlYyMSwgMCksCiAgICBKU19QUk9QX0lOVDMyX0RFRigiQ09MT1JfWVVWMkJHUl9OVjIxIiwgY3Y6OkNPTE9SX1lVVjJCR1JfTlYyMSwgMCksCiAgICBKU19QUk9QX0lOVDMyX0RFRigiQ09MT1JfWVVWNDIwc3AyUkdCIiwgY3Y6OkNPTE9SX1lVVjQyMHNwMlJHQiwgMCksCiAgICBKU19QUk9QX0lOVDMyX0RFRigiQ09MT1JfWVVWNDIwc3AyQkdSIiwgY3Y6OkNPTE9SX1lVVjQyMHNwMkJHUiwgMCksCiAgICBKU19QUk9QX0lOVDMyX0RFRigiQ09MT1JfWVVWMlJHQkFfTlYxMiIsIGN2OjpDT0xPUl9ZVVYyUkdCQV9OVjEyLCAwKSwKICAgIEpTX1BST1BfSU5UMzJfREVGKCJDT0xPUl9ZVVYyQkdSQV9OVjEyIiwgY3Y6OkNPTE9SX1lVVjJCR1JBX05WMTIsIDApLAogICAgSlNfUFJPUF9JTlQzMl9ERUYoIkNPTE9SX1lVVjJSR0JBX05WMjEiLCBjdjo6Q09MT1JfWVVWMlJHQkFfTlYyMSwgMCksCiAgICBKU19QUk9QX0lOVDMyX0RFRigiQ09MT1JfWVVWMkJHUkFfTlYyMSIsIGN2OjpDT0xPUl9ZVVYyQkdSQV9OVjIxLCAwKSwKICAgIEpTX1BST1BfSU5UMzJfREVGKCJDT0xPUl9ZVVY0MjBzcDJSR0JBIiwgY3Y6OkNPTE9SX1lVVjQyMHNwMlJHQkEsIDApLAogICAgSlNfUFJPUF9JTlQzMl9ERUYoIkNPTE9SX1lVVjQyMHNwMkJHUkEiLCBjdjo6Q09MT1JfWVVWNDIwc3AyQkdSQSwgMCksCiAgICBKU19QUk9QX0lOVDMyX0RFRigiQ09MT1JfWVVWMlJHQl9ZVjEyIiwgY3Y6OkNPTE9SX1lVVjJSR0JfWVYxMiwgMCksCiAgICBKU19QUk9QX0lOVDMyX0RFRigiQ09MT1JfWVVWMkJHUl9ZVjEyIiwgY3Y6OkNPTE9SX1lVVjJCR1JfWVYxMiwgMCksCiAgICBKU19QUk9QX0lOVDMyX0RFRigiQ09MT1JfWVVWMlJHQl9JWVVWIiwgY3Y6OkNPTE9SX1lVVjJSR0JfSVlVViwgMCksCiAgICBKU19QUk9QX0lOVDMyX0RFRigiQ09MT1JfWVVWMkJHUl9JWVVWIiwgY3Y6OkNPTE9SX1lVVjJCR1JfSVlVViwgMCksCiAgICBKU19QUk9QX0lOVDMyX0RFRigiQ09MT1JfWVVWMlJHQl9JNDIwIiwgY3Y6OkNPTE9SX1lVVjJSR0JfSTQyMCwgMCksCiAgICBKU19QUk9QX0lOVDMyX0RFRigiQ09MT1JfWVVWMkJHUl9JNDIwIiwgY3Y6OkNPTE9SX1lVVjJCR1JfSTQyMCwgMCksCiAgICBKU19QUk9QX0lOVDMyX0RFRigiQ09MT1JfWVVWNDIwcDJSR0IiLCBjdjo6Q09MT1JfWVVWNDIwcDJSR0IsIDApLAogICAgSlNfUFJPUF9JTlQzMl9ERUYoIkNPTE9SX1lVVjQyMHAyQkdSIiwgY3Y6OkNPTE9SX1lVVjQyMHAyQkdSLCAwKSwKICAgIEpTX1BST1BfSU5UMzJfREVGKCJDT0xPUl9ZVVYyUkdCQV9ZVjEyIiwgY3Y6OkNPTE9SX1lVVjJSR0JBX1lWMTIsIDApLAogICAgSlNfUFJPUF9JTlQzMl9ERUYoIkNPTE9SX1lVVjJCR1JBX1lWMTIiLCBjdjo6Q09MT1JfWVVWMkJHUkFfWVYxMiwgMCksCiAgICBKU19QUk9QX0lOVDMyX0RFRigiQ09MT1JfWVVWMlJHQkFfSVlVViIsIGN2OjpDT0xPUl9ZVVYyUkdCQV9JWVVWLCAwKSwKICAgIEpTX1BST1BfSU5UMzJfREVGKCJDT0xPUl9ZVVYyQkdSQV9JWVVWIiwgY3Y6OkNPTE9SX1lVVjJCR1JBX0lZVVYsIDApLAogICAgSlNfUFJPUF9JTlQzMl9ERUYoIkNPTE9SX1lVVjJSR0JBX0k0MjAiLCBjdjo6Q09MT1JfWVVWMlJHQkFfSTQyMCwgMCksCiAgICBKU19QUk9QX0lOVDMyX0RFRigiQ09MT1JfWVVWMkJHUkFfSTQyMCIsIGN2OjpDT0xPUl9ZVVYyQkdSQV9JNDIwLCAwKSwKICAgIEpTX1BST1BfSU5UMzJfREVGKCJDT0xPUl9ZVVY0MjBwMlJHQkEiLCBjdjo6Q09MT1JfWVVWNDIwcDJSR0JBLCAwKSwKICAgIEpTX1BST1BfSU5UMzJfREVGKCJDT0xPUl9ZVVY0MjBwMkJHUkEiLCBjdjo6Q09MT1JfWVVWNDIwcDJCR1JBLCAwKSwKICAgIEpTX1BST1BfSU5UMzJfREVGKCJDT0xPUl9ZVVYyR1JBWV80MjAiLCBjdjo6Q09MT1JfWVVWMkdSQVlfNDIwLCAwKSwKICAgIEpTX1BST1BfSU5UMzJfREVGKCJDT0xPUl9ZVVYyR1JBWV9OVjIxIiwgY3Y6OkNPTE9SX1lVVjJHUkFZX05WMjEsIDApLAogICAgSlNfUFJPUF9JTlQzMl9ERUYoIkNPTE9SX1lVVjJHUkFZX05WMTIiLCBjdjo6Q09MT1JfWVVWMkdSQVlfTlYxMiwgMCksCiAgICBKU19QUk9QX0lOVDMyX0RFRigiQ09MT1JfWVVWMkdSQVlfWVYxMiIsIGN2OjpDT0xPUl9ZVVYyR1JBWV9ZVjEyLCAwKSwKICAgIEpTX1BST1BfSU5UMzJfREVGKCJDT0xPUl9ZVVYyR1JBWV9JWVVWIiwgY3Y6OkNPTE9SX1lVVjJHUkFZX0lZVVYsIDApLAogICAgSlNfUFJPUF9JTlQzMl9ERUYoIkNPTE9SX1lVVjJHUkFZX0k0MjAiLCBjdjo6Q09MT1JfWVVWMkdSQVlfSTQyMCwgMCksCiAgICBKU19QUk9QX0lOVDMyX0RFRigiQ09MT1JfWVVWNDIwc3AyR1JBWSIsIGN2OjpDT0xPUl9ZVVY0MjBzcDJHUkFZLCAwKSwKICAgIEpTX1BST1BfSU5UMzJfREVGKCJDT0xPUl9ZVVY0MjBwMkdSQVkiLCBjdjo6Q09MT1JfWVVWNDIwcDJHUkFZLCAwKSwKICAgIEpTX1BST1BfSU5UMzJfREVGKCJDT0xPUl9ZVVYyUkdCX1VZVlkiLCBjdjo6Q09MT1JfWVVWMlJHQl9VWVZZLCAwKSwKICAgIEpTX1BST1BfSU5UMzJfREVGKCJDT0xPUl9ZVVYyQkdSX1VZVlkiLCBjdjo6Q09MT1JfWVVWMkJHUl9VWVZZLCAwKSwKICAgIEpTX1BST1BfSU5UMzJfREVGKCJDT0xPUl9ZVVYyUkdCX1k0MjIiLCBjdjo6Q09MT1JfWVVWMlJHQl9ZNDIyLCAwKSwKICAgIEpTX1BST1BfSU5UMzJfREVGKCJDT0xPUl9ZVVYyQkdSX1k0MjIiLCBjdjo6Q09MT1JfWVVWMkJHUl9ZNDIyLCAwKSwKICAgIEpTX1BST1BfSU5UMzJfREVGKCJDT0xPUl9ZVVYyUkdCX1VZTlYiLCBjdjo6Q09MT1JfWVVWMlJHQl9VWU5WLCAwKSwKICAgIEpTX1BST1BfSU5UMzJfREVGKCJDT0xPUl9ZVVYyQkdSX1VZTlYiLCBjdjo6Q09MT1JfWVVWMkJHUl9VWU5WLCAwKSwKICAgIEpTX1BST1BfSU5UMzJfREVGKCJDT0xPUl9ZVVYyUkdCQV9VWVZZIiwgY3Y6OkNPTE9SX1lVVjJSR0JBX1VZVlksIDApLAogICAgSlNfUFJPUF9JTlQzMl9ERUYoIkNPTE9SX1lVVjJCR1JBX1VZVlkiLCBjdjo6Q09MT1JfWVVWMkJHUkFfVVlWWSwgMCksCiAgICBKU19QUk9QX0lOVDMyX0RFRigiQ09MT1JfWVVWMlJHQkFfWTQyMiIsIGN2OjpDT0xPUl9ZVVYyUkdCQV9ZNDIyLCAwKSwKICAgIEpTX1BST1BfSU5UMzJfREVGKCJDT0xPUl9ZVVYyQkdSQV9ZNDIyIiwgY3Y6OkNPTE9SX1lVVjJCR1JBX1k0MjIsIDApLAogICAgSlNfUFJPUF9JTlQzMl9ERUYoIkNPTE9SX1lVVjJSR0JBX1VZTlYiLCBjdjo6Q09MT1JfWVVWMlJHQkFfVVlOViwgMCksCiAgICBKU19QUk9QX0lOVDMyX0RFRigiQ09MT1JfWVVWMkJHUkFfVVlOViIsIGN2OjpDT0xPUl9ZVVYyQkdSQV9VWU5WLCAwKSwKICAgIEpTX1BST1BfSU5UMzJfREVGKCJDT0xPUl9ZVVYyUkdCX1lVWTIiLCBjdjo6Q09MT1JfWVVWMlJHQl9ZVVkyLCAwKSwKICAgIEpTX1BST1BfSU5UMzJfREVGKCJDT0xPUl9ZVVYyQkdSX1lVWTIiLCBjdjo6Q09MT1JfWVVWMkJHUl9ZVVkyLCAwKSwKICAgIEpTX1BST1BfSU5UMzJfREVGKCJDT0xPUl9ZVVYyUkdCX1lWWVUiLCBjdjo6Q09MT1JfWVVWMlJHQl9ZVllVLCAwKSwKICAgIEpTX1BST1BfSU5UMzJfREVGKCJDT0xPUl9ZVVYyQkdSX1lWWVUiLCBjdjo6Q09MT1JfWVVWMkJHUl9ZVllVLCAwKSwKICAgIEpTX1BST1BfSU5UMzJfREVGKCJDT0xPUl9ZVVYyUkdCX1lVWVYiLCBjdjo6Q09MT1JfWVVWMlJHQl9ZVVlWLCAwKSwKICAgIEpTX1BST1BfSU5UMzJfREVGKCJDT0xPUl9ZVVYyQkdSX1lVWVYiLCBjdjo6Q09MT1JfWVVWMkJHUl9ZVVlWLCAwKSwKICAgIEpTX1BST1BfSU5UMzJfREVGKCJDT0xPUl9ZVVYyUkdCX1lVTlYiLCBjdjo6Q09MT1JfWVVWMlJHQl9ZVU5WLCAwKSwKICAgIEpTX1BST1BfSU5UMzJfREVGKCJDT0xPUl9ZVVYyQkdSX1lVTlYiLCBjdjo6Q09MT1JfWVVWMkJHUl9ZVU5WLCAwKSwKICAgIEpTX1BST1BfSU5UMzJfREVGKCJDT0xPUl9ZVVYyUkdCQV9ZVVkyIiwgY3Y6OkNPTE9SX1lVVjJSR0JBX1lVWTIsIDApLAogICAgSlNfUFJPUF9JTlQzMl9ERUYoIkNPTE9SX1lVVjJCR1JBX1lVWTIiLCBjdjo6Q09MT1JfWVVWMkJHUkFfWVVZMiwgMCksCiAgICBKU19QUk9QX0lOVDMyX0RFRigiQ09MT1JfWVVWMlJHQkFfWVZZVSIsIGN2OjpDT0xPUl9ZVVYyUkdCQV9ZVllVLCAwKSwKICAgIEpTX1BST1BfSU5UMzJfREVGKCJDT0xPUl9ZVVYyQkdSQV9ZVllVIiwgY3Y6OkNPTE9SX1lVVjJCR1JBX1lWWVUsIDApLAogICAgSlNfUFJPUF9JTlQzMl9ERUYoIkNPTE9SX1lVVjJSR0JBX1lVWVYiLCBjdjo6Q09MT1JfWVVWMlJHQkFfWVVZViwgMCksCiAgICBKU19QUk9QX0lOVDMyX0RFRigiQ09MT1JfWVVWMkJHUkFfWVVZViIsIGN2OjpDT0xPUl9ZVVYyQkdSQV9ZVVlWLCAwKSwKICAgIEpTX1BST1BfSU5UMzJfREVGKCJDT0xPUl9ZVVYyUkdCQV9ZVU5WIiwgY3Y6OkNPTE9SX1lVVjJSR0JBX1lVTlYsIDApLAogICAgSlNfUFJPUF9JTlQzMl9ERUYoIkNPTE9SX1lVVjJCR1JBX1lVTlYiLCBjdjo6Q09MT1JfWVVWMkJHUkFfWVVOViwgMCksCiAgICBKU19QUk9QX0lOVDMyX0RFRigiQ09MT1JfWVVWMkdSQVlfVVlWWSIsIGN2OjpDT0xPUl9ZVVYyR1JBWV9VWVZZLCAwKSwKICAgIEpTX1BST1BfSU5UMzJfREVGKCJDT0xPUl9ZVVYyR1JBWV9ZVVkyIiwgY3Y6OkNPTE9SX1lVVjJHUkFZX1lVWTIsIDApLAogICAgSlNfUFJPUF9JTlQzMl9ERUYoIkNPTE9SX1lVVjJHUkFZX1k0MjIiLCBjdjo6Q09MT1JfWVVWMkdSQVlfWTQyMiwgMCksCiAgICBKU19QUk9QX0lOVDMyX0RFRigiQ09MT1JfWVVWMkdSQVlfVVlOViIsIGN2OjpDT0xPUl9ZVVYyR1JBWV9VWU5WLCAwKSwKICAgIEpTX1BST1BfSU5UMzJfREVGKCJDT0xPUl9ZVVYyR1JBWV9ZVllVIiwgY3Y6OkNPTE9SX1lVVjJHUkFZX1lWWVUsIDApLAogICAgSlNfUFJPUF9JTlQzMl9ERUYoIkNPTE9SX1lVVjJHUkFZX1lVWVYiLCBjdjo6Q09MT1JfWVVWMkdSQVlfWVVZViwgMCksCiAgICBKU19QUk9QX0lOVDMyX0RFRigiQ09MT1JfWVVWMkdSQVlfWVVOViIsIGN2OjpDT0xPUl9ZVVYyR1JBWV9ZVU5WLCAwKSwKICAgIEpTX1BST1BfSU5UMzJfREVGKCJDT0xPUl9SR0JBMm1SR0JBIiwgY3Y6OkNPTE9SX1JHQkEybVJHQkEsIDApLAogICAgSlNfUFJPUF9JTlQzMl9ERUYoIkNPTE9SX21SR0JBMlJHQkEiLCBjdjo6Q09MT1JfbVJHQkEyUkdCQSwgMCksCiAgICBKU19QUk9QX0lOVDMyX0RFRigiQ09MT1JfUkdCMllVVl9JNDIwIiwgY3Y6OkNPTE9SX1JHQjJZVVZfSTQyMCwgMCksCiAgICBKU19QUk9QX0lOVDMyX0RFRigiQ09MT1JfQkdSMllVVl9JNDIwIiwgY3Y6OkNPTE9SX0JHUjJZVVZfSTQyMCwgMCksCiAgICBKU19QUk9QX0lOVDMyX0RFRigiQ09MT1JfUkdCMllVVl9JWVVWIiwgY3Y6OkNPTE9SX1JHQjJZVVZfSVlVViwgMCksCiAgICBKU19QUk9QX0lOVDMyX0RFRigiQ09MT1JfQkdSMllVVl9JWVVWIiwgY3Y6OkNPTE9SX0JHUjJZVVZfSVlVViwgMCksCiAgICBKU19QUk9QX0lOVDMyX0RFRigiQ09MT1JfUkdCQTJZVVZfSTQyMCIsIGN2OjpDT0xPUl9SR0JBMllVVl9JNDIwLCAwKSwKICAgIEpTX1BST1BfSU5UMzJfREVGKCJDT0xPUl9CR1JBMllVVl9JNDIwIiwgY3Y6OkNPTE9SX0JHUkEyWVVWX0k0MjAsIDApLAogICAgSlNfUFJPUF9JTlQzMl9ERUYoIkNPTE9SX1JHQkEyWVVWX0lZVVYiLCBjdjo6Q09MT1JfUkdCQTJZVVZfSVlVViwgMCksCiAgICBKU19QUk9QX0lOVDMyX0RFRigiQ09MT1JfQkdSQTJZVVZfSVlVViIsIGN2OjpDT0xPUl9CR1JBMllVVl9JWVVWLCAwKSwKICAgIEpTX1BST1BfSU5UMzJfREVGKCJDT0xPUl9SR0IyWVVWX1lWMTIiLCBjdjo6Q09MT1JfUkdCMllVVl9ZVjEyLCAwKSwKICAgIEpTX1BST1BfSU5UMzJfREVGKCJDT0xPUl9CR1IyWVVWX1lWMTIiLCBjdjo6Q09MT1JfQkdSMllVVl9ZVjEyLCAwKSwKICAgIEpTX1BST1BfSU5UMzJfREVGKCJDT0xPUl9SR0JBMllVVl9ZVjEyIiwgY3Y6OkNPTE9SX1JHQkEyWVVWX1lWMTIsIDApLAogICAgSlNfUFJPUF9JTlQzMl9ERUYoIkNPTE9SX0JHUkEyWVVWX1lWMTIiLCBjdjo6Q09MT1JfQkdSQTJZVVZfWVYxMiwgMCksCiAgICBKU19QUk9QX0lOVDMyX0RFRigiQ09MT1JfQmF5ZXJCRzJCR1IiLCBjdjo6Q09MT1JfQmF5ZXJCRzJCR1IsIDApLAogICAgSlNfUFJPUF9JTlQzMl9ERUYoIkNPTE9SX0JheWVyR0IyQkdSIiwgY3Y6OkNPTE9SX0JheWVyR0IyQkdSLCAwKSwKICAgIEpTX1BST1BfSU5UMzJfREVGKCJDT0xPUl9CYXllclJHMkJHUiIsIGN2OjpDT0xPUl9CYXllclJHMkJHUiwgMCksCiAgICBKU19QUk9QX0lOVDMyX0RFRigiQ09MT1JfQmF5ZXJHUjJCR1IiLCBjdjo6Q09MT1JfQmF5ZXJHUjJCR1IsIDApLAogICAgSlNfUFJPUF9JTlQzMl9ERUYoIkNPTE9SX0JheWVyQkcyUkdCIiwgY3Y6OkNPTE9SX0JheWVyQkcyUkdCLCAwKSwKICAgIEpTX1BST1BfSU5UMzJfREVGKCJDT0xPUl9CYXllckdCMlJHQiIsIGN2OjpDT0xPUl9CYXllckdCMlJHQiwgMCksCiAgICBKU19QUk9QX0lOVDMyX0RFRigiQ09MT1JfQmF5ZXJSRzJSR0IiLCBjdjo6Q09MT1JfQmF5ZXJSRzJSR0IsIDApLAogICAgSlNfUFJPUF9JTlQzMl9ERUYoIkNPTE9SX0JheWVyR1IyUkdCIiwgY3Y6OkNPTE9SX0JheWVyR1IyUkdCLCAwKSwKICAgIEpTX1BST1BfSU5UMzJfREVGKCJDT0xPUl9CYXllckJHMkdSQVkiLCBjdjo6Q09MT1JfQmF5ZXJCRzJHUkFZLCAwKSwKICAgIEpTX1BST1BfSU5UMzJfREVGKCJDT0xPUl9CYXllckdCMkdSQVkiLCBjdjo6Q09MT1JfQmF5ZXJHQjJHUkFZLCAwKSwKICAgIEpTX1BST1BfSU5UMzJfREVGKCJDT0xPUl9CYXllclJHMkdSQVkiLCBjdjo6Q09MT1JfQmF5ZXJSRzJHUkFZLCAwKSwKICAgIEpTX1BST1BfSU5UMzJfREVGKCJDT0xPUl9CYXllckdSMkdSQVkiLCBjdjo6Q09MT1JfQmF5ZXJHUjJHUkFZLCAwKSwKICAgIEpTX1BST1BfSU5UMzJfREVGKCJDT0xPUl9CYXllckJHMkJHUl9WTkciLCBjdjo6Q09MT1JfQmF5ZXJCRzJCR1JfVk5HLCAwKSwKICAgIEpTX1BST1BfSU5UMzJfREVGKCJDT0xPUl9CYXllckdCMkJHUl9WTkciLCBjdjo6Q09MT1JfQmF5ZXJHQjJCR1JfVk5HLCAwKSwKICAgIEpTX1BST1BfSU5UMzJfREVGKCJDT0xPUl9CYXllclJHMkJHUl9WTkciLCBjdjo6Q09MT1JfQmF5ZXJSRzJCR1JfVk5HLCAwKSwKICAgIEpTX1BST1BfSU5UMzJfREVGKCJDT0xPUl9CYXllckdSMkJHUl9WTkciLCBjdjo6Q09MT1JfQmF5ZXJHUjJCR1JfVk5HLCAwKSwKICAgIEpTX1BST1BfSU5UMzJfREVGKCJDT0xPUl9CYXllckJHMlJHQl9WTkciLCBjdjo6Q09MT1JfQmF5ZXJCRzJSR0JfVk5HLCAwKSwKICAgIEpTX1BST1BfSU5UMzJfREVGKCJDT0xPUl9CYXllckdCMlJHQl9WTkciLCBjdjo6Q09MT1JfQmF5ZXJHQjJSR0JfVk5HLCAwKSwKICAgIEpTX1BST1BfSU5UMzJfREVGKCJDT0xPUl9CYXllclJHMlJHQl9WTkciLCBjdjo6Q09MT1JfQmF5ZXJSRzJSR0JfVk5HLCAwKSwKICAgIEpTX1BST1BfSU5UMzJfREVGKCJDT0xPUl9CYXllckdSMlJHQl9WTkciLCBjdjo6Q09MT1JfQmF5ZXJHUjJSR0JfVk5HLCAwKSwKICAgIEpTX1BST1BfSU5UMzJfREVGKCJDT0xPUl9CYXllckJHMkJHUl9FQSIsIGN2OjpDT0xPUl9CYXllckJHMkJHUl9FQSwgMCksCiAgICBKU19QUk9QX0lOVDMyX0RFRigiQ09MT1JfQmF5ZXJHQjJCR1JfRUEiLCBjdjo6Q09MT1JfQmF5ZXJHQjJCR1JfRUEsIDApLAogICAgSlNfUFJPUF9JTlQzMl9ERUYoIkNPTE9SX0JheWVyUkcyQkdSX0VBIiwgY3Y6OkNPTE9SX0JheWVyUkcyQkdSX0VBLCAwKSwKICAgIEpTX1BST1BfSU5UMzJfREVGKCJDT0xPUl9CYXllckdSMkJHUl9FQSIsIGN2OjpDT0xPUl9CYXllckdSMkJHUl9FQSwgMCksCiAgICBKU19QUk9QX0lOVDMyX0RFRigiQ09MT1JfQmF5ZXJCRzJSR0JfRUEiLCBjdjo6Q09MT1JfQmF5ZXJCRzJSR0JfRUEsIDApLAogICAgSlNfUFJPUF9JTlQzMl9ERUYoIkNPTE9SX0JheWVyR0IyUkdCX0VBIiwgY3Y6OkNPTE9SX0JheWVyR0IyUkdCX0VBLCAwKSwKICAgIEpTX1BST1BfSU5UMzJfREVGKCJDT0xPUl9CYXllclJHMlJHQl9FQSIsIGN2OjpDT0xPUl9CYXllclJHMlJHQl9FQSwgMCksCiAgICBKU19QUk9QX0lOVDMyX0RFRigiQ09MT1JfQmF5ZXJHUjJSR0JfRUEiLCBjdjo6Q09MT1JfQmF5ZXJHUjJSR0JfRUEsIDApLAogICAgSlNfUFJPUF9JTlQzMl9ERUYoIkNPTE9SX0JheWVyQkcyQkdSQSIsIGN2OjpDT0xPUl9CYXllckJHMkJHUkEsIDApLAogICAgSlNfUFJPUF9JTlQzMl9ERUYoIkNPTE9SX0JheWVyR0IyQkdSQSIsIGN2OjpDT0xPUl9CYXllckdCMkJHUkEsIDApLAogICAgSlNfUFJPUF9JTlQzMl9ERUYoIkNPTE9SX0JheWVyUkcyQkdSQSIsIGN2OjpDT0xPUl9CYXllclJHMkJHUkEsIDApLAogICAgSlNfUFJPUF9JTlQzMl9ERUYoIkNPTE9SX0JheWVyR1IyQkdSQSIsIGN2OjpDT0xPUl9CYXllckdSMkJHUkEsIDApLAogICAgSlNfUFJPUF9JTlQzMl9ERUYoIkNPTE9SX0JheWVyQkcyUkdCQSIsIGN2OjpDT0xPUl9CYXllckJHMlJHQkEsIDApLAogICAgSlNfUFJPUF9JTlQzMl9ERUYoIkNPTE9SX0JheWVyR0IyUkdCQSIsIGN2OjpDT0xPUl9CYXllckdCMlJHQkEsIDApLAogICAgSlNfUFJPUF9JTlQzMl9ERUYoIkNPTE9SX0JheWVyUkcyUkdCQSIsIGN2OjpDT0xPUl9CYXllclJHMlJHQkEsIDApLAogICAgSlNfUFJPUF9JTlQzMl9ERUYoIkNPTE9SX0JheWVyR1IyUkdCQSIsIGN2OjpDT0xPUl9CYXllckdSMlJHQkEsIDApLAogICAgSlNfUFJPUF9JTlQzMl9ERUYoIlJFVFJfRVhURVJOQUwiLCBjdjo6UkVUUl9FWFRFUk5BTCwgMCksCiAgICBKU19QUk9QX0lOVDMyX0RFRigiUkVUUl9MSVNUIiwgY3Y6OlJFVFJfTElTVCwgMCksCiAgICBKU19QUk9QX0lOVDMyX0RFRigiUkVUUl9DQ09NUCIsIGN2OjpSRVRSX0NDT01QLCAwKSwKICAgIEpTX1BST1BfSU5UMzJfREVGKCJSRVRSX1RSRUUiLCBjdjo6UkVUUl9UUkVFLCAwKSwKICAgIEpTX1BST1BfSU5UMzJfREVGKCJSRVRSX0ZMT09ERklMTCIsIGN2OjpSRVRSX0ZMT09ERklMTCwgMCksCiAgICBKU19QUk9QX0lOVDMyX0RFRigiQ0hBSU5fQVBQUk9YX05PTkUiLCBjdjo6Q0hBSU5fQVBQUk9YX05PTkUsIDApLAogICAgSlNfUFJPUF9JTlQzMl9ERUYoIkNIQUlOX0FQUFJPWF9TSU1QTEUiLCBjdjo6Q0hBSU5fQVBQUk9YX1NJTVBMRSwgMCksCiAgICBKU19QUk9QX0lOVDMyX0RFRigiQ0hBSU5fQVBQUk9YX1RDODlfTDEiLCBjdjo6Q0hBSU5fQVBQUk9YX1RDODlfTDEsIDApLAogICAgSlNfUFJPUF9JTlQzMl9ERUYoIkNIQUlOX0FQUFJPWF9UQzg5X0tDT1MiLCBjdjo6Q0hBSU5fQVBQUk9YX1RDODlfS0NPUywgMCksCgogICAgSlNfUFJPUF9JTlQzMl9ERUYoIkJPUkRFUl9DT05TVEFOVCIsIGN2OjpCT1JERVJfQ09OU1RBTlQsIDApLAogICAgSlNfUFJPUF9JTlQzMl9ERUYoIkJPUkRFUl9SRVBMSUNBVEUiLCBjdjo6Qk9SREVSX1JFUExJQ0FURSwgMCksCiAgICBKU19QUk9QX0lOVDMyX0RFRigiQk9SREVSX1JFRkxFQ1QiLCBjdjo6Qk9SREVSX1JFRkxFQ1QsIDApLAogICAgSlNfUFJPUF9JTlQzMl9ERUYoIkJPUkRFUl9XUkFQIiwgY3Y6OkJPUkRFUl9XUkFQLCAwKSwKICAgIEpTX1BST1BfSU5UMzJfREVGKCJCT1JERVJfUkVGTEVDVF8xMDEiLCBjdjo6Qk9SREVSX1JFRkxFQ1RfMTAxLCAwKSwKICAgIEpTX1BST1BfSU5UMzJfREVGKCJCT1JERVJfVFJBTlNQQVJFTlQiLCBjdjo6Qk9SREVSX1RSQU5TUEFSRU5ULCAwKSwKICAgIEpTX1BST1BfSU5UMzJfREVGKCJCT1JERVJfUkVGTEVDVDEwMSIsIGN2OjpCT1JERVJfUkVGTEVDVDEwMSwgMCksCiAgICBKU19QUk9QX0lOVDMyX0RFRigiQk9SREVSX0RFRkFVTFQiLCBjdjo6Qk9SREVSX0RFRkFVTFQsIDApLAogICAgSlNfUFJPUF9JTlQzMl9ERUYoIkJPUkRFUl9JU09MQVRFRCIsIGN2OjpCT1JERVJfSVNPTEFURUQsIDApLAoKICAgIEpTX1BST1BfSU5UMzJfREVGKCJUSFJFU0hfQklOQVJZIiwgY3Y6OlRIUkVTSF9CSU5BUlksIDApLAogICAgSlNfUFJPUF9JTlQzMl9ERUYoIlRIUkVTSF9CSU5BUllfSU5WIiwgY3Y6OlRIUkVTSF9CSU5BUllfSU5WLCAwKSwKICAgIEpTX1BST1BfSU5UMzJfREVGKCJUSFJFU0hfVFJVTkMiLCBjdjo6VEhSRVNIX1RSVU5DLCAwKSwKICAgIEpTX1BST1BfSU5UMzJfREVGKCJUSFJFU0hfVE9aRVJPIiwgY3Y6OlRIUkVTSF9UT1pFUk8sIDApLAogICAgSlNfUFJPUF9JTlQzMl9ERUYoIlRIUkVTSF9UT1pFUk9fSU5WIiwgY3Y6OlRIUkVTSF9UT1pFUk9fSU5WLCAwKSwKICAgIEpTX1BST1BfSU5UMzJfREVGKCJUSFJFU0hfTUFTSyIsIGN2OjpUSFJFU0hfTUFTSywgMCksCiAgICBKU19QUk9QX0lOVDMyX0RFRigiVEhSRVNIX09UU1UiLCBjdjo6VEhSRVNIX09UU1UsIDApLAogICAgSlNfUFJPUF9JTlQzMl9ERUYoIlRIUkVTSF9UUklBTkdMRSIsIGN2OjpUSFJFU0hfVFJJQU5HTEUsIDApLAoKICAgIEpTX1BST1BfSU5UMzJfREVGKCJNT1JQSF9SRUNUIiwgY3Y6Ok1PUlBIX1JFQ1QsIDApLAogICAgSlNfUFJPUF9JTlQzMl9ERUYoIk1PUlBIX0NST1NTIiwgY3Y6Ok1PUlBIX0NST1NTLCAwKSwKICAgIEpTX1BST1BfSU5UMzJfREVGKCJNT1JQSF9FTExJUFNFIiwgY3Y6Ok1PUlBIX0VMTElQU0UsIDApLAogICAgLyp9OwogICAgY29uc3QganNfZnVuY3Rpb25fbGlzdF90IGpzX2N2X3ZpZGVvY2FwdHVyZV9mbGFnc3sqLwogICAgSlNfUFJPUF9JTlQzMl9ERUYoIkNBUF9BTlkiLCBjdjo6Q0FQX0FOWSwgMCksCiAgICBKU19QUk9QX0lOVDMyX0RFRigiQ0FQX1ZGVyIsIGN2OjpDQVBfVkZXLCAwKSwKICAgIEpTX1BST1BfSU5UMzJfREVGKCJDQVBfVjRMIiwgY3Y6OkNBUF9WNEwsIDApLAogICAgSlNfUFJPUF9JTlQzMl9ERUYoIkNBUF9WNEwyIiwgY3Y6OkNBUF9WNEwyLCAwKSwKICAgIEpTX1BST1BfSU5UMzJfREVGKCJDQVBfRklSRVdJUkUiLCBjdjo6Q0FQX0ZJUkVXSVJFLCAwKSwKICAgIEpTX1BST1BfSU5UMzJfREVGKCJDQVBfRklSRVdBUkUiLCBjdjo6Q0FQX0ZJUkVXQVJFLCAwKSwKICAgIEpTX1BST1BfSU5UMzJfREVGKCJDQVBfSUVFRTEzOTQiLCBjdjo6Q0FQX0lFRUUxMzk0LCAwKSwKICAgIEpTX1BST1BfSU5UMzJfREVGKCJDQVBfREMxMzk0IiwgY3Y6OkNBUF9EQzEzOTQsIDApLAogICAgSlNfUFJPUF9JTlQzMl9ERUYoIkNBUF9DTVUxMzk0IiwgY3Y6OkNBUF9DTVUxMzk0LCAwKSwKICAgIEpTX1BST1BfSU5UMzJfREVGKCJDQVBfUVQiLCBjdjo6Q0FQX1FULCAwKSwKICAgIEpTX1BST1BfSU5UMzJfREVGKCJDQVBfVU5JQ0FQIiwgY3Y6OkNBUF9VTklDQVAsIDApLAogICAgSlNfUFJPUF9JTlQzMl9ERUYoIkNBUF9EU0hPVyIsIGN2OjpDQVBfRFNIT1csIDApLAogICAgSlNfUFJPUF9JTlQzMl9ERUYoIkNBUF9QVkFQSSIsIGN2OjpDQVBfUFZBUEksIDApLAogICAgSlNfUFJPUF9JTlQzMl9ERUYoIkNBUF9PUEVOTkkiLCBjdjo6Q0FQX09QRU5OSSwgMCksCiAgICBKU19QUk9QX0lOVDMyX0RFRigiQ0FQX09QRU5OSV9BU1VTIiwgY3Y6OkNBUF9PUEVOTklfQVNVUywgMCksCiAgICBKU19QUk9QX0lOVDMyX0RFRigiQ0FQX0FORFJPSUQiLCBjdjo6Q0FQX0FORFJPSUQsIDApLAogICAgSlNfUFJPUF9JTlQzMl9ERUYoIkNBUF9YSUFQSSIsIGN2OjpDQVBfWElBUEksIDApLAogICAgSlNfUFJPUF9JTlQzMl9ERUYoIkNBUF9BVkZPVU5EQVRJT04iLCBjdjo6Q0FQX0FWRk9VTkRBVElPTiwgMCksCiAgICBKU19QUk9QX0lOVDMyX0RFRigiQ0FQX0dJR0FORVRJWCIsIGN2OjpDQVBfR0lHQU5FVElYLCAwKSwKICAgIEpTX1BST1BfSU5UMzJfREVGKCJDQVBfTVNNRiIsIGN2OjpDQVBfTVNNRiwgMCksCiAgICBKU19QUk9QX0lOVDMyX0RFRigiQ0FQX1dJTlJUIiwgY3Y6OkNBUF9XSU5SVCwgMCksCiAgICBKU19QUk9QX0lOVDMyX0RFRigiQ0FQX0lOVEVMUEVSQyIsIGN2OjpDQVBfSU5URUxQRVJDLCAwKSwKICAgIC8vIEpTX1BST1BfSU5UMzJfREVGKCJDQVBfUkVBTFNFTlNFIiwgY3Y6OkNBUF9SRUFMU0VOU0UsIDApLAogICAgSlNfUFJPUF9JTlQzMl9ERUYoIkNBUF9PUEVOTkkyIiwgY3Y6OkNBUF9PUEVOTkkyLCAwKSwKICAgIEpTX1BST1BfSU5UMzJfREVGKCJDQVBfT1BFTk5JMl9BU1VTIiwgY3Y6OkNBUF9PUEVOTkkyX0FTVVMsIDApLAogICAgSlNfUFJPUF9JTlQzMl9ERUYoIkNBUF9HUEhPVE8yIiwgY3Y6OkNBUF9HUEhPVE8yLCAwKSwKICAgIEpTX1BST1BfSU5UMzJfREVGKCJDQVBfR1NUUkVBTUVSIiwgY3Y6OkNBUF9HU1RSRUFNRVIsIDApLAogICAgSlNfUFJPUF9JTlQzMl9ERUYoIkNBUF9GRk1QRUciLCBjdjo6Q0FQX0ZGTVBFRywgMCksCiAgICBKU19QUk9QX0lOVDMyX0RFRigiQ0FQX0lNQUdFUyIsIGN2OjpDQVBfSU1BR0VTLCAwKSwKICAgIEpTX1BST1BfSU5UMzJfREVGKCJDQVBfQVJBVklTIiwgY3Y6OkNBUF9BUkFWSVMsIDApLAogICAgSlNfUFJPUF9JTlQzMl9ERUYoIkNBUF9PUEVOQ1ZfTUpQRUciLCBjdjo6Q0FQX09QRU5DVl9NSlBFRywgMCksCiAgICBKU19QUk9QX0lOVDMyX0RFRigiQ0FQX0lOVEVMX01GWCIsIGN2OjpDQVBfSU5URUxfTUZYLCAwKSwKICAgIEpTX1BST1BfSU5UMzJfREVGKCJDQVBfWElORSIsIGN2OjpDQVBfWElORSwgMCksCiAgICBKU19QUk9QX0lOVDMyX0RFRigiQ0FQX1BST1BfUE9TX01TRUMiLCBjdjo6Q0FQX1BST1BfUE9TX01TRUMsIDApLAogICAgSlNfUFJPUF9JTlQzMl9ERUYoIkNBUF9QUk9QX1BPU19GUkFNRVMiLCBjdjo6Q0FQX1BST1BfUE9TX0ZSQU1FUywgMCksCiAgICBKU19QUk9QX0lOVDMyX0RFRigiQ0FQX1BST1BfUE9TX0FWSV9SQVRJTyIsIGN2OjpDQVBfUFJPUF9QT1NfQVZJX1JBVElPLCAwKSwKICAgIEpTX1BST1BfSU5UMzJfREVGKCJDQVBfUFJPUF9GUkFNRV9XSURUSCIsIGN2OjpDQVBfUFJPUF9GUkFNRV9XSURUSCwgMCksCiAgICBKU19QUk9QX0lOVDMyX0RFRigiQ0FQX1BST1BfRlJBTUVfSEVJR0hUIiwgY3Y6OkNBUF9QUk9QX0ZSQU1FX0hFSUdIVCwgMCksCiAgICBKU19QUk9QX0lOVDMyX0RFRigiQ0FQX1BST1BfRlBTIiwgY3Y6OkNBUF9QUk9QX0ZQUywgMCksCiAgICBKU19QUk9QX0lOVDMyX0RFRigiQ0FQX1BST1BfRk9VUkNDIiwgY3Y6OkNBUF9QUk9QX0ZPVVJDQywgMCksCiAgICBKU19QUk9QX0lOVDMyX0RFRigiQ0FQX1BST1BfRlJBTUVfQ09VTlQiLCBjdjo6Q0FQX1BST1BfRlJBTUVfQ09VTlQsIDApLAogICAgSlNfUFJPUF9JTlQzMl9ERUYoIkNBUF9QUk9QX0ZPUk1BVCIsIGN2OjpDQVBfUFJPUF9GT1JNQVQsIDApLAogICAgSlNfUFJPUF9JTlQzMl9ERUYoIkNBUF9QUk9QX01PREUiLCBjdjo6Q0FQX1BST1BfTU9ERSwgMCksCiAgICBKU19QUk9QX0lOVDMyX0RFRigiQ0FQX1BST1BfQlJJR0hUTkVTUyIsIGN2OjpDQVBfUFJPUF9CUklHSFRORVNTLCAwKSwKICAgIEpTX1BST1BfSU5UMzJfREVGKCJDQVBfUFJPUF9DT05UUkFTVCIsIGN2OjpDQVBfUFJPUF9DT05UUkFTVCwgMCksCiAgICBKU19QUk9QX0lOVDMyX0RFRigiQ0FQX1BST1BfU0FUVVJBVElPTiIsIGN2OjpDQVBfUFJPUF9TQVRVUkFUSU9OLCAwKSwKICAgIEpTX1BST1BfSU5UMzJfREVGKCJDQVBfUFJPUF9IVUUiLCBjdjo6Q0FQX1BST1BfSFVFLCAwKSwKICAgIEpTX1BST1BfSU5UMzJfREVGKCJDQVBfUFJPUF9HQUlOIiwgY3Y6OkNBUF9QUk9QX0dBSU4sIDApLAogICAgSlNfUFJPUF9JTlQzMl9ERUYoIkNBUF9QUk9QX0VYUE9TVVJFIiwgY3Y6OkNBUF9QUk9QX0VYUE9TVVJFLCAwKSwKICAgIEpTX1BST1BfSU5UMzJfREVGKCJDQVBfUFJPUF9DT05WRVJUX1JHQiIsIGN2OjpDQVBfUFJPUF9DT05WRVJUX1JHQiwgMCksCiAgICBKU19QUk9QX0lOVDMyX0RFRigiQ0FQX1BST1BfV0hJVEVfQkFMQU5DRV9CTFVFX1UiLCBjdjo6Q0FQX1BST1BfV0hJVEVfQkFMQU5DRV9CTFVFX1UsIDApLAogICAgSlNfUFJPUF9JTlQzMl9ERUYoIkNBUF9QUk9QX1JFQ1RJRklDQVRJT04iLCBjdjo6Q0FQX1BST1BfUkVDVElGSUNBVElPTiwgMCksCiAgICBKU19QUk9QX0lOVDMyX0RFRigiQ0FQX1BST1BfTU9OT0NIUk9NRSIsIGN2OjpDQVBfUFJPUF9NT05PQ0hST01FLCAwKSwKICAgIEpTX1BST1BfSU5UMzJfREVGKCJDQVBfUFJPUF9TSEFSUE5FU1MiLCBjdjo6Q0FQX1BST1BfU0hBUlBORVNTLCAwKSwKICAgIEpTX1BST1BfSU5UMzJfREVGKCJDQVBfUFJPUF9BVVRPX0VYUE9TVVJFIiwgY3Y6OkNBUF9QUk9QX0FVVE9fRVhQT1NVUkUsIDApLAogICAgSlNfUFJPUF9JTlQzMl9ERUYoIkNBUF9QUk9QX0dBTU1BIiwgY3Y6OkNBUF9QUk9QX0dBTU1BLCAwKSwKICAgIEpTX1BST1BfSU5UMzJfREVGKCJDQVBfUFJPUF9URU1QRVJBVFVSRSIsIGN2OjpDQVBfUFJPUF9URU1QRVJBVFVSRSwgMCksCiAgICBKU19QUk9QX0lOVDMyX0RFRigiQ0FQX1BST1BfVFJJR0dFUiIsIGN2OjpDQVBfUFJPUF9UUklHR0VSLCAwKSwKICAgIEpTX1BST1BfSU5UMzJfREVGKCJDQVBfUFJPUF9UUklHR0VSX0RFTEFZIiwgY3Y6OkNBUF9QUk9QX1RSSUdHRVJfREVMQVksIDApLAogICAgSlNfUFJPUF9JTlQzMl9ERUYoIkNBUF9QUk9QX1dISVRFX0JBTEFOQ0VfUkVEX1YiLCBjdjo6Q0FQX1BST1BfV0hJVEVfQkFMQU5DRV9SRURfViwgMCksCiAgICBKU19QUk9QX0lOVDMyX0RFRigiQ0FQX1BST1BfWk9PTSIsIGN2OjpDQVBfUFJPUF9aT09NLCAwKSwKICAgIEpTX1BST1BfSU5UMzJfREVGKCJDQVBfUFJPUF9GT0NVUyIsIGN2OjpDQVBfUFJPUF9GT0NVUywgMCksCiAgICBKU19QUk9QX0lOVDMyX0RFRigiQ0FQX1BST1BfR1VJRCIsIGN2OjpDQVBfUFJPUF9HVUlELCAwKSwKICAgIEpTX1BST1BfSU5UMzJfREVGKCJDQVBfUFJPUF9JU09fU1BFRUQiLCBjdjo6Q0FQX1BST1BfSVNPX1NQRUVELCAwKSwKICAgIEpTX1BST1BfSU5UMzJfREVGKCJDQVBfUFJPUF9CQUNLTElHSFQiLCBjdjo6Q0FQX1BST1BfQkFDS0xJR0hULCAwKSwKICAgIEpTX1BST1BfSU5UMzJfREVGKCJDQVBfUFJPUF9QQU4iLCBjdjo6Q0FQX1BST1BfUEFOLCAwKSwKICAgIEpTX1BST1BfSU5UMzJfREVGKCJDQVBfUFJPUF9USUxUIiwgY3Y6OkNBUF9QUk9QX1RJTFQsIDApLAogICAgSlNfUFJPUF9JTlQzMl9ERUYoIkNBUF9QUk9QX1JPTEwiLCBjdjo6Q0FQX1BST1BfUk9MTCwgMCksCiAgICBKU19QUk9QX0lOVDMyX0RFRigiQ0FQX1BST1BfSVJJUyIsIGN2OjpDQVBfUFJPUF9JUklTLCAwKSwKICAgIEpTX1BST1BfSU5UMzJfREVGKCJDQVBfUFJPUF9TRVRUSU5HUyIsIGN2OjpDQVBfUFJPUF9TRVRUSU5HUywgMCksCiAgICBKU19QUk9QX0lOVDMyX0RFRigiQ0FQX1BST1BfQlVGRkVSU0laRSIsIGN2OjpDQVBfUFJPUF9CVUZGRVJTSVpFLCAwKSwKICAgIEpTX1BST1BfSU5UMzJfREVGKCJDQVBfUFJPUF9BVVRPRk9DVVMiLCBjdjo6Q0FQX1BST1BfQVVUT0ZPQ1VTLCAwKSwKICAgIEpTX1BST1BfSU5UMzJfREVGKCJDQVBfUFJPUF9TQVJfTlVNIiwgY3Y6OkNBUF9QUk9QX1NBUl9OVU0sIDApLAogICAgSlNfUFJPUF9JTlQzMl9ERUYoIkNBUF9QUk9QX1NBUl9ERU4iLCBjdjo6Q0FQX1BST1BfU0FSX0RFTiwgMCksCiAgICBKU19QUk9QX0lOVDMyX0RFRigiQ0FQX1BST1BfQkFDS0VORCIsIGN2OjpDQVBfUFJPUF9CQUNLRU5ELCAwKSwKICAgIEpTX1BST1BfSU5UMzJfREVGKCJDQVBfUFJPUF9DSEFOTkVMIiwgY3Y6OkNBUF9QUk9QX0NIQU5ORUwsIDApLAogICAgSlNfUFJPUF9JTlQzMl9ERUYoIkNBUF9QUk9QX0FVVE9fV0IiLCBjdjo6Q0FQX1BST1BfQVVUT19XQiwgMCksCiAgICBKU19QUk9QX0lOVDMyX0RFRigiQ0FQX1BST1BfV0JfVEVNUEVSQVRVUkUiLCBjdjo6Q0FQX1BST1BfV0JfVEVNUEVSQVRVUkUsIDApLAogICAgSlNfUFJPUF9JTlQzMl9ERUYoIkNBUF9QUk9QX0NPREVDX1BJWEVMX0ZPUk1BVCIsIGN2OjpDQVBfUFJPUF9DT0RFQ19QSVhFTF9GT1JNQVQsIDApLAogICAgLyp9OwogICAgY29uc3QganNfZnVuY3Rpb25fbGlzdF90IGpzX2N2X2hpZ2hndWlfZmxhZ3N7Ki8KICAgIEpTX1BST1BfSU5UMzJfREVGKCJXSU5ET1dfTk9STUFMIiwgY3Y6OldJTkRPV19OT1JNQUwsIDApLAogICAgSlNfUFJPUF9JTlQzMl9ERUYoIldJTkRPV19BVVRPU0laRSIsIGN2OjpXSU5ET1dfQVVUT1NJWkUsIDApLAogICAgSlNfUFJPUF9JTlQzMl9ERUYoIldJTkRPV19PUEVOR0wiLCBjdjo6V0lORE9XX09QRU5HTCwgMCksCiAgICBKU19QUk9QX0lOVDMyX0RFRigiV0lORE9XX0ZVTExTQ1JFRU4iLCBjdjo6V0lORE9XX0ZVTExTQ1JFRU4sIDApLAogICAgSlNfUFJPUF9JTlQzMl9ERUYoIldJTkRPV19GUkVFUkFUSU8iLCBjdjo6V0lORE9XX0ZSRUVSQVRJTywgMCksCiAgICBKU19QUk9QX0lOVDMyX0RFRigiV0lORE9XX0tFRVBSQVRJTyIsIGN2OjpXSU5ET1dfS0VFUFJBVElPLCAwKSwKICAgIEpTX1BST1BfSU5UMzJfREVGKCJXSU5ET1dfR1VJX0VYUEFOREVEIiwgY3Y6OldJTkRPV19HVUlfRVhQQU5ERUQsIDApLAogICAgSlNfUFJPUF9JTlQzMl9ERUYoIldJTkRPV19HVUlfTk9STUFMIiwgY3Y6OldJTkRPV19HVUlfTk9STUFMLCAwKSwKCiAgICBKU19QUk9QX0lOVDMyX0RFRigiV05EX1BST1BfRlVMTFNDUkVFTiIsIGN2OjpXTkRfUFJPUF9GVUxMU0NSRUVOLCAwKSwKICAgIEpTX1BST1BfSU5UMzJfREVGKCJXTkRfUFJPUF9BVVRPU0laRSIsIGN2OjpXTkRfUFJPUF9BVVRPU0laRSwgMCksCiAgICBKU19QUk9QX0lOVDMyX0RFRigiV05EX1BST1BfQVNQRUNUX1JBVElPIiwgY3Y6OldORF9QUk9QX0FTUEVDVF9SQVRJTywgMCksCiAgICBKU19QUk9QX0lOVDMyX0RFRigiV05EX1BST1BfT1BFTkdMIiwgY3Y6OldORF9QUk9QX09QRU5HTCwgMCksCiAgICBKU19QUk9QX0lOVDMyX0RFRigiV05EX1BST1BfVklTSUJMRSIsIGN2OjpXTkRfUFJPUF9WSVNJQkxFLCAwKSwKICAgIEpTX1BST1BfSU5UMzJfREVGKCJXTkRfUFJPUF9UT1BNT1NUIiwgY3Y6OldORF9QUk9QX1RPUE1PU1QsIDApLAoKICAgIEpTX1BST1BfSU5UMzJfREVGKCJFVkVOVF9NT1VTRU1PVkUiLCBjdjo6RVZFTlRfTU9VU0VNT1ZFLCAwKSwKICAgIEpTX1BST1BfSU5UMzJfREVGKCJFVkVOVF9MQlVUVE9ORE9XTiIsIGN2OjpFVkVOVF9MQlVUVE9ORE9XTiwgMCksCiAgICBKU19QUk9QX0lOVDMyX0RFRigiRVZFTlRfUkJVVFRPTkRPV04iLCBjdjo6RVZFTlRfUkJVVFRPTkRPV04sIDApLAogICAgSlNfUFJPUF9JTlQzMl9ERUYoIkVWRU5UX01CVVRUT05ET1dOIiwgY3Y6OkVWRU5UX01CVVRUT05ET1dOLCAwKSwKICAgIEpTX1BST1BfSU5UMzJfREVGKCJFVkVOVF9MQlVUVE9OVVAiLCBjdjo6RVZFTlRfTEJVVFRPTlVQLCAwKSwKICAgIEpTX1BST1BfSU5UMzJfREVGKCJFVkVOVF9SQlVUVE9OVVAiLCBjdjo6RVZFTlRfUkJVVFRPTlVQLCAwKSwKICAgIEpTX1BST1BfSU5UMzJfREVGKCJFVkVOVF9NQlVUVE9OVVAiLCBjdjo6RVZFTlRfTUJVVFRPTlVQLCAwKSwKICAgIEpTX1BST1BfSU5UMzJfREVGKCJFVkVOVF9MQlVUVE9OREJMQ0xLIiwgY3Y6OkVWRU5UX0xCVVRUT05EQkxDTEssIDApLAogICAgSlNfUFJPUF9JTlQzMl9ERUYoIkVWRU5UX1JCVVRUT05EQkxDTEsiLCBjdjo6RVZFTlRfUkJVVFRPTkRCTENMSywgMCksCiAgICBKU19QUk9QX0lOVDMyX0RFRigiRVZFTlRfTUJVVFRPTkRCTENMSyIsIGN2OjpFVkVOVF9NQlVUVE9OREJMQ0xLLCAwKSwKICAgIEpTX1BST1BfSU5UMzJfREVGKCJFVkVOVF9NT1VTRVdIRUVMIiwgY3Y6OkVWRU5UX01PVVNFV0hFRUwsIDApLAogICAgSlNfUFJPUF9JTlQzMl9ERUYoIkVWRU5UX01PVVNFSFdIRUVMIiwgY3Y6OkVWRU5UX01PVVNFSFdIRUVMLCAwKSwKCiAgICBKU19QUk9QX0lOVDMyX0RFRigiRVZFTlRfRkxBR19MQlVUVE9OIiwgY3Y6OkVWRU5UX0ZMQUdfTEJVVFRPTiwgMCksCiAgICBKU19QUk9QX0lOVDMyX0RFRigiRVZFTlRfRkxBR19SQlVUVE9OIiwgY3Y6OkVWRU5UX0ZMQUdfUkJVVFRPTiwgMCksCiAgICBKU19QUk9QX0lOVDMyX0RFRigiRVZFTlRfRkxBR19NQlVUVE9OIiwgY3Y6OkVWRU5UX0ZMQUdfTUJVVFRPTiwgMCksCiAgICBKU19QUk9QX0lOVDMyX0RFRigiRVZFTlRfRkxBR19DVFJMS0VZIiwgY3Y6OkVWRU5UX0ZMQUdfQ1RSTEtFWSwgMCksCiAgICBKU19QUk9QX0lOVDMyX0RFRigiRVZFTlRfRkxBR19TSElGVEtFWSIsIGN2OjpFVkVOVF9GTEFHX1NISUZUS0VZLCAwKSwKICAgIEpTX1BST1BfSU5UMzJfREVGKCJFVkVOVF9GTEFHX0FMVEtFWSIsIGN2OjpFVkVOVF9GTEFHX0FMVEtFWSwgMCksCgogICAgSlNfUFJPUF9JTlQzMl9ERUYoIkZPTlRfSEVSU0hFWV9TSU1QTEVYIiwgY3Y6OkZPTlRfSEVSU0hFWV9TSU1QTEVYLCAwKSwKICAgIEpTX1BST1BfSU5UMzJfREVGKCJGT05UX0hFUlNIRVlfUExBSU4iLCBjdjo6Rk9OVF9IRVJTSEVZX1BMQUlOLCAwKSwKICAgIEpTX1BST1BfSU5UMzJfREVGKCJGT05UX0hFUlNIRVlfRFVQTEVYIiwgY3Y6OkZPTlRfSEVSU0hFWV9EVVBMRVgsIDApLAogICAgSlNfUFJPUF9JTlQzMl9ERUYoIkZPTlRfSEVSU0hFWV9DT01QTEVYIiwgY3Y6OkZPTlRfSEVSU0hFWV9DT01QTEVYLCAwKSwKICAgIEpTX1BST1BfSU5UMzJfREVGKCJGT05UX0hFUlNIRVlfVFJJUExFWCIsIGN2OjpGT05UX0hFUlNIRVlfVFJJUExFWCwgMCksCiAgICBKU19QUk9QX0lOVDMyX0RFRigiRk9OVF9IRVJTSEVZX0NPTVBMRVhfU01BTEwiLCBjdjo6Rk9OVF9IRVJTSEVZX0NPTVBMRVhfU01BTEwsIDApLAogICAgSlNfUFJPUF9JTlQzMl9ERUYoIkZPTlRfSEVSU0hFWV9TQ1JJUFRfU0lNUExFWCIsIGN2OjpGT05UX0hFUlNIRVlfU0NSSVBUX1NJTVBMRVgsIDApLAogICAgSlNfUFJPUF9JTlQzMl9ERUYoIkZPTlRfSEVSU0hFWV9TQ1JJUFRfQ09NUExFWCIsIGN2OjpGT05UX0hFUlNIRVlfU0NSSVBUX0NPTVBMRVgsIDApLAogICAgSlNfUFJPUF9JTlQzMl9ERUYoIkZPTlRfSVRBTElDIiwgY3Y6OkZPTlRfSVRBTElDLCAwKSwKCiAgICBKU19QUk9QX0lOVDMyX0RFRigiSElFUl9ORVhUIiwgMCwgMCksCiAgICBKU19QUk9QX0lOVDMyX0RFRigiSElFUl9QUkVWIiwgMSwgMCksCiAgICBKU19QUk9QX0lOVDMyX0RFRigiSElFUl9DSElMRCIsIDIsIDApLAogICAgSlNfUFJPUF9JTlQzMl9ERUYoIkhJRVJfUEFSRU5UIiwgMywgMCksCgogICAgSlNfUFJPUF9JTlQzMl9ERUYoIkhPVUdIX1NUQU5EQVJEIiwgY3Y6OkhPVUdIX1NUQU5EQVJELCAwKSwKICAgIEpTX1BST1BfSU5UMzJfREVGKCJIT1VHSF9QUk9CQUJJTElTVElDIiwgY3Y6OkhPVUdIX1BST0JBQklMSVNUSUMsIDApLAogICAgSlNfUFJPUF9JTlQzMl9ERUYoIkhPVUdIX01VTFRJX1NDQUxFIiwgY3Y6OkhPVUdIX01VTFRJX1NDQUxFLCAwKSwKICAgIEpTX1BST1BfSU5UMzJfREVGKCJIT1VHSF9HUkFESUVOVCIsIGN2OjpIT1VHSF9HUkFESUVOVCwgMCksCiAgICAvLyBKU19QUk9QX0lOVDMyX0RFRigiSE9VR0hfR1JBRElFTlRfQUxUIiwgY3Y6OkhPVUdIX0dSQURJRU5UX0FMVCwgMCksCiAgICBKU19QUk9QX0lOVDMyX0RFRigiSU5URVJfTkVBUkVTVCIsIGN2OjpJTlRFUl9ORUFSRVNULCAwKSwKICAgIEpTX1BST1BfSU5UMzJfREVGKCJJTlRFUl9MSU5FQVIiLCBjdjo6SU5URVJfTElORUFSLCAwKSwKICAgIEpTX1BST1BfSU5UMzJfREVGKCJJTlRFUl9DVUJJQyIsIGN2OjpJTlRFUl9DVUJJQywgMCksCiAgICBKU19QUk9QX0lOVDMyX0RFRigiSU5URVJfQVJFQSIsIGN2OjpJTlRFUl9BUkVBLCAwKSwKICAgIEpTX1BST1BfSU5UMzJfREVGKCJJTlRFUl9MQU5DWk9TNCIsIGN2OjpJTlRFUl9MQU5DWk9TNCwgMCksCiAgICBKU19QUk9QX0lOVDMyX0RFRigiSU5URVJfTElORUFSX0VYQUNUIiwgY3Y6OklOVEVSX0xJTkVBUl9FWEFDVCwgMCksCiAgICBKU19QUk9QX0lOVDMyX0RFRigiSU5URVJfTUFYIiwgY3Y6OklOVEVSX01BWCwgMCksCgogICAgSlNfUFJPUF9JTlQzMl9ERUYoIkNPTlRPVVJTX01BVENIX0kxIiwgY3Y6OkNPTlRPVVJTX01BVENIX0kxLCAwKSwKICAgIEpTX1BST1BfSU5UMzJfREVGKCJDT05UT1VSU19NQVRDSF9JMiIsIGN2OjpDT05UT1VSU19NQVRDSF9JMiwgMCksCiAgICBKU19QUk9QX0lOVDMyX0RFRigiQ09OVE9VUlNfTUFUQ0hfSTMiLCBjdjo6Q09OVE9VUlNfTUFUQ0hfSTMsIDApLAoKICAgIEpTX1BST1BfSU5UMzJfREVGKCJBQ0NFU1NfUkVBRCAiLCBjdjo6QUNDRVNTX1JFQUQsIDApLAogICAgSlNfUFJPUF9JTlQzMl9ERUYoIkFDQ0VTU19XUklURSAiLCBjdjo6QUNDRVNTX1dSSVRFLCAwKSwKICAgIEpTX1BST1BfSU5UMzJfREVGKCJBQ0NFU1NfUlcgIiwgY3Y6OkFDQ0VTU19SVywgMCksCiAgICBKU19QUk9QX0lOVDMyX0RFRigiQUNDRVNTX01BU0sgIiwgY3Y6OkFDQ0VTU19NQVNLLCAwKSwKICAgIEpTX1BST1BfSU5UMzJfREVGKCJBQ0NFU1NfRkFTVCAiLCBjdjo6QUNDRVNTX0ZBU1QsIDApLAogICAgSlNfUFJPUF9JTlQzMl9ERUYoIlVTQUdFX0RFRkFVTFQgIiwgY3Y6OlVTQUdFX0RFRkFVTFQsIDApLAogICAgSlNfUFJPUF9JTlQzMl9ERUYoIlVTQUdFX0FMTE9DQVRFX0hPU1RfTUVNT1JZICIsIGN2OjpVU0FHRV9BTExPQ0FURV9IT1NUX01FTU9SWSwgMCksCiAgICBKU19QUk9QX0lOVDMyX0RFRigiVVNBR0VfQUxMT0NBVEVfREVWSUNFX01FTU9SWSAiLCBjdjo6VVNBR0VfQUxMT0NBVEVfREVWSUNFX01FTU9SWSwgMCksCiAgICBKU19QUk9QX0lOVDMyX0RFRigiVVNBR0VfQUxMT0NBVEVfU0hBUkVEX01FTU9SWSAiLCBjdjo6VVNBR0VfQUxMT0NBVEVfU0hBUkVEX01FTU9SWSwgMCksCgogICAgSlNfQ1ZfQ09OU1RBTlQoSU1XUklURV9KUEVHX1FVQUxJVFkpLAogICAgSlNfQ1ZfQ09OU1RBTlQoSU1XUklURV9KUEVHX1BST0dSRVNTSVZFKSwKICAgIEpTX0NWX0NPTlNUQU5UKElNV1JJVEVfSlBFR19PUFRJTUlaRSksCiAgICBKU19DVl9DT05TVEFOVChJTVdSSVRFX0pQRUdfUlNUX0lOVEVSVkFMKSwKICAgIEpTX0NWX0NPTlNUQU5UKElNV1JJVEVfSlBFR19MVU1BX1FVQUxJVFkpLAogICAgSlNfQ1ZfQ09OU1RBTlQoSU1XUklURV9KUEVHX0NIUk9NQV9RVUFMSVRZKSwKICAgIEpTX0NWX0NPTlNUQU5UKElNV1JJVEVfUE5HX0NPTVBSRVNTSU9OKSwKICAgIEpTX0NWX0NPTlNUQU5UKElNV1JJVEVfUE5HX1NUUkFURUdZKSwKICAgIEpTX0NWX0NPTlNUQU5UKElNV1JJVEVfUE5HX0JJTEVWRUwpLAogICAgSlNfQ1ZfQ09OU1RBTlQoSU1XUklURV9QWE1fQklOQVJZKSwKICAgIEpTX0NWX0NPTlNUQU5UKElNV1JJVEVfRVhSX1RZUEUpLAogICAgSlNfQ1ZfQ09OU1RBTlQoSU1XUklURV9XRUJQX1FVQUxJVFkpLAogICAgSlNfQ1ZfQ09OU1RBTlQoSU1XUklURV9QQU1fVFVQTEVUWVBFKSwKICAgIEpTX0NWX0NPTlNUQU5UKElNV1JJVEVfVElGRl9SRVNVTklUKSwKICAgIEpTX0NWX0NPTlNUQU5UKElNV1JJVEVfVElGRl9YRFBJKSwKICAgIEpTX0NWX0NPTlNUQU5UKElNV1JJVEVfVElGRl9ZRFBJKSwKICAgIEpTX0NWX0NPTlNUQU5UKElNV1JJVEVfVElGRl9DT01QUkVTU0lPTiksCiAgICBKU19DVl9DT05TVEFOVChJTVdSSVRFX0pQRUcyMDAwX0NPTVBSRVNTSU9OX1gxMDAwKSwKICAgIEpTX0NWX0NPTlNUQU5UKElNV1JJVEVfRVhSX1RZUEVfSEFMRiksCiAgICBKU19DVl9DT05TVEFOVChJTVdSSVRFX0VYUl9UWVBFX0ZMT0FUKSwKICAgIEpTX0NWX0NPTlNUQU5UKElNV1JJVEVfUE5HX1NUUkFURUdZX0RFRkFVTFQpLAogICAgSlNfQ1ZfQ09OU1RBTlQoSU1XUklURV9QTkdfU1RSQVRFR1lfRklMVEVSRUQpLAogICAgSlNfQ1ZfQ09OU1RBTlQoSU1XUklURV9QTkdfU1RSQVRFR1lfSFVGRk1BTl9PTkxZKSwKICAgIEpTX0NWX0NPTlNUQU5UKElNV1JJVEVfUE5HX1NUUkFURUdZX1JMRSksCiAgICBKU19DVl9DT05TVEFOVChJTVdSSVRFX1BOR19TVFJBVEVHWV9GSVhFRCksCiAgICBKU19DVl9DT05TVEFOVChJTVdSSVRFX1BBTV9GT1JNQVRfTlVMTCksCiAgICBKU19DVl9DT05TVEFOVChJTVdSSVRFX1BBTV9GT1JNQVRfQkxBQ0tBTkRXSElURSksCiAgICBKU19DVl9DT05TVEFOVChJTVdSSVRFX1BBTV9GT1JNQVRfR1JBWVNDQUxFKSwKICAgIEpTX0NWX0NPTlNUQU5UKElNV1JJVEVfUEFNX0ZPUk1BVF9HUkFZU0NBTEVfQUxQSEEpLAogICAgSlNfQ1ZfQ09OU1RBTlQoSU1XUklURV9QQU1fRk9STUFUX1JHQiksCiAgICBKU19DVl9DT05TVEFOVChJTVdSSVRFX1BBTV9GT1JNQVRfUkdCX0FMUEhBKSwKCiAgICBKU19DVl9DT05TVEFOVChGSUxMRUQpLAogICAgSlNfQ1ZfQ09OU1RBTlQoTElORV84KSwKICAgIEpTX0NWX0NPTlNUQU5UKExJTkVfQUEpLAp9OwoKc3RkOjpzdHJpbmcKanNfcHJvcF9mbGFncyhpbnQgZmxhZ3MpIHsKICBzdGQ6OnZlY3Rvcjxjb25zdCBjaGFyKj4gbmFtZXM7CiAgaWYoZmxhZ3MgJiBKU19QUk9QX0NPTkZJR1VSQUJMRSkKICAgIG5hbWVzLnB1c2hfYmFjaygiQ09ORklHVVJBQkxFIik7CiAgaWYoZmxhZ3MgJiBKU19QUk9QX1dSSVRBQkxFKQogICAgbmFtZXMucHVzaF9iYWNrKCJXUklUQUJMRSIpOwogIGlmKGZsYWdzICYgSlNfUFJPUF9FTlVNRVJBQkxFKQogICAgbmFtZXMucHVzaF9iYWNrKCJFTlVNRVJBQkxFIik7CiAgaWYoZmxhZ3MgJiBKU19QUk9QX05PUk1BTCkKICAgIG5hbWVzLnB1c2hfYmFjaygiTk9STUFMIik7CiAgaWYoZmxhZ3MgJiBKU19QUk9QX0dFVFNFVCkKICAgIG5hbWVzLnB1c2hfYmFjaygiR0VUU0VUIik7CiAgaWYoZmxhZ3MgJiBKU19QUk9QX1ZBUlJFRikKICAgIG5hbWVzLnB1c2hfYmFjaygiVkFSUkVGIik7CiAgaWYoZmxhZ3MgJiBKU19QUk9QX0FVVE9JTklUKQogICAgbmFtZXMucHVzaF9iYWNrKCJBVVRPSU5JVCIpOwogIHJldHVybiBqb2luKG5hbWVzLmNiZWdpbigpLCBuYW1lcy5jZW5kKCksICJ8Iik7Cn0KCnRlbXBsYXRlPGNsYXNzIFN0cmVhbT4KU3RyZWFtJgpvcGVyYXRvcjw8KFN0cmVhbSYgcywgY29uc3QgSlNDRnVuY3Rpb25MaXN0RW50cnkmIGVudHJ5KSB7CiAgc3RkOjpzdHJpbmcgbmFtZShlbnRyeS5uYW1lKTsKICBzIDw8IG5hbWUgPDwgc3RkOjpzZXR3KDMwIC0gbmFtZS5zaXplKCkpIDw8ICcgJzsKICBzIDw8ICJ0eXBlID0gIgogICAgPDwgKHN0ZDo6dmVjdG9yPGNvbnN0IGNoYXIqPnsiQ0ZVTkMiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiQ0dFVFNFVCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJDR0VUU0VUX01BR0lDIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIlBST1BfU1RSSU5HIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIlBST1BfSU5UMzIiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiUFJPUF9JTlQ2NCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJQUk9QX0RPVUJMRSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJQUk9QX1VOREVGSU5FRCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJPQkpFQ1QiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiQUxJQVMifSlbZW50cnkuZGVmX3R5cGVdCiAgICA8PCAiLCAiOwogIHN3aXRjaChlbnRyeS5kZWZfdHlwZSkgewogICAgY2FzZSBKU19ERUZfQ0dFVFNFVF9NQUdJQzogcyA8PCAibWFnaWMgPSAiIDw8ICh1bnNpZ25lZCBpbnQpZW50cnkubWFnaWMgPDwgIiwgIjsgYnJlYWs7CiAgICBjYXNlIEpTX0RFRl9QUk9QX0lOVDMyOiBzIDw8ICJ2YWx1ZSA9ICIgPDwgc3RkOjpzZXR3KDkpIDw8IGVudHJ5LnUuaTMyIDw8ICIsICI7IGJyZWFrOwogICAgY2FzZSBKU19ERUZfUFJPUF9JTlQ2NDogcyA8PCAidmFsdWUgPSAiIDw8IHN0ZDo6c2V0dyg5KSA8PCBlbnRyeS51Lmk2NCA8PCAiLCAiOyBicmVhazsKICAgIGNhc2UgSlNfREVGX1BST1BfRE9VQkxFOiBzIDw8ICJ2YWx1ZSA9ICIgPDwgc3RkOjpzZXR3KDkpIDw8IGVudHJ5LnUuZjY0IDw8ICIsICI7IGJyZWFrOwogICAgY2FzZSBKU19ERUZfUFJPUF9VTkRFRklORUQ6CiAgICAgIHMgPDwgInZhbHVlID0gIiA8PCBzdGQ6OnNldHcoOSkgPDwgInVuZGVmaW5lZCIKICAgICAgICA8PCAiLCAiOwogICAgICBicmVhazsKICAgIGNhc2UgSlNfREVGX1BST1BfU1RSSU5HOiBzIDw8ICJ2YWx1ZSA9ICIgPDwgc3RkOjpzZXR3KDkpIDw8IGVudHJ5LnUuc3RyIDw8ICIsICI7IGJyZWFrOwogIH0KICBzIDw8ICJmbGFncyA9ICIgPDwganNfcHJvcF9mbGFncyhlbnRyeS5wcm9wX2ZsYWdzKSA8PCBzdGQ6OmVuZGw7CiAgcmV0dXJuIHM7Cn0KCnRlbXBsYXRlPGNsYXNzIFN0cmVhbSwgY2xhc3MgSXRlbT4KU3RyZWFtJgpvcGVyYXRvcjw8KFN0cmVhbSYgcywgY29uc3Qgc3RkOjp2ZWN0b3I8SXRlbT4mIHZlY3RvcikgewogIHNpemVfdCBpID0gMDsKICBmb3IoYXV0byBlbnRyeSA6IHZlY3RvcikgewoKICAgIHMgPDwgIiMiIDw8IGkgPDwgIiAiOwogICAgcyA8PCBlbnRyeTsKICAgIGkrKzsKICB9CiAgcmV0dXJuIHM7Cn0KCmV4dGVybiAiQyIgaW50CmpzX2N2X2luaXQoSlNDb250ZXh0KiBjdHgsIEpTTW9kdWxlRGVmKiBtKSB7CgogIC8qIHN0ZDo6Y2VyciA8PCAianNfY3Zfc3RhdGljX2Z1bmNzOiIgPDwgc3RkOjplbmRsIDw8IGpzX2N2X3N0YXRpY19mdW5jczsKICAgc3RkOjpjZXJyIDw8ICJqc19jdl9zdGF0aWNfZnVuY3Muc2l6ZSgpID0gIiA8PCBqc19jdl9zdGF0aWNfZnVuY3Muc2l6ZSgpIDw8IHN0ZDo6ZW5kbDsqLwogIGlmKG0pCiAgICBKU19TZXRNb2R1bGVFeHBvcnRMaXN0KGN0eCwgbSwganNfY3Zfc3RhdGljX2Z1bmNzLmRhdGEoKSwganNfY3Zfc3RhdGljX2Z1bmNzLnNpemUoKSk7CgogIEpTVmFsdWUgZyA9IEpTX0dldEdsb2JhbE9iamVjdChjdHgpOwogIGN2X2NsYXNzID0gSlNfTmV3T2JqZWN0KGN0eCk7CiAgSlNfU2V0UHJvcGVydHlGdW5jdGlvbkxpc3QoY3R4LCBjdl9jbGFzcywganNfY3Zfc3RhdGljX2Z1bmNzLmRhdGEoKSwganNfY3Zfc3RhdGljX2Z1bmNzLnNpemUoKSk7CgogIGlmKEpTX0lzT2JqZWN0KGcpKSB7CiAgICBKU0F0b20gYXRvbTsKICAgIGF0b20gPSBKU19OZXdBdG9tKGN0eCwgImN2Iik7CiAgICBKU19TZXRQcm9wZXJ0eUludGVybmFsKGN0eCwgZywgYXRvbSwgY3ZfY2xhc3MsIDApOwogIH0KCiAgSlNfRnJlZVZhbHVlKGN0eCwgZyk7CiAgcmV0dXJuIDA7Cn0KCmV4dGVybiAiQyIgVklTSUJMRSB2b2lkCmpzX2N2X2V4cG9ydChKU0NvbnRleHQqIGN0eCwgSlNNb2R1bGVEZWYqIG0pIHsKICBKU19BZGRNb2R1bGVFeHBvcnRMaXN0KGN0eCwgbSwganNfY3Zfc3RhdGljX2Z1bmNzLmRhdGEoKSwganNfY3Zfc3RhdGljX2Z1bmNzLnNpemUoKSk7CiAgSlNfQWRkTW9kdWxlRXhwb3J0KGN0eCwgbSwgImRlZmF1bHQiKTsKfQoKI2lmIGRlZmluZWQoSlNfQ1ZfTU9EVUxFKQojZGVmaW5lIEpTX0lOSVRfTU9EVUxFIC8qVklTSUJMRSovIGpzX2luaXRfbW9kdWxlCiNlbHNlCiNkZWZpbmUgSlNfSU5JVF9NT0RVTEUgLypWSVNJQkxFKi8ganNfaW5pdF9tb2R1bGVfY3YKI2VuZGlmCgpleHRlcm4gIkMiIEpTTW9kdWxlRGVmKgpKU19JTklUX01PRFVMRShKU0NvbnRleHQqIGN0eCwgY29uc3QgY2hhciogbW9kdWxlX25hbWUpIHsKICBKU01vZHVsZURlZiogbTsKICBtID0gSlNfTmV3Q01vZHVsZShjdHgsIG1vZHVsZV9uYW1lLCAmanNfY3ZfaW5pdCk7CiAgaWYoIW0pCiAgICByZXR1cm4gTlVMTDsKICBqc19jdl9leHBvcnQoY3R4LCBtKTsKICByZXR1cm4gbTsKfQAAAAAAAAAAP0oBAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAMEgBAAAAAAAwSAEAAAAAAAAAAAAAAPC/"
				]
			]
		},
		{
			"file": "js_cv.hpp",
			"settings":
			{
				"buffer_size": 1321,
				"line_ending": "Unix"
			},
			"undo_stack":
			[
				[
					3,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"AQAAAOEAAAAAAAAA4gAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA4QAAAAAAAADhAAAAAAAAAAAAAAAAAPC/"
				],
				[
					4,
					1,
					"paste",
					null,
					"AQAAAOIAAAAAAAAAHwEAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA4gAAAAAAAADiAAAAAAAAAAAAAAAAAPC/"
				],
				[
					5,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAAApBQAAI2lmbmRlZiBKU19DVl9IUFAKI2RlZmluZSBKU19DVl9IUFAKCiNpbmNsdWRlIDxvcGVuY3YyL2NvcmUuaHBwPgojaW5jbHVkZSAianNiaW5kaW5ncy5ocHAiCiNpbmNsdWRlICJqc19jb250b3VyLmhwcCIKI2luY2x1ZGUgImpzX3R5cGVkX2FycmF5LmhwcCIKCmV4dGVybiAiQyIgSlNDbGFzc0lEIGpzX21hdF9jbGFzc19pZCwganNfdW1hdF9jbGFzc19pZCwganNfY29udG91cl9jbGFzc19pZDsKCmV4dGVybiAiQyIgVklTSUJMRSBpbnQganNfY3ZfaW5pdChKU0NvbnRleHQqLCBKU01vZHVsZURlZiopOwoKc3RhdGljIGlubGluZSBKU0lucHV0T3V0cHV0QXJyYXkKanNfY3ZfaW5wdXRvdXRwdXRhcnJheShKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHZhbHVlKSB7CiAgY3Y6Ok1hdCogbWF0OwogIGN2OjpVTWF0KiB1bWF0OwogIEpTQ29udG91ckRhdGE8ZG91YmxlPiogY29udG91cjsKICBKU0NvbnRvdXJzRGF0YTxkb3VibGU+KiBjb250b3VyczsKCiAgaWYoKG1hdCA9IHN0YXRpY19jYXN0PGN2OjpNYXQqPihKU19HZXRPcGFxdWUodmFsdWUsIGpzX21hdF9jbGFzc19pZCkpKSkKICAgIHJldHVybiBKU0lucHV0T3V0cHV0QXJyYXkoKm1hdCk7CiAgaWYoKHVtYXQgPSBzdGF0aWNfY2FzdDxjdjo6VU1hdCo+KEpTX0dldE9wYXF1ZSh2YWx1ZSwganNfdW1hdF9jbGFzc19pZCkpKSkKICAgIHJldHVybiBKU0lucHV0T3V0cHV0QXJyYXkoKnVtYXQpOwogIGlmKGpzX2NvbnRvdXJfY2xhc3NfaWQpIHsKICAgIGlmKChjb250b3VyID0gc3RhdGljX2Nhc3Q8SlNDb250b3VyRGF0YTxkb3VibGU+Kj4oSlNfR2V0T3BhcXVlKHZhbHVlLCBqc19jb250b3VyX2NsYXNzX2lkKSkpKQogICAgICByZXR1cm4gSlNJbnB1dE91dHB1dEFycmF5KGN2OjpNYXQoKmNvbnRvdXIpKTsKICB9CgogIGlmKGpzX2lzX2FycmF5YnVmZmVyKGN0eCwgdmFsdWUpKSB7CiAgICB1aW50OF90KiBwdHI7CiAgICBzaXplX3Qgc2l6ZTsKICAgIHB0ciA9IEpTX0dldEFycmF5QnVmZmVyKGN0eCwgJnNpemUsIHZhbHVlKTsKCiAgICByZXR1cm4gSlNJbnB1dE91dHB1dEFycmF5KHB0ciwgc2l6ZSk7CiAgfQoKICBpZihqc19pc190eXBlZGFycmF5KGN0eCwgdmFsdWUpKQogICAgcmV0dXJuIGpzX3R5cGVkYXJyYXlfaW5wdXRvdXRwdXRhcnJheShjdHgsIHZhbHVlKTsKCiAgcmV0dXJuIGN2Ojpub0FycmF5KCk7Cn0KCnRlbXBsYXRlPGNsYXNzIFQ+CnN0YXRpYyBpbmxpbmUgYm9vbApqc19pc19ub2FycmF5KGNvbnN0IFQmIGFycmF5KSB7CiAgcmV0dXJuICZhcnJheSA9PSAmY3Y6Om5vQXJyYXkoKTsKfQoKI2VuZGlmIC8qIGRlZmluZWQoSlNfQ1ZfSFBQKSAqLwAAAAAAAAAAKQUAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAHwEAAAAAAAAfAQAAAAAAAAAAAAAAAPC/"
				]
			]
		},
		{
			"file": "js_draw.cpp",
			"settings":
			{
				"buffer_size": 16098,
				"line_ending": "Unix"
			},
			"undo_stack":
			[
				[
					3,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"AQAAAGsBAAAAAAAAbAEAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAawEAAAAAAABrAQAAAAAAAAAAAAAAAPC/"
				],
				[
					4,
					1,
					"paste",
					null,
					"AQAAAGwBAAAAAAAAqwEAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAbAEAAAAAAABsAQAAAAAAAAAAAAAAAPC/"
				],
				[
					8,
					1,
					"left_delete",
					null,
					"AQAAACIBAAAAAAAAIgEAAAAAAAAxAAAACi8vI2luY2x1ZGUgInBsb3QtY3YuaHBwIgovLyNpbmNsdWRlICJjb2xvci5ocHAiCg",
					"AQAAAAAAAAABAAAAUwEAAAAAAAAiAQAAAAAAAAAAAAAAAAAA"
				],
				[
					11,
					1,
					"left_delete",
					null,
					"AQAAAMUAAAAAAAAAxQAAAAAAAAApAAAALy8jaW5jbHVkZSA8b3BlbmN2Mi9pbWdwcm9jL2ltZ3Byb2MuaHBwPgo",
					"AQAAAAAAAAABAAAAxQAAAAAAAADuAAAAAAAAAAAAAAAAAAAA"
				],
				[
					12,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAACoPgAAI2luY2x1ZGUgImpzYmluZGluZ3MuaHBwIgojaW5jbHVkZSAianNfcG9pbnQuaHBwIgojaW5jbHVkZSAianNfbWF0LmhwcCIKI2luY2x1ZGUgImpzX3VtYXQuaHBwIgojaW5jbHVkZSAianNfYXJyYXkuaHBwIgojaW5jbHVkZSAianNfcmVjdC5ocHAiCiNpbmNsdWRlICJqc19jdi5ocHAiCgojaW5jbHVkZSA8b3BlbmN2Mi9jb3JlL2NvcmUuaHBwPgojaW5jbHVkZSA8b3BlbmN2Mi9mcmVldHlwZS5ocHA+CiNpbmNsdWRlIDxpb3N0cmVhbT4KI2luY2x1ZGUgImdlb21ldHJ5LmhwcCIKCmV4dGVybiAiQyIgVklTSUJMRSBpbnQganNfZHJhd19pbml0KEpTQ29udGV4dCosIEpTTW9kdWxlRGVmKik7Cgpjdjo6UHRyPGN2OjpmcmVldHlwZTo6RnJlZVR5cGUyPiBmcmVldHlwZTIgPSBudWxscHRyOwpzdGQ6OnN0cmluZyBmcmVldHlwZTJfZmFjZTsKCmV4dGVybiAiQyIgewoKY3Y6Ok1hdCogZHB0ciA9IDA7CgpzdGF0aWMgSlNWYWx1ZQpqc19kcmF3X2NpcmNsZShKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2KSB7CiAgSlNJbnB1dE91dHB1dEFycmF5IGRzdDsKICBpbnQgaSA9IDAsIHJldCA9IC0xOwogIEpTUG9pbnREYXRhPGRvdWJsZT4gcG9pbnQ7CiAgaW50MzJfdCB4LCB5OwogIGludCByYWRpdXMgPSAwOwogIEpTQ29sb3JEYXRhPGRvdWJsZT4gY29sb3I7CiAgYm9vbCBhbnRpYWxpYXMgPSB0cnVlOwogIGludCB0aGlja25lc3MgPSAtMTsKICBpbnQgbGluZVR5cGUgPSBjdjo6TElORV9BQTsKCiAgaWYoYXJnYyA+IGkpIHsKICAgIGlmKCFqc19pc19ub2FycmF5KChkc3QgPSBqc191bWF0X29yX21hdChjdHgsIGFyZ3ZbaV0pKSkpCiAgICAgIGkrKzsKICB9IGVsc2UKICAgIGRzdCA9ICpkcHRyOwoKICBpZihqc19pc19ub2FycmF5KGRzdCkpCiAgICByZXR1cm4gSlNfRVhDRVBUSU9OOwoKICBpZihqc19wb2ludF9yZWFkKGN0eCwgYXJndltpXSwgJnBvaW50KSkgewogICAgeCA9IHBvaW50Lng7CiAgICB5ID0gcG9pbnQueTsKICAgIGkrKzsKICB9IGVsc2UgewogICAgSlNfVG9JbnQzMihjdHgsICZ4LCBhcmd2W2ldKTsKICAgIEpTX1RvSW50MzIoY3R4LCAmeSwgYXJndltpICsgMV0pOwogICAgaSArPSAyOwogIH0KCiAgaWYoYXJnYyA+IGkgJiYgSlNfSXNOdW1iZXIoYXJndltpXSkpCiAgICBqcy5nZXRfbnVtYmVyKGFyZ3ZbaSsrXSwgcmFkaXVzKTsKCiAgaWYoYXJnYyA+IGkpIHsKICAgIGpzX2NvbG9yX3JlYWQoY3R4LCBhcmd2W2ldLCAmY29sb3IpOwogICAgaSsrOwogIH0KCiAgaWYoYXJnYyA+IGkgJiYgSlNfSXNOdW1iZXIoYXJndltpXSkpCiAgICBqcy5nZXRfbnVtYmVyKGFyZ3ZbaSsrXSwgdGhpY2tuZXNzKTsKICAvKiovCiAgaWYoYXJnYyA+IGkpIHsKICAgIGlmKGpzLmlzX2Jvb2woYXJndltpXSkpIHsKICAgICAganMuZ2V0X2Jvb2xlYW4oYXJndltpKytdLCBhbnRpYWxpYXMpOwogICAgICBsaW5lVHlwZSA9IGFudGlhbGlhcyA/IGN2OjpMSU5FX0FBIDogY3Y6OkxJTkVfODsKCiAgICB9IGVsc2UgaWYoSlNfSXNOdW1iZXIoYXJndltpXSkpIHsKICAgICAganMuZ2V0X251bWJlcihhcmd2W2krK10sIGxpbmVUeXBlKTsKICAgIH0KICB9CgogIGN2OjpjaXJjbGUoZHN0LCBwb2ludCwgcmFkaXVzLCAqcmVpbnRlcnByZXRfY2FzdDxjdjo6U2NhbGFyKj4oJmNvbG9yKSwgdGhpY2tuZXNzIDwgMCA/IGN2OjpGSUxMRUQgOiB0aGlja25lc3MsIGxpbmVUeXBlKTsKICByZXR1cm4gSlNfVU5ERUZJTkVEOwp9CgpzdGF0aWMgSlNWYWx1ZQpqc19kcmF3X2NvbnRvdXIoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCogYXJndikgewogIEpTSW5wdXRPdXRwdXRBcnJheSBkc3Q7CiAgaW50IGkgPSAwLCByZXQgPSAtMTsKICBKU0NvbnRvdXJzRGF0YTxpbnQ+IGNvbnRvdXJzOwogIGludDMyX3QgY29udG91cklkeCA9IC0xLCBsaW5lVHlwZSA9IGN2OjpMSU5FXzg7CgogIEpTQ29sb3JEYXRhPGRvdWJsZT4gY29sb3I7CiAgaW50IHRoaWNrbmVzcyA9IDE7CiAgYm9vbCBhbnRpYWxpYXMgPSB0cnVlOwoKICBpZihhcmdjID4gaSkgewogICAgaWYoIWpzX2lzX25vYXJyYXkoKGRzdCA9IGpzX3VtYXRfb3JfbWF0KGN0eCwgYXJndltpXSkpKSkKICAgICAgaSsrOwogIH0gZWxzZQogICAgZHN0ID0gKmRwdHI7CgogIGlmKGpzX2lzX25vYXJyYXkoZHN0KSkKICAgIHJldHVybiBKU19FWENFUFRJT047CgogIGlmKGkgPT0gYXJnYyB8fCAhanNfaXNfYXJyYXkoY3R4LCBhcmd2WysraV0pKQogICAgcmV0dXJuIEpTX0VYQ0VQVElPTjsKCiAgLy8ganNfYXJyYXk8SlNDb250b3VyRGF0YTxpbnQ+Pjo6dG9fdmVjdG9yKGN0eCwgYXJndltpXSwgY29udG91cnMpOwoKICBpZihhcmdjID4gaSAmJiBKU19Jc051bWJlcihhcmd2WysraV0pKSB7CiAgICBKU19Ub0ludDMyKGN0eCwgJmNvbnRvdXJJZHgsIGFyZ3ZbaV0pOwogIH0KCiAgaWYoYXJnYyA+IGkpIHsKICAgIGpzX2NvbG9yX3JlYWQoY3R4LCBhcmd2W2ldLCAmY29sb3IpOwogICAgaSsrOwogIH0KCiAgaWYoYXJnYyA+IGkgJiYgSlNfSXNOdW1iZXIoYXJndltpXSkpCiAgICBqcy5nZXRfbnVtYmVyKGFyZ3ZbaSsrXSwgdGhpY2tuZXNzKTsKCiAgaWYoYXJnYyA+IGkgJiYgSlNfSXNOdW1iZXIoYXJndlsrK2ldKSkgewogICAgSlNfVG9JbnQzMihjdHgsICZsaW5lVHlwZSwgYXJndltpXSk7CiAgfQogIHN0ZDo6Y2VyciA8PCAiZHJhd19jb250b3VyKCkgY29udG91cnMubGVuZ3RoPSIgPDwgY29udG91cnMuc2l6ZSgpIDw8ICIgY29udG91cklkeD0iIDw8IGNvbnRvdXJJZHgKICAgICAgICAgICAgPDwgIiB0aGlja25lc3M9IiA8PCB0aGlja25lc3MgPDwgc3RkOjplbmRsOwoKICBjdjo6ZHJhd0NvbnRvdXJzKGRzdCwgY29udG91cnMsIGNvbnRvdXJJZHgsICpyZWludGVycHJldF9jYXN0PGN2OjpTY2FsYXIqPigmY29sb3IpLCB0aGlja25lc3MsIGxpbmVUeXBlKTsKCiAgc3RkOjpjZXJyIDw8ICJkcmF3X2NvbnRvdXIoKSByZXQ6IiA8PCByZXQgPDwgIiBjb2xvcjogIiA8PCAqcmVpbnRlcnByZXRfY2FzdDxjdjo6U2NhbGFyKj4oJmNvbG9yKSA8PCBzdGQ6OmVuZGw7CiAgcmV0dXJuIEpTX1VOREVGSU5FRDsKfQoKc3RhdGljIEpTVmFsdWUKanNfZHJhd19jb250b3VycyhKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2KSB7CiAgSlNJbnB1dE91dHB1dEFycmF5IGRzdDsKICBpbnQgaSA9IDAsIHJldCA9IC0xOwogIEpTQ29udG91cnNEYXRhPGludD4gY29udG91cnM7CiAgaW50MzJfdCBjb250b3VySWR4ID0gLTEsIGxpbmVUeXBlID0gY3Y6OkxJTkVfODsKICBKU0NvbG9yRGF0YTxkb3VibGU+IGNvbG9yOwogIEpTUG9pbnREYXRhPGludD4gb2Zmc2V0ezAsIDB9OwogIHN0ZDo6dmVjdG9yPGN2OjpWZWM0aT4gaGllcjsKICBpbnQzMl90IHRoaWNrbmVzcyA9IDEsIG1heExldmVsID0gSU5UX01BWDsKICBib29sIGFudGlhbGlhcyA9IHRydWU7CgogIGlmKGpzX2lzX25vYXJyYXkoKGRzdCA9IGpzX3VtYXRfb3JfbWF0KGN0eCwgYXJndlswXSkpKSkKICAgIHJldHVybiBKU19FWENFUFRJT047CgogIGpzX2FycmF5X3RvKGN0eCwgYXJndlsxXSwgY29udG91cnMpOwoKICBqc192YWx1ZV90byhjdHgsIGFyZ3ZbMl0sIGNvbnRvdXJJZHgpOwoKICBqc19jb2xvcl9yZWFkKGN0eCwgYXJndlszXSwgJmNvbG9yKTsKICBpZihhcmdjID4gNCkgewogICAganNfdmFsdWVfdG8oY3R4LCBhcmd2WzRdLCB0aGlja25lc3MpOwogICAgaWYoYXJnYyA+IDUpIHsKICAgICAganNfdmFsdWVfdG8oY3R4LCBhcmd2WzVdLCBsaW5lVHlwZSk7CiAgICAgIGlmKGFyZ2MgPiA2KSB7CiAgICAgICAganNfYXJyYXlfdG8oY3R4LCBhcmd2WzZdLCBoaWVyKTsKICAgICAgICBpZihhcmdjID4gNykgewogICAgICAgICAganNfdmFsdWVfdG8oY3R4LCBhcmd2WzddLCBtYXhMZXZlbCk7CiAgICAgICAgICBpZihhcmdjID4gOCkKICAgICAgICAgICAganNfcG9pbnRfcmVhZDxpbnQ+KGN0eCwgYXJndls4XSwgJm9mZnNldCk7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfQoKICAvLyBzdGQ6OmNlcnIgPDwgImRyYXdfY29udG91cnMoKSBjb250b3Vycy5sZW5ndGg9IiA8PCBjb250b3Vycy5zaXplKCkgPDwgIiBjb250b3VySWR4PSIgPDwKICAvLyBjb250b3VySWR4IDw8ICIgdGhpY2tuZXNzPSIKICAvLyA8PCB0aGlja25lc3MgPDwgc3RkOjplbmRsOwoKICBjdjo6ZHJhd0NvbnRvdXJzKGRzdCwKICAgICAgICAgICAgICAgICAgIGNvbnRvdXJzLAogICAgICAgICAgICAgICAgICAgY29udG91cklkeCwKICAgICAgICAgICAgICAgICAgICpyZWludGVycHJldF9jYXN0PGN2OjpTY2FsYXIqPigmY29sb3IpLAogICAgICAgICAgICAgICAgICAgdGhpY2tuZXNzLAogICAgICAgICAgICAgICAgICAgbGluZVR5cGUsCiAgICAgICAgICAgICAgICAgICBhcmdjID4gNiA/IEpTSW5wdXRPdXRwdXRBcnJheShoaWVyKSA6IGN2Ojpub0FycmF5KCksCiAgICAgICAgICAgICAgICAgICBtYXhMZXZlbCwKICAgICAgICAgICAgICAgICAgIG9mZnNldCk7CgogIC8vIHN0ZDo6Y2VyciA8PCAiZHJhd19jb250b3VycygpIHJldDoiIDw8IHJldCA8PCAiIGNvbG9yOiAiIDw8CiAgLy8gKnJlaW50ZXJwcmV0X2Nhc3Q8Y3Y6OlNjYWxhcio+KCZjb2xvcikgPDwgc3RkOjplbmRsOwoKICByZXR1cm4gSlNfVU5ERUZJTkVEOwp9CgpzdGF0aWMgSlNWYWx1ZQpqc19kcmF3X2xpbmUoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCogYXJndikgewogIEpTSW5wdXRPdXRwdXRBcnJheSBkc3Q7CiAgaW50IGkgPSAwLCByZXQgPSAtMTsKICBKU1BvaW50RGF0YTxkb3VibGU+IHBvaW50c1syXTsKICBKU0NvbG9yRGF0YTx1aW50OF90PiBjb2xvcjsKICBjdjo6U2NhbGFyIHNjYWxhcjsKICBpbnQgdGhpY2tuZXNzID0gMTsKICBib29sIGFudGlhbGlhcyA9IHRydWU7CgogIGlmKGFyZ2MgPiBpKSB7CiAgICBpZighanNfaXNfbm9hcnJheSgoZHN0ID0ganNfdW1hdF9vcl9tYXQoY3R4LCBhcmd2W2ldKSkpKQogICAgICBpKys7CiAgfSBlbHNlCiAgICBkc3QgPSAqZHB0cjsKCiAgaWYoanNfaXNfbm9hcnJheShkc3QpKQogICAgcmV0dXJuIEpTX0VYQ0VQVElPTjsKCiAgaWYoYXJnYyA+IGkpCiAgICBpZihqc19wb2ludF9yZWFkKGN0eCwgYXJndltpXSwgJnBvaW50c1swXSkpIHsKICAgICAgaSsrOwogICAgfQogIGlmKGFyZ2MgPiBpKQogICAgaWYoanNfcG9pbnRfcmVhZChjdHgsIGFyZ3ZbaV0sICZwb2ludHNbMV0pKSB7CiAgICAgIGkrKzsKICAgIH0KCiAgaWYoYXJnYyA+IGkpCiAgICBpZihqc19jb2xvcl9yZWFkKGN0eCwgYXJndltpXSwgJmNvbG9yKSkgewogICAgICBpKys7CgogICAgICBzY2FsYXJbMF0gPSBjb2xvci5hcnJbMF07CiAgICAgIHNjYWxhclsxXSA9IGNvbG9yLmFyclsxXTsKICAgICAgc2NhbGFyWzJdID0gY29sb3IuYXJyWzJdOwogICAgICBzY2FsYXJbM10gPSBjb2xvci5hcnJbM107CiAgICB9CgogIGlmKGFyZ2MgPiBpICYmIEpTX0lzTnVtYmVyKGFyZ3ZbaV0pKQogICAganMuZ2V0X251bWJlcihhcmd2W2krK10sIHRoaWNrbmVzcyk7CgogIGlmKGFyZ2MgPiBpICYmIGpzLmlzX2Jvb2woYXJndltpXSkpCiAgICBqcy5nZXRfYm9vbGVhbihhcmd2W2krK10sIGFudGlhbGlhcyk7CgogIGN2OjpsaW5lKGRzdCwgcG9pbnRzWzBdLCBwb2ludHNbMV0sIHNjYWxhciwgdGhpY2tuZXNzLCBhbnRpYWxpYXMgPyBjdjo6TElORV9BQSA6IGN2OjpMSU5FXzgpOwogIHJldHVybiBKU19VTkRFRklORUQ7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX2RyYXdfcG9seWdvbihKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2KSB7CiAgSlNJbnB1dE91dHB1dEFycmF5IGRzdDsKICBpbnQgaSA9IDAsIHJldCA9IC0xOwogIHBvaW50X3ZlY3RvcjxpbnQ+IHBvaW50czsKICBjdjo6U2NhbGFyIGNvbG9yOwogIGJvb2wgYW50aWFsaWFzID0gdHJ1ZTsKICBpbnQgdGhpY2tuZXNzID0gLTE7CgogIGlmKGFyZ2MgPiBpKSB7CiAgICBpZighanNfaXNfbm9hcnJheSgoZHN0ID0ganNfdW1hdF9vcl9tYXQoY3R4LCBhcmd2W2ldKSkpKQogICAgICBpKys7CiAgfSBlbHNlCiAgICBkc3QgPSAqZHB0cjsKCiAgaWYoYXJnYyA+IGkgJiYganMuaXNfYXJyYXlfbGlrZShhcmd2W2ldKSkKICAgIGpzLmdldF9wb2ludF9hcnJheShhcmd2W2krK10sIHBvaW50cyk7CiAgaWYoYXJnYyA+IGkgJiYganMuaXNfY29sb3IoYXJndltpXSkpCiAgICBqcy5nZXRfY29sb3IoYXJndltpKytdLCBjb2xvcik7CgogIGlmKGFyZ2MgPiBpICYmIEpTX0lzTnVtYmVyKGFyZ3ZbaV0pKQogICAganMuZ2V0X251bWJlcihhcmd2W2krK10sIHRoaWNrbmVzcyk7CgogIGlmKGFyZ2MgPiBpICYmIGpzLmlzX2Jvb2woYXJndltpXSkpCiAgICBqcy5nZXRfYm9vbGVhbihhcmd2W2krK10sIGFudGlhbGlhcyk7CgogIGlmKGRwdHIgIT0gbnVsbHB0cikgewogICAgY29uc3QgaW50IHNpemUgPSBwb2ludHMuc2l6ZSgpOwogICAgaW50IGxpbmVUeXBlID0gYW50aWFsaWFzID8gY3Y6OkxJTkVfQUEgOiBjdjo6TElORV84OwogICAgY29uc3QgSlNQb2ludERhdGE8aW50PiogcHRzID0gcG9pbnRzLmRhdGEoKTsKCiAgICBzdGQ6OmNlcnIgPDwgImRyYXdQb2x5Z29uKCkgcG9pbnRzOiAiIDw8IChwb2ludHMpIDw8ICIgY29sb3I6ICIgPDwgdG9fc3RyaW5nKGNvbG9yKSA8PCBzdGQ6OmVuZGw7CgogICAgLy8gY3Y6OmZpbGxQb2x5KCpkcHRyLCBwb2ludHMsIGNvbG9yLCBhbnRpYWxpYXMgPyBjdjo6TElORV9BQSA6IGN2OjpMSU5FXzgpOwogICAgKHRoaWNrbmVzcyA8PSAwID8gY3Y6OmZpbGxQb2x5KGRzdCwgJnB0cywgJnNpemUsIDEsIGNvbG9yLCBsaW5lVHlwZSkKICAgICAgICAgICAgICAgICAgICA6IGN2Ojpwb2x5bGluZXMoZHN0LCAmcHRzLCAmc2l6ZSwgMSwgdHJ1ZSwgY29sb3IsIHRoaWNrbmVzcywgbGluZVR5cGUpKTsKCiAgICByZXR1cm4gSlNfVU5ERUZJTkVEOwogIH0KICByZXR1cm4gSlNfRVhDRVBUSU9OOwp9CgpzdGF0aWMgSlNWYWx1ZQpqc19kcmF3X3JlY3QoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCogYXJndikgewogIEpTSW5wdXRPdXRwdXRBcnJheSBkc3Q7CiAgaW50IGkgPSAwLCByZXQgPSAtMTsKICBKU1JlY3REYXRhPGRvdWJsZT4gcmVjdDsKICBKU1BvaW50RGF0YTxkb3VibGU+IHBvaW50c1syXTsKICBKU0NvbG9yRGF0YTx1aW50OF90PiBjb2xvcjsKICBjdjo6U2NhbGFyIHNjYWxhcjsKICBpbnQgdGhpY2tuZXNzID0gMTsKICBib29sIGFudGlhbGlhcyA9IHRydWU7CgogIGlmKGFyZ2MgPiBpKSB7CiAgICBpZighanNfaXNfbm9hcnJheSgoZHN0ID0ganNfdW1hdF9vcl9tYXQoY3R4LCBhcmd2W2ldKSkpKQogICAgICBpKys7CiAgfSBlbHNlCiAgICBkc3QgPSAqZHB0cjsKCiAgaWYoanNfaXNfbm9hcnJheShkc3QpKQogICAgcmV0dXJuIEpTX0VYQ0VQVElPTjsKCiAgaWYoYXJnYyA+IGkpIHsKICAgIGlmKGpzX3JlY3RfcmVhZChjdHgsIGFyZ3ZbaV0sICZyZWN0KSkKICAgICAgaSsrOwogICAgLy8gICAganMuZ2V0X3JlY3QoYXJndltpKytdLCByZWN0KTsKICB9CgogIGlmKGFyZ2MgPiBpKQogICAgaWYoanNfY29sb3JfcmVhZChjdHgsIGFyZ3ZbaV0sICZjb2xvcikpIHsKICAgICAgaSsrOwoKICAgICAgc2NhbGFyWzBdID0gY29sb3IuYXJyWzBdOwogICAgICBzY2FsYXJbMV0gPSBjb2xvci5hcnJbMV07CiAgICAgIHNjYWxhclsyXSA9IGNvbG9yLmFyclsyXTsKICAgICAgc2NhbGFyWzNdID0gY29sb3IuYXJyWzNdOwogICAgfQoKICBpZihhcmdjID4gaSAmJiBKU19Jc051bWJlcihhcmd2W2ldKSkKICAgIGpzLmdldF9udW1iZXIoYXJndltpKytdLCB0aGlja25lc3MpOwoKICBpZihhcmdjID4gaSAmJiBqcy5pc19ib29sKGFyZ3ZbaV0pKQogICAganMuZ2V0X2Jvb2xlYW4oYXJndltpKytdLCBhbnRpYWxpYXMpOwoKICBwb2ludHNbMF0ueCA9IHJlY3QueDsKICBwb2ludHNbMF0ueSA9IHJlY3QueTsKICBwb2ludHNbMV0ueCA9IHJlY3QueCArIHJlY3Qud2lkdGg7CiAgcG9pbnRzWzFdLnkgPSByZWN0LnkgKyByZWN0LmhlaWdodDsKCiAgLy8gY3Y6OnJlY3RhbmdsZShkc3QsIHBvaW50c1swXSwgcG9pbnRzWzFdLCBjb2xvciwgdGhpY2tuZXNzLCBhbnRpYWxpYXMgPyBjdjo6TElORV9BQSA6CiAgLy8gY3Y6OkxJTkVfOCk7CiAgY3Y6OnJlY3RhbmdsZShkc3QsIHJlY3QsIHNjYWxhciwgdGhpY2tuZXNzLCBhbnRpYWxpYXMgPyBjdjo6TElORV9BQSA6IGN2OjpMSU5FXzgpOwoKICByZXR1cm4gSlNfVU5ERUZJTkVEOwp9CgpzdGF0aWMgSlNWYWx1ZQpqc19wdXRfdGV4dChKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2KSB7CiAgY3Y6Ok1hdCogZHN0OwogIGludCBpID0gMCwgcmV0ID0gLTE7CiAgSlNDb2xvckRhdGE8ZG91YmxlPiBjb2xvcjsKICBKU1BvaW50RGF0YTxkb3VibGU+IHBvaW50OwogIHN0ZDo6c3RyaW5nIHRleHQsIGZvbnROYW1lOwogIGludDMyX3QgZm9udEZhY2UgPSBjdjo6Rk9OVF9IRVJTSEVZX1NJTVBMRVgsIHRoaWNrbmVzcyA9IDEsIGxpbmVUeXBlID0gY3Y6OkxJTkVfQUE7CiAgZG91YmxlIGZvbnRTY2FsZSA9IDE7CiAgYm9vbCBib3R0b21MZWZ0T3JpZ2luID0gZmFsc2U7CgogIGlmKGFyZ2MgPiBpICYmIChkc3QgPSBqc19tYXRfZGF0YShjdHgsIGFyZ3ZbaV0pKSkKICAgIGkrKzsKICBlbHNlCiAgICBkc3QgPSBkcHRyOwoKICBpZihkc3QgPT0gbnVsbHB0cikKICAgIHJldHVybiBKU19FWENFUFRJT047CgogIGpzX3ZhbHVlX3RvKGN0eCwgYXJndltpKytdLCB0ZXh0KTsKCiAgaWYoanNfcG9pbnRfcmVhZChjdHgsIGFyZ3ZbaV0sICZwb2ludCkpIHsKICAgIGkrKzsKICB9IGVsc2UgewogICAgaW50MzJfdCB4LCB5OwogICAgSlNfVG9JbnQzMihjdHgsICZ4LCBhcmd2W2ldKTsKICAgIEpTX1RvSW50MzIoY3R4LCAmeSwgYXJndltpICsgMV0pOwoKICAgIHBvaW50LnggPSB4OwogICAgcG9pbnQueSA9IHk7CiAgICBpICs9IDI7CiAgfQoKICBpZihhcmdjID4gaSkgewogICAgaWYoSlNfSXNOdW1iZXIoYXJndltpXSkpCiAgICAgIEpTX1RvSW50MzIoY3R4LCAmZm9udEZhY2UsIGFyZ3ZbaV0pOwogICAgZWxzZQogICAgICBqc192YWx1ZV90byhjdHgsIGFyZ3ZbaV0sIGZvbnROYW1lKTsKICAgIGkrKzsKICB9CgogIGlmKGFyZ2MgPiBpKQogICAgSlNfVG9GbG9hdDY0KGN0eCwgJmZvbnRTY2FsZSwgYXJndltpKytdKTsKCiAgaWYoYXJnYyA+IGkpIHsKICAgIGpzX2NvbG9yX3JlYWQoY3R4LCBhcmd2W2ldLCAmY29sb3IpOwogICAgaSsrOwogIH0KCiAgaWYoYXJnYyA+IGkpCiAgICBKU19Ub0ludDMyKGN0eCwgJnRoaWNrbmVzcywgYXJndltpKytdKTsKCiAgaWYoYXJnYyA+IGkpCiAgICBKU19Ub0ludDMyKGN0eCwgJmxpbmVUeXBlLCBhcmd2W2krK10pOwoKICBpZihhcmdjID4gaSkKICAgIGJvdHRvbUxlZnRPcmlnaW4gPSBKU19Ub0Jvb2woY3R4LCBhcmd2W2krK10pOwoKICBpZighZm9udE5hbWUuZW1wdHkoKSAmJiBmb250TmFtZSAhPSBmcmVldHlwZTJfZmFjZSkgewogICAgZnJlZXR5cGUyLT5sb2FkRm9udERhdGEoZm9udE5hbWUsIDApOwogICAgZnJlZXR5cGUyX2ZhY2UgPSBmb250TmFtZTsKICB9CgogIGlmKGZvbnROYW1lLmVtcHR5KCkpCiAgICBjdjo6cHV0VGV4dCgKICAgICAgICAqZHN0LCB0ZXh0LCBwb2ludCwgZm9udEZhY2UsIGZvbnRTY2FsZSwgKnJlaW50ZXJwcmV0X2Nhc3Q8Y3Y6OlNjYWxhcio+KCZjb2xvciksIHRoaWNrbmVzcywgbGluZVR5cGUsIGJvdHRvbUxlZnRPcmlnaW4pOwogIGVsc2UKICAgIGZyZWV0eXBlMi0+cHV0VGV4dCgKICAgICAgICAqZHN0LCB0ZXh0LCBwb2ludCwgZm9udFNjYWxlLCAqcmVpbnRlcnByZXRfY2FzdDxjdjo6U2NhbGFyKj4oJmNvbG9yKSwgdGhpY2tuZXNzLCBsaW5lVHlwZSwgYm90dG9tTGVmdE9yaWdpbik7CgogIHJldHVybiBKU19VTkRFRklORUQ7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX2dldF90ZXh0X3NpemUoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCogYXJndikgewogIGludCBpID0gMCwgYmFzZWxpbmUgPSAwOwogIEpTU2l6ZURhdGE8ZG91YmxlPiBzaXplOwogIGNvbnN0IGNoYXIqIHRleHQ7CiAgaW50MzJfdCBmb250RmFjZSA9IGN2OjpGT05UX0hFUlNIRVlfU0lNUExFWCwgdGhpY2tuZXNzID0gMTsKICBzdGQ6OnN0cmluZyBmb250TmFtZTsKICBkb3VibGUgZm9udFNjYWxlID0gMTsKICBKU1ZhbHVlIGJhc2VsaW5lVmFsOwogIHN0ZDo6YXJyYXk8aW50MzJfdCwgMj4gZGltOwoKICB0ZXh0ID0gSlNfVG9DU3RyaW5nKGN0eCwgYXJndltpKytdKTsKCiAgaWYoYXJnYyA+IGkpIHsKICAgIGlmKEpTX0lzTnVtYmVyKGFyZ3ZbaV0pKQogICAgICBKU19Ub0ludDMyKGN0eCwgJmZvbnRGYWNlLCBhcmd2W2ldKTsKICAgIGVsc2UKICAgICAganNfdmFsdWVfdG8oY3R4LCBhcmd2W2ldLCBmb250TmFtZSk7CiAgICBpKys7CiAgfQoKICBpZihhcmdjID4gaSkKICAgIEpTX1RvRmxvYXQ2NChjdHgsICZmb250U2NhbGUsIGFyZ3ZbaSsrXSk7CgogIGlmKGFyZ2MgPiBpKQogICAgSlNfVG9JbnQzMihjdHgsICZ0aGlja25lc3MsIGFyZ3ZbaSsrXSk7CgogIGlmKGZyZWV0eXBlMiA9PSBudWxscHRyKQogICAgZnJlZXR5cGUyID0gY3Y6OmZyZWV0eXBlOjpjcmVhdGVGcmVlVHlwZTIoKTsKCiAgaWYoIWZvbnROYW1lLmVtcHR5KCkgJiYgZm9udE5hbWUgIT0gZnJlZXR5cGUyX2ZhY2UpIHsKICAgIGZyZWV0eXBlMi0+bG9hZEZvbnREYXRhKGZvbnROYW1lLCAwKTsKICAgIGZyZWV0eXBlMl9mYWNlID0gZm9udE5hbWU7CiAgfQoKICBpZihmb250TmFtZS5lbXB0eSgpKQogICAgc2l6ZSA9IGN2OjpnZXRUZXh0U2l6ZSh0ZXh0LCBmb250RmFjZSwgZm9udFNjYWxlLCB0aGlja25lc3MsICZiYXNlbGluZSk7CiAgZWxzZQogICAgc2l6ZSA9IGZyZWV0eXBlMi0+Z2V0VGV4dFNpemUodGV4dCwgZm9udFNjYWxlLCB0aGlja25lc3MsICZiYXNlbGluZSk7CgogIGJhc2VsaW5lVmFsID0gSlNfTmV3SW50MzIoY3R4LCBiYXNlbGluZSk7CgogIGlmKEpTX0lzRnVuY3Rpb24oY3R4LCBhcmd2W2ldKSkgewogICAgSlNfQ2FsbChjdHgsIGFyZ3ZbaV0sIEpTX1VOREVGSU5FRCwgMSwgY29uc3RfY2FzdDxKU1ZhbHVlQ29uc3QqPigmYmFzZWxpbmVWYWwpKTsKICB9IGVsc2UgaWYoanNfaXNfYXJyYXkoY3R4LCBhcmd2W2ldKSkgewogICAgSlNfU2V0UHJvcGVydHlVaW50MzIoY3R4LCBhcmd2W2ldLCAwLCBiYXNlbGluZVZhbCk7CiAgfSBlbHNlIGlmKEpTX0lzT2JqZWN0KGFyZ3ZbaV0pKSB7CiAgICBKU19TZXRQcm9wZXJ0eVN0cihjdHgsIGFyZ3ZbaV0sICJ5IiwgYmFzZWxpbmVWYWwpOwogIH0KICBkaW1bMF0gPSBzaXplLndpZHRoOwogIGRpbVsxXSA9IHNpemUuaGVpZ2h0OwoKICByZXR1cm4ganNfYXJyYXk8aW50MzJfdD46OmZyb21fc2VxdWVuY2UoY3R4LCBkaW0uY2JlZ2luKCksIGRpbS5jZW5kKCkpOwp9CgpzdGF0aWMgSlNWYWx1ZQpqc19nZXRfZm9udF9zY2FsZV9mcm9tX2hlaWdodChKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2KSB7CiAgaW50MzJfdCBmb250RmFjZSwgcGl4ZWxIZWlnaHQsIHRoaWNrbmVzcyA9IDE7CiAgZG91YmxlIGZvbnRTY2FsZTsKCiAgSlNfVG9JbnQzMihjdHgsICZmb250RmFjZSwgYXJndlswXSk7CiAgSlNfVG9JbnQzMihjdHgsICZwaXhlbEhlaWdodCwgYXJndlsxXSk7CiAgaWYoYXJnYyA+IDIpCiAgICBKU19Ub0ludDMyKGN0eCwgJnRoaWNrbmVzcywgYXJndlsyXSk7CgogIGZvbnRTY2FsZSA9IGN2OjpnZXRGb250U2NhbGVGcm9tSGVpZ2h0KGZvbnRGYWNlLCBwaXhlbEhlaWdodCwgdGhpY2tuZXNzKTsKCiAgcmV0dXJuIEpTX05ld0Zsb2F0NjQoY3R4LCBmb250U2NhbGUpOwp9CgpzdGF0aWMgSlNWYWx1ZQpqc19sb2FkX2ZvbnQoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCogYXJndikgewogIGludDMyX3QgaWQgPSAwOwogIHN0ZDo6c3RyaW5nIGZvbnROYW1lOwoKICBpZihmcmVldHlwZTIgPT0gbnVsbHB0cikKICAgIGZyZWV0eXBlMiA9IGN2OjpmcmVldHlwZTo6Y3JlYXRlRnJlZVR5cGUyKCk7CgogIGpzX3ZhbHVlX3RvKGN0eCwgYXJndlswXSwgZm9udE5hbWUpOwogIGlmKGFyZ2MgPiAxKQogICAganNfdmFsdWVfdG8oY3R4LCBhcmd2WzFdLCBpZCk7CiAgZnJlZXR5cGUyLT5sb2FkRm9udERhdGEoZm9udE5hbWUsIGlkKTsKICByZXR1cm4gSlNfVU5ERUZJTkVEOwp9CgpKU1ZhbHVlIGRyYXdfcHJvdG8gPSBKU19VTkRFRklORUQsIGRyYXdfY2xhc3MgPSBKU19VTkRFRklORUQ7CkpTQ2xhc3NJRCBqc19kcmF3X2NsYXNzX2lkID0gMDsKCkpTQ2xhc3NEZWYganNfZHJhd19jbGFzcyA9IHsKICAgIC5jbGFzc19uYW1lID0gIkRyYXciLAogICAgLmZpbmFsaXplciA9IDAsCn07Cgpjb25zdCBKU0NGdW5jdGlvbkxpc3RFbnRyeSBqc19kcmF3X3Byb3RvX2Z1bmNzW10gPSB7CiAgICBKU19QUk9QX1NUUklOR19ERUYoIltTeW1ib2wudG9TdHJpbmdUYWddIiwgIkRyYXciLCBKU19QUk9QX0NPTkZJR1VSQUJMRSksCn07Cgpjb25zdCBKU0NGdW5jdGlvbkxpc3RFbnRyeSBqc19kcmF3X3N0YXRpY19mdW5jc1tdID0gewogICAgSlNfQ0ZVTkNfREVGKCJjaXJjbGUiLCAxLCAmanNfZHJhd19jaXJjbGUpLAogICAgSlNfQ0ZVTkNfREVGKCJjb250b3VyIiwgMSwgJmpzX2RyYXdfY29udG91ciksCiAgICBKU19DRlVOQ19ERUYoImNvbnRvdXJzIiwgNCwgJmpzX2RyYXdfY29udG91cnMpLAogICAgSlNfQ0ZVTkNfREVGKCJsaW5lIiwgMSwgJmpzX2RyYXdfbGluZSksCiAgICBKU19DRlVOQ19ERUYoInBvbHlnb24iLCAxLCAmanNfZHJhd19wb2x5Z29uKSwKICAgIEpTX0NGVU5DX0RFRigicmVjdCIsIDEsICZqc19kcmF3X3JlY3QpLAogICAgSlNfQ0ZVTkNfREVGKCJ0ZXh0IiwgMiwgJmpzX3B1dF90ZXh0KSwKICAgIEpTX0NGVU5DX0RFRigidGV4dFNpemUiLCA1LCAmanNfZ2V0X3RleHRfc2l6ZSksCiAgICBKU19DRlVOQ19ERUYoImZvbnRTY2FsZUZyb21IZWlnaHQiLCAyLCAmanNfZ2V0X2ZvbnRfc2NhbGVfZnJvbV9oZWlnaHQpLAogICAgSlNfQ0ZVTkNfREVGKCJsb2FkRm9udCIsIDEsICZqc19sb2FkX2ZvbnQpLAp9OwoKY29uc3QgSlNDRnVuY3Rpb25MaXN0RW50cnkganNfZHJhd19nbG9iYWxfZnVuY3NbXSA9IHsKICAgIEpTX0NGVU5DX0RFRigiZHJhd0NpcmNsZSIsIDEsICZqc19kcmF3X2NpcmNsZSksCiAgICBKU19DRlVOQ19ERUYoImRyYXdDb250b3VyIiwgMSwgJmpzX2RyYXdfY29udG91ciksCiAgICBKU19DRlVOQ19ERUYoImRyYXdMaW5lIiwgMSwgJmpzX2RyYXdfbGluZSksCiAgICBKU19DRlVOQ19ERUYoImRyYXdQb2x5Z29uIiwgMSwgJmpzX2RyYXdfcG9seWdvbiksCiAgICBKU19DRlVOQ19ERUYoImRyYXdSZWN0IiwgMSwgJmpzX2RyYXdfcmVjdCksCiAgICBKU19DRlVOQ19ERUYoInB1dFRleHQiLCAyLCAmanNfcHV0X3RleHQpLAogICAgSlNfQ0ZVTkNfREVGKCJnZXRUZXh0U2l6ZSIsIDUsICZqc19nZXRfdGV4dF9zaXplKSwKICAgIEpTX0NGVU5DX0RFRigiZ2V0Rm9udFNjYWxlRnJvbUhlaWdodCIsIDIsICZqc19nZXRfZm9udF9zY2FsZV9mcm9tX2hlaWdodCksCiAgICBKU19DRlVOQ19ERUYoImxvYWRGb250IiwgMSwgJmpzX2xvYWRfZm9udCksCn07CgpzdGF0aWMgSlNWYWx1ZQpqc19kcmF3X2N0b3IoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCBuZXdfdGFyZ2V0LCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2KSB7CiAgSlNWYWx1ZSBvYmogPSBKU19VTkRFRklORUQ7CiAgSlNWYWx1ZSBwcm90bzsKCiAgLyogdXNpbmcgbmV3X3RhcmdldCB0byBnZXQgdGhlIHByb3RvdHlwZSBpcyBuZWNlc3Nhcnkgd2hlbiB0aGUKICAgICBjbGFzcyBpcyBleHRlbmRlZC4gKi8KICBwcm90byA9IEpTX0dldFByb3BlcnR5U3RyKGN0eCwgbmV3X3RhcmdldCwgInByb3RvdHlwZSIpOwogIGlmKEpTX0lzRXhjZXB0aW9uKHByb3RvKSkKICAgIGdvdG8gZmFpbDsKICBvYmogPSBKU19OZXdPYmplY3RQcm90b0NsYXNzKGN0eCwgcHJvdG8sIGpzX2RyYXdfY2xhc3NfaWQpOwogIEpTX0ZyZWVWYWx1ZShjdHgsIHByb3RvKTsKICBpZihKU19Jc0V4Y2VwdGlvbihvYmopKQogICAgZ290byBmYWlsOwogIHJldHVybiBvYmo7CmZhaWw6CiAgSlNfRnJlZVZhbHVlKGN0eCwgb2JqKTsKICByZXR1cm4gSlNfRVhDRVBUSU9OOwp9CgppbnQKanNfZHJhd19pbml0KEpTQ29udGV4dCogY3R4LCBKU01vZHVsZURlZiogbSkgewoKICBpZihqc19kcmF3X2NsYXNzX2lkID09IDApIHsKICAgIC8qIGNyZWF0ZSB0aGUgRHJhdyBjbGFzcyAqLwogICAgSlNfTmV3Q2xhc3NJRCgmanNfZHJhd19jbGFzc19pZCk7CiAgICBKU19OZXdDbGFzcyhKU19HZXRSdW50aW1lKGN0eCksIGpzX2RyYXdfY2xhc3NfaWQsICZqc19kcmF3X2NsYXNzKTsKCiAgICBkcmF3X3Byb3RvID0gSlNfTmV3T2JqZWN0KGN0eCk7CiAgICBKU19TZXRQcm9wZXJ0eUZ1bmN0aW9uTGlzdChjdHgsIGRyYXdfcHJvdG8sIGpzX2RyYXdfcHJvdG9fZnVuY3MsIGNvdW50b2YoanNfZHJhd19wcm90b19mdW5jcykpOwogICAgSlNfU2V0Q2xhc3NQcm90byhjdHgsIGpzX2RyYXdfY2xhc3NfaWQsIGRyYXdfcHJvdG8pOwoKICAgIGRyYXdfY2xhc3MgPSBKU19OZXdDRnVuY3Rpb24yKGN0eCwganNfZHJhd19jdG9yLCAiRHJhdyIsIDIsIEpTX0NGVU5DX2NvbnN0cnVjdG9yLCAwKTsKCiAgICAvKiBzZXQgcHJvdG8uY29uc3RydWN0b3IgYW5kIGN0b3IucHJvdG90eXBlICovCiAgICBKU19TZXRDb25zdHJ1Y3RvcihjdHgsIGRyYXdfY2xhc3MsIGRyYXdfcHJvdG8pOwogICAgSlNfU2V0UHJvcGVydHlGdW5jdGlvbkxpc3QoY3R4LCBkcmF3X2NsYXNzLCBqc19kcmF3X3N0YXRpY19mdW5jcywgY291bnRvZihqc19kcmF3X3N0YXRpY19mdW5jcykpOwogIH0KCiAgaWYobSkgewogICAgSlNfU2V0TW9kdWxlRXhwb3J0TGlzdChjdHgsIG0sIGpzX2RyYXdfc3RhdGljX2Z1bmNzLCBjb3VudG9mKGpzX2RyYXdfc3RhdGljX2Z1bmNzKSk7CiAgICBKU19TZXRNb2R1bGVFeHBvcnQoY3R4LCBtLCAiRHJhdyIsIGRyYXdfY2xhc3MpOwogIH0KICAvKiAgZWxzZQogICAgICBKU19TZXRQcm9wZXJ0eVN0cihjdHgsICpzdGF0aWNfY2FzdDxKU1ZhbHVlKj4obSksICJEcmF3IiwgZHJhd19jbGFzcyk7Ki8KICByZXR1cm4gMDsKfQoKI2lmIGRlZmluZWQoSlNfRFJBV19NT0RVTEUpCiNkZWZpbmUgSlNfSU5JVF9NT0RVTEUgLypWSVNJQkxFKi8ganNfaW5pdF9tb2R1bGUKI2Vsc2UKI2RlZmluZSBKU19JTklUX01PRFVMRSAvKlZJU0lCTEUqLyBqc19pbml0X21vZHVsZV9kcmF3CiNlbmRpZgoKSlNNb2R1bGVEZWYqCkpTX0lOSVRfTU9EVUxFKEpTQ29udGV4dCogY3R4LCBjb25zdCBjaGFyKiBtb2R1bGVfbmFtZSkgewogIEpTTW9kdWxlRGVmKiBtOwogIG0gPSBKU19OZXdDTW9kdWxlKGN0eCwgbW9kdWxlX25hbWUsICZqc19kcmF3X2luaXQpOwogIGlmKCFtKQogICAgcmV0dXJuIE5VTEw7CiAgSlNfQWRkTW9kdWxlRXhwb3J0KGN0eCwgbSwgIkRyYXciKTsKICBKU19BZGRNb2R1bGVFeHBvcnRMaXN0KGN0eCwgbSwganNfZHJhd19zdGF0aWNfZnVuY3MsIGNvdW50b2YoanNfZHJhd19zdGF0aWNfZnVuY3MpKTsKICByZXR1cm4gbTsKfQoKdm9pZApqc19kcmF3X2NvbnN0cnVjdG9yKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlIHBhcmVudCwgY29uc3QgY2hhciogbmFtZSkgewogIGlmKEpTX0lzVW5kZWZpbmVkKGRyYXdfY2xhc3MpKQogICAganNfZHJhd19pbml0KGN0eCwgMCk7CgogIEpTX1NldFByb3BlcnR5U3RyKGN0eCwgcGFyZW50LCBuYW1lID8gbmFtZSA6ICJEcmF3IiwgZHJhd19jbGFzcyk7Cn0KfQoAAAAAAAAAAPM+AAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAxQAAAAAAAADFAAAAAAAAAAAAAAAAAPC/"
				],
				[
					15,
					1,
					"cut",
					null,
					"AQAAAKc+AAAAAAAApz4AAAAAAABLAAAACmV4dGVybiAiQyIgVklTSUJMRSB2b2lkIGpzX2RyYXdfZXhwb3J0KEpTQ29udGV4dCogY3R4LCBKU01vZHVsZURlZiogbSkgewp9",
					"AQAAAAAAAAABAAAApz4AAAAAAADyPgAAAAAAAAAAAAAAAPC/"
				],
				[
					18,
					1,
					"paste",
					null,
					"AQAAANY9AAAAAAAAIT4AAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA1j0AAAAAAADWPQAAAAAAAAAAAAAAAPC/"
				],
				[
					21,
					1,
					"cut",
					null,
					"AQAAANU9AAAAAAAA1T0AAAAAAABMAAAACgpleHRlcm4gIkMiIFZJU0lCTEUgdm9pZCBqc19kcmF3X2V4cG9ydChKU0NvbnRleHQqIGN0eCwgSlNNb2R1bGVEZWYqIG0pIHsKfQ",
					"AQAAAAAAAAABAAAAIT4AAAAAAADVPQAAAAAAAAAAAAAAAPC/"
				],
				[
					24,
					1,
					"paste",
					null,
					"AQAAAA48AAAAAAAAWjwAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAADjwAAAAAAAAOPAAAAAAAAAAAAAAAAPC/"
				],
				[
					25,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"AQAAAFo8AAAAAAAAWzwAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAWjwAAAAAAABaPAAAAAAAAAAAAAAAAPC/"
				],
				[
					29,
					1,
					"left_delete",
					null,
					"AQAAAA48AAAAAAAADjwAAAAAAAABAAAACg",
					"AQAAAAAAAAABAAAADzwAAAAAAAAPPAAAAAAAAP///////+9/"
				],
				[
					32,
					1,
					"cut",
					null,
					"AQAAAJc9AAAAAAAAlz0AAAAAAAB9AAAAICBKU19BZGRNb2R1bGVFeHBvcnQoY3R4LCBtLCAiRHJhdyIpOwogIEpTX0FkZE1vZHVsZUV4cG9ydExpc3QoY3R4LCBtLCBqc19kcmF3X3N0YXRpY19mdW5jcywgY291bnRvZihqc19kcmF3X3N0YXRpY19mdW5jcykpOwo",
					"AQAAAAAAAAABAAAAlz0AAAAAAAAUPgAAAAAAAAAAAAAAAPC/"
				],
				[
					35,
					1,
					"paste",
					null,
					"AQAAAFg8AAAAAAAA1TwAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAWDwAAAAAAABYPAAAAAAAAAAAAAAAAPC/"
				],
				[
					38,
					1,
					"insert",
					{
						"characters": "\njs_draw_export"
					},
					"EgAAABM+AAAAAAAAFD4AAAAAAAAAAAAAFD4AAAAAAAAYPgAAAAAAAAAAAAAUPgAAAAAAABQ+AAAAAAAABAAAACAgICAUPgAAAAAAABY+AAAAAAAAAAAAABY+AAAAAAAAFz4AAAAAAAAAAAAAFz4AAAAAAAAYPgAAAAAAAAAAAAAYPgAAAAAAABk+AAAAAAAAAAAAABk+AAAAAAAAGj4AAAAAAAAAAAAAGj4AAAAAAAAbPgAAAAAAAAAAAAAbPgAAAAAAABw+AAAAAAAAAAAAABw+AAAAAAAAHT4AAAAAAAAAAAAAHT4AAAAAAAAePgAAAAAAAAAAAAAePgAAAAAAAB8+AAAAAAAAAAAAAB8+AAAAAAAAID4AAAAAAAAAAAAAID4AAAAAAAAhPgAAAAAAAAAAAAAhPgAAAAAAACI+AAAAAAAAAAAAACI+AAAAAAAAIz4AAAAAAAAAAAAAIz4AAAAAAAAkPgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAEz4AAAAAAAATPgAAAAAAAAAAAAAAAPC/"
				],
				[
					39,
					1,
					"insert_snippet",
					{
						"contents": "($0)"
					},
					"AQAAACQ+AAAAAAAAJj4AAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAJD4AAAAAAAAkPgAAAAAAAAAAAAAAAPC/"
				],
				[
					40,
					1,
					"insert",
					{
						"characters": "ctx,m"
					},
					"BQAAACU+AAAAAAAAJj4AAAAAAAAAAAAAJj4AAAAAAAAnPgAAAAAAAAAAAAAnPgAAAAAAACg+AAAAAAAAAAAAACg+AAAAAAAAKT4AAAAAAAAAAAAAKT4AAAAAAAAqPgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAJT4AAAAAAAAlPgAAAAAAAAAAAAAAAPC/"
				],
				[
					42,
					1,
					"insert",
					{
						"characters": ";"
					},
					"AQAAACs+AAAAAAAALD4AAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAKz4AAAAAAAArPgAAAAAAAAAAAAAAAPC/"
				],
				[
					43,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAAAMPwAAI2luY2x1ZGUgImpzYmluZGluZ3MuaHBwIgojaW5jbHVkZSAianNfcG9pbnQuaHBwIgojaW5jbHVkZSAianNfbWF0LmhwcCIKI2luY2x1ZGUgImpzX3VtYXQuaHBwIgojaW5jbHVkZSAianNfYXJyYXkuaHBwIgojaW5jbHVkZSAianNfcmVjdC5ocHAiCiNpbmNsdWRlICJqc19jdi5ocHAiCgojaW5jbHVkZSA8b3BlbmN2Mi9jb3JlL2NvcmUuaHBwPgojaW5jbHVkZSA8b3BlbmN2Mi9mcmVldHlwZS5ocHA+CiNpbmNsdWRlIDxpb3N0cmVhbT4KI2luY2x1ZGUgImdlb21ldHJ5LmhwcCIKCmV4dGVybiAiQyIgVklTSUJMRSBpbnQganNfZHJhd19pbml0KEpTQ29udGV4dCosIEpTTW9kdWxlRGVmKik7Cgpjdjo6UHRyPGN2OjpmcmVldHlwZTo6RnJlZVR5cGUyPiBmcmVldHlwZTIgPSBudWxscHRyOwpzdGQ6OnN0cmluZyBmcmVldHlwZTJfZmFjZTsKCmV4dGVybiAiQyIgewoKY3Y6Ok1hdCogZHB0ciA9IDA7CgpzdGF0aWMgSlNWYWx1ZQpqc19kcmF3X2NpcmNsZShKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2KSB7CiAgSlNJbnB1dE91dHB1dEFycmF5IGRzdDsKICBpbnQgaSA9IDAsIHJldCA9IC0xOwogIEpTUG9pbnREYXRhPGRvdWJsZT4gcG9pbnQ7CiAgaW50MzJfdCB4LCB5OwogIGludCByYWRpdXMgPSAwOwogIEpTQ29sb3JEYXRhPGRvdWJsZT4gY29sb3I7CiAgYm9vbCBhbnRpYWxpYXMgPSB0cnVlOwogIGludCB0aGlja25lc3MgPSAtMTsKICBpbnQgbGluZVR5cGUgPSBjdjo6TElORV9BQTsKCiAgaWYoYXJnYyA+IGkpIHsKICAgIGlmKCFqc19pc19ub2FycmF5KChkc3QgPSBqc191bWF0X29yX21hdChjdHgsIGFyZ3ZbaV0pKSkpCiAgICAgIGkrKzsKICB9IGVsc2UKICAgIGRzdCA9ICpkcHRyOwoKICBpZihqc19pc19ub2FycmF5KGRzdCkpCiAgICByZXR1cm4gSlNfRVhDRVBUSU9OOwoKICBpZihqc19wb2ludF9yZWFkKGN0eCwgYXJndltpXSwgJnBvaW50KSkgewogICAgeCA9IHBvaW50Lng7CiAgICB5ID0gcG9pbnQueTsKICAgIGkrKzsKICB9IGVsc2UgewogICAgSlNfVG9JbnQzMihjdHgsICZ4LCBhcmd2W2ldKTsKICAgIEpTX1RvSW50MzIoY3R4LCAmeSwgYXJndltpICsgMV0pOwogICAgaSArPSAyOwogIH0KCiAgaWYoYXJnYyA+IGkgJiYgSlNfSXNOdW1iZXIoYXJndltpXSkpCiAgICBqcy5nZXRfbnVtYmVyKGFyZ3ZbaSsrXSwgcmFkaXVzKTsKCiAgaWYoYXJnYyA+IGkpIHsKICAgIGpzX2NvbG9yX3JlYWQoY3R4LCBhcmd2W2ldLCAmY29sb3IpOwogICAgaSsrOwogIH0KCiAgaWYoYXJnYyA+IGkgJiYgSlNfSXNOdW1iZXIoYXJndltpXSkpCiAgICBqcy5nZXRfbnVtYmVyKGFyZ3ZbaSsrXSwgdGhpY2tuZXNzKTsKICAvKiovCiAgaWYoYXJnYyA+IGkpIHsKICAgIGlmKGpzLmlzX2Jvb2woYXJndltpXSkpIHsKICAgICAganMuZ2V0X2Jvb2xlYW4oYXJndltpKytdLCBhbnRpYWxpYXMpOwogICAgICBsaW5lVHlwZSA9IGFudGlhbGlhcyA/IGN2OjpMSU5FX0FBIDogY3Y6OkxJTkVfODsKCiAgICB9IGVsc2UgaWYoSlNfSXNOdW1iZXIoYXJndltpXSkpIHsKICAgICAganMuZ2V0X251bWJlcihhcmd2W2krK10sIGxpbmVUeXBlKTsKICAgIH0KICB9CgogIGN2OjpjaXJjbGUoZHN0LCBwb2ludCwgcmFkaXVzLCAqcmVpbnRlcnByZXRfY2FzdDxjdjo6U2NhbGFyKj4oJmNvbG9yKSwgdGhpY2tuZXNzIDwgMCA/IGN2OjpGSUxMRUQgOiB0aGlja25lc3MsIGxpbmVUeXBlKTsKICByZXR1cm4gSlNfVU5ERUZJTkVEOwp9CgpzdGF0aWMgSlNWYWx1ZQpqc19kcmF3X2NvbnRvdXIoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCogYXJndikgewogIEpTSW5wdXRPdXRwdXRBcnJheSBkc3Q7CiAgaW50IGkgPSAwLCByZXQgPSAtMTsKICBKU0NvbnRvdXJzRGF0YTxpbnQ+IGNvbnRvdXJzOwogIGludDMyX3QgY29udG91cklkeCA9IC0xLCBsaW5lVHlwZSA9IGN2OjpMSU5FXzg7CgogIEpTQ29sb3JEYXRhPGRvdWJsZT4gY29sb3I7CiAgaW50IHRoaWNrbmVzcyA9IDE7CiAgYm9vbCBhbnRpYWxpYXMgPSB0cnVlOwoKICBpZihhcmdjID4gaSkgewogICAgaWYoIWpzX2lzX25vYXJyYXkoKGRzdCA9IGpzX3VtYXRfb3JfbWF0KGN0eCwgYXJndltpXSkpKSkKICAgICAgaSsrOwogIH0gZWxzZQogICAgZHN0ID0gKmRwdHI7CgogIGlmKGpzX2lzX25vYXJyYXkoZHN0KSkKICAgIHJldHVybiBKU19FWENFUFRJT047CgogIGlmKGkgPT0gYXJnYyB8fCAhanNfaXNfYXJyYXkoY3R4LCBhcmd2WysraV0pKQogICAgcmV0dXJuIEpTX0VYQ0VQVElPTjsKCiAgLy8ganNfYXJyYXk8SlNDb250b3VyRGF0YTxpbnQ+Pjo6dG9fdmVjdG9yKGN0eCwgYXJndltpXSwgY29udG91cnMpOwoKICBpZihhcmdjID4gaSAmJiBKU19Jc051bWJlcihhcmd2WysraV0pKSB7CiAgICBKU19Ub0ludDMyKGN0eCwgJmNvbnRvdXJJZHgsIGFyZ3ZbaV0pOwogIH0KCiAgaWYoYXJnYyA+IGkpIHsKICAgIGpzX2NvbG9yX3JlYWQoY3R4LCBhcmd2W2ldLCAmY29sb3IpOwogICAgaSsrOwogIH0KCiAgaWYoYXJnYyA+IGkgJiYgSlNfSXNOdW1iZXIoYXJndltpXSkpCiAgICBqcy5nZXRfbnVtYmVyKGFyZ3ZbaSsrXSwgdGhpY2tuZXNzKTsKCiAgaWYoYXJnYyA+IGkgJiYgSlNfSXNOdW1iZXIoYXJndlsrK2ldKSkgewogICAgSlNfVG9JbnQzMihjdHgsICZsaW5lVHlwZSwgYXJndltpXSk7CiAgfQogIHN0ZDo6Y2VyciA8PCAiZHJhd19jb250b3VyKCkgY29udG91cnMubGVuZ3RoPSIgPDwgY29udG91cnMuc2l6ZSgpIDw8ICIgY29udG91cklkeD0iIDw8IGNvbnRvdXJJZHgKICAgICAgICAgICAgPDwgIiB0aGlja25lc3M9IiA8PCB0aGlja25lc3MgPDwgc3RkOjplbmRsOwoKICBjdjo6ZHJhd0NvbnRvdXJzKGRzdCwgY29udG91cnMsIGNvbnRvdXJJZHgsICpyZWludGVycHJldF9jYXN0PGN2OjpTY2FsYXIqPigmY29sb3IpLCB0aGlja25lc3MsIGxpbmVUeXBlKTsKCiAgc3RkOjpjZXJyIDw8ICJkcmF3X2NvbnRvdXIoKSByZXQ6IiA8PCByZXQgPDwgIiBjb2xvcjogIiA8PCAqcmVpbnRlcnByZXRfY2FzdDxjdjo6U2NhbGFyKj4oJmNvbG9yKSA8PCBzdGQ6OmVuZGw7CiAgcmV0dXJuIEpTX1VOREVGSU5FRDsKfQoKc3RhdGljIEpTVmFsdWUKanNfZHJhd19jb250b3VycyhKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2KSB7CiAgSlNJbnB1dE91dHB1dEFycmF5IGRzdDsKICBpbnQgaSA9IDAsIHJldCA9IC0xOwogIEpTQ29udG91cnNEYXRhPGludD4gY29udG91cnM7CiAgaW50MzJfdCBjb250b3VySWR4ID0gLTEsIGxpbmVUeXBlID0gY3Y6OkxJTkVfODsKICBKU0NvbG9yRGF0YTxkb3VibGU+IGNvbG9yOwogIEpTUG9pbnREYXRhPGludD4gb2Zmc2V0ezAsIDB9OwogIHN0ZDo6dmVjdG9yPGN2OjpWZWM0aT4gaGllcjsKICBpbnQzMl90IHRoaWNrbmVzcyA9IDEsIG1heExldmVsID0gSU5UX01BWDsKICBib29sIGFudGlhbGlhcyA9IHRydWU7CgogIGlmKGpzX2lzX25vYXJyYXkoKGRzdCA9IGpzX3VtYXRfb3JfbWF0KGN0eCwgYXJndlswXSkpKSkKICAgIHJldHVybiBKU19FWENFUFRJT047CgogIGpzX2FycmF5X3RvKGN0eCwgYXJndlsxXSwgY29udG91cnMpOwoKICBqc192YWx1ZV90byhjdHgsIGFyZ3ZbMl0sIGNvbnRvdXJJZHgpOwoKICBqc19jb2xvcl9yZWFkKGN0eCwgYXJndlszXSwgJmNvbG9yKTsKICBpZihhcmdjID4gNCkgewogICAganNfdmFsdWVfdG8oY3R4LCBhcmd2WzRdLCB0aGlja25lc3MpOwogICAgaWYoYXJnYyA+IDUpIHsKICAgICAganNfdmFsdWVfdG8oY3R4LCBhcmd2WzVdLCBsaW5lVHlwZSk7CiAgICAgIGlmKGFyZ2MgPiA2KSB7CiAgICAgICAganNfYXJyYXlfdG8oY3R4LCBhcmd2WzZdLCBoaWVyKTsKICAgICAgICBpZihhcmdjID4gNykgewogICAgICAgICAganNfdmFsdWVfdG8oY3R4LCBhcmd2WzddLCBtYXhMZXZlbCk7CiAgICAgICAgICBpZihhcmdjID4gOCkKICAgICAgICAgICAganNfcG9pbnRfcmVhZDxpbnQ+KGN0eCwgYXJndls4XSwgJm9mZnNldCk7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfQoKICAvLyBzdGQ6OmNlcnIgPDwgImRyYXdfY29udG91cnMoKSBjb250b3Vycy5sZW5ndGg9IiA8PCBjb250b3Vycy5zaXplKCkgPDwgIiBjb250b3VySWR4PSIgPDwKICAvLyBjb250b3VySWR4IDw8ICIgdGhpY2tuZXNzPSIKICAvLyA8PCB0aGlja25lc3MgPDwgc3RkOjplbmRsOwoKICBjdjo6ZHJhd0NvbnRvdXJzKGRzdCwKICAgICAgICAgICAgICAgICAgIGNvbnRvdXJzLAogICAgICAgICAgICAgICAgICAgY29udG91cklkeCwKICAgICAgICAgICAgICAgICAgICpyZWludGVycHJldF9jYXN0PGN2OjpTY2FsYXIqPigmY29sb3IpLAogICAgICAgICAgICAgICAgICAgdGhpY2tuZXNzLAogICAgICAgICAgICAgICAgICAgbGluZVR5cGUsCiAgICAgICAgICAgICAgICAgICBhcmdjID4gNiA/IEpTSW5wdXRPdXRwdXRBcnJheShoaWVyKSA6IGN2Ojpub0FycmF5KCksCiAgICAgICAgICAgICAgICAgICBtYXhMZXZlbCwKICAgICAgICAgICAgICAgICAgIG9mZnNldCk7CgogIC8vIHN0ZDo6Y2VyciA8PCAiZHJhd19jb250b3VycygpIHJldDoiIDw8IHJldCA8PCAiIGNvbG9yOiAiIDw8CiAgLy8gKnJlaW50ZXJwcmV0X2Nhc3Q8Y3Y6OlNjYWxhcio+KCZjb2xvcikgPDwgc3RkOjplbmRsOwoKICByZXR1cm4gSlNfVU5ERUZJTkVEOwp9CgpzdGF0aWMgSlNWYWx1ZQpqc19kcmF3X2xpbmUoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCogYXJndikgewogIEpTSW5wdXRPdXRwdXRBcnJheSBkc3Q7CiAgaW50IGkgPSAwLCByZXQgPSAtMTsKICBKU1BvaW50RGF0YTxkb3VibGU+IHBvaW50c1syXTsKICBKU0NvbG9yRGF0YTx1aW50OF90PiBjb2xvcjsKICBjdjo6U2NhbGFyIHNjYWxhcjsKICBpbnQgdGhpY2tuZXNzID0gMTsKICBib29sIGFudGlhbGlhcyA9IHRydWU7CgogIGlmKGFyZ2MgPiBpKSB7CiAgICBpZighanNfaXNfbm9hcnJheSgoZHN0ID0ganNfdW1hdF9vcl9tYXQoY3R4LCBhcmd2W2ldKSkpKQogICAgICBpKys7CiAgfSBlbHNlCiAgICBkc3QgPSAqZHB0cjsKCiAgaWYoanNfaXNfbm9hcnJheShkc3QpKQogICAgcmV0dXJuIEpTX0VYQ0VQVElPTjsKCiAgaWYoYXJnYyA+IGkpCiAgICBpZihqc19wb2ludF9yZWFkKGN0eCwgYXJndltpXSwgJnBvaW50c1swXSkpIHsKICAgICAgaSsrOwogICAgfQogIGlmKGFyZ2MgPiBpKQogICAgaWYoanNfcG9pbnRfcmVhZChjdHgsIGFyZ3ZbaV0sICZwb2ludHNbMV0pKSB7CiAgICAgIGkrKzsKICAgIH0KCiAgaWYoYXJnYyA+IGkpCiAgICBpZihqc19jb2xvcl9yZWFkKGN0eCwgYXJndltpXSwgJmNvbG9yKSkgewogICAgICBpKys7CgogICAgICBzY2FsYXJbMF0gPSBjb2xvci5hcnJbMF07CiAgICAgIHNjYWxhclsxXSA9IGNvbG9yLmFyclsxXTsKICAgICAgc2NhbGFyWzJdID0gY29sb3IuYXJyWzJdOwogICAgICBzY2FsYXJbM10gPSBjb2xvci5hcnJbM107CiAgICB9CgogIGlmKGFyZ2MgPiBpICYmIEpTX0lzTnVtYmVyKGFyZ3ZbaV0pKQogICAganMuZ2V0X251bWJlcihhcmd2W2krK10sIHRoaWNrbmVzcyk7CgogIGlmKGFyZ2MgPiBpICYmIGpzLmlzX2Jvb2woYXJndltpXSkpCiAgICBqcy5nZXRfYm9vbGVhbihhcmd2W2krK10sIGFudGlhbGlhcyk7CgogIGN2OjpsaW5lKGRzdCwgcG9pbnRzWzBdLCBwb2ludHNbMV0sIHNjYWxhciwgdGhpY2tuZXNzLCBhbnRpYWxpYXMgPyBjdjo6TElORV9BQSA6IGN2OjpMSU5FXzgpOwogIHJldHVybiBKU19VTkRFRklORUQ7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX2RyYXdfcG9seWdvbihKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2KSB7CiAgSlNJbnB1dE91dHB1dEFycmF5IGRzdDsKICBpbnQgaSA9IDAsIHJldCA9IC0xOwogIHBvaW50X3ZlY3RvcjxpbnQ+IHBvaW50czsKICBjdjo6U2NhbGFyIGNvbG9yOwogIGJvb2wgYW50aWFsaWFzID0gdHJ1ZTsKICBpbnQgdGhpY2tuZXNzID0gLTE7CgogIGlmKGFyZ2MgPiBpKSB7CiAgICBpZighanNfaXNfbm9hcnJheSgoZHN0ID0ganNfdW1hdF9vcl9tYXQoY3R4LCBhcmd2W2ldKSkpKQogICAgICBpKys7CiAgfSBlbHNlCiAgICBkc3QgPSAqZHB0cjsKCiAgaWYoYXJnYyA+IGkgJiYganMuaXNfYXJyYXlfbGlrZShhcmd2W2ldKSkKICAgIGpzLmdldF9wb2ludF9hcnJheShhcmd2W2krK10sIHBvaW50cyk7CiAgaWYoYXJnYyA+IGkgJiYganMuaXNfY29sb3IoYXJndltpXSkpCiAgICBqcy5nZXRfY29sb3IoYXJndltpKytdLCBjb2xvcik7CgogIGlmKGFyZ2MgPiBpICYmIEpTX0lzTnVtYmVyKGFyZ3ZbaV0pKQogICAganMuZ2V0X251bWJlcihhcmd2W2krK10sIHRoaWNrbmVzcyk7CgogIGlmKGFyZ2MgPiBpICYmIGpzLmlzX2Jvb2woYXJndltpXSkpCiAgICBqcy5nZXRfYm9vbGVhbihhcmd2W2krK10sIGFudGlhbGlhcyk7CgogIGlmKGRwdHIgIT0gbnVsbHB0cikgewogICAgY29uc3QgaW50IHNpemUgPSBwb2ludHMuc2l6ZSgpOwogICAgaW50IGxpbmVUeXBlID0gYW50aWFsaWFzID8gY3Y6OkxJTkVfQUEgOiBjdjo6TElORV84OwogICAgY29uc3QgSlNQb2ludERhdGE8aW50PiogcHRzID0gcG9pbnRzLmRhdGEoKTsKCiAgICBzdGQ6OmNlcnIgPDwgImRyYXdQb2x5Z29uKCkgcG9pbnRzOiAiIDw8IChwb2ludHMpIDw8ICIgY29sb3I6ICIgPDwgdG9fc3RyaW5nKGNvbG9yKSA8PCBzdGQ6OmVuZGw7CgogICAgLy8gY3Y6OmZpbGxQb2x5KCpkcHRyLCBwb2ludHMsIGNvbG9yLCBhbnRpYWxpYXMgPyBjdjo6TElORV9BQSA6IGN2OjpMSU5FXzgpOwogICAgKHRoaWNrbmVzcyA8PSAwID8gY3Y6OmZpbGxQb2x5KGRzdCwgJnB0cywgJnNpemUsIDEsIGNvbG9yLCBsaW5lVHlwZSkKICAgICAgICAgICAgICAgICAgICA6IGN2Ojpwb2x5bGluZXMoZHN0LCAmcHRzLCAmc2l6ZSwgMSwgdHJ1ZSwgY29sb3IsIHRoaWNrbmVzcywgbGluZVR5cGUpKTsKCiAgICByZXR1cm4gSlNfVU5ERUZJTkVEOwogIH0KICByZXR1cm4gSlNfRVhDRVBUSU9OOwp9CgpzdGF0aWMgSlNWYWx1ZQpqc19kcmF3X3JlY3QoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCogYXJndikgewogIEpTSW5wdXRPdXRwdXRBcnJheSBkc3Q7CiAgaW50IGkgPSAwLCByZXQgPSAtMTsKICBKU1JlY3REYXRhPGRvdWJsZT4gcmVjdDsKICBKU1BvaW50RGF0YTxkb3VibGU+IHBvaW50c1syXTsKICBKU0NvbG9yRGF0YTx1aW50OF90PiBjb2xvcjsKICBjdjo6U2NhbGFyIHNjYWxhcjsKICBpbnQgdGhpY2tuZXNzID0gMTsKICBib29sIGFudGlhbGlhcyA9IHRydWU7CgogIGlmKGFyZ2MgPiBpKSB7CiAgICBpZighanNfaXNfbm9hcnJheSgoZHN0ID0ganNfdW1hdF9vcl9tYXQoY3R4LCBhcmd2W2ldKSkpKQogICAgICBpKys7CiAgfSBlbHNlCiAgICBkc3QgPSAqZHB0cjsKCiAgaWYoanNfaXNfbm9hcnJheShkc3QpKQogICAgcmV0dXJuIEpTX0VYQ0VQVElPTjsKCiAgaWYoYXJnYyA+IGkpIHsKICAgIGlmKGpzX3JlY3RfcmVhZChjdHgsIGFyZ3ZbaV0sICZyZWN0KSkKICAgICAgaSsrOwogICAgLy8gICAganMuZ2V0X3JlY3QoYXJndltpKytdLCByZWN0KTsKICB9CgogIGlmKGFyZ2MgPiBpKQogICAgaWYoanNfY29sb3JfcmVhZChjdHgsIGFyZ3ZbaV0sICZjb2xvcikpIHsKICAgICAgaSsrOwoKICAgICAgc2NhbGFyWzBdID0gY29sb3IuYXJyWzBdOwogICAgICBzY2FsYXJbMV0gPSBjb2xvci5hcnJbMV07CiAgICAgIHNjYWxhclsyXSA9IGNvbG9yLmFyclsyXTsKICAgICAgc2NhbGFyWzNdID0gY29sb3IuYXJyWzNdOwogICAgfQoKICBpZihhcmdjID4gaSAmJiBKU19Jc051bWJlcihhcmd2W2ldKSkKICAgIGpzLmdldF9udW1iZXIoYXJndltpKytdLCB0aGlja25lc3MpOwoKICBpZihhcmdjID4gaSAmJiBqcy5pc19ib29sKGFyZ3ZbaV0pKQogICAganMuZ2V0X2Jvb2xlYW4oYXJndltpKytdLCBhbnRpYWxpYXMpOwoKICBwb2ludHNbMF0ueCA9IHJlY3QueDsKICBwb2ludHNbMF0ueSA9IHJlY3QueTsKICBwb2ludHNbMV0ueCA9IHJlY3QueCArIHJlY3Qud2lkdGg7CiAgcG9pbnRzWzFdLnkgPSByZWN0LnkgKyByZWN0LmhlaWdodDsKCiAgLy8gY3Y6OnJlY3RhbmdsZShkc3QsIHBvaW50c1swXSwgcG9pbnRzWzFdLCBjb2xvciwgdGhpY2tuZXNzLCBhbnRpYWxpYXMgPyBjdjo6TElORV9BQSA6CiAgLy8gY3Y6OkxJTkVfOCk7CiAgY3Y6OnJlY3RhbmdsZShkc3QsIHJlY3QsIHNjYWxhciwgdGhpY2tuZXNzLCBhbnRpYWxpYXMgPyBjdjo6TElORV9BQSA6IGN2OjpMSU5FXzgpOwoKICByZXR1cm4gSlNfVU5ERUZJTkVEOwp9CgpzdGF0aWMgSlNWYWx1ZQpqc19wdXRfdGV4dChKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2KSB7CiAgY3Y6Ok1hdCogZHN0OwogIGludCBpID0gMCwgcmV0ID0gLTE7CiAgSlNDb2xvckRhdGE8ZG91YmxlPiBjb2xvcjsKICBKU1BvaW50RGF0YTxkb3VibGU+IHBvaW50OwogIHN0ZDo6c3RyaW5nIHRleHQsIGZvbnROYW1lOwogIGludDMyX3QgZm9udEZhY2UgPSBjdjo6Rk9OVF9IRVJTSEVZX1NJTVBMRVgsIHRoaWNrbmVzcyA9IDEsIGxpbmVUeXBlID0gY3Y6OkxJTkVfQUE7CiAgZG91YmxlIGZvbnRTY2FsZSA9IDE7CiAgYm9vbCBib3R0b21MZWZ0T3JpZ2luID0gZmFsc2U7CgogIGlmKGFyZ2MgPiBpICYmIChkc3QgPSBqc19tYXRfZGF0YShjdHgsIGFyZ3ZbaV0pKSkKICAgIGkrKzsKICBlbHNlCiAgICBkc3QgPSBkcHRyOwoKICBpZihkc3QgPT0gbnVsbHB0cikKICAgIHJldHVybiBKU19FWENFUFRJT047CgogIGpzX3ZhbHVlX3RvKGN0eCwgYXJndltpKytdLCB0ZXh0KTsKCiAgaWYoanNfcG9pbnRfcmVhZChjdHgsIGFyZ3ZbaV0sICZwb2ludCkpIHsKICAgIGkrKzsKICB9IGVsc2UgewogICAgaW50MzJfdCB4LCB5OwogICAgSlNfVG9JbnQzMihjdHgsICZ4LCBhcmd2W2ldKTsKICAgIEpTX1RvSW50MzIoY3R4LCAmeSwgYXJndltpICsgMV0pOwoKICAgIHBvaW50LnggPSB4OwogICAgcG9pbnQueSA9IHk7CiAgICBpICs9IDI7CiAgfQoKICBpZihhcmdjID4gaSkgewogICAgaWYoSlNfSXNOdW1iZXIoYXJndltpXSkpCiAgICAgIEpTX1RvSW50MzIoY3R4LCAmZm9udEZhY2UsIGFyZ3ZbaV0pOwogICAgZWxzZQogICAgICBqc192YWx1ZV90byhjdHgsIGFyZ3ZbaV0sIGZvbnROYW1lKTsKICAgIGkrKzsKICB9CgogIGlmKGFyZ2MgPiBpKQogICAgSlNfVG9GbG9hdDY0KGN0eCwgJmZvbnRTY2FsZSwgYXJndltpKytdKTsKCiAgaWYoYXJnYyA+IGkpIHsKICAgIGpzX2NvbG9yX3JlYWQoY3R4LCBhcmd2W2ldLCAmY29sb3IpOwogICAgaSsrOwogIH0KCiAgaWYoYXJnYyA+IGkpCiAgICBKU19Ub0ludDMyKGN0eCwgJnRoaWNrbmVzcywgYXJndltpKytdKTsKCiAgaWYoYXJnYyA+IGkpCiAgICBKU19Ub0ludDMyKGN0eCwgJmxpbmVUeXBlLCBhcmd2W2krK10pOwoKICBpZihhcmdjID4gaSkKICAgIGJvdHRvbUxlZnRPcmlnaW4gPSBKU19Ub0Jvb2woY3R4LCBhcmd2W2krK10pOwoKICBpZighZm9udE5hbWUuZW1wdHkoKSAmJiBmb250TmFtZSAhPSBmcmVldHlwZTJfZmFjZSkgewogICAgZnJlZXR5cGUyLT5sb2FkRm9udERhdGEoZm9udE5hbWUsIDApOwogICAgZnJlZXR5cGUyX2ZhY2UgPSBmb250TmFtZTsKICB9CgogIGlmKGZvbnROYW1lLmVtcHR5KCkpCiAgICBjdjo6cHV0VGV4dCgKICAgICAgICAqZHN0LCB0ZXh0LCBwb2ludCwgZm9udEZhY2UsIGZvbnRTY2FsZSwgKnJlaW50ZXJwcmV0X2Nhc3Q8Y3Y6OlNjYWxhcio+KCZjb2xvciksIHRoaWNrbmVzcywgbGluZVR5cGUsIGJvdHRvbUxlZnRPcmlnaW4pOwogIGVsc2UKICAgIGZyZWV0eXBlMi0+cHV0VGV4dCgKICAgICAgICAqZHN0LCB0ZXh0LCBwb2ludCwgZm9udFNjYWxlLCAqcmVpbnRlcnByZXRfY2FzdDxjdjo6U2NhbGFyKj4oJmNvbG9yKSwgdGhpY2tuZXNzLCBsaW5lVHlwZSwgYm90dG9tTGVmdE9yaWdpbik7CgogIHJldHVybiBKU19VTkRFRklORUQ7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX2dldF90ZXh0X3NpemUoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCogYXJndikgewogIGludCBpID0gMCwgYmFzZWxpbmUgPSAwOwogIEpTU2l6ZURhdGE8ZG91YmxlPiBzaXplOwogIGNvbnN0IGNoYXIqIHRleHQ7CiAgaW50MzJfdCBmb250RmFjZSA9IGN2OjpGT05UX0hFUlNIRVlfU0lNUExFWCwgdGhpY2tuZXNzID0gMTsKICBzdGQ6OnN0cmluZyBmb250TmFtZTsKICBkb3VibGUgZm9udFNjYWxlID0gMTsKICBKU1ZhbHVlIGJhc2VsaW5lVmFsOwogIHN0ZDo6YXJyYXk8aW50MzJfdCwgMj4gZGltOwoKICB0ZXh0ID0gSlNfVG9DU3RyaW5nKGN0eCwgYXJndltpKytdKTsKCiAgaWYoYXJnYyA+IGkpIHsKICAgIGlmKEpTX0lzTnVtYmVyKGFyZ3ZbaV0pKQogICAgICBKU19Ub0ludDMyKGN0eCwgJmZvbnRGYWNlLCBhcmd2W2ldKTsKICAgIGVsc2UKICAgICAganNfdmFsdWVfdG8oY3R4LCBhcmd2W2ldLCBmb250TmFtZSk7CiAgICBpKys7CiAgfQoKICBpZihhcmdjID4gaSkKICAgIEpTX1RvRmxvYXQ2NChjdHgsICZmb250U2NhbGUsIGFyZ3ZbaSsrXSk7CgogIGlmKGFyZ2MgPiBpKQogICAgSlNfVG9JbnQzMihjdHgsICZ0aGlja25lc3MsIGFyZ3ZbaSsrXSk7CgogIGlmKGZyZWV0eXBlMiA9PSBudWxscHRyKQogICAgZnJlZXR5cGUyID0gY3Y6OmZyZWV0eXBlOjpjcmVhdGVGcmVlVHlwZTIoKTsKCiAgaWYoIWZvbnROYW1lLmVtcHR5KCkgJiYgZm9udE5hbWUgIT0gZnJlZXR5cGUyX2ZhY2UpIHsKICAgIGZyZWV0eXBlMi0+bG9hZEZvbnREYXRhKGZvbnROYW1lLCAwKTsKICAgIGZyZWV0eXBlMl9mYWNlID0gZm9udE5hbWU7CiAgfQoKICBpZihmb250TmFtZS5lbXB0eSgpKQogICAgc2l6ZSA9IGN2OjpnZXRUZXh0U2l6ZSh0ZXh0LCBmb250RmFjZSwgZm9udFNjYWxlLCB0aGlja25lc3MsICZiYXNlbGluZSk7CiAgZWxzZQogICAgc2l6ZSA9IGZyZWV0eXBlMi0+Z2V0VGV4dFNpemUodGV4dCwgZm9udFNjYWxlLCB0aGlja25lc3MsICZiYXNlbGluZSk7CgogIGJhc2VsaW5lVmFsID0gSlNfTmV3SW50MzIoY3R4LCBiYXNlbGluZSk7CgogIGlmKEpTX0lzRnVuY3Rpb24oY3R4LCBhcmd2W2ldKSkgewogICAgSlNfQ2FsbChjdHgsIGFyZ3ZbaV0sIEpTX1VOREVGSU5FRCwgMSwgY29uc3RfY2FzdDxKU1ZhbHVlQ29uc3QqPigmYmFzZWxpbmVWYWwpKTsKICB9IGVsc2UgaWYoanNfaXNfYXJyYXkoY3R4LCBhcmd2W2ldKSkgewogICAgSlNfU2V0UHJvcGVydHlVaW50MzIoY3R4LCBhcmd2W2ldLCAwLCBiYXNlbGluZVZhbCk7CiAgfSBlbHNlIGlmKEpTX0lzT2JqZWN0KGFyZ3ZbaV0pKSB7CiAgICBKU19TZXRQcm9wZXJ0eVN0cihjdHgsIGFyZ3ZbaV0sICJ5IiwgYmFzZWxpbmVWYWwpOwogIH0KICBkaW1bMF0gPSBzaXplLndpZHRoOwogIGRpbVsxXSA9IHNpemUuaGVpZ2h0OwoKICByZXR1cm4ganNfYXJyYXk8aW50MzJfdD46OmZyb21fc2VxdWVuY2UoY3R4LCBkaW0uY2JlZ2luKCksIGRpbS5jZW5kKCkpOwp9CgpzdGF0aWMgSlNWYWx1ZQpqc19nZXRfZm9udF9zY2FsZV9mcm9tX2hlaWdodChKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2KSB7CiAgaW50MzJfdCBmb250RmFjZSwgcGl4ZWxIZWlnaHQsIHRoaWNrbmVzcyA9IDE7CiAgZG91YmxlIGZvbnRTY2FsZTsKCiAgSlNfVG9JbnQzMihjdHgsICZmb250RmFjZSwgYXJndlswXSk7CiAgSlNfVG9JbnQzMihjdHgsICZwaXhlbEhlaWdodCwgYXJndlsxXSk7CiAgaWYoYXJnYyA+IDIpCiAgICBKU19Ub0ludDMyKGN0eCwgJnRoaWNrbmVzcywgYXJndlsyXSk7CgogIGZvbnRTY2FsZSA9IGN2OjpnZXRGb250U2NhbGVGcm9tSGVpZ2h0KGZvbnRGYWNlLCBwaXhlbEhlaWdodCwgdGhpY2tuZXNzKTsKCiAgcmV0dXJuIEpTX05ld0Zsb2F0NjQoY3R4LCBmb250U2NhbGUpOwp9CgpzdGF0aWMgSlNWYWx1ZQpqc19sb2FkX2ZvbnQoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCogYXJndikgewogIGludDMyX3QgaWQgPSAwOwogIHN0ZDo6c3RyaW5nIGZvbnROYW1lOwoKICBpZihmcmVldHlwZTIgPT0gbnVsbHB0cikKICAgIGZyZWV0eXBlMiA9IGN2OjpmcmVldHlwZTo6Y3JlYXRlRnJlZVR5cGUyKCk7CgogIGpzX3ZhbHVlX3RvKGN0eCwgYXJndlswXSwgZm9udE5hbWUpOwogIGlmKGFyZ2MgPiAxKQogICAganNfdmFsdWVfdG8oY3R4LCBhcmd2WzFdLCBpZCk7CiAgZnJlZXR5cGUyLT5sb2FkRm9udERhdGEoZm9udE5hbWUsIGlkKTsKICByZXR1cm4gSlNfVU5ERUZJTkVEOwp9CgpKU1ZhbHVlIGRyYXdfcHJvdG8gPSBKU19VTkRFRklORUQsIGRyYXdfY2xhc3MgPSBKU19VTkRFRklORUQ7CkpTQ2xhc3NJRCBqc19kcmF3X2NsYXNzX2lkID0gMDsKCkpTQ2xhc3NEZWYganNfZHJhd19jbGFzcyA9IHsKICAgIC5jbGFzc19uYW1lID0gIkRyYXciLAogICAgLmZpbmFsaXplciA9IDAsCn07Cgpjb25zdCBKU0NGdW5jdGlvbkxpc3RFbnRyeSBqc19kcmF3X3Byb3RvX2Z1bmNzW10gPSB7CiAgICBKU19QUk9QX1NUUklOR19ERUYoIltTeW1ib2wudG9TdHJpbmdUYWddIiwgIkRyYXciLCBKU19QUk9QX0NPTkZJR1VSQUJMRSksCn07Cgpjb25zdCBKU0NGdW5jdGlvbkxpc3RFbnRyeSBqc19kcmF3X3N0YXRpY19mdW5jc1tdID0gewogICAgSlNfQ0ZVTkNfREVGKCJjaXJjbGUiLCAxLCAmanNfZHJhd19jaXJjbGUpLAogICAgSlNfQ0ZVTkNfREVGKCJjb250b3VyIiwgMSwgJmpzX2RyYXdfY29udG91ciksCiAgICBKU19DRlVOQ19ERUYoImNvbnRvdXJzIiwgNCwgJmpzX2RyYXdfY29udG91cnMpLAogICAgSlNfQ0ZVTkNfREVGKCJsaW5lIiwgMSwgJmpzX2RyYXdfbGluZSksCiAgICBKU19DRlVOQ19ERUYoInBvbHlnb24iLCAxLCAmanNfZHJhd19wb2x5Z29uKSwKICAgIEpTX0NGVU5DX0RFRigicmVjdCIsIDEsICZqc19kcmF3X3JlY3QpLAogICAgSlNfQ0ZVTkNfREVGKCJ0ZXh0IiwgMiwgJmpzX3B1dF90ZXh0KSwKICAgIEpTX0NGVU5DX0RFRigidGV4dFNpemUiLCA1LCAmanNfZ2V0X3RleHRfc2l6ZSksCiAgICBKU19DRlVOQ19ERUYoImZvbnRTY2FsZUZyb21IZWlnaHQiLCAyLCAmanNfZ2V0X2ZvbnRfc2NhbGVfZnJvbV9oZWlnaHQpLAogICAgSlNfQ0ZVTkNfREVGKCJsb2FkRm9udCIsIDEsICZqc19sb2FkX2ZvbnQpLAp9OwoKY29uc3QgSlNDRnVuY3Rpb25MaXN0RW50cnkganNfZHJhd19nbG9iYWxfZnVuY3NbXSA9IHsKICAgIEpTX0NGVU5DX0RFRigiZHJhd0NpcmNsZSIsIDEsICZqc19kcmF3X2NpcmNsZSksCiAgICBKU19DRlVOQ19ERUYoImRyYXdDb250b3VyIiwgMSwgJmpzX2RyYXdfY29udG91ciksCiAgICBKU19DRlVOQ19ERUYoImRyYXdMaW5lIiwgMSwgJmpzX2RyYXdfbGluZSksCiAgICBKU19DRlVOQ19ERUYoImRyYXdQb2x5Z29uIiwgMSwgJmpzX2RyYXdfcG9seWdvbiksCiAgICBKU19DRlVOQ19ERUYoImRyYXdSZWN0IiwgMSwgJmpzX2RyYXdfcmVjdCksCiAgICBKU19DRlVOQ19ERUYoInB1dFRleHQiLCAyLCAmanNfcHV0X3RleHQpLAogICAgSlNfQ0ZVTkNfREVGKCJnZXRUZXh0U2l6ZSIsIDUsICZqc19nZXRfdGV4dF9zaXplKSwKICAgIEpTX0NGVU5DX0RFRigiZ2V0Rm9udFNjYWxlRnJvbUhlaWdodCIsIDIsICZqc19nZXRfZm9udF9zY2FsZV9mcm9tX2hlaWdodCksCiAgICBKU19DRlVOQ19ERUYoImxvYWRGb250IiwgMSwgJmpzX2xvYWRfZm9udCksCn07CgpzdGF0aWMgSlNWYWx1ZQpqc19kcmF3X2N0b3IoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCBuZXdfdGFyZ2V0LCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2KSB7CiAgSlNWYWx1ZSBvYmogPSBKU19VTkRFRklORUQ7CiAgSlNWYWx1ZSBwcm90bzsKCiAgLyogdXNpbmcgbmV3X3RhcmdldCB0byBnZXQgdGhlIHByb3RvdHlwZSBpcyBuZWNlc3Nhcnkgd2hlbiB0aGUKICAgICBjbGFzcyBpcyBleHRlbmRlZC4gKi8KICBwcm90byA9IEpTX0dldFByb3BlcnR5U3RyKGN0eCwgbmV3X3RhcmdldCwgInByb3RvdHlwZSIpOwogIGlmKEpTX0lzRXhjZXB0aW9uKHByb3RvKSkKICAgIGdvdG8gZmFpbDsKICBvYmogPSBKU19OZXdPYmplY3RQcm90b0NsYXNzKGN0eCwgcHJvdG8sIGpzX2RyYXdfY2xhc3NfaWQpOwogIEpTX0ZyZWVWYWx1ZShjdHgsIHByb3RvKTsKICBpZihKU19Jc0V4Y2VwdGlvbihvYmopKQogICAgZ290byBmYWlsOwogIHJldHVybiBvYmo7CmZhaWw6CiAgSlNfRnJlZVZhbHVlKGN0eCwgb2JqKTsKICByZXR1cm4gSlNfRVhDRVBUSU9OOwp9CgppbnQKanNfZHJhd19pbml0KEpTQ29udGV4dCogY3R4LCBKU01vZHVsZURlZiogbSkgewoKICBpZihqc19kcmF3X2NsYXNzX2lkID09IDApIHsKICAgIC8qIGNyZWF0ZSB0aGUgRHJhdyBjbGFzcyAqLwogICAgSlNfTmV3Q2xhc3NJRCgmanNfZHJhd19jbGFzc19pZCk7CiAgICBKU19OZXdDbGFzcyhKU19HZXRSdW50aW1lKGN0eCksIGpzX2RyYXdfY2xhc3NfaWQsICZqc19kcmF3X2NsYXNzKTsKCiAgICBkcmF3X3Byb3RvID0gSlNfTmV3T2JqZWN0KGN0eCk7CiAgICBKU19TZXRQcm9wZXJ0eUZ1bmN0aW9uTGlzdChjdHgsIGRyYXdfcHJvdG8sIGpzX2RyYXdfcHJvdG9fZnVuY3MsIGNvdW50b2YoanNfZHJhd19wcm90b19mdW5jcykpOwogICAgSlNfU2V0Q2xhc3NQcm90byhjdHgsIGpzX2RyYXdfY2xhc3NfaWQsIGRyYXdfcHJvdG8pOwoKICAgIGRyYXdfY2xhc3MgPSBKU19OZXdDRnVuY3Rpb24yKGN0eCwganNfZHJhd19jdG9yLCAiRHJhdyIsIDIsIEpTX0NGVU5DX2NvbnN0cnVjdG9yLCAwKTsKCiAgICAvKiBzZXQgcHJvdG8uY29uc3RydWN0b3IgYW5kIGN0b3IucHJvdG90eXBlICovCiAgICBKU19TZXRDb25zdHJ1Y3RvcihjdHgsIGRyYXdfY2xhc3MsIGRyYXdfcHJvdG8pOwogICAgSlNfU2V0UHJvcGVydHlGdW5jdGlvbkxpc3QoY3R4LCBkcmF3X2NsYXNzLCBqc19kcmF3X3N0YXRpY19mdW5jcywgY291bnRvZihqc19kcmF3X3N0YXRpY19mdW5jcykpOwogIH0KCiAgaWYobSkgewogICAgSlNfU2V0TW9kdWxlRXhwb3J0TGlzdChjdHgsIG0sIGpzX2RyYXdfc3RhdGljX2Z1bmNzLCBjb3VudG9mKGpzX2RyYXdfc3RhdGljX2Z1bmNzKSk7CiAgICBKU19TZXRNb2R1bGVFeHBvcnQoY3R4LCBtLCAiRHJhdyIsIGRyYXdfY2xhc3MpOwogIH0KICAvKiAgZWxzZQogICAgICBKU19TZXRQcm9wZXJ0eVN0cihjdHgsICpzdGF0aWNfY2FzdDxKU1ZhbHVlKj4obSksICJEcmF3IiwgZHJhd19jbGFzcyk7Ki8KICByZXR1cm4gMDsKfQoKZXh0ZXJuICJDIiBWSVNJQkxFIHZvaWQganNfZHJhd19leHBvcnQoSlNDb250ZXh0KiBjdHgsIEpTTW9kdWxlRGVmKiBtKSB7CiAgSlNfQWRkTW9kdWxlRXhwb3J0KGN0eCwgbSwgIkRyYXciKTsKICBKU19BZGRNb2R1bGVFeHBvcnRMaXN0KGN0eCwgbSwganNfZHJhd19zdGF0aWNfZnVuY3MsIGNvdW50b2YoanNfZHJhd19zdGF0aWNfZnVuY3MpKTsKfQoKI2lmIGRlZmluZWQoSlNfRFJBV19NT0RVTEUpCiNkZWZpbmUgSlNfSU5JVF9NT0RVTEUgLypWSVNJQkxFKi8ganNfaW5pdF9tb2R1bGUKI2Vsc2UKI2RlZmluZSBKU19JTklUX01PRFVMRSAvKlZJU0lCTEUqLyBqc19pbml0X21vZHVsZV9kcmF3CiNlbmRpZgoKSlNNb2R1bGVEZWYqCkpTX0lOSVRfTU9EVUxFKEpTQ29udGV4dCogY3R4LCBjb25zdCBjaGFyKiBtb2R1bGVfbmFtZSkgewogIEpTTW9kdWxlRGVmKiBtOwogIG0gPSBKU19OZXdDTW9kdWxlKGN0eCwgbW9kdWxlX25hbWUsICZqc19kcmF3X2luaXQpOwogIGlmKCFtKQogICAgcmV0dXJuIE5VTEw7CiAganNfZHJhd19leHBvcnQoY3R4LG0pOwogIHJldHVybiBtOwp9CnZvaWQKanNfZHJhd19jb25zdHJ1Y3RvcihKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZSBwYXJlbnQsIGNvbnN0IGNoYXIqIG5hbWUpIHsKICBpZihKU19Jc1VuZGVmaW5lZChkcmF3X2NsYXNzKSkKICAgIGpzX2RyYXdfaW5pdChjdHgsIDApOwoKICBKU19TZXRQcm9wZXJ0eVN0cihjdHgsIHBhcmVudCwgbmFtZSA/IG5hbWUgOiAiRHJhdyIsIGRyYXdfY2xhc3MpOwp9Cn0KAAAAAAAAAAANPwAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAALD4AAAAAAAAsPgAAAAAAAAAAAAAAAPC/"
				],
				[
					44,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAAANPwAAI2luY2x1ZGUgImpzYmluZGluZ3MuaHBwIgojaW5jbHVkZSAianNfcG9pbnQuaHBwIgojaW5jbHVkZSAianNfbWF0LmhwcCIKI2luY2x1ZGUgImpzX3VtYXQuaHBwIgojaW5jbHVkZSAianNfYXJyYXkuaHBwIgojaW5jbHVkZSAianNfcmVjdC5ocHAiCiNpbmNsdWRlICJqc19jdi5ocHAiCgojaW5jbHVkZSA8b3BlbmN2Mi9jb3JlL2NvcmUuaHBwPgojaW5jbHVkZSA8b3BlbmN2Mi9mcmVldHlwZS5ocHA+CiNpbmNsdWRlIDxpb3N0cmVhbT4KI2luY2x1ZGUgImdlb21ldHJ5LmhwcCIKCmV4dGVybiAiQyIgVklTSUJMRSBpbnQganNfZHJhd19pbml0KEpTQ29udGV4dCosIEpTTW9kdWxlRGVmKik7Cgpjdjo6UHRyPGN2OjpmcmVldHlwZTo6RnJlZVR5cGUyPiBmcmVldHlwZTIgPSBudWxscHRyOwpzdGQ6OnN0cmluZyBmcmVldHlwZTJfZmFjZTsKCmV4dGVybiAiQyIgewoKY3Y6Ok1hdCogZHB0ciA9IDA7CgpzdGF0aWMgSlNWYWx1ZQpqc19kcmF3X2NpcmNsZShKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2KSB7CiAgSlNJbnB1dE91dHB1dEFycmF5IGRzdDsKICBpbnQgaSA9IDAsIHJldCA9IC0xOwogIEpTUG9pbnREYXRhPGRvdWJsZT4gcG9pbnQ7CiAgaW50MzJfdCB4LCB5OwogIGludCByYWRpdXMgPSAwOwogIEpTQ29sb3JEYXRhPGRvdWJsZT4gY29sb3I7CiAgYm9vbCBhbnRpYWxpYXMgPSB0cnVlOwogIGludCB0aGlja25lc3MgPSAtMTsKICBpbnQgbGluZVR5cGUgPSBjdjo6TElORV9BQTsKCiAgaWYoYXJnYyA+IGkpIHsKICAgIGlmKCFqc19pc19ub2FycmF5KChkc3QgPSBqc191bWF0X29yX21hdChjdHgsIGFyZ3ZbaV0pKSkpCiAgICAgIGkrKzsKICB9IGVsc2UKICAgIGRzdCA9ICpkcHRyOwoKICBpZihqc19pc19ub2FycmF5KGRzdCkpCiAgICByZXR1cm4gSlNfRVhDRVBUSU9OOwoKICBpZihqc19wb2ludF9yZWFkKGN0eCwgYXJndltpXSwgJnBvaW50KSkgewogICAgeCA9IHBvaW50Lng7CiAgICB5ID0gcG9pbnQueTsKICAgIGkrKzsKICB9IGVsc2UgewogICAgSlNfVG9JbnQzMihjdHgsICZ4LCBhcmd2W2ldKTsKICAgIEpTX1RvSW50MzIoY3R4LCAmeSwgYXJndltpICsgMV0pOwogICAgaSArPSAyOwogIH0KCiAgaWYoYXJnYyA+IGkgJiYgSlNfSXNOdW1iZXIoYXJndltpXSkpCiAgICBqcy5nZXRfbnVtYmVyKGFyZ3ZbaSsrXSwgcmFkaXVzKTsKCiAgaWYoYXJnYyA+IGkpIHsKICAgIGpzX2NvbG9yX3JlYWQoY3R4LCBhcmd2W2ldLCAmY29sb3IpOwogICAgaSsrOwogIH0KCiAgaWYoYXJnYyA+IGkgJiYgSlNfSXNOdW1iZXIoYXJndltpXSkpCiAgICBqcy5nZXRfbnVtYmVyKGFyZ3ZbaSsrXSwgdGhpY2tuZXNzKTsKICAvKiovCiAgaWYoYXJnYyA+IGkpIHsKICAgIGlmKGpzLmlzX2Jvb2woYXJndltpXSkpIHsKICAgICAganMuZ2V0X2Jvb2xlYW4oYXJndltpKytdLCBhbnRpYWxpYXMpOwogICAgICBsaW5lVHlwZSA9IGFudGlhbGlhcyA/IGN2OjpMSU5FX0FBIDogY3Y6OkxJTkVfODsKCiAgICB9IGVsc2UgaWYoSlNfSXNOdW1iZXIoYXJndltpXSkpIHsKICAgICAganMuZ2V0X251bWJlcihhcmd2W2krK10sIGxpbmVUeXBlKTsKICAgIH0KICB9CgogIGN2OjpjaXJjbGUoZHN0LCBwb2ludCwgcmFkaXVzLCAqcmVpbnRlcnByZXRfY2FzdDxjdjo6U2NhbGFyKj4oJmNvbG9yKSwgdGhpY2tuZXNzIDwgMCA/IGN2OjpGSUxMRUQgOiB0aGlja25lc3MsIGxpbmVUeXBlKTsKICByZXR1cm4gSlNfVU5ERUZJTkVEOwp9CgpzdGF0aWMgSlNWYWx1ZQpqc19kcmF3X2NvbnRvdXIoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCogYXJndikgewogIEpTSW5wdXRPdXRwdXRBcnJheSBkc3Q7CiAgaW50IGkgPSAwLCByZXQgPSAtMTsKICBKU0NvbnRvdXJzRGF0YTxpbnQ+IGNvbnRvdXJzOwogIGludDMyX3QgY29udG91cklkeCA9IC0xLCBsaW5lVHlwZSA9IGN2OjpMSU5FXzg7CgogIEpTQ29sb3JEYXRhPGRvdWJsZT4gY29sb3I7CiAgaW50IHRoaWNrbmVzcyA9IDE7CiAgYm9vbCBhbnRpYWxpYXMgPSB0cnVlOwoKICBpZihhcmdjID4gaSkgewogICAgaWYoIWpzX2lzX25vYXJyYXkoKGRzdCA9IGpzX3VtYXRfb3JfbWF0KGN0eCwgYXJndltpXSkpKSkKICAgICAgaSsrOwogIH0gZWxzZQogICAgZHN0ID0gKmRwdHI7CgogIGlmKGpzX2lzX25vYXJyYXkoZHN0KSkKICAgIHJldHVybiBKU19FWENFUFRJT047CgogIGlmKGkgPT0gYXJnYyB8fCAhanNfaXNfYXJyYXkoY3R4LCBhcmd2WysraV0pKQogICAgcmV0dXJuIEpTX0VYQ0VQVElPTjsKCiAgLy8ganNfYXJyYXk8SlNDb250b3VyRGF0YTxpbnQ+Pjo6dG9fdmVjdG9yKGN0eCwgYXJndltpXSwgY29udG91cnMpOwoKICBpZihhcmdjID4gaSAmJiBKU19Jc051bWJlcihhcmd2WysraV0pKSB7CiAgICBKU19Ub0ludDMyKGN0eCwgJmNvbnRvdXJJZHgsIGFyZ3ZbaV0pOwogIH0KCiAgaWYoYXJnYyA+IGkpIHsKICAgIGpzX2NvbG9yX3JlYWQoY3R4LCBhcmd2W2ldLCAmY29sb3IpOwogICAgaSsrOwogIH0KCiAgaWYoYXJnYyA+IGkgJiYgSlNfSXNOdW1iZXIoYXJndltpXSkpCiAgICBqcy5nZXRfbnVtYmVyKGFyZ3ZbaSsrXSwgdGhpY2tuZXNzKTsKCiAgaWYoYXJnYyA+IGkgJiYgSlNfSXNOdW1iZXIoYXJndlsrK2ldKSkgewogICAgSlNfVG9JbnQzMihjdHgsICZsaW5lVHlwZSwgYXJndltpXSk7CiAgfQogIHN0ZDo6Y2VyciA8PCAiZHJhd19jb250b3VyKCkgY29udG91cnMubGVuZ3RoPSIgPDwgY29udG91cnMuc2l6ZSgpIDw8ICIgY29udG91cklkeD0iIDw8IGNvbnRvdXJJZHgKICAgICAgICAgICAgPDwgIiB0aGlja25lc3M9IiA8PCB0aGlja25lc3MgPDwgc3RkOjplbmRsOwoKICBjdjo6ZHJhd0NvbnRvdXJzKGRzdCwgY29udG91cnMsIGNvbnRvdXJJZHgsICpyZWludGVycHJldF9jYXN0PGN2OjpTY2FsYXIqPigmY29sb3IpLCB0aGlja25lc3MsIGxpbmVUeXBlKTsKCiAgc3RkOjpjZXJyIDw8ICJkcmF3X2NvbnRvdXIoKSByZXQ6IiA8PCByZXQgPDwgIiBjb2xvcjogIiA8PCAqcmVpbnRlcnByZXRfY2FzdDxjdjo6U2NhbGFyKj4oJmNvbG9yKSA8PCBzdGQ6OmVuZGw7CiAgcmV0dXJuIEpTX1VOREVGSU5FRDsKfQoKc3RhdGljIEpTVmFsdWUKanNfZHJhd19jb250b3VycyhKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2KSB7CiAgSlNJbnB1dE91dHB1dEFycmF5IGRzdDsKICBpbnQgaSA9IDAsIHJldCA9IC0xOwogIEpTQ29udG91cnNEYXRhPGludD4gY29udG91cnM7CiAgaW50MzJfdCBjb250b3VySWR4ID0gLTEsIGxpbmVUeXBlID0gY3Y6OkxJTkVfODsKICBKU0NvbG9yRGF0YTxkb3VibGU+IGNvbG9yOwogIEpTUG9pbnREYXRhPGludD4gb2Zmc2V0ezAsIDB9OwogIHN0ZDo6dmVjdG9yPGN2OjpWZWM0aT4gaGllcjsKICBpbnQzMl90IHRoaWNrbmVzcyA9IDEsIG1heExldmVsID0gSU5UX01BWDsKICBib29sIGFudGlhbGlhcyA9IHRydWU7CgogIGlmKGpzX2lzX25vYXJyYXkoKGRzdCA9IGpzX3VtYXRfb3JfbWF0KGN0eCwgYXJndlswXSkpKSkKICAgIHJldHVybiBKU19FWENFUFRJT047CgogIGpzX2FycmF5X3RvKGN0eCwgYXJndlsxXSwgY29udG91cnMpOwoKICBqc192YWx1ZV90byhjdHgsIGFyZ3ZbMl0sIGNvbnRvdXJJZHgpOwoKICBqc19jb2xvcl9yZWFkKGN0eCwgYXJndlszXSwgJmNvbG9yKTsKICBpZihhcmdjID4gNCkgewogICAganNfdmFsdWVfdG8oY3R4LCBhcmd2WzRdLCB0aGlja25lc3MpOwogICAgaWYoYXJnYyA+IDUpIHsKICAgICAganNfdmFsdWVfdG8oY3R4LCBhcmd2WzVdLCBsaW5lVHlwZSk7CiAgICAgIGlmKGFyZ2MgPiA2KSB7CiAgICAgICAganNfYXJyYXlfdG8oY3R4LCBhcmd2WzZdLCBoaWVyKTsKICAgICAgICBpZihhcmdjID4gNykgewogICAgICAgICAganNfdmFsdWVfdG8oY3R4LCBhcmd2WzddLCBtYXhMZXZlbCk7CiAgICAgICAgICBpZihhcmdjID4gOCkKICAgICAgICAgICAganNfcG9pbnRfcmVhZDxpbnQ+KGN0eCwgYXJndls4XSwgJm9mZnNldCk7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfQoKICAvLyBzdGQ6OmNlcnIgPDwgImRyYXdfY29udG91cnMoKSBjb250b3Vycy5sZW5ndGg9IiA8PCBjb250b3Vycy5zaXplKCkgPDwgIiBjb250b3VySWR4PSIgPDwKICAvLyBjb250b3VySWR4IDw8ICIgdGhpY2tuZXNzPSIKICAvLyA8PCB0aGlja25lc3MgPDwgc3RkOjplbmRsOwoKICBjdjo6ZHJhd0NvbnRvdXJzKGRzdCwKICAgICAgICAgICAgICAgICAgIGNvbnRvdXJzLAogICAgICAgICAgICAgICAgICAgY29udG91cklkeCwKICAgICAgICAgICAgICAgICAgICpyZWludGVycHJldF9jYXN0PGN2OjpTY2FsYXIqPigmY29sb3IpLAogICAgICAgICAgICAgICAgICAgdGhpY2tuZXNzLAogICAgICAgICAgICAgICAgICAgbGluZVR5cGUsCiAgICAgICAgICAgICAgICAgICBhcmdjID4gNiA/IEpTSW5wdXRPdXRwdXRBcnJheShoaWVyKSA6IGN2Ojpub0FycmF5KCksCiAgICAgICAgICAgICAgICAgICBtYXhMZXZlbCwKICAgICAgICAgICAgICAgICAgIG9mZnNldCk7CgogIC8vIHN0ZDo6Y2VyciA8PCAiZHJhd19jb250b3VycygpIHJldDoiIDw8IHJldCA8PCAiIGNvbG9yOiAiIDw8CiAgLy8gKnJlaW50ZXJwcmV0X2Nhc3Q8Y3Y6OlNjYWxhcio+KCZjb2xvcikgPDwgc3RkOjplbmRsOwoKICByZXR1cm4gSlNfVU5ERUZJTkVEOwp9CgpzdGF0aWMgSlNWYWx1ZQpqc19kcmF3X2xpbmUoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCogYXJndikgewogIEpTSW5wdXRPdXRwdXRBcnJheSBkc3Q7CiAgaW50IGkgPSAwLCByZXQgPSAtMTsKICBKU1BvaW50RGF0YTxkb3VibGU+IHBvaW50c1syXTsKICBKU0NvbG9yRGF0YTx1aW50OF90PiBjb2xvcjsKICBjdjo6U2NhbGFyIHNjYWxhcjsKICBpbnQgdGhpY2tuZXNzID0gMTsKICBib29sIGFudGlhbGlhcyA9IHRydWU7CgogIGlmKGFyZ2MgPiBpKSB7CiAgICBpZighanNfaXNfbm9hcnJheSgoZHN0ID0ganNfdW1hdF9vcl9tYXQoY3R4LCBhcmd2W2ldKSkpKQogICAgICBpKys7CiAgfSBlbHNlCiAgICBkc3QgPSAqZHB0cjsKCiAgaWYoanNfaXNfbm9hcnJheShkc3QpKQogICAgcmV0dXJuIEpTX0VYQ0VQVElPTjsKCiAgaWYoYXJnYyA+IGkpCiAgICBpZihqc19wb2ludF9yZWFkKGN0eCwgYXJndltpXSwgJnBvaW50c1swXSkpIHsKICAgICAgaSsrOwogICAgfQogIGlmKGFyZ2MgPiBpKQogICAgaWYoanNfcG9pbnRfcmVhZChjdHgsIGFyZ3ZbaV0sICZwb2ludHNbMV0pKSB7CiAgICAgIGkrKzsKICAgIH0KCiAgaWYoYXJnYyA+IGkpCiAgICBpZihqc19jb2xvcl9yZWFkKGN0eCwgYXJndltpXSwgJmNvbG9yKSkgewogICAgICBpKys7CgogICAgICBzY2FsYXJbMF0gPSBjb2xvci5hcnJbMF07CiAgICAgIHNjYWxhclsxXSA9IGNvbG9yLmFyclsxXTsKICAgICAgc2NhbGFyWzJdID0gY29sb3IuYXJyWzJdOwogICAgICBzY2FsYXJbM10gPSBjb2xvci5hcnJbM107CiAgICB9CgogIGlmKGFyZ2MgPiBpICYmIEpTX0lzTnVtYmVyKGFyZ3ZbaV0pKQogICAganMuZ2V0X251bWJlcihhcmd2W2krK10sIHRoaWNrbmVzcyk7CgogIGlmKGFyZ2MgPiBpICYmIGpzLmlzX2Jvb2woYXJndltpXSkpCiAgICBqcy5nZXRfYm9vbGVhbihhcmd2W2krK10sIGFudGlhbGlhcyk7CgogIGN2OjpsaW5lKGRzdCwgcG9pbnRzWzBdLCBwb2ludHNbMV0sIHNjYWxhciwgdGhpY2tuZXNzLCBhbnRpYWxpYXMgPyBjdjo6TElORV9BQSA6IGN2OjpMSU5FXzgpOwogIHJldHVybiBKU19VTkRFRklORUQ7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX2RyYXdfcG9seWdvbihKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2KSB7CiAgSlNJbnB1dE91dHB1dEFycmF5IGRzdDsKICBpbnQgaSA9IDAsIHJldCA9IC0xOwogIHBvaW50X3ZlY3RvcjxpbnQ+IHBvaW50czsKICBjdjo6U2NhbGFyIGNvbG9yOwogIGJvb2wgYW50aWFsaWFzID0gdHJ1ZTsKICBpbnQgdGhpY2tuZXNzID0gLTE7CgogIGlmKGFyZ2MgPiBpKSB7CiAgICBpZighanNfaXNfbm9hcnJheSgoZHN0ID0ganNfdW1hdF9vcl9tYXQoY3R4LCBhcmd2W2ldKSkpKQogICAgICBpKys7CiAgfSBlbHNlCiAgICBkc3QgPSAqZHB0cjsKCiAgaWYoYXJnYyA+IGkgJiYganMuaXNfYXJyYXlfbGlrZShhcmd2W2ldKSkKICAgIGpzLmdldF9wb2ludF9hcnJheShhcmd2W2krK10sIHBvaW50cyk7CiAgaWYoYXJnYyA+IGkgJiYganMuaXNfY29sb3IoYXJndltpXSkpCiAgICBqcy5nZXRfY29sb3IoYXJndltpKytdLCBjb2xvcik7CgogIGlmKGFyZ2MgPiBpICYmIEpTX0lzTnVtYmVyKGFyZ3ZbaV0pKQogICAganMuZ2V0X251bWJlcihhcmd2W2krK10sIHRoaWNrbmVzcyk7CgogIGlmKGFyZ2MgPiBpICYmIGpzLmlzX2Jvb2woYXJndltpXSkpCiAgICBqcy5nZXRfYm9vbGVhbihhcmd2W2krK10sIGFudGlhbGlhcyk7CgogIGlmKGRwdHIgIT0gbnVsbHB0cikgewogICAgY29uc3QgaW50IHNpemUgPSBwb2ludHMuc2l6ZSgpOwogICAgaW50IGxpbmVUeXBlID0gYW50aWFsaWFzID8gY3Y6OkxJTkVfQUEgOiBjdjo6TElORV84OwogICAgY29uc3QgSlNQb2ludERhdGE8aW50PiogcHRzID0gcG9pbnRzLmRhdGEoKTsKCiAgICBzdGQ6OmNlcnIgPDwgImRyYXdQb2x5Z29uKCkgcG9pbnRzOiAiIDw8IChwb2ludHMpIDw8ICIgY29sb3I6ICIgPDwgdG9fc3RyaW5nKGNvbG9yKSA8PCBzdGQ6OmVuZGw7CgogICAgLy8gY3Y6OmZpbGxQb2x5KCpkcHRyLCBwb2ludHMsIGNvbG9yLCBhbnRpYWxpYXMgPyBjdjo6TElORV9BQSA6IGN2OjpMSU5FXzgpOwogICAgKHRoaWNrbmVzcyA8PSAwID8gY3Y6OmZpbGxQb2x5KGRzdCwgJnB0cywgJnNpemUsIDEsIGNvbG9yLCBsaW5lVHlwZSkKICAgICAgICAgICAgICAgICAgICA6IGN2Ojpwb2x5bGluZXMoZHN0LCAmcHRzLCAmc2l6ZSwgMSwgdHJ1ZSwgY29sb3IsIHRoaWNrbmVzcywgbGluZVR5cGUpKTsKCiAgICByZXR1cm4gSlNfVU5ERUZJTkVEOwogIH0KICByZXR1cm4gSlNfRVhDRVBUSU9OOwp9CgpzdGF0aWMgSlNWYWx1ZQpqc19kcmF3X3JlY3QoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCogYXJndikgewogIEpTSW5wdXRPdXRwdXRBcnJheSBkc3Q7CiAgaW50IGkgPSAwLCByZXQgPSAtMTsKICBKU1JlY3REYXRhPGRvdWJsZT4gcmVjdDsKICBKU1BvaW50RGF0YTxkb3VibGU+IHBvaW50c1syXTsKICBKU0NvbG9yRGF0YTx1aW50OF90PiBjb2xvcjsKICBjdjo6U2NhbGFyIHNjYWxhcjsKICBpbnQgdGhpY2tuZXNzID0gMTsKICBib29sIGFudGlhbGlhcyA9IHRydWU7CgogIGlmKGFyZ2MgPiBpKSB7CiAgICBpZighanNfaXNfbm9hcnJheSgoZHN0ID0ganNfdW1hdF9vcl9tYXQoY3R4LCBhcmd2W2ldKSkpKQogICAgICBpKys7CiAgfSBlbHNlCiAgICBkc3QgPSAqZHB0cjsKCiAgaWYoanNfaXNfbm9hcnJheShkc3QpKQogICAgcmV0dXJuIEpTX0VYQ0VQVElPTjsKCiAgaWYoYXJnYyA+IGkpIHsKICAgIGlmKGpzX3JlY3RfcmVhZChjdHgsIGFyZ3ZbaV0sICZyZWN0KSkKICAgICAgaSsrOwogICAgLy8gICAganMuZ2V0X3JlY3QoYXJndltpKytdLCByZWN0KTsKICB9CgogIGlmKGFyZ2MgPiBpKQogICAgaWYoanNfY29sb3JfcmVhZChjdHgsIGFyZ3ZbaV0sICZjb2xvcikpIHsKICAgICAgaSsrOwoKICAgICAgc2NhbGFyWzBdID0gY29sb3IuYXJyWzBdOwogICAgICBzY2FsYXJbMV0gPSBjb2xvci5hcnJbMV07CiAgICAgIHNjYWxhclsyXSA9IGNvbG9yLmFyclsyXTsKICAgICAgc2NhbGFyWzNdID0gY29sb3IuYXJyWzNdOwogICAgfQoKICBpZihhcmdjID4gaSAmJiBKU19Jc051bWJlcihhcmd2W2ldKSkKICAgIGpzLmdldF9udW1iZXIoYXJndltpKytdLCB0aGlja25lc3MpOwoKICBpZihhcmdjID4gaSAmJiBqcy5pc19ib29sKGFyZ3ZbaV0pKQogICAganMuZ2V0X2Jvb2xlYW4oYXJndltpKytdLCBhbnRpYWxpYXMpOwoKICBwb2ludHNbMF0ueCA9IHJlY3QueDsKICBwb2ludHNbMF0ueSA9IHJlY3QueTsKICBwb2ludHNbMV0ueCA9IHJlY3QueCArIHJlY3Qud2lkdGg7CiAgcG9pbnRzWzFdLnkgPSByZWN0LnkgKyByZWN0LmhlaWdodDsKCiAgLy8gY3Y6OnJlY3RhbmdsZShkc3QsIHBvaW50c1swXSwgcG9pbnRzWzFdLCBjb2xvciwgdGhpY2tuZXNzLCBhbnRpYWxpYXMgPyBjdjo6TElORV9BQSA6CiAgLy8gY3Y6OkxJTkVfOCk7CiAgY3Y6OnJlY3RhbmdsZShkc3QsIHJlY3QsIHNjYWxhciwgdGhpY2tuZXNzLCBhbnRpYWxpYXMgPyBjdjo6TElORV9BQSA6IGN2OjpMSU5FXzgpOwoKICByZXR1cm4gSlNfVU5ERUZJTkVEOwp9CgpzdGF0aWMgSlNWYWx1ZQpqc19wdXRfdGV4dChKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2KSB7CiAgY3Y6Ok1hdCogZHN0OwogIGludCBpID0gMCwgcmV0ID0gLTE7CiAgSlNDb2xvckRhdGE8ZG91YmxlPiBjb2xvcjsKICBKU1BvaW50RGF0YTxkb3VibGU+IHBvaW50OwogIHN0ZDo6c3RyaW5nIHRleHQsIGZvbnROYW1lOwogIGludDMyX3QgZm9udEZhY2UgPSBjdjo6Rk9OVF9IRVJTSEVZX1NJTVBMRVgsIHRoaWNrbmVzcyA9IDEsIGxpbmVUeXBlID0gY3Y6OkxJTkVfQUE7CiAgZG91YmxlIGZvbnRTY2FsZSA9IDE7CiAgYm9vbCBib3R0b21MZWZ0T3JpZ2luID0gZmFsc2U7CgogIGlmKGFyZ2MgPiBpICYmIChkc3QgPSBqc19tYXRfZGF0YShjdHgsIGFyZ3ZbaV0pKSkKICAgIGkrKzsKICBlbHNlCiAgICBkc3QgPSBkcHRyOwoKICBpZihkc3QgPT0gbnVsbHB0cikKICAgIHJldHVybiBKU19FWENFUFRJT047CgogIGpzX3ZhbHVlX3RvKGN0eCwgYXJndltpKytdLCB0ZXh0KTsKCiAgaWYoanNfcG9pbnRfcmVhZChjdHgsIGFyZ3ZbaV0sICZwb2ludCkpIHsKICAgIGkrKzsKICB9IGVsc2UgewogICAgaW50MzJfdCB4LCB5OwogICAgSlNfVG9JbnQzMihjdHgsICZ4LCBhcmd2W2ldKTsKICAgIEpTX1RvSW50MzIoY3R4LCAmeSwgYXJndltpICsgMV0pOwoKICAgIHBvaW50LnggPSB4OwogICAgcG9pbnQueSA9IHk7CiAgICBpICs9IDI7CiAgfQoKICBpZihhcmdjID4gaSkgewogICAgaWYoSlNfSXNOdW1iZXIoYXJndltpXSkpCiAgICAgIEpTX1RvSW50MzIoY3R4LCAmZm9udEZhY2UsIGFyZ3ZbaV0pOwogICAgZWxzZQogICAgICBqc192YWx1ZV90byhjdHgsIGFyZ3ZbaV0sIGZvbnROYW1lKTsKICAgIGkrKzsKICB9CgogIGlmKGFyZ2MgPiBpKQogICAgSlNfVG9GbG9hdDY0KGN0eCwgJmZvbnRTY2FsZSwgYXJndltpKytdKTsKCiAgaWYoYXJnYyA+IGkpIHsKICAgIGpzX2NvbG9yX3JlYWQoY3R4LCBhcmd2W2ldLCAmY29sb3IpOwogICAgaSsrOwogIH0KCiAgaWYoYXJnYyA+IGkpCiAgICBKU19Ub0ludDMyKGN0eCwgJnRoaWNrbmVzcywgYXJndltpKytdKTsKCiAgaWYoYXJnYyA+IGkpCiAgICBKU19Ub0ludDMyKGN0eCwgJmxpbmVUeXBlLCBhcmd2W2krK10pOwoKICBpZihhcmdjID4gaSkKICAgIGJvdHRvbUxlZnRPcmlnaW4gPSBKU19Ub0Jvb2woY3R4LCBhcmd2W2krK10pOwoKICBpZighZm9udE5hbWUuZW1wdHkoKSAmJiBmb250TmFtZSAhPSBmcmVldHlwZTJfZmFjZSkgewogICAgZnJlZXR5cGUyLT5sb2FkRm9udERhdGEoZm9udE5hbWUsIDApOwogICAgZnJlZXR5cGUyX2ZhY2UgPSBmb250TmFtZTsKICB9CgogIGlmKGZvbnROYW1lLmVtcHR5KCkpCiAgICBjdjo6cHV0VGV4dCgKICAgICAgICAqZHN0LCB0ZXh0LCBwb2ludCwgZm9udEZhY2UsIGZvbnRTY2FsZSwgKnJlaW50ZXJwcmV0X2Nhc3Q8Y3Y6OlNjYWxhcio+KCZjb2xvciksIHRoaWNrbmVzcywgbGluZVR5cGUsIGJvdHRvbUxlZnRPcmlnaW4pOwogIGVsc2UKICAgIGZyZWV0eXBlMi0+cHV0VGV4dCgKICAgICAgICAqZHN0LCB0ZXh0LCBwb2ludCwgZm9udFNjYWxlLCAqcmVpbnRlcnByZXRfY2FzdDxjdjo6U2NhbGFyKj4oJmNvbG9yKSwgdGhpY2tuZXNzLCBsaW5lVHlwZSwgYm90dG9tTGVmdE9yaWdpbik7CgogIHJldHVybiBKU19VTkRFRklORUQ7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX2dldF90ZXh0X3NpemUoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCogYXJndikgewogIGludCBpID0gMCwgYmFzZWxpbmUgPSAwOwogIEpTU2l6ZURhdGE8ZG91YmxlPiBzaXplOwogIGNvbnN0IGNoYXIqIHRleHQ7CiAgaW50MzJfdCBmb250RmFjZSA9IGN2OjpGT05UX0hFUlNIRVlfU0lNUExFWCwgdGhpY2tuZXNzID0gMTsKICBzdGQ6OnN0cmluZyBmb250TmFtZTsKICBkb3VibGUgZm9udFNjYWxlID0gMTsKICBKU1ZhbHVlIGJhc2VsaW5lVmFsOwogIHN0ZDo6YXJyYXk8aW50MzJfdCwgMj4gZGltOwoKICB0ZXh0ID0gSlNfVG9DU3RyaW5nKGN0eCwgYXJndltpKytdKTsKCiAgaWYoYXJnYyA+IGkpIHsKICAgIGlmKEpTX0lzTnVtYmVyKGFyZ3ZbaV0pKQogICAgICBKU19Ub0ludDMyKGN0eCwgJmZvbnRGYWNlLCBhcmd2W2ldKTsKICAgIGVsc2UKICAgICAganNfdmFsdWVfdG8oY3R4LCBhcmd2W2ldLCBmb250TmFtZSk7CiAgICBpKys7CiAgfQoKICBpZihhcmdjID4gaSkKICAgIEpTX1RvRmxvYXQ2NChjdHgsICZmb250U2NhbGUsIGFyZ3ZbaSsrXSk7CgogIGlmKGFyZ2MgPiBpKQogICAgSlNfVG9JbnQzMihjdHgsICZ0aGlja25lc3MsIGFyZ3ZbaSsrXSk7CgogIGlmKGZyZWV0eXBlMiA9PSBudWxscHRyKQogICAgZnJlZXR5cGUyID0gY3Y6OmZyZWV0eXBlOjpjcmVhdGVGcmVlVHlwZTIoKTsKCiAgaWYoIWZvbnROYW1lLmVtcHR5KCkgJiYgZm9udE5hbWUgIT0gZnJlZXR5cGUyX2ZhY2UpIHsKICAgIGZyZWV0eXBlMi0+bG9hZEZvbnREYXRhKGZvbnROYW1lLCAwKTsKICAgIGZyZWV0eXBlMl9mYWNlID0gZm9udE5hbWU7CiAgfQoKICBpZihmb250TmFtZS5lbXB0eSgpKQogICAgc2l6ZSA9IGN2OjpnZXRUZXh0U2l6ZSh0ZXh0LCBmb250RmFjZSwgZm9udFNjYWxlLCB0aGlja25lc3MsICZiYXNlbGluZSk7CiAgZWxzZQogICAgc2l6ZSA9IGZyZWV0eXBlMi0+Z2V0VGV4dFNpemUodGV4dCwgZm9udFNjYWxlLCB0aGlja25lc3MsICZiYXNlbGluZSk7CgogIGJhc2VsaW5lVmFsID0gSlNfTmV3SW50MzIoY3R4LCBiYXNlbGluZSk7CgogIGlmKEpTX0lzRnVuY3Rpb24oY3R4LCBhcmd2W2ldKSkgewogICAgSlNfQ2FsbChjdHgsIGFyZ3ZbaV0sIEpTX1VOREVGSU5FRCwgMSwgY29uc3RfY2FzdDxKU1ZhbHVlQ29uc3QqPigmYmFzZWxpbmVWYWwpKTsKICB9IGVsc2UgaWYoanNfaXNfYXJyYXkoY3R4LCBhcmd2W2ldKSkgewogICAgSlNfU2V0UHJvcGVydHlVaW50MzIoY3R4LCBhcmd2W2ldLCAwLCBiYXNlbGluZVZhbCk7CiAgfSBlbHNlIGlmKEpTX0lzT2JqZWN0KGFyZ3ZbaV0pKSB7CiAgICBKU19TZXRQcm9wZXJ0eVN0cihjdHgsIGFyZ3ZbaV0sICJ5IiwgYmFzZWxpbmVWYWwpOwogIH0KICBkaW1bMF0gPSBzaXplLndpZHRoOwogIGRpbVsxXSA9IHNpemUuaGVpZ2h0OwoKICByZXR1cm4ganNfYXJyYXk8aW50MzJfdD46OmZyb21fc2VxdWVuY2UoY3R4LCBkaW0uY2JlZ2luKCksIGRpbS5jZW5kKCkpOwp9CgpzdGF0aWMgSlNWYWx1ZQpqc19nZXRfZm9udF9zY2FsZV9mcm9tX2hlaWdodChKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2KSB7CiAgaW50MzJfdCBmb250RmFjZSwgcGl4ZWxIZWlnaHQsIHRoaWNrbmVzcyA9IDE7CiAgZG91YmxlIGZvbnRTY2FsZTsKCiAgSlNfVG9JbnQzMihjdHgsICZmb250RmFjZSwgYXJndlswXSk7CiAgSlNfVG9JbnQzMihjdHgsICZwaXhlbEhlaWdodCwgYXJndlsxXSk7CiAgaWYoYXJnYyA+IDIpCiAgICBKU19Ub0ludDMyKGN0eCwgJnRoaWNrbmVzcywgYXJndlsyXSk7CgogIGZvbnRTY2FsZSA9IGN2OjpnZXRGb250U2NhbGVGcm9tSGVpZ2h0KGZvbnRGYWNlLCBwaXhlbEhlaWdodCwgdGhpY2tuZXNzKTsKCiAgcmV0dXJuIEpTX05ld0Zsb2F0NjQoY3R4LCBmb250U2NhbGUpOwp9CgpzdGF0aWMgSlNWYWx1ZQpqc19sb2FkX2ZvbnQoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCogYXJndikgewogIGludDMyX3QgaWQgPSAwOwogIHN0ZDo6c3RyaW5nIGZvbnROYW1lOwoKICBpZihmcmVldHlwZTIgPT0gbnVsbHB0cikKICAgIGZyZWV0eXBlMiA9IGN2OjpmcmVldHlwZTo6Y3JlYXRlRnJlZVR5cGUyKCk7CgogIGpzX3ZhbHVlX3RvKGN0eCwgYXJndlswXSwgZm9udE5hbWUpOwogIGlmKGFyZ2MgPiAxKQogICAganNfdmFsdWVfdG8oY3R4LCBhcmd2WzFdLCBpZCk7CiAgZnJlZXR5cGUyLT5sb2FkRm9udERhdGEoZm9udE5hbWUsIGlkKTsKICByZXR1cm4gSlNfVU5ERUZJTkVEOwp9CgpKU1ZhbHVlIGRyYXdfcHJvdG8gPSBKU19VTkRFRklORUQsIGRyYXdfY2xhc3MgPSBKU19VTkRFRklORUQ7CkpTQ2xhc3NJRCBqc19kcmF3X2NsYXNzX2lkID0gMDsKCkpTQ2xhc3NEZWYganNfZHJhd19jbGFzcyA9IHsKICAgIC5jbGFzc19uYW1lID0gIkRyYXciLAogICAgLmZpbmFsaXplciA9IDAsCn07Cgpjb25zdCBKU0NGdW5jdGlvbkxpc3RFbnRyeSBqc19kcmF3X3Byb3RvX2Z1bmNzW10gPSB7CiAgICBKU19QUk9QX1NUUklOR19ERUYoIltTeW1ib2wudG9TdHJpbmdUYWddIiwgIkRyYXciLCBKU19QUk9QX0NPTkZJR1VSQUJMRSksCn07Cgpjb25zdCBKU0NGdW5jdGlvbkxpc3RFbnRyeSBqc19kcmF3X3N0YXRpY19mdW5jc1tdID0gewogICAgSlNfQ0ZVTkNfREVGKCJjaXJjbGUiLCAxLCAmanNfZHJhd19jaXJjbGUpLAogICAgSlNfQ0ZVTkNfREVGKCJjb250b3VyIiwgMSwgJmpzX2RyYXdfY29udG91ciksCiAgICBKU19DRlVOQ19ERUYoImNvbnRvdXJzIiwgNCwgJmpzX2RyYXdfY29udG91cnMpLAogICAgSlNfQ0ZVTkNfREVGKCJsaW5lIiwgMSwgJmpzX2RyYXdfbGluZSksCiAgICBKU19DRlVOQ19ERUYoInBvbHlnb24iLCAxLCAmanNfZHJhd19wb2x5Z29uKSwKICAgIEpTX0NGVU5DX0RFRigicmVjdCIsIDEsICZqc19kcmF3X3JlY3QpLAogICAgSlNfQ0ZVTkNfREVGKCJ0ZXh0IiwgMiwgJmpzX3B1dF90ZXh0KSwKICAgIEpTX0NGVU5DX0RFRigidGV4dFNpemUiLCA1LCAmanNfZ2V0X3RleHRfc2l6ZSksCiAgICBKU19DRlVOQ19ERUYoImZvbnRTY2FsZUZyb21IZWlnaHQiLCAyLCAmanNfZ2V0X2ZvbnRfc2NhbGVfZnJvbV9oZWlnaHQpLAogICAgSlNfQ0ZVTkNfREVGKCJsb2FkRm9udCIsIDEsICZqc19sb2FkX2ZvbnQpLAp9OwoKY29uc3QgSlNDRnVuY3Rpb25MaXN0RW50cnkganNfZHJhd19nbG9iYWxfZnVuY3NbXSA9IHsKICAgIEpTX0NGVU5DX0RFRigiZHJhd0NpcmNsZSIsIDEsICZqc19kcmF3X2NpcmNsZSksCiAgICBKU19DRlVOQ19ERUYoImRyYXdDb250b3VyIiwgMSwgJmpzX2RyYXdfY29udG91ciksCiAgICBKU19DRlVOQ19ERUYoImRyYXdMaW5lIiwgMSwgJmpzX2RyYXdfbGluZSksCiAgICBKU19DRlVOQ19ERUYoImRyYXdQb2x5Z29uIiwgMSwgJmpzX2RyYXdfcG9seWdvbiksCiAgICBKU19DRlVOQ19ERUYoImRyYXdSZWN0IiwgMSwgJmpzX2RyYXdfcmVjdCksCiAgICBKU19DRlVOQ19ERUYoInB1dFRleHQiLCAyLCAmanNfcHV0X3RleHQpLAogICAgSlNfQ0ZVTkNfREVGKCJnZXRUZXh0U2l6ZSIsIDUsICZqc19nZXRfdGV4dF9zaXplKSwKICAgIEpTX0NGVU5DX0RFRigiZ2V0Rm9udFNjYWxlRnJvbUhlaWdodCIsIDIsICZqc19nZXRfZm9udF9zY2FsZV9mcm9tX2hlaWdodCksCiAgICBKU19DRlVOQ19ERUYoImxvYWRGb250IiwgMSwgJmpzX2xvYWRfZm9udCksCn07CgpzdGF0aWMgSlNWYWx1ZQpqc19kcmF3X2N0b3IoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCBuZXdfdGFyZ2V0LCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2KSB7CiAgSlNWYWx1ZSBvYmogPSBKU19VTkRFRklORUQ7CiAgSlNWYWx1ZSBwcm90bzsKCiAgLyogdXNpbmcgbmV3X3RhcmdldCB0byBnZXQgdGhlIHByb3RvdHlwZSBpcyBuZWNlc3Nhcnkgd2hlbiB0aGUKICAgICBjbGFzcyBpcyBleHRlbmRlZC4gKi8KICBwcm90byA9IEpTX0dldFByb3BlcnR5U3RyKGN0eCwgbmV3X3RhcmdldCwgInByb3RvdHlwZSIpOwogIGlmKEpTX0lzRXhjZXB0aW9uKHByb3RvKSkKICAgIGdvdG8gZmFpbDsKICBvYmogPSBKU19OZXdPYmplY3RQcm90b0NsYXNzKGN0eCwgcHJvdG8sIGpzX2RyYXdfY2xhc3NfaWQpOwogIEpTX0ZyZWVWYWx1ZShjdHgsIHByb3RvKTsKICBpZihKU19Jc0V4Y2VwdGlvbihvYmopKQogICAgZ290byBmYWlsOwogIHJldHVybiBvYmo7CmZhaWw6CiAgSlNfRnJlZVZhbHVlKGN0eCwgb2JqKTsKICByZXR1cm4gSlNfRVhDRVBUSU9OOwp9CgppbnQKanNfZHJhd19pbml0KEpTQ29udGV4dCogY3R4LCBKU01vZHVsZURlZiogbSkgewoKICBpZihqc19kcmF3X2NsYXNzX2lkID09IDApIHsKICAgIC8qIGNyZWF0ZSB0aGUgRHJhdyBjbGFzcyAqLwogICAgSlNfTmV3Q2xhc3NJRCgmanNfZHJhd19jbGFzc19pZCk7CiAgICBKU19OZXdDbGFzcyhKU19HZXRSdW50aW1lKGN0eCksIGpzX2RyYXdfY2xhc3NfaWQsICZqc19kcmF3X2NsYXNzKTsKCiAgICBkcmF3X3Byb3RvID0gSlNfTmV3T2JqZWN0KGN0eCk7CiAgICBKU19TZXRQcm9wZXJ0eUZ1bmN0aW9uTGlzdChjdHgsIGRyYXdfcHJvdG8sIGpzX2RyYXdfcHJvdG9fZnVuY3MsIGNvdW50b2YoanNfZHJhd19wcm90b19mdW5jcykpOwogICAgSlNfU2V0Q2xhc3NQcm90byhjdHgsIGpzX2RyYXdfY2xhc3NfaWQsIGRyYXdfcHJvdG8pOwoKICAgIGRyYXdfY2xhc3MgPSBKU19OZXdDRnVuY3Rpb24yKGN0eCwganNfZHJhd19jdG9yLCAiRHJhdyIsIDIsIEpTX0NGVU5DX2NvbnN0cnVjdG9yLCAwKTsKCiAgICAvKiBzZXQgcHJvdG8uY29uc3RydWN0b3IgYW5kIGN0b3IucHJvdG90eXBlICovCiAgICBKU19TZXRDb25zdHJ1Y3RvcihjdHgsIGRyYXdfY2xhc3MsIGRyYXdfcHJvdG8pOwogICAgSlNfU2V0UHJvcGVydHlGdW5jdGlvbkxpc3QoY3R4LCBkcmF3X2NsYXNzLCBqc19kcmF3X3N0YXRpY19mdW5jcywgY291bnRvZihqc19kcmF3X3N0YXRpY19mdW5jcykpOwogIH0KCiAgaWYobSkgewogICAgSlNfU2V0TW9kdWxlRXhwb3J0TGlzdChjdHgsIG0sIGpzX2RyYXdfc3RhdGljX2Z1bmNzLCBjb3VudG9mKGpzX2RyYXdfc3RhdGljX2Z1bmNzKSk7CiAgICBKU19TZXRNb2R1bGVFeHBvcnQoY3R4LCBtLCAiRHJhdyIsIGRyYXdfY2xhc3MpOwogIH0KICAvKiAgZWxzZQogICAgICBKU19TZXRQcm9wZXJ0eVN0cihjdHgsICpzdGF0aWNfY2FzdDxKU1ZhbHVlKj4obSksICJEcmF3IiwgZHJhd19jbGFzcyk7Ki8KICByZXR1cm4gMDsKfQoKZXh0ZXJuICJDIiBWSVNJQkxFIHZvaWQKanNfZHJhd19leHBvcnQoSlNDb250ZXh0KiBjdHgsIEpTTW9kdWxlRGVmKiBtKSB7CiAgSlNfQWRkTW9kdWxlRXhwb3J0KGN0eCwgbSwgIkRyYXciKTsKICBKU19BZGRNb2R1bGVFeHBvcnRMaXN0KGN0eCwgbSwganNfZHJhd19zdGF0aWNfZnVuY3MsIGNvdW50b2YoanNfZHJhd19zdGF0aWNfZnVuY3MpKTsKfQoKI2lmIGRlZmluZWQoSlNfRFJBV19NT0RVTEUpCiNkZWZpbmUgSlNfSU5JVF9NT0RVTEUgLypWSVNJQkxFKi8ganNfaW5pdF9tb2R1bGUKI2Vsc2UKI2RlZmluZSBKU19JTklUX01PRFVMRSAvKlZJU0lCTEUqLyBqc19pbml0X21vZHVsZV9kcmF3CiNlbmRpZgoKSlNNb2R1bGVEZWYqCkpTX0lOSVRfTU9EVUxFKEpTQ29udGV4dCogY3R4LCBjb25zdCBjaGFyKiBtb2R1bGVfbmFtZSkgewogIEpTTW9kdWxlRGVmKiBtOwogIG0gPSBKU19OZXdDTW9kdWxlKGN0eCwgbW9kdWxlX25hbWUsICZqc19kcmF3X2luaXQpOwogIGlmKCFtKQogICAgcmV0dXJuIE5VTEw7CiAganNfZHJhd19leHBvcnQoY3R4LCBtKTsKICByZXR1cm4gbTsKfQp2b2lkCmpzX2RyYXdfY29uc3RydWN0b3IoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWUgcGFyZW50LCBjb25zdCBjaGFyKiBuYW1lKSB7CiAgaWYoSlNfSXNVbmRlZmluZWQoZHJhd19jbGFzcykpCiAgICBqc19kcmF3X2luaXQoY3R4LCAwKTsKCiAgSlNfU2V0UHJvcGVydHlTdHIoY3R4LCBwYXJlbnQsIG5hbWUgPyBuYW1lIDogIkRyYXciLCBkcmF3X2NsYXNzKTsKfQp9CgAAAAAAAAAADT8AAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAALD4AAAAAAAAsPgAAAAAAAAAAAAAAAPC/"
				],
				[
					56,
					1,
					"insert",
					{
						"characters": "\nJS_"
					},
					"BwAAAI8EAAAAAAAAkAQAAAAAAAAAAAAAkAQAAAAAAACSBAAAAAAAAAAAAACQBAAAAAAAAJAEAAAAAAAAAgAAACAgkAQAAAAAAACUBAAAAAAAAAAAAACUBAAAAAAAAJUEAAAAAAAAAAAAAJUEAAAAAAAAlgQAAAAAAAAAAAAAlgQAAAAAAACXBAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAjwQAAAAAAACPBAAAAAAAAAAAAAAAAPC/"
				],
				[
					57,
					3,
					"left_delete",
					null,
					"AwAAAJYEAAAAAAAAlgQAAAAAAAABAAAAX5UEAAAAAAAAlQQAAAAAAAABAAAAU5QEAAAAAAAAlAQAAAAAAAABAAAASg",
					"AQAAAAAAAAABAAAAlwQAAAAAAACXBAAAAAAAAAAAAAAAAPC/"
				],
				[
					58,
					1,
					"insert",
					{
						"characters": "js_value_to"
					},
					"CwAAAJQEAAAAAAAAlQQAAAAAAAAAAAAAlQQAAAAAAACWBAAAAAAAAAAAAACWBAAAAAAAAJcEAAAAAAAAAAAAAJcEAAAAAAAAmAQAAAAAAAAAAAAAmAQAAAAAAACZBAAAAAAAAAAAAACZBAAAAAAAAJoEAAAAAAAAAAAAAJoEAAAAAAAAmwQAAAAAAAAAAAAAmwQAAAAAAACcBAAAAAAAAAAAAACcBAAAAAAAAJ0EAAAAAAAAAAAAAJ0EAAAAAAAAngQAAAAAAAAAAAAAngQAAAAAAACfBAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAlAQAAAAAAACUBAAAAAAAAAAAAAAAAPC/"
				],
				[
					59,
					1,
					"insert_snippet",
					{
						"contents": "($0)"
					},
					"AQAAAJ8EAAAAAAAAoQQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAnwQAAAAAAACfBAAAAAAAAAAAAAAAAPC/"
				],
				[
					60,
					1,
					"insert",
					{
						"characters": "ctx,"
					},
					"BAAAAKAEAAAAAAAAoQQAAAAAAAAAAAAAoQQAAAAAAACiBAAAAAAAAAAAAACiBAAAAAAAAKMEAAAAAAAAAAAAAKMEAAAAAAAApAQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAoAQAAAAAAACgBAAAAAAAAAAAAAAAAPC/"
				],
				[
					61,
					1,
					"insert",
					{
						"characters": " argv"
					},
					"BQAAAKQEAAAAAAAApQQAAAAAAAAAAAAApQQAAAAAAACmBAAAAAAAAAAAAACmBAAAAAAAAKcEAAAAAAAAAAAAAKcEAAAAAAAAqAQAAAAAAAAAAAAAqAQAAAAAAACpBAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAApAQAAAAAAACkBAAAAAAAAAAAAAAAAPC/"
				],
				[
					62,
					1,
					"insert_snippet",
					{
						"contents": "[$0]"
					},
					"AQAAAKkEAAAAAAAAqwQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAqQQAAAAAAACpBAAAAAAAAAAAAAAAAPC/"
				],
				[
					63,
					1,
					"insert",
					{
						"characters": "i++"
					},
					"AwAAAKoEAAAAAAAAqwQAAAAAAAAAAAAAqwQAAAAAAACsBAAAAAAAAAAAAACsBAAAAAAAAK0EAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAqgQAAAAAAACqBAAAAAAAAAAAAAAAAPC/"
				],
				[
					65,
					1,
					"insert",
					{
						"characters": ","
					},
					"AQAAAK4EAAAAAAAArwQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAArgQAAAAAAACuBAAAAAAAAAAAAAAAAPC/"
				],
				[
					66,
					1,
					"insert",
					{
						"characters": " radius"
					},
					"BwAAAK8EAAAAAAAAsAQAAAAAAAAAAAAAsAQAAAAAAACxBAAAAAAAAAAAAACxBAAAAAAAALIEAAAAAAAAAAAAALIEAAAAAAAAswQAAAAAAAAAAAAAswQAAAAAAAC0BAAAAAAAAAAAAAC0BAAAAAAAALUEAAAAAAAAAAAAALUEAAAAAAAAtgQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAArwQAAAAAAACvBAAAAAAAAAAAAAAAAPC/"
				],
				[
					68,
					1,
					"insert",
					{
						"characters": ";"
					},
					"AQAAALcEAAAAAAAAuAQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAtwQAAAAAAAC3BAAAAAAAAAAAAAAAAPC/"
				],
				[
					71,
					1,
					"left_delete",
					null,
					"AQAAALkEAAAAAAAAuQQAAAAAAAAmAAAAICAgIGpzLmdldF9udW1iZXIoYXJndltpKytdLCByYWRpdXMpOwo",
					"AQAAAAAAAAABAAAAuQQAAAAAAADfBAAAAAAAAAAAAAAAAAAA"
				],
				[
					77,
					1,
					"paste",
					null,
					"AgAAAC0FAAAAAAAAQgUAAAAAAAAAAAAAQgUAAAAAAABCBQAAAAAAAA0AAABqcy5nZXRfbnVtYmVy",
					"AQAAAAAAAAABAAAALQUAAAAAAAA6BQAAAAAAAAAAAAAAAPC/"
				],
				[
					78,
					1,
					"right_delete",
					null,
					"AQAAAEIFAAAAAAAAQgUAAAAAAAABAAAAKA",
					"AQAAAAAAAAABAAAAQgUAAAAAAABCBQAAAAAAAAAAAAAAAPC/"
				],
				[
					80,
					1,
					"insert",
					{
						"characters": "\n\n"
					},
					"BwAAAFgFAAAAAAAAWQUAAAAAAAAAAAAAWQUAAAAAAABhBQAAAAAAAAAAAABZBQAAAAAAAFkFAAAAAAAACAAAACAgICAgICAgWQUAAAAAAABfBQAAAAAAAAAAAABfBQAAAAAAAGAFAAAAAAAAAAAAAGAFAAAAAAAAZgUAAAAAAAAAAAAAWQUAAAAAAABZBQAAAAAAAAYAAAAgICAgICA",
					"AQAAAAAAAAABAAAAWAUAAAAAAABYBQAAAAAAAP///////+9/"
				],
				[
					83,
					1,
					"paste",
					null,
					"AgAAACcGAAAAAAAAPAYAAAAAAAAAAAAAPAYAAAAAAAA8BgAAAAAAAA4AAABqcy5nZXRfbnVtYmVyKA",
					"AQAAAAAAAAABAAAAJwYAAAAAAAA1BgAAAAAAAAAAAAAAAPC/"
				],
				[
					89,
					1,
					"paste",
					null,
					"AgAAAJsFAAAAAAAAsAUAAAAAAAAAAAAAsAUAAAAAAACwBQAAAAAAABEAAAAgIGpzLmdldF9ib29sZWFuKA",
					"AQAAAAAAAAABAAAArAUAAAAAAACbBQAAAAAAAAAAAAAAAPC/"
				],
				[
					111,
					1,
					"",
					null,
					"AQAAADMKAAAAAAAARAoAAAAAAAAOAAAAanMuZ2V0X251bWJlcig",
					"AQAAAAAAAAABAAAAMwoAAAAAAABBCgAAAAAAAAAAAAAAAPC/"
				],
				[
					112,
					1,
					"",
					null,
					"AQAAAOwVAAAAAAAA/RUAAAAAAAAOAAAAanMuZ2V0X251bWJlcig",
					"AQAAAAAAAAABAAAA7BUAAAAAAAD6FQAAAAAAAAAAAAAAAPC/"
				],
				[
					113,
					1,
					"",
					null,
					"AQAAABkZAAAAAAAAKhkAAAAAAAAOAAAAanMuZ2V0X251bWJlcig",
					"AQAAAAAAAAABAAAAGRkAAAAAAAAnGQAAAAAAAAAAAAAAAPC/"
				],
				[
					114,
					1,
					"",
					null,
					"AQAAABcfAAAAAAAAKB8AAAAAAAAOAAAAanMuZ2V0X251bWJlcig",
					"AQAAAAAAAAABAAAAFx8AAAAAAAAlHwAAAAAAAAAAAAAAAPC/"
				],
				[
					127,
					1,
					"",
					null,
					"AQAAAD8WAAAAAAAAUBYAAAAAAAAPAAAAanMuZ2V0X2Jvb2xlYW4o",
					"AQAAAAAAAAABAAAAPxYAAAAAAABOFgAAAAAAAAAAAAAAAPC/"
				],
				[
					128,
					1,
					"",
					null,
					"AQAAAG4ZAAAAAAAAfxkAAAAAAAAPAAAAanMuZ2V0X2Jvb2xlYW4o",
					"AQAAAAAAAAABAAAAbhkAAAAAAAB9GQAAAAAAAAAAAAAAAPC/"
				],
				[
					129,
					1,
					"",
					null,
					"AQAAAG4fAAAAAAAAfx8AAAAAAAAPAAAAanMuZ2V0X2Jvb2xlYW4o",
					"AQAAAAAAAAABAAAAbh8AAAAAAAB9HwAAAAAAAAAAAAAAAPC/"
				],
				[
					164,
					1,
					"cut",
					null,
					"AQAAAI4AAAAAAAAAjgAAAAAAAAAVAAAAI2luY2x1ZGUgImpzX2N2LmhwcCIK",
					"AQAAAAAAAAABAAAAjgAAAAAAAACjAAAAAAAAAAAAAAAAAPC/"
				],
				[
					165,
					2,
					"paste",
					null,
					"AgAAAI4AAAAAAAAAowAAAAAAAAAAAAAAowAAAAAAAAC4AAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAjgAAAAAAAACOAAAAAAAAAAAAAAAAAPC/"
				],
				[
					172,
					1,
					"insert",
					{
						"characters": "js"
					},
					"BAAAAK0AAAAAAAAArgAAAAAAAAAAAAAArgAAAAAAAACuAAAAAAAAAAUAAABqc19jdmsFAAAAAAAAawUAAAAAAAAGAAAAICAgICAgrgAAAAAAAACvAAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAArQAAAAAAAACyAAAAAAAAAAAAAAAAAPC/"
				],
				[
					181,
					1,
					"cut",
					null,
					"AQAAAKMAAAAAAAAAowAAAAAAAAASAAAAI2luY2x1ZGUgImpzLmhwcCIK",
					"AQAAAAAAAAABAAAAowAAAAAAAAC1AAAAAAAAAAAAAAAAAPC/"
				],
				[
					184,
					1,
					"paste",
					null,
					"AQAAAAAAAAAAAAAAEgAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
				],
				[
					191,
					1,
					"insert",
					{
						"characters": "JS"
					},
					"AwAAADIWAAAAAAAAMxYAAAAAAAAAAAAAMxYAAAAAAAAzFgAAAAAAAAoAAABqcy5pc19ib29sMxYAAAAAAAA0FgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAMhYAAAAAAAA8FgAAAAAAAAAAAAAAAPC/"
				],
				[
					192,
					1,
					"left_delete",
					null,
					"AQAAADMWAAAAAAAAMxYAAAAAAAABAAAAUw",
					"AQAAAAAAAAABAAAANBYAAAAAAAA0FgAAAAAAAAAAAAAAAPC/"
				],
				[
					193,
					1,
					"insert",
					{
						"characters": "S_IsBool"
					},
					"CAAAADMWAAAAAAAANBYAAAAAAAAAAAAANBYAAAAAAAA1FgAAAAAAAAAAAAA1FgAAAAAAADYWAAAAAAAAAAAAADYWAAAAAAAANxYAAAAAAAAAAAAANxYAAAAAAAA4FgAAAAAAAAAAAAA4FgAAAAAAADkWAAAAAAAAAAAAADkWAAAAAAAAOhYAAAAAAAAAAAAAOhYAAAAAAAA7FgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAMxYAAAAAAAAzFgAAAAAAAAAAAAAAAPC/"
				],
				[
					199,
					1,
					"",
					null,
					"AwAAAGAfAAAAAAAAaR8AAAAAAAAKAAAAanMuaXNfYm9vbGAZAAAAAAAAaRkAAAAAAAAKAAAAanMuaXNfYm9vbIwFAAAAAAAAlQUAAAAAAAAKAAAAanMuaXNfYm9vbA",
					"AQAAAAAAAAABAAAAYBkAAAAAAABqGQAAAAAAAAAAAAAAAPC/"
				],
				[
					211,
					1,
					"",
					null,
					"AQAAAGgYAAAAAAAAfhgAAAAAAAARAAAAanMuaXNfYXJyYXlfbGlrZSg",
					"AQAAAAAAAAABAAAAaBgAAAAAAAB5GAAAAAAAAAAAAAAAAPC/"
				],
				[
					224,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"BAAAALIYAAAAAAAAsxgAAAAAAAAAAAAAsxgAAAAAAAC3GAAAAAAAAAAAAACzGAAAAAAAALMYAAAAAAAABAAAACAgICCzGAAAAAAAALUYAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAshgAAAAAAACyGAAAAAAAAAAAAAAAAPC/"
				],
				[
					232,
					1,
					"insert",
					{
						"characters": "js_array_to"
					},
					"DQAAAIwYAAAAAAAAjRgAAAAAAAAAAAAAjRgAAAAAAACNGAAAAAAAABIAAABqcy5nZXRfcG9pbnRfYXJyYXmiGAAAAAAAAKIYAAAAAAAAAgAAACAgjRgAAAAAAACOGAAAAAAAAAAAAACOGAAAAAAAAI8YAAAAAAAAAAAAAI8YAAAAAAAAkBgAAAAAAAAAAAAAkBgAAAAAAACRGAAAAAAAAAAAAACRGAAAAAAAAJIYAAAAAAAAAAAAAJIYAAAAAAAAkxgAAAAAAAAAAAAAkxgAAAAAAACUGAAAAAAAAAAAAACUGAAAAAAAAJUYAAAAAAAAAAAAAJUYAAAAAAAAlhgAAAAAAAAAAAAAlhgAAAAAAACXGAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAjBgAAAAAAACeGAAAAAAAAAAAAAAAAPC/"
				],
				[
					234,
					1,
					"insert",
					{
						"characters": "ctx,"
					},
					"BAAAAJgYAAAAAAAAmRgAAAAAAAAAAAAAmRgAAAAAAACaGAAAAAAAAAAAAACaGAAAAAAAAJsYAAAAAAAAAAAAAJsYAAAAAAAAnBgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAmBgAAAAAAACYGAAAAAAAAAAAAAAAAPC/"
				],
				[
					235,
					1,
					"insert",
					{
						"characters": " "
					},
					"AQAAAJwYAAAAAAAAnRgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAnBgAAAAAAACcGAAAAAAAAAAAAAAAAPC/"
				],
				[
					238,
					1,
					"insert",
					{
						"characters": "js_color_read"
					},
					"DgAAAN0YAAAAAAAA3hgAAAAAAAAAAAAA3hgAAAAAAADeGAAAAAAAAAwAAABqcy5nZXRfY29sb3LeGAAAAAAAAN8YAAAAAAAAAAAAAN8YAAAAAAAA4BgAAAAAAAAAAAAA4BgAAAAAAADhGAAAAAAAAAAAAADhGAAAAAAAAOIYAAAAAAAAAAAAAOIYAAAAAAAA4xgAAAAAAAAAAAAA4xgAAAAAAADkGAAAAAAAAAAAAADkGAAAAAAAAOUYAAAAAAAAAAAAAOUYAAAAAAAA5hgAAAAAAAAAAAAA5hgAAAAAAADnGAAAAAAAAAAAAADnGAAAAAAAAOgYAAAAAAAAAAAAAOgYAAAAAAAA6RgAAAAAAAAAAAAA6RgAAAAAAADqGAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA3RgAAAAAAADpGAAAAAAAAAAAAAAAAPC/"
				],
				[
					240,
					1,
					"insert",
					{
						"characters": "ctx,"
					},
					"BAAAAOsYAAAAAAAA7BgAAAAAAAAAAAAA7BgAAAAAAADtGAAAAAAAAAAAAADtGAAAAAAAAO4YAAAAAAAAAAAAAO4YAAAAAAAA7xgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA6xgAAAAAAADrGAAAAAAAAAAAAAAAAPC/"
				],
				[
					241,
					1,
					"insert",
					{
						"characters": " "
					},
					"AQAAAO8YAAAAAAAA8BgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA7xgAAAAAAADvGAAAAAAAAAAAAAAAAPC/"
				],
				[
					248,
					1,
					"insert",
					{
						"characters": "&"
					},
					"AQAAAPsYAAAAAAAA/BgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA+xgAAAAAAAD7GAAAAAAAAAAAAAAAAPC/"
				],
				[
					256,
					1,
					"toggle_comment",
					{
						"block": true
					},
					"AgAAANcYAAAAAAAA2RgAAAAAAAAAAAAAvxgAAAAAAADBGAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAvxgAAAAAAADXGAAAAAAAAAAAAAAAAPC/"
				],
				[
					268,
					1,
					"insert",
					{
						"characters": " "
					},
					"AgAAAL8YAAAAAAAAwBgAAAAAAAAAAAAAwBgAAAAAAADAGAAAAAAAABwAAAAvKiAmJiBqcy5pc19jb2xvcihhcmd2W2ldKSov",
					"AQAAAAAAAAABAAAAvxgAAAAAAADbGAAAAAAAAAAAAAAAAPC/"
				],
				[
					279,
					1,
					"left_delete",
					null,
					"AQAAAPAdAAAAAAAA8B0AAAAAAAAoAAAAICAgIC8vICAgIGpzLmdldF9yZWN0KGFyZ3ZbaSsrXSwgcmVjdCk7Cg",
					"AQAAAAAAAAABAAAA8B0AAAAAAAAYHgAAAAAAAAAAAAAAAPC/"
				],
				[
					290,
					1,
					"left_delete",
					null,
					"AQAAAAAAAAAAAAAAAAAAAAAAAAASAAAAI2luY2x1ZGUgImpzLmhwcCIK",
					"AQAAAAAAAAABAAAAAAAAAAAAAAASAAAAAAAAAAAAAAAAAPC/"
				],
				[
					291,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAAD+PgAAI2luY2x1ZGUgImpzYmluZGluZ3MuaHBwIgojaW5jbHVkZSAianNfcG9pbnQuaHBwIgojaW5jbHVkZSAianNfbWF0LmhwcCIKI2luY2x1ZGUgImpzX3VtYXQuaHBwIgojaW5jbHVkZSAianNfYXJyYXkuaHBwIgojaW5jbHVkZSAianNfcmVjdC5ocHAiCiNpbmNsdWRlICJqc19jdi5ocHAiCgojaW5jbHVkZSA8b3BlbmN2Mi9jb3JlL2NvcmUuaHBwPgojaW5jbHVkZSA8b3BlbmN2Mi9mcmVldHlwZS5ocHA+CiNpbmNsdWRlIDxpb3N0cmVhbT4KI2luY2x1ZGUgImdlb21ldHJ5LmhwcCIKCmV4dGVybiAiQyIgVklTSUJMRSBpbnQganNfZHJhd19pbml0KEpTQ29udGV4dCosIEpTTW9kdWxlRGVmKik7Cgpjdjo6UHRyPGN2OjpmcmVldHlwZTo6RnJlZVR5cGUyPiBmcmVldHlwZTIgPSBudWxscHRyOwpzdGQ6OnN0cmluZyBmcmVldHlwZTJfZmFjZTsKCmV4dGVybiAiQyIgewoKY3Y6Ok1hdCogZHB0ciA9IDA7CgpzdGF0aWMgSlNWYWx1ZQpqc19kcmF3X2NpcmNsZShKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2KSB7CiAgSlNJbnB1dE91dHB1dEFycmF5IGRzdDsKICBpbnQgaSA9IDAsIHJldCA9IC0xOwogIEpTUG9pbnREYXRhPGRvdWJsZT4gcG9pbnQ7CiAgaW50MzJfdCB4LCB5OwogIGludCByYWRpdXMgPSAwOwogIEpTQ29sb3JEYXRhPGRvdWJsZT4gY29sb3I7CiAgYm9vbCBhbnRpYWxpYXMgPSB0cnVlOwogIGludCB0aGlja25lc3MgPSAtMTsKICBpbnQgbGluZVR5cGUgPSBjdjo6TElORV9BQTsKCiAgaWYoYXJnYyA+IGkpIHsKICAgIGlmKCFqc19pc19ub2FycmF5KChkc3QgPSBqc191bWF0X29yX21hdChjdHgsIGFyZ3ZbaV0pKSkpCiAgICAgIGkrKzsKICB9IGVsc2UKICAgIGRzdCA9ICpkcHRyOwoKICBpZihqc19pc19ub2FycmF5KGRzdCkpCiAgICByZXR1cm4gSlNfRVhDRVBUSU9OOwoKICBpZihqc19wb2ludF9yZWFkKGN0eCwgYXJndltpXSwgJnBvaW50KSkgewogICAgeCA9IHBvaW50Lng7CiAgICB5ID0gcG9pbnQueTsKICAgIGkrKzsKICB9IGVsc2UgewogICAgSlNfVG9JbnQzMihjdHgsICZ4LCBhcmd2W2ldKTsKICAgIEpTX1RvSW50MzIoY3R4LCAmeSwgYXJndltpICsgMV0pOwogICAgaSArPSAyOwogIH0KCiAgaWYoYXJnYyA+IGkgJiYgSlNfSXNOdW1iZXIoYXJndltpXSkpCiAgICBqc192YWx1ZV90byhjdHgsIGFyZ3ZbaSsrXSwgcmFkaXVzKTsKCiAgaWYoYXJnYyA+IGkpIHsKICAgIGpzX2NvbG9yX3JlYWQoY3R4LCBhcmd2W2ldLCAmY29sb3IpOwogICAgaSsrOwogIH0KCiAgaWYoYXJnYyA+IGkgJiYgSlNfSXNOdW1iZXIoYXJndltpXSkpCiAgICAgICAganNfdmFsdWVfdG8oY3R4LCBhcmd2W2krK10sIHRoaWNrbmVzcyk7CgoKICAvKiovCiAgaWYoYXJnYyA+IGkpIHsKICAgIGlmKEpTX0lzQm9vbChhcmd2W2ldKSkgewogICAgICAgIGpzX3ZhbHVlX3RvKGN0eCwgYXJndltpKytdLCBhbnRpYWxpYXMpOwogICAgICBsaW5lVHlwZSA9IGFudGlhbGlhcyA/IGN2OjpMSU5FX0FBIDogY3Y6OkxJTkVfODsKCiAgICB9IGVsc2UgaWYoSlNfSXNOdW1iZXIoYXJndltpXSkpIHsKICAgICAgICAgIGpzX3ZhbHVlX3RvKGN0eCwgYXJndltpKytdLCBsaW5lVHlwZSk7CiAgICB9CiAgfQoKICBjdjo6Y2lyY2xlKGRzdCwgcG9pbnQsIHJhZGl1cywgKnJlaW50ZXJwcmV0X2Nhc3Q8Y3Y6OlNjYWxhcio+KCZjb2xvciksIHRoaWNrbmVzcyA8IDAgPyBjdjo6RklMTEVEIDogdGhpY2tuZXNzLCBsaW5lVHlwZSk7CiAgcmV0dXJuIEpTX1VOREVGSU5FRDsKfQoKc3RhdGljIEpTVmFsdWUKanNfZHJhd19jb250b3VyKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QqIGFyZ3YpIHsKICBKU0lucHV0T3V0cHV0QXJyYXkgZHN0OwogIGludCBpID0gMCwgcmV0ID0gLTE7CiAgSlNDb250b3Vyc0RhdGE8aW50PiBjb250b3VyczsKICBpbnQzMl90IGNvbnRvdXJJZHggPSAtMSwgbGluZVR5cGUgPSBjdjo6TElORV84OwoKICBKU0NvbG9yRGF0YTxkb3VibGU+IGNvbG9yOwogIGludCB0aGlja25lc3MgPSAxOwogIGJvb2wgYW50aWFsaWFzID0gdHJ1ZTsKCiAgaWYoYXJnYyA+IGkpIHsKICAgIGlmKCFqc19pc19ub2FycmF5KChkc3QgPSBqc191bWF0X29yX21hdChjdHgsIGFyZ3ZbaV0pKSkpCiAgICAgIGkrKzsKICB9IGVsc2UKICAgIGRzdCA9ICpkcHRyOwoKICBpZihqc19pc19ub2FycmF5KGRzdCkpCiAgICByZXR1cm4gSlNfRVhDRVBUSU9OOwoKICBpZihpID09IGFyZ2MgfHwgIWpzX2lzX2FycmF5KGN0eCwgYXJndlsrK2ldKSkKICAgIHJldHVybiBKU19FWENFUFRJT047CgogIC8vIGpzX2FycmF5PEpTQ29udG91ckRhdGE8aW50Pj46OnRvX3ZlY3RvcihjdHgsIGFyZ3ZbaV0sIGNvbnRvdXJzKTsKCiAgaWYoYXJnYyA+IGkgJiYgSlNfSXNOdW1iZXIoYXJndlsrK2ldKSkgewogICAgSlNfVG9JbnQzMihjdHgsICZjb250b3VySWR4LCBhcmd2W2ldKTsKICB9CgogIGlmKGFyZ2MgPiBpKSB7CiAgICBqc19jb2xvcl9yZWFkKGN0eCwgYXJndltpXSwgJmNvbG9yKTsKICAgIGkrKzsKICB9CgogIGlmKGFyZ2MgPiBpICYmIEpTX0lzTnVtYmVyKGFyZ3ZbaV0pKQogICAganNfdmFsdWVfdG8oY3R4LCBhcmd2W2krK10sIHRoaWNrbmVzcyk7CgogIGlmKGFyZ2MgPiBpICYmIEpTX0lzTnVtYmVyKGFyZ3ZbKytpXSkpIHsKICAgIEpTX1RvSW50MzIoY3R4LCAmbGluZVR5cGUsIGFyZ3ZbaV0pOwogIH0KICBzdGQ6OmNlcnIgPDwgImRyYXdfY29udG91cigpIGNvbnRvdXJzLmxlbmd0aD0iIDw8IGNvbnRvdXJzLnNpemUoKSA8PCAiIGNvbnRvdXJJZHg9IiA8PCBjb250b3VySWR4CiAgICAgICAgICAgIDw8ICIgdGhpY2tuZXNzPSIgPDwgdGhpY2tuZXNzIDw8IHN0ZDo6ZW5kbDsKCiAgY3Y6OmRyYXdDb250b3Vycyhkc3QsIGNvbnRvdXJzLCBjb250b3VySWR4LCAqcmVpbnRlcnByZXRfY2FzdDxjdjo6U2NhbGFyKj4oJmNvbG9yKSwgdGhpY2tuZXNzLCBsaW5lVHlwZSk7CgogIHN0ZDo6Y2VyciA8PCAiZHJhd19jb250b3VyKCkgcmV0OiIgPDwgcmV0IDw8ICIgY29sb3I6ICIgPDwgKnJlaW50ZXJwcmV0X2Nhc3Q8Y3Y6OlNjYWxhcio+KCZjb2xvcikgPDwgc3RkOjplbmRsOwogIHJldHVybiBKU19VTkRFRklORUQ7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX2RyYXdfY29udG91cnMoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCogYXJndikgewogIEpTSW5wdXRPdXRwdXRBcnJheSBkc3Q7CiAgaW50IGkgPSAwLCByZXQgPSAtMTsKICBKU0NvbnRvdXJzRGF0YTxpbnQ+IGNvbnRvdXJzOwogIGludDMyX3QgY29udG91cklkeCA9IC0xLCBsaW5lVHlwZSA9IGN2OjpMSU5FXzg7CiAgSlNDb2xvckRhdGE8ZG91YmxlPiBjb2xvcjsKICBKU1BvaW50RGF0YTxpbnQ+IG9mZnNldHswLCAwfTsKICBzdGQ6OnZlY3Rvcjxjdjo6VmVjNGk+IGhpZXI7CiAgaW50MzJfdCB0aGlja25lc3MgPSAxLCBtYXhMZXZlbCA9IElOVF9NQVg7CiAgYm9vbCBhbnRpYWxpYXMgPSB0cnVlOwoKICBpZihqc19pc19ub2FycmF5KChkc3QgPSBqc191bWF0X29yX21hdChjdHgsIGFyZ3ZbMF0pKSkpCiAgICByZXR1cm4gSlNfRVhDRVBUSU9OOwoKICBqc19hcnJheV90byhjdHgsIGFyZ3ZbMV0sIGNvbnRvdXJzKTsKCiAganNfdmFsdWVfdG8oY3R4LCBhcmd2WzJdLCBjb250b3VySWR4KTsKCiAganNfY29sb3JfcmVhZChjdHgsIGFyZ3ZbM10sICZjb2xvcik7CiAgaWYoYXJnYyA+IDQpIHsKICAgIGpzX3ZhbHVlX3RvKGN0eCwgYXJndls0XSwgdGhpY2tuZXNzKTsKICAgIGlmKGFyZ2MgPiA1KSB7CiAgICAgIGpzX3ZhbHVlX3RvKGN0eCwgYXJndls1XSwgbGluZVR5cGUpOwogICAgICBpZihhcmdjID4gNikgewogICAgICAgIGpzX2FycmF5X3RvKGN0eCwgYXJndls2XSwgaGllcik7CiAgICAgICAgaWYoYXJnYyA+IDcpIHsKICAgICAgICAgIGpzX3ZhbHVlX3RvKGN0eCwgYXJndls3XSwgbWF4TGV2ZWwpOwogICAgICAgICAgaWYoYXJnYyA+IDgpCiAgICAgICAgICAgIGpzX3BvaW50X3JlYWQ8aW50PihjdHgsIGFyZ3ZbOF0sICZvZmZzZXQpOwogICAgICAgIH0KICAgICAgfQogICAgfQogIH0KCiAgLy8gc3RkOjpjZXJyIDw8ICJkcmF3X2NvbnRvdXJzKCkgY29udG91cnMubGVuZ3RoPSIgPDwgY29udG91cnMuc2l6ZSgpIDw8ICIgY29udG91cklkeD0iIDw8CiAgLy8gY29udG91cklkeCA8PCAiIHRoaWNrbmVzcz0iCiAgLy8gPDwgdGhpY2tuZXNzIDw8IHN0ZDo6ZW5kbDsKCiAgY3Y6OmRyYXdDb250b3Vycyhkc3QsCiAgICAgICAgICAgICAgICAgICBjb250b3VycywKICAgICAgICAgICAgICAgICAgIGNvbnRvdXJJZHgsCiAgICAgICAgICAgICAgICAgICAqcmVpbnRlcnByZXRfY2FzdDxjdjo6U2NhbGFyKj4oJmNvbG9yKSwKICAgICAgICAgICAgICAgICAgIHRoaWNrbmVzcywKICAgICAgICAgICAgICAgICAgIGxpbmVUeXBlLAogICAgICAgICAgICAgICAgICAgYXJnYyA+IDYgPyBKU0lucHV0T3V0cHV0QXJyYXkoaGllcikgOiBjdjo6bm9BcnJheSgpLAogICAgICAgICAgICAgICAgICAgbWF4TGV2ZWwsCiAgICAgICAgICAgICAgICAgICBvZmZzZXQpOwoKICAvLyBzdGQ6OmNlcnIgPDwgImRyYXdfY29udG91cnMoKSByZXQ6IiA8PCByZXQgPDwgIiBjb2xvcjogIiA8PAogIC8vICpyZWludGVycHJldF9jYXN0PGN2OjpTY2FsYXIqPigmY29sb3IpIDw8IHN0ZDo6ZW5kbDsKCiAgcmV0dXJuIEpTX1VOREVGSU5FRDsKfQoKc3RhdGljIEpTVmFsdWUKanNfZHJhd19saW5lKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QqIGFyZ3YpIHsKICBKU0lucHV0T3V0cHV0QXJyYXkgZHN0OwogIGludCBpID0gMCwgcmV0ID0gLTE7CiAgSlNQb2ludERhdGE8ZG91YmxlPiBwb2ludHNbMl07CiAgSlNDb2xvckRhdGE8dWludDhfdD4gY29sb3I7CiAgY3Y6OlNjYWxhciBzY2FsYXI7CiAgaW50IHRoaWNrbmVzcyA9IDE7CiAgYm9vbCBhbnRpYWxpYXMgPSB0cnVlOwoKICBpZihhcmdjID4gaSkgewogICAgaWYoIWpzX2lzX25vYXJyYXkoKGRzdCA9IGpzX3VtYXRfb3JfbWF0KGN0eCwgYXJndltpXSkpKSkKICAgICAgaSsrOwogIH0gZWxzZQogICAgZHN0ID0gKmRwdHI7CgogIGlmKGpzX2lzX25vYXJyYXkoZHN0KSkKICAgIHJldHVybiBKU19FWENFUFRJT047CgogIGlmKGFyZ2MgPiBpKQogICAgaWYoanNfcG9pbnRfcmVhZChjdHgsIGFyZ3ZbaV0sICZwb2ludHNbMF0pKSB7CiAgICAgIGkrKzsKICAgIH0KICBpZihhcmdjID4gaSkKICAgIGlmKGpzX3BvaW50X3JlYWQoY3R4LCBhcmd2W2ldLCAmcG9pbnRzWzFdKSkgewogICAgICBpKys7CiAgICB9CgogIGlmKGFyZ2MgPiBpKQogICAgaWYoanNfY29sb3JfcmVhZChjdHgsIGFyZ3ZbaV0sICZjb2xvcikpIHsKICAgICAgaSsrOwoKICAgICAgc2NhbGFyWzBdID0gY29sb3IuYXJyWzBdOwogICAgICBzY2FsYXJbMV0gPSBjb2xvci5hcnJbMV07CiAgICAgIHNjYWxhclsyXSA9IGNvbG9yLmFyclsyXTsKICAgICAgc2NhbGFyWzNdID0gY29sb3IuYXJyWzNdOwogICAgfQoKICBpZihhcmdjID4gaSAmJiBKU19Jc051bWJlcihhcmd2W2ldKSkKICAgIGpzX3ZhbHVlX3RvKGN0eCwgYXJndltpKytdLCB0aGlja25lc3MpOwoKICBpZihhcmdjID4gaSAmJiBKU19Jc0Jvb2woYXJndltpXSkpCiAgICBqc192YWx1ZV90byhjdHgsIGFyZ3ZbaSsrXSwgYW50aWFsaWFzKTsKCiAgY3Y6OmxpbmUoZHN0LCBwb2ludHNbMF0sIHBvaW50c1sxXSwgc2NhbGFyLCB0aGlja25lc3MsIGFudGlhbGlhcyA/IGN2OjpMSU5FX0FBIDogY3Y6OkxJTkVfOCk7CiAgcmV0dXJuIEpTX1VOREVGSU5FRDsKfQoKc3RhdGljIEpTVmFsdWUKanNfZHJhd19wb2x5Z29uKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QqIGFyZ3YpIHsKICBKU0lucHV0T3V0cHV0QXJyYXkgZHN0OwogIGludCBpID0gMCwgcmV0ID0gLTE7CiAgcG9pbnRfdmVjdG9yPGludD4gcG9pbnRzOwogIGN2OjpTY2FsYXIgY29sb3I7CiAgYm9vbCBhbnRpYWxpYXMgPSB0cnVlOwogIGludCB0aGlja25lc3MgPSAtMTsKCiAgaWYoYXJnYyA+IGkpIHsKICAgIGlmKCFqc19pc19ub2FycmF5KChkc3QgPSBqc191bWF0X29yX21hdChjdHgsIGFyZ3ZbaV0pKSkpCiAgICAgIGkrKzsKICB9IGVsc2UKICAgIGRzdCA9ICpkcHRyOwoKICBpZihhcmdjID4gaSAmJiBqc19pc19hcnJheV9saWtlKGN0eCwgYXJndltpXSkpCiAgICBqc19hcnJheV90byhjdHgsIGFyZ3ZbaSsrXSwgcG9pbnRzKTsKCiAgaWYoYXJnYyA+IGkgKQogICAganNfY29sb3JfcmVhZChjdHgsIGFyZ3ZbaSsrXSwgJmNvbG9yKTsKCiAgaWYoYXJnYyA+IGkgJiYgSlNfSXNOdW1iZXIoYXJndltpXSkpCiAgICBqc192YWx1ZV90byhjdHgsIGFyZ3ZbaSsrXSwgdGhpY2tuZXNzKTsKCiAgaWYoYXJnYyA+IGkgJiYgSlNfSXNCb29sKGFyZ3ZbaV0pKQogICAganNfdmFsdWVfdG8oY3R4LCBhcmd2W2krK10sIGFudGlhbGlhcyk7CgogIGlmKGRwdHIgIT0gbnVsbHB0cikgewogICAgY29uc3QgaW50IHNpemUgPSBwb2ludHMuc2l6ZSgpOwogICAgaW50IGxpbmVUeXBlID0gYW50aWFsaWFzID8gY3Y6OkxJTkVfQUEgOiBjdjo6TElORV84OwogICAgY29uc3QgSlNQb2ludERhdGE8aW50PiogcHRzID0gcG9pbnRzLmRhdGEoKTsKCiAgICBzdGQ6OmNlcnIgPDwgImRyYXdQb2x5Z29uKCkgcG9pbnRzOiAiIDw8IChwb2ludHMpIDw8ICIgY29sb3I6ICIgPDwgdG9fc3RyaW5nKGNvbG9yKSA8PCBzdGQ6OmVuZGw7CgogICAgLy8gY3Y6OmZpbGxQb2x5KCpkcHRyLCBwb2ludHMsIGNvbG9yLCBhbnRpYWxpYXMgPyBjdjo6TElORV9BQSA6IGN2OjpMSU5FXzgpOwogICAgKHRoaWNrbmVzcyA8PSAwID8gY3Y6OmZpbGxQb2x5KGRzdCwgJnB0cywgJnNpemUsIDEsIGNvbG9yLCBsaW5lVHlwZSkKICAgICAgICAgICAgICAgICAgICA6IGN2Ojpwb2x5bGluZXMoZHN0LCAmcHRzLCAmc2l6ZSwgMSwgdHJ1ZSwgY29sb3IsIHRoaWNrbmVzcywgbGluZVR5cGUpKTsKCiAgICByZXR1cm4gSlNfVU5ERUZJTkVEOwogIH0KICByZXR1cm4gSlNfRVhDRVBUSU9OOwp9CgpzdGF0aWMgSlNWYWx1ZQpqc19kcmF3X3JlY3QoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCogYXJndikgewogIEpTSW5wdXRPdXRwdXRBcnJheSBkc3Q7CiAgaW50IGkgPSAwLCByZXQgPSAtMTsKICBKU1JlY3REYXRhPGRvdWJsZT4gcmVjdDsKICBKU1BvaW50RGF0YTxkb3VibGU+IHBvaW50c1syXTsKICBKU0NvbG9yRGF0YTx1aW50OF90PiBjb2xvcjsKICBjdjo6U2NhbGFyIHNjYWxhcjsKICBpbnQgdGhpY2tuZXNzID0gMTsKICBib29sIGFudGlhbGlhcyA9IHRydWU7CgogIGlmKGFyZ2MgPiBpKSB7CiAgICBpZighanNfaXNfbm9hcnJheSgoZHN0ID0ganNfdW1hdF9vcl9tYXQoY3R4LCBhcmd2W2ldKSkpKQogICAgICBpKys7CiAgfSBlbHNlCiAgICBkc3QgPSAqZHB0cjsKCiAgaWYoanNfaXNfbm9hcnJheShkc3QpKQogICAgcmV0dXJuIEpTX0VYQ0VQVElPTjsKCiAgaWYoYXJnYyA+IGkpIHsKICAgIGlmKGpzX3JlY3RfcmVhZChjdHgsIGFyZ3ZbaV0sICZyZWN0KSkKICAgICAgaSsrOwogIH0KCiAgaWYoYXJnYyA+IGkpCiAgICBpZihqc19jb2xvcl9yZWFkKGN0eCwgYXJndltpXSwgJmNvbG9yKSkgewogICAgICBpKys7CgogICAgICBzY2FsYXJbMF0gPSBjb2xvci5hcnJbMF07CiAgICAgIHNjYWxhclsxXSA9IGNvbG9yLmFyclsxXTsKICAgICAgc2NhbGFyWzJdID0gY29sb3IuYXJyWzJdOwogICAgICBzY2FsYXJbM10gPSBjb2xvci5hcnJbM107CiAgICB9CgogIGlmKGFyZ2MgPiBpICYmIEpTX0lzTnVtYmVyKGFyZ3ZbaV0pKQogICAganNfdmFsdWVfdG8oY3R4LCBhcmd2W2krK10sIHRoaWNrbmVzcyk7CgogIGlmKGFyZ2MgPiBpICYmIEpTX0lzQm9vbChhcmd2W2ldKSkKICAgIGpzX3ZhbHVlX3RvKGN0eCwgYXJndltpKytdLCBhbnRpYWxpYXMpOwoKICBwb2ludHNbMF0ueCA9IHJlY3QueDsKICBwb2ludHNbMF0ueSA9IHJlY3QueTsKICBwb2ludHNbMV0ueCA9IHJlY3QueCArIHJlY3Qud2lkdGg7CiAgcG9pbnRzWzFdLnkgPSByZWN0LnkgKyByZWN0LmhlaWdodDsKCiAgLy8gY3Y6OnJlY3RhbmdsZShkc3QsIHBvaW50c1swXSwgcG9pbnRzWzFdLCBjb2xvciwgdGhpY2tuZXNzLCBhbnRpYWxpYXMgPyBjdjo6TElORV9BQSA6CiAgLy8gY3Y6OkxJTkVfOCk7CiAgY3Y6OnJlY3RhbmdsZShkc3QsIHJlY3QsIHNjYWxhciwgdGhpY2tuZXNzLCBhbnRpYWxpYXMgPyBjdjo6TElORV9BQSA6IGN2OjpMSU5FXzgpOwoKICByZXR1cm4gSlNfVU5ERUZJTkVEOwp9CgpzdGF0aWMgSlNWYWx1ZQpqc19wdXRfdGV4dChKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2KSB7CiAgY3Y6Ok1hdCogZHN0OwogIGludCBpID0gMCwgcmV0ID0gLTE7CiAgSlNDb2xvckRhdGE8ZG91YmxlPiBjb2xvcjsKICBKU1BvaW50RGF0YTxkb3VibGU+IHBvaW50OwogIHN0ZDo6c3RyaW5nIHRleHQsIGZvbnROYW1lOwogIGludDMyX3QgZm9udEZhY2UgPSBjdjo6Rk9OVF9IRVJTSEVZX1NJTVBMRVgsIHRoaWNrbmVzcyA9IDEsIGxpbmVUeXBlID0gY3Y6OkxJTkVfQUE7CiAgZG91YmxlIGZvbnRTY2FsZSA9IDE7CiAgYm9vbCBib3R0b21MZWZ0T3JpZ2luID0gZmFsc2U7CgogIGlmKGFyZ2MgPiBpICYmIChkc3QgPSBqc19tYXRfZGF0YShjdHgsIGFyZ3ZbaV0pKSkKICAgIGkrKzsKICBlbHNlCiAgICBkc3QgPSBkcHRyOwoKICBpZihkc3QgPT0gbnVsbHB0cikKICAgIHJldHVybiBKU19FWENFUFRJT047CgogIGpzX3ZhbHVlX3RvKGN0eCwgYXJndltpKytdLCB0ZXh0KTsKCiAgaWYoanNfcG9pbnRfcmVhZChjdHgsIGFyZ3ZbaV0sICZwb2ludCkpIHsKICAgIGkrKzsKICB9IGVsc2UgewogICAgaW50MzJfdCB4LCB5OwogICAgSlNfVG9JbnQzMihjdHgsICZ4LCBhcmd2W2ldKTsKICAgIEpTX1RvSW50MzIoY3R4LCAmeSwgYXJndltpICsgMV0pOwoKICAgIHBvaW50LnggPSB4OwogICAgcG9pbnQueSA9IHk7CiAgICBpICs9IDI7CiAgfQoKICBpZihhcmdjID4gaSkgewogICAgaWYoSlNfSXNOdW1iZXIoYXJndltpXSkpCiAgICAgIEpTX1RvSW50MzIoY3R4LCAmZm9udEZhY2UsIGFyZ3ZbaV0pOwogICAgZWxzZQogICAgICBqc192YWx1ZV90byhjdHgsIGFyZ3ZbaV0sIGZvbnROYW1lKTsKICAgIGkrKzsKICB9CgogIGlmKGFyZ2MgPiBpKQogICAgSlNfVG9GbG9hdDY0KGN0eCwgJmZvbnRTY2FsZSwgYXJndltpKytdKTsKCiAgaWYoYXJnYyA+IGkpIHsKICAgIGpzX2NvbG9yX3JlYWQoY3R4LCBhcmd2W2ldLCAmY29sb3IpOwogICAgaSsrOwogIH0KCiAgaWYoYXJnYyA+IGkpCiAgICBKU19Ub0ludDMyKGN0eCwgJnRoaWNrbmVzcywgYXJndltpKytdKTsKCiAgaWYoYXJnYyA+IGkpCiAgICBKU19Ub0ludDMyKGN0eCwgJmxpbmVUeXBlLCBhcmd2W2krK10pOwoKICBpZihhcmdjID4gaSkKICAgIGJvdHRvbUxlZnRPcmlnaW4gPSBKU19Ub0Jvb2woY3R4LCBhcmd2W2krK10pOwoKICBpZighZm9udE5hbWUuZW1wdHkoKSAmJiBmb250TmFtZSAhPSBmcmVldHlwZTJfZmFjZSkgewogICAgZnJlZXR5cGUyLT5sb2FkRm9udERhdGEoZm9udE5hbWUsIDApOwogICAgZnJlZXR5cGUyX2ZhY2UgPSBmb250TmFtZTsKICB9CgogIGlmKGZvbnROYW1lLmVtcHR5KCkpCiAgICBjdjo6cHV0VGV4dCgKICAgICAgICAqZHN0LCB0ZXh0LCBwb2ludCwgZm9udEZhY2UsIGZvbnRTY2FsZSwgKnJlaW50ZXJwcmV0X2Nhc3Q8Y3Y6OlNjYWxhcio+KCZjb2xvciksIHRoaWNrbmVzcywgbGluZVR5cGUsIGJvdHRvbUxlZnRPcmlnaW4pOwogIGVsc2UKICAgIGZyZWV0eXBlMi0+cHV0VGV4dCgKICAgICAgICAqZHN0LCB0ZXh0LCBwb2ludCwgZm9udFNjYWxlLCAqcmVpbnRlcnByZXRfY2FzdDxjdjo6U2NhbGFyKj4oJmNvbG9yKSwgdGhpY2tuZXNzLCBsaW5lVHlwZSwgYm90dG9tTGVmdE9yaWdpbik7CgogIHJldHVybiBKU19VTkRFRklORUQ7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX2dldF90ZXh0X3NpemUoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCogYXJndikgewogIGludCBpID0gMCwgYmFzZWxpbmUgPSAwOwogIEpTU2l6ZURhdGE8ZG91YmxlPiBzaXplOwogIGNvbnN0IGNoYXIqIHRleHQ7CiAgaW50MzJfdCBmb250RmFjZSA9IGN2OjpGT05UX0hFUlNIRVlfU0lNUExFWCwgdGhpY2tuZXNzID0gMTsKICBzdGQ6OnN0cmluZyBmb250TmFtZTsKICBkb3VibGUgZm9udFNjYWxlID0gMTsKICBKU1ZhbHVlIGJhc2VsaW5lVmFsOwogIHN0ZDo6YXJyYXk8aW50MzJfdCwgMj4gZGltOwoKICB0ZXh0ID0gSlNfVG9DU3RyaW5nKGN0eCwgYXJndltpKytdKTsKCiAgaWYoYXJnYyA+IGkpIHsKICAgIGlmKEpTX0lzTnVtYmVyKGFyZ3ZbaV0pKQogICAgICBKU19Ub0ludDMyKGN0eCwgJmZvbnRGYWNlLCBhcmd2W2ldKTsKICAgIGVsc2UKICAgICAganNfdmFsdWVfdG8oY3R4LCBhcmd2W2ldLCBmb250TmFtZSk7CiAgICBpKys7CiAgfQoKICBpZihhcmdjID4gaSkKICAgIEpTX1RvRmxvYXQ2NChjdHgsICZmb250U2NhbGUsIGFyZ3ZbaSsrXSk7CgogIGlmKGFyZ2MgPiBpKQogICAgSlNfVG9JbnQzMihjdHgsICZ0aGlja25lc3MsIGFyZ3ZbaSsrXSk7CgogIGlmKGZyZWV0eXBlMiA9PSBudWxscHRyKQogICAgZnJlZXR5cGUyID0gY3Y6OmZyZWV0eXBlOjpjcmVhdGVGcmVlVHlwZTIoKTsKCiAgaWYoIWZvbnROYW1lLmVtcHR5KCkgJiYgZm9udE5hbWUgIT0gZnJlZXR5cGUyX2ZhY2UpIHsKICAgIGZyZWV0eXBlMi0+bG9hZEZvbnREYXRhKGZvbnROYW1lLCAwKTsKICAgIGZyZWV0eXBlMl9mYWNlID0gZm9udE5hbWU7CiAgfQoKICBpZihmb250TmFtZS5lbXB0eSgpKQogICAgc2l6ZSA9IGN2OjpnZXRUZXh0U2l6ZSh0ZXh0LCBmb250RmFjZSwgZm9udFNjYWxlLCB0aGlja25lc3MsICZiYXNlbGluZSk7CiAgZWxzZQogICAgc2l6ZSA9IGZyZWV0eXBlMi0+Z2V0VGV4dFNpemUodGV4dCwgZm9udFNjYWxlLCB0aGlja25lc3MsICZiYXNlbGluZSk7CgogIGJhc2VsaW5lVmFsID0gSlNfTmV3SW50MzIoY3R4LCBiYXNlbGluZSk7CgogIGlmKEpTX0lzRnVuY3Rpb24oY3R4LCBhcmd2W2ldKSkgewogICAgSlNfQ2FsbChjdHgsIGFyZ3ZbaV0sIEpTX1VOREVGSU5FRCwgMSwgY29uc3RfY2FzdDxKU1ZhbHVlQ29uc3QqPigmYmFzZWxpbmVWYWwpKTsKICB9IGVsc2UgaWYoanNfaXNfYXJyYXkoY3R4LCBhcmd2W2ldKSkgewogICAgSlNfU2V0UHJvcGVydHlVaW50MzIoY3R4LCBhcmd2W2ldLCAwLCBiYXNlbGluZVZhbCk7CiAgfSBlbHNlIGlmKEpTX0lzT2JqZWN0KGFyZ3ZbaV0pKSB7CiAgICBKU19TZXRQcm9wZXJ0eVN0cihjdHgsIGFyZ3ZbaV0sICJ5IiwgYmFzZWxpbmVWYWwpOwogIH0KICBkaW1bMF0gPSBzaXplLndpZHRoOwogIGRpbVsxXSA9IHNpemUuaGVpZ2h0OwoKICByZXR1cm4ganNfYXJyYXk8aW50MzJfdD46OmZyb21fc2VxdWVuY2UoY3R4LCBkaW0uY2JlZ2luKCksIGRpbS5jZW5kKCkpOwp9CgpzdGF0aWMgSlNWYWx1ZQpqc19nZXRfZm9udF9zY2FsZV9mcm9tX2hlaWdodChKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2KSB7CiAgaW50MzJfdCBmb250RmFjZSwgcGl4ZWxIZWlnaHQsIHRoaWNrbmVzcyA9IDE7CiAgZG91YmxlIGZvbnRTY2FsZTsKCiAgSlNfVG9JbnQzMihjdHgsICZmb250RmFjZSwgYXJndlswXSk7CiAgSlNfVG9JbnQzMihjdHgsICZwaXhlbEhlaWdodCwgYXJndlsxXSk7CiAgaWYoYXJnYyA+IDIpCiAgICBKU19Ub0ludDMyKGN0eCwgJnRoaWNrbmVzcywgYXJndlsyXSk7CgogIGZvbnRTY2FsZSA9IGN2OjpnZXRGb250U2NhbGVGcm9tSGVpZ2h0KGZvbnRGYWNlLCBwaXhlbEhlaWdodCwgdGhpY2tuZXNzKTsKCiAgcmV0dXJuIEpTX05ld0Zsb2F0NjQoY3R4LCBmb250U2NhbGUpOwp9CgpzdGF0aWMgSlNWYWx1ZQpqc19sb2FkX2ZvbnQoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCogYXJndikgewogIGludDMyX3QgaWQgPSAwOwogIHN0ZDo6c3RyaW5nIGZvbnROYW1lOwoKICBpZihmcmVldHlwZTIgPT0gbnVsbHB0cikKICAgIGZyZWV0eXBlMiA9IGN2OjpmcmVldHlwZTo6Y3JlYXRlRnJlZVR5cGUyKCk7CgogIGpzX3ZhbHVlX3RvKGN0eCwgYXJndlswXSwgZm9udE5hbWUpOwogIGlmKGFyZ2MgPiAxKQogICAganNfdmFsdWVfdG8oY3R4LCBhcmd2WzFdLCBpZCk7CiAgZnJlZXR5cGUyLT5sb2FkRm9udERhdGEoZm9udE5hbWUsIGlkKTsKICByZXR1cm4gSlNfVU5ERUZJTkVEOwp9CgpKU1ZhbHVlIGRyYXdfcHJvdG8gPSBKU19VTkRFRklORUQsIGRyYXdfY2xhc3MgPSBKU19VTkRFRklORUQ7CkpTQ2xhc3NJRCBqc19kcmF3X2NsYXNzX2lkID0gMDsKCkpTQ2xhc3NEZWYganNfZHJhd19jbGFzcyA9IHsKICAgIC5jbGFzc19uYW1lID0gIkRyYXciLAogICAgLmZpbmFsaXplciA9IDAsCn07Cgpjb25zdCBKU0NGdW5jdGlvbkxpc3RFbnRyeSBqc19kcmF3X3Byb3RvX2Z1bmNzW10gPSB7CiAgICBKU19QUk9QX1NUUklOR19ERUYoIltTeW1ib2wudG9TdHJpbmdUYWddIiwgIkRyYXciLCBKU19QUk9QX0NPTkZJR1VSQUJMRSksCn07Cgpjb25zdCBKU0NGdW5jdGlvbkxpc3RFbnRyeSBqc19kcmF3X3N0YXRpY19mdW5jc1tdID0gewogICAgSlNfQ0ZVTkNfREVGKCJjaXJjbGUiLCAxLCAmanNfZHJhd19jaXJjbGUpLAogICAgSlNfQ0ZVTkNfREVGKCJjb250b3VyIiwgMSwgJmpzX2RyYXdfY29udG91ciksCiAgICBKU19DRlVOQ19ERUYoImNvbnRvdXJzIiwgNCwgJmpzX2RyYXdfY29udG91cnMpLAogICAgSlNfQ0ZVTkNfREVGKCJsaW5lIiwgMSwgJmpzX2RyYXdfbGluZSksCiAgICBKU19DRlVOQ19ERUYoInBvbHlnb24iLCAxLCAmanNfZHJhd19wb2x5Z29uKSwKICAgIEpTX0NGVU5DX0RFRigicmVjdCIsIDEsICZqc19kcmF3X3JlY3QpLAogICAgSlNfQ0ZVTkNfREVGKCJ0ZXh0IiwgMiwgJmpzX3B1dF90ZXh0KSwKICAgIEpTX0NGVU5DX0RFRigidGV4dFNpemUiLCA1LCAmanNfZ2V0X3RleHRfc2l6ZSksCiAgICBKU19DRlVOQ19ERUYoImZvbnRTY2FsZUZyb21IZWlnaHQiLCAyLCAmanNfZ2V0X2ZvbnRfc2NhbGVfZnJvbV9oZWlnaHQpLAogICAgSlNfQ0ZVTkNfREVGKCJsb2FkRm9udCIsIDEsICZqc19sb2FkX2ZvbnQpLAp9OwoKY29uc3QgSlNDRnVuY3Rpb25MaXN0RW50cnkganNfZHJhd19nbG9iYWxfZnVuY3NbXSA9IHsKICAgIEpTX0NGVU5DX0RFRigiZHJhd0NpcmNsZSIsIDEsICZqc19kcmF3X2NpcmNsZSksCiAgICBKU19DRlVOQ19ERUYoImRyYXdDb250b3VyIiwgMSwgJmpzX2RyYXdfY29udG91ciksCiAgICBKU19DRlVOQ19ERUYoImRyYXdMaW5lIiwgMSwgJmpzX2RyYXdfbGluZSksCiAgICBKU19DRlVOQ19ERUYoImRyYXdQb2x5Z29uIiwgMSwgJmpzX2RyYXdfcG9seWdvbiksCiAgICBKU19DRlVOQ19ERUYoImRyYXdSZWN0IiwgMSwgJmpzX2RyYXdfcmVjdCksCiAgICBKU19DRlVOQ19ERUYoInB1dFRleHQiLCAyLCAmanNfcHV0X3RleHQpLAogICAgSlNfQ0ZVTkNfREVGKCJnZXRUZXh0U2l6ZSIsIDUsICZqc19nZXRfdGV4dF9zaXplKSwKICAgIEpTX0NGVU5DX0RFRigiZ2V0Rm9udFNjYWxlRnJvbUhlaWdodCIsIDIsICZqc19nZXRfZm9udF9zY2FsZV9mcm9tX2hlaWdodCksCiAgICBKU19DRlVOQ19ERUYoImxvYWRGb250IiwgMSwgJmpzX2xvYWRfZm9udCksCn07CgpzdGF0aWMgSlNWYWx1ZQpqc19kcmF3X2N0b3IoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCBuZXdfdGFyZ2V0LCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2KSB7CiAgSlNWYWx1ZSBvYmogPSBKU19VTkRFRklORUQ7CiAgSlNWYWx1ZSBwcm90bzsKCiAgLyogdXNpbmcgbmV3X3RhcmdldCB0byBnZXQgdGhlIHByb3RvdHlwZSBpcyBuZWNlc3Nhcnkgd2hlbiB0aGUKICAgICBjbGFzcyBpcyBleHRlbmRlZC4gKi8KICBwcm90byA9IEpTX0dldFByb3BlcnR5U3RyKGN0eCwgbmV3X3RhcmdldCwgInByb3RvdHlwZSIpOwogIGlmKEpTX0lzRXhjZXB0aW9uKHByb3RvKSkKICAgIGdvdG8gZmFpbDsKICBvYmogPSBKU19OZXdPYmplY3RQcm90b0NsYXNzKGN0eCwgcHJvdG8sIGpzX2RyYXdfY2xhc3NfaWQpOwogIEpTX0ZyZWVWYWx1ZShjdHgsIHByb3RvKTsKICBpZihKU19Jc0V4Y2VwdGlvbihvYmopKQogICAgZ290byBmYWlsOwogIHJldHVybiBvYmo7CmZhaWw6CiAgSlNfRnJlZVZhbHVlKGN0eCwgb2JqKTsKICByZXR1cm4gSlNfRVhDRVBUSU9OOwp9CgppbnQKanNfZHJhd19pbml0KEpTQ29udGV4dCogY3R4LCBKU01vZHVsZURlZiogbSkgewoKICBpZihqc19kcmF3X2NsYXNzX2lkID09IDApIHsKICAgIC8qIGNyZWF0ZSB0aGUgRHJhdyBjbGFzcyAqLwogICAgSlNfTmV3Q2xhc3NJRCgmanNfZHJhd19jbGFzc19pZCk7CiAgICBKU19OZXdDbGFzcyhKU19HZXRSdW50aW1lKGN0eCksIGpzX2RyYXdfY2xhc3NfaWQsICZqc19kcmF3X2NsYXNzKTsKCiAgICBkcmF3X3Byb3RvID0gSlNfTmV3T2JqZWN0KGN0eCk7CiAgICBKU19TZXRQcm9wZXJ0eUZ1bmN0aW9uTGlzdChjdHgsIGRyYXdfcHJvdG8sIGpzX2RyYXdfcHJvdG9fZnVuY3MsIGNvdW50b2YoanNfZHJhd19wcm90b19mdW5jcykpOwogICAgSlNfU2V0Q2xhc3NQcm90byhjdHgsIGpzX2RyYXdfY2xhc3NfaWQsIGRyYXdfcHJvdG8pOwoKICAgIGRyYXdfY2xhc3MgPSBKU19OZXdDRnVuY3Rpb24yKGN0eCwganNfZHJhd19jdG9yLCAiRHJhdyIsIDIsIEpTX0NGVU5DX2NvbnN0cnVjdG9yLCAwKTsKCiAgICAvKiBzZXQgcHJvdG8uY29uc3RydWN0b3IgYW5kIGN0b3IucHJvdG90eXBlICovCiAgICBKU19TZXRDb25zdHJ1Y3RvcihjdHgsIGRyYXdfY2xhc3MsIGRyYXdfcHJvdG8pOwogICAgSlNfU2V0UHJvcGVydHlGdW5jdGlvbkxpc3QoY3R4LCBkcmF3X2NsYXNzLCBqc19kcmF3X3N0YXRpY19mdW5jcywgY291bnRvZihqc19kcmF3X3N0YXRpY19mdW5jcykpOwogIH0KCiAgaWYobSkgewogICAgSlNfU2V0TW9kdWxlRXhwb3J0TGlzdChjdHgsIG0sIGpzX2RyYXdfc3RhdGljX2Z1bmNzLCBjb3VudG9mKGpzX2RyYXdfc3RhdGljX2Z1bmNzKSk7CiAgICBKU19TZXRNb2R1bGVFeHBvcnQoY3R4LCBtLCAiRHJhdyIsIGRyYXdfY2xhc3MpOwogIH0KICAvKiAgZWxzZQogICAgICBKU19TZXRQcm9wZXJ0eVN0cihjdHgsICpzdGF0aWNfY2FzdDxKU1ZhbHVlKj4obSksICJEcmF3IiwgZHJhd19jbGFzcyk7Ki8KICByZXR1cm4gMDsKfQoKZXh0ZXJuICJDIiBWSVNJQkxFIHZvaWQKanNfZHJhd19leHBvcnQoSlNDb250ZXh0KiBjdHgsIEpTTW9kdWxlRGVmKiBtKSB7CiAgSlNfQWRkTW9kdWxlRXhwb3J0KGN0eCwgbSwgIkRyYXciKTsKICBKU19BZGRNb2R1bGVFeHBvcnRMaXN0KGN0eCwgbSwganNfZHJhd19zdGF0aWNfZnVuY3MsIGNvdW50b2YoanNfZHJhd19zdGF0aWNfZnVuY3MpKTsKfQoKI2lmIGRlZmluZWQoSlNfRFJBV19NT0RVTEUpCiNkZWZpbmUgSlNfSU5JVF9NT0RVTEUgLypWSVNJQkxFKi8ganNfaW5pdF9tb2R1bGUKI2Vsc2UKI2RlZmluZSBKU19JTklUX01PRFVMRSAvKlZJU0lCTEUqLyBqc19pbml0X21vZHVsZV9kcmF3CiNlbmRpZgoKSlNNb2R1bGVEZWYqCkpTX0lOSVRfTU9EVUxFKEpTQ29udGV4dCogY3R4LCBjb25zdCBjaGFyKiBtb2R1bGVfbmFtZSkgewogIEpTTW9kdWxlRGVmKiBtOwogIG0gPSBKU19OZXdDTW9kdWxlKGN0eCwgbW9kdWxlX25hbWUsICZqc19kcmF3X2luaXQpOwogIGlmKCFtKQogICAgcmV0dXJuIE5VTEw7CiAganNfZHJhd19leHBvcnQoY3R4LCBtKTsKICByZXR1cm4gbTsKfQp2b2lkCmpzX2RyYXdfY29uc3RydWN0b3IoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWUgcGFyZW50LCBjb25zdCBjaGFyKiBuYW1lKSB7CiAgaWYoSlNfSXNVbmRlZmluZWQoZHJhd19jbGFzcykpCiAgICBqc19kcmF3X2luaXQoY3R4LCAwKTsKCiAgSlNfU2V0UHJvcGVydHlTdHIoY3R4LCBwYXJlbnQsIG5hbWUgPyBuYW1lIDogIkRyYXciLCBkcmF3X2NsYXNzKTsKfQp9CgAAAAAAAAAA4j4AAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/"
				]
			]
		},
		{
			"file": "cmake/CCache.cmake",
			"settings":
			{
				"buffer_size": 1748,
				"line_ending": "Unix"
			},
			"undo_stack":
			[
				[
					1,
					1,
					"right_delete",
					null,
					"AQAAAAAAAAAAAAAAAAAAAAAAAAABAAAACg",
					"AQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/"
				],
				[
					5,
					1,
					"left_delete",
					null,
					"AQAAANQGAAAAAAAA1AYAAAAAAAABAAAACg",
					"AQAAAAAAAAABAAAA1QYAAAAAAADVBgAAAAAAAAAAAAAAAAAA"
				],
				[
					7,
					1,
					"right_delete",
					null,
					"AQAAAAAAAAAAAAAAAAAAAAAAAAABAAAACg",
					"AQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
				],
				[
					9,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAADTBgAAc2V0KF9fRklORF9ST09UX1BBVEhfTU9ERV9QUk9HUkFNICR7Q01BS0VfRklORF9ST09UX1BBVEhfTU9ERV9QUk9HUkFNfSkKc2V0KENNQUtFX0ZJTkRfUk9PVF9QQVRIX01PREVfUFJPR1JBTSBORVZFUikKCmZpbmRfcHJvZ3JhbShDQ0FDSEVfRVhFQ1VUQUJMRSBjY2FjaGUgUVVJRVQpCm1hcmtfYXNfYWR2YW5jZWQoQ0NBQ0hFX0VYRUNVVEFCTEUpCgpzZXQoQ01BS0VfRklORF9ST09UX1BBVEhfTU9ERV9QUk9HUkFNICR7X19GSU5EX1JPT1RfUEFUSF9NT0RFX1BST0dSQU19KQpzZXQoX19GSU5EX1JPT1RfUEFUSF9NT0RFX1BST0dSQU0pCgptYWNybyh1c2VfY2NhY2hlKQogIGlmKE5PVCBDQ0FDSEVfRVhFQ1VUQUJMRSkKICAgIG1lc3NhZ2UoRkFUQUxfRVJST1IgInVzZV9jY2FjaGU6IGNjYWNoZSBub3QgZm91bmQuIikKICBlbmRpZigpCgogIGlmKENNQUtFX1ZFUlNJT04gVkVSU0lPTl9MRVNTIDMuNCkKICAgICMgUHJpb3IgdG8gMy40LCBoYWQgdG8gdXNlIHRoZXNlIHByb3BlcnRpZXMgTm90ZTogVGhlc2UgbWF5IGNvbmZsaWN0IHdpdGggQ1Rlc3QKICAgIHNldF9wcm9wZXJ0eShHTE9CQUwgUFJPUEVSVFkgUlVMRV9MQVVOQ0hfQ09NUElMRSAiJHtDQ0FDSEVfRVhFQ1VUQUJMRX0iKQogICAgc2V0X3Byb3BlcnR5KEdMT0JBTCBQUk9QRVJUWSBSVUxFX0xBVU5DSF9MSU5LICIke0NDQUNIRV9FWEVDVVRBQkxFfSIpCiAgZWxzZSgpCiAgICAjIENNYWtlIDMuNCBpbnRyb2R1Y2VkICdDT01QSUxFUl9MQVVOQ0hFUicKICAgIHNldChDTUFLRV9DX0NPTVBJTEVSX0xBVU5DSEVSICIke0NDQUNIRV9FWEVDVVRBQkxFfSIpCiAgICBzZXQoQ01BS0VfQ1hYX0NPTVBJTEVSX0xBVU5DSEVSICIke0NDQUNIRV9FWEVDVVRBQkxFfSIpCiAgZW5kaWYoKQplbmRtYWNybygpCgpmdW5jdGlvbih0YXJnZXRfZW5hYmxlX2NjYWNoZSB0YXJnZXQpCiAgaWYoTk9UIENDQUNIRV9FWEVDVVRBQkxFKQogICAgbWVzc2FnZShGQVRBTF9FUlJPUiAidGFyZ2V0X2VuYWJsZV9jY2FjaGU6IGNjYWNoZSBub3QgZm91bmQuIikKICBlbmRpZigpCgogIGlmKENNQUtFX1ZFUlNJT04gVkVSU0lPTl9HUkVBVEVSIDMuMykKICAgICMgQ01ha2UgMy40IGludHJvZHVjZWQgJ0NPTVBJTEVSX0xBVU5DSEVSJwogICAgc2V0X3Byb3BlcnR5KFRBUkdFVCAiJHt0YXJnZXR9IiBQUk9QRVJUWSBDX0NPTVBJTEVSX0xBVU5DSEVSICIke0NDQUNIRV9FWEVDVVRBQkxFfSIpCiAgICBzZXRfcHJvcGVydHkoVEFSR0VUICIke3RhcmdldH0iIFBST1BFUlRZIENYWF9DT01QSUxFUl9MQVVOQ0hFUiAiJHtDQ0FDSEVfRVhFQ1VUQUJMRX0iKQogIGVsc2UoKQogICAgIyBQcmlvciB0byAzLjQsIGhhZCB0byB1c2UgdGhlc2UgcHJvcGVydGllcyBOb3RlOiBUaGVzZSBtYXkgY29uZmxpY3Qgd2l0aCBDVGVzdAogICAgc2V0X3Byb3BlcnR5KFRBUkdFVCAiJHt0YXJnZXR9IiBQUk9QRVJUWSBSVUxFX0xBVU5DSF9DT01QSUxFICIke0NDQUNIRV9FWEVDVVRBQkxFfSIpCiAgICBzZXRfcHJvcGVydHkoVEFSR0VUICIke3RhcmdldH0iIFBST1BFUlRZIFJVTEVfTEFVTkNIX0xJTksgIiR7Q0NBQ0hFX0VYRUNVVEFCTEV9IikKICBlbmRpZigpCmVuZGZ1bmN0aW9uKCkKCmlmKENDQUNIRV9FWEVDVVRBQkxFKQogIG9wdGlvbihFTkFCTEVfQ0NBQ0hFICJFbmFibGUgY29tcGlsZXIgY2FjaGUiIE9GRikKZW5kaWYoQ0NBQ0hFX0VYRUNVVEFCTEUpCgppZihFTkFCTEVfQ0NBQ0hFKQogIHVzZV9jY2FjaGUoKQplbmRpZihFTkFCTEVfQ0NBQ0hFKQAAAAAAAAAA1AYAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA0wYAAAAAAADTBgAAAAAAAAAAAAAAAGlA"
				]
			]
		},
		{
			"file": "cmake/CheckFlags.cmake",
			"settings":
			{
				"buffer_size": 5478,
				"encoding": "UTF-8",
				"line_ending": "Unix"
			},
			"undo_stack":
			[
				[
					23,
					1,
					"insert",
					{
						"characters": " VAR"
					},
					"BAAAALoIAAAAAAAAuwgAAAAAAAAAAAAAuwgAAAAAAAC8CAAAAAAAAAAAAAC8CAAAAAAAAL0IAAAAAAAAAAAAAL0IAAAAAAAAvggAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAuggAAAAAAAC6CAAAAAAAAAAAAAAAAPC/"
				],
				[
					28,
					1,
					"insert",
					{
						"characters": "\nif"
					},
					"AwAAAL8IAAAAAAAAwAgAAAAAAAAAAAAAwAgAAAAAAADBCAAAAAAAAAAAAADBCAAAAAAAAMIIAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAvwgAAAAAAAC/CAAAAAAAAAAAAAAAQG9A"
				],
				[
					29,
					1,
					"insert",
					{
						"characters": " "
					},
					"AQAAAMIIAAAAAAAAwwgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAwggAAAAAAADCCAAAAAAAAAAAAAAAAPC/"
				],
				[
					30,
					1,
					"left_delete",
					null,
					"AQAAAMIIAAAAAAAAwggAAAAAAAABAAAAIA",
					"AQAAAAAAAAABAAAAwwgAAAAAAADDCAAAAAAAAAAAAAAAAPC/"
				],
				[
					31,
					1,
					"insert_snippet",
					{
						"contents": "($0)"
					},
					"AQAAAMIIAAAAAAAAxAgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAwggAAAAAAADCCAAAAAAAAAAAAAAAAPC/"
				],
				[
					32,
					1,
					"insert",
					{
						"characters": "NOT"
					},
					"AwAAAMMIAAAAAAAAxAgAAAAAAAAAAAAAxAgAAAAAAADFCAAAAAAAAAAAAADFCAAAAAAAAMYIAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAwwgAAAAAAADDCAAAAAAAAAAAAAAAAPC/"
				],
				[
					33,
					1,
					"insert",
					{
						"characters": " VAR"
					},
					"BAAAAMYIAAAAAAAAxwgAAAAAAAAAAAAAxwgAAAAAAADICAAAAAAAAAAAAADICAAAAAAAAMkIAAAAAAAAAAAAAMkIAAAAAAAAyggAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAxggAAAAAAADGCAAAAAAAAAAAAAAAAPC/"
				],
				[
					35,
					1,
					"insert",
					{
						"characters": "\nendif"
					},
					"BgAAAMsIAAAAAAAAzAgAAAAAAAAAAAAAzAgAAAAAAADNCAAAAAAAAAAAAADNCAAAAAAAAM4IAAAAAAAAAAAAAM4IAAAAAAAAzwgAAAAAAAAAAAAAzwgAAAAAAADQCAAAAAAAAAAAAADQCAAAAAAAANEIAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAywgAAAAAAADLCAAAAAAAAAAAAAAAAPC/"
				],
				[
					36,
					1,
					"insert_snippet",
					{
						"contents": "($0)"
					},
					"AQAAANEIAAAAAAAA0wgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA0QgAAAAAAADRCAAAAAAAAAAAAAAAAPC/"
				],
				[
					37,
					1,
					"insert",
					{
						"characters": "NOT"
					},
					"AwAAANIIAAAAAAAA0wgAAAAAAAAAAAAA0wgAAAAAAADUCAAAAAAAAAAAAADUCAAAAAAAANUIAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA0ggAAAAAAADSCAAAAAAAAAAAAAAAAPC/"
				],
				[
					38,
					1,
					"insert",
					{
						"characters": " VAR"
					},
					"BAAAANUIAAAAAAAA1ggAAAAAAAAAAAAA1ggAAAAAAADXCAAAAAAAAAAAAADXCAAAAAAAANgIAAAAAAAAAAAAANgIAAAAAAAA2QgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA1QgAAAAAAADVCAAAAAAAAAAAAAAAAPC/"
				],
				[
					41,
					1,
					"insert",
					{
						"characters": "\nset"
					},
					"BAAAAMsIAAAAAAAAzAgAAAAAAAAAAAAAzAgAAAAAAADNCAAAAAAAAAAAAADNCAAAAAAAAM4IAAAAAAAAAAAAAM4IAAAAAAAAzwgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAywgAAAAAAADLCAAAAAAAAAAAAAAAgGFA"
				],
				[
					42,
					1,
					"insert",
					{
						"characters": " "
					},
					"AQAAAM8IAAAAAAAA0AgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAzwgAAAAAAADPCAAAAAAAAAAAAAAAAPC/"
				],
				[
					43,
					1,
					"left_delete",
					null,
					"AQAAAM8IAAAAAAAAzwgAAAAAAAABAAAAIA",
					"AQAAAAAAAAABAAAA0AgAAAAAAADQCAAAAAAAAAAAAAAAAPC/"
				],
				[
					44,
					1,
					"insert_snippet",
					{
						"contents": "($0)"
					},
					"AQAAAM8IAAAAAAAA0QgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAzwgAAAAAAADPCAAAAAAAAAAAAAAAAPC/"
				],
				[
					45,
					1,
					"insert",
					{
						"characters": "VAR"
					},
					"AwAAANAIAAAAAAAA0QgAAAAAAAAAAAAA0QgAAAAAAADSCAAAAAAAAAAAAADSCAAAAAAAANMIAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA0AgAAAAAAADQCAAAAAAAAAAAAAAAAPC/"
				],
				[
					46,
					1,
					"insert",
					{
						"characters": " CMAKE_C_FLAGS"
					},
					"DgAAANMIAAAAAAAA1AgAAAAAAAAAAAAA1AgAAAAAAADVCAAAAAAAAAAAAADVCAAAAAAAANYIAAAAAAAAAAAAANYIAAAAAAAA1wgAAAAAAAAAAAAA1wgAAAAAAADYCAAAAAAAAAAAAADYCAAAAAAAANkIAAAAAAAAAAAAANkIAAAAAAAA2ggAAAAAAAAAAAAA2ggAAAAAAADbCAAAAAAAAAAAAADbCAAAAAAAANwIAAAAAAAAAAAAANwIAAAAAAAA3QgAAAAAAAAAAAAA3QgAAAAAAADeCAAAAAAAAAAAAADeCAAAAAAAAN8IAAAAAAAAAAAAAN8IAAAAAAAA4AgAAAAAAAAAAAAA4AgAAAAAAADhCAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA0wgAAAAAAADTCAAAAAAAAAAAAAAAAPC/"
				],
				[
					50,
					1,
					"insert",
					{
						"characters": "  "
					},
					"AgAAAMwIAAAAAAAAzQgAAAAAAAAAAAAAzQgAAAAAAADOCAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAzAgAAAAAAADMCAAAAAAAAAAAAAAAAPC/"
				],
				[
					71,
					1,
					"left_delete",
					null,
					"AQAAANYIAAAAAAAA1ggAAAAAAAAIAAAAQ01BS0VfQ18",
					"AQAAAAAAAAABAAAA1ggAAAAAAADeCAAAAAAAAAAAAAAAAPC/"
				],
				[
					76,
					1,
					"insert",
					{
						"characters": "$"
					},
					"AgAAAEgJAAAAAAAASQkAAAAAAAAAAAAASQkAAAAAAABJCQAAAAAAAAsAAABGTEFHU19ERUJVRw",
					"AQAAAAAAAAABAAAASAkAAAAAAABTCQAAAAAAAAAAAAAAAPC/"
				],
				[
					77,
					1,
					"insert_snippet",
					{
						"contents": "{$0}"
					},
					"AQAAAEkJAAAAAAAASwkAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAASQkAAAAAAABJCQAAAAAAAAAAAAAAAPC/"
				],
				[
					78,
					1,
					"insert",
					{
						"characters": "VAR"
					},
					"AwAAAEoJAAAAAAAASwkAAAAAAAAAAAAASwkAAAAAAABMCQAAAAAAAAAAAABMCQAAAAAAAE0JAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAASgkAAAAAAABKCQAAAAAAAAAAAAAAAPC/"
				],
				[
					85,
					1,
					"paste",
					null,
					"AgAAAIMJAAAAAAAAiQkAAAAAAAAAAAAAiQkAAAAAAACJCQAAAAAAAAsAAABGTEFHU19ERUJVRw",
					"AQAAAAAAAAABAAAAgwkAAAAAAACOCQAAAAAAAAAAAAAAAPC/"
				],
				[
					88,
					1,
					"paste",
					null,
					"AgAAADEJAAAAAAAANwkAAAAAAAAAAAAANwkAAAAAAAA3CQAAAAAAAAUAAABGTEFHUw",
					"AQAAAAAAAAABAAAAMQkAAAAAAAA2CQAAAAAAAAAAAAAAAPC/"
				],
				[
					91,
					1,
					"paste",
					null,
					"AgAAAGsJAAAAAAAAcQkAAAAAAAAAAAAAcQkAAAAAAABxCQAAAAAAAAsAAABGTEFHU19ERUJVRw",
					"AQAAAAAAAAABAAAAawkAAAAAAAB2CQAAAAAAAAAAAAAAAPC/"
				],
				[
					94,
					6,
					"left_delete",
					null,
					"BgAAADwJAAAAAAAAPAkAAAAAAAABAAAARzsJAAAAAAAAOwkAAAAAAAABAAAAVToJAAAAAAAAOgkAAAAAAAABAAAAQjkJAAAAAAAAOQkAAAAAAAABAAAARTgJAAAAAAAAOAkAAAAAAAABAAAARDcJAAAAAAAANwkAAAAAAAABAAAAXw",
					"AQAAAAAAAAABAAAAPQkAAAAAAAA9CQAAAAAAAAAAAAAAAPC/"
				],
				[
					100,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAABmFQAAaW5jbHVkZShDaGVja0NDb21waWxlckZsYWcpCmluY2x1ZGUoQ2hlY2tDWFhDb21waWxlckZsYWcpCgptYWNybyhhcHBlbmRfdmFycyBTVFIpCiAgZm9yZWFjaChMICR7QVJHTn0pCiAgICBzZXQoTElTVCAiJHske0x9fSIpCiAgICBpZihOT1QgTElTVCBNQVRDSEVTICIuKiR7U1RSfS4qIikKICAgICAgaWYoIiR7TElTVH0iIFNUUkVRVUFMICIiKQogICAgICAgIHNldChMSVNUICIke1NUUn0iKQogICAgICBlbHNlKCIke0xJU1R9IiBTVFJFUVVBTCAiIikKICAgICAgICBzZXQoTElTVCAiJHtMSVNUfSAke1NUUn0iKQogICAgICBlbmRpZigiJHtMSVNUfSIgU1RSRVFVQUwgIiIpCgogICAgZW5kaWYoTk9UIExJU1QgTUFUQ0hFUyAiLioke1NUUn0uKiIpCiAgICBzdHJpbmcoUkVQTEFDRSAiOyIgIiAiIExJU1QgIiR7TElTVH0iKQogICAgIyBtZXNzYWdlKCJOZXcgdmFsdWUgZm9yICR7TH06ICR7TElTVH0iKQogICAgc2V0KCIke0x9IiAiJHtMSVNUfSIgUEFSRU5UX1NDT1BFKQogIGVuZGZvcmVhY2goTCAke0FSR059KQplbmRtYWNybyhhcHBlbmRfdmFycyBTVFIpCgpmdW5jdGlvbihjaGVja19mbGFnIEZMQUcgVkFSKQogIGlmKE5PVCBWQVIgT1IgVkFSIFNUUkVRVUFMICIiKQogICAgc3RyaW5nKFRPVVBQRVIgIiR7RkxBR30iIFRNUCkKICAgIHN0cmluZyhSRUdFWCBSRVBMQUNFICJbXjAtOUEtWmEtel0iIF8gVkFSICIke1RNUH0iKQogIGVuZGlmKE5PVCBWQVIgT1IgVkFSIFNUUkVRVUFMICIiKQogIHNldChDTUFLRV9SRVFVSVJFRF9RVUlFVCBPTikKICBjaGVja19jX2NvbXBpbGVyX2ZsYWcoIiR7RkxBR30iICIke1ZBUn0iKQogIHNldChDTUFLRV9SRVFVSVJFRF9RVUlFVCBPRkYpCgogIHNldChSRVNVTFQgIiR7JHtWQVJ9fSIpCiAgaWYoUkVTVUxUKQogICAgYXBwZW5kX3ZhcnMoJHtGTEFHfSAke0FSR059KQogICAgbWVzc2FnZShTVEFUVVMgIkNvbXBpbGVyIGZsYWcgJHtGTEFHfSAuLi4gc3VwcG9ydGVkIikKICAgICMgbWVzc2FnZSgiYXBwZW5kX3ZhcnMoJHtGTEFHfSAke0FSR059KSIpCiAgZW5kaWYoUkVTVUxUKQplbmRmdW5jdGlvbihjaGVja19mbGFnIEZMQUcgVkFSKQoKbWFjcm8oY2hlY2tfZmxhZ3MgRkxBR1MpCiAgbWVzc2FnZSgiQ2hlY2tpbmcgZmxhZ3MgJHtGTEFHU30gJHtBUkdOfSIpCiAgZm9yZWFjaChGTEFHICR7RkxBR1N9KQogICAgY2hlY2tfZmxhZygke0ZMQUd9ICIiICR7QVJHTn0pCiAgZW5kZm9yZWFjaChGTEFHICR7RkxBR1N9KQplbmRtYWNybyhjaGVja19mbGFncyBGTEFHUykKCm1hY3JvKGNoZWNrX25vd2Fybl9mbGFnIEZMQUcpCiAgY2Fub25pY2FsaXplKFZBUk5BTUUgIiR7RkxBR30iKQogIGNoZWNrX2NfY29tcGlsZXJfZmxhZygiJHtGTEFHfSIgIiR7VkFSTkFNRX0iKQogICMgZHVtcCgke1ZBUk5BTUV9KQoKICBpZigke1ZBUk5BTUV9KQogICAgc2V0KENNQUtFX0NfRkxBR1MgIiR7Q01BS0VfQ19GTEFHU30gJHtGTEFHfSIpCiAgICBzZXQoQ01BS0VfQ1hYX0ZMQUdTICIke0NNQUtFX0NYWF9GTEFHU30gJHtGTEFHfSIpCgogIGVuZGlmKCR7VkFSTkFNRX0pCmVuZG1hY3JvKGNoZWNrX25vd2Fybl9mbGFnIEZMQUcpCgptYWNybyhBRERfTk9XQVJOX0ZMQUdTKQogIHN0cmluZyhSRUdFWCBSRVBMQUNFICIgLVdhbGwiICIiIENNQUtFX0NfRkxBR1MgIiR7Q01BS0VfQ19GTEFHU30iKQogIHN0cmluZyhSRUdFWCBSRVBMQUNFICIgLVdhbGwiICIiIENNQUtFX0NYWF9GTEFHUyAiJHtDTUFLRV9DWFhfRkxBR1N9IikKCiAgbm93YXJuX2ZsYWcoLVduby11bnVzZWQtdmFsdWUpCiAgbm93YXJuX2ZsYWcoLVduby11bnVzZWQtdmFyaWFibGUpCgogIGlmKCIke0NNQUtFX0NYWF9DT01QSUxFUl9JRH0iIE1BVENIRVMgIi4qQ2xhbmcuKiIpCiAgICBub3dhcm5fZmxhZygtV25vLWRlcHJlY2F0ZWQtYW5vbi1lbnVtLWVudW0tY29udmVyc2lvbikKICAgIG5vd2Fybl9mbGFnKC1Xbm8tZXh0ZXJuLWMtY29tcGF0KQogICAgbm93YXJuX2ZsYWcoLVduby1pbXBsaWNpdC1pbnQtZmxvYXQtY29udmVyc2lvbikKICAgIG5vd2Fybl9mbGFnKC1Xbm8tZGVwcmVjYXRlZC1lbnVtLWVudW0tY29udmVyc2lvbikKICBlbmRpZigiJHtDTUFLRV9DWFhfQ09NUElMRVJfSUR9IiBNQVRDSEVTICIuKkNsYW5nLioiKQoKICAjIGR1bXAoQ01BS0VfQ19GTEFHUyBDTUFLRV9DWFhfRkxBR1MpIGR1bXAoQ01BS0VfQ1hYX0ZMQUdTX0RFQlVHKQplbmRtYWNybyhBRERfTk9XQVJOX0ZMQUdTKQoKbWFjcm8oY2hlY2tfcGljX2ZsYWcgVkFSKQppZihOT1QgVkFSKQogIHNldChWQVIgRkxBR1MpCmVuZGlmKE5PVCBWQVIpCiAgY2hlY2tfY3h4X2NvbXBpbGVyX2ZsYWcoIi1mUElDIiBGX1BJQykKICBpZihGX1BJQykKICAgIHNldChDTUFLRV9DXyR7VkFSfSAiJHtDTUFLRV9DXyR7VkFSfX0gLWZQSUMiKQogICAgc2V0KENNQUtFX0NYWF8ke1ZBUn0gIiR7Q01BS0VfQ1hYXyR7VkFSfX0gLWZQSUMiKQogIGVuZGlmKEZfUElDKQplbmRtYWNybyhjaGVja19waWNfZmxhZykKCm1hY3JvKGNoZWNrX29wdF9ub25lX2ZsYWcpCiAgY2hlY2tfY19jb21waWxlcl9mbGFnKCItTzAiIE9QVF9DX09QVF9OT05FKQogIGNoZWNrX2N4eF9jb21waWxlcl9mbGFnKCItTzAiIE9QVF9DWFhfT1BUX05PTkUpCiAgaWYoT1BUX0NfT1BUX05PTkUpCiAgICBpZihOT1QgIiR7Q01BS0VfQ19GTEFHU19ERUJVR30iIE1BVENIRVMgIi1PMCIpCiAgICAgIHNldChDTUFLRV9DX0ZMQUdTX0RFQlVHICIke0NNQUtFX0NfRkxBR1NfREVCVUd9IC1PMCIgQ0FDSEUgU1RSSU5HICJDIGNvbXBpbGVyIG9wdGlvbnMiIEZPUkNFKQogICAgZW5kaWYoTk9UICIke0NNQUtFX0NfRkxBR1NfREVCVUd9IiBNQVRDSEVTICItTzAiKQogIGVuZGlmKE9QVF9DX09QVF9OT05FKQogIGlmKE9QVF9DWFhfT1BUX05PTkUpCiAgICBpZihOT1QgIiR7Q01BS0VfQ1hYX0ZMQUdTX0RFQlVHfSIgTUFUQ0hFUyAiLU8wIikKICAgICAgc2V0KENNQUtFX0NYWF9GTEFHU19ERUJVRyAiJHtDTUFLRV9DWFhfRkxBR1NfREVCVUd9IC1PMCIgQ0FDSEUgU1RSSU5HICJDKysgY29tcGlsZXIgb3B0aW9ucyIgRk9SQ0UpCiAgICBlbmRpZihOT1QgIiR7Q01BS0VfQ1hYX0ZMQUdTX0RFQlVHfSIgTUFUQ0hFUyAiLU8wIikKICBlbmRpZihPUFRfQ1hYX09QVF9OT05FKQplbmRtYWNybyhjaGVja19vcHRfbm9uZV9mbGFnKQoKbWFjcm8oY2hlY2tfZGVidWdfZ2RiX2ZsYWcpCiAgY2hlY2tfY19jb21waWxlcl9mbGFnKCItZ2dkYiIgT1BUX0NfR19HREIpCiAgY2hlY2tfY3h4X2NvbXBpbGVyX2ZsYWcoIi1nZ2RiIiBPUFRfQ1hYX0dfR0RCKQogIGlmKE9QVF9DX0dfR0RCKQogICAgaWYoTk9UICIke0NNQUtFX0NfRkxBR1NfREVCVUd9IiBNQVRDSEVTICItZ2dkYiIpCiAgICAgIHNldChDTUFLRV9DX0ZMQUdTX0RFQlVHICIke0NNQUtFX0NfRkxBR1NfREVCVUd9IC1nZ2RiIiBDQUNIRSBTVFJJTkcgIkMgY29tcGlsZXIgb3B0aW9ucyIgRk9SQ0UpCiAgICBlbmRpZihOT1QgIiR7Q01BS0VfQ19GTEFHU19ERUJVR30iIE1BVENIRVMgIi1nZ2RiIikKICBlbmRpZihPUFRfQ19HX0dEQikKICBpZihPUFRfQ1hYX0dfR0RCKQogICAgaWYoTk9UICIke0NNQUtFX0NYWF9GTEFHU19ERUJVR30iIE1BVENIRVMgIi1nZ2RiIikKICAgICAgc2V0KENNQUtFX0NYWF9GTEFHU19ERUJVRyAiJHtDTUFLRV9DWFhfRkxBR1NfREVCVUd9IC1nZ2RiIiBDQUNIRSBTVFJJTkcgIkMrKyBjb21waWxlciBvcHRpb25zIiBGT1JDRSkKICAgIGVuZGlmKE5PVCAiJHtDTUFLRV9DWFhfRkxBR1NfREVCVUd9IiBNQVRDSEVTICItZ2dkYiIpCiAgZW5kaWYoT1BUX0NYWF9HX0dEQikKZW5kbWFjcm8oY2hlY2tfZGVidWdfZ2RiX2ZsYWcpCgptYWNybyhjaGVja19jeHhfc3RhbmRhcmRfZmxhZykKICBmb3JlYWNoKENYWF9TVEFOREFSRCBjKysyMCBjKysxNyBjKysxNCBjKysxMSkKICAgIHN0cmluZyhSRVBMQUNFICJjKysiICJDUExVU1BMVVMiIENYWF9TVEFOREFSRF9OVU0gIiR7Q1hYX1NUQU5EQVJEfSIpCiAgICBzZXQoQ01BS0VfUkVRVUlSRURfUVVJRVQgVFJVRSkKICAgIGNoZWNrX2N4eF9jb21waWxlcl9mbGFnKCItc3RkPSR7Q1hYX1NUQU5EQVJEfSIgQ1hYX1NUQU5EQVJEXyR7Q1hYX1NUQU5EQVJEX05VTX0pCiAgICBzZXQoQ01BS0VfUkVRVUlSRURfUVVJRVQgRkFMU0UpCiAgICBpZihDWFhfU1RBTkRBUkRfJHtDWFhfU1RBTkRBUkRfTlVNfSkKICAgICAgc3RyaW5nKFJFR0VYIFJFUExBQ0UgIlxcKyIgIngiIENYWF9TVEFOREFSRF9OQU1FICIke0NYWF9TVEFOREFSRF9WQUxVRX0iKQogICAgICBzdHJpbmcoVE9VUFBFUiAiJHtDWFhfU1RBTkRBUkRfTkFNRX0iIENYWF9TVEFOREFSRF9OQU1FKQogICAgICBzdHJpbmcoUkVHRVggUkVQTEFDRSAiQ1hYIiAiIiBDWFhfU1RBTkRBUkRfVkVSU0lPTiAiJHtDWFhfU1RBTkRBUkRfTkFNRX0iKQogICAgICBtZXNzYWdlKCJDWFhfU1RBTkRBUkRfTkFNRSA9ICR7Q1hYX1NUQU5EQVJEX05BTUV9IikKICAgICAgbWVzc2FnZSgiQ1hYX1NUQU5EQVJEX1ZFUlNJT04gPSAke0NYWF9TVEFOREFSRF9WRVJTSU9OfSIpCgogICAgICBpZihDWFhfU1RBTkRBUkRfTkFNRSkKICAgICAgICBhZGRfZGVmaW5pdGlvbnMoLUQiJHtDWFhfU1RBTkRBUkRfTkFNRX0iKQogICAgICBlbmRpZihDWFhfU1RBTkRBUkRfTkFNRSkKCiAgICAgIHNldChDWFhfU1RBTkRBUkRfVkFMVUUgIiR7Q1hYX1NUQU5EQVJEfSIgQ0FDSEUgU1RSSU5HICJDKysgc3RhbmRhcmQiIEZPUkNFKQogICAgICBzZXQoQ1hYX1NUQU5EQVJEX0ZMQUcgIi1zdGQ9JHtDWFhfU1RBTkRBUkR9IiBDQUNIRSBTVFJJTkcgIkMrKyBzdGFuZGFyZCBhcmd1bWVudCIgRk9SQ0UpCiAgICAgIHNldChDTUFLRV9DWFhfRkxBR1MgIiR7Q01BS0VfQ1hYX0ZMQUdTfSAke0NYWF9TVEFOREFSRF9GTEFHfSIpCiAgICAgIGJyZWFrKCkKICAgIGVuZGlmKENYWF9TVEFOREFSRF8ke0NYWF9TVEFOREFSRF9OVU19KQogIGVuZGZvcmVhY2goKQoKICBzdHJpbmcoUkVHRVggUkVQTEFDRSAiY1xcK1xcKyIgIiIgQ1hYX1NUQU5EQVJEX1ZFUlNJT04gIiR7Q1hYX1NUQU5EQVJEX1ZBTFVFfSIpCiAgYWRkX2RlZmluaXRpb25zKC1EQ1hYX1NUQU5EQVJEPSR7Q1hYX1NUQU5EQVJEX1ZFUlNJT059KQoKICBtZXNzYWdlKCJDKysgc3RhbmRhcmQ6ICR7Q1hYX1NUQU5EQVJEX1ZBTFVFfSIpCmVuZG1hY3JvKGNoZWNrX2N4eF9zdGFuZGFyZF9mbGFnKQoKbWFjcm8oY2hlY2tfbm93YXJuX2ZsYWcgRkxBRykKICBjYW5vbmljYWxpemUoVkFSTkFNRSAiJHtGTEFHfSIpCiAgY2hlY2tfY19jb21waWxlcl9mbGFnKCIke0ZMQUd9IiAiJHtWQVJOQU1FfSIpCiAgIyBkdW1wKCR7VkFSTkFNRX0pCgogIGlmKCR7VkFSTkFNRX0pCiAgICBzZXQoQ01BS0VfQ19GTEFHUyAiJHtDTUFLRV9DX0ZMQUdTfSAke0ZMQUd9IikKICAgIHNldChDTUFLRV9DWFhfRkxBR1MgIiR7Q01BS0VfQ1hYX0ZMQUdTfSAke0ZMQUd9IikKCiAgZW5kaWYoJHtWQVJOQU1FfSkKZW5kbWFjcm8oY2hlY2tfbm93YXJuX2ZsYWcgRkxBRykKAAAAAAAAAABsFQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA3QgAAAAAAADsCAAAAAAAAAAAAAAAAPC/"
				],
				[
					111,
					1,
					"insert",
					{
						"characters": "ARG"
					},
					"BAAAAMkIAAAAAAAAyggAAAAAAAAAAAAAyggAAAAAAADKCAAAAAAAAAMAAABWQVLKCAAAAAAAAMsIAAAAAAAAAAAAAMsIAAAAAAAAzAgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAyQgAAAAAAADMCAAAAAAAAAAAAAAAAPC/"
				],
				[
					117,
					1,
					"insert",
					{
						"characters": "ARG"
					},
					"BAAAAO0IAAAAAAAA7ggAAAAAAAAAAAAA7ggAAAAAAADuCAAAAAAAAAMAAABWQVLuCAAAAAAAAO8IAAAAAAAAAAAAAO8IAAAAAAAA8AgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA7QgAAAAAAADwCAAAAAAAAAAAAAAAAPC/"
				],
				[
					118,
					1,
					"insert",
					{
						"characters": "N"
					},
					"AQAAAPAIAAAAAAAA8QgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA8AgAAAAAAADwCAAAAAAAAAAAAAAAAPC/"
				],
				[
					121,
					1,
					"insert",
					{
						"characters": "N"
					},
					"AQAAAMwIAAAAAAAAzQgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAzAgAAAAAAADMCAAAAAAAAAAAAAAAAPC/"
				],
				[
					125,
					2,
					"left_delete",
					null,
					"AgAAALsIAAAAAAAAuwgAAAAAAAADAAAAVkFSuggAAAAAAAC6CAAAAAAAAAEAAAAg",
					"AQAAAAAAAAABAAAAuwgAAAAAAAC+CAAAAAAAAAAAAAAAAPC/"
				],
				[
					137,
					1,
					"cut",
					null,
					"AQAAALwIAAAAAAAAvAgAAAAAAAAPAAAAICBpZihOT1QgQVJHTikK",
					"AQAAAAAAAAABAAAAvAgAAAAAAADLCAAAAAAAAAAAAAAAAPC/"
				],
				[
					138,
					1,
					"paste",
					null,
					"AQAAALwIAAAAAAAAywgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAvAgAAAAAAAC8CAAAAAAAAAAAAAAAAPC/"
				],
				[
					140,
					1,
					"paste",
					null,
					"AQAAAN4IAAAAAAAA7QgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA3ggAAAAAAADeCAAAAAAAAAAAAAAAAAAA"
				],
				[
					144,
					1,
					"insert",
					{
						"characters": "Ese"
					},
					"BAAAAOAIAAAAAAAA4QgAAAAAAAAAAAAA4QgAAAAAAADhCAAAAAAAAAIAAABpZuEIAAAAAAAA4ggAAAAAAAAAAAAA4ggAAAAAAADjCAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA4ggAAAAAAADgCAAAAAAAAAAAAAAAAPC/"
				],
				[
					145,
					3,
					"left_delete",
					null,
					"AwAAAOIIAAAAAAAA4ggAAAAAAAABAAAAZeEIAAAAAAAA4QgAAAAAAAABAAAAc+AIAAAAAAAA4AgAAAAAAAABAAAARQ",
					"AQAAAAAAAAABAAAA4wgAAAAAAADjCAAAAAAAAAAAAAAAAPC/"
				],
				[
					146,
					1,
					"insert",
					{
						"characters": "else"
					},
					"BAAAAOAIAAAAAAAA4QgAAAAAAAAAAAAA4QgAAAAAAADiCAAAAAAAAAAAAADiCAAAAAAAAOMIAAAAAAAAAAAAAOMIAAAAAAAA5AgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA4AgAAAAAAADgCAAAAAAAAAAAAAAAAPC/"
				],
				[
					152,
					1,
					"cut",
					null,
					"AQAAAMsIAAAAAAAAywgAAAAAAAATAAAAICAgIHNldChWQVIgRkxBR1MpCg",
					"AQAAAAAAAAABAAAAywgAAAAAAADeCAAAAAAAAAAAAAAAAPC/"
				],
				[
					153,
					1,
					"paste",
					null,
					"AQAAAMsIAAAAAAAA3ggAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAywgAAAAAAADLCAAAAAAAAAAAAAAAAPC/"
				],
				[
					156,
					1,
					"paste",
					null,
					"AQAAAO8IAAAAAAAAAgkAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA7wgAAAAAAADvCAAAAAAAAAAAAAAAAPC/"
				],
				[
					160,
					1,
					"insert_snippet",
					{
						"contents": "\"${0:$SELECTION}\""
					},
					"AgAAAPsIAAAAAAAA+wgAAAAAAAAFAAAARkxBR1P7CAAAAAAAAAIJAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA+wgAAAAAAAAACQAAAAAAAAAAAAAAAPC/"
				],
				[
					161,
					1,
					"insert",
					{
						"characters": "${ARGN}]"
					},
					"CQAAAPwIAAAAAAAA/QgAAAAAAAAAAAAA/QgAAAAAAAD9CAAAAAAAAAUAAABGTEFHU/0IAAAAAAAA/ggAAAAAAAAAAAAA/ggAAAAAAAD/CAAAAAAAAAAAAAD/CAAAAAAAAAAJAAAAAAAAAAAAAAAJAAAAAAAAAQkAAAAAAAAAAAAAAQkAAAAAAAACCQAAAAAAAAAAAAACCQAAAAAAAAMJAAAAAAAAAAAAAAMJAAAAAAAABAkAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA/AgAAAAAAAABCQAAAAAAAAAAAAAAAPC/"
				],
				[
					162,
					1,
					"left_delete",
					null,
					"AQAAAAMJAAAAAAAAAwkAAAAAAAABAAAAXQ",
					"AQAAAAAAAAABAAAABAkAAAAAAAAECQAAAAAAAAAAAAAAAPC/"
				],
				[
					246,
					1,
					"insert",
					{
						"characters": "PUIC"
					},
					"BQAAANcIAAAAAAAA2AgAAAAAAAAAAAAA2AgAAAAAAADYCAAAAAAAAAUAAABGTEFHU9gIAAAAAAAA2QgAAAAAAAAAAAAA2QgAAAAAAADaCAAAAAAAAAAAAADaCAAAAAAAANsIAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA3AgAAAAAAADXCAAAAAAAAAAAAAAAAPC/"
				],
				[
					247,
					3,
					"left_delete",
					null,
					"AwAAANoIAAAAAAAA2ggAAAAAAAABAAAAQ9kIAAAAAAAA2QgAAAAAAAABAAAASdgIAAAAAAAA2AgAAAAAAAABAAAAVQ",
					"AQAAAAAAAAABAAAA2wgAAAAAAADbCAAAAAAAAAAAAAAAAPC/"
				],
				[
					248,
					1,
					"insert",
					{
						"characters": "IC_FLAG"
					},
					"BwAAANgIAAAAAAAA2QgAAAAAAAAAAAAA2QgAAAAAAADaCAAAAAAAAAAAAADaCAAAAAAAANsIAAAAAAAAAAAAANsIAAAAAAAA3AgAAAAAAAAAAAAA3AgAAAAAAADdCAAAAAAAAAAAAADdCAAAAAAAAN4IAAAAAAAAAAAAAN4IAAAAAAAA3wgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA2AgAAAAAAADYCAAAAAAAAAAAAAAAAPC/"
				],
				[
					252,
					1,
					"right_delete",
					null,
					"AQAAAFgJAAAAAAAAWAkAAAAAAAAIAAAAQ01BS0VfQ18",
					"AQAAAAAAAAABAAAAWAkAAAAAAABgCQAAAAAAAAAAAAAAAPC/"
				],
				[
					256,
					1,
					"right_delete",
					null,
					"AQAAAIIJAAAAAAAAggkAAAAAAAAKAAAAQ01BS0VfQ1hYXw",
					"AQAAAAAAAAABAAAAggkAAAAAAACMCQAAAAAAAAAAAAAAAPC/"
				],
				[
					260,
					1,
					"right_delete",
					null,
					"AQAAAGIJAAAAAAAAYgkAAAAAAAAIAAAAQ01BS0VfQ18",
					"AQAAAAAAAAABAAAAYgkAAAAAAABqCQAAAAAAAAAAAAAAAPC/"
				],
				[
					264,
					1,
					"right_delete",
					null,
					"AQAAAIQJAAAAAAAAhAkAAAAAAAAKAAAAQ01BS0VfQ1hYXw",
					"AQAAAAAAAAABAAAAhAkAAAAAAACOCQAAAAAAAAAAAAAAAPC/"
				],
				[
					267,
					1,
					"left_delete",
					null,
					"AQAAAHAJAAAAAAAAcAkAAAAAAAABAAAAKQ",
					"AQAAAAAAAAABAAAAcQkAAAAAAABxCQAAAAAAAAAAAAAAAPC/"
				],
				[
					268,
					1,
					"insert",
					{
						"characters": ")"
					},
					"AQAAAHAJAAAAAAAAcQkAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAcAkAAAAAAABwCQAAAAAAAAAAAAAAAPC/"
				],
				[
					284,
					1,
					"insert",
					{
						"characters": "F_PIC"
					},
					"BgAAAHoJAAAAAAAAewkAAAAAAAAAAAAAewkAAAAAAAB7CQAAAAAAAAYAAAAke1ZBUn17CQAAAAAAAHwJAAAAAAAAAAAAAHwJAAAAAAAAfQkAAAAAAAAAAAAAfQkAAAAAAAB+CQAAAAAAAAAAAAB+CQAAAAAAAH8JAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAegkAAAAAAACACQAAAAAAAAAAAAAAAPC/"
				],
				[
					288,
					1,
					"left_delete",
					null,
					"AQAAAIEJAAAAAAAAgQkAAAAAAAAKAAAAJHske1ZBUn19IA",
					"AQAAAAAAAAABAAAAgQkAAAAAAACLCQAAAAAAAAAAAAAAAPC/"
				]
			]
		},
		{
			"file": "cmake/JSBindings.cmake",
			"settings":
			{
				"buffer_size": 5641,
				"encoding": "UTF-8",
				"line_ending": "Unix"
			},
			"undo_stack":
			[
				[
					6,
					1,
					"left_delete",
					null,
					"AQAAABIAAAAAAAAAEgAAAAAAAAA4AAAAaW5jbHVkZSgke0NNQUtFX0NVUlJFTlRfU09VUkNFX0RJUn0vY21ha2Uvb3BlbmN2LmNtYWtlKQo",
					"AQAAAAAAAAABAAAAEgAAAAAAAABKAAAAAAAAAAAAAAAAAPC/"
				],
				[
					8,
					1,
					"left_delete",
					null,
					"AQAAAAAAAAAAAAAAAAAAAAAAAAASAAAAIyBpbmNsdWRlOiBPcGVuQ1YK",
					"AQAAAAAAAAABAAAAEgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
				],
				[
					9,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAADoEQAACmlmKFdJTjMyIE9SIE1JTkdXKQogIHNldChRVUlDS0pTX0xJQlJBUllfRElSICIke3F1aWNranNfQklOQVJZX0RJUn0iKQogIHNldChRVUlDS0pTX01PRFVMRV9ERVBFTkRFTkNJRVMgInF1aWNranMiKQplbmRpZihXSU4zMiBPUiBNSU5HVykKCnNldChRVUlDS0pTX01PRFVMRV9DRkxBR1MgIi1mdmlzaWJpbGl0eT1oaWRkZW4iKQoKZnVuY3Rpb24oY29uZmlnX3NoYXJlZF9tb2R1bGUgVEFSR0VUX05BTUUpCiAgaWYoUVVJQ0tKU19MSUJSQVJZX0RJUikKICAgIHRhcmdldF9saW5rX2RpcmVjdG9yaWVzKCR7VEFSR0VUX05BTUV9IFBSSVZBVEUgIiR7UVVJQ0tKU19MSUJSQVJZX0RJUn0iKQogIGVuZGlmKFFVSUNLSlNfTElCUkFSWV9ESVIpCiAgaWYoUVVJQ0tKU19NT0RVTEVfREVQRU5ERU5DSUVTKQogICAgdGFyZ2V0X2xpbmtfbGlicmFyaWVzKCR7VEFSR0VUX05BTUV9ICR7UVVJQ0tKU19NT0RVTEVfREVQRU5ERU5DSUVTfSkKICBlbmRpZihRVUlDS0pTX01PRFVMRV9ERVBFTkRFTkNJRVMpCiAgaWYoUVVJQ0tKU19NT0RVTEVfQ0ZMQUdTKQogICAgdGFyZ2V0X2NvbXBpbGVfb3B0aW9ucygke1RBUkdFVF9OQU1FfSBQUklWQVRFICIke1FVSUNLSlNfTU9EVUxFX0NGTEFHU30iKQogIGVuZGlmKFFVSUNLSlNfTU9EVUxFX0NGTEFHUykKZW5kZnVuY3Rpb24oY29uZmlnX3NoYXJlZF9tb2R1bGUgVEFSR0VUX05BTUUpCgpzZXQoSlNfQklORElOR1NfQ09NTU9OIGNvbG9yLmhwcCBnZW9tZXRyeS5ocHAganMuaHBwIGpzX2FsbG9jLmhwcCBqc19hcnJheS5ocHAganNfY29udG91ci5ocHAganNfbGluZS5ocHAganNfcG9pbnQuaHBwIGpzX3JlY3QuaHBwIGpzX3NpemUuaHBwIGpzX3R5cGVkX2FycmF5LmhwcCBqc2JpbmRpbmdzLmhwcCBwc2ltcGwuaHBwIHV0aWwuaHBwKQpzZXQoanNfbGluZV9TT1VSQ0VTIGxpbmUuY3BwIGxpbmUuaHBwKQoKZnVuY3Rpb24obWFrZV9zaGFyZWRfbW9kdWxlIEZOQU1FKQogIHN0cmluZyhSRUdFWCBSRVBMQUNFICJfIiAiLSIgTkFNRSAiJHtGTkFNRX0iKQogIHN0cmluZyhUT1VQUEVSICIke0ZOQU1FfSIgVU5BTUUpCgogIHNldChUQVJHRVRfTkFNRSBxdWlja2pzLSR7TkFNRX0pCgogIGlmKEFSR04pCiAgICBzZXQoU09VUkNFUyAke0FSR059KQogIGVsc2UoQVJHTikKICAgIHNldChTT1VSQ0VTIGpzXyR7Rk5BTUV9LmNwcCAke2pzXyR7Rk5BTUV9X1NPVVJDRVN9IGpzYmluZGluZ3MuY3BwIHV0aWwuY3BwIGpzLmhwcCBqcy5jcHAgJHtKU19CSU5ESU5HU19DT01NT059KQogIGVuZGlmKEFSR04pCgogIGFkZF9saWJyYXJ5KCR7VEFSR0VUX05BTUV9IFNIQVJFRCAke1NPVVJDRVN9KQoKICB0YXJnZXRfbGlua19saWJyYXJpZXMoJHtUQVJHRVRfTkFNRX0gJHtPcGVuQ1ZfTElCU30pCiAgc2V0X3RhcmdldF9wcm9wZXJ0aWVzKCR7VEFSR0VUX05BTUV9IFBST1BFUlRJRVMgUFJFRklYICIiICMgQlVJTERfUlBBVEggIiR7T1BFTkNWX0xJQlJBUllfRElSU306JHtDTUFLRV9DVVJSRU5UX0JJTkFSWV9ESVJ9IgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJQQVRIICIke09QRU5DVl9MSUJSQVJZX0RJUlN9OiR7Q01BS0VfSU5TVEFMTF9QUkVGSVh9L2xpYjoke0NNQUtFX0lOU1RBTExfUFJFRklYfS9saWIvcXVpY2tqcyIgT1VUUFVUX05BTUUgIiR7TkFNRX0iIENPTVBJTEVfRkxBR1MgIiR7UVVJQ0tKU19NT0RVTEVfQ0ZMQUdTfSIgQlVJTERfUlBBVEggIiR7Q01BS0VfQ1VSUkVOVF9CSU5BUllfRElSfToke0NNQUtFX0NVUlJFTlRfQklOQVJZX0RJUn06JHtDTUFLRV9DVVJSRU5UX0JJTkFSWV9ESVJ9L3F1aWNranM6JHtDTUFLRV9DVVJSRU5UX0JJTkFSWV9ESVJ9L3F1aWNranMiKQogIHRhcmdldF9jb21waWxlX2RlZmluaXRpb25zKCR7VEFSR0VUX05BTUV9IFBSSVZBVEUgQ09ORklHX1BSRUZJWD0iJHtDTUFLRV9JTlNUQUxMX1BSRUZJWH0iKQogIGluc3RhbGwoVEFSR0VUUyAke1RBUkdFVF9OQU1FfSBERVNUSU5BVElPTiBsaWIvcXVpY2tqcyBQRVJNSVNTSU9OUyBPV05FUl9SRUFEIE9XTkVSX1dSSVRFIE9XTkVSX0VYRUNVVEUgR1JPVVBfUkVBRCBHUk9VUF9FWEVDVVRFIFdPUkxEX1JFQUQgV09STERfRVhFQ1VURSkKCiAgY29uZmlnX3NoYXJlZF9tb2R1bGUoJHtUQVJHRVRfTkFNRX0pCgogIGlmKE9wZW5DVl9GT1VORCkKICAgIHRhcmdldF9pbmNsdWRlX2RpcmVjdG9yaWVzKCR7VEFSR0VUX05BTUV9IFBVQkxJQyAke09wZW5DVl9JTkNMVURFX0RJUlN9KQogICAgdGFyZ2V0X2xpbmtfbGlicmFyaWVzKCR7VEFSR0VUX05BTUV9ICR7T3BlbkNWX0xJQlN9KQogIGVuZGlmKCkKZW5kZnVuY3Rpb24oKQoKZnVuY3Rpb24obWFrZV9qc19iaW5kaW5ncykKICBmaWxlKEdMT0IgSlNfQklORElOR1NfU09VUkNFUyAke0NNQUtFX0NVUlJFTlRfU09VUkNFX0RJUn0vanNfKi5jcHApCgogIGZvcmVhY2goTU9EICR7SlNfQklORElOR1NfU09VUkNFU30pCiAgICBzdHJpbmcoUkVHRVggUkVQTEFDRSAiXFwuY3BwIiAiIiBNT0QgIiR7TU9EfSIpCiAgICBzdHJpbmcoUkVHRVggUkVQTEFDRSAiLiovanNfIiAiIiBNT0QgIiR7TU9EfSIpCiAgICBsaXN0KEFQUEVORCBKU19CSU5ESU5HU19NT0RVTEVTICR7TU9EfSkKICBlbmRmb3JlYWNoKE1PRCAke0pTX0JJTkRJTkdTX1NPVVJDRVN9KQoKICBmb3JlYWNoKEpTX01PRFVMRSAke0pTX0JJTkRJTkdTX01PRFVMRVN9KQogICAgbWFrZV9zaGFyZWRfbW9kdWxlKCR7SlNfTU9EVUxFfSkKICBlbmRmb3JlYWNoKCkKCiAgc3RyaW5nKFJFUExBQ0UgIjsiICIgIiBNT0RVTEVfTkFNRVMgIiR7SlNfQklORElOR1NfTU9EVUxFU30iKQogIG1lc3NhZ2UoU1RBVFVTICJDb25maWd1cmVkIG1vZHVsZXM6ICR7TU9EVUxFX05BTUVTfSIpCgogIGFkZF9kZXBlbmRlbmNpZXMocXVpY2tqcy1yZWN0IHF1aWNranMtcG9pbnQgcXVpY2tqcy1zaXplKQogICMgYWRkX2RlcGVuZGVuY2llcyhxdWlja2pzLWNvbnRvdXIgcXVpY2tqcy1tYXQgcXVpY2tqcy1yZWN0IHF1aWNranMtcG9pbnQpCgogIGFkZF9kZXBlbmRlbmNpZXMocXVpY2tqcy1jb250b3VyIHF1aWNranMtbWF0KQoKICB0YXJnZXRfbGlua19saWJyYXJpZXMocXVpY2tqcy1tYXQgcXVpY2tqcy1zaXplKQogIHRhcmdldF9saW5rX2xpYnJhcmllcyhxdWlja2pzLXBvaW50LWl0ZXJhdG9yIHF1aWNranMtbGluZSBxdWlja2pzLXBvaW50KQogIHRhcmdldF9saW5rX2xpYnJhcmllcyhxdWlja2pzLWNvbnRvdXIgcXVpY2tqcy1wb2ludC1pdGVyYXRvciBxdWlja2pzLW1hdCkKICB0YXJnZXRfbGlua19saWJyYXJpZXMocXVpY2tqcy1saW5lIHF1aWNranMtcG9pbnQpCiAgdGFyZ2V0X2xpbmtfbGlicmFyaWVzKHF1aWNranMtcmVjdCBxdWlja2pzLXNpemUgcXVpY2tqcy1wb2ludCkKICB0YXJnZXRfbGlua19saWJyYXJpZXMocXVpY2tqcy12aWRlby1jYXB0dXJlIHF1aWNranMtbWF0KQogIHRhcmdldF9saW5rX2xpYnJhcmllcyhxdWlja2pzLWN2IHF1aWNranMtbWF0IHF1aWNranMtY29udG91ciBxdWlja2pzLXJlY3QgcXVpY2tqcy1saW5lKQogIHRhcmdldF9saW5rX2xpYnJhcmllcyhxdWlja2pzLWRyYXcgcXVpY2tqcy1tYXQgcXVpY2tqcy1jb250b3VyIHF1aWNranMtc2l6ZSkKICB0YXJnZXRfbGlua19saWJyYXJpZXMocXVpY2tqcy1jbGFoZSBxdWlja2pzLW1hdCBxdWlja2pzLXNpemUpCiAgdGFyZ2V0X2xpbmtfbGlicmFyaWVzKHF1aWNranMtdW1hdCBxdWlja2pzLW1hdCkKICB0YXJnZXRfbGlua19saWJyYXJpZXMocXVpY2tqcy1zdWJkaXYyZCBxdWlja2pzLWNvbnRvdXIpCgogIHRhcmdldF9saW5rX2xpYnJhcmllcyhxdWlja2pzLWN2IHBuZykKCiAgIyBhZGRfZGVwZW5kZW5jaWVzKHF1aWNranMtcG9pbnQtaXRlcmF0b3IgcXVpY2tqcy1jb250b3VyIHF1aWNranMtbWF0KQoKICBmaWxlKEdMT0IgSlNfQklORElOR1NfU09VUkNFUyBjb2xvci5jcHAgZGF0YS5jcHAgZ2VvbWV0cnkuY3BwIGpzYmluZGluZ3MuY3BwIGpzXyouY3BwIGpzLmNwcCBsaW5lLmNwcCBtYXRyaXguY3BwIHBvbHlnb24uY3BwICouaCAqLmhwcCkKCiAgIyBNYWluCiAgYWRkX2xpYnJhcnkocXVpY2tqcy1vcGVuY3YgTU9EVUxFICR7SlNfQklORElOR1NfU09VUkNFU30pCiAgY29uZmlnX3NoYXJlZF9tb2R1bGUocXVpY2tqcy1vcGVuY3YpCgogIHNldF90YXJnZXRfcHJvcGVydGllcyhxdWlja2pzLW9wZW5jdiBQUk9QRVJUSUVTICMgQ09NUElMRV9GTEFHUyAiLWZ2aXNpYmlsaXR5PWhpZGRlbiIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSUEFUSCAiJHtPUEVOQ1ZfTElCUkFSWV9ESVJTfToke0NNQUtFX0lOU1RBTExfUFJFRklYfS9saWI6JHtDTUFLRV9JTlNUQUxMX1BSRUZJWH0vbGliL3F1aWNranMiIE9VVFBVVF9OQU1FICJvcGVuY3YiIFBSRUZJWCAiIikKICB0YXJnZXRfY29tcGlsZV9kZWZpbml0aW9ucyhxdWlja2pzLW9wZW5jdiBQUklWQVRFIC1EQ09ORklHX1BSRUZJWD1cIiR7Q01BS0VfSU5TVEFMTF9QUkVGSVh9XCIpCgogIHRhcmdldF9saW5rX2xpYnJhcmllcyhxdWlja2pzLW9wZW5jdiAke09wZW5DVl9MSUJTfSkKICAjIGxpbmsKZW5kZnVuY3Rpb24obWFrZV9qc19iaW5kaW5ncykKAAAAAAAAAADnEQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/"
				],
				[
					30,
					1,
					"cut",
					null,
					"AQAAAKADAAAAAAAAoAMAAAAAAABpBQAACmZ1bmN0aW9uKG1ha2Vfc2hhcmVkX21vZHVsZSBGTkFNRSkKICBzdHJpbmcoUkVHRVggUkVQTEFDRSAiXyIgIi0iIE5BTUUgIiR7Rk5BTUV9IikKICBzdHJpbmcoVE9VUFBFUiAiJHtGTkFNRX0iIFVOQU1FKQoKICBzZXQoVEFSR0VUX05BTUUgcXVpY2tqcy0ke05BTUV9KQoKICBpZihBUkdOKQogICAgc2V0KFNPVVJDRVMgJHtBUkdOfSkKICBlbHNlKEFSR04pCiAgICBzZXQoU09VUkNFUyBqc18ke0ZOQU1FfS5jcHAgJHtqc18ke0ZOQU1FfV9TT1VSQ0VTfSBqc2JpbmRpbmdzLmNwcCB1dGlsLmNwcCBqcy5ocHAganMuY3BwICR7SlNfQklORElOR1NfQ09NTU9OfSkKICBlbmRpZihBUkdOKQoKICBhZGRfbGlicmFyeSgke1RBUkdFVF9OQU1FfSBTSEFSRUQgJHtTT1VSQ0VTfSkKCiAgdGFyZ2V0X2xpbmtfbGlicmFyaWVzKCR7VEFSR0VUX05BTUV9ICR7T3BlbkNWX0xJQlN9KQogIHNldF90YXJnZXRfcHJvcGVydGllcygke1RBUkdFVF9OQU1FfSBQUk9QRVJUSUVTIFBSRUZJWCAiIiAjIEJVSUxEX1JQQVRIICIke09QRU5DVl9MSUJSQVJZX0RJUlN9OiR7Q01BS0VfQ1VSUkVOVF9CSU5BUllfRElSfSIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSUEFUSCAiJHtPUEVOQ1ZfTElCUkFSWV9ESVJTfToke0NNQUtFX0lOU1RBTExfUFJFRklYfS9saWI6JHtDTUFLRV9JTlNUQUxMX1BSRUZJWH0vbGliL3F1aWNranMiIE9VVFBVVF9OQU1FICIke05BTUV9IiBDT01QSUxFX0ZMQUdTICIke1FVSUNLSlNfTU9EVUxFX0NGTEFHU30iIEJVSUxEX1JQQVRIICIke0NNQUtFX0NVUlJFTlRfQklOQVJZX0RJUn06JHtDTUFLRV9DVVJSRU5UX0JJTkFSWV9ESVJ9OiR7Q01BS0VfQ1VSUkVOVF9CSU5BUllfRElSfS9xdWlja2pzOiR7Q01BS0VfQ1VSUkVOVF9CSU5BUllfRElSfS9xdWlja2pzIikKICB0YXJnZXRfY29tcGlsZV9kZWZpbml0aW9ucygke1RBUkdFVF9OQU1FfSBQUklWQVRFIENPTkZJR19QUkVGSVg9IiR7Q01BS0VfSU5TVEFMTF9QUkVGSVh9IikKICBpbnN0YWxsKFRBUkdFVFMgJHtUQVJHRVRfTkFNRX0gREVTVElOQVRJT04gbGliL3F1aWNranMgUEVSTUlTU0lPTlMgT1dORVJfUkVBRCBPV05FUl9XUklURSBPV05FUl9FWEVDVVRFIEdST1VQX1JFQUQgR1JPVVBfRVhFQ1VURSBXT1JMRF9SRUFEIFdPUkxEX0VYRUNVVEUpCgogIGNvbmZpZ19zaGFyZWRfbW9kdWxlKCR7VEFSR0VUX05BTUV9KQoKICBpZihPcGVuQ1ZfRk9VTkQpCiAgICB0YXJnZXRfaW5jbHVkZV9kaXJlY3Rvcmllcygke1RBUkdFVF9OQU1FfSBQVUJMSUMgJHtPcGVuQ1ZfSU5DTFVERV9ESVJTfSkKICAgIHRhcmdldF9saW5rX2xpYnJhcmllcygke1RBUkdFVF9OQU1FfSAke09wZW5DVl9MSUJTfSkKICBlbmRpZigpCmVuZGZ1bmN0aW9uKCk",
					"AQAAAAAAAAABAAAAoAMAAAAAAAAJCQAAAAAAAAAAAAAAAPC/"
				],
				[
					31,
					1,
					"paste",
					null,
					"AQAAAKADAAAAAAAACQkAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAoAMAAAAAAACgAwAAAAAAAAAAAAAAAPC/"
				],
				[
					32,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"AQAAAAkJAAAAAAAACgkAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAACQkAAAAAAAAJCQAAAAAAAAAAAAAAAPC/"
				],
				[
					33,
					1,
					"paste",
					null,
					"AQAAAAoJAAAAAAAAcw4AAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAACgkAAAAAAAAKCQAAAAAAAAAAAAAAAPC/"
				],
				[
					36,
					2,
					"left_delete",
					null,
					"AgAAABsJAAAAAAAAGwkAAAAAAAAEAAAAYXJlZBoJAAAAAAAAGgkAAAAAAAABAAAAaA",
					"AQAAAAAAAAABAAAAGwkAAAAAAAAfCQAAAAAAAAAAAAAAAPC/"
				],
				[
					37,
					1,
					"insert",
					{
						"characters": "tatic"
					},
					"BQAAABoJAAAAAAAAGwkAAAAAAAAAAAAAGwkAAAAAAAAcCQAAAAAAAAAAAAAcCQAAAAAAAB0JAAAAAAAAAAAAAB0JAAAAAAAAHgkAAAAAAAAAAAAAHgkAAAAAAAAfCQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAGgkAAAAAAAAaCQAAAAAAAAAAAAAAAPC/"
				],
				[
					50,
					1,
					"insert",
					{
						"characters": "STATIC"
					},
					"BwAAAHcKAAAAAAAAeAoAAAAAAAAAAAAAeAoAAAAAAAB4CgAAAAAAAAYAAABTSEFSRUR4CgAAAAAAAHkKAAAAAAAAAAAAAHkKAAAAAAAAegoAAAAAAAAAAAAAegoAAAAAAAB7CgAAAAAAAAAAAAB7CgAAAAAAAHwKAAAAAAAAAAAAAHwKAAAAAAAAfQoAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAdwoAAAAAAAB9CgAAAAAAAAAAAAAAAPC/"
				],
				[
					53,
					1,
					"insert",
					{
						"characters": "-static"
					},
					"BwAAAKMJAAAAAAAApAkAAAAAAAAAAAAApAkAAAAAAAClCQAAAAAAAAAAAAClCQAAAAAAAKYJAAAAAAAAAAAAAKYJAAAAAAAApwkAAAAAAAAAAAAApwkAAAAAAACoCQAAAAAAAAAAAACoCQAAAAAAAKkJAAAAAAAAAAAAAKkJAAAAAAAAqgkAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAowkAAAAAAACjCQAAAAAAAAAAAAAAAPC/"
				],
				[
					59,
					2,
					"left_delete",
					null,
					"AgAAAAULAAAAAAAABQsAAAAAAABCAAAAIyBCVUlMRF9SUEFUSCAiJHtPUEVOQ1ZfTElCUkFSWV9ESVJTfToke0NNQUtFX0NVUlJFTlRfQklOQVJZX0RJUn0iBAsAAAAAAAAECwAAAAAAAAEAAAAg",
					"AQAAAAAAAAABAAAABQsAAAAAAABHCwAAAAAAAAAAAAAAAPC/"
				],
				[
					76,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"BAAAAPsKAAAAAAAA/AoAAAAAAAAAAAAA/AoAAAAAAAD+CgAAAAAAAAAAAAD8CgAAAAAAAPwKAAAAAAAAAgAAACAg/AoAAAAAAAAACwAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA+woAAAAAAAD7CgAAAAAAAAAAAAAAAPC/"
				],
				[
					78,
					18,
					"unindent",
					null,
					"EgAAAAoLAAAAAAAACgsAAAAAAAACAAAAICAKCwAAAAAAAAoLAAAAAAAAAgAAACAgCgsAAAAAAAAKCwAAAAAAAAIAAAAgIAoLAAAAAAAACgsAAAAAAAACAAAAICAKCwAAAAAAAAoLAAAAAAAAAgAAACAgCgsAAAAAAAAKCwAAAAAAAAIAAAAgIAoLAAAAAAAACgsAAAAAAAACAAAAICAKCwAAAAAAAAoLAAAAAAAAAgAAACAgCgsAAAAAAAAKCwAAAAAAAAIAAAAgIAoLAAAAAAAACgsAAAAAAAACAAAAICAKCwAAAAAAAAoLAAAAAAAAAgAAACAgCgsAAAAAAAAKCwAAAAAAAAIAAAAgIAoLAAAAAAAACgsAAAAAAAACAAAAICAKCwAAAAAAAAoLAAAAAAAAAgAAACAgCgsAAAAAAAAKCwAAAAAAAAIAAAAgIAoLAAAAAAAACgsAAAAAAAACAAAAICAKCwAAAAAAAAoLAAAAAAAAAgAAACAgCgsAAAAAAAAKCwAAAAAAAAIAAAAgIA",
					"AQAAAAAAAAABAAAADgsAAAAAAAAOCwAAAAAAAAAAAAAAAERA"
				],
				[
					79,
					5,
					"unindent",
					null,
					"BQAAAAoLAAAAAAAACgsAAAAAAAACAAAAICAKCwAAAAAAAAoLAAAAAAAAAgAAACAgCgsAAAAAAAAKCwAAAAAAAAIAAAAgIAoLAAAAAAAACgsAAAAAAAACAAAAICAKCwAAAAAAAAoLAAAAAAAAAgAAACAg",
					"AQAAAAAAAAABAAAACgsAAAAAAAAKCwAAAAAAAAAAAAAAAPC/"
				],
				[
					83,
					1,
					"left_delete",
					null,
					"AQAAAGwLAAAAAAAAbAsAAAAAAAABAAAAIA",
					"AQAAAAAAAAABAAAAbQsAAAAAAABtCwAAAAAAAAAAAAAAAPC/"
				],
				[
					84,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"AgAAAGwLAAAAAAAAbQsAAAAAAAAAAAAAbQsAAAAAAABxCwAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAbAsAAAAAAABsCwAAAAAAAAAAAAAAAPC/"
				],
				[
					88,
					1,
					"left_delete",
					null,
					"AQAAAIYLAAAAAAAAhgsAAAAAAAABAAAAIA",
					"AQAAAAAAAAABAAAAhwsAAAAAAACHCwAAAAAAAAAAAAAAAPC/"
				],
				[
					89,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"AgAAAIYLAAAAAAAAhwsAAAAAAAAAAAAAhwsAAAAAAACLCwAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAhgsAAAAAAACGCwAAAAAAAAAAAAAAAPC/"
				],
				[
					92,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"AgAAALQLAAAAAAAAtQsAAAAAAAAAAAAAtQsAAAAAAAC5CwAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAtAsAAAAAAAC0CwAAAAAAAAAAAAAAAPC/"
				],
				[
					97,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"AgAAAEYMAAAAAAAARwwAAAAAAAAAAAAARwwAAAAAAABLDAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAARgwAAAAAAABGDAAAAAAAAAAAAAAAAPC/"
				],
				[
					107,
					1,
					"insert",
					{
						"characters": " "
					},
					"AgAAALULAAAAAAAAtgsAAAAAAAAAAAAAtgsAAAAAAAC2CwAAAAAAAJIAAAAgICAgQlVJTERfUlBBVEggIiR7Q01BS0VfQ1VSUkVOVF9CSU5BUllfRElSfToke0NNQUtFX0NVUlJFTlRfQklOQVJZX0RJUn06JHtDTUFLRV9DVVJSRU5UX0JJTkFSWV9ESVJ9L3F1aWNranM6JHtDTUFLRV9DVVJSRU5UX0JJTkFSWV9ESVJ9L3F1aWNranMiCg",
					"AQAAAAAAAAABAAAARwwAAAAAAAC1CwAAAAAAAAAAAAAAAPC/"
				],
				[
					117,
					1,
					"insert",
					{
						"characters": " "
					},
					"AgAAAAoLAAAAAAAACwsAAAAAAAAAAAAACwsAAAAAAAALCwAAAAAAAGMAAAAgICAgUlBBVEggIiR7T1BFTkNWX0xJQlJBUllfRElSU306JHtDTUFLRV9JTlNUQUxMX1BSRUZJWH0vbGliOiR7Q01BS0VfSU5TVEFMTF9QUkVGSVh9L2xpYi9xdWlja2pzIgo",
					"AQAAAAAAAAABAAAACgsAAAAAAABtCwAAAAAAAAAAAAAAAPC/"
				],
				[
					126,
					2,
					"left_delete",
					null,
					"AgAAAPALAAAAAAAA8AsAAAAAAABiAAAAUEVSTUlTU0lPTlMgT1dORVJfUkVBRCBPV05FUl9XUklURSBPV05FUl9FWEVDVVRFIEdST1VQX1JFQUQgR1JPVVBfRVhFQ1VURSBXT1JMRF9SRUFEIFdPUkxEX0VYRUNVVEXvCwAAAAAAAO8LAAAAAAAAAQAAACA",
					"AQAAAAAAAAABAAAA8AsAAAAAAABSDAAAAAAAAAAAAAAAAPC/"
				],
				[
					160,
					1,
					"insert",
					{
						"characters": " $"
					},
					"AgAAALgKAAAAAAAAuQoAAAAAAAAAAAAAuQoAAAAAAAC6CgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAuAoAAAAAAAC4CgAAAAAAAAAAAAAAAPC/"
				],
				[
					161,
					1,
					"insert_snippet",
					{
						"contents": "{$0}"
					},
					"AQAAALoKAAAAAAAAvAoAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAugoAAAAAAAC6CgAAAAAAAAAAAAAAAPC/"
				],
				[
					162,
					1,
					"paste",
					null,
					"AQAAALsKAAAAAAAAzwoAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAuwoAAAAAAAC7CgAAAAAAAAAAAAAAAPC/"
				],
				[
					166,
					1,
					"insert",
					{
						"characters": "${"
					},
					"AgAAAEgFAAAAAAAASQUAAAAAAAAAAAAASQUAAAAAAABKBQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAASAUAAAAAAABIBQAAAAAAAAAAAAAAAPC/"
				],
				[
					167,
					1,
					"paste",
					null,
					"AQAAAEoFAAAAAAAAXgUAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAASgUAAAAAAABKBQAAAAAAAAAAAAAAAPC/"
				],
				[
					168,
					1,
					"insert",
					{
						"characters": "}"
					},
					"AQAAAF4FAAAAAAAAXwUAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAXgUAAAAAAABeBQAAAAAAAAAAAAAAAPC/"
				],
				[
					169,
					1,
					"insert",
					{
						"characters": " "
					},
					"AQAAAF8FAAAAAAAAYAUAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAXwUAAAAAAABfBQAAAAAAAAAAAAAAAPC/"
				],
				[
					190,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAADYFQAAaWYoV0lOMzIgT1IgTUlOR1cpCiAgc2V0KFFVSUNLSlNfTElCUkFSWV9ESVIgIiR7cXVpY2tqc19CSU5BUllfRElSfSIpCiAgc2V0KFFVSUNLSlNfTU9EVUxFX0RFUEVOREVOQ0lFUyAicXVpY2tqcyIpCmVuZGlmKFdJTjMyIE9SIE1JTkdXKQoKc2V0KFFVSUNLSlNfTU9EVUxFX0NGTEFHUyAiLWZ2aXNpYmlsaXR5PWhpZGRlbiIpCgpmdW5jdGlvbihjb25maWdfc2hhcmVkX21vZHVsZSBUQVJHRVRfTkFNRSkKICBpZihRVUlDS0pTX0xJQlJBUllfRElSKQogICAgdGFyZ2V0X2xpbmtfZGlyZWN0b3JpZXMoJHtUQVJHRVRfTkFNRX0gUFJJVkFURSAiJHtRVUlDS0pTX0xJQlJBUllfRElSfSIpCiAgZW5kaWYoUVVJQ0tKU19MSUJSQVJZX0RJUikKICBpZihRVUlDS0pTX01PRFVMRV9ERVBFTkRFTkNJRVMpCiAgICB0YXJnZXRfbGlua19saWJyYXJpZXMoJHtUQVJHRVRfTkFNRX0gJHtRVUlDS0pTX01PRFVMRV9ERVBFTkRFTkNJRVN9KQogIGVuZGlmKFFVSUNLSlNfTU9EVUxFX0RFUEVOREVOQ0lFUykKICBpZihRVUlDS0pTX01PRFVMRV9DRkxBR1MpCiAgICB0YXJnZXRfY29tcGlsZV9vcHRpb25zKCR7VEFSR0VUX05BTUV9IFBSSVZBVEUgIiR7UVVJQ0tKU19NT0RVTEVfQ0ZMQUdTfSIpCiAgZW5kaWYoUVVJQ0tKU19NT0RVTEVfQ0ZMQUdTKQplbmRmdW5jdGlvbihjb25maWdfc2hhcmVkX21vZHVsZSBUQVJHRVRfTkFNRSkKCnNldChKU19CSU5ESU5HU19DT01NT04gY29sb3IuaHBwIGdlb21ldHJ5LmhwcCBqcy5ocHAganNfYWxsb2MuaHBwIGpzX2FycmF5LmhwcCBqc19jb250b3VyLmhwcCBqc19saW5lLmhwcCBqc19wb2ludC5ocHAganNfcmVjdC5ocHAganNfc2l6ZS5ocHAganNfdHlwZWRfYXJyYXkuaHBwIGpzYmluZGluZ3MuaHBwIHBzaW1wbC5ocHAgdXRpbC5ocHApCnNldChqc19saW5lX1NPVVJDRVMgbGluZS5jcHAgbGluZS5ocHApCgpmdW5jdGlvbihtYWtlX3NoYXJlZF9tb2R1bGUgRk5BTUUpCiAgc3RyaW5nKFJFR0VYIFJFUExBQ0UgIl8iICItIiBOQU1FICIke0ZOQU1FfSIpCiAgc3RyaW5nKFRPVVBQRVIgIiR7Rk5BTUV9IiBVTkFNRSkKCiAgc2V0KFRBUkdFVF9OQU1FIHF1aWNranMtJHtOQU1FfSkKCiAgaWYoQVJHTikKICAgIHNldChTT1VSQ0VTICR7QVJHTn0pCiAgZWxzZShBUkdOKQogICAgc2V0KFNPVVJDRVMganNfJHtGTkFNRX0uY3BwICR7anNfJHtGTkFNRX1fU09VUkNFU30ganNiaW5kaW5ncy5jcHAgdXRpbC5jcHAganMuaHBwIGpzLmNwcCAke0pTX0JJTkRJTkdTX0NPTU1PTn0pCiAgZW5kaWYoQVJHTikKCiAgYWRkX2xpYnJhcnkoJHtUQVJHRVRfTkFNRX0gU0hBUkVEICR7U09VUkNFU30pCgogIHRhcmdldF9saW5rX2xpYnJhcmllcygke1RBUkdFVF9OQU1FfSAke2pzYmluZGluZ3NfTElCUkFSSUVTfSAke09wZW5DVl9MSUJTfSkKICBzZXRfdGFyZ2V0X3Byb3BlcnRpZXMoJHtUQVJHRVRfTkFNRX0gUFJPUEVSVElFUyBQUkVGSVggIiIgIyBCVUlMRF9SUEFUSCAiJHtPUEVOQ1ZfTElCUkFSWV9ESVJTfToke0NNQUtFX0NVUlJFTlRfQklOQVJZX0RJUn0iCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUlBBVEggIiR7T1BFTkNWX0xJQlJBUllfRElSU306JHtDTUFLRV9JTlNUQUxMX1BSRUZJWH0vbGliOiR7Q01BS0VfSU5TVEFMTF9QUkVGSVh9L2xpYi9xdWlja2pzIiBPVVRQVVRfTkFNRSAiJHtOQU1FfSIgQ09NUElMRV9GTEFHUyAiJHtRVUlDS0pTX01PRFVMRV9DRkxBR1N9IiBCVUlMRF9SUEFUSCAiJHtDTUFLRV9DVVJSRU5UX0JJTkFSWV9ESVJ9OiR7Q01BS0VfQ1VSUkVOVF9CSU5BUllfRElSfToke0NNQUtFX0NVUlJFTlRfQklOQVJZX0RJUn0vcXVpY2tqczoke0NNQUtFX0NVUlJFTlRfQklOQVJZX0RJUn0vcXVpY2tqcyIpCiAgdGFyZ2V0X2NvbXBpbGVfZGVmaW5pdGlvbnMoJHtUQVJHRVRfTkFNRX0gUFJJVkFURSBDT05GSUdfUFJFRklYPSIke0NNQUtFX0lOU1RBTExfUFJFRklYfSIpCiAgaW5zdGFsbChUQVJHRVRTICR7VEFSR0VUX05BTUV9IERFU1RJTkFUSU9OIGxpYi9xdWlja2pzIFBFUk1JU1NJT05TIE9XTkVSX1JFQUQgT1dORVJfV1JJVEUgT1dORVJfRVhFQ1VURSBHUk9VUF9SRUFEIEdST1VQX0VYRUNVVEUgV09STERfUkVBRCBXT1JMRF9FWEVDVVRFKQoKICBjb25maWdfc2hhcmVkX21vZHVsZSgke1RBUkdFVF9OQU1FfSkKCiAgaWYoT3BlbkNWX0ZPVU5EKQogICAgdGFyZ2V0X2luY2x1ZGVfZGlyZWN0b3JpZXMoJHtUQVJHRVRfTkFNRX0gUFVCTElDICR7T3BlbkNWX0lOQ0xVREVfRElSU30pCiAgICB0YXJnZXRfbGlua19saWJyYXJpZXMoJHtUQVJHRVRfTkFNRX0gJHtPcGVuQ1ZfTElCU30pCiAgZW5kaWYoKQplbmRmdW5jdGlvbigpCgpmdW5jdGlvbihtYWtlX3N0YXRpY19tb2R1bGUgRk5BTUUpCiAgc3RyaW5nKFJFR0VYIFJFUExBQ0UgIl8iICItIiBOQU1FICIke0ZOQU1FfSIpCiAgc3RyaW5nKFRPVVBQRVIgIiR7Rk5BTUV9IiBVTkFNRSkKCiAgc2V0KFRBUkdFVF9OQU1FIHF1aWNranMtJHtOQU1FfS1zdGF0aWMpCgogIGlmKEFSR04pCiAgICBzZXQoU09VUkNFUyAke0FSR059KQogIGVsc2UoQVJHTikKICAgIHNldChTT1VSQ0VTIGpzXyR7Rk5BTUV9LmNwcCAke2pzXyR7Rk5BTUV9X1NPVVJDRVN9IGpzYmluZGluZ3MuY3BwIHV0aWwuY3BwIGpzLmhwcCBqcy5jcHAgJHtKU19CSU5ESU5HU19DT01NT059KQogIGVuZGlmKEFSR04pCgogIGFkZF9saWJyYXJ5KCR7VEFSR0VUX05BTUV9IFNUQVRJQyAke1NPVVJDRVN9KQoKICB0YXJnZXRfbGlua19saWJyYXJpZXMoJHtUQVJHRVRfTkFNRX0gJHtqc2JpbmRpbmdzX0xJQlJBUklFU30gJHtPcGVuQ1ZfTElCU30pCiAgc2V0X3RhcmdldF9wcm9wZXJ0aWVzKCR7VEFSR0VUX05BTUV9IFBST1BFUlRJRVMgCiAgICBQUkVGSVggIiIKICAgICBPVVRQVVRfTkFNRSAiJHtOQU1FfSIKICAgIENPTVBJTEVfRkxBR1MgIiR7UVVJQ0tKU19NT0RVTEVfQ0ZMQUdTfSIgCiAgICAgKQogIHRhcmdldF9jb21waWxlX2RlZmluaXRpb25zKCR7VEFSR0VUX05BTUV9IFBSSVZBVEUgQ09ORklHX1BSRUZJWD0iJHtDTUFLRV9JTlNUQUxMX1BSRUZJWH0iKQogIGluc3RhbGwoVEFSR0VUUyAke1RBUkdFVF9OQU1FfSBERVNUSU5BVElPTiBsaWIvcXVpY2tqcykKCiAgY29uZmlnX3NoYXJlZF9tb2R1bGUoJHtUQVJHRVRfTkFNRX0pCgogIGlmKE9wZW5DVl9GT1VORCkKICAgIHRhcmdldF9pbmNsdWRlX2RpcmVjdG9yaWVzKCR7VEFSR0VUX05BTUV9IFBVQkxJQyAke09wZW5DVl9JTkNMVURFX0RJUlN9KQogICAgdGFyZ2V0X2xpbmtfbGlicmFyaWVzKCR7VEFSR0VUX05BTUV9ICR7T3BlbkNWX0xJQlN9KQogIGVuZGlmKCkKZW5kZnVuY3Rpb24oKQoKZnVuY3Rpb24obWFrZV9qc19iaW5kaW5ncykKICBmaWxlKEdMT0IgSlNfQklORElOR1NfU09VUkNFUyAke0NNQUtFX0NVUlJFTlRfU09VUkNFX0RJUn0vanNfKi5jcHApCgogIGZvcmVhY2goTU9EICR7SlNfQklORElOR1NfU09VUkNFU30pCiAgICBzdHJpbmcoUkVHRVggUkVQTEFDRSAiXFwuY3BwIiAiIiBNT0QgIiR7TU9EfSIpCiAgICBzdHJpbmcoUkVHRVggUkVQTEFDRSAiLiovanNfIiAiIiBNT0QgIiR7TU9EfSIpCiAgICBsaXN0KEFQUEVORCBKU19CSU5ESU5HU19NT0RVTEVTICR7TU9EfSkKICBlbmRmb3JlYWNoKE1PRCAke0pTX0JJTkRJTkdTX1NPVVJDRVN9KQoKICBmb3JlYWNoKEpTX01PRFVMRSAke0pTX0JJTkRJTkdTX01PRFVMRVN9KQogICAgbWFrZV9zaGFyZWRfbW9kdWxlKCR7SlNfTU9EVUxFfSkKICBlbmRmb3JlYWNoKCkKCiAgc3RyaW5nKFJFUExBQ0UgIjsiICIgIiBNT0RVTEVfTkFNRVMgIiR7SlNfQklORElOR1NfTU9EVUxFU30iKQogIG1lc3NhZ2UoU1RBVFVTICJDb25maWd1cmVkIG1vZHVsZXM6ICR7TU9EVUxFX05BTUVTfSIpCgogIGFkZF9kZXBlbmRlbmNpZXMocXVpY2tqcy1yZWN0IHF1aWNranMtcG9pbnQgcXVpY2tqcy1zaXplKQogICMgYWRkX2RlcGVuZGVuY2llcyhxdWlja2pzLWNvbnRvdXIgcXVpY2tqcy1tYXQgcXVpY2tqcy1yZWN0IHF1aWNranMtcG9pbnQpCgogIGFkZF9kZXBlbmRlbmNpZXMocXVpY2tqcy1jb250b3VyIHF1aWNranMtbWF0KQoKICB0YXJnZXRfbGlua19saWJyYXJpZXMocXVpY2tqcy1tYXQgcXVpY2tqcy1zaXplKQogIHRhcmdldF9saW5rX2xpYnJhcmllcyhxdWlja2pzLXBvaW50LWl0ZXJhdG9yIHF1aWNranMtbGluZSBxdWlja2pzLXBvaW50KQogIHRhcmdldF9saW5rX2xpYnJhcmllcyhxdWlja2pzLWNvbnRvdXIgcXVpY2tqcy1wb2ludC1pdGVyYXRvciBxdWlja2pzLW1hdCkKICB0YXJnZXRfbGlua19saWJyYXJpZXMocXVpY2tqcy1saW5lIHF1aWNranMtcG9pbnQpCiAgdGFyZ2V0X2xpbmtfbGlicmFyaWVzKHF1aWNranMtcmVjdCBxdWlja2pzLXNpemUgcXVpY2tqcy1wb2ludCkKICB0YXJnZXRfbGlua19saWJyYXJpZXMocXVpY2tqcy12aWRlby1jYXB0dXJlIHF1aWNranMtbWF0KQogIHRhcmdldF9saW5rX2xpYnJhcmllcyhxdWlja2pzLWN2IHF1aWNranMtbWF0IHF1aWNranMtY29udG91ciBxdWlja2pzLXJlY3QgcXVpY2tqcy1saW5lKQogIHRhcmdldF9saW5rX2xpYnJhcmllcyhxdWlja2pzLWRyYXcgcXVpY2tqcy1tYXQgcXVpY2tqcy1jb250b3VyIHF1aWNranMtc2l6ZSkKICB0YXJnZXRfbGlua19saWJyYXJpZXMocXVpY2tqcy1jbGFoZSBxdWlja2pzLW1hdCBxdWlja2pzLXNpemUpCiAgdGFyZ2V0X2xpbmtfbGlicmFyaWVzKHF1aWNranMtdW1hdCBxdWlja2pzLW1hdCkKICB0YXJnZXRfbGlua19saWJyYXJpZXMocXVpY2tqcy1zdWJkaXYyZCBxdWlja2pzLWNvbnRvdXIpCgogIHRhcmdldF9saW5rX2xpYnJhcmllcyhxdWlja2pzLWN2IHBuZykKCiAgIyBhZGRfZGVwZW5kZW5jaWVzKHF1aWNranMtcG9pbnQtaXRlcmF0b3IgcXVpY2tqcy1jb250b3VyIHF1aWNranMtbWF0KQoKICBmaWxlKEdMT0IgSlNfQklORElOR1NfU09VUkNFUyBjb2xvci5jcHAgZGF0YS5jcHAgZ2VvbWV0cnkuY3BwIGpzYmluZGluZ3MuY3BwIGpzXyouY3BwIGpzLmNwcCBsaW5lLmNwcCBtYXRyaXguY3BwIHBvbHlnb24uY3BwICouaCAqLmhwcCkKCiAgIyBNYWluCiAgYWRkX2xpYnJhcnkocXVpY2tqcy1vcGVuY3YgTU9EVUxFICR7SlNfQklORElOR1NfU09VUkNFU30pCiAgY29uZmlnX3NoYXJlZF9tb2R1bGUocXVpY2tqcy1vcGVuY3YpCgogIHNldF90YXJnZXRfcHJvcGVydGllcyhxdWlja2pzLW9wZW5jdiBQUk9QRVJUSUVTICMgQ09NUElMRV9GTEFHUyAiLWZ2aXNpYmlsaXR5PWhpZGRlbiIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSUEFUSCAiJHtPUEVOQ1ZfTElCUkFSWV9ESVJTfToke0NNQUtFX0lOU1RBTExfUFJFRklYfS9saWI6JHtDTUFLRV9JTlNUQUxMX1BSRUZJWH0vbGliL3F1aWNranMiIE9VVFBVVF9OQU1FICJvcGVuY3YiIFBSRUZJWCAiIikKICB0YXJnZXRfY29tcGlsZV9kZWZpbml0aW9ucyhxdWlja2pzLW9wZW5jdiBQUklWQVRFIC1EQ09ORklHX1BSRUZJWD1cIiR7Q01BS0VfSU5TVEFMTF9QUkVGSVh9XCIpCgogIHRhcmdldF9saW5rX2xpYnJhcmllcyhxdWlja2pzLW9wZW5jdiAke09wZW5DVl9MSUJTfSkKICAjIGxpbmsKZW5kZnVuY3Rpb24obWFrZV9qc19iaW5kaW5ncykKAAAAAAAAAADDFQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAATgcAAAAAAACrBwAAAAAAAAAAAAAAAPC/"
				],
				[
					218,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"AgAAAJUGAAAAAAAAlgYAAAAAAAAAAAAAlgYAAAAAAADIBgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAlQYAAAAAAACVBgAAAAAAAAAAAAAAAPC/"
				],
				[
					239,
					1,
					"insert",
					{
						"characters": " JS_"
					},
					"BAAAALQHAAAAAAAAtQcAAAAAAAAAAAAAtQcAAAAAAAC2BwAAAAAAAAAAAAC2BwAAAAAAALcHAAAAAAAAAAAAALcHAAAAAAAAuAcAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAtAcAAAAAAAC0BwAAAAAAAAAAAAAAAPC/"
				],
				[
					244,
					1,
					"insert",
					{
						"characters": "$"
					},
					"AQAAALgHAAAAAAAAuQcAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAuAcAAAAAAAC4BwAAAAAAAAAAAAAAAPC/"
				],
				[
					245,
					1,
					"insert_snippet",
					{
						"contents": "{$0}"
					},
					"AQAAALkHAAAAAAAAuwcAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAuQcAAAAAAAC5BwAAAAAAAAAAAAAAAPC/"
				],
				[
					246,
					1,
					"insert",
					{
						"characters": "UNAME"
					},
					"BQAAALoHAAAAAAAAuwcAAAAAAAAAAAAAuwcAAAAAAAC8BwAAAAAAAAAAAAC8BwAAAAAAAL0HAAAAAAAAAAAAAL0HAAAAAAAAvgcAAAAAAAAAAAAAvgcAAAAAAAC/BwAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAugcAAAAAAAC6BwAAAAAAAAAAAAAAAPC/"
				],
				[
					248,
					1,
					"insert",
					{
						"characters": "_MODULE"
					},
					"BwAAAMAHAAAAAAAAwQcAAAAAAAAAAAAAwQcAAAAAAADCBwAAAAAAAAAAAADCBwAAAAAAAMMHAAAAAAAAAAAAAMMHAAAAAAAAxAcAAAAAAAAAAAAAxAcAAAAAAADFBwAAAAAAAAAAAADFBwAAAAAAAMYHAAAAAAAAAAAAAMYHAAAAAAAAxwcAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAwAcAAAAAAADABwAAAAAAAAAAAAAAAPC/"
				]
			]
		},
		{
			"file": "cmake/OpenCV.cmake",
			"settings":
			{
				"buffer_size": 6229,
				"encoding": "UTF-8",
				"line_ending": "Unix"
			},
			"undo_stack":
			[
				[
					3,
					1,
					"insert",
					{
						"characters": "F"
					},
					"AgAAACoAAAAAAAAAKwAAAAAAAAAAAAAAKwAAAAAAAAArAAAAAAAAAAEAAABm",
					"AQAAAAAAAAABAAAAKwAAAAAAAAAqAAAAAAAAAAAAAAAAAPC/"
				],
				[
					32,
					1,
					"insert",
					{
						"characters": "macro"
					},
					"BgAAADwAAAAAAAAAPQAAAAAAAAAAAAAAPQAAAAAAAAA9AAAAAAAAAAgAAABmdW5jdGlvbj0AAAAAAAAAPgAAAAAAAAAAAAAAPgAAAAAAAAA/AAAAAAAAAAAAAAA/AAAAAAAAAEAAAAAAAAAAAAAAAEAAAAAAAAAAQQAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAPAAAAAAAAABEAAAAAAAAAAAAAAAAAPC/"
				],
				[
					37,
					1,
					"insert",
					{
						"characters": "enb"
					},
					"BAAAAD8YAAAAAAAAQBgAAAAAAAAAAAAAQBgAAAAAAABAGAAAAAAAAAsAAABlbmRmdW5jdGlvbkAYAAAAAAAAQRgAAAAAAAAAAAAAQRgAAAAAAABCGAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAPxgAAAAAAABKGAAAAAAAAAAAAAAAAPC/"
				],
				[
					38,
					1,
					"left_delete",
					null,
					"AQAAAEEYAAAAAAAAQRgAAAAAAAABAAAAYg",
					"AQAAAAAAAAABAAAAQhgAAAAAAABCGAAAAAAAAAAAAAAAAPC/"
				],
				[
					39,
					1,
					"insert",
					{
						"characters": "dmacro"
					},
					"BgAAAEEYAAAAAAAAQhgAAAAAAAAAAAAAQhgAAAAAAABDGAAAAAAAAAAAAABDGAAAAAAAAEQYAAAAAAAAAAAAAEQYAAAAAAAARRgAAAAAAAAAAAAARRgAAAAAAABGGAAAAAAAAAAAAABGGAAAAAAAAEcYAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAQRgAAAAAAABBGAAAAAAAAAAAAAAAAPC/"
				]
			]
		},
		{
			"file": "cmake/FindQuickJS.cmake",
			"settings":
			{
				"buffer_size": 5441,
				"line_ending": "Unix"
			},
			"undo_stack":
			[
				[
					4,
					1,
					"insert",
					{
						"characters": "m,ac"
					},
					"BQAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAgAAABmdW5jdGlvbgEAAAAAAAAAAgAAAAAAAAAAAAAAAgAAAAAAAAADAAAAAAAAAAAAAAADAAAAAAAAAAQAAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAAAAAAAAAAAAIAAAAAAAAAAAAAAAAAPC/"
				],
				[
					5,
					3,
					"left_delete",
					null,
					"AwAAAAMAAAAAAAAAAwAAAAAAAAABAAAAYwIAAAAAAAAAAgAAAAAAAAABAAAAYQEAAAAAAAAAAQAAAAAAAAABAAAALA",
					"AQAAAAAAAAABAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAPC/"
				],
				[
					6,
					1,
					"insert",
					{
						"characters": "acro"
					},
					"BAAAAAEAAAAAAAAAAgAAAAAAAAAAAAAAAgAAAAAAAAADAAAAAAAAAAAAAAADAAAAAAAAAAQAAAAAAAAAAAAAAAQAAAAAAAAABQAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAPC/"
				],
				[
					15,
					1,
					"insert",
					{
						"characters": "enbd"
					},
					"BAAAAAIVAAAAAAAAAxUAAAAAAAAAAAAAAxUAAAAAAAAEFQAAAAAAAAAAAAAEFQAAAAAAAAUVAAAAAAAAAAAAAAUVAAAAAAAABhUAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAAhUAAAAAAAACFQAAAAAAAAAAAAAAAAAA"
				],
				[
					16,
					4,
					"left_delete",
					null,
					"BAAAAAUVAAAAAAAABRUAAAAAAAABAAAAZAQVAAAAAAAABBUAAAAAAAABAAAAYgMVAAAAAAAAAxUAAAAAAAABAAAAbgIVAAAAAAAAAhUAAAAAAAABAAAAZQ",
					"AQAAAAAAAAABAAAABhUAAAAAAAAGFQAAAAAAAAAAAAAAAPC/"
				],
				[
					20,
					1,
					"insert",
					{
						"characters": "endmacro"
					},
					"CQAAAKwLAAAAAAAArQsAAAAAAAAAAAAArQsAAAAAAACtCwAAAAAAAAsAAABlbmRmdW5jdGlvbq0LAAAAAAAArgsAAAAAAAAAAAAArgsAAAAAAACvCwAAAAAAAAAAAACvCwAAAAAAALALAAAAAAAAAAAAALALAAAAAAAAsQsAAAAAAAAAAAAAsQsAAAAAAACyCwAAAAAAAAAAAACyCwAAAAAAALMLAAAAAAAAAAAAALMLAAAAAAAAtAsAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAArAsAAAAAAAC3CwAAAAAAAAAAAAAAAPC/"
				],
				[
					48,
					1,
					"insert",
					{
						"characters": "\n\n"
					},
					"BQAAALEOAAAAAAAAsg4AAAAAAAAAAAAAsg4AAAAAAAC0DgAAAAAAAAAAAAC0DgAAAAAAALUOAAAAAAAAAAAAALUOAAAAAAAAtw4AAAAAAAAAAAAAsg4AAAAAAACyDgAAAAAAAAIAAAAgIA",
					"AQAAAAAAAAABAAAAsQ4AAAAAAACxDgAAAAAAAAAAAAAAAPC/"
				],
				[
					49,
					1,
					"paste",
					null,
					"AQAAALUOAAAAAAAAaQ8AAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAtQ4AAAAAAAC1DgAAAAAAAAAAAAAAAPC/"
				],
				[
					61,
					1,
					"paste",
					null,
					"AgAAAOcOAAAAAAAAHA8AAAAAAAAAAAAAHA8AAAAAAAAcDwAAAAAAAHQAAAAgICAgc2V0KFNPVVJDRVMganNfJHtGTkFNRX0uY3BwICR7anNfJHtGTkFNRX1fU09VUkNFU30ganNiaW5kaW5ncy5jcHAgdXRpbC5jcHAganMuaHBwIGpzLmNwcCAke0pTX0JJTkRJTkdTX0NPTU1PTn0pCg",
					"AQAAAAAAAAABAAAA5w4AAAAAAABbDwAAAAAAAAAAAAAAAPC/"
				],
				[
					64,
					1,
					"insert",
					{
						"characters": "  "
					},
					"AwAAAOkOAAAAAAAA6g4AAAAAAAAAAAAAsw4AAAAAAACzDgAAAAAAAAIAAAAgIOgOAAAAAAAA6Q4AAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA6Q4AAAAAAADpDgAAAAAAAAAAAAAAAPC/"
				],
				[
					67,
					1,
					"left_delete",
					null,
					"AQAAALIOAAAAAAAAsg4AAAAAAAABAAAACg",
					"AQAAAAAAAAABAAAAsw4AAAAAAACzDgAAAAAAAAAAAAAAAPC/"
				],
				[
					77,
					2,
					"left_delete",
					null,
					"AgAAACoPAAAAAAAAKg8AAAAAAAA1AAAAICBzZXQoU09VUkNFUyBxdWlja2pzLSR7TkFNRX0uYyAkeyR7Vk5BTUV9X1NPVVJDRVN9KQopDwAAAAAAACkPAAAAAAAAAQAAAAo",
					"AQAAAAAAAAABAAAAKg8AAAAAAABfDwAAAAAAAAAAAAAAAPC/"
				],
				[
					96,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAABBFQAAbWFjcm8oZmluZF9xdWlja2pzKQogIGluY2x1ZGUoQ2hlY2tJbmNsdWRlRmlsZSkKCiAgaWYoTk9UIFFVSUNLSlNfUFJFRklYKQogICAgc2V0KFFVSUNLSlNfUFJFRklYICIke0NNQUtFX0lOU1RBTExfUFJFRklYfSIgQ0FDSEUgUEFUSCAiUXVpY2tKUyBpbnN0YWxsIGRpcmVjdG9yeSIpCiAgZWxzZShOT1QgUVVJQ0tKU19QUkVGSVgpCiAgICBzZXQoUVVJQ0tKU19QUkVGSVggIiR7UVVJQ0tKU19QUkVGSVh9IiBDQUNIRSBQQVRIICJRdWlja0pTIGluc3RhbGwgZGlyZWN0b3J5IikKICBlbmRpZihOT1QgUVVJQ0tKU19QUkVGSVgpCgogIHNldChDTUFLRV9JTlNUQUxMX1BSRUZJWCAiJHtRVUlDS0pTX1BSRUZJWH0iIENBQ0hFIFBBVEggIkluc3RhbGwgZGlyZWN0b3J5IiBGT1JDRSkKICBzZXRfcHJvcGVydHkoQ0FDSEUgQ01BS0VfQlVJTERfVFlQRSBQUk9QRVJUWSBTVFJJTkdTIERlYnVnIFJlbGVhc2UgTWluU2l6ZVJlbCBSZWxXaXRoRGViSW5mbykKCiAgbWVzc2FnZSgiUXVpY2tKUyBpbnN0YWxsIGRpcmVjdG9yeTogJHtRVUlDS0pTX1BSRUZJWH0iKQoKICBzZXQoQ01BS0VfUkVRVUlSRURfUVVJRVQgVFJVRSkKCiAgc2V0KFFVSUNLSlNfSU5DTFVERV9ESVIgIiR7UVVJQ0tKU19QUkVGSVh9L2luY2x1ZGUvcXVpY2tqcyIpCiAgc2V0KFFVSUNLSlNfSU5DTFVERV9ESVJTICIiKQoKICBpZihFWElTVFMgIiR7UVVJQ0tKU19JTkNMVURFX0RJUn0vcXVpY2tqcy1jb25maWcuaCIpCiAgICBsaXN0KEFQUEVORCBRVUlDS0pTX0lOQ0xVREVfRElSUyAiJHtRVUlDS0pTX0lOQ0xVREVfRElSfSIpCiAgZWxzZShFWElTVFMgIiR7UVVJQ0tKU19JTkNMVURFX0RJUn0vcXVpY2tqcy1jb25maWcuaCIpCiAgICBpZihFWElTVFMgIiR7Q01BS0VfQ1VSUkVOVF9CSU5BUllfRElSfS8uLi9xdWlja2pzLWNvbmZpZy5oIikKICAgICAgbGlzdChBUFBFTkQgUVVJQ0tKU19JTkNMVURFX0RJUlMgLi4pCiAgICAgIGxpc3QoQVBQRU5EIFFVSUNLSlNfSU5DTFVERV9ESVJTICIke0NNQUtFX0NVUlJFTlRfQklOQVJZX0RJUn0vLi4iKQogICAgZWxzZShFWElTVFMgIiR7Q01BS0VfQ1VSUkVOVF9CSU5BUllfRElSfS8uLi9xdWlja2pzLWNvbmZpZy5oIikKICAgICAgaWYoRVhJU1RTICIke0NNQUtFX0NVUlJFTlRfU09VUkNFX0RJUn0vLi4vcXVpY2tqcy5oIikKICAgICAgICBmaWxlKFJFTEFUSVZFX1BBVEggUVVJQ0tKU19JTkNMVURFX0RJUiAiJHtDTUFLRV9DVVJSRU5UX0JJTkFSWV9ESVJ9IiAiJHtDTUFLRV9DVVJSRU5UX1NPVVJDRV9ESVJ9Ly4uIikKICAgICAgICBsaXN0KEFQUEVORCBRVUlDS0pTX0lOQ0xVREVfRElSUyAiJHtDTUFLRV9DVVJSRU5UX1NPVVJDRV9ESVJ9Ly4uIikKICAgICAgZWxzZShFWElTVFMgIiR7Q01BS0VfQ1VSUkVOVF9TT1VSQ0VfRElSfS8uLi9xdWlja2pzLmgiKQogICAgICAgIGlmKEVYSVNUUyAiJHtRVUlDS0pTX1BSRUZJWH0vaW5jbHVkZS9xdWlja2pzIikKICAgICAgICAgIGxpc3QoQVBQRU5EIFFVSUNLSlNfSU5DTFVERV9ESVJTICIke1FVSUNLSlNfUFJFRklYfS9pbmNsdWRlL3F1aWNranMiKQogICAgICAgIGVuZGlmKEVYSVNUUyAiJHtRVUlDS0pTX1BSRUZJWH0vaW5jbHVkZS9xdWlja2pzIikKICAgICAgZW5kaWYoRVhJU1RTICIke0NNQUtFX0NVUlJFTlRfU09VUkNFX0RJUn0vLi4vcXVpY2tqcy5oIikKICAgIGVuZGlmKEVYSVNUUyAiJHtDTUFLRV9DVVJSRU5UX0JJTkFSWV9ESVJ9Ly4uL3F1aWNranMtY29uZmlnLmgiKQogIGVuZGlmKEVYSVNUUyAiJHtRVUlDS0pTX0lOQ0xVREVfRElSfS9xdWlja2pzLWNvbmZpZy5oIikKCiAgc2V0KFFVSUNLSlNfTElCUkFSWV9ESVIgIiR7UVVJQ0tKU19QUkVGSVh9L2xpYi9xdWlja2pzIiBDQUNIRSBQQVRIICJRdWlja0pTIGxpYnJhcnkgZGlyZWN0b3J5IikKCiAgc2V0KFFVSUNLSlNfSU5DTFVERV9ESVJTICIke1FVSUNLSlNfSU5DTFVERV9ESVJTfSIgQ0FDSEUgU1RSSU5HICJRdWlja0pTIGluY2x1ZGUgZGlycyIgRk9SQ0UpCgogIHNldChDTUFLRV9SRVFVSVJFRF9JTkNMVURFUyAiJHtRVUlDS0pTX0lOQ0xVREVfRElSU30iKQoKICBjaGVja19pbmNsdWRlX2ZpbGUocXVpY2tqcy5oIEhBVkVfUVVJQ0tKU19IKQogIGNoZWNrX2luY2x1ZGVfZmlsZShxdWlja2pzLWNvbmZpZy5oIEhBVkVfUVVJQ0tKU19DT05GSUdfSCkKCiAgaWYoSEFWRV9RVUlDS0pTX0NPTkZJR19IKQogICAgIyBkdW1wKEhBVkVfUVVJQ0tKU19DT05GSUdfSCkKICAgIGFkZF9kZWZpbml0aW9ucygtREhBVkVfUVVJQ0tKU19DT05GSUdfSD0xKQogIGVuZGlmKEhBVkVfUVVJQ0tKU19DT05GSUdfSCkKCiAgaWYoTk9UIEhBVkVfUVVJQ0tKU19IKQogICAgbWVzc2FnZShGQVRBTF9FUlJPUiAiUXVpY2tKUyBoZWFkZXJzIG5vdCBmb3VuZCIpCiAgZW5kaWYoTk9UIEhBVkVfUVVJQ0tKU19IKQoKICBpbmNsdWRlX2RpcmVjdG9yaWVzKCR7UVVJQ0tKU19JTkNMVURFX0RJUlN9KQoKICBpZihIQVZFX1FVSUNLSlNfQ09ORklHX0gpCiAgICBhZGRfZGVmaW5pdGlvbnMoLURIQVZFX1FVSUNLSlNfQ09ORklHX0g9MSkKICBlbmRpZihIQVZFX1FVSUNLSlNfQ09ORklHX0gpCgogIGZpbmRfcHJvZ3JhbShRSlMgcWpzIFBBVEhTICIke0NNQUtFX0NVUlJFTlRfQklOQVJZX0RJUn0vLi4iICIke1FVSUNLSlNfUFJFRklYfS9iaW4iIEVOViBQQVRIIE5PX0RFRkFVTFRfUEFUSCkKICBmaW5kX3Byb2dyYW0oUUpTQyBxanNjIFBBVEhTICIke0NNQUtFX0NVUlJFTlRfQklOQVJZX0RJUn0vLi4iICIke1FVSUNLSlNfUFJFRklYfS9iaW4iIEVOViBQQVRIIE5PX0RFRkFVTFRfUEFUSCkKCiAgbWVzc2FnZShTVEFUVVMgIlF1aWNrSlMgaW50ZXJwcmV0ZXI6ICR7UUpTfSIpCiAgbWVzc2FnZShTVEFUVVMgIlF1aWNrSlMgY29tcGlsZXI6ICR7UUpTQ30iKQoKICBzZXQoQ1VUSUxTX0ggJHtDTUFLRV9DVVJSRU5UX1NPVVJDRV9ESVJ9Ly4uL2N1dGlscy5oKQogIHNldChRVUlDS0pTX0ggJHtDTUFLRV9DVVJSRU5UX1NPVVJDRV9ESVJ9Ly4uL3F1aWNranMuaCkKZW5kbWFjcm8oZmluZF9xdWlja2pzKQoKZnVuY3Rpb24oY29uZmlnX21vZHVsZSBUQVJHRVRfTkFNRSkKICBpZihRVUlDS0pTX0xJQlJBUllfRElSKQogICAgc2V0X3RhcmdldF9wcm9wZXJ0aWVzKCR7VEFSR0VUX05BTUV9IFBST1BFUlRJRVMgTElOS19ESVJFQ1RPUklFUyAiJHtRVUlDS0pTX0xJQlJBUllfRElSfSIpCiAgZW5kaWYoUVVJQ0tKU19MSUJSQVJZX0RJUikKICBpZihRVUlDS0pTX01PRFVMRV9ERVBFTkRFTkNJRVMpCiAgICB0YXJnZXRfbGlua19saWJyYXJpZXMoJHtUQVJHRVRfTkFNRX0gJHtRVUlDS0pTX01PRFVMRV9ERVBFTkRFTkNJRVN9KQogIGVuZGlmKFFVSUNLSlNfTU9EVUxFX0RFUEVOREVOQ0lFUykKICBpZihRVUlDS0pTX01PRFVMRV9DRkxBR1MpCiAgICB0YXJnZXRfY29tcGlsZV9vcHRpb25zKCR7VEFSR0VUX05BTUV9IFBSSVZBVEUgIiR7UVVJQ0tKU19NT0RVTEVfQ0ZMQUdTfSIpCiAgZW5kaWYoUVVJQ0tKU19NT0RVTEVfQ0ZMQUdTKQplbmRmdW5jdGlvbihjb25maWdfbW9kdWxlIFRBUkdFVF9OQU1FKQoKZnVuY3Rpb24obWFrZV9tb2R1bGUgRk5BTUUpCiAgc3RyaW5nKFJFR0VYIFJFUExBQ0UgIl8iICItIiBOQU1FICIke0ZOQU1FfSIpCiAgc3RyaW5nKFJFR0VYIFJFUExBQ0UgIi0iICJfIiBWTkFNRSAiJHtGTkFNRX0iKQogIHN0cmluZyhUT1VQUEVSICIke0ZOQU1FfSIgVVVOQU1FKQogIHN0cmluZyhSRUdFWCBSRVBMQUNFICItIiAiXyIgVU5BTUUgIiR7VVVOQU1FfSIpCgogIHNldChUQVJHRVRfTkFNRSBxanMtJHtOQU1FfSkKCiAgaWYoQVJHTikKICAgIHNldChTT1VSQ0VTICR7QVJHTn0pCiAgZWxzZShBUkdOKQogICAgc2V0KFNPVVJDRVMgcXVpY2tqcy0ke05BTUV9LmMgJHske1ZOQU1FfV9TT1VSQ0VTfSkKICBlbmRpZihBUkdOKQoKICAjIGR1bXAoVk5BTUUgJHtWTkFNRX1fU09VUkNFUykKICBhZGRfbGlicmFyeSgke1RBUkdFVF9OQU1FfSBTSEFSRUQgJHtTT1VSQ0VTfSkKICBhZGRfbGlicmFyeSgke1RBUkdFVF9OQU1FfS1zdGF0aWMgU1RBVElDICR7U09VUkNFU30pCgogIHNldF90YXJnZXRfcHJvcGVydGllcygke1RBUkdFVF9OQU1FfSBQUk9QRVJUSUVTIFBSRUZJWCAiIiBSUEFUSCAiJHtPUEVOQ1ZfTElCUkFSWV9ESVJTfToke1FVSUNLSlNfUFJFRklYfS9saWI6JHtRVUlDS0pTX1BSRUZJWH0vbGliL3F1aWNranMiIE9VVFBVVF9OQU1FICIke1ZOQU1FfSIgQlVJTERfUlBBVEggIiR7Q01BS0VfQ1VSUkVOVF9CSU5BUllfRElSfToke0NNQUtFX0NVUlJFTlRfQklOQVJZX0RJUn06JHtDTUFLRV9DVVJSRU5UX0JJTkFSWV9ESVJ9L3F1aWNranM6JHtDTUFLRV9DVVJSRU5UX0JJTkFSWV9ESVJ9L3F1aWNranMiIENPTVBJTEVfRkxBR1MgIiR7TU9EVUxFX0NPTVBJTEVfRkxBR1N9IikKICBzZXRfdGFyZ2V0X3Byb3BlcnRpZXMoJHtUQVJHRVRfTkFNRX0tc3RhdGljIFBST1BFUlRJRVMgUFJFRklYICIiIE9VVFBVVF9OQU1FICIke1ZOQU1FfSIgQ09NUElMRV9GTEFHUyAiIikKICB0YXJnZXRfY29tcGlsZV9kZWZpbml0aW9ucygke1RBUkdFVF9OQU1FfSBQUklWQVRFIEpTX1NIQVJFRF9MSUJSQVJZPTEgSlNfJHtVTkFNRX1fTU9EVUxFPTEgQ09ORklHX1BSRUZJWD0iJHtRVUlDS0pTX1BSRUZJWH0iKQogIHRhcmdldF9jb21waWxlX2RlZmluaXRpb25zKCR7VEFSR0VUX05BTUV9LXN0YXRpYyBQUklWQVRFIEpTXyR7VU5BTUV9X01PRFVMRT0xIENPTkZJR19QUkVGSVg9IiR7UVVJQ0tKU19QUkVGSVh9IikKICBpbnN0YWxsKFRBUkdFVFMgJHtUQVJHRVRfTkFNRX0gREVTVElOQVRJT04gbGliL3F1aWNranMgUEVSTUlTU0lPTlMgT1dORVJfUkVBRCBPV05FUl9XUklURSBPV05FUl9FWEVDVVRFIEdST1VQX1JFQUQgR1JPVVBfRVhFQ1VURSBXT1JMRF9SRUFEIFdPUkxEX0VYRUNVVEUpCiAgaW5zdGFsbChUQVJHRVRTICR7VEFSR0VUX05BTUV9LXN0YXRpYyBERVNUSU5BVElPTiBsaWIvcXVpY2tqcykKCiAgY29uZmlnX21vZHVsZSgke1RBUkdFVF9OQU1FfSkKZW5kZnVuY3Rpb24oKQoKZnVuY3Rpb24oY29tcGlsZV9tb2R1bGUgU09VUkNFKQogIGJhc2VuYW1lKEJBU0UgIiR7U09VUkNFfSIpCiAgYWRkX2N1c3RvbV9jb21tYW5kKE9VVFBVVCAke0NNQUtFX0NVUlJFTlRfQklOQVJZX0RJUn0vJHtCQVNFfS5jIENPTU1BTkQgc2ggLXggLWMgInFqc2MgLXYgLWMgLW8gJHtDTUFLRV9DVVJSRU5UX0JJTkFSWV9ESVJ9LyR7QkFTRX0uYyAtbSAke0NNQUtFX0NVUlJFTlRfU09VUkNFX0RJUn0vJHtTT1VSQ0V9IiBERVBFTkRTICR7UUpTQ19ERVBTfSBXT1JLSU5HX0RJUkVDVE9SWSAke0NNQUtFX0NVUlJFTlRfQklOQVJZX0RJUn0gQ09NTUVOVCAiR2VuZXJhdGUgJHtCQVNFfS5jIGZyb20gJHtTT1VSQ0V9IHVzaW5nIHFqcyBjb21waWxlciIgU09VUkNFUyAke0NNQUtFX0NVUlJFTlRfU09VUkNFX0RJUn0vJHtTT1VSQ0V9KQoKZW5kZnVuY3Rpb24oY29tcGlsZV9tb2R1bGUgU09VUkNFKQoAAAAAAAAAAFgXAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAsw8AAAAAAAAQEQAAAAAAAAAAAAAAAPC/"
				],
				[
					143,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAABYFwAAbWFjcm8oZmluZF9xdWlja2pzKQogIGluY2x1ZGUoQ2hlY2tJbmNsdWRlRmlsZSkKCiAgaWYoTk9UIFFVSUNLSlNfUFJFRklYKQogICAgc2V0KFFVSUNLSlNfUFJFRklYICIke0NNQUtFX0lOU1RBTExfUFJFRklYfSIKICAgICAgICBDQUNIRSBQQVRIICJRdWlja0pTIGluc3RhbGwgZGlyZWN0b3J5IikKICBlbHNlKE5PVCBRVUlDS0pTX1BSRUZJWCkKICAgIHNldChRVUlDS0pTX1BSRUZJWCAiJHtRVUlDS0pTX1BSRUZJWH0iIENBQ0hFIFBBVEgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJRdWlja0pTIGluc3RhbGwgZGlyZWN0b3J5IikKICBlbmRpZihOT1QgUVVJQ0tKU19QUkVGSVgpCgogIHNldChDTUFLRV9JTlNUQUxMX1BSRUZJWCAiJHtRVUlDS0pTX1BSRUZJWH0iIENBQ0hFIFBBVEggIkluc3RhbGwgZGlyZWN0b3J5IgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEZPUkNFKQogIHNldF9wcm9wZXJ0eShDQUNIRSBDTUFLRV9CVUlMRF9UWVBFIFBST1BFUlRZIFNUUklOR1MgRGVidWcgUmVsZWFzZSBNaW5TaXplUmVsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVsV2l0aERlYkluZm8pCgogIG1lc3NhZ2UoIlF1aWNrSlMgaW5zdGFsbCBkaXJlY3Rvcnk6ICR7UVVJQ0tKU19QUkVGSVh9IikKCiAgc2V0KENNQUtFX1JFUVVJUkVEX1FVSUVUIFRSVUUpCgogIHNldChRVUlDS0pTX0lOQ0xVREVfRElSICIke1FVSUNLSlNfUFJFRklYfS9pbmNsdWRlL3F1aWNranMiKQogIHNldChRVUlDS0pTX0lOQ0xVREVfRElSUyAiIikKCiAgaWYoRVhJU1RTICIke1FVSUNLSlNfSU5DTFVERV9ESVJ9L3F1aWNranMtY29uZmlnLmgiKQogICAgbGlzdChBUFBFTkQgUVVJQ0tKU19JTkNMVURFX0RJUlMgIiR7UVVJQ0tKU19JTkNMVURFX0RJUn0iKQogIGVsc2UoRVhJU1RTICIke1FVSUNLSlNfSU5DTFVERV9ESVJ9L3F1aWNranMtY29uZmlnLmgiKQogICAgaWYoRVhJU1RTICIke0NNQUtFX0NVUlJFTlRfQklOQVJZX0RJUn0vLi4vcXVpY2tqcy1jb25maWcuaCIpCiAgICAgIGxpc3QoQVBQRU5EIFFVSUNLSlNfSU5DTFVERV9ESVJTIC4uKQogICAgICBsaXN0KEFQUEVORCBRVUlDS0pTX0lOQ0xVREVfRElSUyAiJHtDTUFLRV9DVVJSRU5UX0JJTkFSWV9ESVJ9Ly4uIikKICAgIGVsc2UoRVhJU1RTICIke0NNQUtFX0NVUlJFTlRfQklOQVJZX0RJUn0vLi4vcXVpY2tqcy1jb25maWcuaCIpCiAgICAgIGlmKEVYSVNUUyAiJHtDTUFLRV9DVVJSRU5UX1NPVVJDRV9ESVJ9Ly4uL3F1aWNranMuaCIpCiAgICAgICAgZmlsZShSRUxBVElWRV9QQVRIIFFVSUNLSlNfSU5DTFVERV9ESVIgIiR7Q01BS0VfQ1VSUkVOVF9CSU5BUllfRElSfSIKICAgICAgICAgICAgICIke0NNQUtFX0NVUlJFTlRfU09VUkNFX0RJUn0vLi4iKQogICAgICAgIGxpc3QoQVBQRU5EIFFVSUNLSlNfSU5DTFVERV9ESVJTICIke0NNQUtFX0NVUlJFTlRfU09VUkNFX0RJUn0vLi4iKQogICAgICBlbHNlKEVYSVNUUyAiJHtDTUFLRV9DVVJSRU5UX1NPVVJDRV9ESVJ9Ly4uL3F1aWNranMuaCIpCiAgICAgICAgaWYoRVhJU1RTICIke1FVSUNLSlNfUFJFRklYfS9pbmNsdWRlL3F1aWNranMiKQogICAgICAgICAgbGlzdChBUFBFTkQgUVVJQ0tKU19JTkNMVURFX0RJUlMgIiR7UVVJQ0tKU19QUkVGSVh9L2luY2x1ZGUvcXVpY2tqcyIpCiAgICAgICAgZW5kaWYoRVhJU1RTICIke1FVSUNLSlNfUFJFRklYfS9pbmNsdWRlL3F1aWNranMiKQogICAgICBlbmRpZihFWElTVFMgIiR7Q01BS0VfQ1VSUkVOVF9TT1VSQ0VfRElSfS8uLi9xdWlja2pzLmgiKQogICAgZW5kaWYoRVhJU1RTICIke0NNQUtFX0NVUlJFTlRfQklOQVJZX0RJUn0vLi4vcXVpY2tqcy1jb25maWcuaCIpCiAgZW5kaWYoRVhJU1RTICIke1FVSUNLSlNfSU5DTFVERV9ESVJ9L3F1aWNranMtY29uZmlnLmgiKQoKICBzZXQoUVVJQ0tKU19MSUJSQVJZX0RJUiAiJHtRVUlDS0pTX1BSRUZJWH0vbGliL3F1aWNranMiCiAgICAgIENBQ0hFIFBBVEggIlF1aWNrSlMgbGlicmFyeSBkaXJlY3RvcnkiKQoKICBzZXQoUVVJQ0tKU19JTkNMVURFX0RJUlMgIiR7UVVJQ0tKU19JTkNMVURFX0RJUlN9IgogICAgICBDQUNIRSBTVFJJTkcgIlF1aWNrSlMgaW5jbHVkZSBkaXJzIiBGT1JDRSkKCiAgc2V0KENNQUtFX1JFUVVJUkVEX0lOQ0xVREVTICIke1FVSUNLSlNfSU5DTFVERV9ESVJTfSIpCgogIGNoZWNrX2luY2x1ZGVfZmlsZShxdWlja2pzLmggSEFWRV9RVUlDS0pTX0gpCiAgY2hlY2tfaW5jbHVkZV9maWxlKHF1aWNranMtY29uZmlnLmggSEFWRV9RVUlDS0pTX0NPTkZJR19IKQoKICBpZihIQVZFX1FVSUNLSlNfQ09ORklHX0gpCiAgICAjIGR1bXAoSEFWRV9RVUlDS0pTX0NPTkZJR19IKQogICAgYWRkX2RlZmluaXRpb25zKC1ESEFWRV9RVUlDS0pTX0NPTkZJR19IPTEpCiAgZW5kaWYoSEFWRV9RVUlDS0pTX0NPTkZJR19IKQoKICBpZihOT1QgSEFWRV9RVUlDS0pTX0gpCiAgICBtZXNzYWdlKEZBVEFMX0VSUk9SICJRdWlja0pTIGhlYWRlcnMgbm90IGZvdW5kIikKICBlbmRpZihOT1QgSEFWRV9RVUlDS0pTX0gpCgogIGluY2x1ZGVfZGlyZWN0b3JpZXMoJHtRVUlDS0pTX0lOQ0xVREVfRElSU30pCgogIGlmKEhBVkVfUVVJQ0tKU19DT05GSUdfSCkKICAgIGFkZF9kZWZpbml0aW9ucygtREhBVkVfUVVJQ0tKU19DT05GSUdfSD0xKQogIGVuZGlmKEhBVkVfUVVJQ0tKU19DT05GSUdfSCkKCiAgZmluZF9wcm9ncmFtKFFKUyBxanMgUEFUSFMgIiR7Q01BS0VfQ1VSUkVOVF9CSU5BUllfRElSfS8uLiIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiJHtRVUlDS0pTX1BSRUZJWH0vYmluIiBFTlYgUEFUSCBOT19ERUZBVUxUX1BBVEgpCiAgZmluZF9wcm9ncmFtKFFKU0MgcWpzYyBQQVRIUyAiJHtDTUFLRV9DVVJSRU5UX0JJTkFSWV9ESVJ9Ly4uIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIiR7UVVJQ0tKU19QUkVGSVh9L2JpbiIgRU5WIFBBVEggTk9fREVGQVVMVF9QQVRIKQoKICBtZXNzYWdlKFNUQVRVUyAiUXVpY2tKUyBpbnRlcnByZXRlcjogJHtRSlN9IikKICBtZXNzYWdlKFNUQVRVUyAiUXVpY2tKUyBjb21waWxlcjogJHtRSlNDfSIpCgogIHNldChDVVRJTFNfSCAke0NNQUtFX0NVUlJFTlRfU09VUkNFX0RJUn0vLi4vY3V0aWxzLmgpCiAgc2V0KFFVSUNLSlNfSCAke0NNQUtFX0NVUlJFTlRfU09VUkNFX0RJUn0vLi4vcXVpY2tqcy5oKQplbmRtYWNybyhmaW5kX3F1aWNranMpCgpmdW5jdGlvbihjb25maWdfbW9kdWxlIFRBUkdFVF9OQU1FKQogIGlmKFFVSUNLSlNfTElCUkFSWV9ESVIpCiAgICBzZXRfdGFyZ2V0X3Byb3BlcnRpZXMoJHtUQVJHRVRfTkFNRX0gUFJPUEVSVElFUyBMSU5LX0RJUkVDVE9SSUVTCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiJHtRVUlDS0pTX0xJQlJBUllfRElSfSIpCiAgZW5kaWYoUVVJQ0tKU19MSUJSQVJZX0RJUikKICBpZihRVUlDS0pTX01PRFVMRV9ERVBFTkRFTkNJRVMpCiAgICB0YXJnZXRfbGlua19saWJyYXJpZXMoJHtUQVJHRVRfTkFNRX0gJHtRVUlDS0pTX01PRFVMRV9ERVBFTkRFTkNJRVN9KQogIGVuZGlmKFFVSUNLSlNfTU9EVUxFX0RFUEVOREVOQ0lFUykKICBpZihRVUlDS0pTX01PRFVMRV9DRkxBR1MpCiAgICB0YXJnZXRfY29tcGlsZV9vcHRpb25zKCR7VEFSR0VUX05BTUV9IFBSSVZBVEUgIiR7UVVJQ0tKU19NT0RVTEVfQ0ZMQUdTfSIpCiAgZW5kaWYoUVVJQ0tKU19NT0RVTEVfQ0ZMQUdTKQplbmRmdW5jdGlvbihjb25maWdfbW9kdWxlIFRBUkdFVF9OQU1FKQoKZnVuY3Rpb24obWFrZV9tb2R1bGUgRk5BTUUpCiAgc3RyaW5nKFJFR0VYIFJFUExBQ0UgIl8iICItIiBOQU1FICIke0ZOQU1FfSIpCiAgc3RyaW5nKFJFR0VYIFJFUExBQ0UgIi0iICJfIiBWTkFNRSAiJHtGTkFNRX0iKQogIHN0cmluZyhUT1VQUEVSICIke0ZOQU1FfSIgVVVOQU1FKQogIHN0cmluZyhSRUdFWCBSRVBMQUNFICItIiAiXyIgVU5BTUUgIiR7VVVOQU1FfSIpCgogIHNldChUQVJHRVRfTkFNRSBxanMtJHtOQU1FfSkKCiAgaWYoQVJHTikKICAgIHNldChTT1VSQ0VTICR7QVJHTn0pCiAgZWxzZShBUkdOKQogICAgc2V0KFNPVVJDRVMgcXVpY2tqcy0ke05BTUV9LmMgJHske1ZOQU1FfV9TT1VSQ0VTfSkKICBlbmRpZihBUkdOKQoKICAjIGR1bXAoVk5BTUUgJHtWTkFNRX1fU09VUkNFUykKICBhZGRfbGlicmFyeSgke1RBUkdFVF9OQU1FfSBTSEFSRUQgJHtTT1VSQ0VTfSkKICBhZGRfbGlicmFyeSgke1RBUkdFVF9OQU1FfS1zdGF0aWMgU1RBVElDICR7U09VUkNFU30pCgogIHNldF90YXJnZXRfcHJvcGVydGllcygKICAgICR7VEFSR0VUX05BTUV9CiAgICBQUk9QRVJUSUVTCiAgICAgIFBSRUZJWCAiIgogICAgICBSUEFUSAogICAgICAiJHtPUEVOQ1ZfTElCUkFSWV9ESVJTfToke1FVSUNLSlNfUFJFRklYfS9saWI6JHtRVUlDS0pTX1BSRUZJWH0vbGliL3F1aWNranMiCiAgICAgIE9VVFBVVF9OQU1FICIke1ZOQU1FfSIKICAgICAgQlVJTERfUlBBVEgKICAgICAgIiR7Q01BS0VfQ1VSUkVOVF9CSU5BUllfRElSfToke0NNQUtFX0NVUlJFTlRfQklOQVJZX0RJUn06JHtDTUFLRV9DVVJSRU5UX0JJTkFSWV9ESVJ9L3F1aWNranM6JHtDTUFLRV9DVVJSRU5UX0JJTkFSWV9ESVJ9L3F1aWNranMiCiAgICAgIENPTVBJTEVfRkxBR1MgIiR7TU9EVUxFX0NPTVBJTEVfRkxBR1N9IikKICBzZXRfdGFyZ2V0X3Byb3BlcnRpZXMoCiAgICAke1RBUkdFVF9OQU1FfS1zdGF0aWMgUFJPUEVSVElFUyBQUkVGSVggIiIgT1VUUFVUX05BTUUgIiR7Vk5BTUV9IgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQ09NUElMRV9GTEFHUyAiIikKICB0YXJnZXRfY29tcGlsZV9kZWZpbml0aW9ucygKICAgICR7VEFSR0VUX05BTUV9IFBSSVZBVEUgSlNfU0hBUkVEX0xJQlJBUlk9MSBKU18ke1VOQU1FfV9NT0RVTEU9MQogICAgICAgICAgICAgICAgICAgICAgICAgICBDT05GSUdfUFJFRklYPSIke1FVSUNLSlNfUFJFRklYfSIpCiAgdGFyZ2V0X2NvbXBpbGVfZGVmaW5pdGlvbnMoCiAgICAke1RBUkdFVF9OQU1FfS1zdGF0aWMgUFJJVkFURSBKU18ke1VOQU1FfV9NT0RVTEU9MQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQ09ORklHX1BSRUZJWD0iJHtRVUlDS0pTX1BSRUZJWH0iKQogIGluc3RhbGwoVEFSR0VUUyAke1RBUkdFVF9OQU1FfSBERVNUSU5BVElPTiBsaWIvcXVpY2tqcwogICAgICAgICAgUEVSTUlTU0lPTlMgT1dORVJfUkVBRCBPV05FUl9XUklURSBPV05FUl9FWEVDVVRFIEdST1VQX1JFQUQKICAgICAgICAgICAgICAgICAgICAgIEdST1VQX0VYRUNVVEUgV09STERfUkVBRCBXT1JMRF9FWEVDVVRFKQogIGluc3RhbGwoVEFSR0VUUyAke1RBUkdFVF9OQU1FfS1zdGF0aWMgREVTVElOQVRJT04gbGliL3F1aWNranMpCgogIGNvbmZpZ19tb2R1bGUoJHtUQVJHRVRfTkFNRX0pCmVuZGZ1bmN0aW9uKCkKCmZ1bmN0aW9uKGNvbXBpbGVfbW9kdWxlIFNPVVJDRSkKICBiYXNlbmFtZShCQVNFICIke1NPVVJDRX0iKQogIGFkZF9jdXN0b21fY29tbWFuZCgKICAgIE9VVFBVVCAke0NNQUtFX0NVUlJFTlRfQklOQVJZX0RJUn0vJHtCQVNFfS5jCiAgICBDT01NQU5ECiAgICAgIHNoIC14IC1jCiAgICAgICJxanNjIC12IC1jIC1vICR7Q01BS0VfQ1VSUkVOVF9CSU5BUllfRElSfS8ke0JBU0V9LmMgLW0gJHtDTUFLRV9DVVJSRU5UX1NPVVJDRV9ESVJ9LyR7U09VUkNFfSIKICAgIERFUEVORFMgJHtRSlNDX0RFUFN9CiAgICBXT1JLSU5HX0RJUkVDVE9SWSAke0NNQUtFX0NVUlJFTlRfQklOQVJZX0RJUn0KICAgIENPTU1FTlQgIkdlbmVyYXRlICR7QkFTRX0uYyBmcm9tICR7U09VUkNFfSB1c2luZyBxanMgY29tcGlsZXIiIFNPVVJDRVMKICAgICAgICAgICAgJHtDTUFLRV9DVVJSRU5UX1NPVVJDRV9ESVJ9LyR7U09VUkNFfSkKCmVuZGZ1bmN0aW9uKGNvbXBpbGVfbW9kdWxlIFNPVVJDRSkKAAAAAAAAAABBFQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAHRMAAAAAAABhEwAAAAAAAAAAAAAAAPC/"
				]
			]
		},
		{
			"contents": "# sdl2 cmake project-config input for ./configure scripts\n\nset(prefix \"/opt/SDL2\")\nset(exec_prefix \"${prefix}\")\nset(libdir \"${exec_prefix}/lib\")\nset(SDL2_PREFIX \"/opt/SDL2\")\nset(SDL2_EXEC_PREFIX \"/opt/SDL2\")\nset(SDL2_LIBDIR \"${exec_prefix}/lib\")\nset(SDL2_INCLUDE_DIRS \"${prefix}/include/SDL2\")\nset(SDL2_LIBRARIES \"-L${SDL2_LIBDIR} -Wl,-rpath,${libdir} -Wl,--enable-new-dtags -lSDL2\")\nstring(STRIP \"${SDL2_LIBRARIES}\" SDL2_LIBRARIES)\n\nif(NOT TARGET SDL2::SDL2)\n  # Remove -lSDL2 as that is handled by CMake, note the space at the end so it does not replace e.g. -lSDL2main This may require \"libdir\" beeing set (from above)\n  string(REPLACE \"-lSDL2 \" \"\" SDL2_EXTRA_LINK_FLAGS \"-Wl,-rpath,${libdir} -Wl,--enable-new-dtags -lSDL2 \")\n  string(STRIP \"${SDL2_EXTRA_LINK_FLAGS}\" SDL2_EXTRA_LINK_FLAGS)\n  string(REPLACE \"-lSDL2 \" \"\" SDL2_EXTRA_LINK_FLAGS_STATIC \" -Wl,--no-undefined -lm -liconv -ldl -lpthread -lrt \")\n  string(STRIP \"${SDL2_EXTRA_LINK_FLAGS_STATIC}\" SDL2_EXTRA_LINK_FLAGS_STATIC)\n\n  add_library(SDL2::SDL2 SHARED IMPORTED)\n  set_target_properties(SDL2::SDL2 PROPERTIES INTERFACE_INCLUDE_DIRECTORIES \"${prefix}/include/SDL2\" IMPORTED_LINK_INTERFACE_LANGUAGES \"C\" IMPORTED_LOCATION \"${exec_prefix}/lib/${CMAKE_SHARED_LIBRARY_PREFIX}SDL2${CMAKE_SHARED_LIBRARY_SUFFIX}\" INTERFACE_LINK_LIBRARIES \"${SDL2_EXTRA_LINK_FLAGS}\")\n\n  add_library(SDL2::SDL2-static STATIC IMPORTED)\n  set_target_properties(SDL2::SDL2-static PROPERTIES INTERFACE_INCLUDE_DIRECTORIES \"${prefix}/include/SDL2\" IMPORTED_LINK_INTERFACE_LANGUAGES \"C\" IMPORTED_LOCATION \"${exec_prefix}/lib/${CMAKE_STATIC_LIBRARY_PREFIX}SDL2${CMAKE_STATIC_LIBRARY_SUFFIX}\" INTERFACE_LINK_LIBRARIES \"${SDL2_EXTRA_LINK_FLAGS_STATIC}\")\n\n  add_library(SDL2::SDL2main STATIC IMPORTED)\n  set_target_properties(SDL2::SDL2main PROPERTIES IMPORTED_LINK_INTERFACE_LANGUAGES \"C\" IMPORTED_LOCATION \"${exec_prefix}/lib/${CMAKE_STATIC_LIBRARY_PREFIX}SDL2main${CMAKE_STATIC_LIBRARY_SUFFIX}\")\nendif()\n",
			"file": "cmake/SDL2.cmake",
			"file_size": 1939,
			"file_write_time": 132653173921246264,
			"settings":
			{
				"buffer_size": 1939,
				"line_ending": "Unix"
			}
		},
		{
			"contents": "# Copyright (c) Matthew Rodusek Distributed under the OSI-approved MIT License. See accompanying file LICENSE.txt or https://opensource.org/licenses/MIT for details.\n\n# .rst: CCache\n# ------\n#\n# This module defines a simple way of enable CCache in a project, if the executable is discovered.\n#\n# This module defines the following variables:\n#\n# ``CCACHE_EXECUTABLE`` Path to the ``ccache`` executable, or ``NOTFOUND`` if it cannot be found.\n\nset(__FIND_ROOT_PATH_MODE_PROGRAM ${CMAKE_FIND_ROOT_PATH_MODE_PROGRAM})\nset(CMAKE_FIND_ROOT_PATH_MODE_PROGRAM NEVER)\n\nfind_program(CCACHE_EXECUTABLE ccache QUIET)\nmark_as_advanced(CCACHE_EXECUTABLE)\n\nset(CMAKE_FIND_ROOT_PATH_MODE_PROGRAM ${__FIND_ROOT_PATH_MODE_PROGRAM})\nset(__FIND_ROOT_PATH_MODE_PROGRAM)\n\n# .rst: .. command:: use_ccache\n#\n# This command finds and enables ccache, if able to, for a given project.\nmacro(use_ccache)\n  if(NOT CCACHE_EXECUTABLE)\n    message(FATAL_ERROR \"use_ccache: ccache not found.\")\n  endif()\n\n  if(CMAKE_VERSION VERSION_LESS 3.4)\n    # Prior to 3.4, had to use these properties Note: These may conflict with CTest\n    set_property(GLOBAL PROPERTY RULE_LAUNCH_COMPILE \"${CCACHE_EXECUTABLE}\")\n    set_property(GLOBAL PROPERTY RULE_LAUNCH_LINK \"${CCACHE_EXECUTABLE}\")\n  else()\n    # CMake 3.4 introduced 'COMPILER_LAUNCHER'\n    set(CMAKE_C_COMPILER_LAUNCHER \"${CCACHE_EXECUTABLE}\")\n    set(CMAKE_CXX_COMPILER_LAUNCHER \"${CCACHE_EXECUTABLE}\")\n  endif()\nendmacro()\n\n# .rst: .. command:: target_enable_ccache\n#\n# This command finds and enables ccache, if able to, for a given project.\n#\n# .. code-block:: cmake\n#\n# target_enable_ccache(<target>)\n#\n# The parameters are:\n#\n# ``<target>``\n# The target to enable ccache for\nfunction(target_enable_ccache target)\n  if(NOT CCACHE_EXECUTABLE)\n    message(FATAL_ERROR \"target_enable_ccache: ccache not found.\")\n  endif()\n\n  if(CMAKE_VERSION VERSION_GREATER 3.3)\n    # CMake 3.4 introduced 'COMPILER_LAUNCHER'\n    set_property(TARGET \"${target}\" PROPERTY C_COMPILER_LAUNCHER \"${CCACHE_EXECUTABLE}\")\n    set_property(TARGET \"${target}\" PROPERTY CXX_COMPILER_LAUNCHER \"${CCACHE_EXECUTABLE}\")\n  else()\n    # Prior to 3.4, had to use these properties Note: These may conflict with CTest\n    set_property(TARGET \"${target}\" PROPERTY RULE_LAUNCH_COMPILE \"${CCACHE_EXECUTABLE}\")\n    set_property(TARGET \"${target}\" PROPERTY RULE_LAUNCH_LINK \"${CCACHE_EXECUTABLE}\")\n  endif()\nendfunction()\n\nif(CCACHE_EXECUTABLE)\n  option(ENABLE_CCACHE \"Enable compiler cache\" OFF)\nendif(CCACHE_EXECUTABLE)\n\nif(ENABLE_CCACHE)\n  use_ccache()\nendif(ENABLE_CCACHE)\n",
			"file": "cmake/ccache.cmake",
			"file_size": 2552,
			"file_write_time": 132653173920766264,
			"settings":
			{
				"buffer_size": 2552,
				"line_ending": "Unix"
			}
		},
		{
			"contents": "include(CheckLibraryExists)\ninclude(CheckTypeSize)\n\nfunction(DUMP VAR)\n  string(REGEX REPLACE \"[;\\n]\" \" \" A \"${ARGV}\")\n  foreach(VAR ${ARGV})\n    message(\"  ${VAR} = ${${VAR}}\")\n  endforeach(VAR ${ARGV})\nendfunction(DUMP VAR)\n\nfunction(CANONICALIZE OUTPUT_VAR STR)\n  string(REGEX REPLACE \"^-W\" \"WARN_\" TMP_STR \"${STR}\")\n\n  string(REGEX REPLACE \"-\" \"_\" TMP_STR \"${TMP_STR}\")\n  string(TOUPPER \"${TMP_STR}\" TMP_STR)\n\n  set(\"${OUTPUT_VAR}\" \"${TMP_STR}\" PARENT_SCOPE)\nendfunction(CANONICALIZE OUTPUT_VAR STR)\n\nmacro(unset_all)\n  foreach(VAR ${ARGN})\n    unset(\"${VAR}\" PARENT_SCOPE)\n    unset(\"${VAR}\" CACHE)\n  endforeach(VAR ${ARGN})\nendmacro(unset_all)\n\nmacro(check_size TYPE VAR)\n  check_type_size(\"${TYPE}\" CMAKE_${VAR})\n  message(STATUS \"size of ${TYPE} ${CMAKE_${VAR}}\")\nendmacro(check_size TYPE VAR)\n\nmacro(find_static_library VAR NAME)\n  find_library(${VAR} NAMES lib${NAME}.a PATHS \"${CMAKE_INSTALL_PREFIX}/lib\" NO_DEFAULT_PATH)\nendmacro()\n",
			"file": "cmake/functions.cmake",
			"file_size": 944,
			"file_write_time": 132653174821566292,
			"settings":
			{
				"buffer_size": 944,
				"encoding": "UTF-8",
				"line_ending": "Unix"
			},
			"undo_stack":
			[
				[
					3,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"AQAAAFYCAAAAAAAAVwIAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAVgIAAAAAAABWAgAAAAAAAAAAAAAAAPC/"
				],
				[
					4,
					1,
					"paste",
					null,
					"AQAAAFcCAAAAAAAA7wIAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAVwIAAAAAAABXAgAAAAAAAAAAAAAAAPC/"
				],
				[
					7,
					1,
					"paste",
					null,
					"AQAAAO8CAAAAAAAAfQMAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA7wIAAAAAAADvAgAAAAAAAAAAAAAAAPC/"
				],
				[
					12,
					1,
					"left_delete",
					null,
					"AQAAAFUCAAAAAAAAVQIAAAAAAAABAAAACg",
					"AQAAAAAAAAABAAAAVgIAAAAAAABWAgAAAAAAAAAAAAAAAPC/"
				],
				[
					17,
					1,
					"paste",
					null,
					"AQAAAAAAAAAAAAAAMwAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/"
				],
				[
					18,
					1,
					"insert",
					{
						"characters": "\n$"
					},
					"AgAAADMAAAAAAAAANAAAAAAAAAAAAAAANAAAAAAAAAA1AAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAMwAAAAAAAAAzAAAAAAAAAAAAAAAAAPC/"
				],
				[
					19,
					1,
					"left_delete",
					null,
					"AQAAADQAAAAAAAAANAAAAAAAAAABAAAAJA",
					"AQAAAAAAAAABAAAANQAAAAAAAAA1AAAAAAAAAAAAAAAAAPC/"
				]
			]
		},
		{
			"contents": "include(CheckCCompilerFlag)\ninclude(CheckCXXCompilerFlag)\n\nmacro(append_vars STR)\n  foreach(L ${ARGN})\n    set(LIST \"${${L}}\")\n    if(NOT LIST MATCHES \".*${STR}.*\")\n      if(\"${LIST}\" STREQUAL \"\")\n        set(LIST \"${STR}\")\n      else(\"${LIST}\" STREQUAL \"\")\n        set(LIST \"${LIST} ${STR}\")\n      endif(\"${LIST}\" STREQUAL \"\")\n\n    endif(NOT LIST MATCHES \".*${STR}.*\")\n    string(REPLACE \";\" \" \" LIST \"${LIST}\")\n    # message(\"New value for ${L}: ${LIST}\")\n    set(\"${L}\" \"${LIST}\" PARENT_SCOPE)\n  endforeach(L ${ARGN})\nendmacro(append_vars STR)\n\nfunction(check_flag FLAG VAR)\n  if(NOT VAR OR VAR STREQUAL \"\")\n    string(TOUPPER \"${FLAG}\" TMP)\n    string(REGEX REPLACE \"[^0-9A-Za-z]\" _ VAR \"${TMP}\")\n  endif(NOT VAR OR VAR STREQUAL \"\")\n  set(CMAKE_REQUIRED_QUIET ON)\n  check_c_compiler_flag(\"${FLAG}\" \"${VAR}\")\n  set(CMAKE_REQUIRED_QUIET OFF)\n\n  set(RESULT \"${${VAR}}\")\n  if(RESULT)\n    append_vars(${FLAG} ${ARGN})\n    message(STATUS \"Compiler flag ${FLAG} ... supported\")\n    # message(\"append_vars(${FLAG} ${ARGN})\")\n  endif(RESULT)\nendfunction(check_flag FLAG VAR)\n\nmacro(check_flags FLAGS)\n  message(\"Checking flags ${FLAGS} ${ARGN}\")\n  foreach(FLAG ${FLAGS})\n    check_flag(${FLAG} \"\" ${ARGN})\n  endforeach(FLAG ${FLAGS})\nendmacro(check_flags FLAGS)\n\nmacro(check_nowarn_flag FLAG)\n  canonicalize(VARNAME \"${FLAG}\")\n  check_c_compiler_flag(\"${FLAG}\" \"${VARNAME}\")\n  # dump(${VARNAME})\n\n  if(${VARNAME})\n    set(CMAKE_C_FLAGS \"${CMAKE_C_FLAGS} ${FLAG}\")\n    set(CMAKE_CXX_FLAGS \"${CMAKE_CXX_FLAGS} ${FLAG}\")\n\n  endif(${VARNAME})\nendmacro(check_nowarn_flag FLAG)\n\nmacro(ADD_NOWARN_FLAGS)\n  string(REGEX REPLACE \" -Wall\" \"\" CMAKE_C_FLAGS \"${CMAKE_C_FLAGS}\")\n  string(REGEX REPLACE \" -Wall\" \"\" CMAKE_CXX_FLAGS \"${CMAKE_CXX_FLAGS}\")\n\n  nowarn_flag(-Wno-unused-value)\n  nowarn_flag(-Wno-unused-variable)\n\n  if(\"${CMAKE_CXX_COMPILER_ID}\" MATCHES \".*Clang.*\")\n    nowarn_flag(-Wno-deprecated-anon-enum-enum-conversion)\n    nowarn_flag(-Wno-extern-c-compat)\n    nowarn_flag(-Wno-implicit-int-float-conversion)\n    nowarn_flag(-Wno-deprecated-enum-enum-conversion)\n  endif(\"${CMAKE_CXX_COMPILER_ID}\" MATCHES \".*Clang.*\")\n\n  # dump(CMAKE_C_FLAGS CMAKE_CXX_FLAGS) dump(CMAKE_CXX_FLAGS_DEBUG)\nendmacro(ADD_NOWARN_FLAGS)\n\nmacro(check_pic_flag)\n  check_cxx_compiler_flag(\"-fPIC\" F_PIC)\n  if(F_PIC)\n    set(CMAKE_C_FLAGS_DEBUG \"${CMAKE_C_FLAGS_DEBUG} -fPIC\")\n    set(CMAKE_CXX_FLAGS_DEBUG \"${CMAKE_CXX_FLAGS_DEBUG} -fPIC\")\n  endif(F_PIC)\nendmacro(check_pic_flag)\n\nmacro(check_opt_none_flag)\n  check_c_compiler_flag(\"-O0\" OPT_C_OPT_NONE)\n  check_cxx_compiler_flag(\"-O0\" OPT_CXX_OPT_NONE)\n  if(OPT_C_OPT_NONE)\n    if(NOT \"${CMAKE_C_FLAGS_DEBUG}\" MATCHES \"-O0\")\n      set(CMAKE_C_FLAGS_DEBUG \"${CMAKE_C_FLAGS_DEBUG} -O0\" CACHE STRING \"C compiler options\" FORCE)\n    endif(NOT \"${CMAKE_C_FLAGS_DEBUG}\" MATCHES \"-O0\")\n  endif(OPT_C_OPT_NONE)\n  if(OPT_CXX_OPT_NONE)\n    if(NOT \"${CMAKE_CXX_FLAGS_DEBUG}\" MATCHES \"-O0\")\n      set(CMAKE_CXX_FLAGS_DEBUG \"${CMAKE_CXX_FLAGS_DEBUG} -O0\" CACHE STRING \"C++ compiler options\" FORCE)\n    endif(NOT \"${CMAKE_CXX_FLAGS_DEBUG}\" MATCHES \"-O0\")\n  endif(OPT_CXX_OPT_NONE)\nendmacro(check_opt_none_flag)\n\nmacro(check_debug_gdb_flag)\n  check_c_compiler_flag(\"-ggdb\" OPT_C_G_GDB)\n  check_cxx_compiler_flag(\"-ggdb\" OPT_CXX_G_GDB)\n  if(OPT_C_G_GDB)\n    if(NOT \"${CMAKE_C_FLAGS_DEBUG}\" MATCHES \"-ggdb\")\n      set(CMAKE_C_FLAGS_DEBUG \"${CMAKE_C_FLAGS_DEBUG} -ggdb\" CACHE STRING \"C compiler options\" FORCE)\n    endif(NOT \"${CMAKE_C_FLAGS_DEBUG}\" MATCHES \"-ggdb\")\n  endif(OPT_C_G_GDB)\n  if(OPT_CXX_G_GDB)\n    if(NOT \"${CMAKE_CXX_FLAGS_DEBUG}\" MATCHES \"-ggdb\")\n      set(CMAKE_CXX_FLAGS_DEBUG \"${CMAKE_CXX_FLAGS_DEBUG} -ggdb\" CACHE STRING \"C++ compiler options\" FORCE)\n    endif(NOT \"${CMAKE_CXX_FLAGS_DEBUG}\" MATCHES \"-ggdb\")\n  endif(OPT_CXX_G_GDB)\nendmacro(check_debug_gdb_flag)\n\nmacro(check_cxx_standard_flag)\n  foreach(CXX_STANDARD c++20 c++17 c++14 c++11)\n    string(REPLACE \"c++\" \"CPLUSPLUS\" CXX_STANDARD_NUM \"${CXX_STANDARD}\")\n    set(CMAKE_REQUIRED_QUIET TRUE)\n    check_cxx_compiler_flag(\"-std=${CXX_STANDARD}\" CXX_STANDARD_${CXX_STANDARD_NUM})\n    set(CMAKE_REQUIRED_QUIET FALSE)\n    if(CXX_STANDARD_${CXX_STANDARD_NUM})\n      string(REGEX REPLACE \"\\\\+\" \"x\" CXX_STANDARD_NAME \"${CXX_STANDARD_VALUE}\")\n      string(TOUPPER \"${CXX_STANDARD_NAME}\" CXX_STANDARD_NAME)\n      string(REGEX REPLACE \"CXX\" \"\" CXX_STANDARD_VERSION \"${CXX_STANDARD_NAME}\")\n      message(\"CXX_STANDARD_NAME = ${CXX_STANDARD_NAME}\")\n      message(\"CXX_STANDARD_VERSION = ${CXX_STANDARD_VERSION}\")\n\n      if(CXX_STANDARD_NAME)\n        add_definitions(-D\"${CXX_STANDARD_NAME}\")\n      endif(CXX_STANDARD_NAME)\n\n      set(CXX_STANDARD_VALUE \"${CXX_STANDARD}\" CACHE STRING \"C++ standard\" FORCE)\n      set(CXX_STANDARD_FLAG \"-std=${CXX_STANDARD}\" CACHE STRING \"C++ standard argument\" FORCE)\n      set(CMAKE_CXX_FLAGS \"${CMAKE_CXX_FLAGS} ${CXX_STANDARD_FLAG}\")\n      break()\n    endif(CXX_STANDARD_${CXX_STANDARD_NUM})\n  endforeach()\n\n  string(REGEX REPLACE \"c\\\\+\\\\+\" \"\" CXX_STANDARD_VERSION \"${CXX_STANDARD_VALUE}\")\n  add_definitions(-DCXX_STANDARD=${CXX_STANDARD_VERSION})\n\n  message(\"C++ standard: ${CXX_STANDARD_VALUE}\")\nendmacro(check_cxx_standard_flag)\n\n\nmacro(check_nowarn_flag FLAG)\n  canonicalize(VARNAME \"${FLAG}\")\n  check_c_compiler_flag(\"${FLAG}\" \"${VARNAME}\")\n  # dump(${VARNAME})\n\n  if(${VARNAME})\n    set(CMAKE_C_FLAGS \"${CMAKE_C_FLAGS} ${FLAG}\")\n    set(CMAKE_CXX_FLAGS \"${CMAKE_CXX_FLAGS} ${FLAG}\")\n\n  endif(${VARNAME})\nendmacro(check_nowarn_flag FLAG)\n",
			"file": "cmake/check-flags.cmake",
			"file_size": 5451,
			"file_write_time": 132653174935166295,
			"settings":
			{
				"buffer_size": 5451,
				"encoding": "UTF-8",
				"line_ending": "Unix"
			},
			"undo_stack":
			[
				[
					3,
					1,
					"insert",
					{
						"characters": "\nmacro"
					},
					"BgAAAG0JAAAAAAAAbgkAAAAAAAAAAAAAbgkAAAAAAABvCQAAAAAAAAAAAABvCQAAAAAAAHAJAAAAAAAAAAAAAHAJAAAAAAAAcQkAAAAAAAAAAAAAcQkAAAAAAAByCQAAAAAAAAAAAAByCQAAAAAAAHMJAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAbQkAAAAAAABtCQAAAAAAAAAAAAAAAPC/"
				],
				[
					4,
					1,
					"insert_snippet",
					{
						"contents": "($0)"
					},
					"AQAAAHMJAAAAAAAAdQkAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAcwkAAAAAAABzCQAAAAAAAAAAAAAAAPC/"
				],
				[
					6,
					1,
					"left_delete",
					null,
					"AQAAAHQJAAAAAAAAdAkAAAAAAAABAAAAKQ",
					"AQAAAAAAAAABAAAAdQkAAAAAAAB1CQAAAAAAAAAAAAAAAPC/"
				],
				[
					7,
					1,
					"insert",
					{
						"characters": "chec"
					},
					"BAAAAHQJAAAAAAAAdQkAAAAAAAAAAAAAdQkAAAAAAAB2CQAAAAAAAAAAAAB2CQAAAAAAAHcJAAAAAAAAAAAAAHcJAAAAAAAAeAkAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAdAkAAAAAAAB0CQAAAAAAAAAAAAAAAPC/"
				],
				[
					8,
					1,
					"left_delete",
					null,
					"AQAAAHcJAAAAAAAAdwkAAAAAAAABAAAAYw",
					"AQAAAAAAAAABAAAAeAkAAAAAAAB4CQAAAAAAAAAAAAAAAPC/"
				],
				[
					9,
					1,
					"insert",
					{
						"characters": "ck_opt_o0"
					},
					"CQAAAHcJAAAAAAAAeAkAAAAAAAAAAAAAeAkAAAAAAAB5CQAAAAAAAAAAAAB5CQAAAAAAAHoJAAAAAAAAAAAAAHoJAAAAAAAAewkAAAAAAAAAAAAAewkAAAAAAAB8CQAAAAAAAAAAAAB8CQAAAAAAAH0JAAAAAAAAAAAAAH0JAAAAAAAAfgkAAAAAAAAAAAAAfgkAAAAAAAB/CQAAAAAAAAAAAAB/CQAAAAAAAIAJAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAdwkAAAAAAAB3CQAAAAAAAAAAAAAAAPC/"
				],
				[
					10,
					2,
					"left_delete",
					null,
					"AgAAAH8JAAAAAAAAfwkAAAAAAAABAAAAMH4JAAAAAAAAfgkAAAAAAAABAAAAbw",
					"AQAAAAAAAAABAAAAgAkAAAAAAACACQAAAAAAAAAAAAAAAPC/"
				],
				[
					11,
					1,
					"insert",
					{
						"characters": "none_flag)"
					},
					"CgAAAH4JAAAAAAAAfwkAAAAAAAAAAAAAfwkAAAAAAACACQAAAAAAAAAAAACACQAAAAAAAIEJAAAAAAAAAAAAAIEJAAAAAAAAggkAAAAAAAAAAAAAggkAAAAAAACDCQAAAAAAAAAAAACDCQAAAAAAAIQJAAAAAAAAAAAAAIQJAAAAAAAAhQkAAAAAAAAAAAAAhQkAAAAAAACGCQAAAAAAAAAAAACGCQAAAAAAAIcJAAAAAAAAAAAAAIcJAAAAAAAAiAkAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAfgkAAAAAAAB+CQAAAAAAAAAAAAAAAPC/"
				],
				[
					12,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"AQAAAIgJAAAAAAAAiQkAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAiAkAAAAAAACICQAAAAAAAAAAAAAAAPC/"
				],
				[
					13,
					1,
					"paste",
					null,
					"AQAAAIkJAAAAAAAAFQwAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAiQkAAAAAAACJCQAAAAAAAAAAAAAAAPC/"
				],
				[
					22,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"AQAAABUMAAAAAAAAFgwAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAFQwAAAAAAAAVDAAAAAAAAAAAAAAAAPC/"
				],
				[
					23,
					1,
					"paste",
					null,
					"AQAAABYMAAAAAAAAMQwAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAFgwAAAAAAAAWDAAAAAAAAAAAAAAAAPC/"
				],
				[
					25,
					1,
					"insert",
					{
						"characters": "end"
					},
					"AwAAABYMAAAAAAAAFwwAAAAAAAAAAAAAFwwAAAAAAAAYDAAAAAAAAAAAAAAYDAAAAAAAABkMAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAFgwAAAAAAAAWDAAAAAAAAAAAAAAAAAAA"
				],
				[
					32,
					1,
					"insert",
					{
						"characters": "\n\nmacro"
					},
					"BwAAADQMAAAAAAAANQwAAAAAAAAAAAAANQwAAAAAAAA2DAAAAAAAAAAAAAA2DAAAAAAAADcMAAAAAAAAAAAAADcMAAAAAAAAOAwAAAAAAAAAAAAAOAwAAAAAAAA5DAAAAAAAAAAAAAA5DAAAAAAAADoMAAAAAAAAAAAAADoMAAAAAAAAOwwAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAANAwAAAAAAAA0DAAAAAAAAAAAAAAAAPC/"
				],
				[
					33,
					1,
					"insert_snippet",
					{
						"contents": "($0)"
					},
					"AQAAADsMAAAAAAAAPQwAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAOwwAAAAAAAA7DAAAAAAAAAAAAAAAAPC/"
				],
				[
					34,
					1,
					"insert",
					{
						"characters": "d"
					},
					"AQAAADwMAAAAAAAAPQwAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAPAwAAAAAAAA8DAAAAAAAAAAAAAAAAPC/"
				],
				[
					35,
					1,
					"left_delete",
					null,
					"AQAAADwMAAAAAAAAPAwAAAAAAAABAAAAZA",
					"AQAAAAAAAAABAAAAPQwAAAAAAAA9DAAAAAAAAAAAAAAAAPC/"
				],
				[
					36,
					1,
					"insert",
					{
						"characters": "cjhec"
					},
					"BQAAADwMAAAAAAAAPQwAAAAAAAAAAAAAPQwAAAAAAAA+DAAAAAAAAAAAAAA+DAAAAAAAAD8MAAAAAAAAAAAAAD8MAAAAAAAAQAwAAAAAAAAAAAAAQAwAAAAAAABBDAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAPAwAAAAAAAA8DAAAAAAAAAAAAAAAAPC/"
				],
				[
					37,
					4,
					"left_delete",
					null,
					"BAAAAEAMAAAAAAAAQAwAAAAAAAABAAAAYz8MAAAAAAAAPwwAAAAAAAABAAAAZT4MAAAAAAAAPgwAAAAAAAABAAAAaD0MAAAAAAAAPQwAAAAAAAABAAAAag",
					"AQAAAAAAAAABAAAAQQwAAAAAAABBDAAAAAAAAAAAAAAAAPC/"
				],
				[
					38,
					1,
					"insert",
					{
						"characters": "heck_debug"
					},
					"CgAAAD0MAAAAAAAAPgwAAAAAAAAAAAAAPgwAAAAAAAA/DAAAAAAAAAAAAAA/DAAAAAAAAEAMAAAAAAAAAAAAAEAMAAAAAAAAQQwAAAAAAAAAAAAAQQwAAAAAAABCDAAAAAAAAAAAAABCDAAAAAAAAEMMAAAAAAAAAAAAAEMMAAAAAAAARAwAAAAAAAAAAAAARAwAAAAAAABFDAAAAAAAAAAAAABFDAAAAAAAAEYMAAAAAAAAAAAAAEYMAAAAAAAARwwAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAPQwAAAAAAAA9DAAAAAAAAAAAAAAAAPC/"
				],
				[
					39,
					1,
					"insert",
					{
						"characters": "_gdb_flag"
					},
					"CQAAAEcMAAAAAAAASAwAAAAAAAAAAAAASAwAAAAAAABJDAAAAAAAAAAAAABJDAAAAAAAAEoMAAAAAAAAAAAAAEoMAAAAAAAASwwAAAAAAAAAAAAASwwAAAAAAABMDAAAAAAAAAAAAABMDAAAAAAAAE0MAAAAAAAAAAAAAE0MAAAAAAAATgwAAAAAAAAAAAAATgwAAAAAAABPDAAAAAAAAAAAAABPDAAAAAAAAFAMAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAARwwAAAAAAABHDAAAAAAAAAAAAAAAAPC/"
				],
				[
					41,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"AQAAAFEMAAAAAAAAUgwAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAUQwAAAAAAABRDAAAAAAAAAAAAAAAAPC/"
				],
				[
					42,
					1,
					"paste",
					null,
					"AQAAAFIMAAAAAAAA3w4AAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAUgwAAAAAAABSDAAAAAAAAAAAAAAAAPC/"
				],
				[
					51,
					1,
					"insert",
					{
						"characters": "end"
					},
					"AwAAAN8OAAAAAAAA4A4AAAAAAAAAAAAA4A4AAAAAAADhDgAAAAAAAAAAAADhDgAAAAAAAOIOAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA3w4AAAAAAADfDgAAAAAAAAAAAAAAAPC/"
				],
				[
					52,
					1,
					"paste",
					null,
					"AQAAAOIOAAAAAAAA/g4AAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA4g4AAAAAAADiDgAAAAAAAAAAAAAAAPC/"
				],
				[
					73,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAAD+DgAAaW5jbHVkZShDaGVja0NDb21waWxlckZsYWcpCgptYWNybyhhcHBlbmRfdmFycyBTVFIpCiAgZm9yZWFjaChMICR7QVJHTn0pCiAgICBzZXQoTElTVCAiJHske0x9fSIpCiAgICBpZihOT1QgTElTVCBNQVRDSEVTICIuKiR7U1RSfS4qIikKICAgICAgaWYoIiR7TElTVH0iIFNUUkVRVUFMICIiKQogICAgICAgIHNldChMSVNUICIke1NUUn0iKQogICAgICBlbHNlKCIke0xJU1R9IiBTVFJFUVVBTCAiIikKICAgICAgICBzZXQoTElTVCAiJHtMSVNUfSAke1NUUn0iKQogICAgICBlbmRpZigiJHtMSVNUfSIgU1RSRVFVQUwgIiIpCgogICAgZW5kaWYoTk9UIExJU1QgTUFUQ0hFUyAiLioke1NUUn0uKiIpCiAgICBzdHJpbmcoUkVQTEFDRSAiOyIgIiAiIExJU1QgIiR7TElTVH0iKQogICAgIyBtZXNzYWdlKCJOZXcgdmFsdWUgZm9yICR7TH06ICR7TElTVH0iKQogICAgc2V0KCIke0x9IiAiJHtMSVNUfSIgUEFSRU5UX1NDT1BFKQogIGVuZGZvcmVhY2goTCAke0FSR059KQplbmRtYWNybyhhcHBlbmRfdmFycyBTVFIpCgpmdW5jdGlvbihjaGVja19mbGFnIEZMQUcgVkFSKQogIGlmKE5PVCBWQVIgT1IgVkFSIFNUUkVRVUFMICIiKQogICAgc3RyaW5nKFRPVVBQRVIgIiR7RkxBR30iIFRNUCkKICAgIHN0cmluZyhSRUdFWCBSRVBMQUNFICJbXjAtOUEtWmEtel0iIF8gVkFSICIke1RNUH0iKQogIGVuZGlmKE5PVCBWQVIgT1IgVkFSIFNUUkVRVUFMICIiKQogIHNldChDTUFLRV9SRVFVSVJFRF9RVUlFVCBPTikKICBjaGVja19jX2NvbXBpbGVyX2ZsYWcoIiR7RkxBR30iICIke1ZBUn0iKQogIHNldChDTUFLRV9SRVFVSVJFRF9RVUlFVCBPRkYpCgogIHNldChSRVNVTFQgIiR7JHtWQVJ9fSIpCiAgaWYoUkVTVUxUKQogICAgYXBwZW5kX3ZhcnMoJHtGTEFHfSAke0FSR059KQogICAgbWVzc2FnZShTVEFUVVMgIkNvbXBpbGVyIGZsYWcgJHtGTEFHfSAuLi4gc3VwcG9ydGVkIikKICAgICMgbWVzc2FnZSgiYXBwZW5kX3ZhcnMoJHtGTEFHfSAke0FSR059KSIpCiAgZW5kaWYoUkVTVUxUKQplbmRmdW5jdGlvbihjaGVja19mbGFnIEZMQUcgVkFSKQoKbWFjcm8oY2hlY2tfZmxhZ3MgRkxBR1MpCiAgbWVzc2FnZSgiQ2hlY2tpbmcgZmxhZ3MgJHtGTEFHU30gJHtBUkdOfSIpCiAgZm9yZWFjaChGTEFHICR7RkxBR1N9KQogICAgY2hlY2tfZmxhZygke0ZMQUd9ICIiICR7QVJHTn0pCiAgZW5kZm9yZWFjaChGTEFHICR7RkxBR1N9KQplbmRtYWNybyhjaGVja19mbGFncyBGTEFHUykKCm1hY3JvKE5PV0FSTl9GTEFHIEZMQUcpCiAgY2Fub25pY2FsaXplKFZBUk5BTUUgIiR7RkxBR30iKQogIGNoZWNrX2NfY29tcGlsZXJfZmxhZygiJHtGTEFHfSIgIiR7VkFSTkFNRX0iKQogICNkdW1wKCR7VkFSTkFNRX0pCgogIGlmKCR7VkFSTkFNRX0pCiAgICBzZXQoQ01BS0VfQ19GTEFHUyAiJHtDTUFLRV9DX0ZMQUdTfSAke0ZMQUd9IikKICAgIHNldChDTUFLRV9DWFhfRkxBR1MgIiR7Q01BS0VfQ1hYX0ZMQUdTfSAke0ZMQUd9IikKCiAgZW5kaWYoJHtWQVJOQU1FfSkKZW5kbWFjcm8oTk9XQVJOX0ZMQUcgRkxBRykKCm1hY3JvKEFERF9OT1dBUk5fRkxBR1MpCiAgc3RyaW5nKFJFR0VYIFJFUExBQ0UgIiAtV2FsbCIgIiIgQ01BS0VfQ19GTEFHUyAiJHtDTUFLRV9DX0ZMQUdTfSIpCiAgc3RyaW5nKFJFR0VYIFJFUExBQ0UgIiAtV2FsbCIgIiIgQ01BS0VfQ1hYX0ZMQUdTICIke0NNQUtFX0NYWF9GTEFHU30iKQoKICBub3dhcm5fZmxhZygtV25vLXVudXNlZC12YWx1ZSkKICBub3dhcm5fZmxhZygtV25vLXVudXNlZC12YXJpYWJsZSkKCiAgaWYoIiR7Q01BS0VfQ1hYX0NPTVBJTEVSX0lEfSIgTUFUQ0hFUyAiLipDbGFuZy4qIikKICAgIG5vd2Fybl9mbGFnKC1Xbm8tZGVwcmVjYXRlZC1hbm9uLWVudW0tZW51bS1jb252ZXJzaW9uKQogICAgbm93YXJuX2ZsYWcoLVduby1leHRlcm4tYy1jb21wYXQpCiAgICBub3dhcm5fZmxhZygtV25vLWltcGxpY2l0LWludC1mbG9hdC1jb252ZXJzaW9uKQogICAgbm93YXJuX2ZsYWcoLVduby1kZXByZWNhdGVkLWVudW0tZW51bS1jb252ZXJzaW9uKQogIGVuZGlmKCIke0NNQUtFX0NYWF9DT01QSUxFUl9JRH0iIE1BVENIRVMgIi4qQ2xhbmcuKiIpCgogICNkdW1wKENNQUtFX0NfRkxBR1MgQ01BS0VfQ1hYX0ZMQUdTKQogICNkdW1wKENNQUtFX0NYWF9GTEFHU19ERUJVRykKZW5kbWFjcm8oQUREX05PV0FSTl9GTEFHUykKCgptYWNybyhjaGVja19waWNfZmxhZykKICBjaGVja19jeHhfY29tcGlsZXJfZmxhZygiLWZQSUMiIEZfUElDKQogIGlmKEZfUElDKQogICAgc2V0KENNQUtFX0NfRkxBR1NfREVCVUcgIiR7Q01BS0VfQ19GTEFHU19ERUJVR30gLWZQSUMiKQogICAgc2V0KENNQUtFX0NYWF9GTEFHU19ERUJVRyAiJHtDTUFLRV9DWFhfRkxBR1NfREVCVUd9IC1mUElDIikKICBlbmRpZihGX1BJQykKZW5kbWFjcm8oY2hlY2tfcGljX2ZsYWcpCgptYWNybyhjaGVja19vcHRfbm9uZV9mbGFnKQpjaGVja19jX2NvbXBpbGVyX2ZsYWcoIi1PMCIgT1BUX0NfT1BUX05PTkUpCmNoZWNrX2N4eF9jb21waWxlcl9mbGFnKCItTzAiIE9QVF9DWFhfT1BUX05PTkUpCmlmKE9QVF9DX09QVF9OT05FKQogIGlmKE5PVCAiJHtDTUFLRV9DX0ZMQUdTX0RFQlVHfSIgTUFUQ0hFUyAiLU8wIikKICAgIHNldChDTUFLRV9DX0ZMQUdTX0RFQlVHICIke0NNQUtFX0NfRkxBR1NfREVCVUd9IC1PMCIgQ0FDSEUgU1RSSU5HICJDIGNvbXBpbGVyIG9wdGlvbnMiIEZPUkNFKQogIGVuZGlmKE5PVCAiJHtDTUFLRV9DX0ZMQUdTX0RFQlVHfSIgTUFUQ0hFUyAiLU8wIikKZW5kaWYoT1BUX0NfT1BUX05PTkUpCmlmKE9QVF9DWFhfT1BUX05PTkUpCiAgaWYoTk9UICIke0NNQUtFX0NYWF9GTEFHU19ERUJVR30iIE1BVENIRVMgIi1PMCIpCiAgICBzZXQoQ01BS0VfQ1hYX0ZMQUdTX0RFQlVHICIke0NNQUtFX0NYWF9GTEFHU19ERUJVR30gLU8wIiBDQUNIRSBTVFJJTkcgIkMrKyBjb21waWxlciBvcHRpb25zIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRk9SQ0UpCiAgZW5kaWYoTk9UICIke0NNQUtFX0NYWF9GTEFHU19ERUJVR30iIE1BVENIRVMgIi1PMCIpCmVuZGlmKE9QVF9DWFhfT1BUX05PTkUpCmVuZG1hY3JvKGNoZWNrX29wdF9ub25lX2ZsYWcpCgoKbWFjcm8oY2hlY2tfZGVidWdfZ2RiX2ZsYWcpCmNoZWNrX2NfY29tcGlsZXJfZmxhZygiLWdnZGIiIE9QVF9DX0dfR0RCKQpjaGVja19jeHhfY29tcGlsZXJfZmxhZygiLWdnZGIiIE9QVF9DWFhfR19HREIpCmlmKE9QVF9DX0dfR0RCKQogIGlmKE5PVCAiJHtDTUFLRV9DX0ZMQUdTX0RFQlVHfSIgTUFUQ0hFUyAiLWdnZGIiKQogICAgc2V0KENNQUtFX0NfRkxBR1NfREVCVUcgIiR7Q01BS0VfQ19GTEFHU19ERUJVR30gLWdnZGIiIENBQ0hFIFNUUklORyAiQyBjb21waWxlciBvcHRpb25zIiBGT1JDRSkKICBlbmRpZihOT1QgIiR7Q01BS0VfQ19GTEFHU19ERUJVR30iIE1BVENIRVMgIi1nZ2RiIikKZW5kaWYoT1BUX0NfR19HREIpCmlmKE9QVF9DWFhfR19HREIpCiAgaWYoTk9UICIke0NNQUtFX0NYWF9GTEFHU19ERUJVR30iIE1BVENIRVMgIi1nZ2RiIikKICAgIHNldChDTUFLRV9DWFhfRkxBR1NfREVCVUcgIiR7Q01BS0VfQ1hYX0ZMQUdTX0RFQlVHfSAtZ2dkYiIgQ0FDSEUgU1RSSU5HICJDKysgY29tcGlsZXIgb3B0aW9ucyIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRk9SQ0UpCiAgZW5kaWYoTk9UICIke0NNQUtFX0NYWF9GTEFHU19ERUJVR30iIE1BVENIRVMgIi1nZ2RiIikKZW5kaWYoT1BUX0NYWF9HX0dEQikKZW5kbWFjcm8oY2hlY2tfZGVidWdfZ2RiX2ZsYWcpCgAAAAAAAAAAow4AAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA9QoAAAAAAAD1CgAAAAAAAAAAAAAAAPC/"
				],
				[
					76,
					1,
					"insert",
					{
						"characters": "\nmacro"
					},
					"BgAAAKMOAAAAAAAApA4AAAAAAAAAAAAApA4AAAAAAAClDgAAAAAAAAAAAAClDgAAAAAAAKYOAAAAAAAAAAAAAKYOAAAAAAAApw4AAAAAAAAAAAAApw4AAAAAAACoDgAAAAAAAAAAAACoDgAAAAAAAKkOAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAow4AAAAAAACjDgAAAAAAAAAAAAAAAPC/"
				],
				[
					77,
					1,
					"insert_snippet",
					{
						"contents": "($0)"
					},
					"AQAAAKkOAAAAAAAAqw4AAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAqQ4AAAAAAACpDgAAAAAAAAAAAAAAAPC/"
				],
				[
					78,
					1,
					"insert",
					{
						"characters": "check_cxyx_"
					},
					"CwAAAKoOAAAAAAAAqw4AAAAAAAAAAAAAqw4AAAAAAACsDgAAAAAAAAAAAACsDgAAAAAAAK0OAAAAAAAAAAAAAK0OAAAAAAAArg4AAAAAAAAAAAAArg4AAAAAAACvDgAAAAAAAAAAAACvDgAAAAAAALAOAAAAAAAAAAAAALAOAAAAAAAAsQ4AAAAAAAAAAAAAsQ4AAAAAAACyDgAAAAAAAAAAAACyDgAAAAAAALMOAAAAAAAAAAAAALMOAAAAAAAAtA4AAAAAAAAAAAAAtA4AAAAAAAC1DgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAqg4AAAAAAACqDgAAAAAAAAAAAAAAAPC/"
				],
				[
					79,
					3,
					"left_delete",
					null,
					"AwAAALQOAAAAAAAAtA4AAAAAAAABAAAAX7MOAAAAAAAAsw4AAAAAAAABAAAAeLIOAAAAAAAAsg4AAAAAAAABAAAAeQ",
					"AQAAAAAAAAABAAAAtQ4AAAAAAAC1DgAAAAAAAAAAAAAAAPC/"
				],
				[
					80,
					1,
					"insert",
					{
						"characters": "x_standard_"
					},
					"CwAAALIOAAAAAAAAsw4AAAAAAAAAAAAAsw4AAAAAAAC0DgAAAAAAAAAAAAC0DgAAAAAAALUOAAAAAAAAAAAAALUOAAAAAAAAtg4AAAAAAAAAAAAAtg4AAAAAAAC3DgAAAAAAAAAAAAC3DgAAAAAAALgOAAAAAAAAAAAAALgOAAAAAAAAuQ4AAAAAAAAAAAAAuQ4AAAAAAAC6DgAAAAAAAAAAAAC6DgAAAAAAALsOAAAAAAAAAAAAALsOAAAAAAAAvA4AAAAAAAAAAAAAvA4AAAAAAAC9DgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAsg4AAAAAAACyDgAAAAAAAAAAAAAAAPC/"
				],
				[
					81,
					1,
					"insert",
					{
						"characters": "flag"
					},
					"BAAAAL0OAAAAAAAAvg4AAAAAAAAAAAAAvg4AAAAAAAC/DgAAAAAAAAAAAAC/DgAAAAAAAMAOAAAAAAAAAAAAAMAOAAAAAAAAwQ4AAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAvQ4AAAAAAAC9DgAAAAAAAAAAAAAAAPC/"
				],
				[
					83,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"AQAAAMIOAAAAAAAAww4AAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAwg4AAAAAAADCDgAAAAAAAAAAAAAAAPC/"
				],
				[
					84,
					1,
					"paste",
					null,
					"AQAAAMMOAAAAAAAAmRMAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAww4AAAAAAADDDgAAAAAAAAAAAAAAAPC/"
				],
				[
					85,
					1,
					"insert",
					{
						"characters": "\nendmacro"
					},
					"CQAAAJkTAAAAAAAAmhMAAAAAAAAAAAAAmhMAAAAAAACbEwAAAAAAAAAAAACbEwAAAAAAAJwTAAAAAAAAAAAAAJwTAAAAAAAAnRMAAAAAAAAAAAAAnRMAAAAAAACeEwAAAAAAAAAAAACeEwAAAAAAAJ8TAAAAAAAAAAAAAJ8TAAAAAAAAoBMAAAAAAAAAAAAAoBMAAAAAAAChEwAAAAAAAAAAAAChEwAAAAAAAKITAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAmRMAAAAAAACZEwAAAAAAAAAAAAAAAPC/"
				],
				[
					86,
					1,
					"insert_snippet",
					{
						"contents": "($0)"
					},
					"AQAAAKITAAAAAAAApBMAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAohMAAAAAAACiEwAAAAAAAAAAAAAAAPC/"
				],
				[
					87,
					1,
					"insert",
					{
						"characters": "check_cxx"
					},
					"CQAAAKMTAAAAAAAApBMAAAAAAAAAAAAApBMAAAAAAAClEwAAAAAAAAAAAAClEwAAAAAAAKYTAAAAAAAAAAAAAKYTAAAAAAAApxMAAAAAAAAAAAAApxMAAAAAAACoEwAAAAAAAAAAAACoEwAAAAAAAKkTAAAAAAAAAAAAAKkTAAAAAAAAqhMAAAAAAAAAAAAAqhMAAAAAAACrEwAAAAAAAAAAAACrEwAAAAAAAKwTAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAoxMAAAAAAACjEwAAAAAAAAAAAAAAAPC/"
				],
				[
					89,
					1,
					"insert_completion",
					{
						"completion": "check_cxx_standard_flag",
						"format": "text",
						"keep_prefix": false,
						"must_insert": false,
						"trigger": "check_cxx_standard_flag"
					},
					"AgAAAKMTAAAAAAAAoxMAAAAAAAAJAAAAY2hlY2tfY3h4oxMAAAAAAAC6EwAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAArBMAAAAAAACsEwAAAAAAAAAAAAAAAPC/"
				],
				[
					93,
					1,
					"indent",
					null,
					"FwAAAMMOAAAAAAAAxQ4AAAAAAAAAAAAA8w4AAAAAAAD1DgAAAAAAAAAAAAA8DwAAAAAAAD4PAAAAAAAAAAAAAF8PAAAAAAAAYQ8AAAAAAAAAAAAAtA8AAAAAAAC2DwAAAAAAAAAAAADYDwAAAAAAANoPAAAAAAAAAAAAAAEQAAAAAAAAAxAAAAAAAAAAAAAAURAAAAAAAABTEAAAAAAAAAAAAACQEAAAAAAAAJIQAAAAAAAAAAAAAOEQAAAAAAAA4xAAAAAAAAAAAAAAGxEAAAAAAAAdEQAAAAAAAAAAAABcEQAAAAAAAF4RAAAAAAAAAAAAAHgRAAAAAAAAehEAAAAAAAAAAAAAqhEAAAAAAACsEQAAAAAAAAAAAADKEQAAAAAAAMwRAAAAAAAAAAAAABwSAAAAAAAAHhIAAAAAAAAAAAAAexIAAAAAAAB9EgAAAAAAAAAAAADAEgAAAAAAAMISAAAAAAAAAAAAAM4SAAAAAAAA0BIAAAAAAAAAAAAA+hIAAAAAAAD8EgAAAAAAAAAAAAAKEwAAAAAAAAwTAAAAAAAAAAAAAFwTAAAAAAAAXhMAAAAAAAAAAAAAlxMAAAAAAACZEwAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAmRMAAAAAAADDDgAAAAAAAAAAAAAAAPC/"
				],
				[
					100,
					1,
					"insert",
					{
						"characters": "$"
					},
					"AQAAAOkTAAAAAAAA6hMAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA6RMAAAAAAADpEwAAAAAAAAAAAAAAAPC/"
				],
				[
					101,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"AQAAAOoTAAAAAAAA6xMAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA6hMAAAAAAADqEwAAAAAAAAAAAAAAAPC/"
				],
				[
					102,
					2,
					"left_delete",
					null,
					"AgAAAOoTAAAAAAAA6hMAAAAAAAABAAAACukTAAAAAAAA6RMAAAAAAAABAAAAJA",
					"AQAAAAAAAAABAAAA6xMAAAAAAADrEwAAAAAAAAAAAAAAAPC/"
				],
				[
					103,
					1,
					"insert",
					{
						"characters": "\n\n"
					},
					"AgAAAOkTAAAAAAAA6hMAAAAAAAAAAAAA6hMAAAAAAADrEwAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA6RMAAAAAAADpEwAAAAAAAAAAAAAAAPC/"
				],
				[
					104,
					1,
					"paste",
					null,
					"AQAAAOsTAAAAAAAAFRUAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA6xMAAAAAAADrEwAAAAAAAAAAAAAAAPC/"
				],
				[
					109,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAAAVFQAAaW5jbHVkZShDaGVja0NDb21waWxlckZsYWcpCgptYWNybyhhcHBlbmRfdmFycyBTVFIpCiAgZm9yZWFjaChMICR7QVJHTn0pCiAgICBzZXQoTElTVCAiJHske0x9fSIpCiAgICBpZihOT1QgTElTVCBNQVRDSEVTICIuKiR7U1RSfS4qIikKICAgICAgaWYoIiR7TElTVH0iIFNUUkVRVUFMICIiKQogICAgICAgIHNldChMSVNUICIke1NUUn0iKQogICAgICBlbHNlKCIke0xJU1R9IiBTVFJFUVVBTCAiIikKICAgICAgICBzZXQoTElTVCAiJHtMSVNUfSAke1NUUn0iKQogICAgICBlbmRpZigiJHtMSVNUfSIgU1RSRVFVQUwgIiIpCgogICAgZW5kaWYoTk9UIExJU1QgTUFUQ0hFUyAiLioke1NUUn0uKiIpCiAgICBzdHJpbmcoUkVQTEFDRSAiOyIgIiAiIExJU1QgIiR7TElTVH0iKQogICAgIyBtZXNzYWdlKCJOZXcgdmFsdWUgZm9yICR7TH06ICR7TElTVH0iKQogICAgc2V0KCIke0x9IiAiJHtMSVNUfSIgUEFSRU5UX1NDT1BFKQogIGVuZGZvcmVhY2goTCAke0FSR059KQplbmRtYWNybyhhcHBlbmRfdmFycyBTVFIpCgpmdW5jdGlvbihjaGVja19mbGFnIEZMQUcgVkFSKQogIGlmKE5PVCBWQVIgT1IgVkFSIFNUUkVRVUFMICIiKQogICAgc3RyaW5nKFRPVVBQRVIgIiR7RkxBR30iIFRNUCkKICAgIHN0cmluZyhSRUdFWCBSRVBMQUNFICJbXjAtOUEtWmEtel0iIF8gVkFSICIke1RNUH0iKQogIGVuZGlmKE5PVCBWQVIgT1IgVkFSIFNUUkVRVUFMICIiKQogIHNldChDTUFLRV9SRVFVSVJFRF9RVUlFVCBPTikKICBjaGVja19jX2NvbXBpbGVyX2ZsYWcoIiR7RkxBR30iICIke1ZBUn0iKQogIHNldChDTUFLRV9SRVFVSVJFRF9RVUlFVCBPRkYpCgogIHNldChSRVNVTFQgIiR7JHtWQVJ9fSIpCiAgaWYoUkVTVUxUKQogICAgYXBwZW5kX3ZhcnMoJHtGTEFHfSAke0FSR059KQogICAgbWVzc2FnZShTVEFUVVMgIkNvbXBpbGVyIGZsYWcgJHtGTEFHfSAuLi4gc3VwcG9ydGVkIikKICAgICMgbWVzc2FnZSgiYXBwZW5kX3ZhcnMoJHtGTEFHfSAke0FSR059KSIpCiAgZW5kaWYoUkVTVUxUKQplbmRmdW5jdGlvbihjaGVja19mbGFnIEZMQUcgVkFSKQoKbWFjcm8oY2hlY2tfZmxhZ3MgRkxBR1MpCiAgbWVzc2FnZSgiQ2hlY2tpbmcgZmxhZ3MgJHtGTEFHU30gJHtBUkdOfSIpCiAgZm9yZWFjaChGTEFHICR7RkxBR1N9KQogICAgY2hlY2tfZmxhZygke0ZMQUd9ICIiICR7QVJHTn0pCiAgZW5kZm9yZWFjaChGTEFHICR7RkxBR1N9KQplbmRtYWNybyhjaGVja19mbGFncyBGTEFHUykKCm1hY3JvKE5PV0FSTl9GTEFHIEZMQUcpCiAgY2Fub25pY2FsaXplKFZBUk5BTUUgIiR7RkxBR30iKQogIGNoZWNrX2NfY29tcGlsZXJfZmxhZygiJHtGTEFHfSIgIiR7VkFSTkFNRX0iKQogICMgZHVtcCgke1ZBUk5BTUV9KQoKICBpZigke1ZBUk5BTUV9KQogICAgc2V0KENNQUtFX0NfRkxBR1MgIiR7Q01BS0VfQ19GTEFHU30gJHtGTEFHfSIpCiAgICBzZXQoQ01BS0VfQ1hYX0ZMQUdTICIke0NNQUtFX0NYWF9GTEFHU30gJHtGTEFHfSIpCgogIGVuZGlmKCR7VkFSTkFNRX0pCmVuZG1hY3JvKE5PV0FSTl9GTEFHIEZMQUcpCgptYWNybyhBRERfTk9XQVJOX0ZMQUdTKQogIHN0cmluZyhSRUdFWCBSRVBMQUNFICIgLVdhbGwiICIiIENNQUtFX0NfRkxBR1MgIiR7Q01BS0VfQ19GTEFHU30iKQogIHN0cmluZyhSRUdFWCBSRVBMQUNFICIgLVdhbGwiICIiIENNQUtFX0NYWF9GTEFHUyAiJHtDTUFLRV9DWFhfRkxBR1N9IikKCiAgbm93YXJuX2ZsYWcoLVduby11bnVzZWQtdmFsdWUpCiAgbm93YXJuX2ZsYWcoLVduby11bnVzZWQtdmFyaWFibGUpCgogIGlmKCIke0NNQUtFX0NYWF9DT01QSUxFUl9JRH0iIE1BVENIRVMgIi4qQ2xhbmcuKiIpCiAgICBub3dhcm5fZmxhZygtV25vLWRlcHJlY2F0ZWQtYW5vbi1lbnVtLWVudW0tY29udmVyc2lvbikKICAgIG5vd2Fybl9mbGFnKC1Xbm8tZXh0ZXJuLWMtY29tcGF0KQogICAgbm93YXJuX2ZsYWcoLVduby1pbXBsaWNpdC1pbnQtZmxvYXQtY29udmVyc2lvbikKICAgIG5vd2Fybl9mbGFnKC1Xbm8tZGVwcmVjYXRlZC1lbnVtLWVudW0tY29udmVyc2lvbikKICBlbmRpZigiJHtDTUFLRV9DWFhfQ09NUElMRVJfSUR9IiBNQVRDSEVTICIuKkNsYW5nLioiKQoKICAjIGR1bXAoQ01BS0VfQ19GTEFHUyBDTUFLRV9DWFhfRkxBR1MpIGR1bXAoQ01BS0VfQ1hYX0ZMQUdTX0RFQlVHKQplbmRtYWNybyhBRERfTk9XQVJOX0ZMQUdTKQoKbWFjcm8oY2hlY2tfcGljX2ZsYWcpCiAgY2hlY2tfY3h4X2NvbXBpbGVyX2ZsYWcoIi1mUElDIiBGX1BJQykKICBpZihGX1BJQykKICAgIHNldChDTUFLRV9DX0ZMQUdTX0RFQlVHICIke0NNQUtFX0NfRkxBR1NfREVCVUd9IC1mUElDIikKICAgIHNldChDTUFLRV9DWFhfRkxBR1NfREVCVUcgIiR7Q01BS0VfQ1hYX0ZMQUdTX0RFQlVHfSAtZlBJQyIpCiAgZW5kaWYoRl9QSUMpCmVuZG1hY3JvKGNoZWNrX3BpY19mbGFnKQoKbWFjcm8oY2hlY2tfb3B0X25vbmVfZmxhZykKICBjaGVja19jX2NvbXBpbGVyX2ZsYWcoIi1PMCIgT1BUX0NfT1BUX05PTkUpCiAgY2hlY2tfY3h4X2NvbXBpbGVyX2ZsYWcoIi1PMCIgT1BUX0NYWF9PUFRfTk9ORSkKICBpZihPUFRfQ19PUFRfTk9ORSkKICAgIGlmKE5PVCAiJHtDTUFLRV9DX0ZMQUdTX0RFQlVHfSIgTUFUQ0hFUyAiLU8wIikKICAgICAgc2V0KENNQUtFX0NfRkxBR1NfREVCVUcgIiR7Q01BS0VfQ19GTEFHU19ERUJVR30gLU8wIiBDQUNIRSBTVFJJTkcgIkMgY29tcGlsZXIgb3B0aW9ucyIgRk9SQ0UpCiAgICBlbmRpZihOT1QgIiR7Q01BS0VfQ19GTEFHU19ERUJVR30iIE1BVENIRVMgIi1PMCIpCiAgZW5kaWYoT1BUX0NfT1BUX05PTkUpCiAgaWYoT1BUX0NYWF9PUFRfTk9ORSkKICAgIGlmKE5PVCAiJHtDTUFLRV9DWFhfRkxBR1NfREVCVUd9IiBNQVRDSEVTICItTzAiKQogICAgICBzZXQoQ01BS0VfQ1hYX0ZMQUdTX0RFQlVHICIke0NNQUtFX0NYWF9GTEFHU19ERUJVR30gLU8wIiBDQUNIRSBTVFJJTkcgIkMrKyBjb21waWxlciBvcHRpb25zIiBGT1JDRSkKICAgIGVuZGlmKE5PVCAiJHtDTUFLRV9DWFhfRkxBR1NfREVCVUd9IiBNQVRDSEVTICItTzAiKQogIGVuZGlmKE9QVF9DWFhfT1BUX05PTkUpCmVuZG1hY3JvKGNoZWNrX29wdF9ub25lX2ZsYWcpCgptYWNybyhjaGVja19kZWJ1Z19nZGJfZmxhZykKICBjaGVja19jX2NvbXBpbGVyX2ZsYWcoIi1nZ2RiIiBPUFRfQ19HX0dEQikKICBjaGVja19jeHhfY29tcGlsZXJfZmxhZygiLWdnZGIiIE9QVF9DWFhfR19HREIpCiAgaWYoT1BUX0NfR19HREIpCiAgICBpZihOT1QgIiR7Q01BS0VfQ19GTEFHU19ERUJVR30iIE1BVENIRVMgIi1nZ2RiIikKICAgICAgc2V0KENNQUtFX0NfRkxBR1NfREVCVUcgIiR7Q01BS0VfQ19GTEFHU19ERUJVR30gLWdnZGIiIENBQ0hFIFNUUklORyAiQyBjb21waWxlciBvcHRpb25zIiBGT1JDRSkKICAgIGVuZGlmKE5PVCAiJHtDTUFLRV9DX0ZMQUdTX0RFQlVHfSIgTUFUQ0hFUyAiLWdnZGIiKQogIGVuZGlmKE9QVF9DX0dfR0RCKQogIGlmKE9QVF9DWFhfR19HREIpCiAgICBpZihOT1QgIiR7Q01BS0VfQ1hYX0ZMQUdTX0RFQlVHfSIgTUFUQ0hFUyAiLWdnZGIiKQogICAgICBzZXQoQ01BS0VfQ1hYX0ZMQUdTX0RFQlVHICIke0NNQUtFX0NYWF9GTEFHU19ERUJVR30gLWdnZGIiIENBQ0hFIFNUUklORyAiQysrIGNvbXBpbGVyIG9wdGlvbnMiIEZPUkNFKQogICAgZW5kaWYoTk9UICIke0NNQUtFX0NYWF9GTEFHU19ERUJVR30iIE1BVENIRVMgIi1nZ2RiIikKICBlbmRpZihPUFRfQ1hYX0dfR0RCKQplbmRtYWNybyhjaGVja19kZWJ1Z19nZGJfZmxhZykKCm1hY3JvKGNoZWNrX2N4eF9zdGFuZGFyZF9mbGFnKQogIGZvcmVhY2goQ1hYX1NUQU5EQVJEIGMrKzIwIGMrKzE3IGMrKzE0IGMrKzExKQogICAgc3RyaW5nKFJFUExBQ0UgImMrKyIgIkNQTFVTUExVUyIgQ1hYX1NUQU5EQVJEX05VTSAiJHtDWFhfU1RBTkRBUkR9IikKICAgIHNldChDTUFLRV9SRVFVSVJFRF9RVUlFVCBUUlVFKQogICAgY2hlY2tfY3h4X2NvbXBpbGVyX2ZsYWcoIi1zdGQ9JHtDWFhfU1RBTkRBUkR9IiBDWFhfU1RBTkRBUkRfJHtDWFhfU1RBTkRBUkRfTlVNfSkKICAgIHNldChDTUFLRV9SRVFVSVJFRF9RVUlFVCBGQUxTRSkKICAgIGlmKENYWF9TVEFOREFSRF8ke0NYWF9TVEFOREFSRF9OVU19KQogICAgICBzdHJpbmcoUkVHRVggUkVQTEFDRSAiXFwrIiAieCIgQ1hYX1NUQU5EQVJEX05BTUUgIiR7Q1hYX1NUQU5EQVJEX1ZBTFVFfSIpCiAgICAgIHN0cmluZyhUT1VQUEVSICIke0NYWF9TVEFOREFSRF9OQU1FfSIgQ1hYX1NUQU5EQVJEX05BTUUpCiAgICAgIHN0cmluZyhSRUdFWCBSRVBMQUNFICJDWFgiICIiIENYWF9TVEFOREFSRF9WRVJTSU9OICIke0NYWF9TVEFOREFSRF9OQU1FfSIpCiAgICAgIG1lc3NhZ2UoIkNYWF9TVEFOREFSRF9OQU1FID0gJHtDWFhfU1RBTkRBUkRfTkFNRX0iKQogICAgICBtZXNzYWdlKCJDWFhfU1RBTkRBUkRfVkVSU0lPTiA9ICR7Q1hYX1NUQU5EQVJEX1ZFUlNJT059IikKCiAgICAgIGlmKENYWF9TVEFOREFSRF9OQU1FKQogICAgICAgIGFkZF9kZWZpbml0aW9ucygtRCIke0NYWF9TVEFOREFSRF9OQU1FfSIpCiAgICAgIGVuZGlmKENYWF9TVEFOREFSRF9OQU1FKQoKICAgICAgc2V0KENYWF9TVEFOREFSRF9WQUxVRSAiJHtDWFhfU1RBTkRBUkR9IiBDQUNIRSBTVFJJTkcgIkMrKyBzdGFuZGFyZCIgRk9SQ0UpCiAgICAgIHNldChDWFhfU1RBTkRBUkRfRkxBRyAiLXN0ZD0ke0NYWF9TVEFOREFSRH0iIENBQ0hFIFNUUklORyAiQysrIHN0YW5kYXJkIGFyZ3VtZW50IiBGT1JDRSkKICAgICAgc2V0KENNQUtFX0NYWF9GTEFHUyAiJHtDTUFLRV9DWFhfRkxBR1N9ICR7Q1hYX1NUQU5EQVJEX0ZMQUd9IikKICAgICAgYnJlYWsoKQogICAgZW5kaWYoQ1hYX1NUQU5EQVJEXyR7Q1hYX1NUQU5EQVJEX05VTX0pCiAgZW5kZm9yZWFjaCgpCgogIHN0cmluZyhSRUdFWCBSRVBMQUNFICJjXFwrXFwrIiAiIiBDWFhfU1RBTkRBUkRfVkVSU0lPTiAiJHtDWFhfU1RBTkRBUkRfVkFMVUV9IikKICBhZGRfZGVmaW5pdGlvbnMoLURDWFhfU1RBTkRBUkQ9JHtDWFhfU1RBTkRBUkRfVkVSU0lPTn0pCgogIG1lc3NhZ2UoIkMrKyBzdGFuZGFyZDogJHtDWFhfU1RBTkRBUkRfVkFMVUV9IikKZW5kbWFjcm8oY2hlY2tfY3h4X3N0YW5kYXJkX2ZsYWcpCgoKbWFjcm8oTk9XQVJOX0ZMQUcgRkxBRykKICBjYW5vbmljYWxpemUoVkFSTkFNRSAiJHtGTEFHfSIpCiAgY2hlY2tfY19jb21waWxlcl9mbGFnKCIke0ZMQUd9IiAiJHtWQVJOQU1FfSIpCiAgIyBkdW1wKCR7VkFSTkFNRX0pCgogIGlmKCR7VkFSTkFNRX0pCiAgICBzZXQoQ01BS0VfQ19GTEFHUyAiJHtDTUFLRV9DX0ZMQUdTfSAke0ZMQUd9IikKICAgIHNldChDTUFLRV9DWFhfRkxBR1MgIiR7Q01BS0VfQ1hYX0ZMQUdTfSAke0ZMQUd9IikKCiAgZW5kaWYoJHtWQVJOQU1FfSkKZW5kbWFjcm8oTk9XQVJOX0ZMQUcgRkxBRykKAAAAAAAAAAAtFQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA8hMAAAAAAAD9EwAAAAAAAAAAAAAAAPC/"
				],
				[
					112,
					1,
					"paste",
					null,
					"AQAAABwAAAAAAAAAVgAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAHAAAAAAAAAAcAAAAAAAAAAAAAAAAAPC/"
				],
				[
					118,
					1,
					"left_delete",
					null,
					"AQAAAAAAAAAAAAAAAAAAAAAAAAAcAAAAaW5jbHVkZShDaGVja0NDb21waWxlckZsYWcpCg",
					"AQAAAAAAAAABAAAAAAAAAAAAAAAcAAAAAAAAAAAAAAAAAPC/"
				]
			]
		}
	],
	"build_system": "",
	"build_system_choices":
	[
	],
	"build_varint": "",
	"command_palette":
	{
		"height": 0.0,
		"last_filter": "",
		"selected_items":
		[
			[
				"out",
				"Browse Mode: Outline (Right)"
			],
			[
				"outl",
				"Browse Mode: Outline (Right)"
			],
			[
				"debugger",
				"Debugger: Add or Select Configuration"
			],
			[
				"Package Control: ",
				"Package Control: Install Package"
			],
			[
				"insta",
				"Package Control: Install Package"
			],
			[
				"adva",
				"Package Control: Advanced Install Package"
			],
			[
				"install ",
				"Package Control: Install Package"
			],
			[
				"instal",
				"Package Control: Install Package"
			],
			[
				"install",
				"Package Control: Install Package"
			]
		],
		"width": 0.0
	},
	"console":
	{
		"height": 158.0,
		"history":
		[
		]
	},
	"distraction_free":
	{
		"menu_visible": true,
		"show_minimap": false,
		"show_open_files": false,
		"show_tabs": false,
		"side_bar_visible": false,
		"status_bar_visible": false
	},
	"expanded_folders":
	[
		"/home/roman/Projects/qjs-opencv",
		"/home/roman/Projects/qjs-opencv/build",
		"/home/roman/Projects/qjs-opencv/cmake"
	],
	"file_history":
	[
		"/home/roman/Projects/qjs-opencv/cmake/glfw3Config.cmake",
		"/home/roman/Projects/qjs-opencv/js_clahe.cpp",
		"/home/roman/Projects/qjs-opencv/js_size.hpp",
		"/home/roman/Projects/qjs-opencv/js_rect.cpp",
		"/home/roman/Projects/qjs-opencv/js_size.cpp",
		"/home/roman/Projects/qjs-opencv/js_slice_iterator.cpp",
		"/home/roman/Projects/qjs-opencv/js_subdiv2d.cpp",
		"/home/roman/Projects/qjs-opencv/js_umat.cpp",
		"/home/roman/Projects/qjs-opencv/js_utility.cpp",
		"/home/roman/Projects/qjs-opencv/js.hpp",
		"/home/roman/Projects/qjs-opencv/jsbindings.hpp",
		"/home/roman/Projects/qjs-opencv/js.cpp",
		"/home/roman/Projects/qjs-opencv/geometry.cpp",
		"/home/roman/Projects/qjs-opencv/js_video_capture.cpp",
		"/home/roman/Projects/qjs-opencv/jsbindings.cpp",
		"/home/roman/Projects/qjs-opencv/js_cv.cpp",
		"/home/roman/Projects/qjs-opencv/js_contour.hpp",
		"/home/roman/Projects/qjs-opencv/init_module.cpp",
		"/home/roman/Projects/qjs-opencv/geometry.hpp",
		"/home/roman/Projects/qjs-opencv/util.hpp",
		"/home/roman/Projects/qjs-opencv/js_cv.hpp",
		"/home/roman/Projects/qjs-opencv/js_contour.cpp",
		"/home/roman/Projects/qjs-opencv/js_draw.cpp",
		"/home/roman/Projects/qjs-opencv/js_line.cpp",
		"/home/roman/Projects/qjs-opencv/js_mat.cpp",
		"/home/roman/Projects/qjs-opencv/js_point.cpp",
		"/home/roman/Projects/qjs-opencv/js_point_iterator.cpp",
		"/home/roman/Projects/qjs-opencv/cmake/FindQuickJS.cmake",
		"/home/roman/Projects/qjs-opencv/cmake/functions.cmake",
		"/home/roman/Projects/qjs-opencv/cmake/imgui-viewer.cmake",
		"/home/roman/Projects/qjs-opencv/cmake/js-bindings.cmake",
		"/home/roman/Projects/qjs-opencv/color.cpp",
		"/home/roman/Projects/qjs-opencv/color.hpp",
		"/home/roman/Projects/qjs-opencv/cmake/ccache.cmake",
		"/home/roman/Projects/qjs-opencv/cmake/opencv.cmake",
		"/home/roman/Projects/qjs-opencv/cmake/sdl2-config.cmake",
		"/home/roman/Projects/qjs-opencv/cmake/check-flags.cmake",
		"/home/roman/Projects/qjs-opencv/cmake/FindGLFW.cmake",
		"/home/roman/Projects/qjs-opencv/js_alloc.hpp",
		"/home/roman/Projects/qjs-opencv/CMakeLists.txt",
		"/home/roman/Projects/qjs-opencv/js_line.hpp",
		"/home/roman/Projects/plot-cv/test-video.js",
		"/home/roman/Sources/opencv/modules/imgproc/src/drawing.cpp",
		"/home/roman/Projects/plot-cv/src/js_contour.cpp",
		"/home/roman/Projects/plot-cv/src/js_contour.hpp",
		"/home/roman/Projects/plot-cv/src/js_rect.cpp",
		"/home/roman/Projects/plot-cv/src/js_cv.cpp",
		"/home/roman/Projects/plot-cv/src/geometry.hpp",
		"/home/roman/Projects/plot-cv/src/js_array.hpp",
		"/home/roman/Projects/plot-cv/src/js_mat.cpp",
		"/home/roman/Projects/plot-cv/src/jsbindings.hpp",
		"/home/roman/Projects/plot-cv/src/pixel_neighborhood.hpp",
		"/home/roman/Projects/plot-cv/cvPipeline.js",
		"/home/roman/Projects/plot-cv/param.js",
		"/home/roman/Projects/plot-cv/CMakeLists.txt",
		"/home/roman/Projects/plot-cv/cmake/highgui-viewer.cmake",
		"/home/roman/Projects/plot-cv/cmake/imgui-viewer.cmake",
		"/home/roman/Projects/plot-cv/cmake/js-bindings.cmake",
		"/home/roman/Projects/plot-cv/src/util.hpp",
		"/home/roman/Projects/plot-cv/src/png_write.hpp",
		"/home/roman/Projects/plot-cv/src/palette.hpp",
		"/home/roman/Projects/plot-cv/test-opencv.js",
		"/home/roman/Projects/plot-cv/test-png++.cpp",
		"/home/roman/Projects/plot-cv/src/js_draw.cpp",
		"/home/roman/Projects/plot-cv/src/js_umat.hpp",
		"/home/roman/Projects/plot-cv/src/js_umat.cpp",
		"/home/roman/Projects/plot-cv/cmake/opencv.cmake",
		"/home/roman/Projects/plot-cv/src/js_typed_array.hpp",
		"/home/roman/Projects/plot-cv/src/jsbindings.cpp",
		"/home/roman/Projects/plot-cv/src/js_clahe.cpp",
		"/home/roman/Projects/plot-cv/cvHighGUI.js",
		"/home/roman/Projects/plot-cv/src/data.cpp",
		"/home/roman/Projects/plot-cv/src/js_slice_iterator.cpp",
		"/home/roman/Projects/plot-cv/src/js_point_iterator.cpp",
		"/home/roman/Projects/plot-cv/src/js_point.cpp",
		"/home/roman/Projects/plot-cv/src/js_mat.hpp",
		"/home/roman/Projects/plot-cv/src/js_size.cpp",
		"/home/roman/Projects/plot-cv/src/js_line.cpp",
		"/home/roman/Projects/plot-cv/src/js.cpp",
		"/home/roman/Projects/plot-cv/src/js_rect.hpp",
		"/home/roman/Projects/plot-cv/src/js_size.hpp",
		"/opt/opencv-4.5.0/include/opencv4/opencv2/freetype.hpp",
		"/home/roman/Projects/plot-cv/dnsresolve.js",
		"/home/roman/Projects/plot-cv/src/js_point.hpp",
		"/home/roman/Projects/plot-cv/src/js.hpp",
		"/home/roman/Projects/plot-cv/quickjs/quickjs.h",
		"/home/roman/Projects/plot-cv/src/js_subdiv2d.cpp",
		"/home/roman/Projects/plot-cv/src/skeletonization.hpp",
		"/home/roman/Projects/plot-cv/src/util.cpp",
		"/home/roman/Projects/plot-cv/src/imgui-viewer.hpp",
		"/opt/opencv-4.5.0/include/opencv4/opencv2/core/mat.hpp",
		"/home/roman/Projects/plot-cv/lib/util.js",
		"/home/roman/Projects/plot-cv/lib/grammars/shell.y",
		"/home/roman/Projects/plot-cv/test-worker.js",
		"/home/roman/Projects/plot-cv/worker.js",
		"/home/roman/Projects/plot-cv/test_worker_module.js",
		"/home/roman/Projects/plot-cv/clang-ast.js",
		"/home/roman/Projects/plot-cv/test-cv.js",
		"/home/roman/Projects/plot-cv/test-umat.js",
		"/home/roman/Projects/plot-cv/ast-shell.js",
		"/home/roman/Projects/plot-cv/quickjs/CMakeLists.txt",
		"/home/roman/Projects/plot-cv/quickjs/quickjs.c",
		"/home/roman/Projects/plot-cv/lib/filesystem.js",
		"/home/roman/Projects/plot-cv/lib/consoleSetup.js",
		"/home/roman/Projects/plot-cv/bjson.js",
		"/home/roman/Projects/plot-cv/quickjs/tests/bjson.c",
		"/home/roman/Projects/plot-cv/clang-list.js",
		"/home/roman/Projects/plot-cv/opencv_dummy.cpp",
		"/home/roman/Projects/plot-cv/test-bjson.js",
		"/home/roman/Projects/plot-cv/quickjs/cutils.h",
		"/home/roman/Projects/plot-cv/quickjs/cutils.c",
		"/home/roman/Projects/plot-cv/clang-list.es",
		"/home/roman/Projects/plot-cv/lib/ecmascript/lexer.js",
		"/home/roman/Projects/plot-cv/repl.js",
		"/home/roman/Projects/plot-cv/lib/grammars/Lua.g4",
		"/home/roman/Projects/plot-cv/lib/grammars/Java8Parser.g4",
		"/home/roman/Projects/plot-cv/lib/grammars/JavaLexer.g4",
		"/home/roman/Projects/plot-cv/plot-cv.sublime-project",
		"/home/roman/Projects/plot-cv/lib/eagle/node.js",
		"/home/roman/Projects/plot-cv/lib/ecmascript/estree.js",
		"/home/roman/Projects/plot-cv/lib/json/util.js",
		"/home/roman/Projects/plot-cv/lib/eagle/element.js",
		"/home/roman/Projects/plot-cv/lib/eagle/project.js",
		"/home/roman/Projects/plot-cv/test-eagle.js",
		"/home/roman/Projects/plot-cv/lib/eagle/document.js",
		"/home/roman/Projects/plot-cv/chars.js",
		"/home/roman/Projects/plot-cv/lib/grammars/C99_Parser.y",
		"/home/roman/Projects/plot-cv/lib/grammars/C99_Parser.l"
	],
	"find":
	{
		"height": 42.0
	},
	"find_in_files":
	{
		"height": 120.0,
		"where_history":
		[
		]
	},
	"find_state":
	{
		"case_sensitive": true,
		"find_history":
		[
			"js\\.",
			"js.is_array_like\\(",
			"js\\.",
			"js.is_bool",
			"js\\.",
			"js.get_boolean\\(",
			"js.get_number\\(",
			"js\\.",
			"jsrt",
			"/src",
			"COMPILE_FLAGS",
			"OPENCV_FOUND",
			"flags",
			"^#",
			"CMAKE_INSTALL_RPATH",
			"extern C",
			"PLOTCV",
			"PLOT",
			"}_MODULE",
			"src_program",
			"add_exec",
			"_MODULE",
			"JS_INIT_MODULE",
			"plot-cv",
			"js.hpp",
			"include\\("
		],
		"highlight": true,
		"in_selection": false,
		"preserve_case": false,
		"regex": true,
		"replace_history":
		[
			"js_is_array_like(ctx, ",
			"JS_IsBool",
			"js_value_to(ctx, ",
			"extern \"C\""
		],
		"reverse": false,
		"scrollbar_highlights": true,
		"show_context": true,
		"use_buffer2": true,
		"use_gitignore": true,
		"whole_word": false,
		"wrap": true
	},
	"groups":
	[
		{
			"sheets":
			[
				{
					"buffer": 0,
					"selected": true,
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 1940,
						"regions":
						{
						},
						"selection":
						[
							[
								355,
								372
							]
						],
						"settings":
						{
							"current_file": "/home/roman/Projects/qjs-opencv/js_mat.cpp",
							"outline_rename_mode": false,
							"symkeys":
							[
								[
									1280,
									1297
								],
								[
									1411,
									1427
								],
								[
									1634,
									1646
								],
								[
									1962,
									1979
								],
								[
									2322,
									2334
								],
								[
									2957,
									2967
								],
								[
									3546,
									3557
								],
								[
									4389,
									4400
								],
								[
									4822,
									4839
								],
								[
									5342,
									5353
								],
								[
									6385,
									6398
								],
								[
									6900,
									6911
								],
								[
									7123,
									7135
								],
								[
									9523,
									9534
								],
								[
									12790,
									12801
								],
								[
									13653,
									13663
								],
								[
									13871,
									13881
								],
								[
									15447,
									15460
								],
								[
									15669,
									15678
								],
								[
									16440,
									16450
								],
								[
									19907,
									19920
								],
								[
									21695,
									21711
								],
								[
									23100,
									23115
								],
								[
									24759,
									24773
								],
								[
									25378,
									25404
								],
								[
									25911,
									25928
								],
								[
									26449,
									26463
								],
								[
									27157,
									27171
								],
								[
									28152,
									28166
								],
								[
									28728,
									28745
								],
								[
									29635,
									29646
								],
								[
									30186,
									30205
								],
								[
									31097,
									31110
								],
								[
									31881,
									31893
								],
								[
									32575,
									32586
								],
								[
									33089,
									33105
								],
								[
									34570,
									34589
								],
								[
									35673,
									35693
								],
								[
									35890,
									35910
								],
								[
									38170,
									38195
								],
								[
									38373,
									38392
								],
								[
									38790,
									38810
								],
								[
									38906,
									38926
								],
								[
									39022,
									39042
								],
								[
									39146,
									39166
								],
								[
									39262,
									39282
								],
								[
									39380,
									39400
								],
								[
									39498,
									39518
								],
								[
									39616,
									39636
								],
								[
									39732,
									39752
								],
								[
									39860,
									39880
								],
								[
									39986,
									40006
								],
								[
									40102,
									40122
								],
								[
									40226,
									40246
								],
								[
									40352,
									40366
								],
								[
									40450,
									40464
								],
								[
									40546,
									40564
								],
								[
									40653,
									40671
								],
								[
									40760,
									40778
								],
								[
									40878,
									40896
								],
								[
									40996,
									41014
								],
								[
									41107,
									41125
								],
								[
									41214,
									41232
								],
								[
									41329,
									41347
								],
								[
									41436,
									41454
								],
								[
									41547,
									41565
								],
								[
									41658,
									41676
								],
								[
									41771,
									41789
								],
								[
									41882,
									41900
								],
								[
									42002,
									42020
								],
								[
									42110,
									42128
								],
								[
									42218,
									42236
								],
								[
									42324,
									42342
								],
								[
									42432,
									42450
								],
								[
									42541,
									42559
								],
								[
									42639,
									42657
								],
								[
									42737,
									42749
								],
								[
									42834,
									42846
								],
								[
									42919,
									42931
								],
								[
									43006,
									43018
								],
								[
									43098,
									43110
								],
								[
									43198,
									43210
								],
								[
									43292,
									43304
								],
								[
									43387,
									43399
								],
								[
									43482,
									43500
								],
								[
									43604,
									43622
								],
								[
									43730,
									43748
								],
								[
									43858,
									43870
								],
								[
									43954,
									43966
								],
								[
									44056,
									44074
								],
								[
									44198,
									44218
								],
								[
									44260,
									44278
								],
								[
									44345,
									44357
								],
								[
									44466,
									44478
								],
								[
									44538,
									44556
								],
								[
									44594,
									44612
								],
								[
									44650,
									44668
								],
								[
									44706,
									44724
								],
								[
									44762,
									44780
								],
								[
									44818,
									44836
								],
								[
									44873,
									44891
								],
								[
									44929,
									44947
								],
								[
									44989,
									45007
								],
								[
									45048,
									45065
								],
								[
									45075,
									45086
								],
								[
									45127,
									45138
								],
								[
									46565,
									46578
								],
								[
									46688,
									46702
								],
								[
									46740,
									46754
								],
								[
									46806,
									46820
								]
							],
							"symlist":
							[
								"JSMatIteratorData",
								"  js_mat_free_func",
								"  js_mat_sizes",
								"  js_mat_dimensions",
								"  js_mat_track",
								"  js_mat_new",
								"  js_mat_wrap",
								"  js_mat_data",
								"  js_mat_print_data",
								"  js_mat_dump",
								"  js_mat_params",
								"  js_mat_ctor",
								"  js_mat_funcs",
								"  js_mat_expr",
								"  js_mat_init",
								"  js_mat_get",
								"  js_mat_get",
								"  js_mat_get_wh",
								"  js_mat_at",
								"  js_mat_set",
								"  js_mat_set_to",
								"  js_mat_get_props",
								"  js_mat_tostring",
								"  js_mat_inspect",
								"  js_mat_getrotationmatrix2d",
								"  js_mat_convert_to",
								"  js_mat_copy_to",
								"  js_mat_reshape",
								"  js_mat_getumat",
								"  js_mat_class_func",
								"  js_mat_fill",
								"  js_mat_class_create",
								"  js_mat_buffer",
								"  js_mat_array",
								"  js_mat_call",
								"  js_mat_finalizer",
								"  js_mat_iterator_new",
								"  js_mat_iterator_dump",
								"  js_mat_iterator_next",
								"  js_mat_iterator_finalizer",
								"  js_mat_iterator_dup",
								"JS_CGETSET_MAGIC_DEF",
								"JS_CGETSET_MAGIC_DEF",
								"JS_CGETSET_MAGIC_DEF",
								"JS_CGETSET_MAGIC_DEF",
								"JS_CGETSET_MAGIC_DEF",
								"JS_CGETSET_MAGIC_DEF",
								"JS_CGETSET_MAGIC_DEF",
								"JS_CGETSET_MAGIC_DEF",
								"JS_CGETSET_MAGIC_DEF",
								"JS_CGETSET_MAGIC_DEF",
								"JS_CGETSET_MAGIC_DEF",
								"JS_CGETSET_MAGIC_DEF",
								"JS_CGETSET_MAGIC_DEF",
								"JS_CGETSET_DEF",
								"JS_CGETSET_DEF",
								"JS_CFUNC_MAGIC_DEF",
								"JS_CFUNC_MAGIC_DEF",
								"JS_CFUNC_MAGIC_DEF",
								"JS_CFUNC_MAGIC_DEF",
								"JS_CFUNC_MAGIC_DEF",
								"JS_CFUNC_MAGIC_DEF",
								"JS_CFUNC_MAGIC_DEF",
								"JS_CFUNC_MAGIC_DEF",
								"JS_CFUNC_MAGIC_DEF",
								"JS_CFUNC_MAGIC_DEF",
								"JS_CFUNC_MAGIC_DEF",
								"JS_CFUNC_MAGIC_DEF",
								"JS_CFUNC_MAGIC_DEF",
								"JS_CFUNC_MAGIC_DEF",
								"JS_CFUNC_MAGIC_DEF",
								"JS_CFUNC_MAGIC_DEF",
								"JS_CFUNC_MAGIC_DEF",
								"JS_CFUNC_MAGIC_DEF",
								"JS_CFUNC_MAGIC_DEF",
								"JS_CFUNC_MAGIC_DEF",
								"JS_CFUNC_DEF",
								"JS_CFUNC_DEF",
								"JS_CFUNC_DEF",
								"JS_CFUNC_DEF",
								"JS_CFUNC_DEF",
								"JS_CFUNC_DEF",
								"JS_CFUNC_DEF",
								"JS_CFUNC_DEF",
								"JS_CFUNC_MAGIC_DEF",
								"JS_CFUNC_MAGIC_DEF",
								"JS_CFUNC_MAGIC_DEF",
								"JS_ALIAS_DEF",
								"JS_ALIAS_DEF",
								"JS_PROP_STRING_DEF",
								"JS_ITERATOR_NEXT_DEF",
								"JS_PROP_STRING_DEF",
								"JS_CFUNC_DEF",
								"JS_CFUNC_DEF",
								"JS_CFUNC_MAGIC_DEF",
								"JS_CFUNC_MAGIC_DEF",
								"JS_CFUNC_MAGIC_DEF",
								"JS_CFUNC_MAGIC_DEF",
								"JS_CFUNC_MAGIC_DEF",
								"JS_CFUNC_MAGIC_DEF",
								"JS_CFUNC_MAGIC_DEF",
								"JS_CFUNC_MAGIC_DEF",
								"JS_CFUNC_MAGIC_DEF",
								"JS_PROP_INT32_DEF",
								"CV_MAKETYPE",
								"  js_mat_init",
								"  js_mat_export",
								"JS_INIT_MODULE",
								"JS_INIT_MODULE",
								"JS_INIT_MODULE"
							],
							"syntax": "Packages/Outline/outline.hidden-tmLanguage"
						},
						"translation.x": 0.0,
						"translation.y": 0.0,
						"zoom_level": 1.0
					},
					"stack_index": 0,
					"stack_multiselect": false,
					"type": "text"
				}
			]
		},
		{
			"sheets":
			[
				{
					"buffer": 1,
					"file": "CMakeLists.txt",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 4185,
						"regions":
						{
						},
						"selection":
						[
							[
								4142,
								4160
							]
						],
						"settings":
						{
							"syntax": "Packages/CMakeEditor/CMakeEditor.tmLanguage",
							"tab_size": 2,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 2338.0,
						"zoom_level": 1.0
					},
					"stack_index": 8,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 2,
					"file": "cmake/Functions.cmake",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 944,
						"regions":
						{
						},
						"selection":
						[
							[
								0,
								0
							]
						],
						"settings":
						{
							"syntax": "Packages/CMakeEditor/CMakeEditor.tmLanguage",
							"tab_size": 2,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 681.0,
						"zoom_level": 1.0
					},
					"stack_index": 40,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 3,
					"file": "init_module.cpp",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 2361,
						"regions":
						{
						},
						"selection":
						[
							[
								1445,
								1461
							]
						],
						"settings":
						{
							"syntax": "Packages/C++11/C++11.tmLanguage",
							"tab_size": 2,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 480.0,
						"zoom_level": 1.0
					},
					"stack_index": 10,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 4,
					"file": "js_contour.cpp",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 32329,
						"regions":
						{
						},
						"selection":
						[
							[
								8395,
								8395
							]
						],
						"settings":
						{
							"syntax": "Packages/C++11/C++11.tmLanguage",
							"tab_size": 2,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 6320.0,
						"zoom_level": 1.0
					},
					"stack_index": 22,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 5,
					"file": "js_line.cpp",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 14400,
						"regions":
						{
						},
						"selection":
						[
							[
								9870,
								9870
							]
						],
						"settings":
						{
							"syntax": "Packages/C++11/C++11.tmLanguage",
							"tab_size": 2,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 6700.0,
						"zoom_level": 1.0
					},
					"stack_index": 5,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 6,
					"file": "js_mat.cpp",
					"selected": true,
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 47000,
						"regions":
						{
						},
						"selection":
						[
							[
								24892,
								25360
							]
						],
						"settings":
						{
							"syntax": "Packages/C++11/C++11.tmLanguage",
							"tab_size": 2,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 16854.0,
						"zoom_level": 1.0
					},
					"stack_index": 0,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 7,
					"file": "js_point.cpp",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 12536,
						"regions":
						{
						},
						"selection":
						[
							[
								7433,
								7433
							]
						],
						"settings":
						{
							"syntax": "Packages/C++11/C++11.tmLanguage",
							"tab_size": 2,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 5520.0,
						"zoom_level": 1.0
					},
					"stack_index": 20,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 8,
					"file": "util.hpp",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 7222,
						"regions":
						{
						},
						"selection":
						[
							[
								7097,
								7122
							]
						],
						"settings":
						{
							"syntax": "Packages/C++11/C++11.tmLanguage",
							"tab_size": 2,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 6026.0,
						"zoom_level": 1.0
					},
					"stack_index": 2,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 9,
					"file": "jsbindings.hpp",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 19798,
						"regions":
						{
						},
						"selection":
						[
							[
								6292,
								6292
							]
						],
						"settings":
						{
							"syntax": "Packages/C++11/C++11.tmLanguage",
							"tab_size": 2,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 3126.0,
						"zoom_level": 1.0
					},
					"stack_index": 1,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 10,
					"file": "LICENSE",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 1067,
						"regions":
						{
						},
						"selection":
						[
							[
								0,
								0
							]
						],
						"settings":
						{
							"syntax": "Packages/Text/Plain text.tmLanguage"
						},
						"translation.x": 0.0,
						"translation.y": 0.0,
						"zoom_level": 1.0
					},
					"stack_index": 17,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 11,
					"file": "js_array.hpp",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 17595,
						"regions":
						{
						},
						"selection":
						[
							[
								17532,
								17538
							]
						],
						"settings":
						{
							"syntax": "Packages/C++11/C++11.tmLanguage",
							"tab_size": 2,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 12386.0,
						"zoom_level": 1.0
					},
					"stack_index": 14,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 12,
					"file": "js_alloc.hpp",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 2472,
						"regions":
						{
						},
						"selection":
						[
							[
								0,
								0
							]
						],
						"settings":
						{
							"syntax": "Packages/C++11/C++11.tmLanguage",
							"tab_size": 2,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 0.0,
						"zoom_level": 1.0
					},
					"stack_index": 11,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 13,
					"file": "js_point_iterator.cpp",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 6043,
						"regions":
						{
						},
						"selection":
						[
							[
								5653,
								5653
							]
						],
						"settings":
						{
							"syntax": "Packages/C++11/C++11.tmLanguage",
							"tab_size": 2,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 3031.0,
						"zoom_level": 1.0
					},
					"stack_index": 32,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 14,
					"file": "js_rect.cpp",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 18566,
						"regions":
						{
						},
						"selection":
						[
							[
								12519,
								12519
							]
						],
						"settings":
						{
							"syntax": "Packages/C++11/C++11.tmLanguage",
							"tab_size": 2,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 8986.0,
						"zoom_level": 1.0
					},
					"stack_index": 19,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 15,
					"file": "js_line.hpp",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 2825,
						"regions":
						{
						},
						"selection":
						[
							[
								249,
								249
							]
						],
						"settings":
						{
							"syntax": "Packages/C++11/C++11.tmLanguage",
							"tab_size": 2,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 0.0,
						"zoom_level": 1.0
					},
					"stack_index": 21,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 16,
					"file": "js_mat.hpp",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 797,
						"regions":
						{
						},
						"selection":
						[
							[
								128,
								128
							]
						],
						"settings":
						{
							"syntax": "Packages/C++11/C++11.tmLanguage",
							"tab_size": 2,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 0.0,
						"zoom_level": 1.0
					},
					"stack_index": 38,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 17,
					"file": "js_point.hpp",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 2521,
						"regions":
						{
						},
						"selection":
						[
							[
								70,
								70
							]
						],
						"settings":
						{
							"syntax": "Packages/C++11/C++11.tmLanguage",
							"tab_size": 2,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 0.0,
						"zoom_level": 1.0
					},
					"stack_index": 37,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 18,
					"file": "js_point_iterator.hpp",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 791,
						"regions":
						{
						},
						"selection":
						[
							[
								106,
								106
							]
						],
						"settings":
						{
							"syntax": "Packages/C++11/C++11.tmLanguage",
							"tab_size": 2,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 0.0,
						"zoom_level": 1.0
					},
					"stack_index": 31,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 19,
					"file": "js_rect.hpp",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 2550,
						"regions":
						{
						},
						"selection":
						[
							[
								68,
								68
							]
						],
						"settings":
						{
							"syntax": "Packages/C++11/C++11.tmLanguage",
							"tab_size": 2,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 0.0,
						"zoom_level": 1.0
					},
					"stack_index": 36,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 20,
					"file": "js_size.hpp",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 2335,
						"regions":
						{
						},
						"selection":
						[
							[
								68,
								68
							]
						],
						"settings":
						{
							"syntax": "Packages/C++11/C++11.tmLanguage",
							"tab_size": 2,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 0.0,
						"zoom_level": 1.0
					},
					"stack_index": 30,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 21,
					"file": "js_size.cpp",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 14728,
						"regions":
						{
						},
						"selection":
						[
							[
								14436,
								14436
							]
						],
						"settings":
						{
							"syntax": "Packages/C++11/C++11.tmLanguage",
							"tab_size": 2,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 8506.0,
						"zoom_level": 1.0
					},
					"stack_index": 6,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 22,
					"file": "js_slice_iterator.cpp",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 6447,
						"regions":
						{
						},
						"selection":
						[
							[
								5525,
								5525
							]
						],
						"settings":
						{
							"syntax": "Packages/C++11/C++11.tmLanguage",
							"tab_size": 2,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 3324.0,
						"zoom_level": 1.0
					},
					"stack_index": 3,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 23,
					"file": "js_slice_iterator.hpp",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 807,
						"regions":
						{
						},
						"selection":
						[
							[
								136,
								136
							]
						],
						"settings":
						{
							"syntax": "Packages/C++11/C++11.tmLanguage",
							"tab_size": 2,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 0.0,
						"zoom_level": 1.0
					},
					"stack_index": 35,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 24,
					"file": "js_subdiv2d.cpp",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 10862,
						"regions":
						{
						},
						"selection":
						[
							[
								10862,
								10862
							]
						],
						"settings":
						{
							"syntax": "Packages/C++11/C++11.tmLanguage",
							"tab_size": 2,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 5435.0,
						"zoom_level": 1.0
					},
					"stack_index": 29,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 25,
					"file": "js_umat.cpp",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 29746,
						"regions":
						{
						},
						"selection":
						[
							[
								29499,
								29499
							]
						],
						"settings":
						{
							"syntax": "Packages/C++11/C++11.tmLanguage",
							"tab_size": 2,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 21561.0,
						"zoom_level": 1.0
					},
					"stack_index": 7,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 26,
					"file": "js_umat.hpp",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 1863,
						"regions":
						{
						},
						"selection":
						[
							[
								116,
								116
							]
						],
						"settings":
						{
							"syntax": "Packages/C++11/C++11.tmLanguage",
							"tab_size": 2,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 0.0,
						"zoom_level": 1.0
					},
					"stack_index": 34,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 27,
					"file": "js_utility.cpp",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 5972,
						"regions":
						{
						},
						"selection":
						[
							[
								5970,
								5970
							]
						],
						"settings":
						{
							"syntax": "Packages/C++11/C++11.tmLanguage",
							"tab_size": 2,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 3304.0,
						"zoom_level": 1.0
					},
					"stack_index": 28,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 28,
					"file": "js_video_capture.cpp",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 6393,
						"regions":
						{
						},
						"selection":
						[
							[
								5818,
								5818
							]
						],
						"settings":
						{
							"syntax": "Packages/C++11/C++11.tmLanguage",
							"tab_size": 2,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 3761.0,
						"zoom_level": 1.0
					},
					"stack_index": 27,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 29,
					"file": "jsbindings.cpp",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 4698,
						"regions":
						{
						},
						"selection":
						[
							[
								254,
								254
							]
						],
						"settings":
						{
							"syntax": "Packages/C++11/C++11.tmLanguage",
							"tab_size": 2,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 0.0,
						"zoom_level": 1.0
					},
					"stack_index": 18,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 30,
					"file": "js.cpp",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 14147,
						"regions":
						{
						},
						"selection":
						[
							[
								12,
								12
							]
						],
						"settings":
						{
							"syntax": "Packages/C++11/C++11.tmLanguage",
							"tab_size": 2,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 540.0,
						"zoom_level": 1.0
					},
					"stack_index": 15,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 31,
					"file": "js.hpp",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 23851,
						"regions":
						{
						},
						"selection":
						[
							[
								99,
								99
							]
						],
						"settings":
						{
							"syntax": "Packages/C++11/C++11.tmLanguage",
							"tab_size": 2,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 0.0,
						"zoom_level": 1.0
					},
					"stack_index": 16,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 32,
					"file": "js_clahe.cpp",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 4958,
						"regions":
						{
						},
						"selection":
						[
							[
								4958,
								4958
							]
						],
						"settings":
						{
							"syntax": "Packages/C++11/C++11.tmLanguage",
							"tab_size": 2,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 2724.0,
						"zoom_level": 1.0
					},
					"stack_index": 23,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 33,
					"file": "js_contour.hpp",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 2158,
						"regions":
						{
						},
						"selection":
						[
							[
								229,
								229
							]
						],
						"settings":
						{
							"syntax": "Packages/C++11/C++11.tmLanguage",
							"tab_size": 2,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 0.0,
						"zoom_level": 1.0
					},
					"stack_index": 24,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 34,
					"file": "js_cv.cpp",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 84543,
						"regions":
						{
						},
						"selection":
						[
							[
								84016,
								84016
							]
						],
						"settings":
						{
							"syntax": "Packages/C++11/C++11.tmLanguage",
							"tab_size": 2,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 46661.0,
						"zoom_level": 1.0
					},
					"stack_index": 33,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 35,
					"file": "js_cv.hpp",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 1321,
						"regions":
						{
						},
						"selection":
						[
							[
								287,
								287
							]
						],
						"settings":
						{
							"syntax": "Packages/C++11/C++11.tmLanguage",
							"tab_size": 2,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 0.0,
						"zoom_level": 1.0
					},
					"stack_index": 39,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 36,
					"file": "js_draw.cpp",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 16098,
						"regions":
						{
						},
						"selection":
						[
							[
								15423,
								15441
							]
						],
						"settings":
						{
							"syntax": "Packages/C++11/C++11.tmLanguage",
							"tab_size": 2,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 9903.0,
						"zoom_level": 1.0
					},
					"stack_index": 4,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 37,
					"file": "cmake/CCache.cmake",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 1748,
						"regions":
						{
						},
						"selection":
						[
							[
								1747,
								1747
							]
						],
						"settings":
						{
							"syntax": "Packages/CMakeEditor/CMakeEditor.tmLanguage",
							"tab_size": 2,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 98.0,
						"zoom_level": 1.0
					},
					"stack_index": 25,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 38,
					"file": "cmake/CheckFlags.cmake",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 5478,
						"regions":
						{
						},
						"selection":
						[
							[
								2433,
								2433
							]
						],
						"settings":
						{
							"syntax": "Packages/CMakeEditor/CMakeEditor.tmLanguage",
							"tab_size": 2,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 1200.0,
						"zoom_level": 1.0
					},
					"stack_index": 13,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 39,
					"file": "cmake/JSBindings.cmake",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 5641,
						"regions":
						{
						},
						"selection":
						[
							[
								1991,
								1991
							]
						],
						"settings":
						{
							"syntax": "Packages/CMakeEditor/CMakeEditor.tmLanguage",
							"tab_size": 2,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 232.0,
						"zoom_level": 1.0
					},
					"stack_index": 9,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 40,
					"file": "cmake/OpenCV.cmake",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 6229,
						"regions":
						{
						},
						"selection":
						[
							[
								449,
								449
							]
						],
						"settings":
						{
							"syntax": "Packages/CMakeEditor/CMakeEditor.tmLanguage",
							"tab_size": 2,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 0.0,
						"zoom_level": 1.0
					},
					"stack_index": 26,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 41,
					"file": "cmake/FindQuickJS.cmake",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 5441,
						"regions":
						{
						},
						"selection":
						[
							[
								4893,
								4961
							]
						],
						"settings":
						{
							"syntax": "Packages/CMakeEditor/CMakeEditor.tmLanguage",
							"tab_size": 2,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 2088.0,
						"zoom_level": 1.0
					},
					"stack_index": 12,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 42,
					"file": "cmake/SDL2.cmake",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 1939,
						"regions":
						{
						},
						"selection":
						[
							[
								0,
								0
							]
						],
						"settings":
						{
							"syntax": "Packages/CMakeEditor/CMakeEditor.tmLanguage",
							"tab_size": 2,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 0.0,
						"zoom_level": 1.0
					},
					"stack_index": 41,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 43,
					"file": "cmake/ccache.cmake",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 2552,
						"regions":
						{
						},
						"selection":
						[
							[
								0,
								0
							]
						],
						"settings":
						{
							"syntax": "Packages/CMakeEditor/CMakeEditor.tmLanguage",
							"tab_size": 2,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 0.0,
						"zoom_level": 1.0
					},
					"stack_index": 42,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 44,
					"file": "cmake/functions.cmake",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 944,
						"regions":
						{
						},
						"selection":
						[
							[
								8,
								8
							]
						],
						"settings":
						{
							"syntax": "Packages/CMakeEditor/CMakeEditor.tmLanguage",
							"tab_size": 2,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 0.0,
						"zoom_level": 1.0
					},
					"stack_index": 43,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 45,
					"file": "cmake/check-flags.cmake",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 5451,
						"regions":
						{
						},
						"selection":
						[
							[
								0,
								0
							]
						],
						"settings":
						{
							"syntax": "Packages/CMakeEditor/CMakeEditor.tmLanguage",
							"tab_size": 2,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 0.0,
						"zoom_level": 1.0
					},
					"stack_index": 44,
					"stack_multiselect": false,
					"type": "text"
				}
			]
		}
	],
	"incremental_find":
	{
		"height": 29.0
	},
	"input":
	{
		"height": 42.0
	},
	"layout":
	{
		"cells":
		[
			[
				2,
				0,
				3,
				2
			],
			[
				0,
				0,
				2,
				2
			]
		],
		"cols":
		[
			0.0,
			0.2,
			0.8,
			1.0
		],
		"rows":
		[
			0.0,
			0.5,
			1.0
		]
	},
	"menu_visible": true,
	"output.Debugger":
	{
		"height": 139.0
	},
	"output.Debugger: Console":
	{
		"height": 0.0
	},
	"output.Debugger: Protocol":
	{
		"height": 0.0
	},
	"output.find_results":
	{
		"height": 0.0
	},
	"pinned_build_system": "",
	"project": "qjs-opencv.sublime-project",
	"replace":
	{
		"height": 75.0
	},
	"save_all_on_build": true,
	"select_file":
	{
		"height": 0.0,
		"last_filter": "",
		"selected_items":
		[
			[
				"js-bin",
				"cmake/js-bindings.cmake"
			],
			[
				"cmake",
				"CMakeLists.txt"
			],
			[
				"wasi",
				"cmake/wasi.toolchain.cmake"
			],
			[
				"test-vid",
				"plot-cv/test-video.js"
			],
			[
				"cvPipe",
				"plot-cv/cvPipeline.js"
			],
			[
				"param",
				"plot-cv/param.js"
			],
			[
				"test-oencv",
				"plot-cv/test-opencv.js"
			],
			[
				"js_umat",
				"plot-cv/src/js_umat.hpp"
			],
			[
				"pixel_",
				"plot-cv/src/pixel_neighborhood.hpp"
			],
			[
				"test-opencv",
				"plot-cv/test-opencv.js"
			],
			[
				"js_typed",
				"plot-cv/src/js_typed_array.hpp"
			],
			[
				"opencv.cmake",
				"plot-cv/cmake/opencv.cmake"
			],
			[
				"test-vide",
				"plot-cv/test-video.js"
			],
			[
				"test-op",
				"plot-cv/test-opencv.js"
			],
			[
				"cvHigh",
				"plot-cv/cvHighGUI.js"
			],
			[
				"js.cpp",
				"plot-cv/src/js.cpp"
			],
			[
				"js_size",
				"plot-cv/src/js_size.hpp"
			],
			[
				"js_ma",
				"plot-cv/src/js_mat.cpp"
			],
			[
				"js_cv",
				"plot-cv/src/js_cv.cpp"
			],
			[
				"js_draw",
				"plot-cv/src/js_draw.cpp"
			],
			[
				"quickjs.h",
				"plot-cv/quickjs/quickjs.h"
			],
			[
				"test-open",
				"plot-cv/test-opencv.js"
			],
			[
				"js_mat",
				"plot-cv/src/js_mat.cpp"
			],
			[
				"jsbind",
				"plot-cv/src/jsbindings.hpp"
			],
			[
				"js_cv.cp",
				"plot-cv/src/js_cv.cpp"
			],
			[
				"util.js",
				"plot-cv/lib/util.js"
			],
			[
				"cvpipe",
				"plot-cv/cvPipeline.js"
			],
			[
				"param.js",
				"plot-cv/param.js"
			],
			[
				"test-video",
				"plot-cv/test-video.js"
			],
			[
				"test_w",
				"plot-cv/test_worker_module.js"
			],
			[
				"test-wo",
				"plot-cv/test-worker.js"
			],
			[
				"cvPip",
				"plot-cv/cvPipeline.js"
			],
			[
				"worker",
				"plot-cv/worker.js"
			],
			[
				"worker.js",
				"plot-cv/worker.js"
			],
			[
				"test-work",
				"plot-cv/test-worker.js"
			],
			[
				"test-uma",
				"plot-cv/test-umat.js"
			],
			[
				"clang-as",
				"plot-cv/clang-ast.js"
			],
			[
				"quickjs.c",
				"plot-cv/quickjs/quickjs.c"
			],
			[
				"filesys",
				"plot-cv/lib/filesystem.js"
			],
			[
				"console",
				"plot-cv/lib/consoleSetup.js"
			],
			[
				"util",
				"plot-cv/lib/util.js"
			],
			[
				"bjson",
				"plot-cv/bjson.js"
			],
			[
				"ast-shel",
				"plot-cv/ast-shell.js"
			],
			[
				"clang-ast",
				"plot-cv/clang-ast.js"
			],
			[
				"clang-list",
				"plot-cv/clang-list.js"
			],
			[
				"test-bjs",
				"plot-cv/test-bjson.js"
			],
			[
				"repl.js",
				"plot-cv/repl.js"
			],
			[
				"clang-li",
				"plot-cv/clang-list.js"
			],
			[
				"clang-",
				"plot-cv/clang-ast.js"
			],
			[
				"ast-shell",
				"plot-cv/ast-shell.js"
			],
			[
				"test-eagle",
				"test-eagle.js"
			],
			[
				"",
				"plot-cv/test-ecmascript2.js"
			],
			[
				"repl.j",
				"plot-cv/repl.js"
			],
			[
				"test-ecmascript2.js",
				"plot-cv/test-ecmascript2.js"
			],
			[
				"test-ecmascript.js",
				"plot-cv/test-ecmascript.js"
			],
			[
				"repl",
				"plot-cv/repl.js"
			],
			[
				"parser2",
				"plot-cv/lib/ecmascript/parser2.js"
			],
			[
				"test-ecma",
				"plot-cv/test-ecmascript2.es"
			],
			[
				"test-parse",
				"plot-cv/test-parse.js"
			],
			[
				"grammar.js",
				"plot-cv/lib/parse/grammar.js"
			],
			[
				"terminal",
				"plot-cv/terminal.js"
			],
			[
				"test_lex",
				"plot-cv/quickjs/modules/tests/test_lexer.js"
			],
			[
				"test-ec",
				"plot-cv/test-ecmascript.js"
			],
			[
				"parser.js",
				"plot-cv/lib/ecmascript/parser.js"
			],
			[
				"printer.",
				"plot-cv/lib/ecmascript/printer.js"
			],
			[
				"estree",
				"plot-cv/lib/ecmascript/estree.js"
			],
			[
				"parser2.j",
				"plot-cv/lib/ecmascript/parser2.js"
			],
			[
				"tmp.js",
				"plot-cv/tmp.js"
			],
			[
				"test-util",
				"plot-cv/test-util.js"
			],
			[
				"printer",
				"plot-cv/lib/ecmascript/printer.js"
			],
			[
				"parser",
				"plot-cv/lib/ecmascript/parser.js"
			],
			[
				"repl.",
				"repl.js"
			],
			[
				"utils.h",
				"plot-cv/utils.h"
			],
			[
				"test-str",
				"plot-cv/quickjs/modules/test-str0.c"
			],
			[
				"property-en",
				"plot-cv/quickjs/modules/property-enumeration.h"
			],
			[
				"cutil",
				"plot-cv/quickjs/cutils.c"
			],
			[
				"quickjs-lex",
				"plot-cv/quickjs/modules/quickjs-lexer.c"
			],
			[
				"test-libre",
				"plot-cv/quickjs/modules/test-libregexp.c"
			],
			[
				"quickjs-in",
				"plot-cv/quickjs/modules/quickjs-internal.h"
			],
			[
				"consoleS",
				"plot-cv/lib/consoleSetup.js"
			],
			[
				"test-ed",
				"plot-cv/test-editline.js"
			],
			[
				"gl.js",
				"plot-cv/gl.js"
			],
			[
				"editline",
				"plot-cv/editline.js"
			]
		],
		"width": 0.0
	},
	"select_project":
	{
		"height": 500.0,
		"last_filter": "",
		"selected_items":
		[
			[
				"",
				"~/Projects/plot-cv/quickjs/modules/modules.sublime-project"
			]
		],
		"width": 380.0
	},
	"select_symbol":
	{
		"height": 0.0,
		"last_filter": "",
		"selected_items":
		[
		],
		"width": 0.0
	},
	"selected_group": 1,
	"settings":
	{
	},
	"show_minimap": true,
	"show_open_files": false,
	"show_tabs": true,
	"side_bar_visible": true,
	"side_bar_width": 406.0,
	"status_bar_visible": true,
	"template_settings":
	{
	}
}
